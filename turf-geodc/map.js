(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/Users/tmcw/src/presentations/turf-geodc/index.js":[function(require,module,exports){
var turf = require('turf');
var map = L.map('map', {
    zoomControl: false,
    crs: L.CRS.Simple,
    scrollWheelZoom: false
}).setView([0, 0], 0);

map.attributionControl.setPrefix('(t) to toggle transforms, (e) to reset extent');

var theLayer = L.layerGroup().addTo(map);

function color() {
    return randomColor({
        luminosity: 'light'
    });
}

var options = [
    {
        name: 'Original',
        data: logo,
        color: color()
    },
    {
        name: 'Envelope',
        data: turf.envelope(logo),
        color: color()
    },
    {
        name: 'Center',
        data: turf.center(logo),
        color: color()
    },
    {
        name: 'Explode',
        data: turf.explode(logo),
        color: color()
    },
    {
        name: 'TIN',
        data: turf.tin(turf.explode(logo)),
        color: color()
    },
    {
        name: 'Convex',
        data: turf.convex(logo),
        color: color()
    },
    {
        name: 'Flip',
        data: turf.flip(logo),
        color: color()
    },
    {
        name: 'Random',
        data: turf.random('points', 50),
        color: color()
    },
    {
        name: 'Hex',
        data: turf.hex(turf.extent(logo), 10),
        color: color()
    },
    {
        name: 'Hex-Count',
        data: turf.count(turf.hex(turf.extent(logo), 10), turf.explode(logo), 'count'),
        color: color()
    }
];

var optionsDiv = document.getElementById('options');

options.forEach(function(o) {
    var link = optionsDiv.appendChild(document.createElement('a'));
    link.innerHTML = o.name;
    link.style.background = o.color;
    link.onclick = function() {
        selectData(o.data);
        togglePanel();
    };
});

function selectData(data) {
    theLayer.clearLayers();
    var added = L.geoJson(data, {
        style: function (feature) {
            if (feature.properties && feature.properties.count !== undefined) {
                return {
                    fillColor: '#fff',
                    fillOpacity: feature.properties.count / 10,
                    weight: 1,
                    opacity: 2,
                    color: '#000'
                };
            } else {
                return {
                    fillColor: '#fff',
                    fillOpacity: 0.9,
                    weight: 5,
                    opacity: 2,
                    color: '#000'
                };
            }
        },
        pointToLayer: function (feature, latlng) {
            return L.circleMarker(latlng, {
              radius: 10,
              fill: '#fff',
              stroke: true,
              color: '#000',
              opacity: 1,
              weight: 3,
              fillOpacity: 1
            });
        }
    })
    .addTo(theLayer);
}

selectData(options[0].data);

document.addEventListener('keydown', function(e) {
    if (e.which === 84) togglePanel();
    if (e.which === 69) {
        map.fitBounds(L.geoJson(logo).getBounds());
    }
});
function togglePanel(e) {
    if (document.getElementById('options').className != 'show') {
        document.getElementById('options').className = 'show';
    } else {
        document.getElementById('options').className = '';
    }
}


map.fitBounds(theLayer.getLayers()[0].getBounds());

},{"turf":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/index.js":[function(require,module,exports){
/**
 * Turf is a modular GIS engine written in JavaScript. It performs geospatial
 * processing tasks with GeoJSON data and can be run on a server or in a browser.
 *
 * @module turf
 * @summary GIS For Web Maps
 */
module.exports = {
  isolines: require('turf-isolines'),
  isobands: require('turf-isobands'),
  merge: require('turf-merge'),
  convex: require('turf-convex'),
  within: require('turf-within'),
  concave: require('turf-concave'),
  count: require('turf-count'),
  erase: require('turf-erase'),
  variance: require('turf-variance'),
  deviation: require('turf-deviation'),
  median: require('turf-median'),
  min: require('turf-min'),
  max: require('turf-max'),
  aggregate: require('turf-aggregate'),
  flip: require('turf-flip'),
  simplify: require('turf-simplify'),
  sum: require('turf-sum'),
  average: require('turf-average'),
  bezier: require('turf-bezier'),
  tag: require('turf-tag'),
  size: require('turf-size'),
  sample: require('turf-sample'),
  jenks: require('turf-jenks'),
  quantile: require('turf-quantile'),
  envelope: require('turf-envelope'),
  square: require('turf-square'),
  midpoint: require('turf-midpoint'),
  buffer: require('turf-buffer'),
  center: require('turf-center'),
  centroid: require('turf-centroid'),
  combine: require('turf-combine'),
  distance: require('turf-distance'),
  explode: require('turf-explode'),
  extent: require('turf-extent'),
  bboxPolygon: require('turf-bbox-polygon'),
  featurecollection: require('turf-featurecollection'),
  filter: require('turf-filter'),
  grid: require('turf-grid'),
  inside: require('turf-inside'),
  intersect: require('turf-intersect'),
  linestring: require('turf-linestring'),
  nearest: require('turf-nearest'),
  planepoint: require('turf-planepoint'),
  point: require('turf-point'),
  polygon: require('turf-polygon'),
  random: require('turf-random'),
  reclass: require('turf-reclass'),
  remove: require('turf-remove'),
  tin: require('turf-tin'),
  union: require('turf-union'),
  bearing: require('turf-bearing'),
  destination: require('turf-destination'),
  hex: require('turf-hex'),
  kinks: require('turf-kinks'),
  pointOnSurface: require('turf-point-on-surface'),
  area: require('turf-area'),
  along: require('turf-along'),
  lineDistance: require('turf-line-distance')
};

},{"turf-aggregate":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/index.js","turf-along":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/index.js","turf-area":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-area/index.js","turf-average":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-average/index.js","turf-bbox-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bbox-polygon/index.js","turf-bearing":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bearing/index.js","turf-bezier":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bezier/index.js","turf-buffer":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/index.js","turf-center":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/index.js","turf-centroid":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/index.js","turf-combine":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-combine/index.js","turf-concave":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/index.js","turf-convex":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/index.js","turf-count":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-count/index.js","turf-destination":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/index.js","turf-deviation":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-deviation/index.js","turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-distance/index.js","turf-envelope":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/index.js","turf-erase":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/index.js","turf-explode":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/index.js","turf-extent":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-extent/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-featurecollection/index.js","turf-filter":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-filter/index.js","turf-flip":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-flip/index.js","turf-grid":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-grid/index.js","turf-hex":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-hex/index.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-inside/index.js","turf-intersect":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/index.js","turf-isobands":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/index.js","turf-isolines":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/index.js","turf-jenks":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-jenks/index.js","turf-kinks":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/index.js","turf-line-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/index.js","turf-linestring":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-linestring/index.js","turf-max":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-max/index.js","turf-median":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-median/index.js","turf-merge":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/index.js","turf-midpoint":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-midpoint/index.js","turf-min":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-min/index.js","turf-nearest":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-nearest/index.js","turf-planepoint":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-planepoint/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point/index.js","turf-point-on-surface":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-polygon/index.js","turf-quantile":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-quantile/index.js","turf-random":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-random/index.js","turf-reclass":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-reclass/index.js","turf-remove":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-remove/index.js","turf-sample":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sample/index.js","turf-simplify":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-simplify/index.js","turf-size":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-size/index.js","turf-square":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/index.js","turf-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sum/index.js","turf-tag":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tag/index.js","turf-tin":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tin/index.js","turf-union":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/index.js","turf-variance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-variance/index.js","turf-within":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-within/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/is-array/index.js":[function(require,module,exports){

/**
 * isArray
 */

var isArray = Array.isArray;

/**
 * toString
 */

var str = Object.prototype.toString;

/**
 * Whether or not the given `val`
 * is an array.
 *
 * example:
 *
 *        isArray([]);
 *        // > true
 *        isArray(arguments);
 *        // > false
 *        isArray('');
 *        // > false
 *
 * @param {mixed} val
 * @return {bool}
 */

module.exports = isArray || function (val) {
  return !! val && '[object Array]' == str.call(val);
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/index.js":[function(require,module,exports){
var average = require('turf-average');
var sum = require('turf-sum');
var median = require('turf-median');
var min = require('turf-min');
var max = require('turf-max');
var deviation = require('turf-deviation');
var variance = require('turf-variance');
var count = require('turf-count');
var operations = {};
operations.average = average;
operations.sum = sum;
operations.median = median;
operations.min = min;
operations.max = max;
operations.deviation = deviation;
operations.variance = variance;
operations.count = count;

/**
* Calculates a series of aggregations for a set of {@link Point} features within a set of {@link Polygon} features. Sum, average, count, min, max, and deviation are supported.
*
* @module turf/aggregate
* @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
* @param {FeatureCollection} points a FeatureCollection of {@link Point} features
* @param {Array} aggregations an array of aggregation objects
* @return {FeatureCollection} a FeatureCollection of {@link Polygon} features with properties listed as `outField` values in `aggregations`
* @example
* var polygons = turf.featurecollection([
*   turf.polygon([[
*     [1.669921, 48.632908],
*     [1.669921, 49.382372],
*     [3.636474, 49.382372],
*     [3.636474, 48.632908],
*     [1.669921, 48.632908]]
*   ]),
*   turf.polygon([[
*     [2.230224, 47.85003],
*     [2.230224, 48.611121],
*     [4.361572, 48.611121],
*     [4.361572, 47.85003],
*     [2.230224, 47.85003]]
*   ])
* ]);
* var points = turf.featurecollection([
*   turf.point([2.054443,49.138596], {population: 200}),
*   turf.point([3.065185,48.850258], {population: 600}),
*   turf.point([2.329101,48.79239], {population: 100}),
*   turf.point([2.614746,48.334343], {population: 200}),
*   turf.point([3.416748,48.056053], {population: 300})]);
* var aggregations = [
*   {
*     aggregation: 'sum',
*     inField: 'population',
*     outField: 'pop_sum'
*   },
*   {
*     aggregation: 'average',
*     inField: 'population',
*     outField: 'pop_avg'
*   },
*   {
*     aggregation: 'median',
*     inField: 'population',
*     outField: 'pop_median'
*   },
*   {
*     aggregation: 'min',
*     inField: 'population',
*     outField: 'pop_min'
*   },
*   {
*     aggregation: 'max',
*     inField: 'population',
*     outField: 'pop_max'
*   },
*   {
*     aggregation: 'deviation',
*     inField: 'population',
*     outField: 'pop_deviation'
*   },
*   {
*     aggregation: 'variance',
*     inField: 'population',
*     outField: 'pop_variance'
*   },
*   {
*     aggregation: 'count',
*     inField: '',
*     outField: 'point_count'
*   }
* ];
*
* var aggregated = turf.aggregate(
*   polygons, points, aggregations);
*
* var result = turf.featurecollection(
*   points.features.concat(aggregated.features));
*
* //=result
*/

module.exports = function(polygons, points, aggregations){
  for (var i = 0, len = aggregations.length; i < len; i++) {
    var agg = aggregations[i],
      operation = agg.aggregation,
      unrecognizedError;

    if (isAggregationOperation(operation)) {
      if (operation === 'count') {
        polygons = operations[operation](polygons, points, agg.outField);
      } else {
        polygons = operations[operation](polygons, points, agg.inField, agg.outField);
      }
    } else {
      throw new Error('"'+ operation +'" is not a recognized aggregation operation.');
    }
  }

  return polygons;
};

function isAggregationOperation(operation) {
  return operation === 'average' ||
    operation === 'sum' ||
    operation === 'median' ||
    operation === 'min' ||
    operation === 'max' ||
    operation === 'deviation' ||
    operation === 'variance' ||
    operation === 'count';
}

},{"turf-average":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-average/index.js","turf-count":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-count/index.js","turf-deviation":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/index.js","turf-max":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/index.js","turf-median":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/index.js","turf-min":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-min/index.js","turf-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-sum/index.js","turf-variance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-average/index.js":[function(require,module,exports){
var inside = require('turf-inside');

module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties) poly.properties = {};
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) values.push(pt.properties[inField]);
    });
    poly.properties[outField] = average(values);
  });

  return polyFC;
}

function average(values) {
  var sum = 0;
  for (var i = 0; i < values.length; i++) {
    sum += values[i];
  }
  return sum / values.length;
}

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-average/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-average/node_modules/turf-inside/index.js":[function(require,module,exports){
// http://en.wikipedia.org/wiki/Even%E2%80%93odd_rule
// modified from: https://github.com/substack/point-in-polygon/blob/master/index.js
// which was modified from http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html

module.exports = function(point, polygon) {
  var polys = polygon.geometry.coordinates;
  var pt = [point.geometry.coordinates[0], point.geometry.coordinates[1]];
  // normalize to multipolygon
  if(polygon.geometry.type === 'Polygon') polys = [polys];

  var insidePoly = false;
  var i = 0;
  while (i < polys.length && !insidePoly) {
    // check if it is in the outer ring first
    if(inRing(pt, polys[i][0])) {
      var inHole = false;
      var k = 1;
      // check for the point in any of the holes
      while(k < polys[i].length && !inHole) {
        if(inRing(pt, polys[i][k])) {
          inHole = true;
        }
        k++;
      }
      if(!inHole) insidePoly = true;
    }
    i++;
  }
  return insidePoly;
}

// pt is [x,y] and ring is [[x,y], [x,y],..]
function inRing (pt, ring) {
  var isInside = false;
  for (var i = 0, j = ring.length - 1; i < ring.length; j = i++) {
    var xi = ring[i][0], yi = ring[i][1];
    var xj = ring[j][0], yj = ring[j][1];
    
    var intersect = ((yi > pt[1]) != (yj > pt[1]))
        && (pt[0] < (xj - xi) * (pt[1] - yi) / (yj - yi) + xi);
    if (intersect) isInside = !isInside;
  }
  return isInside;
}


},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-count/index.js":[function(require,module,exports){
var inside = require('turf-inside');

module.exports = function(polyFC, ptFC, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties) poly.properties = {};
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(1);
      }
    })
    poly.properties[outField] = values.length;
  })

  return polyFC;
}

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-count/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-count/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-average/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = ss.standard_deviation(values);
  })

  return polyFC;
}

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
/* global module */
// # simple-statistics
//
// A simple, literate statistics system. The code below uses the
// [Javascript module pattern](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth),
// eventually assigning `simple-statistics` to `ss` in browsers or the
// `exports` object for node.js
(function() {
    var ss = {};

    if (typeof module !== 'undefined') {
        // Assign the `ss` object to exports, so that you can require
        // it in [node.js](http://nodejs.org/)
        module.exports = ss;
    } else {
        // Otherwise, in a browser, we assign `ss` to the window object,
        // so you can simply refer to it as `ss`.
        this.ss = ss;
    }

    // # [Linear Regression](http://en.wikipedia.org/wiki/Linear_regression)
    //
    // [Simple linear regression](http://en.wikipedia.org/wiki/Simple_linear_regression)
    // is a simple way to find a fitted line
    // between a set of coordinates.
    function linear_regression() {
        var linreg = {},
            data = [];

        // Assign data to the model. Data is assumed to be an array.
        linreg.data = function(x) {
            if (!arguments.length) return data;
            data = x.slice();
            return linreg;
        };

        // Calculate the slope and y-intercept of the regression line
        // by calculating the least sum of squares
        linreg.mb = function() {
            var m, b;

            // Store data length in a local variable to reduce
            // repeated object property lookups
            var data_length = data.length;

            //if there's only one point, arbitrarily choose a slope of 0
            //and a y-intercept of whatever the y of the initial point is
            if (data_length === 1) {
                m = 0;
                b = data[0][1];
            } else {
                // Initialize our sums and scope the `m` and `b`
                // variables that define the line.
                var sum_x = 0, sum_y = 0,
                    sum_xx = 0, sum_xy = 0;

                // Use local variables to grab point values
                // with minimal object property lookups
                var point, x, y;

                // Gather the sum of all x values, the sum of all
                // y values, and the sum of x^2 and (x*y) for each
                // value.
                //
                // In math notation, these would be SS_x, SS_y, SS_xx, and SS_xy
                for (var i = 0; i < data_length; i++) {
                    point = data[i];
                    x = point[0];
                    y = point[1];

                    sum_x += x;
                    sum_y += y;

                    sum_xx += x * x;
                    sum_xy += x * y;
                }

                // `m` is the slope of the regression line
                m = ((data_length * sum_xy) - (sum_x * sum_y)) /
                    ((data_length * sum_xx) - (sum_x * sum_x));

                // `b` is the y-intercept of the line.
                b = (sum_y / data_length) - ((m * sum_x) / data_length);
            }

            // Return both values as an object.
            return { m: m, b: b };
        };

        // a shortcut for simply getting the slope of the regression line
        linreg.m = function() {
            return linreg.mb().m;
        };

        // a shortcut for simply getting the y-intercept of the regression
        // line.
        linreg.b = function() {
            return linreg.mb().b;
        };

        // ## Fitting The Regression Line
        //
        // This is called after `.data()` and returns the
        // equation `y = f(x)` which gives the position
        // of the regression line at each point in `x`.
        linreg.line = function() {

            // Get the slope, `m`, and y-intercept, `b`, of the line.
            var mb = linreg.mb(),
                m = mb.m,
                b = mb.b;

            // Return a function that computes a `y` value for each
            // x value it is given, based on the values of `b` and `a`
            // that we just computed.
            return function(x) {
                return b + (m * x);
            };
        };

        return linreg;
    }

    // # [R Squared](http://en.wikipedia.org/wiki/Coefficient_of_determination)
    //
    // The r-squared value of data compared with a function `f`
    // is the sum of the squared differences between the prediction
    // and the actual value.
    function r_squared(data, f) {
        if (data.length < 2) return 1;

        // Compute the average y value for the actual
        // data set in order to compute the
        // _total sum of squares_
        var sum = 0, average;
        for (var i = 0; i < data.length; i++) {
            sum += data[i][1];
        }
        average = sum / data.length;

        // Compute the total sum of squares - the
        // squared difference between each point
        // and the average of all points.
        var sum_of_squares = 0;
        for (var j = 0; j < data.length; j++) {
            sum_of_squares += Math.pow(average - data[j][1], 2);
        }

        // Finally estimate the error: the squared
        // difference between the estimate and the actual data
        // value at each point.
        var err = 0;
        for (var k = 0; k < data.length; k++) {
            err += Math.pow(data[k][1] - f(data[k][0]), 2);
        }

        // As the error grows larger, its ratio to the
        // sum of squares increases and the r squared
        // value grows lower.
        return 1 - (err / sum_of_squares);
    }


    // # [Bayesian Classifier](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)
    //
    // This is a naÃ¯ve bayesian classifier that takes
    // singly-nested objects.
    function bayesian() {
        // The `bayes_model` object is what will be exposed
        // by this closure, with all of its extended methods, and will
        // have access to all scope variables, like `total_count`.
        var bayes_model = {},
            // The number of items that are currently
            // classified in the model
            total_count = 0,
            // Every item classified in the model
            data = {};

        // ## Train
        // Train the classifier with a new item, which has a single
        // dimension of Javascript literal keys and values.
        bayes_model.train = function(item, category) {
            // If the data object doesn't have any values
            // for this category, create a new object for it.
            if (!data[category]) data[category] = {};

            // Iterate through each key in the item.
            for (var k in item) {
                var v = item[k];
                // Initialize the nested object `data[category][k][item[k]]`
                // with an object of keys that equal 0.
                if (data[category][k] === undefined) data[category][k] = {};
                if (data[category][k][v] === undefined) data[category][k][v] = 0;

                // And increment the key for this key/value combination.
                data[category][k][item[k]]++;
            }
            // Increment the number of items classified
            total_count++;
        };

        // ## Score
        // Generate a score of how well this item matches all
        // possible categories based on its attributes
        bayes_model.score = function(item) {
            // Initialize an empty array of odds per category.
            var odds = {}, category;
            // Iterate through each key in the item,
            // then iterate through each category that has been used
            // in previous calls to `.train()`
            for (var k in item) {
                var v = item[k];
                for (category in data) {
                    // Create an empty object for storing key - value combinations
                    // for this category.
                    if (odds[category] === undefined) odds[category] = {};

                    // If this item doesn't even have a property, it counts for nothing,
                    // but if it does have the property that we're looking for from
                    // the item to categorize, it counts based on how popular it is
                    // versus the whole population.
                    if (data[category][k]) {
                        odds[category][k + '_' + v] = (data[category][k][v] || 0) / total_count;
                    } else {
                        odds[category][k + '_' + v] = 0;
                    }
                }
            }

            // Set up a new object that will contain sums of these odds by category
            var odds_sums = {};

            for (category in odds) {
                // Tally all of the odds for each category-combination pair -
                // the non-existence of a category does not add anything to the
                // score.
                for (var combination in odds[category]) {
                    if (odds_sums[category] === undefined) odds_sums[category] = 0;
                    odds_sums[category] += odds[category][combination];
                }
            }

            return odds_sums;
        };

        // Return the completed model.
        return bayes_model;
    }

    // # sum
    //
    // is simply the result of adding all numbers
    // together, starting from zero.
    //
    // This runs on `O(n)`, linear time in respect to the array
    function sum(x) {
        var value = 0;
        for (var i = 0; i < x.length; i++) {
            value += x[i];
        }
        return value;
    }

    // # mean
    //
    // is the sum over the number of values
    //
    // This runs on `O(n)`, linear time in respect to the array
    function mean(x) {
        // The mean of no numbers is null
        if (x.length === 0) return null;

        return sum(x) / x.length;
    }

    // # geometric mean
    //
    // a mean function that is more useful for numbers in different
    // ranges.
    //
    // this is the nth root of the input numbers multiplied by each other
    //
    // This runs on `O(n)`, linear time in respect to the array
    function geometric_mean(x) {
        // The mean of no numbers is null
        if (x.length === 0) return null;

        // the starting value.
        var value = 1;

        for (var i = 0; i < x.length; i++) {
            // the geometric mean is only valid for positive numbers
            if (x[i] <= 0) return null;

            // repeatedly multiply the value by each number
            value *= x[i];
        }

        return Math.pow(value, 1 / x.length);
    }


    // # harmonic mean
    //
    // a mean function typically used to find the average of rates
    //
    // this is the reciprocal of the arithmetic mean of the reciprocals
    // of the input numbers
    //
    // This runs on `O(n)`, linear time in respect to the array
    function harmonic_mean(x) {
        // The mean of no numbers is null
        if (x.length === 0) return null;

        var reciprocal_sum = 0;

        for (var i = 0; i < x.length; i++) {
            // the harmonic mean is only valid for positive numbers
            if (x[i] <= 0) return null;

            reciprocal_sum += 1 / x[i];
        }

        // divide n by the the reciprocal sum
        return x.length / reciprocal_sum;
    }


    // # min
    //
    // This is simply the minimum number in the set.
    //
    // This runs on `O(n)`, linear time in respect to the array
    function min(x) {
        var value;
        for (var i = 0; i < x.length; i++) {
            // On the first iteration of this loop, min is
            // undefined and is thus made the minimum element in the array
            if (x[i] < value || value === undefined) value = x[i];
        }
        return value;
    }

    // # max
    //
    // This is simply the maximum number in the set.
    //
    // This runs on `O(n)`, linear time in respect to the array
    function max(x) {
        var value;
        for (var i = 0; i < x.length; i++) {
            // On the first iteration of this loop, max is
            // undefined and is thus made the maximum element in the array
            if (x[i] > value || value === undefined) value = x[i];
        }
        return value;
    }

    // # [variance](http://en.wikipedia.org/wiki/Variance)
    //
    // is the sum of squared deviations from the mean
    //
    // depends on `mean()`
    function variance(x) {
        // The variance of no numbers is null
        if (x.length === 0) return null;

        var mean_value = mean(x),
            deviations = [];

        // Make a list of squared deviations from the mean.
        for (var i = 0; i < x.length; i++) {
            deviations.push(Math.pow(x[i] - mean_value, 2));
        }

        // Find the mean value of that list
        return mean(deviations);
    }

    // # [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)
    //
    // is just the square root of the variance.
    //
    // depends on `variance()`
    function standard_deviation(x) {
        // The standard deviation of no numbers is null
        if (x.length === 0) return null;

        return Math.sqrt(variance(x));
    }

    // The sum of deviations to the Nth power.
    // When n=2 it's the sum of squared deviations.
    // When n=3 it's the sum of cubed deviations.
    //
    // depends on `mean()`
    function sum_nth_power_deviations(x, n) {
        var mean_value = mean(x),
            sum = 0;

        for (var i = 0; i < x.length; i++) {
            sum += Math.pow(x[i] - mean_value, n);
        }

        return sum;
    }

    // # [variance](http://en.wikipedia.org/wiki/Variance)
    //
    // is the sum of squared deviations from the mean
    //
    // depends on `sum_nth_power_deviations`
    function sample_variance(x) {
        // The variance of no numbers is null
        if (x.length <= 1) return null;

        var sum_squared_deviations_value = sum_nth_power_deviations(x, 2);

        // Find the mean value of that list
        return sum_squared_deviations_value / (x.length - 1);
    }

    // # [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)
    //
    // is just the square root of the variance.
    //
    // depends on `sample_variance()`
    function sample_standard_deviation(x) {
        // The standard deviation of no numbers is null
        if (x.length <= 1) return null;

        return Math.sqrt(sample_variance(x));
    }

    // # [covariance](http://en.wikipedia.org/wiki/Covariance)
    //
    // sample covariance of two datasets:
    // how much do the two datasets move together?
    // x and y are two datasets, represented as arrays of numbers.
    //
    // depends on `mean()`
    function sample_covariance(x, y) {

        // The two datasets must have the same length which must be more than 1
        if (x.length <= 1 || x.length != y.length){
            return null;
        }

        // determine the mean of each dataset so that we can judge each
        // value of the dataset fairly as the difference from the mean. this
        // way, if one dataset is [1, 2, 3] and [2, 3, 4], their covariance
        // does not suffer because of the difference in absolute values
        var xmean = mean(x),
            ymean = mean(y),
            sum = 0;

        // for each pair of values, the covariance increases when their
        // difference from the mean is associated - if both are well above
        // or if both are well below
        // the mean, the covariance increases significantly.
        for (var i = 0; i < x.length; i++){
            sum += (x[i] - xmean) * (y[i] - ymean);
        }

        // the covariance is weighted by the length of the datasets.
        return sum / (x.length - 1);
    }

    // # [correlation](http://en.wikipedia.org/wiki/Correlation_and_dependence)
    //
    // Gets a measure of how correlated two datasets are, between -1 and 1
    //
    // depends on `sample_standard_deviation()` and `sample_covariance()`
    function sample_correlation(x, y) {
        var cov = sample_covariance(x, y),
            xstd = sample_standard_deviation(x),
            ystd = sample_standard_deviation(y);

        if (cov === null || xstd === null || ystd === null) {
            return null;
        }

        return cov / xstd / ystd;
    }

    // # [median](http://en.wikipedia.org/wiki/Median)
    //
    // The middle number of a list. This is often a good indicator of 'the middle'
    // when there are outliers that skew the `mean()` value.
    function median(x) {
        // The median of an empty list is null
        if (x.length === 0) return null;

        // Sorting the array makes it easy to find the center, but
        // use `.slice()` to ensure the original array `x` is not modified
        var sorted = x.slice().sort(function (a, b) { return a - b; });

        // If the length of the list is odd, it's the central number
        if (sorted.length % 2 === 1) {
            return sorted[(sorted.length - 1) / 2];
        // Otherwise, the median is the average of the two numbers
        // at the center of the list
        } else {
            var a = sorted[(sorted.length / 2) - 1];
            var b = sorted[(sorted.length / 2)];
            return (a + b) / 2;
        }
    }

    // # [mode](http://bit.ly/W5K4Yt)
    //
    // The mode is the number that appears in a list the highest number of times.
    // There can be multiple modes in a list: in the event of a tie, this
    // algorithm will return the most recently seen mode.
    //
    // This implementation is inspired by [science.js](https://github.com/jasondavies/science.js/blob/master/src/stats/mode.js)
    //
    // This runs on `O(n)`, linear time in respect to the array
    function mode(x) {

        // Handle edge cases:
        // The median of an empty list is null
        if (x.length === 0) return null;
        else if (x.length === 1) return x[0];

        // Sorting the array lets us iterate through it below and be sure
        // that every time we see a new number it's new and we'll never
        // see the same number twice
        var sorted = x.slice().sort(function (a, b) { return a - b; });

        // This assumes it is dealing with an array of size > 1, since size
        // 0 and 1 are handled immediately. Hence it starts at index 1 in the
        // array.
        var last = sorted[0],
            // store the mode as we find new modes
            value,
            // store how many times we've seen the mode
            max_seen = 0,
            // how many times the current candidate for the mode
            // has been seen
            seen_this = 1;

        // end at sorted.length + 1 to fix the case in which the mode is
        // the highest number that occurs in the sequence. the last iteration
        // compares sorted[i], which is undefined, to the highest number
        // in the series
        for (var i = 1; i < sorted.length + 1; i++) {
            // we're seeing a new number pass by
            if (sorted[i] !== last) {
                // the last number is the new mode since we saw it more
                // often than the old one
                if (seen_this > max_seen) {
                    max_seen = seen_this;
                    value = last;
                }
                seen_this = 1;
                last = sorted[i];
            // if this isn't a new number, it's one more occurrence of
            // the potential mode
            } else { seen_this++; }
        }
        return value;
    }

    // # [t-test](http://en.wikipedia.org/wiki/Student's_t-test)
    //
    // This is to compute a one-sample t-test, comparing the mean
    // of a sample to a known value, x.
    //
    // in this case, we're trying to determine whether the
    // population mean is equal to the value that we know, which is `x`
    // here. usually the results here are used to look up a
    // [p-value](http://en.wikipedia.org/wiki/P-value), which, for
    // a certain level of significance, will let you determine that the
    // null hypothesis can or cannot be rejected.
    //
    // Depends on `standard_deviation()` and `mean()`
    function t_test(sample, x) {
        // The mean of the sample
        var sample_mean = mean(sample);

        // The standard deviation of the sample
        var sd = standard_deviation(sample);

        // Square root the length of the sample
        var rootN = Math.sqrt(sample.length);

        // Compute the known value against the sample,
        // returning the t value
        return (sample_mean - x) / (sd / rootN);
    }

    // # [2-sample t-test](http://en.wikipedia.org/wiki/Student's_t-test)
    //
    // This is to compute two sample t-test.
    // Tests whether "mean(X)-mean(Y) = difference", (
    // in the most common case, we often have `difference == 0` to test if two samples
    // are likely to be taken from populations with the same mean value) with
    // no prior knowledge on standard deviations of both samples
    // other than the fact that they have the same standard deviation.
    //
    // Usually the results here are used to look up a
    // [p-value](http://en.wikipedia.org/wiki/P-value), which, for
    // a certain level of significance, will let you determine that the
    // null hypothesis can or cannot be rejected.
    //
    // `diff` can be omitted if it equals 0.
    //
    // [This is used to confirm or deny](http://www.monarchlab.org/Lab/Research/Stats/2SampleT.aspx)
    // a null hypothesis that the two populations that have been sampled into
    // `sample_x` and `sample_y` are equal to each other.
    //
    // Depends on `sample_variance()` and `mean()`
    function t_test_two_sample(sample_x, sample_y, difference) {
        var n = sample_x.length,
            m = sample_y.length;

        // If either sample doesn't actually have any values, we can't
        // compute this at all, so we return `null`.
        if (!n || !m) return null ;

        // default difference (mu) is zero
        if (!difference) difference = 0;

        var meanX = mean(sample_x),
            meanY = mean(sample_y);

        var weightedVariance = ((n - 1) * sample_variance(sample_x) +
            (m - 1) * sample_variance(sample_y)) / (n + m - 2);

        return (meanX - meanY - difference) /
            Math.sqrt(weightedVariance * (1 / n + 1 / m));
    }

    // # chunk
    //
    // Split an array into chunks of a specified size. This function
    // has the same behavior as [PHP's array_chunk](http://php.net/manual/en/function.array-chunk.php)
    // function, and thus will insert smaller-sized chunks at the end if
    // the input size is not divisible by the chunk size.
    //
    // `sample` is expected to be an array, and `chunkSize` a number.
    // The `sample` array can contain any kind of data.
    function chunk(sample, chunkSize) {

        // a list of result chunks, as arrays in an array
        var output = [];

        // `chunkSize` must be zero or higher - otherwise the loop below,
        // in which we call `start += chunkSize`, will loop infinitely.
        // So, we'll detect and return null in that case to indicate
        // invalid input.
        if (chunkSize <= 0) {
            return null;
        }

        // `start` is the index at which `.slice` will start selecting
        // new array elements
        for (var start = 0; start < sample.length; start += chunkSize) {

            // for each chunk, slice that part of the array and add it
            // to the output. The `.slice` function does not change
            // the original array.
            output.push(sample.slice(start, start + chunkSize));
        }
        return output;
    }

    // # shuffle_in_place
    //
    // A [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)
    // in-place - which means that it will change the order of the original
    // array by reference.
    function shuffle_in_place(sample, randomSource) {

        // a custom random number source can be provided if you want to use
        // a fixed seed or another random number generator, like
        // [random-js](https://www.npmjs.org/package/random-js)
        randomSource = randomSource || Math.random;

        // store the current length of the sample to determine
        // when no elements remain to shuffle.
        var length = sample.length;

        // temporary is used to hold an item when it is being
        // swapped between indices.
        var temporary;

        // The index to swap at each stage.
        var index;

        // While there are still items to shuffle
        while (length > 0) {
            // chose a random index within the subset of the array
            // that is not yet shuffled
            index = Math.floor(randomSource() * length--);

            // store the value that we'll move temporarily
            temporary = sample[length];

            // swap the value at `sample[length]` with `sample[index]`
            sample[length] = sample[index];
            sample[index] = temporary;
        }

        return sample;
    }

    // # shuffle
    //
    // A [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)
    // is a fast way to create a random permutation of a finite set.
    function shuffle(sample, randomSource) {
        // slice the original array so that it is not modified
        sample = sample.slice();

        // and then shuffle that shallow-copied array, in place
        return shuffle_in_place(sample.slice(), randomSource);
    }

    // # sample
    //
    // Create a [simple random sample](http://en.wikipedia.org/wiki/Simple_random_sample)
    // from a given array of `n` elements.
    function sample(array, n, randomSource) {
        // shuffle the original array using a fisher-yates shuffle
        var shuffled = shuffle(array, randomSource);

        // and then return a subset of it - the first `n` elements.
        return shuffled.slice(0, n);
    }

    // # quantile
    //
    // This is a population quantile, since we assume to know the entire
    // dataset in this library. Thus I'm trying to follow the
    // [Quantiles of a Population](http://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population)
    // algorithm from wikipedia.
    //
    // Sample is a one-dimensional array of numbers,
    // and p is either a decimal number from 0 to 1 or an array of decimal
    // numbers from 0 to 1.
    // In terms of a k/q quantile, p = k/q - it's just dealing with fractions or dealing
    // with decimal values.
    // When p is an array, the result of the function is also an array containing the appropriate
    // quantiles in input order
    function quantile(sample, p) {

        // We can't derive quantiles from an empty list
        if (sample.length === 0) return null;

        // Sort a copy of the array. We'll need a sorted array to index
        // the values in sorted order.
        var sorted = sample.slice().sort(function (a, b) { return a - b; });

        if (p.length) {
            // Initialize the result array
            var results = [];
            // For each requested quantile
            for (var i = 0; i < p.length; i++) {
                results[i] = quantile_sorted(sorted, p[i]);
            }
            return results;
        } else {
            return quantile_sorted(sorted, p);
        }
    }

    // # quantile
    //
    // This is the internal implementation of quantiles: when you know
    // that the order is sorted, you don't need to re-sort it, and the computations
    // are much faster.
    function quantile_sorted(sample, p) {
        var idx = (sample.length) * p;
        if (p < 0 || p > 1) {
            return null;
        } else if (p === 1) {
            // If p is 1, directly return the last element
            return sample[sample.length - 1];
        } else if (p === 0) {
            // If p is 0, directly return the first element
            return sample[0];
        } else if (idx % 1 !== 0) {
            // If p is not integer, return the next element in array
            return sample[Math.ceil(idx) - 1];
        } else if (sample.length % 2 === 0) {
            // If the list has even-length, we'll take the average of this number
            // and the next value, if there is one
            return (sample[idx - 1] + sample[idx]) / 2;
        } else {
            // Finally, in the simple case of an integer value
            // with an odd-length list, return the sample value at the index.
            return sample[idx];
        }
    }

    // # [Interquartile range](http://en.wikipedia.org/wiki/Interquartile_range)
    //
    // A measure of statistical dispersion, or how scattered, spread, or
    // concentrated a distribution is. It's computed as the difference between
    // the third quartile and first quartile.
    function iqr(sample) {
        // We can't derive quantiles from an empty list
        if (sample.length === 0) return null;

        // Interquartile range is the span between the upper quartile,
        // at `0.75`, and lower quartile, `0.25`
        return quantile(sample, 0.75) - quantile(sample, 0.25);
    }

    // # [Median Absolute Deviation](http://en.wikipedia.org/wiki/Median_absolute_deviation)
    //
    // The Median Absolute Deviation (MAD) is a robust measure of statistical
    // dispersion. It is more resilient to outliers than the standard deviation.
    function mad(x) {
        // The mad of nothing is null
        if (!x || x.length === 0) return null;

        var median_value = median(x),
            median_absolute_deviations = [];

        // Make a list of absolute deviations from the median
        for (var i = 0; i < x.length; i++) {
            median_absolute_deviations.push(Math.abs(x[i] - median_value));
        }

        // Find the median value of that list
        return median(median_absolute_deviations);
    }

    // ## Compute Matrices for Jenks
    //
    // Compute the matrices required for Jenks breaks. These matrices
    // can be used for any classing of data with `classes <= n_classes`
    function jenksMatrices(data, n_classes) {

        // in the original implementation, these matrices are referred to
        // as `LC` and `OP`
        //
        // * lower_class_limits (LC): optimal lower class limits
        // * variance_combinations (OP): optimal variance combinations for all classes
        var lower_class_limits = [],
            variance_combinations = [],
            // loop counters
            i, j,
            // the variance, as computed at each step in the calculation
            variance = 0;

        // Initialize and fill each matrix with zeroes
        for (i = 0; i < data.length + 1; i++) {
            var tmp1 = [], tmp2 = [];
            // despite these arrays having the same values, we need
            // to keep them separate so that changing one does not change
            // the other
            for (j = 0; j < n_classes + 1; j++) {
                tmp1.push(0);
                tmp2.push(0);
            }
            lower_class_limits.push(tmp1);
            variance_combinations.push(tmp2);
        }

        for (i = 1; i < n_classes + 1; i++) {
            lower_class_limits[1][i] = 1;
            variance_combinations[1][i] = 0;
            // in the original implementation, 9999999 is used but
            // since Javascript has `Infinity`, we use that.
            for (j = 2; j < data.length + 1; j++) {
                variance_combinations[j][i] = Infinity;
            }
        }

        for (var l = 2; l < data.length + 1; l++) {

            // `SZ` originally. this is the sum of the values seen thus
            // far when calculating variance.
            var sum = 0,
                // `ZSQ` originally. the sum of squares of values seen
                // thus far
                sum_squares = 0,
                // `WT` originally. This is the number of
                w = 0,
                // `IV` originally
                i4 = 0;

            // in several instances, you could say `Math.pow(x, 2)`
            // instead of `x * x`, but this is slower in some browsers
            // introduces an unnecessary concept.
            for (var m = 1; m < l + 1; m++) {

                // `III` originally
                var lower_class_limit = l - m + 1,
                    val = data[lower_class_limit - 1];

                // here we're estimating variance for each potential classing
                // of the data, for each potential number of classes. `w`
                // is the number of data points considered so far.
                w++;

                // increase the current sum and sum-of-squares
                sum += val;
                sum_squares += val * val;

                // the variance at this point in the sequence is the difference
                // between the sum of squares and the total x 2, over the number
                // of samples.
                variance = sum_squares - (sum * sum) / w;

                i4 = lower_class_limit - 1;

                if (i4 !== 0) {
                    for (j = 2; j < n_classes + 1; j++) {
                        // if adding this element to an existing class
                        // will increase its variance beyond the limit, break
                        // the class at this point, setting the `lower_class_limit`
                        // at this point.
                        if (variance_combinations[l][j] >=
                            (variance + variance_combinations[i4][j - 1])) {
                            lower_class_limits[l][j] = lower_class_limit;
                            variance_combinations[l][j] = variance +
                                variance_combinations[i4][j - 1];
                        }
                    }
                }
            }

            lower_class_limits[l][1] = 1;
            variance_combinations[l][1] = variance;
        }

        // return the two matrices. for just providing breaks, only
        // `lower_class_limits` is needed, but variances can be useful to
        // evaluate goodness of fit.
        return {
            lower_class_limits: lower_class_limits,
            variance_combinations: variance_combinations
        };
    }

    // ## Pull Breaks Values for Jenks
    //
    // the second part of the jenks recipe: take the calculated matrices
    // and derive an array of n breaks.
    function jenksBreaks(data, lower_class_limits, n_classes) {

        var k = data.length - 1,
            kclass = [],
            countNum = n_classes;

        // the calculation of classes will never include the upper and
        // lower bounds, so we need to explicitly set them
        kclass[n_classes] = data[data.length - 1];
        kclass[0] = data[0];

        // the lower_class_limits matrix is used as indices into itself
        // here: the `k` variable is reused in each iteration.
        while (countNum > 1) {
            kclass[countNum - 1] = data[lower_class_limits[k][countNum] - 2];
            k = lower_class_limits[k][countNum] - 1;
            countNum--;
        }

        return kclass;
    }

    // # [Jenks natural breaks optimization](http://en.wikipedia.org/wiki/Jenks_natural_breaks_optimization)
    //
    // Implementations: [1](http://danieljlewis.org/files/2010/06/Jenks.pdf) (python),
    // [2](https://github.com/vvoovv/djeo-jenks/blob/master/main.js) (buggy),
    // [3](https://github.com/simogeo/geostats/blob/master/lib/geostats.js#L407) (works)
    //
    // Depends on `jenksBreaks()` and `jenksMatrices()`
    function jenks(data, n_classes) {

        if (n_classes > data.length) return null;

        // sort data in numerical order, since this is expected
        // by the matrices function
        data = data.slice().sort(function (a, b) { return a - b; });

        // get our basic matrices
        var matrices = jenksMatrices(data, n_classes),
            // we only need lower class limits here
            lower_class_limits = matrices.lower_class_limits;

        // extract n_classes out of the computed matrices
        return jenksBreaks(data, lower_class_limits, n_classes);

    }

    // # [Skewness](http://en.wikipedia.org/wiki/Skewness)
    //
    // A measure of the extent to which a probability distribution of a
    // real-valued random variable "leans" to one side of the mean.
    // The skewness value can be positive or negative, or even undefined.
    //
    // Implementation is based on the adjusted Fisher-Pearson standardized
    // moment coefficient, which is the version found in Excel and several
    // statistical packages including Minitab, SAS and SPSS.
    //
    // Depends on `sum_nth_power_deviations()` and `sample_standard_deviation`
    function sample_skewness(x) {
        // The skewness of less than three arguments is null
        if (x.length < 3) return null;

        var n = x.length,
            cubed_s = Math.pow(sample_standard_deviation(x), 3),
            sum_cubed_deviations = sum_nth_power_deviations(x, 3);

        return n * sum_cubed_deviations / ((n - 1) * (n - 2) * cubed_s);
    }

    // # Standard Normal Table
    // A standard normal table, also called the unit normal table or Z table,
    // is a mathematical table for the values of Î¦ (phi), which are the values of
    // the cumulative distribution function of the normal distribution.
    // It is used to find the probability that a statistic is observed below,
    // above, or between values on the standard normal distribution, and by
    // extension, any normal distribution.
    //
    // The probabilities are taken from http://en.wikipedia.org/wiki/Standard_normal_table
    // The table used is the cumulative, and not cumulative from 0 to mean
    // (even though the latter has 5 digits precision, instead of 4).
    var standard_normal_table = [
        /*  z      0.00    0.01    0.02    0.03    0.04    0.05    0.06    0.07    0.08    0.09 */
        /* 0.0 */
        0.5000, 0.5040, 0.5080, 0.5120, 0.5160, 0.5199, 0.5239, 0.5279, 0.5319, 0.5359,
        /* 0.1 */
        0.5398, 0.5438, 0.5478, 0.5517, 0.5557, 0.5596, 0.5636, 0.5675, 0.5714, 0.5753,
        /* 0.2 */
        0.5793, 0.5832, 0.5871, 0.5910, 0.5948, 0.5987, 0.6026, 0.6064, 0.6103, 0.6141,
        /* 0.3 */
        0.6179, 0.6217, 0.6255, 0.6293, 0.6331, 0.6368, 0.6406, 0.6443, 0.6480, 0.6517,
        /* 0.4 */
        0.6554, 0.6591, 0.6628, 0.6664, 0.6700, 0.6736, 0.6772, 0.6808, 0.6844, 0.6879,
        /* 0.5 */
        0.6915, 0.6950, 0.6985, 0.7019, 0.7054, 0.7088, 0.7123, 0.7157, 0.7190, 0.7224,
        /* 0.6 */
        0.7257, 0.7291, 0.7324, 0.7357, 0.7389, 0.7422, 0.7454, 0.7486, 0.7517, 0.7549,
        /* 0.7 */
        0.7580, 0.7611, 0.7642, 0.7673, 0.7704, 0.7734, 0.7764, 0.7794, 0.7823, 0.7852,
        /* 0.8 */
        0.7881, 0.7910, 0.7939, 0.7967, 0.7995, 0.8023, 0.8051, 0.8078, 0.8106, 0.8133,
        /* 0.9 */
        0.8159, 0.8186, 0.8212, 0.8238, 0.8264, 0.8289, 0.8315, 0.8340, 0.8365, 0.8389,
        /* 1.0 */
        0.8413, 0.8438, 0.8461, 0.8485, 0.8508, 0.8531, 0.8554, 0.8577, 0.8599, 0.8621,
        /* 1.1 */
        0.8643, 0.8665, 0.8686, 0.8708, 0.8729, 0.8749, 0.8770, 0.8790, 0.8810, 0.8830,
        /* 1.2 */
        0.8849, 0.8869, 0.8888, 0.8907, 0.8925, 0.8944, 0.8962, 0.8980, 0.8997, 0.9015,
        /* 1.3 */
        0.9032, 0.9049, 0.9066, 0.9082, 0.9099, 0.9115, 0.9131, 0.9147, 0.9162, 0.9177,
        /* 1.4 */
        0.9192, 0.9207, 0.9222, 0.9236, 0.9251, 0.9265, 0.9279, 0.9292, 0.9306, 0.9319,
        /* 1.5 */
        0.9332, 0.9345, 0.9357, 0.9370, 0.9382, 0.9394, 0.9406, 0.9418, 0.9429, 0.9441,
        /* 1.6 */
        0.9452, 0.9463, 0.9474, 0.9484, 0.9495, 0.9505, 0.9515, 0.9525, 0.9535, 0.9545,
        /* 1.7 */
        0.9554, 0.9564, 0.9573, 0.9582, 0.9591, 0.9599, 0.9608, 0.9616, 0.9625, 0.9633,
        /* 1.8 */
        0.9641, 0.9649, 0.9656, 0.9664, 0.9671, 0.9678, 0.9686, 0.9693, 0.9699, 0.9706,
        /* 1.9 */
        0.9713, 0.9719, 0.9726, 0.9732, 0.9738, 0.9744, 0.9750, 0.9756, 0.9761, 0.9767,
        /* 2.0 */
        0.9772, 0.9778, 0.9783, 0.9788, 0.9793, 0.9798, 0.9803, 0.9808, 0.9812, 0.9817,
        /* 2.1 */
        0.9821, 0.9826, 0.9830, 0.9834, 0.9838, 0.9842, 0.9846, 0.9850, 0.9854, 0.9857,
        /* 2.2 */
        0.9861, 0.9864, 0.9868, 0.9871, 0.9875, 0.9878, 0.9881, 0.9884, 0.9887, 0.9890,
        /* 2.3 */
        0.9893, 0.9896, 0.9898, 0.9901, 0.9904, 0.9906, 0.9909, 0.9911, 0.9913, 0.9916,
        /* 2.4 */
        0.9918, 0.9920, 0.9922, 0.9925, 0.9927, 0.9929, 0.9931, 0.9932, 0.9934, 0.9936,
        /* 2.5 */
        0.9938, 0.9940, 0.9941, 0.9943, 0.9945, 0.9946, 0.9948, 0.9949, 0.9951, 0.9952,
        /* 2.6 */
        0.9953, 0.9955, 0.9956, 0.9957, 0.9959, 0.9960, 0.9961, 0.9962, 0.9963, 0.9964,
        /* 2.7 */
        0.9965, 0.9966, 0.9967, 0.9968, 0.9969, 0.9970, 0.9971, 0.9972, 0.9973, 0.9974,
        /* 2.8 */
        0.9974, 0.9975, 0.9976, 0.9977, 0.9977, 0.9978, 0.9979, 0.9979, 0.9980, 0.9981,
        /* 2.9 */
        0.9981, 0.9982, 0.9982, 0.9983, 0.9984, 0.9984, 0.9985, 0.9985, 0.9986, 0.9986,
        /* 3.0 */
        0.9987, 0.9987, 0.9987, 0.9988, 0.9988, 0.9989, 0.9989, 0.9989, 0.9990, 0.9990
    ];

    // # [Cumulative Standard Normal Probability](http://en.wikipedia.org/wiki/Standard_normal_table)
    //
    // Since probability tables cannot be
    // printed for every normal distribution, as there are an infinite variety
    // of normal distributions, it is common practice to convert a normal to a
    // standard normal and then use the standard normal table to find probabilities
    function cumulative_std_normal_probability(z) {

        // Calculate the position of this value.
        var absZ = Math.abs(z),
            // Each row begins with a different
            // significant digit: 0.5, 0.6, 0.7, and so on. So the row is simply
            // this value's significant digit: 0.567 will be in row 0, so row=0,
            // 0.643 will be in row 1, so row=10.
            row = Math.floor(absZ * 10),
            column = 10 * (Math.floor(absZ * 100) / 10 - Math.floor(absZ * 100 / 10)),
            index = Math.min((row * 10) + column, standard_normal_table.length - 1);

        // The index we calculate must be in the table as a positive value,
        // but we still pay attention to whether the input is positive
        // or negative, and flip the output value as a last step.
        if (z >= 0) {
            return standard_normal_table[index];
        } else {
            // due to floating-point arithmetic, values in the table with
            // 4 significant figures can nevertheless end up as repeating
            // fractions when they're computed here.
            return +(1 - standard_normal_table[index]).toFixed(4);
        }
    }

    // # [Z-Score, or Standard Score](http://en.wikipedia.org/wiki/Standard_score)
    //
    // The standard score is the number of standard deviations an observation
    // or datum is above or below the mean. Thus, a positive standard score
    // represents a datum above the mean, while a negative standard score
    // represents a datum below the mean. It is a dimensionless quantity
    // obtained by subtracting the population mean from an individual raw
    // score and then dividing the difference by the population standard
    // deviation.
    //
    // The z-score is only defined if one knows the population parameters;
    // if one only has a sample set, then the analogous computation with
    // sample mean and sample standard deviation yields the
    // Student's t-statistic.
    function z_score(x, mean, standard_deviation) {
        return (x - mean) / standard_deviation;
    }

    // We use `Îµ`, epsilon, as a stopping criterion when we want to iterate
    // until we're "close enough".
    var epsilon = 0.0001;

    // # [Factorial](https://en.wikipedia.org/wiki/Factorial)
    //
    // A factorial, usually written n!, is the product of all positive
    // integers less than or equal to n. Often factorial is implemented
    // recursively, but this iterative approach is significantly faster
    // and simpler.
    function factorial(n) {

        // factorial is mathematically undefined for negative numbers
        if (n < 0 ) { return null; }

        // typically you'll expand the factorial function going down, like
        // 5! = 5 * 4 * 3 * 2 * 1. This is going in the opposite direction,
        // counting from 2 up to the number in question, and since anything
        // multiplied by 1 is itself, the loop only needs to start at 2.
        var accumulator = 1;
        for (var i = 2; i <= n; i++) {
            // for each number up to and including the number `n`, multiply
            // the accumulator my that number.
            accumulator *= i;
        }
        return accumulator;
    }

    // # Bernoulli Distribution
    //
    // The [Bernoulli distribution](http://en.wikipedia.org/wiki/Bernoulli_distribution)
    // is the probability discrete
    // distribution of a random variable which takes value 1 with success
    // probability `p` and value 0 with failure
    // probability `q` = 1 - `p`. It can be used, for example, to represent the
    // toss of a coin, where "1" is defined to mean "heads" and "0" is defined
    // to mean "tails" (or vice versa). It is
    // a special case of a Binomial Distribution
    // where `n` = 1.
    function bernoulli_distribution(p) {
        // Check that `p` is a valid probability (0 â¤ p â¤ 1)
        if (p < 0 || p > 1 ) { return null; }

        return binomial_distribution(1, p);
    }

    // # Binomial Distribution
    //
    // The [Binomial Distribution](http://en.wikipedia.org/wiki/Binomial_distribution) is the discrete probability
    // distribution of the number of successes in a sequence of n independent yes/no experiments, each of which yields
    // success with probability `probability`. Such a success/failure experiment is also called a Bernoulli experiment or
    // Bernoulli trial; when trials = 1, the Binomial Distribution is a Bernoulli Distribution.
    function binomial_distribution(trials, probability) {
        // Check that `p` is a valid probability (0 â¤ p â¤ 1),
        // that `n` is an integer, strictly positive.
        if (probability < 0 || probability > 1 ||
            trials <= 0 || trials % 1 !== 0) {
            return null;
        }

        // a [probability mass function](https://en.wikipedia.org/wiki/Probability_mass_function)
        function probability_mass(x, trials, probability) {
            return factorial(trials) /
                (factorial(x) * factorial(trials - x)) *
                (Math.pow(probability, x) * Math.pow(1 - probability, trials - x));
        }

        // We initialize `x`, the random variable, and `accumulator`, an accumulator
        // for the cumulative distribution function to 0. `distribution_functions`
        // is the object we'll return with the `probability_of_x` and the
        // `cumulative_probability_of_x`, as well as the calculated mean &
        // variance. We iterate until the `cumulative_probability_of_x` is
        // within `epsilon` of 1.0.
        var x = 0,
            cumulative_probability = 0,
            cells = {};

        // This algorithm iterates through each potential outcome,
        // until the `cumulative_probability` is very close to 1, at
        // which point we've defined the vast majority of outcomes
        do {
            cells[x] = probability_mass(x, trials, probability);
            cumulative_probability += cells[x];
            x++;
        // when the cumulative_probability is nearly 1, we've calculated
        // the useful range of this distribution
        } while (cumulative_probability < 1 - epsilon);

        return cells;
    }

    // # Poisson Distribution
    //
    // The [Poisson Distribution](http://en.wikipedia.org/wiki/Poisson_distribution)
    // is a discrete probability distribution that expresses the probability
    // of a given number of events occurring in a fixed interval of time
    // and/or space if these events occur with a known average rate and
    // independently of the time since the last event.
    //
    // The Poisson Distribution is characterized by the strictly positive
    // mean arrival or occurrence rate, `Î»`.
    function poisson_distribution(lambda) {
        // Check that lambda is strictly positive
        if (lambda <= 0) { return null; }

        // our current place in the distribution
        var x = 0,
            // and we keep track of the current cumulative probability, in
            // order to know when to stop calculating chances.
            cumulative_probability = 0,
            // the calculated cells to be returned
            cells = {};

        // a [probability mass function](https://en.wikipedia.org/wiki/Probability_mass_function)
        function probability_mass(x, lambda) {
            return (Math.pow(Math.E, -lambda) * Math.pow(lambda, x)) /
                factorial(x);
        }

        // This algorithm iterates through each potential outcome,
        // until the `cumulative_probability` is very close to 1, at
        // which point we've defined the vast majority of outcomes
        do {
            cells[x] = probability_mass(x, lambda);
            cumulative_probability += cells[x];
            x++;
        // when the cumulative_probability is nearly 1, we've calculated
        // the useful range of this distribution
        } while (cumulative_probability < 1 - epsilon);

        return cells;
    }

    // # Percentage Points of the Ï2 (Chi-Squared) Distribution
    // The [Ï2 (Chi-Squared) Distribution](http://en.wikipedia.org/wiki/Chi-squared_distribution) is used in the common
    // chi-squared tests for goodness of fit of an observed distribution to a theoretical one, the independence of two
    // criteria of classification of qualitative data, and in confidence interval estimation for a population standard
    // deviation of a normal distribution from a sample standard deviation.
    //
    // Values from Appendix 1, Table III of William W. Hines & Douglas C. Montgomery, "Probability and Statistics in
    // Engineering and Management Science", Wiley (1980).
    var chi_squared_distribution_table = {
        1: { 0.995:  0.00, 0.99:  0.00, 0.975:  0.00, 0.95:  0.00, 0.9:  0.02, 0.5:  0.45, 0.1:  2.71, 0.05:  3.84, 0.025:  5.02, 0.01:  6.63, 0.005:  7.88 },
        2: { 0.995:  0.01, 0.99:  0.02, 0.975:  0.05, 0.95:  0.10, 0.9:  0.21, 0.5:  1.39, 0.1:  4.61, 0.05:  5.99, 0.025:  7.38, 0.01:  9.21, 0.005: 10.60 },
        3: { 0.995:  0.07, 0.99:  0.11, 0.975:  0.22, 0.95:  0.35, 0.9:  0.58, 0.5:  2.37, 0.1:  6.25, 0.05:  7.81, 0.025:  9.35, 0.01: 11.34, 0.005: 12.84 },
        4: { 0.995:  0.21, 0.99:  0.30, 0.975:  0.48, 0.95:  0.71, 0.9:  1.06, 0.5:  3.36, 0.1:  7.78, 0.05:  9.49, 0.025: 11.14, 0.01: 13.28, 0.005: 14.86 },
        5: { 0.995:  0.41, 0.99:  0.55, 0.975:  0.83, 0.95:  1.15, 0.9:  1.61, 0.5:  4.35, 0.1:  9.24, 0.05: 11.07, 0.025: 12.83, 0.01: 15.09, 0.005: 16.75 },
        6: { 0.995:  0.68, 0.99:  0.87, 0.975:  1.24, 0.95:  1.64, 0.9:  2.20, 0.5:  5.35, 0.1: 10.65, 0.05: 12.59, 0.025: 14.45, 0.01: 16.81, 0.005: 18.55 },
        7: { 0.995:  0.99, 0.99:  1.25, 0.975:  1.69, 0.95:  2.17, 0.9:  2.83, 0.5:  6.35, 0.1: 12.02, 0.05: 14.07, 0.025: 16.01, 0.01: 18.48, 0.005: 20.28 },
        8: { 0.995:  1.34, 0.99:  1.65, 0.975:  2.18, 0.95:  2.73, 0.9:  3.49, 0.5:  7.34, 0.1: 13.36, 0.05: 15.51, 0.025: 17.53, 0.01: 20.09, 0.005: 21.96 },
        9: { 0.995:  1.73, 0.99:  2.09, 0.975:  2.70, 0.95:  3.33, 0.9:  4.17, 0.5:  8.34, 0.1: 14.68, 0.05: 16.92, 0.025: 19.02, 0.01: 21.67, 0.005: 23.59 },
        10: { 0.995:  2.16, 0.99:  2.56, 0.975:  3.25, 0.95:  3.94, 0.9:  4.87, 0.5:  9.34, 0.1: 15.99, 0.05: 18.31, 0.025: 20.48, 0.01: 23.21, 0.005: 25.19 },
        11: { 0.995:  2.60, 0.99:  3.05, 0.975:  3.82, 0.95:  4.57, 0.9:  5.58, 0.5: 10.34, 0.1: 17.28, 0.05: 19.68, 0.025: 21.92, 0.01: 24.72, 0.005: 26.76 },
        12: { 0.995:  3.07, 0.99:  3.57, 0.975:  4.40, 0.95:  5.23, 0.9:  6.30, 0.5: 11.34, 0.1: 18.55, 0.05: 21.03, 0.025: 23.34, 0.01: 26.22, 0.005: 28.30 },
        13: { 0.995:  3.57, 0.99:  4.11, 0.975:  5.01, 0.95:  5.89, 0.9:  7.04, 0.5: 12.34, 0.1: 19.81, 0.05: 22.36, 0.025: 24.74, 0.01: 27.69, 0.005: 29.82 },
        14: { 0.995:  4.07, 0.99:  4.66, 0.975:  5.63, 0.95:  6.57, 0.9:  7.79, 0.5: 13.34, 0.1: 21.06, 0.05: 23.68, 0.025: 26.12, 0.01: 29.14, 0.005: 31.32 },
        15: { 0.995:  4.60, 0.99:  5.23, 0.975:  6.27, 0.95:  7.26, 0.9:  8.55, 0.5: 14.34, 0.1: 22.31, 0.05: 25.00, 0.025: 27.49, 0.01: 30.58, 0.005: 32.80 },
        16: { 0.995:  5.14, 0.99:  5.81, 0.975:  6.91, 0.95:  7.96, 0.9:  9.31, 0.5: 15.34, 0.1: 23.54, 0.05: 26.30, 0.025: 28.85, 0.01: 32.00, 0.005: 34.27 },
        17: { 0.995:  5.70, 0.99:  6.41, 0.975:  7.56, 0.95:  8.67, 0.9: 10.09, 0.5: 16.34, 0.1: 24.77, 0.05: 27.59, 0.025: 30.19, 0.01: 33.41, 0.005: 35.72 },
        18: { 0.995:  6.26, 0.99:  7.01, 0.975:  8.23, 0.95:  9.39, 0.9: 10.87, 0.5: 17.34, 0.1: 25.99, 0.05: 28.87, 0.025: 31.53, 0.01: 34.81, 0.005: 37.16 },
        19: { 0.995:  6.84, 0.99:  7.63, 0.975:  8.91, 0.95: 10.12, 0.9: 11.65, 0.5: 18.34, 0.1: 27.20, 0.05: 30.14, 0.025: 32.85, 0.01: 36.19, 0.005: 38.58 },
        20: { 0.995:  7.43, 0.99:  8.26, 0.975:  9.59, 0.95: 10.85, 0.9: 12.44, 0.5: 19.34, 0.1: 28.41, 0.05: 31.41, 0.025: 34.17, 0.01: 37.57, 0.005: 40.00 },
        21: { 0.995:  8.03, 0.99:  8.90, 0.975: 10.28, 0.95: 11.59, 0.9: 13.24, 0.5: 20.34, 0.1: 29.62, 0.05: 32.67, 0.025: 35.48, 0.01: 38.93, 0.005: 41.40 },
        22: { 0.995:  8.64, 0.99:  9.54, 0.975: 10.98, 0.95: 12.34, 0.9: 14.04, 0.5: 21.34, 0.1: 30.81, 0.05: 33.92, 0.025: 36.78, 0.01: 40.29, 0.005: 42.80 },
        23: { 0.995:  9.26, 0.99: 10.20, 0.975: 11.69, 0.95: 13.09, 0.9: 14.85, 0.5: 22.34, 0.1: 32.01, 0.05: 35.17, 0.025: 38.08, 0.01: 41.64, 0.005: 44.18 },
        24: { 0.995:  9.89, 0.99: 10.86, 0.975: 12.40, 0.95: 13.85, 0.9: 15.66, 0.5: 23.34, 0.1: 33.20, 0.05: 36.42, 0.025: 39.36, 0.01: 42.98, 0.005: 45.56 },
        25: { 0.995: 10.52, 0.99: 11.52, 0.975: 13.12, 0.95: 14.61, 0.9: 16.47, 0.5: 24.34, 0.1: 34.28, 0.05: 37.65, 0.025: 40.65, 0.01: 44.31, 0.005: 46.93 },
        26: { 0.995: 11.16, 0.99: 12.20, 0.975: 13.84, 0.95: 15.38, 0.9: 17.29, 0.5: 25.34, 0.1: 35.56, 0.05: 38.89, 0.025: 41.92, 0.01: 45.64, 0.005: 48.29 },
        27: { 0.995: 11.81, 0.99: 12.88, 0.975: 14.57, 0.95: 16.15, 0.9: 18.11, 0.5: 26.34, 0.1: 36.74, 0.05: 40.11, 0.025: 43.19, 0.01: 46.96, 0.005: 49.65 },
        28: { 0.995: 12.46, 0.99: 13.57, 0.975: 15.31, 0.95: 16.93, 0.9: 18.94, 0.5: 27.34, 0.1: 37.92, 0.05: 41.34, 0.025: 44.46, 0.01: 48.28, 0.005: 50.99 },
        29: { 0.995: 13.12, 0.99: 14.26, 0.975: 16.05, 0.95: 17.71, 0.9: 19.77, 0.5: 28.34, 0.1: 39.09, 0.05: 42.56, 0.025: 45.72, 0.01: 49.59, 0.005: 52.34 },
        30: { 0.995: 13.79, 0.99: 14.95, 0.975: 16.79, 0.95: 18.49, 0.9: 20.60, 0.5: 29.34, 0.1: 40.26, 0.05: 43.77, 0.025: 46.98, 0.01: 50.89, 0.005: 53.67 },
        40: { 0.995: 20.71, 0.99: 22.16, 0.975: 24.43, 0.95: 26.51, 0.9: 29.05, 0.5: 39.34, 0.1: 51.81, 0.05: 55.76, 0.025: 59.34, 0.01: 63.69, 0.005: 66.77 },
        50: { 0.995: 27.99, 0.99: 29.71, 0.975: 32.36, 0.95: 34.76, 0.9: 37.69, 0.5: 49.33, 0.1: 63.17, 0.05: 67.50, 0.025: 71.42, 0.01: 76.15, 0.005: 79.49 },
        60: { 0.995: 35.53, 0.99: 37.48, 0.975: 40.48, 0.95: 43.19, 0.9: 46.46, 0.5: 59.33, 0.1: 74.40, 0.05: 79.08, 0.025: 83.30, 0.01: 88.38, 0.005: 91.95 },
        70: { 0.995: 43.28, 0.99: 45.44, 0.975: 48.76, 0.95: 51.74, 0.9: 55.33, 0.5: 69.33, 0.1: 85.53, 0.05: 90.53, 0.025: 95.02, 0.01: 100.42, 0.005: 104.22 },
        80: { 0.995: 51.17, 0.99: 53.54, 0.975: 57.15, 0.95: 60.39, 0.9: 64.28, 0.5: 79.33, 0.1: 96.58, 0.05: 101.88, 0.025: 106.63, 0.01: 112.33, 0.005: 116.32 },
        90: { 0.995: 59.20, 0.99: 61.75, 0.975: 65.65, 0.95: 69.13, 0.9: 73.29, 0.5: 89.33, 0.1: 107.57, 0.05: 113.14, 0.025: 118.14, 0.01: 124.12, 0.005: 128.30 },
        100: { 0.995: 67.33, 0.99: 70.06, 0.975: 74.22, 0.95: 77.93, 0.9: 82.36, 0.5: 99.33, 0.1: 118.50, 0.05: 124.34, 0.025: 129.56, 0.01: 135.81, 0.005: 140.17 }
    };

    // # Ï2 (Chi-Squared) Goodness-of-Fit Test
    //
    // The [Ï2 (Chi-Squared) Goodness-of-Fit Test](http://en.wikipedia.org/wiki/Goodness_of_fit#Pearson.27s_chi-squared_test)
    // uses a measure of goodness of fit which is the sum of differences between observed and expected outcome frequencies
    // (that is, counts of observations), each squared and divided by the number of observations expected given the
    // hypothesized distribution. The resulting Ï2 statistic, `chi_squared`, can be compared to the chi-squared distribution
    // to determine the goodness of fit. In order to determine the degrees of freedom of the chi-squared distribution, one
    // takes the total number of observed frequencies and subtracts the number of estimated parameters. The test statistic
    // follows, approximately, a chi-square distribution with (k â c) degrees of freedom where `k` is the number of non-empty
    // cells and `c` is the number of estimated parameters for the distribution.
    function chi_squared_goodness_of_fit(data, distribution_type, significance) {
        // Estimate from the sample data, a weighted mean.
        var input_mean = mean(data),
            // Calculated value of the Ï2 statistic.
            chi_squared = 0,
            // Degrees of freedom, calculated as (number of class intervals -
            // number of hypothesized distribution parameters estimated - 1)
            degrees_of_freedom,
            // Number of hypothesized distribution parameters estimated, expected to be supplied in the distribution test.
            // Lose one degree of freedom for estimating `lambda` from the sample data.
            c = 1,
            // The hypothesized distribution.
            // Generate the hypothesized distribution.
            hypothesized_distribution = distribution_type(input_mean),
            observed_frequencies = [],
            expected_frequencies = [],
            k;

        // Create an array holding a histogram from the sample data, of
        // the form `{ value: numberOfOcurrences }`
        for (var i = 0; i < data.length; i++) {
            if (observed_frequencies[data[i]] === undefined) {
                observed_frequencies[data[i]] = 0;
            }
            observed_frequencies[data[i]]++;
        }

        // The histogram we created might be sparse - there might be gaps
        // between values. So we iterate through the histogram, making
        // sure that instead of undefined, gaps have 0 values.
        for (i = 0; i < observed_frequencies.length; i++) {
            if (observed_frequencies[i] === undefined) {
                observed_frequencies[i] = 0;
            }
        }

        // Create an array holding a histogram of expected data given the
        // sample size and hypothesized distribution.
        for (k in hypothesized_distribution) {
            if (k in observed_frequencies) {
                expected_frequencies[k] = hypothesized_distribution[k] * data.length;
            }
        }

        // Working backward through the expected frequencies, collapse classes
        // if less than three observations are expected for a class.
        // This transformation is applied to the observed frequencies as well.
        for (k = expected_frequencies.length - 1; k >= 0; k--) {
            if (expected_frequencies[k] < 3) {
                expected_frequencies[k - 1] += expected_frequencies[k];
                expected_frequencies.pop();

                observed_frequencies[k - 1] += observed_frequencies[k];
                observed_frequencies.pop();
            }
        }

        // Iterate through the squared differences between observed & expected
        // frequencies, accumulating the `chi_squared` statistic.
        for (k = 0; k < observed_frequencies.length; k++) {
            chi_squared += Math.pow(
                observed_frequencies[k] - expected_frequencies[k], 2) /
                expected_frequencies[k];
        }

        // Calculate degrees of freedom for this test and look it up in the
        // `chi_squared_distribution_table` in order to
        // accept or reject the goodness-of-fit of the hypothesized distribution.
        degrees_of_freedom = observed_frequencies.length - c - 1;
        return chi_squared_distribution_table[degrees_of_freedom][significance] < chi_squared;
    }

    // # Mixin
    //
    // Mixin simple_statistics to a single Array instance if provided
    // or the Array native object if not. This is an optional
    // feature that lets you treat simple_statistics as a native feature
    // of Javascript.
    function mixin(array) {
        var support = !!(Object.defineProperty && Object.defineProperties);
        if (!support) throw new Error('without defineProperty, simple-statistics cannot be mixed in');

        // only methods which work on basic arrays in a single step
        // are supported
        var arrayMethods = ['median', 'standard_deviation', 'sum',
            'sample_skewness',
            'mean', 'min', 'max', 'quantile', 'geometric_mean',
            'harmonic_mean'];

        // create a closure with a method name so that a reference
        // like `arrayMethods[i]` doesn't follow the loop increment
        function wrap(method) {
            return function() {
                // cast any arguments into an array, since they're
                // natively objects
                var args = Array.prototype.slice.apply(arguments);
                // make the first argument the array itself
                args.unshift(this);
                // return the result of the ss method
                return ss[method].apply(ss, args);
            };
        }

        // select object to extend
        var extending;
        if (array) {
            // create a shallow copy of the array so that our internal
            // operations do not change it by reference
            extending = array.slice();
        } else {
            extending = Array.prototype;
        }

        // for each array function, define a function that gets
        // the array as the first argument.
        // We use [defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)
        // because it allows these properties to be non-enumerable:
        // `for (var in x)` loops will not run into problems with this
        // implementation.
        for (var i = 0; i < arrayMethods.length; i++) {
            Object.defineProperty(extending, arrayMethods[i], {
                value: wrap(arrayMethods[i]),
                configurable: true,
                enumerable: false,
                writable: true
            });
        }

        return extending;
    }

    ss.linear_regression = linear_regression;
    ss.standard_deviation = standard_deviation;
    ss.r_squared = r_squared;
    ss.median = median;
    ss.mean = mean;
    ss.mode = mode;
    ss.min = min;
    ss.max = max;
    ss.sum = sum;
    ss.quantile = quantile;
    ss.quantile_sorted = quantile_sorted;
    ss.iqr = iqr;
    ss.mad = mad;

    ss.chunk = chunk;
    ss.shuffle = shuffle;
    ss.shuffle_in_place = shuffle_in_place;

    ss.sample = sample;

    ss.sample_covariance = sample_covariance;
    ss.sample_correlation = sample_correlation;
    ss.sample_variance = sample_variance;
    ss.sample_standard_deviation = sample_standard_deviation;
    ss.sample_skewness = sample_skewness;

    ss.geometric_mean = geometric_mean;
    ss.harmonic_mean = harmonic_mean;
    ss.variance = variance;
    ss.t_test = t_test;
    ss.t_test_two_sample = t_test_two_sample;

    // jenks
    ss.jenksMatrices = jenksMatrices;
    ss.jenksBreaks = jenksBreaks;
    ss.jenks = jenks;

    ss.bayesian = bayesian;

    // Distribution-related methods
    ss.epsilon = epsilon; // We make Îµ available to the test suite.
    ss.factorial = factorial;
    ss.bernoulli_distribution = bernoulli_distribution;
    ss.binomial_distribution = binomial_distribution;
    ss.poisson_distribution = poisson_distribution;
    ss.chi_squared_goodness_of_fit = chi_squared_goodness_of_fit;

    // Normal distribution
    ss.z_score = z_score;
    ss.cumulative_std_normal_probability = cumulative_std_normal_probability;
    ss.standard_normal_table = standard_normal_table;

    // Alias this into its common name
    ss.average = mean;
    ss.interquartile_range = iqr;
    ss.mixin = mixin;
    ss.median_absolute_deviation = mad;

})(this);

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-count/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    })
    poly.properties[outField] = ss.max(values);
  })

  return polyFC;
}

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-deviation/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = ss.median(values);
  });

  return polyFC;
}

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-max/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-min/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = ss.min(values);
  })

  return polyFC;
}

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-min/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-min/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-min/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-min/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-sum/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    })
    poly.properties[outField] = ss.sum(values);
  })

  return polyFC;
}

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-sum/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-sum/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-sum/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
/* global module */
// # simple-statistics
//
// A simple, literate statistics system. The code below uses the
// [Javascript module pattern](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth),
// eventually assigning `simple-statistics` to `ss` in browsers or the
// `exports` object for node.js
(function() {
    var ss = {};

    if (typeof module !== 'undefined') {
        // Assign the `ss` object to exports, so that you can require
        // it in [node.js](http://nodejs.org/)
        module.exports = ss;
    } else {
        // Otherwise, in a browser, we assign `ss` to the window object,
        // so you can simply refer to it as `ss`.
        this.ss = ss;
    }

    // # [Linear Regression](http://en.wikipedia.org/wiki/Linear_regression)
    //
    // [Simple linear regression](http://en.wikipedia.org/wiki/Simple_linear_regression)
    // is a simple way to find a fitted line
    // between a set of coordinates.
    function linear_regression() {
        var linreg = {},
            data = [];

        // Assign data to the model. Data is assumed to be an array.
        linreg.data = function(x) {
            if (!arguments.length) return data;
            data = x.slice();
            return linreg;
        };

        // Calculate the slope and y-intercept of the regression line
        // by calculating the least sum of squares
        linreg.mb = function() {
            var m, b;

            // Store data length in a local variable to reduce
            // repeated object property lookups
            var data_length = data.length;

            //if there's only one point, arbitrarily choose a slope of 0
            //and a y-intercept of whatever the y of the initial point is
            if (data_length === 1) {
                m = 0;
                b = data[0][1];
            } else {
                // Initialize our sums and scope the `m` and `b`
                // variables that define the line.
                var sum_x = 0, sum_y = 0,
                    sum_xx = 0, sum_xy = 0;

                // Use local variables to grab point values
                // with minimal object property lookups
                var point, x, y;

                // Gather the sum of all x values, the sum of all
                // y values, and the sum of x^2 and (x*y) for each
                // value.
                //
                // In math notation, these would be SS_x, SS_y, SS_xx, and SS_xy
                for (var i = 0; i < data_length; i++) {
                    point = data[i];
                    x = point[0];
                    y = point[1];

                    sum_x += x;
                    sum_y += y;

                    sum_xx += x * x;
                    sum_xy += x * y;
                }

                // `m` is the slope of the regression line
                m = ((data_length * sum_xy) - (sum_x * sum_y)) /
                    ((data_length * sum_xx) - (sum_x * sum_x));

                // `b` is the y-intercept of the line.
                b = (sum_y / data_length) - ((m * sum_x) / data_length);
            }

            // Return both values as an object.
            return { m: m, b: b };
        };

        // a shortcut for simply getting the slope of the regression line
        linreg.m = function() {
            return linreg.mb().m;
        };

        // a shortcut for simply getting the y-intercept of the regression
        // line.
        linreg.b = function() {
            return linreg.mb().b;
        };

        // ## Fitting The Regression Line
        //
        // This is called after `.data()` and returns the
        // equation `y = f(x)` which gives the position
        // of the regression line at each point in `x`.
        linreg.line = function() {

            // Get the slope, `m`, and y-intercept, `b`, of the line.
            var mb = linreg.mb(),
                m = mb.m,
                b = mb.b;

            // Return a function that computes a `y` value for each
            // x value it is given, based on the values of `b` and `a`
            // that we just computed.
            return function(x) {
                return b + (m * x);
            };
        };

        return linreg;
    }

    // # [R Squared](http://en.wikipedia.org/wiki/Coefficient_of_determination)
    //
    // The r-squared value of data compared with a function `f`
    // is the sum of the squared differences between the prediction
    // and the actual value.
    function r_squared(data, f) {
        if (data.length < 2) return 1;

        // Compute the average y value for the actual
        // data set in order to compute the
        // _total sum of squares_
        var sum = 0, average;
        for (var i = 0; i < data.length; i++) {
            sum += data[i][1];
        }
        average = sum / data.length;

        // Compute the total sum of squares - the
        // squared difference between each point
        // and the average of all points.
        var sum_of_squares = 0;
        for (var j = 0; j < data.length; j++) {
            sum_of_squares += Math.pow(average - data[j][1], 2);
        }

        // Finally estimate the error: the squared
        // difference between the estimate and the actual data
        // value at each point.
        var err = 0;
        for (var k = 0; k < data.length; k++) {
            err += Math.pow(data[k][1] - f(data[k][0]), 2);
        }

        // As the error grows larger, its ratio to the
        // sum of squares increases and the r squared
        // value grows lower.
        return 1 - (err / sum_of_squares);
    }


    // # [Bayesian Classifier](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)
    //
    // This is a naÃ¯ve bayesian classifier that takes
    // singly-nested objects.
    function bayesian() {
        // The `bayes_model` object is what will be exposed
        // by this closure, with all of its extended methods, and will
        // have access to all scope variables, like `total_count`.
        var bayes_model = {},
            // The number of items that are currently
            // classified in the model
            total_count = 0,
            // Every item classified in the model
            data = {};

        // ## Train
        // Train the classifier with a new item, which has a single
        // dimension of Javascript literal keys and values.
        bayes_model.train = function(item, category) {
            // If the data object doesn't have any values
            // for this category, create a new object for it.
            if (!data[category]) data[category] = {};

            // Iterate through each key in the item.
            for (var k in item) {
                var v = item[k];
                // Initialize the nested object `data[category][k][item[k]]`
                // with an object of keys that equal 0.
                if (data[category][k] === undefined) data[category][k] = {};
                if (data[category][k][v] === undefined) data[category][k][v] = 0;

                // And increment the key for this key/value combination.
                data[category][k][item[k]]++;
            }
            // Increment the number of items classified
            total_count++;
        };

        // ## Score
        // Generate a score of how well this item matches all
        // possible categories based on its attributes
        bayes_model.score = function(item) {
            // Initialize an empty array of odds per category.
            var odds = {}, category;
            // Iterate through each key in the item,
            // then iterate through each category that has been used
            // in previous calls to `.train()`
            for (var k in item) {
                var v = item[k];
                for (category in data) {
                    // Create an empty object for storing key - value combinations
                    // for this category.
                    if (odds[category] === undefined) odds[category] = {};

                    // If this item doesn't even have a property, it counts for nothing,
                    // but if it does have the property that we're looking for from
                    // the item to categorize, it counts based on how popular it is
                    // versus the whole population.
                    if (data[category][k]) {
                        odds[category][k + '_' + v] = (data[category][k][v] || 0) / total_count;
                    } else {
                        odds[category][k + '_' + v] = 0;
                    }
                }
            }

            // Set up a new object that will contain sums of these odds by category
            var odds_sums = {};

            for (category in odds) {
                // Tally all of the odds for each category-combination pair -
                // the non-existence of a category does not add anything to the
                // score.
                for (var combination in odds[category]) {
                    if (odds_sums[category] === undefined) odds_sums[category] = 0;
                    odds_sums[category] += odds[category][combination];
                }
            }

            return odds_sums;
        };

        // Return the completed model.
        return bayes_model;
    }

    // # sum
    //
    // is simply the result of adding all numbers
    // together, starting from zero.
    //
    // This runs on `O(n)`, linear time in respect to the array
    function sum(x) {
        var value = 0;
        for (var i = 0; i < x.length; i++) {
            value += x[i];
        }
        return value;
    }

    // # mean
    //
    // is the sum over the number of values
    //
    // This runs on `O(n)`, linear time in respect to the array
    function mean(x) {
        // The mean of no numbers is null
        if (x.length === 0) return null;

        return sum(x) / x.length;
    }

    // # geometric mean
    //
    // a mean function that is more useful for numbers in different
    // ranges.
    //
    // this is the nth root of the input numbers multiplied by each other
    //
    // This runs on `O(n)`, linear time in respect to the array
    function geometric_mean(x) {
        // The mean of no numbers is null
        if (x.length === 0) return null;

        // the starting value.
        var value = 1;

        for (var i = 0; i < x.length; i++) {
            // the geometric mean is only valid for positive numbers
            if (x[i] <= 0) return null;

            // repeatedly multiply the value by each number
            value *= x[i];
        }

        return Math.pow(value, 1 / x.length);
    }


    // # harmonic mean
    //
    // a mean function typically used to find the average of rates
    //
    // this is the reciprocal of the arithmetic mean of the reciprocals
    // of the input numbers
    //
    // This runs on `O(n)`, linear time in respect to the array
    function harmonic_mean(x) {
        // The mean of no numbers is null
        if (x.length === 0) return null;

        var reciprocal_sum = 0;

        for (var i = 0; i < x.length; i++) {
            // the harmonic mean is only valid for positive numbers
            if (x[i] <= 0) return null;

            reciprocal_sum += 1 / x[i];
        }

        // divide n by the the reciprocal sum
        return x.length / reciprocal_sum;
    }


    // # min
    //
    // This is simply the minimum number in the set.
    //
    // This runs on `O(n)`, linear time in respect to the array
    function min(x) {
        var value;
        for (var i = 0; i < x.length; i++) {
            // On the first iteration of this loop, min is
            // undefined and is thus made the minimum element in the array
            if (x[i] < value || value === undefined) value = x[i];
        }
        return value;
    }

    // # max
    //
    // This is simply the maximum number in the set.
    //
    // This runs on `O(n)`, linear time in respect to the array
    function max(x) {
        var value;
        for (var i = 0; i < x.length; i++) {
            // On the first iteration of this loop, max is
            // undefined and is thus made the maximum element in the array
            if (x[i] > value || value === undefined) value = x[i];
        }
        return value;
    }

    // # [variance](http://en.wikipedia.org/wiki/Variance)
    //
    // is the sum of squared deviations from the mean
    //
    // depends on `mean()`
    function variance(x) {
        // The variance of no numbers is null
        if (x.length === 0) return null;

        var mean_value = mean(x),
            deviations = [];

        // Make a list of squared deviations from the mean.
        for (var i = 0; i < x.length; i++) {
            deviations.push(Math.pow(x[i] - mean_value, 2));
        }

        // Find the mean value of that list
        return mean(deviations);
    }

    // # [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)
    //
    // is just the square root of the variance.
    //
    // depends on `variance()`
    function standard_deviation(x) {
        // The standard deviation of no numbers is null
        if (x.length === 0) return null;

        return Math.sqrt(variance(x));
    }

    // The sum of deviations to the Nth power.
    // When n=2 it's the sum of squared deviations.
    // When n=3 it's the sum of cubed deviations.
    //
    // depends on `mean()`
    function sum_nth_power_deviations(x, n) {
        var mean_value = mean(x),
            sum = 0;

        for (var i = 0; i < x.length; i++) {
            sum += Math.pow(x[i] - mean_value, n);
        }

        return sum;
    }

    // # [variance](http://en.wikipedia.org/wiki/Variance)
    //
    // is the sum of squared deviations from the mean
    //
    // depends on `sum_nth_power_deviations`
    function sample_variance(x) {
        // The variance of no numbers is null
        if (x.length <= 1) return null;

        var sum_squared_deviations_value = sum_nth_power_deviations(x, 2);

        // Find the mean value of that list
        return sum_squared_deviations_value / (x.length - 1);
    }

    // # [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)
    //
    // is just the square root of the variance.
    //
    // depends on `sample_variance()`
    function sample_standard_deviation(x) {
        // The standard deviation of no numbers is null
        if (x.length <= 1) return null;

        return Math.sqrt(sample_variance(x));
    }

    // # [covariance](http://en.wikipedia.org/wiki/Covariance)
    //
    // sample covariance of two datasets:
    // how much do the two datasets move together?
    // x and y are two datasets, represented as arrays of numbers.
    //
    // depends on `mean()`
    function sample_covariance(x, y) {

        // The two datasets must have the same length which must be more than 1
        if (x.length <= 1 || x.length != y.length){
            return null;
        }

        // determine the mean of each dataset so that we can judge each
        // value of the dataset fairly as the difference from the mean. this
        // way, if one dataset is [1, 2, 3] and [2, 3, 4], their covariance
        // does not suffer because of the difference in absolute values
        var xmean = mean(x),
            ymean = mean(y),
            sum = 0;

        // for each pair of values, the covariance increases when their
        // difference from the mean is associated - if both are well above
        // or if both are well below
        // the mean, the covariance increases significantly.
        for (var i = 0; i < x.length; i++){
            sum += (x[i] - xmean) * (y[i] - ymean);
        }

        // the covariance is weighted by the length of the datasets.
        return sum / (x.length - 1);
    }

    // # [correlation](http://en.wikipedia.org/wiki/Correlation_and_dependence)
    //
    // Gets a measure of how correlated two datasets are, between -1 and 1
    //
    // depends on `sample_standard_deviation()` and `sample_covariance()`
    function sample_correlation(x, y) {
        var cov = sample_covariance(x, y),
            xstd = sample_standard_deviation(x),
            ystd = sample_standard_deviation(y);

        if (cov === null || xstd === null || ystd === null) {
            return null;
        }

        return cov / xstd / ystd;
    }

    // # [median](http://en.wikipedia.org/wiki/Median)
    //
    // The middle number of a list. This is often a good indicator of 'the middle'
    // when there are outliers that skew the `mean()` value.
    function median(x) {
        // The median of an empty list is null
        if (x.length === 0) return null;

        // Sorting the array makes it easy to find the center, but
        // use `.slice()` to ensure the original array `x` is not modified
        var sorted = x.slice().sort(function (a, b) { return a - b; });

        // If the length of the list is odd, it's the central number
        if (sorted.length % 2 === 1) {
            return sorted[(sorted.length - 1) / 2];
        // Otherwise, the median is the average of the two numbers
        // at the center of the list
        } else {
            var a = sorted[(sorted.length / 2) - 1];
            var b = sorted[(sorted.length / 2)];
            return (a + b) / 2;
        }
    }

    // # [mode](http://bit.ly/W5K4Yt)
    //
    // The mode is the number that appears in a list the highest number of times.
    // There can be multiple modes in a list: in the event of a tie, this
    // algorithm will return the most recently seen mode.
    //
    // This implementation is inspired by [science.js](https://github.com/jasondavies/science.js/blob/master/src/stats/mode.js)
    //
    // This runs on `O(n)`, linear time in respect to the array
    function mode(x) {

        // Handle edge cases:
        // The median of an empty list is null
        if (x.length === 0) return null;
        else if (x.length === 1) return x[0];

        // Sorting the array lets us iterate through it below and be sure
        // that every time we see a new number it's new and we'll never
        // see the same number twice
        var sorted = x.slice().sort(function (a, b) { return a - b; });

        // This assumes it is dealing with an array of size > 1, since size
        // 0 and 1 are handled immediately. Hence it starts at index 1 in the
        // array.
        var last = sorted[0],
            // store the mode as we find new modes
            value,
            // store how many times we've seen the mode
            max_seen = 0,
            // how many times the current candidate for the mode
            // has been seen
            seen_this = 1;

        // end at sorted.length + 1 to fix the case in which the mode is
        // the highest number that occurs in the sequence. the last iteration
        // compares sorted[i], which is undefined, to the highest number
        // in the series
        for (var i = 1; i < sorted.length + 1; i++) {
            // we're seeing a new number pass by
            if (sorted[i] !== last) {
                // the last number is the new mode since we saw it more
                // often than the old one
                if (seen_this > max_seen) {
                    max_seen = seen_this;
                    value = last;
                }
                seen_this = 1;
                last = sorted[i];
            // if this isn't a new number, it's one more occurrence of
            // the potential mode
            } else { seen_this++; }
        }
        return value;
    }

    // # [t-test](http://en.wikipedia.org/wiki/Student's_t-test)
    //
    // This is to compute a one-sample t-test, comparing the mean
    // of a sample to a known value, x.
    //
    // in this case, we're trying to determine whether the
    // population mean is equal to the value that we know, which is `x`
    // here. usually the results here are used to look up a
    // [p-value](http://en.wikipedia.org/wiki/P-value), which, for
    // a certain level of significance, will let you determine that the
    // null hypothesis can or cannot be rejected.
    //
    // Depends on `standard_deviation()` and `mean()`
    function t_test(sample, x) {
        // The mean of the sample
        var sample_mean = mean(sample);

        // The standard deviation of the sample
        var sd = standard_deviation(sample);

        // Square root the length of the sample
        var rootN = Math.sqrt(sample.length);

        // Compute the known value against the sample,
        // returning the t value
        return (sample_mean - x) / (sd / rootN);
    }

    // # [2-sample t-test](http://en.wikipedia.org/wiki/Student's_t-test)
    //
    // This is to compute two sample t-test.
    // Tests whether "mean(X)-mean(Y) = difference", (
    // in the most common case, we often have `difference == 0` to test if two samples
    // are likely to be taken from populations with the same mean value) with
    // no prior knowledge on standard deviations of both samples
    // other than the fact that they have the same standard deviation.
    //
    // Usually the results here are used to look up a
    // [p-value](http://en.wikipedia.org/wiki/P-value), which, for
    // a certain level of significance, will let you determine that the
    // null hypothesis can or cannot be rejected.
    //
    // `diff` can be omitted if it equals 0.
    //
    // [This is used to confirm or deny](http://www.monarchlab.org/Lab/Research/Stats/2SampleT.aspx)
    // a null hypothesis that the two populations that have been sampled into
    // `sample_x` and `sample_y` are equal to each other.
    //
    // Depends on `sample_variance()` and `mean()`
    function t_test_two_sample(sample_x, sample_y, difference) {
        var n = sample_x.length,
            m = sample_y.length;

        // If either sample doesn't actually have any values, we can't
        // compute this at all, so we return `null`.
        if (!n || !m) return null ;

        // default difference (mu) is zero
        if (!difference) difference = 0;

        var meanX = mean(sample_x),
            meanY = mean(sample_y);

        var weightedVariance = ((n - 1) * sample_variance(sample_x) +
            (m - 1) * sample_variance(sample_y)) / (n + m - 2);

        return (meanX - meanY - difference) /
            Math.sqrt(weightedVariance * (1 / n + 1 / m));
    }

    // # quantile
    //
    // This is a population quantile, since we assume to know the entire
    // dataset in this library. Thus I'm trying to follow the
    // [Quantiles of a Population](http://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population)
    // algorithm from wikipedia.
    //
    // Sample is a one-dimensional array of numbers,
    // and p is either a decimal number from 0 to 1 or an array of decimal
    // numbers from 0 to 1.
    // In terms of a k/q quantile, p = k/q - it's just dealing with fractions or dealing
    // with decimal values.
    // When p is an array, the result of the function is also an array containing the appropriate
    // quantiles in input order
    function quantile(sample, p) {

        // We can't derive quantiles from an empty list
        if (sample.length === 0) return null;

        // Sort a copy of the array. We'll need a sorted array to index
        // the values in sorted order.
        var sorted = sample.slice().sort(function (a, b) { return a - b; });

        if (p.length) {
            // Initialize the result array
            var results = [];
            // For each requested quantile
            for (var i = 0; i < p.length; i++) {
                results[i] = quantile_sorted(sorted, p[i]);
            }
            return results;
        } else {
            return quantile_sorted(sorted, p);
        }
    }

    // # quantile
    //
    // This is the internal implementation of quantiles: when you know
    // that the order is sorted, you don't need to re-sort it, and the computations
    // are much faster.
    function quantile_sorted(sample, p) {
        var idx = (sample.length) * p;
        if (p < 0 || p > 1) {
            return null;
        } else if (p === 1) {
            // If p is 1, directly return the last element
            return sample[sample.length - 1];
        } else if (p === 0) {
            // If p is 0, directly return the first element
            return sample[0];
        } else if (idx % 1 !== 0) {
            // If p is not integer, return the next element in array
            return sample[Math.ceil(idx) - 1];
        } else if (sample.length % 2 === 0) {
            // If the list has even-length, we'll take the average of this number
            // and the next value, if there is one
            return (sample[idx - 1] + sample[idx]) / 2;
        } else {
            // Finally, in the simple case of an integer value
            // with an odd-length list, return the sample value at the index.
            return sample[idx];
        }
    }

    // # [Interquartile range](http://en.wikipedia.org/wiki/Interquartile_range)
    //
    // A measure of statistical dispersion, or how scattered, spread, or
    // concentrated a distribution is. It's computed as the difference between
    // the third quartile and first quartile.
    function iqr(sample) {
        // We can't derive quantiles from an empty list
        if (sample.length === 0) return null;

        // Interquartile range is the span between the upper quartile,
        // at `0.75`, and lower quartile, `0.25`
        return quantile(sample, 0.75) - quantile(sample, 0.25);
    }

    // # [Median Absolute Deviation](http://en.wikipedia.org/wiki/Median_absolute_deviation)
    //
    // The Median Absolute Deviation (MAD) is a robust measure of statistical
    // dispersion. It is more resilient to outliers than the standard deviation.
    function mad(x) {
        // The mad of nothing is null
        if (!x || x.length === 0) return null;

        var median_value = median(x),
            median_absolute_deviations = [];

        // Make a list of absolute deviations from the median
        for (var i = 0; i < x.length; i++) {
            median_absolute_deviations.push(Math.abs(x[i] - median_value));
        }

        // Find the median value of that list
        return median(median_absolute_deviations);
    }

    // ## Compute Matrices for Jenks
    //
    // Compute the matrices required for Jenks breaks. These matrices
    // can be used for any classing of data with `classes <= n_classes`
    function jenksMatrices(data, n_classes) {

        // in the original implementation, these matrices are referred to
        // as `LC` and `OP`
        //
        // * lower_class_limits (LC): optimal lower class limits
        // * variance_combinations (OP): optimal variance combinations for all classes
        var lower_class_limits = [],
            variance_combinations = [],
            // loop counters
            i, j,
            // the variance, as computed at each step in the calculation
            variance = 0;

        // Initialize and fill each matrix with zeroes
        for (i = 0; i < data.length + 1; i++) {
            var tmp1 = [], tmp2 = [];
            // despite these arrays having the same values, we need
            // to keep them separate so that changing one does not change
            // the other
            for (j = 0; j < n_classes + 1; j++) {
                tmp1.push(0);
                tmp2.push(0);
            }
            lower_class_limits.push(tmp1);
            variance_combinations.push(tmp2);
        }

        for (i = 1; i < n_classes + 1; i++) {
            lower_class_limits[1][i] = 1;
            variance_combinations[1][i] = 0;
            // in the original implementation, 9999999 is used but
            // since Javascript has `Infinity`, we use that.
            for (j = 2; j < data.length + 1; j++) {
                variance_combinations[j][i] = Infinity;
            }
        }

        for (var l = 2; l < data.length + 1; l++) {

            // `SZ` originally. this is the sum of the values seen thus
            // far when calculating variance.
            var sum = 0,
                // `ZSQ` originally. the sum of squares of values seen
                // thus far
                sum_squares = 0,
                // `WT` originally. This is the number of
                w = 0,
                // `IV` originally
                i4 = 0;

            // in several instances, you could say `Math.pow(x, 2)`
            // instead of `x * x`, but this is slower in some browsers
            // introduces an unnecessary concept.
            for (var m = 1; m < l + 1; m++) {

                // `III` originally
                var lower_class_limit = l - m + 1,
                    val = data[lower_class_limit - 1];

                // here we're estimating variance for each potential classing
                // of the data, for each potential number of classes. `w`
                // is the number of data points considered so far.
                w++;

                // increase the current sum and sum-of-squares
                sum += val;
                sum_squares += val * val;

                // the variance at this point in the sequence is the difference
                // between the sum of squares and the total x 2, over the number
                // of samples.
                variance = sum_squares - (sum * sum) / w;

                i4 = lower_class_limit - 1;

                if (i4 !== 0) {
                    for (j = 2; j < n_classes + 1; j++) {
                        // if adding this element to an existing class
                        // will increase its variance beyond the limit, break
                        // the class at this point, setting the `lower_class_limit`
                        // at this point.
                        if (variance_combinations[l][j] >=
                            (variance + variance_combinations[i4][j - 1])) {
                            lower_class_limits[l][j] = lower_class_limit;
                            variance_combinations[l][j] = variance +
                                variance_combinations[i4][j - 1];
                        }
                    }
                }
            }

            lower_class_limits[l][1] = 1;
            variance_combinations[l][1] = variance;
        }

        // return the two matrices. for just providing breaks, only
        // `lower_class_limits` is needed, but variances can be useful to
        // evaluate goodness of fit.
        return {
            lower_class_limits: lower_class_limits,
            variance_combinations: variance_combinations
        };
    }

    // ## Pull Breaks Values for Jenks
    //
    // the second part of the jenks recipe: take the calculated matrices
    // and derive an array of n breaks.
    function jenksBreaks(data, lower_class_limits, n_classes) {

        var k = data.length - 1,
            kclass = [],
            countNum = n_classes;

        // the calculation of classes will never include the upper and
        // lower bounds, so we need to explicitly set them
        kclass[n_classes] = data[data.length - 1];
        kclass[0] = data[0];

        // the lower_class_limits matrix is used as indices into itself
        // here: the `k` variable is reused in each iteration.
        while (countNum > 1) {
            kclass[countNum - 1] = data[lower_class_limits[k][countNum] - 2];
            k = lower_class_limits[k][countNum] - 1;
            countNum--;
        }

        return kclass;
    }

    // # [Jenks natural breaks optimization](http://en.wikipedia.org/wiki/Jenks_natural_breaks_optimization)
    //
    // Implementations: [1](http://danieljlewis.org/files/2010/06/Jenks.pdf) (python),
    // [2](https://github.com/vvoovv/djeo-jenks/blob/master/main.js) (buggy),
    // [3](https://github.com/simogeo/geostats/blob/master/lib/geostats.js#L407) (works)
    //
    // Depends on `jenksBreaks()` and `jenksMatrices()`
    function jenks(data, n_classes) {

        if (n_classes > data.length) return null;

        // sort data in numerical order, since this is expected
        // by the matrices function
        data = data.slice().sort(function (a, b) { return a - b; });

        // get our basic matrices
        var matrices = jenksMatrices(data, n_classes),
            // we only need lower class limits here
            lower_class_limits = matrices.lower_class_limits;

        // extract n_classes out of the computed matrices
        return jenksBreaks(data, lower_class_limits, n_classes);

    }

    // # [Skewness](http://en.wikipedia.org/wiki/Skewness)
    //
    // A measure of the extent to which a probability distribution of a
    // real-valued random variable "leans" to one side of the mean.
    // The skewness value can be positive or negative, or even undefined.
    //
    // Implementation is based on the adjusted Fisher-Pearson standardized
    // moment coefficient, which is the version found in Excel and several
    // statistical packages including Minitab, SAS and SPSS.
    //
    // Depends on `sum_nth_power_deviations()` and `sample_standard_deviation`
    function sample_skewness(x) {
        // The skewness of less than three arguments is null
        if (x.length < 3) return null;

        var n = x.length,
            cubed_s = Math.pow(sample_standard_deviation(x), 3),
            sum_cubed_deviations = sum_nth_power_deviations(x, 3);

        return n * sum_cubed_deviations / ((n - 1) * (n - 2) * cubed_s);
    }

    // # Standard Normal Table
    // A standard normal table, also called the unit normal table or Z table,
    // is a mathematical table for the values of Î¦ (phi), which are the values of
    // the cumulative distribution function of the normal distribution.
    // It is used to find the probability that a statistic is observed below,
    // above, or between values on the standard normal distribution, and by
    // extension, any normal distribution.
    //
    // The probabilities are taken from http://en.wikipedia.org/wiki/Standard_normal_table
    // The table used is the cumulative, and not cumulative from 0 to mean
    // (even though the latter has 5 digits precision, instead of 4).
    var standard_normal_table = [
        /*  z      0.00    0.01    0.02    0.03    0.04    0.05    0.06    0.07    0.08    0.09 */
        /* 0.0 */
        0.5000, 0.5040, 0.5080, 0.5120, 0.5160, 0.5199, 0.5239, 0.5279, 0.5319, 0.5359,
        /* 0.1 */
        0.5398, 0.5438, 0.5478, 0.5517, 0.5557, 0.5596, 0.5636, 0.5675, 0.5714, 0.5753,
        /* 0.2 */
        0.5793, 0.5832, 0.5871, 0.5910, 0.5948, 0.5987, 0.6026, 0.6064, 0.6103, 0.6141,
        /* 0.3 */
        0.6179, 0.6217, 0.6255, 0.6293, 0.6331, 0.6368, 0.6406, 0.6443, 0.6480, 0.6517,
        /* 0.4 */
        0.6554, 0.6591, 0.6628, 0.6664, 0.6700, 0.6736, 0.6772, 0.6808, 0.6844, 0.6879,
        /* 0.5 */
        0.6915, 0.6950, 0.6985, 0.7019, 0.7054, 0.7088, 0.7123, 0.7157, 0.7190, 0.7224,
        /* 0.6 */
        0.7257, 0.7291, 0.7324, 0.7357, 0.7389, 0.7422, 0.7454, 0.7486, 0.7517, 0.7549,
        /* 0.7 */
        0.7580, 0.7611, 0.7642, 0.7673, 0.7704, 0.7734, 0.7764, 0.7794, 0.7823, 0.7852,
        /* 0.8 */
        0.7881, 0.7910, 0.7939, 0.7967, 0.7995, 0.8023, 0.8051, 0.8078, 0.8106, 0.8133,
        /* 0.9 */
        0.8159, 0.8186, 0.8212, 0.8238, 0.8264, 0.8289, 0.8315, 0.8340, 0.8365, 0.8389,
        /* 1.0 */
        0.8413, 0.8438, 0.8461, 0.8485, 0.8508, 0.8531, 0.8554, 0.8577, 0.8599, 0.8621,
        /* 1.1 */
        0.8643, 0.8665, 0.8686, 0.8708, 0.8729, 0.8749, 0.8770, 0.8790, 0.8810, 0.8830,
        /* 1.2 */
        0.8849, 0.8869, 0.8888, 0.8907, 0.8925, 0.8944, 0.8962, 0.8980, 0.8997, 0.9015,
        /* 1.3 */
        0.9032, 0.9049, 0.9066, 0.9082, 0.9099, 0.9115, 0.9131, 0.9147, 0.9162, 0.9177,
        /* 1.4 */
        0.9192, 0.9207, 0.9222, 0.9236, 0.9251, 0.9265, 0.9279, 0.9292, 0.9306, 0.9319,
        /* 1.5 */
        0.9332, 0.9345, 0.9357, 0.9370, 0.9382, 0.9394, 0.9406, 0.9418, 0.9429, 0.9441,
        /* 1.6 */
        0.9452, 0.9463, 0.9474, 0.9484, 0.9495, 0.9505, 0.9515, 0.9525, 0.9535, 0.9545,
        /* 1.7 */
        0.9554, 0.9564, 0.9573, 0.9582, 0.9591, 0.9599, 0.9608, 0.9616, 0.9625, 0.9633,
        /* 1.8 */
        0.9641, 0.9649, 0.9656, 0.9664, 0.9671, 0.9678, 0.9686, 0.9693, 0.9699, 0.9706,
        /* 1.9 */
        0.9713, 0.9719, 0.9726, 0.9732, 0.9738, 0.9744, 0.9750, 0.9756, 0.9761, 0.9767,
        /* 2.0 */
        0.9772, 0.9778, 0.9783, 0.9788, 0.9793, 0.9798, 0.9803, 0.9808, 0.9812, 0.9817,
        /* 2.1 */
        0.9821, 0.9826, 0.9830, 0.9834, 0.9838, 0.9842, 0.9846, 0.9850, 0.9854, 0.9857,
        /* 2.2 */
        0.9861, 0.9864, 0.9868, 0.9871, 0.9875, 0.9878, 0.9881, 0.9884, 0.9887, 0.9890,
        /* 2.3 */
        0.9893, 0.9896, 0.9898, 0.9901, 0.9904, 0.9906, 0.9909, 0.9911, 0.9913, 0.9916,
        /* 2.4 */
        0.9918, 0.9920, 0.9922, 0.9925, 0.9927, 0.9929, 0.9931, 0.9932, 0.9934, 0.9936,
        /* 2.5 */
        0.9938, 0.9940, 0.9941, 0.9943, 0.9945, 0.9946, 0.9948, 0.9949, 0.9951, 0.9952,
        /* 2.6 */
        0.9953, 0.9955, 0.9956, 0.9957, 0.9959, 0.9960, 0.9961, 0.9962, 0.9963, 0.9964,
        /* 2.7 */
        0.9965, 0.9966, 0.9967, 0.9968, 0.9969, 0.9970, 0.9971, 0.9972, 0.9973, 0.9974,
        /* 2.8 */
        0.9974, 0.9975, 0.9976, 0.9977, 0.9977, 0.9978, 0.9979, 0.9979, 0.9980, 0.9981,
        /* 2.9 */
        0.9981, 0.9982, 0.9982, 0.9983, 0.9984, 0.9984, 0.9985, 0.9985, 0.9986, 0.9986,
        /* 3.0 */
        0.9987, 0.9987, 0.9987, 0.9988, 0.9988, 0.9989, 0.9989, 0.9989, 0.9990, 0.9990
    ];

    // # [Cumulative Standard Normal Probability](http://en.wikipedia.org/wiki/Standard_normal_table)
    //
    // Since probability tables cannot be
    // printed for every normal distribution, as there are an infinite variety
    // of normal distributions, it is common practice to convert a normal to a
    // standard normal and then use the standard normal table to find probabilities
    function cumulative_std_normal_probability(z) {

        // Calculate the position of this value.
        var absZ = Math.abs(z),
            // Each row begins with a different
            // significant digit: 0.5, 0.6, 0.7, and so on. So the row is simply
            // this value's significant digit: 0.567 will be in row 0, so row=0,
            // 0.643 will be in row 1, so row=10.
            row = Math.floor(absZ * 10),
            column = 10 * (Math.floor(absZ * 100) / 10 - Math.floor(absZ * 100 / 10)),
            index = Math.min((row * 10) + column, standard_normal_table.length - 1);

        // The index we calculate must be in the table as a positive value,
        // but we still pay attention to whether the input is positive
        // or negative, and flip the output value as a last step.
        if (z >= 0) {
            return standard_normal_table[index];
        } else {
            // due to floating-point arithmetic, values in the table with
            // 4 significant figures can nevertheless end up as repeating
            // fractions when they're computed here.
            return +(1 - standard_normal_table[index]).toFixed(4);
        }
    }

    // # [Z-Score, or Standard Score](http://en.wikipedia.org/wiki/Standard_score)
    //
    // The standard score is the number of standard deviations an observation
    // or datum is above or below the mean. Thus, a positive standard score
    // represents a datum above the mean, while a negative standard score
    // represents a datum below the mean. It is a dimensionless quantity
    // obtained by subtracting the population mean from an individual raw
    // score and then dividing the difference by the population standard
    // deviation.
    //
    // The z-score is only defined if one knows the population parameters;
    // if one only has a sample set, then the analogous computation with
    // sample mean and sample standard deviation yields the
    // Student's t-statistic.
    function z_score(x, mean, standard_deviation) {
        return (x - mean) / standard_deviation;
    }

    // We use `Îµ`, epsilon, as a stopping criterion when we want to iterate
    // until we're "close enough".
    var epsilon = 0.0001;

    // # [Factorial](https://en.wikipedia.org/wiki/Factorial)
    //
    // A factorial, usually written n!, is the product of all positive
    // integers less than or equal to n. Often factorial is implemented
    // recursively, but this iterative approach is significantly faster
    // and simpler.
    function factorial(n) {

        // factorial is mathematically undefined for negative numbers
        if (n < 0 ) { return null; }

        // typically you'll expand the factorial function going down, like
        // 5! = 5 * 4 * 3 * 2 * 1. This is going in the opposite direction,
        // counting from 2 up to the number in question, and since anything
        // multiplied by 1 is itself, the loop only needs to start at 2.
        var accumulator = 1;
        for (var i = 2; i <= n; i++) {
            // for each number up to and including the number `n`, multiply
            // the accumulator my that number.
            accumulator *= i;
        }
        return accumulator;
    }

    // # Bernoulli Distribution
    //
    // The [Bernoulli distribution](http://en.wikipedia.org/wiki/Bernoulli_distribution)
    // is the probability discrete
    // distribution of a random variable which takes value 1 with success
    // probability `p` and value 0 with failure
    // probability `q` = 1 - `p`. It can be used, for example, to represent the
    // toss of a coin, where "1" is defined to mean "heads" and "0" is defined
    // to mean "tails" (or vice versa). It is
    // a special case of a Binomial Distribution
    // where `n` = 1.
    function bernoulli_distribution(p) {
        // Check that `p` is a valid probability (0 â¤ p â¤ 1)
        if (p < 0 || p > 1 ) { return null; }

        return binomial_distribution(1, p);
    }

    // # Binomial Distribution
    //
    // The [Binomial Distribution](http://en.wikipedia.org/wiki/Binomial_distribution) is the discrete probability
    // distribution of the number of successes in a sequence of n independent yes/no experiments, each of which yields
    // success with probability `probability`. Such a success/failure experiment is also called a Bernoulli experiment or
    // Bernoulli trial; when trials = 1, the Binomial Distribution is a Bernoulli Distribution.
    function binomial_distribution(trials, probability) {
        // Check that `p` is a valid probability (0 â¤ p â¤ 1),
        // that `n` is an integer, strictly positive.
        if (probability < 0 || probability > 1 ||
            trials <= 0 || trials % 1 !== 0) {
            return null;
        }

        // a [probability mass function](https://en.wikipedia.org/wiki/Probability_mass_function)
        function probability_mass(x, trials, probability) {
            return factorial(trials) /
                (factorial(x) * factorial(trials - x)) *
                (Math.pow(probability, x) * Math.pow(1 - probability, trials - x));
        }

        // We initialize `x`, the random variable, and `accumulator`, an accumulator
        // for the cumulative distribution function to 0. `distribution_functions`
        // is the object we'll return with the `probability_of_x` and the
        // `cumulative_probability_of_x`, as well as the calculated mean &
        // variance. We iterate until the `cumulative_probability_of_x` is
        // within `epsilon` of 1.0.
        var x = 0,
            cumulative_probability = 0,
            cells = {};

        // This algorithm iterates through each potential outcome,
        // until the `cumulative_probability` is very close to 1, at
        // which point we've defined the vast majority of outcomes
        do {
            cells[x] = probability_mass(x, trials, probability);
            cumulative_probability += cells[x];
            x++;
        // when the cumulative_probability is nearly 1, we've calculated
        // the useful range of this distribution
        } while (cumulative_probability < 1 - epsilon);

        return cells;
    }

    // # Poisson Distribution
    //
    // The [Poisson Distribution](http://en.wikipedia.org/wiki/Poisson_distribution)
    // is a discrete probability distribution that expresses the probability
    // of a given number of events occurring in a fixed interval of time
    // and/or space if these events occur with a known average rate and
    // independently of the time since the last event.
    //
    // The Poisson Distribution is characterized by the strictly positive
    // mean arrival or occurrence rate, `Î»`.
    function poisson_distribution(lambda) {
        // Check that lambda is strictly positive
        if (lambda <= 0) { return null; }

        // our current place in the distribution
        var x = 0,
            // and we keep track of the current cumulative probability, in
            // order to know when to stop calculating chances.
            cumulative_probability = 0,
            // the calculated cells to be returned
            cells = {};

        // a [probability mass function](https://en.wikipedia.org/wiki/Probability_mass_function)
        function probability_mass(x, lambda) {
            return (Math.pow(Math.E, -lambda) * Math.pow(lambda, x)) /
                factorial(x);
        }

        // This algorithm iterates through each potential outcome,
        // until the `cumulative_probability` is very close to 1, at
        // which point we've defined the vast majority of outcomes
        do {
            cells[x] = probability_mass(x, lambda);
            cumulative_probability += cells[x];
            x++;
        // when the cumulative_probability is nearly 1, we've calculated
        // the useful range of this distribution
        } while (cumulative_probability < 1 - epsilon);

        return cells;
    }

    // # Percentage Points of the Ï2 (Chi-Squared) Distribution
    // The [Ï2 (Chi-Squared) Distribution](http://en.wikipedia.org/wiki/Chi-squared_distribution) is used in the common
    // chi-squared tests for goodness of fit of an observed distribution to a theoretical one, the independence of two
    // criteria of classification of qualitative data, and in confidence interval estimation for a population standard
    // deviation of a normal distribution from a sample standard deviation.
    //
    // Values from Appendix 1, Table III of William W. Hines & Douglas C. Montgomery, "Probability and Statistics in
    // Engineering and Management Science", Wiley (1980).
    var chi_squared_distribution_table = {
        1: { 0.995:  0.00, 0.99:  0.00, 0.975:  0.00, 0.95:  0.00, 0.9:  0.02, 0.5:  0.45, 0.1:  2.71, 0.05:  3.84, 0.025:  5.02, 0.01:  6.63, 0.005:  7.88 },
        2: { 0.995:  0.01, 0.99:  0.02, 0.975:  0.05, 0.95:  0.10, 0.9:  0.21, 0.5:  1.39, 0.1:  4.61, 0.05:  5.99, 0.025:  7.38, 0.01:  9.21, 0.005: 10.60 },
        3: { 0.995:  0.07, 0.99:  0.11, 0.975:  0.22, 0.95:  0.35, 0.9:  0.58, 0.5:  2.37, 0.1:  6.25, 0.05:  7.81, 0.025:  9.35, 0.01: 11.34, 0.005: 12.84 },
        4: { 0.995:  0.21, 0.99:  0.30, 0.975:  0.48, 0.95:  0.71, 0.9:  1.06, 0.5:  3.36, 0.1:  7.78, 0.05:  9.49, 0.025: 11.14, 0.01: 13.28, 0.005: 14.86 },
        5: { 0.995:  0.41, 0.99:  0.55, 0.975:  0.83, 0.95:  1.15, 0.9:  1.61, 0.5:  4.35, 0.1:  9.24, 0.05: 11.07, 0.025: 12.83, 0.01: 15.09, 0.005: 16.75 },
        6: { 0.995:  0.68, 0.99:  0.87, 0.975:  1.24, 0.95:  1.64, 0.9:  2.20, 0.5:  5.35, 0.1: 10.65, 0.05: 12.59, 0.025: 14.45, 0.01: 16.81, 0.005: 18.55 },
        7: { 0.995:  0.99, 0.99:  1.25, 0.975:  1.69, 0.95:  2.17, 0.9:  2.83, 0.5:  6.35, 0.1: 12.02, 0.05: 14.07, 0.025: 16.01, 0.01: 18.48, 0.005: 20.28 },
        8: { 0.995:  1.34, 0.99:  1.65, 0.975:  2.18, 0.95:  2.73, 0.9:  3.49, 0.5:  7.34, 0.1: 13.36, 0.05: 15.51, 0.025: 17.53, 0.01: 20.09, 0.005: 21.96 },
        9: { 0.995:  1.73, 0.99:  2.09, 0.975:  2.70, 0.95:  3.33, 0.9:  4.17, 0.5:  8.34, 0.1: 14.68, 0.05: 16.92, 0.025: 19.02, 0.01: 21.67, 0.005: 23.59 },
        10: { 0.995:  2.16, 0.99:  2.56, 0.975:  3.25, 0.95:  3.94, 0.9:  4.87, 0.5:  9.34, 0.1: 15.99, 0.05: 18.31, 0.025: 20.48, 0.01: 23.21, 0.005: 25.19 },
        11: { 0.995:  2.60, 0.99:  3.05, 0.975:  3.82, 0.95:  4.57, 0.9:  5.58, 0.5: 10.34, 0.1: 17.28, 0.05: 19.68, 0.025: 21.92, 0.01: 24.72, 0.005: 26.76 },
        12: { 0.995:  3.07, 0.99:  3.57, 0.975:  4.40, 0.95:  5.23, 0.9:  6.30, 0.5: 11.34, 0.1: 18.55, 0.05: 21.03, 0.025: 23.34, 0.01: 26.22, 0.005: 28.30 },
        13: { 0.995:  3.57, 0.99:  4.11, 0.975:  5.01, 0.95:  5.89, 0.9:  7.04, 0.5: 12.34, 0.1: 19.81, 0.05: 22.36, 0.025: 24.74, 0.01: 27.69, 0.005: 29.82 },
        14: { 0.995:  4.07, 0.99:  4.66, 0.975:  5.63, 0.95:  6.57, 0.9:  7.79, 0.5: 13.34, 0.1: 21.06, 0.05: 23.68, 0.025: 26.12, 0.01: 29.14, 0.005: 31.32 },
        15: { 0.995:  4.60, 0.99:  5.23, 0.975:  6.27, 0.95:  7.26, 0.9:  8.55, 0.5: 14.34, 0.1: 22.31, 0.05: 25.00, 0.025: 27.49, 0.01: 30.58, 0.005: 32.80 },
        16: { 0.995:  5.14, 0.99:  5.81, 0.975:  6.91, 0.95:  7.96, 0.9:  9.31, 0.5: 15.34, 0.1: 23.54, 0.05: 26.30, 0.025: 28.85, 0.01: 32.00, 0.005: 34.27 },
        17: { 0.995:  5.70, 0.99:  6.41, 0.975:  7.56, 0.95:  8.67, 0.9: 10.09, 0.5: 16.34, 0.1: 24.77, 0.05: 27.59, 0.025: 30.19, 0.01: 33.41, 0.005: 35.72 },
        18: { 0.995:  6.26, 0.99:  7.01, 0.975:  8.23, 0.95:  9.39, 0.9: 10.87, 0.5: 17.34, 0.1: 25.99, 0.05: 28.87, 0.025: 31.53, 0.01: 34.81, 0.005: 37.16 },
        19: { 0.995:  6.84, 0.99:  7.63, 0.975:  8.91, 0.95: 10.12, 0.9: 11.65, 0.5: 18.34, 0.1: 27.20, 0.05: 30.14, 0.025: 32.85, 0.01: 36.19, 0.005: 38.58 },
        20: { 0.995:  7.43, 0.99:  8.26, 0.975:  9.59, 0.95: 10.85, 0.9: 12.44, 0.5: 19.34, 0.1: 28.41, 0.05: 31.41, 0.025: 34.17, 0.01: 37.57, 0.005: 40.00 },
        21: { 0.995:  8.03, 0.99:  8.90, 0.975: 10.28, 0.95: 11.59, 0.9: 13.24, 0.5: 20.34, 0.1: 29.62, 0.05: 32.67, 0.025: 35.48, 0.01: 38.93, 0.005: 41.40 },
        22: { 0.995:  8.64, 0.99:  9.54, 0.975: 10.98, 0.95: 12.34, 0.9: 14.04, 0.5: 21.34, 0.1: 30.81, 0.05: 33.92, 0.025: 36.78, 0.01: 40.29, 0.005: 42.80 },
        23: { 0.995:  9.26, 0.99: 10.20, 0.975: 11.69, 0.95: 13.09, 0.9: 14.85, 0.5: 22.34, 0.1: 32.01, 0.05: 35.17, 0.025: 38.08, 0.01: 41.64, 0.005: 44.18 },
        24: { 0.995:  9.89, 0.99: 10.86, 0.975: 12.40, 0.95: 13.85, 0.9: 15.66, 0.5: 23.34, 0.1: 33.20, 0.05: 36.42, 0.025: 39.36, 0.01: 42.98, 0.005: 45.56 },
        25: { 0.995: 10.52, 0.99: 11.52, 0.975: 13.12, 0.95: 14.61, 0.9: 16.47, 0.5: 24.34, 0.1: 34.28, 0.05: 37.65, 0.025: 40.65, 0.01: 44.31, 0.005: 46.93 },
        26: { 0.995: 11.16, 0.99: 12.20, 0.975: 13.84, 0.95: 15.38, 0.9: 17.29, 0.5: 25.34, 0.1: 35.56, 0.05: 38.89, 0.025: 41.92, 0.01: 45.64, 0.005: 48.29 },
        27: { 0.995: 11.81, 0.99: 12.88, 0.975: 14.57, 0.95: 16.15, 0.9: 18.11, 0.5: 26.34, 0.1: 36.74, 0.05: 40.11, 0.025: 43.19, 0.01: 46.96, 0.005: 49.65 },
        28: { 0.995: 12.46, 0.99: 13.57, 0.975: 15.31, 0.95: 16.93, 0.9: 18.94, 0.5: 27.34, 0.1: 37.92, 0.05: 41.34, 0.025: 44.46, 0.01: 48.28, 0.005: 50.99 },
        29: { 0.995: 13.12, 0.99: 14.26, 0.975: 16.05, 0.95: 17.71, 0.9: 19.77, 0.5: 28.34, 0.1: 39.09, 0.05: 42.56, 0.025: 45.72, 0.01: 49.59, 0.005: 52.34 },
        30: { 0.995: 13.79, 0.99: 14.95, 0.975: 16.79, 0.95: 18.49, 0.9: 20.60, 0.5: 29.34, 0.1: 40.26, 0.05: 43.77, 0.025: 46.98, 0.01: 50.89, 0.005: 53.67 },
        40: { 0.995: 20.71, 0.99: 22.16, 0.975: 24.43, 0.95: 26.51, 0.9: 29.05, 0.5: 39.34, 0.1: 51.81, 0.05: 55.76, 0.025: 59.34, 0.01: 63.69, 0.005: 66.77 },
        50: { 0.995: 27.99, 0.99: 29.71, 0.975: 32.36, 0.95: 34.76, 0.9: 37.69, 0.5: 49.33, 0.1: 63.17, 0.05: 67.50, 0.025: 71.42, 0.01: 76.15, 0.005: 79.49 },
        60: { 0.995: 35.53, 0.99: 37.48, 0.975: 40.48, 0.95: 43.19, 0.9: 46.46, 0.5: 59.33, 0.1: 74.40, 0.05: 79.08, 0.025: 83.30, 0.01: 88.38, 0.005: 91.95 },
        70: { 0.995: 43.28, 0.99: 45.44, 0.975: 48.76, 0.95: 51.74, 0.9: 55.33, 0.5: 69.33, 0.1: 85.53, 0.05: 90.53, 0.025: 95.02, 0.01: 100.42, 0.005: 104.22 },
        80: { 0.995: 51.17, 0.99: 53.54, 0.975: 57.15, 0.95: 60.39, 0.9: 64.28, 0.5: 79.33, 0.1: 96.58, 0.05: 101.88, 0.025: 106.63, 0.01: 112.33, 0.005: 116.32 },
        90: { 0.995: 59.20, 0.99: 61.75, 0.975: 65.65, 0.95: 69.13, 0.9: 73.29, 0.5: 89.33, 0.1: 107.57, 0.05: 113.14, 0.025: 118.14, 0.01: 124.12, 0.005: 128.30 },
        100: { 0.995: 67.33, 0.99: 70.06, 0.975: 74.22, 0.95: 77.93, 0.9: 82.36, 0.5: 99.33, 0.1: 118.50, 0.05: 124.34, 0.025: 129.56, 0.01: 135.81, 0.005: 140.17 }
    };

    // # Ï2 (Chi-Squared) Goodness-of-Fit Test
    //
    // The [Ï2 (Chi-Squared) Goodness-of-Fit Test](http://en.wikipedia.org/wiki/Goodness_of_fit#Pearson.27s_chi-squared_test)
    // uses a measure of goodness of fit which is the sum of differences between observed and expected outcome frequencies
    // (that is, counts of observations), each squared and divided by the number of observations expected given the
    // hypothesized distribution. The resulting Ï2 statistic, `chi_squared`, can be compared to the chi-squared distribution
    // to determine the goodness of fit. In order to determine the degrees of freedom of the chi-squared distribution, one
    // takes the total number of observed frequencies and subtracts the number of estimated parameters. The test statistic
    // follows, approximately, a chi-square distribution with (k â c) degrees of freedom where `k` is the number of non-empty
    // cells and `c` is the number of estimated parameters for the distribution.
    function chi_squared_goodness_of_fit(data, distribution_type, significance) {
        // Estimate from the sample data, a weighted mean.
        var input_mean = mean(data),
            // Calculated value of the Ï2 statistic.
            chi_squared = 0,
            // Degrees of freedom, calculated as (number of class intervals -
            // number of hypothesized distribution parameters estimated - 1)
            degrees_of_freedom,
            // Number of hypothesized distribution parameters estimated, expected to be supplied in the distribution test.
            // Lose one degree of freedom for estimating `lambda` from the sample data.
            c = 1,
            // The hypothesized distribution.
            // Generate the hypothesized distribution.
            hypothesized_distribution = distribution_type(input_mean),
            observed_frequencies = [],
            expected_frequencies = [],
            k;

        // Create an array holding a histogram from the sample data, of
        // the form `{ value: numberOfOcurrences }`
        for (var i = 0; i < data.length; i++) {
            if (observed_frequencies[data[i]] === undefined) {
                observed_frequencies[data[i]] = 0;
            }
            observed_frequencies[data[i]]++;
        }

        // The histogram we created might be sparse - there might be gaps
        // between values. So we iterate through the histogram, making
        // sure that instead of undefined, gaps have 0 values.
        for (i = 0; i < observed_frequencies.length; i++) {
            if (observed_frequencies[i] === undefined) {
                observed_frequencies[i] = 0;
            }
        }

        // Create an array holding a histogram of expected data given the
        // sample size and hypothesized distribution.
        for (k in hypothesized_distribution) {
            if (k in observed_frequencies) {
                expected_frequencies[k] = hypothesized_distribution[k] * data.length;
            }
        }

        // Working backward through the expected frequencies, collapse classes
        // if less than three observations are expected for a class.
        // This transformation is applied to the observed frequencies as well.
        for (k = expected_frequencies.length - 1; k >= 0; k--) {
            if (expected_frequencies[k] < 3) {
                expected_frequencies[k - 1] += expected_frequencies[k];
                expected_frequencies.pop();

                observed_frequencies[k - 1] += observed_frequencies[k];
                observed_frequencies.pop();
            }
        }

        // Iterate through the squared differences between observed & expected
        // frequencies, accumulating the `chi_squared` statistic.
        for (k = 0; k < observed_frequencies.length; k++) {
            chi_squared += Math.pow(
                observed_frequencies[k] - expected_frequencies[k], 2) /
                expected_frequencies[k];
        }

        // Calculate degrees of freedom for this test and look it up in the
        // `chi_squared_distribution_table` in order to
        // accept or reject the goodness-of-fit of the hypothesized distribution.
        degrees_of_freedom = observed_frequencies.length - c - 1;
        return chi_squared_distribution_table[degrees_of_freedom][significance] < chi_squared;
    }

    // # Mixin
    //
    // Mixin simple_statistics to a single Array instance if provided
    // or the Array native object if not. This is an optional
    // feature that lets you treat simple_statistics as a native feature
    // of Javascript.
    function mixin(array) {
        var support = !!(Object.defineProperty && Object.defineProperties);
        if (!support) throw new Error('without defineProperty, simple-statistics cannot be mixed in');

        // only methods which work on basic arrays in a single step
        // are supported
        var arrayMethods = ['median', 'standard_deviation', 'sum',
            'sample_skewness',
            'mean', 'min', 'max', 'quantile', 'geometric_mean',
            'harmonic_mean'];

        // create a closure with a method name so that a reference
        // like `arrayMethods[i]` doesn't follow the loop increment
        function wrap(method) {
            return function() {
                // cast any arguments into an array, since they're
                // natively objects
                var args = Array.prototype.slice.apply(arguments);
                // make the first argument the array itself
                args.unshift(this);
                // return the result of the ss method
                return ss[method].apply(ss, args);
            };
        }

        // select object to extend
        var extending;
        if (array) {
            // create a shallow copy of the array so that our internal
            // operations do not change it by reference
            extending = array.slice();
        } else {
            extending = Array.prototype;
        }

        // for each array function, define a function that gets
        // the array as the first argument.
        // We use [defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)
        // because it allows these properties to be non-enumerable:
        // `for (var in x)` loops will not run into problems with this
        // implementation.
        for (var i = 0; i < arrayMethods.length; i++) {
            Object.defineProperty(extending, arrayMethods[i], {
                value: wrap(arrayMethods[i]),
                configurable: true,
                enumerable: false,
                writable: true
            });
        }

        return extending;
    }

    ss.linear_regression = linear_regression;
    ss.standard_deviation = standard_deviation;
    ss.r_squared = r_squared;
    ss.median = median;
    ss.mean = mean;
    ss.mode = mode;
    ss.min = min;
    ss.max = max;
    ss.sum = sum;
    ss.quantile = quantile;
    ss.quantile_sorted = quantile_sorted;
    ss.iqr = iqr;
    ss.mad = mad;

    ss.sample_covariance = sample_covariance;
    ss.sample_correlation = sample_correlation;
    ss.sample_variance = sample_variance;
    ss.sample_standard_deviation = sample_standard_deviation;
    ss.sample_skewness = sample_skewness;

    ss.geometric_mean = geometric_mean;
    ss.harmonic_mean = harmonic_mean;
    ss.variance = variance;
    ss.t_test = t_test;
    ss.t_test_two_sample = t_test_two_sample;

    // jenks
    ss.jenksMatrices = jenksMatrices;
    ss.jenksBreaks = jenksBreaks;
    ss.jenks = jenks;

    ss.bayesian = bayesian;

    // Distribution-related methods
    ss.epsilon = epsilon; // We make Îµ available to the test suite.
    ss.factorial = factorial;
    ss.bernoulli_distribution = bernoulli_distribution;
    ss.binomial_distribution = binomial_distribution;
    ss.poisson_distribution = poisson_distribution;
    ss.chi_squared_goodness_of_fit = chi_squared_goodness_of_fit;

    // Normal distribution
    ss.z_score = z_score;
    ss.cumulative_std_normal_probability = cumulative_std_normal_probability;
    ss.standard_normal_table = standard_normal_table;

    // Alias this into its common name
    ss.average = mean;
    ss.interquartile_range = iqr;
    ss.mixin = mixin;
    ss.median_absolute_deviation = mad;

})(this);

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-sum/node_modules/turf-inside/index.js":[function(require,module,exports){
// http://en.wikipedia.org/wiki/Even%E2%80%93odd_rule
// modified from: https://github.com/substack/point-in-polygon/blob/master/index.js
// which was modified from http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html

module.exports = function(point, polygon){
  var x = point.geometry.coordinates[0]
  var y = point.geometry.coordinates[1]
  var vs = polygon.geometry.coordinates[0]

  var isInside = false;
  for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {
    var xi = vs[i][0], yi = vs[i][1];
    var xj = vs[j][0], yj = vs[j][1];
    
    var intersect = ((yi > y) != (yj > y))
        && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
    if (intersect) isInside = !isInside;
  }
  return isInside
}


},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

module.exports = function (polyFC, ptFC, inField, outField, done) {
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = ss.variance(values);
  })

  return polyFC;
}
},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-min/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/index.js":[function(require,module,exports){
var distance = require('turf-distance');
var point = require('turf-point');
var bearing = require('turf-bearing');
var destination = require('turf-destination');

/**
 * Takes a {@link LineString} feature and returns a {@link Point} feature at a specified distance along a line.
 *
 * @module turf/along
 * @param {LineString} line a LineString feature
 * @param {Number} distance distance along the line
 * @param {String} [units=miles] can be degrees, radians, miles, or kilometers
 * @return {Point} Point along the line at `distance` distance
 * @example
 * var line = turf.linestring([
 *  [-77.031669, 38.878605],
 *  [-77.029609, 38.881946],
 *  [-77.020339, 38.884084],
 *  [-77.025661, 38.885821],
 *  [-77.021884, 38.889563],
 *  [-77.019824, 38.892368]
 * ]);
 *
 * var along = turf.along(line, 1, 'miles');
 *
 * //=along
 */
module.exports = function (line, dist, units) {
  var coords;
  if(line.type === 'Feature') coords = line.geometry.coordinates;
  else if(line.type === 'LineString') coords = line.geometry.coordinates;
  else throw new Error('input must be a LineString Feature or Geometry');

  var travelled = 0;
  for(var i = 0; i < coords.length; i++) {
    if (dist >= travelled && i === coords.length - 1) break;
    else if(travelled >= dist) {
      var overshot = dist - travelled;
      if(!overshot) return point(coords[i]);
      else {
        var direction = bearing(point(coords[i]), point(coords[i-1])) - 180;
        var interpolated = destination(point(coords[i]), overshot, direction, units);
        return interpolated;
      }
    }
    else {
      travelled += distance(point(coords[i]), point(coords[i+1]), units);
    }
  }
  return point(coords[coords.length - 1]);
}

},{"turf-bearing":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-bearing/index.js","turf-destination":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-destination/index.js","turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-distance/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-bearing/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html

module.exports = function (point1, point2) {
    var coordinates1 = point1.geometry.coordinates;
    var coordinates2 = point2.geometry.coordinates;

    var lon1 = toRad(coordinates1[0]);
    var lon2 = toRad(coordinates2[0]);
    var lat1 = toRad(coordinates1[1]);
    var lat2 = toRad(coordinates2[1]);
    var a = Math.sin(lon2 - lon1) * Math.cos(lat2);
    var b = Math.cos(lat1) * Math.sin(lat2) -
        Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);

    var bearing = toDeg(Math.atan2(a, b));

    return bearing;
}

function toRad(degree) {
    return degree * Math.PI / 180;
}

function toDeg(radian) {
    return radian * 180 / Math.PI;
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-destination/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html
var point = require('turf-point');

/**
 * Calculates the destination point given a {@link Point} feature; distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.
 *
 * @module turf/destination
 * @param {Point} start a Point feature at the starting point
 * @param {Number} distance distance from the starting point
 * @param {Number} bearing ranging from -180 to 180
 * @param {String} units miles, kilometers, degrees, or radians
 * @returns {Point} a {@link Point} feature at the destination
 * @example
 * var point1 = turf.point([-75.343, 39.984]);
 * var distance = 50;
 * var bearing = 90;
 * var units = 'miles';
 *
 * var destination = turf.destination(point1, distance, bearing, units);
 * point1.properties['marker-color'] = '#f00';
 * destination.properties['marker-color'] = '#0f0';
 *
 * var result = turf.featurecollection([point1, destination]);
 *
 * //=result
 */
module.exports = function (point1, distance, bearing, units) {
    var coordinates1 = point1.geometry.coordinates;
    var longitude1 = toRad(coordinates1[0]);
    var latitude1 = toRad(coordinates1[1]);
    var bearing_rad = toRad(bearing);

    var R = 0;
    switch (units) {
    case 'miles':
        R = 3960;
        break
    case 'kilometers':
        R = 6373;
        break
    case 'degrees':
        R = 57.2957795;
        break
    case 'radians':
        R = 1;
        break
    }

    var latitude2 = Math.asin(Math.sin(latitude1) * Math.cos(distance / R) +
        Math.cos(latitude1) * Math.sin(distance / R) * Math.cos(bearing_rad));
    var longitude2 = longitude1 + Math.atan2(Math.sin(bearing_rad) * Math.sin(distance / R) * Math.cos(latitude1),
        Math.cos(distance / R) - Math.sin(latitude1) * Math.sin(latitude2));

    return point([toDeg(longitude2), toDeg(latitude2)]);
};

function toRad(degree) {
    return degree * Math.PI / 180;
}

function toDeg(rad) {
    return rad * 180 / Math.PI;
}

},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-distance/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html

module.exports = function(point1, point2, units){
  var coordinates1 = point1.geometry.coordinates;
  var coordinates2 = point2.geometry.coordinates;

  var dLat = toRad(coordinates2[1] - coordinates1[1]);
  var dLon = toRad(coordinates2[0] - coordinates1[0]);
  var lat1 = toRad(coordinates1[1]);
  var lat2 = toRad(coordinates2[1]);
  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

  var R = 0;
  switch(units){
    case 'miles':
      R = 3960;
      break
    case 'kilometers':
      R = 6373;
      break
    case 'degrees':
      R = 57.2957795;
      break
    case 'radians':
      R = 1;
      break
  }
  var distance = R * c;
  return distance;
}

function toRad(degree){
  return degree * Math.PI / 180;
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-point/index.js":[function(require,module,exports){
/**
 * Generates a new {@link Point} feature, given coordinates
 * and, optionally, properties.
 *
 * @module turf/point
 * @param {number} longitude - position west to east in decimal degrees
 * @param {number} latitude - position south to north in decimal degrees
 * @param {Object} properties - an optional object that is used as the Feature's
 * properties
 * @return {Point} output
 * @example
 * var pt1 = turf.point([-75.343, 39.984]);
 * //=pt1
 */
var isArray = Array.isArray || function(arg) {
  return Object.prototype.toString.call(arg) === '[object Array]';
};
module.exports = function(coordinates, properties) {
  if (!isArray(coordinates)) throw new Error('Coordinates must be an array');
  if (coordinates.length < 2) throw new Error('Coordinates must be at least 2 numbers long');
  return {
    type: "Feature",
    geometry: {
      type: "Point",
      coordinates: coordinates
    },
    properties: properties || {}
  };
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-area/index.js":[function(require,module,exports){
var geometryArea = require('geojson-area').geometry;

/**
 * Takes a {@link GeoJSON} feature or {@link FeatureCollection} of any type and returns the area of that feature
 * in square meters.
 *
 * @module turf/area
 * @param {GeoJSON} input a {@link Feature} or {@link FeatureCollection} of any type
 * @return {Number} area in square meters
 * @example
 * var polygons = turf.featurecollection([
 *   turf.polygon([[
 *     [-67.031021, 10.458102],
 *     [-67.031021, 10.53372],
 *     [-66.929397, 10.53372],
 *     [-66.929397, 10.458102],
 *     [-67.031021, 10.458102]
 *   ]]),
 *   turf.polygon([[
 *     [-66.919784, 10.397325],
 *     [-66.919784, 10.513467],
 *     [-66.805114, 10.513467],
 *     [-66.805114, 10.397325],
 *     [-66.919784, 10.397325]
 *   ]])
 * ]);
 *
 * var area = turf.area(polygons);
 *
 * //=area
 */
module.exports = function(_) {
    if (_.type === 'FeatureCollection') {
        for (var i = 0, sum = 0; i < _.features.length; i++) {
            if (_.features[i].geometry) {
                sum += geometryArea(_.features[i].geometry);
            }
        }
        return sum;
    } else if (_.type === 'Feature') {
        return geometryArea(_.geometry);
    } else {
        return geometryArea(_);
    }
};

},{"geojson-area":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-area/node_modules/geojson-area/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-area/node_modules/geojson-area/index.js":[function(require,module,exports){
var wgs84 = require('wgs84');

module.exports.geometry = geometry;
module.exports.ring = ringArea;

function geometry(_) {
    var area = 0, i;
    switch (_.type) {
        case 'Polygon':
            return polygonArea(_.coordinates);
        case 'MultiPolygon':
            for (i = 0; i < _.coordinates.length; i++) {
                area += polygonArea(_.coordinates[i]);
            }
            return area;
        case 'Point':
        case 'MultiPoint':
        case 'LineString':
        case 'MultiLineString':
            return 0;
        case 'GeometryCollection':
            for (i = 0; i < _.geometries.length; i++) {
                area += geometry(_.geometries[i]);
            }
            return area;
    }
}

function polygonArea(coords) {
    var area = 0;
    if (coords && coords.length > 0) {
        area += Math.abs(ringArea(coords[0]));
        for (var i = 1; i < coords.length; i++) {
            area -= Math.abs(ringArea(coords[i]));
        }
    }
    return area;
}

/**
 * Calculate the approximate area of the polygon were it projected onto
 *     the earth.  Note that this area will be positive if ring is oriented
 *     clockwise, otherwise it will be negative.
 *
 * Reference:
 * Robert. G. Chamberlain and William H. Duquette, "Some Algorithms for
 *     Polygons on a Sphere", JPL Publication 07-03, Jet Propulsion
 *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409
 *
 * Returns:
 * {float} The approximate signed geodesic area of the polygon in square
 *     meters.
 */

function ringArea(coords) {
    var area = 0;

    if (coords.length > 2) {
        var p1, p2;
        for (var i = 0; i < coords.length - 1; i++) {
            p1 = coords[i];
            p2 = coords[i + 1];
            area += rad(p2[0] - p1[0]) * (2 + Math.sin(rad(p1[1])) + Math.sin(rad(p2[1])));
        }

        area = area * wgs84.RADIUS * wgs84.RADIUS / 2;
    }

    return area;
}

function rad(_) {
    return _ * Math.PI / 180;
}

},{"wgs84":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-area/node_modules/geojson-area/node_modules/wgs84/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-area/node_modules/geojson-area/node_modules/wgs84/index.js":[function(require,module,exports){
module.exports.RADIUS = 6378137;
module.exports.FLATTENING = 1/298.257223563;
module.exports.POLAR_RADIUS = 6356752.3142;

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-average/index.js":[function(require,module,exports){
var inside = require('turf-inside');

/**
 * Calculates the average value of a field for a set of {@link Point} features within a set of {@link Polygon} features.
 *
 * @module turf/average
 * @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {string} field the field in the `points` features from which to pull values to average
 * @param {string} outputField the field in the `polygons` FeatureCollection to put results of the averages
 * @return {FeatureCollection} a FeatureCollection of {@link Polygon} features with the value of `outField` set to the calculated average
 * @example
 * var polygons = turf.featurecollection([
 *  turf.polygon([[
 *    [10.666351, 59.890659],
 *    [10.666351, 59.936784],
 *    [10.762481, 59.936784],
 *    [10.762481, 59.890659],
 *    [10.666351, 59.890659]
 *  ]]),
 *  turf.polygon([[
 *    [10.764541, 59.889281],
 *    [10.764541, 59.937128],
 *    [10.866165, 59.937128],
 *    [10.866165, 59.889281],
 *    [10.764541, 59.889281]
 *  ]])
 * ]);
 * var points = turf.featurecollection([
 *  turf.point([10.724029, 59.926807], {population: 200}),
 *  turf.point([10.715789, 59.904778], {population: 600}),
 *  turf.point([10.746002, 59.908566], {population: 100}),
 *  turf.point([10.806427, 59.908910], {population: 200}),
 *  turf.point([10.79544, 59.931624], {population: 300})
 * ]);
 *
 * var averaged = turf.average(
 *  polygons, points, 'population', 'pop_avg');
 *
 * var result = turf.featurecollection(
 *  points.features.concat(averaged.features));
 *
 * //=result
 */
module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties) poly.properties = {};
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) values.push(pt.properties[inField]);
    });
    poly.properties[outField] = average(values);
  });

  return polyFC;
}

function average(values) {
  var sum = 0;
  for (var i = 0; i < values.length; i++) {
    sum += values[i];
  }
  return sum / values.length;
}

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-average/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-average/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bbox-polygon/index.js":[function(require,module,exports){
var polygon = require('turf-polygon');

/**
* Takes a bbox and returns the equivalent {@link Polygon} feature.
*
* @module turf/bbox-polygon
* @param {Array<number>} bbox an Array of bounding box coordinates in the form: ```[xLow, yLow, xHigh, yHigh]```
* @return {Polygon} a Polygon representation of the bounding box
* @example
* var bbox = [0, 0, 10, 10];
*
* var poly = turf.bboxPolygon(bbox);
*
* //=poly
*/

module.exports = function(bbox){
  var lowLeft = [bbox[0], bbox[1]];
  var topLeft = [bbox[0], bbox[3]];
  var topRight = [bbox[2], bbox[3]];
  var lowRight = [bbox[2], bbox[1]];

  var poly = polygon([[
    lowLeft,
    lowRight,
    topRight,
    topLeft,
    lowLeft
  ]]);
  return poly;
}

},{"turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bbox-polygon/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bbox-polygon/node_modules/turf-polygon/index.js":[function(require,module,exports){
/**
 * Generates a new GeoJSON Polygon feature, given an array of coordinates
 * and list of properties.
 *
 * @module turf/polygon
 * @param {number[][]} rings - an array of LinearRings
 * @param {Object} properties - an optional properties object
 * @return {GeoJSONPolygon} output
 * @example
 * var poly1 = turf.polygon([[[20.0,0.0],[101.0,0.0],[101.0,1.0],[100.0,1.0],[100.0,0.0]]])
 * var poly2 = turf.polygon([[[20.0,0.0],[101.0,0.0],[101.0,1.0],[100.0,1.0],[100.0,0.0]]],
 *   {name: 'line 1', distance: 145})
 * console.log(poly1)
 * console.log(poly2)
 */
module.exports = function(coordinates, properties){
  if(coordinates === null) return new Error('No coordinates passed');
  var polygon = { 
    "type": "Feature",
    "geometry": {
      "type": "Polygon",
      "coordinates": coordinates
    },
    "properties": properties
  };

  if(!polygon.properties){
    polygon.properties = {};
  }
  
  return polygon;
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bearing/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html

/**
 * Takes two {@link Point} features and finds the bearing between them.
 *
 * @module turf/bearing
 * @param {Point} start starting Point
 * @param {Point} end ending Point
 * @returns {Number} bearing in decimal degrees
 * @example
 * var point1 = turf.point([-75.343, 39.984]);
 * point1.properties['marker-color'] = '#f00';
 * var point2 = turf.point([-75.534, 39.123]);
 * point2.properties['marker-color'] = '#0f0';
 *
 * var points = turf.featurecollection([point1, point2]);
 *
 * //=points
 *
 * var bearing = turf.bearing(point1, point2);
 *
 * //=bearing
 */
module.exports = function (point1, point2) {
    var coordinates1 = point1.geometry.coordinates;
    var coordinates2 = point2.geometry.coordinates;

    var lon1 = toRad(coordinates1[0]);
    var lon2 = toRad(coordinates2[0]);
    var lat1 = toRad(coordinates1[1]);
    var lat2 = toRad(coordinates2[1]);
    var a = Math.sin(lon2 - lon1) * Math.cos(lat2);
    var b = Math.cos(lat1) * Math.sin(lat2) -
        Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);

    var bearing = toDeg(Math.atan2(a, b));

    return bearing;
};

function toRad(degree) {
    return degree * Math.PI / 180;
}

function toDeg(radian) {
    return radian * 180 / Math.PI;
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bezier/index.js":[function(require,module,exports){
var linestring = require('turf-linestring');
var Spline = require('./spline.js');

/**
 * Takes a {@link LineString} feature and returns a curved version of the line
 * by applying a [Bezier spline](http://en.wikipedia.org/wiki/B%C3%A9zier_spline)
 * algorithm.
 *
 * The bezier spline implementation is by [Leszek Rybicki](http://leszek.rybicki.cc/).
 *
 * @module turf/bezier
 * @param {LineString} line the input LineString
 * @param {number} [resolution=10000] time in milliseconds between points
 * @param {number} [sharpness=0.85] a measure of how curvy the path should be between splines
 * @returns {LineString} curved line
 * @example
 * var line = turf.linestring([
 *   [-76.091308, 18.427501],
 *   [-76.695556, 18.729501],
 *   [-76.552734, 19.40443],
 *   [-74.61914, 19.134789],
 *   [-73.652343, 20.07657],
 *   [-73.157958, 20.210656]], {
 *      stroke: '#f00'
 *   });
 *
 * var curved = turf.bezier(line);
 * curved.properties = { stroke: '#0f0' };
 *
 * var result = turf.featurecollection([line, curved]);
 *
 * //=result
 */
module.exports = function(line, resolution, sharpness){
  var lineOut = linestring([]);

  lineOut.properties = line.properties;
  var pts = line.geometry.coordinates.map(function(pt){
    return {x: pt[0], y: pt[1]};
  });

  var spline = new Spline({
    points: pts,
    duration: resolution,
    sharpness: sharpness
  });
  for (var i=0; i<spline.duration; i+=10) {
    var pos = spline.pos(i);
    if (Math.floor(i/100)%2===0) {
        lineOut.geometry.coordinates.push([pos.x, pos.y]);
    }
  }

  return lineOut;
};

},{"./spline.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bezier/spline.js","turf-linestring":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bezier/node_modules/turf-linestring/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bezier/node_modules/turf-linestring/index.js":[function(require,module,exports){
/**
 * Creates a {@link LineString} {@link Feature} based on a
 * coordinate array. Properties can be added optionally.
 *
 * @module turf/linestring
 * @param {Array<Array<Number>>} coordinates - an array of Positions
 * @param {Object} properties an Object consisting of key-value pairs to add as properties
 * @return {LineString} a LineString feature
 * @throws {Error} if no coordinates are passed
 * @example
 * var linestring1 = turf.linestring([
 *	[-21.964416, 64.148203],
 *	[-21.956176, 64.141316],
 *	[-21.93901, 64.135924],
 *	[-21.927337, 64.136673]
 * ]);
 * var linestring2 = turf.linestring([
 *	[-21.929054, 64.127985],
 *	[-21.912918, 64.134726],
 *	[-21.916007, 64.141016],
 * 	[-21.930084, 64.14446]
 * ], {name: 'line 1', distance: 145});
 *
 * //=linestring1
 *
 * //=linestring2
 */
module.exports = function(coordinates, properties){
  if (!coordinates) {
      throw new Error('No coordinates passed');
  }
  return {
    "type": "Feature",
    "geometry": {
      "type": "LineString",
      "coordinates": coordinates
    },
    "properties": properties || {}
  };
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bezier/spline.js":[function(require,module,exports){
 /**
   * BezierSpline
   * http://leszekr.github.com/
   *
   * @copyright
   * Copyright (C) 2012 Leszek Rybicki.
   *
   * @license
   * This file is part of BezierSpline
   *
   * BezierSpline is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Lesser General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * BezierSpline is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU General Public License for more details.
   *
   * You should have received a copy of the GNU General Public License
   * along with BezierSpline.  If not, see <http://www.gnu.org/copyleft/lesser.html>.
   */

  /*
  Usage:

    var spline = new Spline({
      points: array_of_control_points,
      duration: time_in_miliseconds,
      sharpness: how_curvy,
      stepLength: distance_between_points_to_cache
    });

  */
var Spline = function(options){
    this.points = options.points || [];
    this.duration = options.duration || 10000;
    this.sharpness = options.sharpness || 0.85;
    this.centers = [];
    this.controls = [];
    this.stepLength = options.stepLength || 60;
    this.length = this.points.length;
    this.delay = 0;
    // this is to ensure compatibility with the 2d version
    for(var i=0; i<this.length; i++) this.points[i].z = this.points[i].z || 0;
    for(var i=0; i<this.length-1; i++){
      var p1 = this.points[i];
      var p2 = this.points[i+1];
      this.centers.push({x:(p1.x+p2.x)/2, y:(p1.y+p2.y)/2, z:(p1.z+p2.z)/2});
    }
    this.controls.push([this.points[0],this.points[0]]);
    for(var i=0; i<this.centers.length-1; i++){
      var p1 = this.centers[i];
      var p2 = this.centers[i+1];
      var dx = this.points[i+1].x-(this.centers[i].x+this.centers[i+1].x)/2;
      var dy = this.points[i+1].y-(this.centers[i].y+this.centers[i+1].y)/2;
      var dz = this.points[i+1].z-(this.centers[i].y+this.centers[i+1].z)/2;
      this.controls.push([{
        x:(1.0-this.sharpness)*this.points[i+1].x+this.sharpness*(this.centers[i].x+dx),
        y:(1.0-this.sharpness)*this.points[i+1].y+this.sharpness*(this.centers[i].y+dy),
        z:(1.0-this.sharpness)*this.points[i+1].z+this.sharpness*(this.centers[i].z+dz)},
      {
        x:(1.0-this.sharpness)*this.points[i+1].x+this.sharpness*(this.centers[i+1].x+dx),
        y:(1.0-this.sharpness)*this.points[i+1].y+this.sharpness*(this.centers[i+1].y+dy),
        z:(1.0-this.sharpness)*this.points[i+1].z+this.sharpness*(this.centers[i+1].z+dz)}]);
    }
    this.controls.push([this.points[this.length-1],this.points[this.length-1]]);
    this.steps = this.cacheSteps(this.stepLength);
    return this;
  };

  /*
    Caches an array of equidistant (more or less) points on the curve.
  */
  Spline.prototype.cacheSteps = function(mindist){
    var steps = [];
    var laststep = this.pos(0);
    steps.push(0);
    for(var t=0; t<this.duration; t+=10){
      var step = this.pos(t);
      var dist = Math.sqrt((step.x-laststep.x)*(step.x-laststep.x)+(step.y-laststep.y)*(step.y-laststep.y)+(step.z-laststep.z)*(step.z-laststep.z));
      if(dist>mindist){
        steps.push(t);
        laststep = step;
      }
    }
    return steps;
  };

  /*
    returns angle and speed in the given point in the curve
  */
  Spline.prototype.vector = function(t){
    var p1 = this.pos(t+10);
    var p2 = this.pos(t-10);
    return {
      angle:180*Math.atan2(p1.y-p2.y, p1.x-p2.x)/3.14,
      speed:Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y)+(p2.z-p1.z)*(p2.z-p1.z))
    };
  };

  /*
    Gets the position of the point, given time.

    WARNING: The speed is not constant. The time it takes between control points is constant.

    For constant speed, use Spline.steps[i];
  */
  Spline.prototype.pos = function(time){

    function bezier(t, p1, c1, c2, p2){
      var B = function(t) {
        var t2=t*t, t3=t2*t;
        return [(t3),(3*t2*(1-t)),(3*t*(1-t)*(1-t)),((1-t)*(1-t)*(1-t))]
      }
      var b = B(t)
      var pos = {
        x : p2.x * b[0] + c2.x * b[1] +c1.x * b[2] + p1.x * b[3],
        y : p2.y * b[0] + c2.y * b[1] +c1.y * b[2] + p1.y * b[3],
        z : p2.z * b[0] + c2.z * b[1] +c1.z * b[2] + p1.z * b[3]
      }
      return pos;
    }
    var t = time-this.delay;
    if(t<0) t=0;
    if(t>this.duration) t=this.duration-1;
    //t = t-this.delay;
    var t2 = (t)/this.duration;
    if(t2>=1) return this.points[this.length-1];

    var n = Math.floor((this.points.length-1)*t2);
    var t1 = (this.length-1)*t2-n;
    return bezier(t1,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1]);
  }

  module.exports = Spline;

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/index.js":[function(require,module,exports){
// http://stackoverflow.com/questions/839899/how-do-i-calculate-a-point-on-a-circles-circumference
// radians = degrees * (pi/180)
// https://github.com/bjornharrtell/jsts/blob/master/examples/buffer.html

var featurecollection = require('turf-featurecollection');
var polygon = require('turf-polygon');
var combine = require('turf-combine');
var jsts = require('jsts');

/**
* Calculates a buffer for a {@link Point}, {@link LineString}, or {@link Polygon} {@link Feature}/{@link FeatureCollection} for a given radius. Units supported are miles, kilometers, and degrees.
*
* @module turf/buffer
* @param {FeatureCollection} feature a Feature or FeatureCollection of any type
* @param {Number} distance distance to draw the buffer
* @param {String} unit 'miles' or 'kilometers'
* @return {FeatureCollection} a FeatureCollection containing {@link Polygon} features representing buffers
*
* @example
* var pt = turf.point([-90.548630, 14.616599]);
* var unit = 'miles';
*
* var buffered = turf.buffer(pt, 500, unit);
*
* var result = turf.featurecollection(
*   buffered.features.concat(pt));
*
* //=result
*/

module.exports = function(feature, radius, units){
  var buffered;

  switch(units){
    case 'miles':
      radius = radius / 69.047;
      break
    case 'feet':
      radius = radius / 364568.0;
      break
    case 'kilometers':
      radius = radius / 111.12;
      break
    case 'meters':
      radius = radius / 111120.0;
      break
    case 'degrees':
      break
  }

  if(feature.type === 'FeatureCollection'){
    var multi = combine(feature);
    multi.properties = {};
    buffered = bufferOp(multi, radius);
    return buffered;
  }
  else{
    buffered = bufferOp(feature, radius);
    return buffered;
  }
}

var bufferOp = function(feature, radius){
  var reader = new jsts.io.GeoJSONReader();
  var geom = reader.read(JSON.stringify(feature.geometry));
  var buffered = geom.buffer(radius);
  var parser = new jsts.io.GeoJSONParser();
  buffered = parser.write(buffered);

  if(buffered.type === 'MultiPolygon'){
    buffered = {
      type: 'Feature',
      geometry: buffered,
      properties: {}
    };
    buffered = featurecollection([buffered]);
  }
  else{
    buffered = featurecollection([polygon(buffered.coordinates)]);
  }

  return buffered;
}

},{"jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/index.js","turf-combine":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-combine/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-featurecollection/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/index.js":[function(require,module,exports){
require('javascript.util');
var jsts = require('./lib/jsts');
module.exports = jsts

},{"./lib/jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/lib/jsts.js","javascript.util":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/node_modules/javascript.util/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/lib/jsts.js":[function(require,module,exports){
/* The JSTS Topology Suite is a collection of JavaScript classes that
implement the fundamental operations required to validate a given
geo-spatial data set to a known topological specification.

Copyright (C) 2011 The Authors

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */
jsts={version:'0.15.0',algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},overlay:{snap:{}},polygonize:{},predicate:{},relate:{},union:{},valid:{}},planargraph:{},simplify:{},triangulate:{quadedge:{}},util:{}};if(typeof String.prototype.trim!=='function'){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');};}
jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.error={};jsts.error.IllegalArgumentError=function(message){this.name='IllegalArgumentError';this.message=message;};jsts.error.IllegalArgumentError.prototype=new Error();jsts.error.TopologyError=function(message,pt){this.name='TopologyError';this.message=pt?message+' [ '+pt+' ]':message;};jsts.error.TopologyError.prototype=new Error();jsts.error.AbstractMethodInvocationError=function(){this.name='AbstractMethodInvocationError';this.message='Abstract method called, should be implemented in subclass.';};jsts.error.AbstractMethodInvocationError.prototype=new Error();jsts.error.NotImplementedError=function(){this.name='NotImplementedError';this.message='This method has not yet been implemented.';};jsts.error.NotImplementedError.prototype=new Error();jsts.error.NotRepresentableError=function(message){this.name='NotRepresentableError';this.message=message;};jsts.error.NotRepresentableError.prototype=new Error();jsts.error.LocateFailureError=function(message){this.name='LocateFailureError';this.message=message;};jsts.error.LocateFailureError.prototype=new Error();if(typeof module!=="undefined")module.exports=jsts;jsts.geom.GeometryFilter=function(){};jsts.geom.GeometryFilter.prototype.filter=function(geom){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.util.PolygonExtracter=function(comps){this.comps=comps;};jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.PolygonExtracter.prototype.comps=null;jsts.geom.util.PolygonExtracter.getPolygons=function(geom,list){if(list===undefined){list=[];}
if(geom instanceof jsts.geom.Polygon){list.push(geom);}else if(geom instanceof jsts.geom.GeometryCollection){geom.apply(new jsts.geom.util.PolygonExtracter(list));}
return list;};jsts.geom.util.PolygonExtracter.prototype.filter=function(geom){if(geom instanceof jsts.geom.Polygon)
this.comps.push(geom);};jsts.io.WKTParser=function(geometryFactory){this.geometryFactory=geometryFactory||new jsts.geom.GeometryFactory();this.regExes={'typeStr':/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,'emptyTypeStr':/^\s*(\w+)\s*EMPTY\s*$/,'spaces':/\s+/,'parenComma':/\)\s*,\s*\(/,'doubleParenComma':/\)\s*\)\s*,\s*\(\s*\(/,'trimParens':/^\s*\(?(.*?)\)?\s*$/};};jsts.io.WKTParser.prototype.read=function(wkt){var geometry,type,str;wkt=wkt.replace(/[\n\r]/g,' ');var matches=this.regExes.typeStr.exec(wkt);if(wkt.search('EMPTY')!==-1){matches=this.regExes.emptyTypeStr.exec(wkt);matches[2]=undefined;}
if(matches){type=matches[1].toLowerCase();str=matches[2];if(this.parse[type]){geometry=this.parse[type].apply(this,[str]);}}
if(geometry===undefined)
throw new Error('Could not parse WKT '+wkt);return geometry;};jsts.io.WKTParser.prototype.write=function(geometry){return this.extractGeometry(geometry);};jsts.io.WKTParser.prototype.extractGeometry=function(geometry){var type=geometry.CLASS_NAME.split('.')[2].toLowerCase();if(!this.extract[type]){return null;}
var wktType=type.toUpperCase();var data;if(geometry.isEmpty()){data=wktType+' EMPTY';}else{data=wktType+'('+this.extract[type].apply(this,[geometry])+')';}
return data;};jsts.io.WKTParser.prototype.extract={'coordinate':function(coordinate){return coordinate.x+' '+coordinate.y;},'point':function(point){return point.coordinate.x+' '+point.coordinate.y;},'multipoint':function(multipoint){var array=[];for(var i=0,len=multipoint.geometries.length;i<len;++i){array.push('('+
this.extract.point.apply(this,[multipoint.geometries[i]])+')');}
return array.join(',');},'linestring':function(linestring){var array=[];for(var i=0,len=linestring.points.length;i<len;++i){array.push(this.extract.coordinate.apply(this,[linestring.points[i]]));}
return array.join(',');},'multilinestring':function(multilinestring){var array=[];for(var i=0,len=multilinestring.geometries.length;i<len;++i){array.push('('+
this.extract.linestring.apply(this,[multilinestring.geometries[i]])+')');}
return array.join(',');},'polygon':function(polygon){var array=[];array.push('('+this.extract.linestring.apply(this,[polygon.shell])+')');for(var i=0,len=polygon.holes.length;i<len;++i){array.push('('+this.extract.linestring.apply(this,[polygon.holes[i]])+')');}
return array.join(',');},'multipolygon':function(multipolygon){var array=[];for(var i=0,len=multipolygon.geometries.length;i<len;++i){array.push('('+this.extract.polygon.apply(this,[multipolygon.geometries[i]])+')');}
return array.join(',');},'geometrycollection':function(collection){var array=[];for(var i=0,len=collection.geometries.length;i<len;++i){array.push(this.extractGeometry.apply(this,[collection.geometries[i]]));}
return array.join(',');}};jsts.io.WKTParser.prototype.parse={'point':function(str){if(str===undefined){return this.geometryFactory.createPoint(null);}
var coords=str.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(coords[0],coords[1]));},'multipoint':function(str){if(str===undefined){return this.geometryFactory.createMultiPoint(null);}
var point;var points=str.trim().split(',');var components=[];for(var i=0,len=points.length;i<len;++i){point=points[i].replace(this.regExes.trimParens,'$1');components.push(this.parse.point.apply(this,[point]));}
return this.geometryFactory.createMultiPoint(components);},'linestring':function(str){if(str===undefined){return this.geometryFactory.createLineString(null);}
var points=str.trim().split(',');var components=[];var coords;for(var i=0,len=points.length;i<len;++i){coords=points[i].trim().split(this.regExes.spaces);components.push(new jsts.geom.Coordinate(coords[0],coords[1]));}
return this.geometryFactory.createLineString(components);},'linearring':function(str){if(str===undefined){return this.geometryFactory.createLinearRing(null);}
var points=str.trim().split(',');var components=[];var coords;for(var i=0,len=points.length;i<len;++i){coords=points[i].trim().split(this.regExes.spaces);components.push(new jsts.geom.Coordinate(coords[0],coords[1]));}
return this.geometryFactory.createLinearRing(components);},'multilinestring':function(str){if(str===undefined){return this.geometryFactory.createMultiLineString(null);}
var line;var lines=str.trim().split(this.regExes.parenComma);var components=[];for(var i=0,len=lines.length;i<len;++i){line=lines[i].replace(this.regExes.trimParens,'$1');components.push(this.parse.linestring.apply(this,[line]));}
return this.geometryFactory.createMultiLineString(components);},'polygon':function(str){if(str===undefined){return this.geometryFactory.createPolygon(null);}
var ring,linestring,linearring;var rings=str.trim().split(this.regExes.parenComma);var shell;var holes=[];for(var i=0,len=rings.length;i<len;++i){ring=rings[i].replace(this.regExes.trimParens,'$1');linestring=this.parse.linestring.apply(this,[ring]);linearring=this.geometryFactory.createLinearRing(linestring.points);if(i===0){shell=linearring;}else{holes.push(linearring);}}
return this.geometryFactory.createPolygon(shell,holes);},'multipolygon':function(str){if(str===undefined){return this.geometryFactory.createMultiPolygon(null);}
var polygon;var polygons=str.trim().split(this.regExes.doubleParenComma);var components=[];for(var i=0,len=polygons.length;i<len;++i){polygon=polygons[i].replace(this.regExes.trimParens,'$1');components.push(this.parse.polygon.apply(this,[polygon]));}
return this.geometryFactory.createMultiPolygon(components);},'geometrycollection':function(str){if(str===undefined){return this.geometryFactory.createGeometryCollection(null);}
str=str.replace(/,\s*([A-Za-z])/g,'|$1');var wktArray=str.trim().split('|');var components=[];for(var i=0,len=wktArray.length;i<len;++i){components.push(jsts.io.WKTParser.prototype.read.apply(this,[wktArray[i]]));}
return this.geometryFactory.createGeometryCollection(components);}};jsts.index.ItemVisitor=function(){};jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.CGAlgorithms=function(){};jsts.algorithm.CGAlgorithms.CLOCKWISE=-1;jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE;jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1;jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.algorithm.CGAlgorithms.COLLINEAR=0;jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR;jsts.algorithm.CGAlgorithms.orientationIndex=function(p1,p2,q){var dx1,dy1,dx2,dy2;dx1=p2.x-p1.x;dy1=p2.y-p1.y;dx2=q.x-p2.x;dy2=q.y-p2.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(dx1,dy1,dx2,dy2);};jsts.algorithm.CGAlgorithms.isPointInRing=function(p,ring){return jsts.algorithm.CGAlgorithms.locatePointInRing(p,ring)!==jsts.geom.Location.EXTERIOR;};jsts.algorithm.CGAlgorithms.locatePointInRing=function(p,ring){return jsts.algorithm.RayCrossingCounter.locatePointInRing(p,ring);};jsts.algorithm.CGAlgorithms.isOnLine=function(p,pt){var lineIntersector,i,il,p0,p1;lineIntersector=new jsts.algorithm.RobustLineIntersector();for(i=1,il=pt.length;i<il;i++){p0=pt[i-1];p1=pt[i];lineIntersector.computeIntersection(p,p0,p1);if(lineIntersector.hasIntersection()){return true;}}
return false;};jsts.algorithm.CGAlgorithms.isCCW=function(ring){var nPts,hiPt,hiIndex,p,iPrev,iNext,prev,next,i,disc,isCCW;nPts=ring.length-1;if(nPts<3){throw new jsts.IllegalArgumentError('Ring has fewer than 3 points, so orientation cannot be determined');}
hiPt=ring[0];hiIndex=0;i=1;for(i;i<=nPts;i++){p=ring[i];if(p.y>hiPt.y){hiPt=p;hiIndex=i;}}
iPrev=hiIndex;do{iPrev=iPrev-1;if(iPrev<0){iPrev=nPts;}}while(ring[iPrev].equals2D(hiPt)&&iPrev!==hiIndex);iNext=hiIndex;do{iNext=(iNext+1)%nPts;}while(ring[iNext].equals2D(hiPt)&&iNext!==hiIndex);prev=ring[iPrev];next=ring[iNext];if(prev.equals2D(hiPt)||next.equals2D(hiPt)||prev.equals2D(next)){return false;}
disc=jsts.algorithm.CGAlgorithms.computeOrientation(prev,hiPt,next);isCCW=false;if(disc===0){isCCW=(prev.x>next.x);}else{isCCW=(disc>0);}
return isCCW;};jsts.algorithm.CGAlgorithms.computeOrientation=function(p1,p2,q){return jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,q);};jsts.algorithm.CGAlgorithms.distancePointLine=function(p,A,B){if(!(A instanceof jsts.geom.Coordinate)){jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments);}
if(A.x===B.x&&A.y===B.y){return p.distance(A);}
var r,s;r=((p.x-A.x)*(B.x-A.x)+(p.y-A.y)*(B.y-A.y))/((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y));if(r<=0.0){return p.distance(A);}
if(r>=1.0){return p.distance(B);}
s=((A.y-p.y)*(B.x-A.x)-(A.x-p.x)*(B.y-A.y))/((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y));return Math.abs(s)*Math.sqrt(((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y)));};jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(p,A,B){var s=((A.y-p.y)*(B.x-A.x)-(A.x-p.x)*(B.y-A.y))/((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y));return Math.abs(s)*Math.sqrt(((B.x-A.x)*(B.x-A.x)+(B.y-A.y)*(B.y-A.y)));};jsts.algorithm.CGAlgorithms.distancePointLine2=function(p,line){var minDistance,i,il,dist;if(line.length===0){throw new jsts.error.IllegalArgumentError('Line array must contain at least one vertex');}
minDistance=p.distance(line[0]);for(i=0,il=line.length-1;i<il;i++){dist=jsts.algorithm.CGAlgorithms.distancePointLine(p,line[i],line[i+1]);if(dist<minDistance){minDistance=dist;}}
return minDistance;};jsts.algorithm.CGAlgorithms.distanceLineLine=function(A,B,C,D){if(A.equals(B)){return jsts.algorithm.CGAlgorithms.distancePointLine(A,C,D);}
if(C.equals(D)){return jsts.algorithm.CGAlgorithms.distancePointLine(D,A,B);}
var r_top,r_bot,s_top,s_bot,s,r;r_top=(A.y-C.y)*(D.x-C.x)-(A.x-C.x)*(D.y-C.y);r_bot=(B.x-A.x)*(D.y-C.y)-(B.y-A.y)*(D.x-C.x);s_top=(A.y-C.y)*(B.x-A.x)-(A.x-C.x)*(B.y-A.y);s_bot=(B.x-A.x)*(D.y-C.y)-(B.y-A.y)*(D.x-C.x);if((r_bot===0)||(s_bot===0)){return Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(A,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(B,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(C,A,B),jsts.algorithm.CGAlgorithms.distancePointLine(D,A,B))));}
s=s_top/s_bot;r=r_top/r_bot;if((r<0)||(r>1)||(s<0)||(s>1)){return Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(A,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(B,C,D),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(C,A,B),jsts.algorithm.CGAlgorithms.distancePointLine(D,A,B))));}
return 0.0;};jsts.algorithm.CGAlgorithms.signedArea=function(ring){if(ring.length<3){return 0.0;}
var sum,i,il,bx,by,cx,cy;sum=0.0;for(i=0,il=ring.length-1;i<il;i++){bx=ring[i].x;by=ring[i].y;cx=ring[i+1].x;cy=ring[i+1].y;sum+=(bx+cx)*(cy-by);}
return-sum/2.0;};jsts.algorithm.CGAlgorithms.signedArea=function(ring){var n,sum,p,bx,by,i,cx,cy;n=ring.length;if(n<3){return 0.0;}
sum=0.0;p=ring[0];bx=p.x;by=p.y;for(i=1;i<n;i++){p=ring[i];cx=p.x;cy=p.y;sum+=(bx+cx)*(cy-by);bx=cx;by=cy;}
return-sum/2.0;};jsts.algorithm.CGAlgorithms.computeLength=function(pts){var n=pts.length,len,x0,y0,x1,y1,dx,dy,p,i,il;if(n<=1){return 0.0;}
len=0.0;p=pts[0];x0=p.x;y0=p.y;i=1,il=n;for(i;i<n;i++){p=pts[i];x1=p.x;y1=p.y;dx=x1-x0;dy=y1-y0;len+=Math.sqrt(dx*dx+dy*dy);x0=x1;y0=y1;}
return len;};jsts.algorithm.CGAlgorithms.length=function(){};jsts.algorithm.Angle=function(){};jsts.algorithm.Angle.PI_TIMES_2=2.0*Math.PI;jsts.algorithm.Angle.PI_OVER_2=Math.PI/2.0;jsts.algorithm.Angle.PI_OVER_4=Math.PI/4.0;jsts.algorithm.Angle.COUNTERCLOCKWISE=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.algorithm.Angle.CLOCKWISE=jsts.algorithm.CGAlgorithms.CLOCKWISE;jsts.algorithm.Angle.NONE=jsts.algorithm.CGAlgorithms.COLLINEAR;jsts.algorithm.Angle.toDegrees=function(radians){return(radians*180)/Math.PI;};jsts.algorithm.Angle.toRadians=function(angleDegrees){return(angleDegrees*Math.PI)/180.0;};jsts.algorithm.Angle.angle=function(){if(arguments.length===1){return jsts.algorithm.Angle.angleFromOrigo(arguments[0]);}else{return jsts.algorithm.Angle.angleBetweenCoords(arguments[0],arguments[1]);}};jsts.algorithm.Angle.angleBetweenCoords=function(p0,p1){var dx,dy;dx=p1.x-p0.x;dy=p1.y-p0.y;return Math.atan2(dy,dx);};jsts.algorithm.Angle.angleFromOrigo=function(p){return Math.atan2(p.y,p.x);};jsts.algorithm.Angle.isAcute=function(p0,p1,p2){var dx0,dy0,dx1,dy1,dotprod;dx0=p0.x-p1.x;dy0=p0.y-p1.y;dx1=p2.x-p1.x;dy1=p2.y-p1.y;dotprod=dx0*dx1+dy0*dy1;return dotprod>0;};jsts.algorithm.Angle.isObtuse=function(p0,p1,p2){var dx0,dy0,dx1,dy1,dotprod;dx0=p0.x-p1.x;dy0=p0.y-p1.y;dx1=p2.x-p1.x;dy1=p2.y-p1.y;dotprod=dx0*dx1+dy0*dy1;return dotprod<0;};jsts.algorithm.Angle.angleBetween=function(tip1,tail,tip2){var a1,a2;a1=jsts.algorithm.Angle.angle(tail,tip1);a2=jsts.algorithm.Angle.angle(tail,tip2);return jsts.algorithm.Angle.diff(a1,a2);};jsts.algorithm.Angle.angleBetweenOriented=function(tip1,tail,tip2){var a1,a2,angDel;a1=jsts.algorithm.Angle.angle(tail,tip1);a2=jsts.algorithm.Angle.angle(tail,tip2);angDel=a2-a1;if(angDel<=-Math.PI){return angDel+jsts.algorithm.Angle.PI_TIMES_2;}
if(angDel>Math.PI){return angDel-jsts.algorithm.Angle.PI_TIMES_2;}
return angDel;};jsts.algorithm.Angle.interiorAngle=function(p0,p1,p2){var anglePrev,angleNext;anglePrev=jsts.algorithm.Angle.angle(p1,p0);angleNext=jsts.algorithm.Angle.angle(p1,p2);return Math.abs(angleNext-anglePrev);};jsts.algorithm.Angle.getTurn=function(ang1,ang2){var crossproduct=Math.sin(ang2-ang1);if(crossproduct>0){return jsts.algorithm.Angle.COUNTERCLOCKWISE;}
if(crossproduct<0){return jsts.algorithm.Angle.CLOCKWISE;}
return jsts.algorithm.Angle.NONE;};jsts.algorithm.Angle.normalize=function(angle){while(angle>Math.PI){angle-=jsts.algorithm.Angle.PI_TIMES_2;}
while(angle<=-Math.PI){angle+=jsts.algorithm.Angle.PI_TIMES_2;}
return angle;};jsts.algorithm.Angle.normalizePositive=function(angle){if(angle<0.0){while(angle<0.0){angle+=jsts.algorithm.Angle.PI_TIMES_2;}
if(angle>=jsts.algorithm.Angle.PI_TIMES_2){angle=0.0;}}
else{while(angle>=jsts.algorithm.Angle.PI_TIMES_2){angle-=jsts.algorithm.Angle.PI_TIMES_2;}
if(angle<0.0){angle=0.0;}}
return angle;};jsts.algorithm.Angle.diff=function(ang1,ang2){var delAngle;if(ang1<ang2){delAngle=ang2-ang1;}else{delAngle=ang1-ang2;}
if(delAngle>Math.PI){delAngle=(2*Math.PI)-delAngle;}
return delAngle;};jsts.geom.GeometryComponentFilter=function(){};jsts.geom.GeometryComponentFilter.prototype.filter=function(geom){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.util.LinearComponentExtracter=function(lines,isForcedToLineString){this.lines=lines;this.isForcedToLineString=isForcedToLineString;};jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter();jsts.geom.util.LinearComponentExtracter.prototype.lines=null;jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=false;jsts.geom.util.LinearComponentExtracter.getLines=function(geoms,lines){if(arguments.length==1){return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments);}
else if(arguments.length==2&&typeof lines==='boolean'){return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments);}
else if(arguments.length==2&&geoms instanceof jsts.geom.Geometry){return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments);}
else if(arguments.length==3&&geoms instanceof jsts.geom.Geometry){return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments);}
else if(arguments.length==3){return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments);}
for(var i=0;i<geoms.length;i++){var g=geoms[i];jsts.geom.util.LinearComponentExtracter.getLines3(g,lines);}
return lines;};jsts.geom.util.LinearComponentExtracter.getLines2=function(geoms,lines,forceToLineString){for(var i=0;i<geoms.length;i++){var g=geoms[i];jsts.geom.util.LinearComponentExtracter.getLines4(g,lines,forceToLineString);}
return lines;};jsts.geom.util.LinearComponentExtracter.getLines3=function(geom,lines){if(geom instanceof LineString){lines.add(geom);}else{geom.apply(new jsts.geom.util.LinearComponentExtracter(lines));}
return lines;};jsts.geom.util.LinearComponentExtracter.getLines4=function(geom,lines,forceToLineString){geom.apply(new jsts.geom.util.LinearComponentExtracter(lines,forceToLineString));return lines;};jsts.geom.util.LinearComponentExtracter.getLines5=function(geom){return jsts.geom.util.LinearComponentExtracter.getLines6(geom,false);};jsts.geom.util.LinearComponentExtracter.getLines6=function(geom,forceToLineString){var lines=[];geom.apply(new jsts.geom.util.LinearComponentExtracter(lines,forceToLineString));return lines;};jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(isForcedToLineString){this.isForcedToLineString=isForcedToLineString;};jsts.geom.util.LinearComponentExtracter.prototype.filter=function(geom){if(this.isForcedToLineString&&geom instanceof jsts.geom.LinearRing){var line=geom.getFactory().createLineString(geom.getCoordinateSequence());this.lines.push(line);return;}
if(geom instanceof jsts.geom.LineString||geom instanceof jsts.geom.LinearRing)
this.lines.push(geom);};jsts.geom.Location=function(){};jsts.geom.Location.INTERIOR=0;jsts.geom.Location.BOUNDARY=1;jsts.geom.Location.EXTERIOR=2;jsts.geom.Location.NONE=-1;jsts.geom.Location.toLocationSymbol=function(locationValue){switch(locationValue){case jsts.geom.Location.EXTERIOR:return'e';case jsts.geom.Location.BOUNDARY:return'b';case jsts.geom.Location.INTERIOR:return'i';case jsts.geom.Location.NONE:return'-';}
throw new jsts.IllegalArgumentError('Unknown location value: '+
locationValue);};(function(){jsts.io.GeoJSONReader=function(geometryFactory){this.geometryFactory=geometryFactory||new jsts.geom.GeometryFactory();this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new jsts.io.GeoJSONParser(this.geometryFactory);};jsts.io.GeoJSONReader.prototype.read=function(geoJson){var geometry=this.parser.read(geoJson);if(this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED){this.reducePrecision(geometry);}
return geometry;};jsts.io.GeoJSONReader.prototype.reducePrecision=function(geometry){var i,len;if(geometry.coordinate){this.precisionModel.makePrecise(geometry.coordinate);}else if(geometry.points){for(i=0,len=geometry.points.length;i<len;i++){this.precisionModel.makePrecise(geometry.points[i]);}}else if(geometry.geometries){for(i=0,len=geometry.geometries.length;i<len;i++){this.reducePrecision(geometry.geometries[i]);}}};})();jsts.geom.Geometry=function(factory){this.factory=factory;};jsts.geom.Geometry.prototype.envelope=null;jsts.geom.Geometry.prototype.factory=null;jsts.geom.Geometry.prototype.getGeometryType=function(){return'Geometry';};jsts.geom.Geometry.hasNonEmptyElements=function(geometries){var i;for(i=0;i<geometries.length;i++){if(!geometries[i].isEmpty()){return true;}}
return false;};jsts.geom.Geometry.hasNullElements=function(array){var i;for(i=0;i<array.length;i++){if(array[i]===null){return true;}}
return false;};jsts.geom.Geometry.prototype.getFactory=function(){if(this.factory===null||this.factory===undefined){this.factory=new jsts.geom.GeometryFactory();}
return this.factory;};jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1;};jsts.geom.Geometry.prototype.getGeometryN=function(n){return this;};jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel();};jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.isSimple=function(){this.checkNotGeometryCollection(this);var op=new jsts.operation.IsSimpleOp(this);return op.isSimple();};jsts.geom.Geometry.prototype.isValid=function(){var isValidOp=new jsts.operation.valid.IsValidOp(this);return isValidOp.isValid();};jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.distance=function(g){return jsts.operation.distance.DistanceOp.distance(this,g);};jsts.geom.Geometry.prototype.isWithinDistance=function(geom,distance){var envDist=this.getEnvelopeInternal().distance(geom.getEnvelopeInternal());if(envDist>distance){return false;}
return DistanceOp.isWithinDistance(this,geom,distance);};jsts.geom.Geometry.prototype.isRectangle=function(){return false;};jsts.geom.Geometry.prototype.getArea=function(){return 0.0;};jsts.geom.Geometry.prototype.getLength=function(){return 0.0;};jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty()){return null;}
var cent;var centPt=null;var dim=this.getDimension();if(dim===0){cent=new jsts.algorithm.CentroidPoint();cent.add(this);centPt=cent.getCentroid();}else if(dim===1){cent=new jsts.algorithm.CentroidLine();cent.add(this);centPt=cent.getCentroid();}else{cent=new jsts.algorithm.CentroidArea();cent.add(this);centPt=cent.getCentroid();}
return this.createPointFromInternalCoord(centPt,this);};jsts.geom.Geometry.prototype.getInteriorPoint=function(){var intPt;var interiorPt=null;var dim=this.getDimension();if(dim===0){intPt=new jsts.algorithm.InteriorPointPoint(this);interiorPt=intPt.getInteriorPoint();}else if(dim===1){intPt=new jsts.algorithm.InteriorPointLine(this);interiorPt=intPt.getInteriorPoint();}else{intPt=new jsts.algorithm.InteriorPointArea(this);interiorPt=intPt.getInteriorPoint();}
return this.createPointFromInternalCoord(interiorPt,this);};jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal());};jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){if(this.envelope===null){this.envelope=this.computeEnvelopeInternal();}
return this.envelope;};jsts.geom.Geometry.prototype.disjoint=function(g){return!this.intersects(g);};jsts.geom.Geometry.prototype.touches=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}
return this.relate(g).isTouches(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.intersects=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}
if(this.isRectangle()){return jsts.operation.predicate.RectangleIntersects.intersects(this,g);}
if(g.isRectangle()){return jsts.operation.predicate.RectangleIntersects.intersects(g,this);}
return this.relate(g).isIntersects();};jsts.geom.Geometry.prototype.crosses=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}
return this.relate(g).isCrosses(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.within=function(g){return g.contains(this);};jsts.geom.Geometry.prototype.contains=function(g){if(!this.getEnvelopeInternal().contains(g.getEnvelopeInternal())){return false;}
if(this.isRectangle()){return jsts.operation.predicate.RectangleContains.contains(this,g);}
return this.relate(g).isContains();};jsts.geom.Geometry.prototype.overlaps=function(g){if(!this.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){return false;}
return this.relate(g).isOverlaps(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.covers=function(g){if(!this.getEnvelopeInternal().covers(g.getEnvelopeInternal())){return false;}
if(this.isRectangle()){return true;}
return this.relate(g).isCovers();};jsts.geom.Geometry.prototype.coveredBy=function(g){return g.covers(this);};jsts.geom.Geometry.prototype.relate=function(g,intersectionPattern){if(arguments.length===1){return this.relate2.apply(this,arguments);}
return this.relate2(g).matches(intersectionPattern);};jsts.geom.Geometry.prototype.relate2=function(g){this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(g);return jsts.operation.relate.RelateOp.relate(this,g);};jsts.geom.Geometry.prototype.equalsTopo=function(g){if(!this.getEnvelopeInternal().equals(g.getEnvelopeInternal())){return false;}
return this.relate(g).isEquals(this.getDimension(),g.getDimension());};jsts.geom.Geometry.prototype.equals=function(o){if(o instanceof jsts.geom.Geometry||o instanceof jsts.geom.LinearRing||o instanceof jsts.geom.Polygon||o instanceof jsts.geom.GeometryCollection||o instanceof jsts.geom.MultiPoint||o instanceof jsts.geom.MultiLineString||o instanceof jsts.geom.MultiPolygon){return this.equalsExact(o);}
return false;};jsts.geom.Geometry.prototype.buffer=function(distance,quadrantSegments,endCapStyle){var params=new jsts.operation.buffer.BufferParameters(quadrantSegments,endCapStyle)
return jsts.operation.buffer.BufferOp.bufferOp2(this,distance,params);};jsts.geom.Geometry.prototype.convexHull=function(){return new jsts.algorithm.ConvexHull(this).getConvexHull();};jsts.geom.Geometry.prototype.intersection=function(other){if(this.isEmpty()){return this.getFactory().createGeometryCollection(null);}
if(other.isEmpty()){return this.getFactory().createGeometryCollection(null);}
if(this.isGeometryCollection(this)){var g2=other;}
this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(other);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,other,jsts.operation.overlay.OverlayOp.INTERSECTION);};jsts.geom.Geometry.prototype.union=function(other){if(arguments.length===0){return jsts.operation.union.UnaryUnionOp.union(this);}
if(this.isEmpty()){return other.clone();}
if(other.isEmpty()){return this.clone();}
this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(other);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,other,jsts.operation.overlay.OverlayOp.UNION);};jsts.geom.Geometry.prototype.difference=function(other){if(this.isEmpty()){return this.getFactory().createGeometryCollection(null);}
if(other.isEmpty()){return this.clone();}
this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(other);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,other,jsts.operation.overlay.OverlayOp.DIFFERENCE);};jsts.geom.Geometry.prototype.symDifference=function(other){if(this.isEmpty()){return other.clone();}
if(other.isEmpty()){return this.clone();}
this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(other);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,other,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE);};jsts.geom.Geometry.prototype.equalsExact=function(other,tolerance){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.equalsNorm=function(g){if(g===null||g===undefined)
return false;return this.norm().equalsExact(g.norm());};jsts.geom.Geometry.prototype.apply=function(filter){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.norm=function(){var copy=this.clone();copy.normalize();return copy;};jsts.geom.Geometry.prototype.compareTo=function(o){var other=o;if(this.getClassSortIndex()!==other.getClassSortIndex()){return this.getClassSortIndex()-other.getClassSortIndex();}
if(this.isEmpty()&&other.isEmpty()){return 0;}
if(this.isEmpty()){return-1;}
if(other.isEmpty()){return 1;}
return this.compareToSameClass(o);};jsts.geom.Geometry.prototype.isEquivalentClass=function(other){if(this instanceof jsts.geom.Point&&other instanceof jsts.geom.Point){return true;}else if(this instanceof jsts.geom.LineString&&(other instanceof jsts.geom.LineString|other instanceof jsts.geom.LinearRing)){return true;}else if(this instanceof jsts.geom.LinearRing&&(other instanceof jsts.geom.LineString|other instanceof jsts.geom.LinearRing)){return true;}else if(this instanceof jsts.geom.Polygon&&(other instanceof jsts.geom.Polygon)){return true;}else if(this instanceof jsts.geom.MultiPoint&&(other instanceof jsts.geom.MultiPoint)){return true;}else if(this instanceof jsts.geom.MultiLineString&&(other instanceof jsts.geom.MultiLineString)){return true;}else if(this instanceof jsts.geom.MultiPolygon&&(other instanceof jsts.geom.MultiPolygon)){return true;}else if(this instanceof jsts.geom.GeometryCollection&&(other instanceof jsts.geom.GeometryCollection)){return true;}
return false;};jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(g){if(g.isGeometryCollectionBase()){throw new jsts.error.IllegalArgumentError('This method does not support GeometryCollection');}};jsts.geom.Geometry.prototype.isGeometryCollection=function(){return(this instanceof jsts.geom.GeometryCollection);};jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return(this.CLASS_NAME==='jsts.geom.GeometryCollection');};jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.compareToSameClass=function(o){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.Geometry.prototype.compare=function(a,b){var i=a.iterator();var j=b.iterator();while(i.hasNext()&&j.hasNext()){var aElement=i.next();var bElement=j.next();var comparison=aElement.compareTo(bElement);if(comparison!==0){return comparison;}}
if(i.hasNext()){return 1;}
if(j.hasNext()){return-1;}
return 0;};jsts.geom.Geometry.prototype.equal=function(a,b,tolerance){if(tolerance===undefined||tolerance===null||tolerance===0){return a.equals(b);}
return a.distance(b)<=tolerance;};jsts.geom.Geometry.prototype.getClassSortIndex=function(){var sortedClasses=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection];for(var i=0;i<sortedClasses.length;i++){if(this instanceof sortedClasses[i])
return i;}
jsts.util.Assert.shouldNeverReachHere('Class not supported: '+this);return-1;};jsts.geom.Geometry.prototype.toString=function(){return new jsts.io.WKTWriter().write(this);};jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(coord,exemplar){exemplar.getPrecisionModel().makePrecise(coord);return exemplar.getFactory().createPoint(coord);};(function(){jsts.geom.Coordinate=function(x,y){if(typeof x==='number'){this.x=x;this.y=y;}else if(x instanceof jsts.geom.Coordinate){this.x=parseFloat(x.x);this.y=parseFloat(x.y);}else if(x===undefined||x===null){this.x=0;this.y=0;}else if(typeof x==='string'){this.x=parseFloat(x);this.y=parseFloat(y);}};jsts.geom.Coordinate.prototype.setCoordinate=function(other){this.x=other.x;this.y=other.y;};jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y);};jsts.geom.Coordinate.prototype.distance=function(p){var dx=this.x-p.x;var dy=this.y-p.y;return Math.sqrt(dx*dx+dy*dy);};jsts.geom.Coordinate.prototype.equals2D=function(other){if(this.x!==other.x){return false;}
if(this.y!==other.y){return false;}
return true;};jsts.geom.Coordinate.prototype.equals=function(other){if(!other instanceof jsts.geom.Coordinate||other===undefined){return false;}
return this.equals2D(other);};jsts.geom.Coordinate.prototype.compareTo=function(other){if(this.x<other.x){return-1;}
if(this.x>other.x){return 1;}
if(this.y<other.y){return-1;}
if(this.y>other.y){return 1;}
return 0;};jsts.geom.Coordinate.prototype.toString=function(){return'('+this.x+', '+this.y+')';};})();jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments);};jsts.geom.Envelope.prototype.minx=null;jsts.geom.Envelope.prototype.maxx=null;jsts.geom.Envelope.prototype.miny=null;jsts.geom.Envelope.prototype.maxy=null;jsts.geom.Envelope.prototype.init=function(){if(typeof arguments[0]==='number'&&arguments.length===4){this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3]);}else if(arguments[0]instanceof jsts.geom.Coordinate&&arguments.length===1){this.initFromCoordinate(arguments[0]);}else if(arguments[0]instanceof jsts.geom.Coordinate&&arguments.length===2){this.initFromCoordinates(arguments[0],arguments[1]);}else if(arguments[0]instanceof jsts.geom.Envelope&&arguments.length===1){this.initFromEnvelope(arguments[0]);}else{this.setToNull();}};jsts.geom.Envelope.prototype.initFromValues=function(x1,x2,y1,y2){if(x1<x2){this.minx=x1;this.maxx=x2;}else{this.minx=x2;this.maxx=x1;}
if(y1<y2){this.miny=y1;this.maxy=y2;}else{this.miny=y2;this.maxy=y1;}};jsts.geom.Envelope.prototype.initFromCoordinates=function(p1,p2){this.initFromValues(p1.x,p2.x,p1.y,p2.y);};jsts.geom.Envelope.prototype.initFromCoordinate=function(p){this.initFromValues(p.x,p.x,p.y,p.y);};jsts.geom.Envelope.prototype.initFromEnvelope=function(env){this.minx=env.minx;this.maxx=env.maxx;this.miny=env.miny;this.maxy=env.maxy;};jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0;this.maxx=-1;this.miny=0;this.maxy=-1;};jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx;};jsts.geom.Envelope.prototype.getHeight=function(){if(this.isNull()){return 0;}
return this.maxy-this.miny;};jsts.geom.Envelope.prototype.getWidth=function(){if(this.isNull()){return 0;}
return this.maxx-this.minx;};jsts.geom.Envelope.prototype.getMinX=function(){return this.minx;};jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx;};jsts.geom.Envelope.prototype.getMinY=function(){return this.miny;};jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy;};jsts.geom.Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight();};jsts.geom.Envelope.prototype.expandToInclude=function(){if(arguments[0]instanceof jsts.geom.Coordinate){this.expandToIncludeCoordinate(arguments[0]);}else if(arguments[0]instanceof jsts.geom.Envelope){this.expandToIncludeEnvelope(arguments[0]);}else{this.expandToIncludeValues(arguments[0],arguments[1]);}};jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(p){this.expandToIncludeValues(p.x,p.y);};jsts.geom.Envelope.prototype.expandToIncludeValues=function(x,y){if(this.isNull()){this.minx=x;this.maxx=x;this.miny=y;this.maxy=y;}else{if(x<this.minx){this.minx=x;}
if(x>this.maxx){this.maxx=x;}
if(y<this.miny){this.miny=y;}
if(y>this.maxy){this.maxy=y;}}};jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(other){if(other.isNull()){return;}
if(this.isNull()){this.minx=other.getMinX();this.maxx=other.getMaxX();this.miny=other.getMinY();this.maxy=other.getMaxY();}else{if(other.minx<this.minx){this.minx=other.minx;}
if(other.maxx>this.maxx){this.maxx=other.maxx;}
if(other.miny<this.miny){this.miny=other.miny;}
if(other.maxy>this.maxy){this.maxy=other.maxy;}}};jsts.geom.Envelope.prototype.expandBy=function(){if(arguments.length===1){this.expandByDistance(arguments[0]);}else{this.expandByDistances(arguments[0],arguments[1]);}};jsts.geom.Envelope.prototype.expandByDistance=function(distance){this.expandByDistances(distance,distance);};jsts.geom.Envelope.prototype.expandByDistances=function(deltaX,deltaY){if(this.isNull()){return;}
this.minx-=deltaX;this.maxx+=deltaX;this.miny-=deltaY;this.maxy+=deltaY;if(this.minx>this.maxx||this.miny>this.maxy){this.setToNull();}};jsts.geom.Envelope.prototype.translate=function(transX,transY){if(this.isNull()){return;}
this.init(this.minx+transX,this.maxx+transX,this.miny+transY,this.maxy+transY);};jsts.geom.Envelope.prototype.centre=function(){if(this.isNull()){return null;}
return new jsts.geom.Coordinate((this.minx+this.maxx)/2.0,(this.miny+this.maxy)/2.0);};jsts.geom.Envelope.prototype.intersection=function(env){if(this.isNull()||env.isNull()||!this.intersects(env)){return new jsts.geom.Envelope();}
var intMinX=this.minx>env.minx?this.minx:env.minx;var intMinY=this.miny>env.miny?this.miny:env.miny;var intMaxX=this.maxx<env.maxx?this.maxx:env.maxx;var intMaxY=this.maxy<env.maxy?this.maxy:env.maxy;return new jsts.geom.Envelope(intMinX,intMaxX,intMinY,intMaxY);};jsts.geom.Envelope.prototype.intersects=function(){if(arguments[0]instanceof jsts.geom.Envelope){return this.intersectsEnvelope(arguments[0]);}else if(arguments[0]instanceof jsts.geom.Coordinate){return this.intersectsCoordinate(arguments[0]);}else{return this.intersectsValues(arguments[0],arguments[1]);}};jsts.geom.Envelope.prototype.intersectsEnvelope=function(other){if(this.isNull()||other.isNull()){return false;}
var result=!(other.minx>this.maxx||other.maxx<this.minx||other.miny>this.maxy||other.maxy<this.miny);return result;};jsts.geom.Envelope.prototype.intersectsCoordinate=function(p){return this.intersectsValues(p.x,p.y);};jsts.geom.Envelope.prototype.intersectsValues=function(x,y){if(this.isNull()){return false;}
return!(x>this.maxx||x<this.minx||y>this.maxy||y<this.miny);};jsts.geom.Envelope.prototype.contains=function(){if(arguments[0]instanceof jsts.geom.Envelope){return this.containsEnvelope(arguments[0]);}else if(arguments[0]instanceof jsts.geom.Coordinate){return this.containsCoordinate(arguments[0]);}else{return this.containsValues(arguments[0],arguments[1]);}};jsts.geom.Envelope.prototype.containsEnvelope=function(other){return this.coversEnvelope(other);};jsts.geom.Envelope.prototype.containsCoordinate=function(p){return this.coversCoordinate(p);};jsts.geom.Envelope.prototype.containsValues=function(x,y){return this.coversValues(x,y);};jsts.geom.Envelope.prototype.covers=function(){if(arguments[0]instanceof jsts.geom.Envelope){return this.coversEnvelope(arguments[0]);}else if(arguments[0]instanceof jsts.geom.Coordinate){return this.coversCoordinate(arguments[0]);}else{return this.coversValues(arguments[0],arguments[1]);}};jsts.geom.Envelope.prototype.coversValues=function(x,y){if(this.isNull()){return false;}
return x>=this.minx&&x<=this.maxx&&y>=this.miny&&y<=this.maxy;};jsts.geom.Envelope.prototype.coversCoordinate=function(p){return this.coversValues(p.x,p.y);};jsts.geom.Envelope.prototype.coversEnvelope=function(other){if(this.isNull()||other.isNull()){return false;}
return other.minx>=this.minx&&other.maxx<=this.maxx&&other.miny>=this.miny&&other.maxy<=this.maxy;};jsts.geom.Envelope.prototype.distance=function(env){if(this.intersects(env)){return 0;}
var dx=0.0;if(this.maxx<env.minx){dx=env.minx-this.maxx;}
if(this.minx>env.maxx){dx=this.minx-env.maxx;}
var dy=0.0;if(this.maxy<env.miny){dy=env.miny-this.maxy;}
if(this.miny>env.maxy){dy=this.miny-env.maxy;}
if(dx===0.0){return dy;}
if(dy===0.0){return dx;}
return Math.sqrt(dx*dx+dy*dy);};jsts.geom.Envelope.prototype.equals=function(other){if(this.isNull()){return other.isNull();}
return this.maxx===other.maxx&&this.maxy===other.maxy&&this.minx===other.minx&&this.miny===other.miny;};jsts.geom.Envelope.prototype.toString=function(){return'Env['+this.minx+' : '+this.maxx+', '+this.miny+' : '+
this.maxy+']';};jsts.geom.Envelope.intersects=function(p1,p2,q){if(arguments.length===4){return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3]);}
var xc1=p1.x<p2.x?p1.x:p2.x;var xc2=p1.x>p2.x?p1.x:p2.x;var yc1=p1.y<p2.y?p1.y:p2.y;var yc2=p1.y>p2.y?p1.y:p2.y;if(((q.x>=xc1)&&(q.x<=xc2))&&((q.y>=yc1)&&(q.y<=yc2))){return true;}
return false;};jsts.geom.Envelope.intersectsEnvelope=function(p1,p2,q1,q2){var minq=Math.min(q1.x,q2.x);var maxq=Math.max(q1.x,q2.x);var minp=Math.min(p1.x,p2.x);var maxp=Math.max(p1.x,p2.x);if(minp>maxq){return false;}
if(maxp<minq){return false;}
minq=Math.min(q1.y,q2.y);maxq=Math.max(q1.y,q2.y);minp=Math.min(p1.y,p2.y);maxp=Math.max(p1.y,p2.y);if(minp>maxq){return false;}
if(maxp<minq){return false;}
return true;};jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.maxx,this.miny,this.maxy);};jsts.geom.util.GeometryCombiner=function(geoms){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(geoms);this.inputGeoms=geoms;};jsts.geom.util.GeometryCombiner.combine=function(geoms){if(arguments.length>1)return this.combine2.apply(this,arguments);var combiner=new jsts.geom.util.GeometryCombiner(geoms);return combiner.combine();};jsts.geom.util.GeometryCombiner.combine2=function(){var arrayList=new javascript.util.ArrayList();Array.prototype.slice.call(arguments).forEach(function(a){arrayList.add(a);});var combiner=new jsts.geom.util.GeometryCombiner(arrayList);return combiner.combine();};jsts.geom.util.GeometryCombiner.prototype.geomFactory=null;jsts.geom.util.GeometryCombiner.prototype.skipEmpty=false;jsts.geom.util.GeometryCombiner.prototype.inputGeoms;jsts.geom.util.GeometryCombiner.extractFactory=function(geoms){if(geoms.isEmpty())return null;return geoms.iterator().next().getFactory();};jsts.geom.util.GeometryCombiner.prototype.combine=function(){var elems=new javascript.util.ArrayList(),i;for(i=this.inputGeoms.iterator();i.hasNext();){var g=i.next();this.extractElements(g,elems);}
if(elems.size()===0){if(this.geomFactory!==null){return this.geomFactory.createGeometryCollection(null);}
return null;}
return this.geomFactory.buildGeometry(elems);};jsts.geom.util.GeometryCombiner.prototype.extractElements=function(geom,elems){if(geom===null){return;}
for(var i=0;i<geom.getNumGeometries();i++){var elemGeom=geom.getGeometryN(i);if(this.skipEmpty&&elemGeom.isEmpty()){continue;}
elems.add(elemGeom);}};jsts.geom.PrecisionModel=function(modelType){if(typeof modelType==='number'){this.modelType=jsts.geom.PrecisionModel.FIXED;this.scale=modelType;return;}
this.modelType=modelType||jsts.geom.PrecisionModel.FLOATING;if(this.modelType===jsts.geom.PrecisionModel.FIXED){this.scale=1.0;}};jsts.geom.PrecisionModel.FLOATING='FLOATING';jsts.geom.PrecisionModel.FIXED='FIXED';jsts.geom.PrecisionModel.FLOATING_SINGLE='FLOATING_SINGLE';jsts.geom.PrecisionModel.prototype.scale=null;jsts.geom.PrecisionModel.prototype.modelType=null;jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE;};jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale;};jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType;};jsts.geom.PrecisionModel.prototype.equals=function(other){return true;if(!(other instanceof jsts.geom.PrecisionModel)){return false;}
var otherPrecisionModel=other;return this.modelType===otherPrecisionModel.modelType&&this.scale===otherPrecisionModel.scale;};jsts.geom.PrecisionModel.prototype.makePrecise=function(val){if(val instanceof jsts.geom.Coordinate){this.makePrecise2(val);return;}
if(isNaN(val))
return val;if(this.modelType===jsts.geom.PrecisionModel.FIXED){return Math.round(val*this.scale)/this.scale;}
return val;};jsts.geom.PrecisionModel.prototype.makePrecise2=function(coord){if(this.modelType===jsts.geom.PrecisionModel.FLOATING)
return;coord.x=this.makePrecise(coord.x);coord.y=this.makePrecise(coord.y);};jsts.geom.PrecisionModel.prototype.compareTo=function(o){var other=o;return 0;};jsts.geom.CoordinateFilter=function(){};jsts.geom.CoordinateFilter.prototype.filter=function(coord){throw new jsts.error.AbstractMethodInvocationError();};jsts.simplify.DouglasPeuckerLineSimplifier=function(pts){this.pts=pts;this.seg=new jsts.geom.LineSegment();};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.pts=null;jsts.simplify.DouglasPeuckerLineSimplifier.prototype.usePt=null;jsts.simplify.DouglasPeuckerLineSimplifier.prototype.distanceTolerance=null;jsts.simplify.DouglasPeuckerLineSimplifier.simplify=function(pts,distanceTolerance){var simp=new jsts.simplify.DouglasPeuckerLineSimplifier(pts);simp.setDistanceTolerance(distanceTolerance);return simp.simplify();};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.setDistanceTolerance=function(distanceTolerance){this.distanceTolerance=distanceTolerance;};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplify=function(){this.usePt=[];for(var i=0;i<this.pts.length;i++){this.usePt[i]=true;}
this.simplifySection(0,this.pts.length-1);var coordList=new jsts.geom.CoordinateList();for(var j=0;j<this.pts.length;j++){if(this.usePt[j]){coordList.add(new jsts.geom.Coordinate(this.pts[j]));}}
return coordList.toCoordinateArray();};jsts.simplify.DouglasPeuckerLineSimplifier.prototype.seg=null;jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplifySection=function(i,j){if(i+1==j){return;}
this.seg.p0=this.pts[i];this.seg.p1=this.pts[j];var maxDistance=-1.0;var maxIndex=i;for(var k=i+1;k<j;k++){var distance=this.seg.distance(this.pts[k]);if(distance>maxDistance){maxDistance=distance;maxIndex=k;}}
if(maxDistance<=this.distanceTolerance){for(var l=i+1;l<j;l++){this.usePt[l]=false;}}else{this.simplifySection(i,maxIndex);this.simplifySection(maxIndex,j);}};jsts.geomgraph.EdgeIntersection=function(coord,segmentIndex,dist){this.coord=new jsts.geom.Coordinate(coord);this.segmentIndex=segmentIndex;this.dist=dist;};jsts.geomgraph.EdgeIntersection.prototype.coord=null;jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null;jsts.geomgraph.EdgeIntersection.prototype.dist=null;jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord;};jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex;};jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist;};jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(other){return this.compare(other.segmentIndex,other.dist);};jsts.geomgraph.EdgeIntersection.prototype.compare=function(segmentIndex,dist){if(this.segmentIndex<segmentIndex)
return-1;if(this.segmentIndex>segmentIndex)
return 1;if(this.dist<dist)
return-1;if(this.dist>dist)
return 1;return 0;};jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(maxSegmentIndex){if(this.segmentIndex===0&&this.dist===0.0)
return true;if(this.segmentIndex===maxSegmentIndex)
return true;return false;};jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return''+this.segmentIndex+this.dist;};(function(){var EdgeIntersection=jsts.geomgraph.EdgeIntersection;var TreeMap=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(edge){this.nodeMap=new TreeMap();this.edge=edge;};jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null;jsts.geomgraph.EdgeIntersectionList.prototype.edge=null;jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(pt){for(var it=this.iterator();it.hasNext();){var ei=it.next();if(ei.coord.equals(pt)){return true;}}
return false;};jsts.geomgraph.EdgeIntersectionList.prototype.add=function(intPt,segmentIndex,dist){var eiNew=new EdgeIntersection(intPt,segmentIndex,dist);var ei=this.nodeMap.get(eiNew);if(ei!==null){return ei;}
this.nodeMap.put(eiNew,eiNew);return eiNew;};jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator();};jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var maxSegIndex=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0.0);this.add(this.edge.pts[maxSegIndex],maxSegIndex,0.0);};jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(edgeList)
{this.addEndpoints();var it=this.iterator();var eiPrev=it.next();while(it.hasNext()){var ei=it.next();var newEdge=this.createSplitEdge(eiPrev,ei);edgeList.add(newEdge);eiPrev=ei;}};jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(ei0,ei1){var npts=ei1.segmentIndex-ei0.segmentIndex+2;var lastSegStartPt=this.edge.pts[ei1.segmentIndex];var useIntPt1=ei1.dist>0.0||!ei1.coord.equals2D(lastSegStartPt);if(!useIntPt1){npts--;}
var pts=[];var ipt=0;pts[ipt++]=new jsts.geom.Coordinate(ei0.coord);for(var i=ei0.segmentIndex+1;i<=ei1.segmentIndex;i++){pts[ipt++]=this.edge.pts[i];}
if(useIntPt1)pts[ipt]=ei1.coord;return new jsts.geomgraph.Edge(pts,new jsts.geomgraph.Label(this.edge.label));};})();(function(){var AssertionFailedException=function(message){this.message=message;};AssertionFailedException.prototype=new Error();AssertionFailedException.prototype.name='AssertionFailedException';jsts.util.AssertionFailedException=AssertionFailedException;})();(function(){var AssertionFailedException=jsts.util.AssertionFailedException;jsts.util.Assert=function(){};jsts.util.Assert.isTrue=function(assertion,message){if(!assertion){if(message===null){throw new AssertionFailedException();}else{throw new AssertionFailedException(message);}}};jsts.util.Assert.equals=function(expectedValue,actualValue,message){if(!actualValue.equals(expectedValue)){throw new AssertionFailedException('Expected '+expectedValue+' but encountered '+actualValue+
(message!=null?': '+message:''));}};jsts.util.Assert.shouldNeverReachHere=function(message){throw new AssertionFailedException('Should never reach here'+
(message!=null?': '+message:''));};})();(function(){var Location=jsts.geom.Location;var Assert=jsts.util.Assert;var ArrayList=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(arg){this.li=new jsts.algorithm.RobustLineIntersector();this.ptLocator=new jsts.algorithm.PointLocator();this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory());this.isolatedEdges=new ArrayList();this.arg=arg;};jsts.operation.relate.RelateComputer.prototype.li=null;jsts.operation.relate.RelateComputer.prototype.ptLocator=null;jsts.operation.relate.RelateComputer.prototype.arg=null;jsts.operation.relate.RelateComputer.prototype.nodes=null;jsts.operation.relate.RelateComputer.prototype.im=null;jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null;jsts.operation.relate.RelateComputer.prototype.invalidPoint=null;jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var im=new jsts.geom.IntersectionMatrix();im.set(Location.EXTERIOR,Location.EXTERIOR,2);if(!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal())){this.computeDisjointIM(im);return im;}
this.arg[0].computeSelfNodes(this.li,false);this.arg[1].computeSelfNodes(this.li,false);var intersector=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,false);this.computeIntersectionNodes(0);this.computeIntersectionNodes(1);this.copyNodesAndLabels(0);this.copyNodesAndLabels(1);this.labelIsolatedNodes();this.computeProperIntersectionIM(intersector,im);var eeBuilder=new jsts.operation.relate.EdgeEndBuilder();var ee0=eeBuilder.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(ee0);var ee1=eeBuilder.computeEdgeEnds(this.arg[1].getEdgeIterator());this.insertEdgeEnds(ee1);this.labelNodeEdges();this.labelIsolatedEdges(0,1);this.labelIsolatedEdges(1,0);this.updateIM(im);return im;};jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(ee){for(var i=ee.iterator();i.hasNext();){var e=i.next();this.nodes.add(e);}};jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(intersector,im){var dimA=this.arg[0].getGeometry().getDimension();var dimB=this.arg[1].getGeometry().getDimension();var hasProper=intersector.hasProperIntersection();var hasProperInterior=intersector.hasProperInteriorIntersection();if(dimA===2&&dimB===2){if(hasProper)
im.setAtLeast('212101212');}
else if(dimA===2&&dimB===1){if(hasProper)
im.setAtLeast('FFF0FFFF2');if(hasProperInterior)
im.setAtLeast('1FFFFF1FF');}else if(dimA===1&&dimB===2){if(hasProper)
im.setAtLeast('F0FFFFFF2');if(hasProperInterior)
im.setAtLeast('1F1FFFFFF');}
else if(dimA===1&&dimB===1){if(hasProperInterior)
im.setAtLeast('0FFFFFFFF');}};jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(argIndex){for(var i=this.arg[argIndex].getNodeIterator();i.hasNext();){var graphNode=i.next();var newNode=this.nodes.addNode(graphNode.getCoordinate());newNode.setLabel(argIndex,graphNode.getLabel().getLocation(argIndex));}};jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(argIndex){for(var i=this.arg[argIndex].getEdgeIterator();i.hasNext();){var e=i.next();var eLoc=e.getLabel().getLocation(argIndex);for(var eiIt=e.getEdgeIntersectionList().iterator();eiIt.hasNext();){var ei=eiIt.next();var n=this.nodes.addNode(ei.coord);if(eLoc===Location.BOUNDARY)
n.setLabelBoundary(argIndex);else{if(n.getLabel().isNull(argIndex))
n.setLabel(argIndex,Location.INTERIOR);}}}};jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(argIndex){for(var i=this.arg[argIndex].getEdgeIterator();i.hasNext();){var e=i.next();var eLoc=e.getLabel().getLocation(argIndex);for(var eiIt=e.getEdgeIntersectionList().iterator();eiIt.hasNext();){var ei=eiIt.next();var n=this.nodes.find(ei.coord);if(n.getLabel().isNull(argIndex)){if(eLoc===Location.BOUNDARY)
n.setLabelBoundary(argIndex);else
n.setLabel(argIndex,Location.INTERIOR);}}}};jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(im){var ga=this.arg[0].getGeometry();if(!ga.isEmpty()){im.set(Location.INTERIOR,Location.EXTERIOR,ga.getDimension());im.set(Location.BOUNDARY,Location.EXTERIOR,ga.getBoundaryDimension());}
var gb=this.arg[1].getGeometry();if(!gb.isEmpty()){im.set(Location.EXTERIOR,Location.INTERIOR,gb.getDimension());im.set(Location.EXTERIOR,Location.BOUNDARY,gb.getBoundaryDimension());}};jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var ni=this.nodes.iterator();ni.hasNext();){var node=ni.next();node.getEdges().computeLabelling(this.arg);}};jsts.operation.relate.RelateComputer.prototype.updateIM=function(im){for(var ei=this.isolatedEdges.iterator();ei.hasNext();){var e=ei.next();e.updateIM(im);}
for(var ni=this.nodes.iterator();ni.hasNext();){var node=ni.next();node.updateIM(im);node.updateIMFromEdges(im);}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(thisIndex,targetIndex){for(var ei=this.arg[thisIndex].getEdgeIterator();ei.hasNext();){var e=ei.next();if(e.isIsolated()){this.labelIsolatedEdge(e,targetIndex,this.arg[targetIndex].getGeometry());this.isolatedEdges.add(e);}}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(e,targetIndex,target){if(target.getDimension()>0){var loc=this.ptLocator.locate(e.getCoordinate(),target);e.getLabel().setAllLocations(targetIndex,loc);}else{e.getLabel().setAllLocations(targetIndex,Location.EXTERIOR);}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var ni=this.nodes.iterator();ni.hasNext();){var n=ni.next();var label=n.getLabel();Assert.isTrue(label.getGeometryCount()>0,'node with empty label found');if(n.isIsolated()){if(label.isNull(0))
this.labelIsolatedNode(n,0);else
this.labelIsolatedNode(n,1);}}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(n,targetIndex){var loc=this.ptLocator.locate(n.getCoordinate(),this.arg[targetIndex].getGeometry());n.getLabel().setAllLocations(targetIndex,loc);};})();(function(){var Assert=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(label){this.label=label;};jsts.geomgraph.GraphComponent.prototype.label=null;jsts.geomgraph.GraphComponent.prototype._isInResult=false;jsts.geomgraph.GraphComponent.prototype._isCovered=false;jsts.geomgraph.GraphComponent.prototype._isCoveredSet=false;jsts.geomgraph.GraphComponent.prototype._isVisited=false;jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label;};jsts.geomgraph.GraphComponent.prototype.setLabel=function(label){if(arguments.length===2){this.setLabel2.apply(this,arguments);return;}
this.label=label;};jsts.geomgraph.GraphComponent.prototype.setInResult=function(isInResult){this._isInResult=isInResult;};jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult;};jsts.geomgraph.GraphComponent.prototype.setCovered=function(isCovered){this._isCovered=isCovered;this._isCoveredSet=true;};jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered;};jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet;};jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited;};jsts.geomgraph.GraphComponent.prototype.setVisited=function(isVisited){this._isVisited=isVisited;};jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.GraphComponent.prototype.computeIM=function(im){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.GraphComponent.prototype.updateIM=function(im){Assert.isTrue(this.label.getGeometryCount()>=2,'found partial label');this.computeIM(im);};})();jsts.geomgraph.Node=function(coord,edges){this.coord=coord;this.edges=edges;this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE);};jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent();jsts.geomgraph.Node.prototype.coord=null;jsts.geomgraph.Node.prototype.edges=null;jsts.geomgraph.Node.prototype.isIsolated=function(){return(this.label.getGeometryCount()==1);};jsts.geomgraph.Node.prototype.setLabel2=function(argIndex,onLocation){if(this.label===null){this.label=new jsts.geomgraph.Label(argIndex,onLocation);}else
this.label.setLocation(argIndex,onLocation);};jsts.geomgraph.Node.prototype.setLabelBoundary=function(argIndex){var loc=jsts.geom.Location.NONE;if(this.label!==null)
loc=this.label.getLocation(argIndex);var newLoc;switch(loc){case jsts.geom.Location.BOUNDARY:newLoc=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:newLoc=jsts.geom.Location.BOUNDARY;break;default:newLoc=jsts.geom.Location.BOUNDARY;break;}
this.label.setLocation(argIndex,newLoc);};jsts.geomgraph.Node.prototype.add=function(e){this.edges.insert(e);e.setNode(this);};jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord;};jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var it=this.getEdges().getEdges().iterator();it.hasNext();){var de=it.next();if(de.getEdge().isInResult())
return true;}
return false;};jsts.geom.Point=function(coordinate,factory){this.factory=factory;if(coordinate===undefined)
return;this.coordinate=coordinate;};jsts.geom.Point.prototype=new jsts.geom.Geometry();jsts.geom.Point.constructor=jsts.geom.Point;jsts.geom.Point.CLASS_NAME='jsts.geom.Point';jsts.geom.Point.prototype.coordinate=null;jsts.geom.Point.prototype.getX=function(){return this.coordinate.x;};jsts.geom.Point.prototype.getY=function(){return this.coordinate.y;};jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate;};jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate];};jsts.geom.Point.prototype.getCoordinateSequence=function(){return this.isEmpty()?[]:[this.coordinate];};jsts.geom.Point.prototype.isEmpty=function(){return this.coordinate===null;};jsts.geom.Point.prototype.equalsExact=function(other,tolerance){if(!this.isEquivalentClass(other)){return false;}
if(this.isEmpty()&&other.isEmpty()){return true;}
return this.equal(other.getCoordinate(),this.getCoordinate(),tolerance);};jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1;};jsts.geom.Point.prototype.isSimple=function(){return true;};jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null);};jsts.geom.Point.prototype.computeEnvelopeInternal=function(){if(this.isEmpty()){return new jsts.geom.Envelope();}
return new jsts.geom.Envelope(this.coordinate);};jsts.geom.Point.prototype.apply=function(filter){if(filter instanceof jsts.geom.GeometryFilter||filter instanceof jsts.geom.GeometryComponentFilter){filter.filter(this);}else if(filter instanceof jsts.geom.CoordinateFilter){if(this.isEmpty()){return;}
filter.filter(this.getCoordinate());}};jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory);};jsts.geom.Point.prototype.getDimension=function(){return 0;};jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE;};jsts.geom.Point.prototype.reverse=function(){return this.clone();};jsts.geom.Point.prototype.isValid=function(){if(!jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())){return false;}
return true;};jsts.geom.Point.prototype.normalize=function(){};jsts.geom.Point.prototype.compareToSameClass=function(other){var point=other;return this.getCoordinate().compareTo(point.getCoordinate());};jsts.geom.Point.prototype.getGeometryType=function(){return'Point';};jsts.geom.Point.prototype.hashCode=function(){return'Point_'+this.coordinate.hashCode();};jsts.geom.Point.prototype.CLASS_NAME='jsts.geom.Point';jsts.geom.Dimension=function(){};jsts.geom.Dimension.P=0;jsts.geom.Dimension.L=1;jsts.geom.Dimension.A=2;jsts.geom.Dimension.FALSE=-1;jsts.geom.Dimension.TRUE=-2;jsts.geom.Dimension.DONTCARE=-3;jsts.geom.Dimension.toDimensionSymbol=function(dimensionValue){switch(dimensionValue){case jsts.geom.Dimension.FALSE:return'F';case jsts.geom.Dimension.TRUE:return'T';case jsts.geom.Dimension.DONTCARE:return'*';case jsts.geom.Dimension.P:return'0';case jsts.geom.Dimension.L:return'1';case jsts.geom.Dimension.A:return'2';}
throw new jsts.IllegalArgumentError('Unknown dimension value: '+
dimensionValue);};jsts.geom.Dimension.toDimensionValue=function(dimensionSymbol){switch(dimensionSymbol.toUpperCase()){case'F':return jsts.geom.Dimension.FALSE;case'T':return jsts.geom.Dimension.TRUE;case'*':return jsts.geom.Dimension.DONTCARE;case'0':return jsts.geom.Dimension.P;case'1':return jsts.geom.Dimension.L;case'2':return jsts.geom.Dimension.A;}
throw new jsts.error.IllegalArgumentError('Unknown dimension symbol: '+
dimensionSymbol);};(function(){var Dimension=jsts.geom.Dimension;jsts.geom.LineString=function(points,factory){this.factory=factory;this.points=points||[];};jsts.geom.LineString.prototype=new jsts.geom.Geometry();jsts.geom.LineString.constructor=jsts.geom.LineString;jsts.geom.LineString.prototype.points=null;jsts.geom.LineString.prototype.getCoordinates=function(){return this.points;};jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points;};jsts.geom.LineString.prototype.getCoordinateN=function(n){return this.points[n];};jsts.geom.LineString.prototype.getCoordinate=function(){if(this.isEmpty()){return null;}
return this.getCoordinateN(0);};jsts.geom.LineString.prototype.getDimension=function(){return 1;};jsts.geom.LineString.prototype.getBoundaryDimension=function(){if(this.isClosed()){return Dimension.FALSE;}
return 0;};jsts.geom.LineString.prototype.isEmpty=function(){return this.points.length===0;};jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length;};jsts.geom.LineString.prototype.getPointN=function(n){return this.getFactory().createPoint(this.points[n]);};jsts.geom.LineString.prototype.getStartPoint=function(){if(this.isEmpty()){return null;}
return this.getPointN(0);};jsts.geom.LineString.prototype.getEndPoint=function(){if(this.isEmpty()){return null;}
return this.getPointN(this.getNumPoints()-1);};jsts.geom.LineString.prototype.isClosed=function(){if(this.isEmpty()){return false;}
return this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1));};jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple();};jsts.geom.LineString.prototype.getGeometryType=function(){return'LineString';};jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points);};jsts.geom.LineString.prototype.getBoundary=function(){return(new jsts.operation.BoundaryOp(this)).getBoundary();};jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty()){return new jsts.geom.Envelope();}
var env=new jsts.geom.Envelope();this.points.forEach(function(component){env.expandToInclude(component);});return env;};jsts.geom.LineString.prototype.equalsExact=function(other,tolerance){if(!this.isEquivalentClass(other)){return false;}
if(this.points.length!==other.points.length){return false;}
if(this.isEmpty()&&other.isEmpty()){return true;}
return this.points.reduce(function(equal,point,i){return equal&&jsts.geom.Geometry.prototype.equal(point,other.points[i],tolerance);});};jsts.geom.LineString.prototype.isEquivalentClass=function(other){return other instanceof jsts.geom.LineString;};jsts.geom.LineString.prototype.compareToSameClass=function(o){var line=o;var i=0,il=this.points.length;var j=0,jl=line.points.length;while(i<il&&j<jl){var comparison=this.points[i].compareTo(line.points[j]);if(comparison!==0){return comparison;}
i++;j++;}
if(i<il){return 1;}
if(j<jl){return-1;}
return 0;};jsts.geom.LineString.prototype.apply=function(filter){if(filter instanceof jsts.geom.GeometryFilter||filter instanceof jsts.geom.GeometryComponentFilter){filter.filter(this);}else if(filter instanceof jsts.geom.CoordinateFilter){for(var i=0,len=this.points.length;i<len;i++){filter.filter(this.points[i]);}}else if(filter instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments);}};jsts.geom.LineString.prototype.apply2=function(filter){if(this.points.length===0)
return;for(var i=0;i<this.points.length;i++){filter.filter(this.points,i);if(filter.isDone())
break;}
if(filter.isGeometryChanged()){}};jsts.geom.LineString.prototype.clone=function(){var points=[];for(var i=0,len=this.points.length;i<len;i++){points.push(this.points[i].clone());}
return this.factory.createLineString(points);};jsts.geom.LineString.prototype.normalize=function(){var i,il,j,ci,cj,len;len=this.points.length;il=parseInt(len/2);for(i=0;i<il;i++){j=len-1-i;ci=this.points[i];cj=this.points[j];if(!ci.equals(cj)){if(ci.compareTo(cj)>0){this.points.reverse();}
return;}}};jsts.geom.LineString.prototype.CLASS_NAME='jsts.geom.LineString';})();(function(){jsts.geom.Polygon=function(shell,holes,factory){this.shell=shell||factory.createLinearRing(null);this.holes=holes||[];this.factory=factory;};jsts.geom.Polygon.prototype=new jsts.geom.Geometry();jsts.geom.Polygon.constructor=jsts.geom.Polygon;jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate();};jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty()){return[];}
var coordinates=[];var k=-1;var shellCoordinates=this.shell.getCoordinates();for(var x=0;x<shellCoordinates.length;x++){k++;coordinates[k]=shellCoordinates[x];}
for(var i=0;i<this.holes.length;i++){var childCoordinates=this.holes[i].getCoordinates();for(var j=0;j<childCoordinates.length;j++){k++;coordinates[k]=childCoordinates[j];}}
return coordinates;};jsts.geom.Polygon.prototype.getNumPoints=function(){var numPoints=this.shell.getNumPoints();for(var i=0;i<this.holes.length;i++){numPoints+=this.holes[i].getNumPoints();}
return numPoints;};jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty();};jsts.geom.Polygon.prototype.isRectangle=function(){if(this.getNumInteriorRing()!=0)return false;if(this.shell==null)return false;if(this.shell.getNumPoints()!=5)return false;var seq=this.shell.getCoordinateSequence();var env=this.getEnvelopeInternal();for(var i=0;i<5;i++){var x=seq[i].x;if(!(x==env.getMinX()||x==env.getMaxX()))return false;var y=seq[i].y;if(!(y==env.getMinY()||y==env.getMaxY()))return false;}
var prevX=seq[0].x;var prevY=seq[0].y;for(var i=1;i<=4;i++){var x=seq[i].x;var y=seq[i].y;var xChanged=x!=prevX;var yChanged=y!=prevY;if(xChanged==yChanged)
return false;prevX=x;prevY=y;}
return true;};jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell;};jsts.geom.Polygon.prototype.getInteriorRingN=function(n){return this.holes[n];};jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length;};jsts.geom.Polygon.prototype.getArea=function(){var area=0.0;area+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var i=0;i<this.holes.length;i++){area-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[i].getCoordinateSequence()));}
return area;};jsts.geom.Polygon.prototype.getLength=function(){var len=0.0;len+=this.shell.getLength();for(var i=0;i<this.holes.length;i++){len+=this.holes[i].getLength();}
return len;};jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty()){return this.getFactory().createMultiLineString(null);}
var rings=[];rings[0]=this.shell.clone();for(var i=0,len=this.holes.length;i<len;i++){rings[i+1]=this.holes[i].clone();}
if(rings.length<=1)
return rings[0];return this.getFactory().createMultiLineString(rings);};jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal();};jsts.geom.Polygon.prototype.getDimension=function(){return 2;};jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1;};jsts.geom.Polygon.prototype.equalsExact=function(other,tolerance){if(!this.isEquivalentClass(other)){return false;}
if(this.isEmpty()&&other.isEmpty()){return true;}
if(this.isEmpty()!==other.isEmpty()){return false;}
if(!this.shell.equalsExact(other.shell,tolerance)){return false;}
if(this.holes.length!==other.holes.length){return false;}
if(this.holes.length!==other.holes.length){return false;}
for(var i=0;i<this.holes.length;i++){if(!(this.holes[i]).equalsExact(other.holes[i],tolerance)){return false;}}
return true;};jsts.geom.Polygon.prototype.compareToSameClass=function(o){return this.shell.compareToSameClass(o.shell);};jsts.geom.Polygon.prototype.apply=function(filter){if(filter instanceof jsts.geom.GeometryComponentFilter){filter.filter(this);this.shell.apply(filter);for(var i=0,len=this.holes.length;i<len;i++){this.holes[i].apply(filter);}}else if(filter instanceof jsts.geom.GeometryFilter){filter.filter(this);}else if(filter instanceof jsts.geom.CoordinateFilter){this.shell.apply(filter);for(var i=0,len=this.holes.length;i<len;i++){this.holes[i].apply(filter);}}else if(filter instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments);}};jsts.geom.Polygon.prototype.apply2=function(filter){this.shell.apply(filter);if(!filter.isDone()){for(var i=0;i<this.holes.length;i++){this.holes[i].apply(filter);if(filter.isDone())
break;}}
if(filter.isGeometryChanged()){}};jsts.geom.Polygon.prototype.clone=function(){var holes=[];for(var i=0,len=this.holes.length;i<len;i++){holes.push(this.holes[i].clone());}
return this.factory.createPolygon(this.shell.clone(),holes);};jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,true);for(var i=0,len=this.holes.length;i<len;i++){this.normalize2(this.holes[i],false);}
this.holes.sort();};jsts.geom.Polygon.prototype.normalize2=function(ring,clockwise){if(ring.isEmpty()){return;}
var uniqueCoordinates=ring.points.slice(0,ring.points.length-1);var minCoordinate=jsts.geom.CoordinateArrays.minCoordinate(ring.points);jsts.geom.CoordinateArrays.scroll(uniqueCoordinates,minCoordinate);ring.points=uniqueCoordinates.concat();ring.points[uniqueCoordinates.length]=uniqueCoordinates[0];if(jsts.algorithm.CGAlgorithms.isCCW(ring.points)===clockwise){ring.points.reverse();}};jsts.geom.Polygon.prototype.getGeometryType=function(){return'Polygon';};jsts.geom.Polygon.prototype.CLASS_NAME='jsts.geom.Polygon';})();(function(){var Geometry=jsts.geom.Geometry;var TreeSet=javascript.util.TreeSet;var Arrays=javascript.util.Arrays;jsts.geom.GeometryCollection=function(geometries,factory){this.geometries=geometries||[];this.factory=factory;};jsts.geom.GeometryCollection.prototype=new Geometry();jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection;jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var i=0,len=this.geometries.length;i<len;i++){var geometry=this.getGeometryN(i);if(!geometry.isEmpty()){return false;}}
return true;};jsts.geom.GeometryCollection.prototype.getArea=function(){var area=0.0;for(var i=0,len=this.geometries.length;i<len;i++){area+=this.getGeometryN(i).getArea();}
return area;};jsts.geom.GeometryCollection.prototype.getLength=function(){var length=0.0;for(var i=0,len=this.geometries.length;i<len;i++){length+=this.getGeometryN(i).getLength();}
return length;};jsts.geom.GeometryCollection.prototype.getCoordinate=function(){if(this.isEmpty())
return null;return this.getGeometryN(0).getCoordinate();};jsts.geom.GeometryCollection.prototype.getCoordinates=function(){var coordinates=[];var k=-1;for(var i=0,len=this.geometries.length;i<len;i++){var geometry=this.getGeometryN(i);var childCoordinates=geometry.getCoordinates();for(var j=0;j<childCoordinates.length;j++){k++;coordinates[k]=childCoordinates[j];}}
return coordinates;};jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length;};jsts.geom.GeometryCollection.prototype.getGeometryN=function(n){var geometry=this.geometries[n];if(geometry instanceof jsts.geom.Coordinate){geometry=new jsts.geom.Point(geometry);}
return geometry;};jsts.geom.GeometryCollection.prototype.getNumPoints=function(n){var numPoints=0;for(var i=0;i<this.geometries.length;i++){numPoints+=this.geometries[i].getNumPoints();}
return numPoints;}
jsts.geom.GeometryCollection.prototype.equalsExact=function(other,tolerance){if(!this.isEquivalentClass(other)){return false;}
if(this.geometries.length!==other.geometries.length){return false;}
for(var i=0,len=this.geometries.length;i<len;i++){var geometry=this.getGeometryN(i);if(!geometry.equalsExact(other.getGeometryN(i),tolerance)){return false;}}
return true;};jsts.geom.GeometryCollection.prototype.clone=function(){var geometries=[];for(var i=0,len=this.geometries.length;i<len;i++){geometries.push(this.geometries[i].clone());}
return this.factory.createGeometryCollection(geometries);};jsts.geom.GeometryCollection.prototype.normalize=function(){for(var i=0,len=this.geometries.length;i<len;i++){this.getGeometryN(i).normalize();}
this.geometries.sort();};jsts.geom.GeometryCollection.prototype.compareToSameClass=function(o){var theseElements=new TreeSet(Arrays.asList(this.geometries));var otherElements=new TreeSet(Arrays.asList(o.geometries));return this.compare(theseElements,otherElements);};jsts.geom.GeometryCollection.prototype.apply=function(filter){if(filter instanceof jsts.geom.GeometryFilter||filter instanceof jsts.geom.GeometryComponentFilter){filter.filter(this);for(var i=0,len=this.geometries.length;i<len;i++){this.getGeometryN(i).apply(filter);}}else if(filter instanceof jsts.geom.CoordinateFilter){for(var i=0,len=this.geometries.length;i<len;i++){this.getGeometryN(i).apply(filter);}}else if(filter instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments);}};jsts.geom.GeometryCollection.prototype.apply2=function(filter){if(this.geometries.length==0)
return;for(var i=0;i<this.geometries.length;i++){this.geometries[i].apply(filter);if(filter.isDone()){break;}}
if(filter.isGeometryChanged()){}};jsts.geom.GeometryCollection.prototype.getDimension=function(){var dimension=jsts.geom.Dimension.FALSE;for(var i=0,len=this.geometries.length;i<len;i++){var geometry=this.getGeometryN(i);dimension=Math.max(dimension,geometry.getDimension());}
return dimension;};jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){var envelope=new jsts.geom.Envelope();for(var i=0,len=this.geometries.length;i<len;i++){var geometry=this.getGeometryN(i);envelope.expandToInclude(geometry.getEnvelopeInternal());}
return envelope;};jsts.geom.GeometryCollection.prototype.CLASS_NAME='jsts.geom.GeometryCollection';})();jsts.algorithm.Centroid=function(geometry){this.areaBasePt=null;this.triangleCent3=new jsts.geom.Coordinate();this.areasum2=0;this.cg3=new jsts.geom.Coordinate();this.lineCentSum=new jsts.geom.Coordinate();this.totalLength=0;this.ptCount=0;this.ptCentSum=new jsts.geom.Coordinate();this.add(geometry);};jsts.algorithm.Centroid.getCentroid=function(geometry){var cent=new jsts.algorithm.Centroid(geometry);return cent.getCentroid();};jsts.algorithm.Centroid.centroid3=function(p1,p2,p3,c){c.x=p1.x+p2.x+p3.x;c.y=p1.y+p2.y+p3.y;};jsts.algorithm.Centroid.area2=function(p1,p2,p3){return(p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y);};jsts.algorithm.Centroid.prototype.add=function(geom){if(geom.isEmpty()){return;}
if(geom instanceof jsts.geom.Point){this.addPoint(geom.getCoordinate());}else if(geom instanceof jsts.geom.LineString){this.addLineSegments(geom.getCoordinates());}else if(geom instanceof jsts.geom.Polygon){this.addPolygon(geom);}else if(geom instanceof jsts.geom.GeometryCollection){for(var i=0;i<geom.getNumGeometries();i++){this.add(geom.getGeometryN(i));}}};jsts.algorithm.Centroid.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();if(Math.abs(this.areasum2)>0){cent.x=this.cg3.x/3/this.areasum2;cent.y=this.cg3.y/3/this.areasum2;}else if(this.totalLength>0){cent.x=this.lineCentSum.x/this.totalLength;cent.y=this.lineCentSum.y/this.totalLength;}else if(this.ptCount>0){cent.x=this.ptCentSum.x/this.ptCount;cent.y=this.ptCentSum.y/this.ptCount;}else{return null;}
return cent;};jsts.algorithm.Centroid.prototype.setBasePoint=function(basePt){if(this.areaBasePt===null){this.areaBasePt=basePt;}};jsts.algorithm.Centroid.prototype.addPolygon=function(poly){this.addShell(poly.getExteriorRing().getCoordinates());for(var i=0;i<poly.getNumInteriorRing();i++){this.addHole(poly.getInteriorRingN(i).getCoordinates());}};jsts.algorithm.Centroid.prototype.addShell=function(pts){if(pts.length>0){this.setBasePoint(pts[0]);}
var isPositiveArea=!jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.areaBasePt,pts[i],pts[i+1],isPositiveArea);}
this.addLineSegments(pts);};jsts.algorithm.Centroid.prototype.addHole=function(pts){var isPositiveArea=jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.areaBasePt,pts[i],pts[i+1],isPositiveArea);}
this.addLineSegments(pts);};jsts.algorithm.Centroid.prototype.addTriangle=function(p0,p1,p2,isPositiveArea){var sign=(isPositiveArea)?1:-1;jsts.algorithm.Centroid.centroid3(p0,p1,p2,this.triangleCent3);var area2=jsts.algorithm.Centroid.area2(p0,p1,p2);this.cg3.x+=sign*area2*this.triangleCent3.x;this.cg3.y+=sign*area2*this.triangleCent3.y;this.areasum2+=sign*area2;};jsts.algorithm.Centroid.prototype.addLineSegments=function(pts){var lineLen=0;for(var i=0;i<pts.length-1;i++){var segmentLen=pts[i].distance(pts[i+1]);if(segmentLen===0){continue;}
lineLen+=segmentLen;var midx=(pts[i].x+pts[i+1].x)/2;this.lineCentSum.x+=segmentLen*midx;var midy=(pts[i].y+pts[i+1].y)/2;this.lineCentSum.y+=segmentLen*midy;}
this.totalLength+=lineLen;if(lineLen===0&&pts.length>0){this.addPoint(pts[0]);}};jsts.algorithm.Centroid.prototype.addPoint=function(pt){this.ptCount+=1;this.ptCentSum.x+=pt.x;this.ptCentSum.y+=pt.y;};(function(){var EdgeRing=function(factory){this.deList=new javascript.util.ArrayList();this.factory=factory;};EdgeRing.findEdgeRingContaining=function(testEr,shellList){var testRing=testEr.getRing();var testEnv=testRing.getEnvelopeInternal();var testPt=testRing.getCoordinateN(0);var minShell=null;var minEnv=null;for(var it=shellList.iterator();it.hasNext();){var tryShell=it.next();var tryRing=tryShell.getRing();var tryEnv=tryRing.getEnvelopeInternal();if(minShell!=null)
minEnv=minShell.getRing().getEnvelopeInternal();var isContained=false;if(tryEnv.equals(testEnv))
continue;testPt=jsts.geom.CoordinateArrays.ptNotInList(testRing.getCoordinates(),tryRing.getCoordinates());if(tryEnv.contains(testEnv)&&jsts.algorithm.CGAlgorithms.isPointInRing(testPt,tryRing.getCoordinates()))
isContained=true;if(isContained){if(minShell==null||minEnv.contains(tryEnv)){minShell=tryShell;}}}
return minShell;};EdgeRing.ptNotInList=function(testPts,pts){for(var i=0;i<testPts.length;i++){var testPt=testPts[i];if(!isInList(testPt,pts))
return testPt;}
return null;};EdgeRing.isInList=function(pt,pts){for(var i=0;i<pts.length;i++){if(pt.equals(pts[i]))
return true;}
return false;}
EdgeRing.prototype.factory=null;EdgeRing.prototype.deList=null;EdgeRing.prototype.ring=null;EdgeRing.prototype.ringPts=null;EdgeRing.prototype.holes=null;EdgeRing.prototype.add=function(de){this.deList.add(de);};EdgeRing.prototype.isHole=function(){var ring=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(ring.getCoordinates());};EdgeRing.prototype.addHole=function(hole){if(this.holes==null)
this.holes=new javascript.util.ArrayList();this.holes.add(hole);};EdgeRing.prototype.getPolygon=function(){var holeLR=null;if(this.holes!=null){holeLR=[];for(var i=0;i<this.holes.size();i++){holeLR[i]=this.holes.get(i);}}
var poly=this.factory.createPolygon(this.ring,holeLR);return poly;};EdgeRing.prototype.isValid=function(){this.getCoordinates();if(this.ringPts.length<=3)
return false;this.getRing();return this.ring.isValid();};EdgeRing.prototype.getCoordinates=function(){if(this.ringPts==null){var coordList=new jsts.geom.CoordinateList();for(var i=this.deList.iterator();i.hasNext();){var de=i.next();var edge=de.getEdge();EdgeRing.addEdge(edge.getLine().getCoordinates(),de.getEdgeDirection(),coordList);}
this.ringPts=coordList.toCoordinateArray();}
return this.ringPts;};EdgeRing.prototype.getLineString=function(){this.getCoordinates();return this.factory.createLineString(this.ringPts);};EdgeRing.prototype.getRing=function(){if(this.ring!=null)
return this.ring;this.getCoordinates();if(this.ringPts.length<3)
console.log(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts);}catch(ex){console.log(this.ringPts);}
return this.ring;};EdgeRing.addEdge=function(coords,isForward,coordList){if(isForward){for(var i=0;i<coords.length;i++){coordList.add(coords[i],false);}}else{for(var i=coords.length-1;i>=0;i--){coordList.add(coords[i],false);}}};jsts.operation.polygonize.EdgeRing=EdgeRing;})();(function(){var GraphComponent=function(){};GraphComponent.setVisited=function(i,visited){while(i.hasNext()){var comp=i.next();comp.setVisited(visited);}};GraphComponent.setMarked=function(i,marked){while(i.hasNext()){var comp=i.next();comp.setMarked(marked);}};GraphComponent.getComponentWithVisitedState=function(i,visitedState){while(i.hasNext()){var comp=i.next();if(comp.isVisited()==visitedState)
return comp;}
return null;};GraphComponent.prototype._isMarked=false;GraphComponent.prototype._isVisited=false;GraphComponent.prototype.data;GraphComponent.prototype.isVisited=function(){return this._isVisited;};GraphComponent.prototype.setVisited=function(isVisited){this._isVisited=isVisited;};GraphComponent.prototype.isMarked=function(){return this._isMarked;};GraphComponent.prototype.setMarked=function(isMarked){this._isMarked=isMarked;};GraphComponent.prototype.setContext=function(data){this.data=data;};GraphComponent.prototype.getContext=function(){return data;};GraphComponent.prototype.setData=function(data){this.data=data;};GraphComponent.prototype.getData=function(){return data;};GraphComponent.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.planargraph.GraphComponent=GraphComponent;})();(function(){var GraphComponent=jsts.planargraph.GraphComponent;var Edge=function(de0,de1){if(de0===undefined){return;}
this.setDirectedEdges(de0,de1);};Edge.prototype=new GraphComponent();Edge.prototype.dirEdge=null;Edge.prototype.setDirectedEdges=function(de0,de1){this.dirEdge=[de0,de1];de0.setEdge(this);de1.setEdge(this);de0.setSym(de1);de1.setSym(de0);de0.getFromNode().addOutEdge(de0);de1.getFromNode().addOutEdge(de1);};Edge.prototype.getDirEdge=function(i){if(i instanceof jsts.planargraph.Node){this.getDirEdge2(i);}
return this.dirEdge[i];};Edge.prototype.getDirEdge2=function(fromNode){if(this.dirEdge[0].getFromNode()==fromNode)
return this.dirEdge[0];if(this.dirEdge[1].getFromNode()==fromNode)
return this.dirEdge[1];return null;};Edge.prototype.getOppositeNode=function(node){if(this.dirEdge[0].getFromNode()==node)
return this.dirEdge[0].getToNode();if(this.dirEdge[1].getFromNode()==node)
return this.dirEdge[1].getToNode();return null;};Edge.prototype.remove=function(){this.dirEdge=null;};Edge.prototype.isRemoved=function(){return dirEdge==null;};jsts.planargraph.Edge=Edge;})();jsts.operation.polygonize.PolygonizeEdge=function(line){this.line=line;};jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge();jsts.operation.polygonize.PolygonizeEdge.prototype.line=null;jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line;};(function(){var ArrayList=javascript.util.ArrayList;var GraphComponent=jsts.planargraph.GraphComponent;var DirectedEdge=function(from,to,directionPt,edgeDirection){if(from===undefined){return;}
this.from=from;this.to=to;this.edgeDirection=edgeDirection;this.p0=from.getCoordinate();this.p1=directionPt;var dx=this.p1.x-this.p0.x;var dy=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(dx,dy);this.angle=Math.atan2(dy,dx);};DirectedEdge.prototype=new GraphComponent();DirectedEdge.toEdges=function(dirEdges){var edges=new ArrayList();for(var i=dirEdges.iterator();i.hasNext();){edges.add((i.next()).parentEdge);}
return edges;};DirectedEdge.prototype.parentEdge=null;DirectedEdge.prototype.from=null;DirectedEdge.prototype.to=null;DirectedEdge.prototype.p0=null;DirectedEdge.prototype.p1=null;DirectedEdge.prototype.sym=null;DirectedEdge.prototype.edgeDirection=null;DirectedEdge.prototype.quadrant=null;DirectedEdge.prototype.angle=null;DirectedEdge.prototype.getEdge=function(){return this.parentEdge;};DirectedEdge.prototype.setEdge=function(parentEdge){this.parentEdge=parentEdge;};DirectedEdge.prototype.getQuadrant=function(){return this.quadrant;};DirectedEdge.prototype.getDirectionPt=function(){return this.p1;};DirectedEdge.prototype.getEdgeDirection=function(){return this.edgeDirection;};DirectedEdge.prototype.getFromNode=function(){return this.from;};DirectedEdge.prototype.getToNode=function(){return this.to;};DirectedEdge.prototype.getCoordinate=function(){return this.from.getCoordinate();};DirectedEdge.prototype.getAngle=function(){return this.angle;};DirectedEdge.prototype.getSym=function(){return this.sym;};DirectedEdge.prototype.setSym=function(sym){this.sym=sym;};DirectedEdge.prototype.remove=function(){this.sym=null;this.parentEdge=null;};DirectedEdge.prototype.isRemoved=function(){return this.parentEdge==null;};DirectedEdge.prototype.compareTo=function(obj){var de=obj;return this.compareDirection(de);};DirectedEdge.prototype.compareDirection=function(e){if(this.quadrant>e.quadrant)
return 1;if(this.quadrant<e.quadrant)
return-1;return jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1);};jsts.planargraph.DirectedEdge=DirectedEdge;})();(function(){var DirectedEdge=jsts.planargraph.DirectedEdge;var PolygonizeDirectedEdge=function(from,to,directionPt,edgeDirection){DirectedEdge.apply(this,arguments);};PolygonizeDirectedEdge.prototype=new DirectedEdge();PolygonizeDirectedEdge.prototype.edgeRing=null;PolygonizeDirectedEdge.prototype.next=null;PolygonizeDirectedEdge.prototype.label=-1;PolygonizeDirectedEdge.prototype.getLabel=function(){return this.label;};PolygonizeDirectedEdge.prototype.setLabel=function(label){this.label=label;};PolygonizeDirectedEdge.prototype.getNext=function(){return this.next;};PolygonizeDirectedEdge.prototype.setNext=function(next){this.next=next;};PolygonizeDirectedEdge.prototype.isInRing=function(){return this.edgeRing!=null;};PolygonizeDirectedEdge.prototype.setRing=function(edgeRing){this.edgeRing=edgeRing;};jsts.operation.polygonize.PolygonizeDirectedEdge=PolygonizeDirectedEdge;})();(function(){var ArrayList=javascript.util.ArrayList;var DirectedEdgeStar=function(){this.outEdges=new ArrayList();};DirectedEdgeStar.prototype.outEdges=null;DirectedEdgeStar.prototype.sorted=false;DirectedEdgeStar.prototype.add=function(de){this.outEdges.add(de);this.sorted=false;};DirectedEdgeStar.prototype.remove=function(de){this.outEdges.remove(de);};DirectedEdgeStar.prototype.iterator=function(){this.sortEdges();return this.outEdges.iterator();};DirectedEdgeStar.prototype.getDegree=function(){return this.outEdges.size();};DirectedEdgeStar.prototype.getCoordinate=function(){var it=iterator();if(!it.hasNext())
return null;var e=it.next();return e.getCoordinate();};DirectedEdgeStar.prototype.getEdges=function(){this.sortEdges();return this.outEdges;};DirectedEdgeStar.prototype.sortEdges=function(){if(!this.sorted){var array=this.outEdges.toArray();array.sort(function(a,b){return a.compareTo(b);});this.outEdges=javascript.util.Arrays.asList(array);this.sorted=true;}};DirectedEdgeStar.prototype.getIndex=function(edge){if(edge instanceof jsts.planargraph.DirectedEdge){return this.getIndex2(edge);}else if(typeof(edge)==='number'){return this.getIndex3(edge);}
this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var de=this.outEdges.get(i);if(de.getEdge()==edge)
return i;}
return-1;};DirectedEdgeStar.prototype.getIndex2=function(dirEdge){this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var de=this.outEdges.get(i);if(de==dirEdge)
return i;}
return-1;};DirectedEdgeStar.prototype.getIndex3=function(i){var modi=toInt(i%this.outEdges.size());if(modi<0)
modi+=this.outEdges.size();return modi;};DirectedEdgeStar.prototype.getNextEdge=function(dirEdge){var i=this.getIndex(dirEdge);return this.outEdges.get(getIndex(i+1));};DirectedEdgeStar.prototype.getNextCWEdge=function(dirEdge){var i=this.getIndex(dirEdge);return this.outEdges.get(getIndex(i-1));};jsts.planargraph.DirectedEdgeStar=DirectedEdgeStar;})();(function(){var GraphComponent=jsts.planargraph.GraphComponent;var DirectedEdgeStar=jsts.planargraph.DirectedEdgeStar;var Node=function(pt,deStar){this.pt=pt;this.deStar=deStar||new DirectedEdgeStar();};Node.prototype=new GraphComponent();Node.getEdgesBetween=function(node0,node1){var edges0=DirectedEdge.toEdges(node0.getOutEdges().getEdges());var commonEdges=new javascript.util.HashSet(edges0);var edges1=DirectedEdge.toEdges(node1.getOutEdges().getEdges());commonEdges.retainAll(edges1);return commonEdges;};Node.prototype.pt=null;Node.prototype.deStar=null;Node.prototype.getCoordinate=function(){return this.pt;};Node.prototype.addOutEdge=function(de){this.deStar.add(de);};Node.prototype.getOutEdges=function(){return this.deStar;};Node.prototype.getDegree=function(){return this.deStar.getDegree();};Node.prototype.getIndex=function(edge){return this.deStar.getIndex(edge);};Node.prototype.remove=function(de){if(de===undefined){return this.remove2();}
this.deStar.remove(de);};Node.prototype.remove2=function(){this.pt=null;};Node.prototype.isRemoved=function(){return this.pt==null;};jsts.planargraph.Node=Node;})();(function(){var NodeMap=function(){this.nodeMap=new javascript.util.TreeMap();};NodeMap.prototype.nodeMap=null;NodeMap.prototype.add=function(n){this.nodeMap.put(n.getCoordinate(),n);return n;};NodeMap.prototype.remove=function(pt){return this.nodeMap.remove(pt);};NodeMap.prototype.find=function(coord){return this.nodeMap.get(coord);};NodeMap.prototype.iterator=function(){return this.nodeMap.values().iterator();};NodeMap.prototype.values=function(){return this.nodeMap.values();};jsts.planargraph.NodeMap=NodeMap;})();(function(){var ArrayList=javascript.util.ArrayList;var PlanarGraph=function(){this.edges=new javascript.util.HashSet();this.dirEdges=new javascript.util.HashSet();this.nodeMap=new jsts.planargraph.NodeMap();};PlanarGraph.prototype.edges=null;PlanarGraph.prototype.dirEdges=null;PlanarGraph.prototype.nodeMap=null;PlanarGraph.prototype.findNode=function(pt){return this.nodeMap.find(pt);};PlanarGraph.prototype.add=function(node){if(node instanceof jsts.planargraph.Edge){return this.add2(node);}else if(node instanceof jsts.planargraph.DirectedEdge){return this.add3(node);}
this.nodeMap.add(node);};PlanarGraph.prototype.add2=function(edge){this.edges.add(edge);this.add(edge.getDirEdge(0));this.add(edge.getDirEdge(1));};PlanarGraph.prototype.add3=function(dirEdge){this.dirEdges.add(dirEdge);};PlanarGraph.prototype.nodeIterator=function(){return this.nodeMap.iterator();};PlanarGraph.prototype.contains=function(e){if(e instanceof jsts.planargraph.DirectedEdge){return this.contains2(e);}
return this.edges.contains(e);};PlanarGraph.prototype.contains2=function(de){return this.dirEdges.contains(de);};PlanarGraph.prototype.getNodes=function(){return this.nodeMap.values();};PlanarGraph.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator();};PlanarGraph.prototype.edgeIterator=function(){return this.edges.iterator();};PlanarGraph.prototype.getEdges=function(){return this.edges;};PlanarGraph.prototype.remove=function(edge){if(edge instanceof jsts.planargraph.DirectedEdge){return this.remove2(edge);}
this.remove(edge.getDirEdge(0));this.remove(edge.getDirEdge(1));this.edges.remove(edge);this.edge.remove();};PlanarGraph.prototype.remove2=function(de){if(de instanceof jsts.planargraph.Node){return this.remove3(de);}
var sym=de.getSym();if(sym!=null)
sym.setSym(null);de.getFromNode().remove(de);de.remove();this.dirEdges.remove(de);};PlanarGraph.prototype.remove3=function(node){var outEdges=node.getOutEdges().getEdges();for(var i=outEdges.iterator();i.hasNext();){var de=i.next();var sym=de.getSym();if(sym!=null)
this.remove(sym);this.dirEdges.remove(de);var edge=de.getEdge();if(edge!=null){this.edges.remove(edge);}}
this.nodeMap.remove(node.getCoordinate());node.remove();};PlanarGraph.prototype.findNodesOfDegree=function(degree){var nodesFound=new ArrayList();for(var i=this.nodeIterator();i.hasNext();){var node=i.next();if(node.getDegree()==degree)
nodesFound.add(node);}
return nodesFound;};jsts.planargraph.PlanarGraph=PlanarGraph;})();(function(){var ArrayList=javascript.util.ArrayList;var Stack=javascript.util.Stack;var HashSet=javascript.util.HashSet;var Assert=jsts.util.Assert;var EdgeRing=jsts.operation.polygonize.EdgeRing;var PolygonizeEdge=jsts.operation.polygonize.PolygonizeEdge;var PolygonizeDirectedEdge=jsts.operation.polygonize.PolygonizeDirectedEdge;var PlanarGraph=jsts.planargraph.PlanarGraph;var Node=jsts.planargraph.Node;var PolygonizeGraph=function(factory){PlanarGraph.apply(this);this.factory=factory;};PolygonizeGraph.prototype=new PlanarGraph();PolygonizeGraph.getDegreeNonDeleted=function(node){var edges=node.getOutEdges().getEdges();var degree=0;for(var i=edges.iterator();i.hasNext();){var de=i.next();if(!de.isMarked())
degree++;}
return degree;};PolygonizeGraph.getDegree=function(node,label){var edges=node.getOutEdges().getEdges();var degree=0;for(var i=edges.iterator();i.hasNext();){var de=i.next();if(de.getLabel()==label)
degree++;}
return degree;};PolygonizeGraph.deleteAllEdges=function(node){var edges=node.getOutEdges().getEdges();for(var i=edges.iterator();i.hasNext();){var de=i.next();de.setMarked(true);var sym=de.getSym();if(sym!=null)
sym.setMarked(true);}};PolygonizeGraph.prototype.factory=null;PolygonizeGraph.prototype.addEdge=function(line){if(line.isEmpty()){return;}
var linePts=jsts.geom.CoordinateArrays.removeRepeatedPoints(line.getCoordinates());if(linePts.length<2){return;}
var startPt=linePts[0];var endPt=linePts[linePts.length-1];var nStart=this.getNode(startPt);var nEnd=this.getNode(endPt);var de0=new PolygonizeDirectedEdge(nStart,nEnd,linePts[1],true);var de1=new PolygonizeDirectedEdge(nEnd,nStart,linePts[linePts.length-2],false);var edge=new PolygonizeEdge(line);edge.setDirectedEdges(de0,de1);this.add(edge);};PolygonizeGraph.prototype.getNode=function(pt){var node=this.findNode(pt);if(node==null){node=new Node(pt);this.add(node);}
return node;};PolygonizeGraph.prototype.computeNextCWEdges=function(){for(var iNode=this.nodeIterator();iNode.hasNext();){var node=iNode.next();PolygonizeGraph.computeNextCWEdges(node);}};PolygonizeGraph.prototype.convertMaximalToMinimalEdgeRings=function(ringEdges){for(var i=ringEdges.iterator();i.hasNext();){var de=i.next();var label=de.getLabel();var intNodes=PolygonizeGraph.findIntersectionNodes(de,label);if(intNodes==null)
continue;for(var iNode=intNodes.iterator();iNode.hasNext();){var node=iNode.next();PolygonizeGraph.computeNextCCWEdges(node,label);}}};PolygonizeGraph.findIntersectionNodes=function(startDE,label){var de=startDE;var intNodes=null;do{var node=de.getFromNode();if(PolygonizeGraph.getDegree(node,label)>1){if(intNodes==null)
intNodes=new ArrayList();intNodes.add(node);}
de=de.getNext();Assert.isTrue(de!=null,'found null DE in ring');Assert.isTrue(de==startDE||!de.isInRing(),'found DE already in ring');}while(de!=startDE);return intNodes;};PolygonizeGraph.prototype.getEdgeRings=function(){this.computeNextCWEdges();PolygonizeGraph.label(this.dirEdges,-1);var maximalRings=PolygonizeGraph.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(maximalRings);var edgeRingList=new ArrayList();for(var i=this.dirEdges.iterator();i.hasNext();){var de=i.next();if(de.isMarked())
continue;if(de.isInRing())
continue;var er=this.findEdgeRing(de);edgeRingList.add(er);}
return edgeRingList;};PolygonizeGraph.findLabeledEdgeRings=function(dirEdges){var edgeRingStarts=new ArrayList();var currLabel=1;for(var i=dirEdges.iterator();i.hasNext();){var de=i.next();if(de.isMarked())
continue;if(de.getLabel()>=0)
continue;edgeRingStarts.add(de);var edges=PolygonizeGraph.findDirEdgesInRing(de);PolygonizeGraph.label(edges,currLabel);currLabel++;}
return edgeRingStarts;};PolygonizeGraph.prototype.deleteCutEdges=function(){this.computeNextCWEdges();PolygonizeGraph.findLabeledEdgeRings(this.dirEdges);var cutLines=new ArrayList();for(var i=this.dirEdges.iterator();i.hasNext();){var de=i.next();if(de.isMarked())
continue;var sym=de.getSym();if(de.getLabel()==sym.getLabel()){de.setMarked(true);sym.setMarked(true);var e=de.getEdge();cutLines.add(e.getLine());}}
return cutLines;};PolygonizeGraph.label=function(dirEdges,label){for(var i=dirEdges.iterator();i.hasNext();){var de=i.next();de.setLabel(label);}};PolygonizeGraph.computeNextCWEdges=function(node){var deStar=node.getOutEdges();var startDE=null;var prevDE=null;for(var i=deStar.getEdges().iterator();i.hasNext();){var outDE=i.next();if(outDE.isMarked())
continue;if(startDE==null)
startDE=outDE;if(prevDE!=null){var sym=prevDE.getSym();sym.setNext(outDE);}
prevDE=outDE;}
if(prevDE!=null){var sym=prevDE.getSym();sym.setNext(startDE);}};PolygonizeGraph.computeNextCCWEdges=function(node,label){var deStar=node.getOutEdges();var firstOutDE=null;var prevInDE=null;var edges=deStar.getEdges();for(var i=edges.size()-1;i>=0;i--){var de=edges.get(i);var sym=de.getSym();var outDE=null;if(de.getLabel()==label)
outDE=de;var inDE=null;if(sym.getLabel()==label)
inDE=sym;if(outDE==null&&inDE==null)
continue;if(inDE!=null){prevInDE=inDE;}
if(outDE!=null){if(prevInDE!=null){prevInDE.setNext(outDE);prevInDE=null;}
if(firstOutDE==null)
firstOutDE=outDE;}}
if(prevInDE!=null){Assert.isTrue(firstOutDE!=null);prevInDE.setNext(firstOutDE);}};PolygonizeGraph.findDirEdgesInRing=function(startDE){var de=startDE;var edges=new ArrayList();do{edges.add(de);de=de.getNext();Assert.isTrue(de!=null,'found null DE in ring');Assert.isTrue(de==startDE||!de.isInRing(),'found DE already in ring');}while(de!=startDE);return edges;};PolygonizeGraph.prototype.findEdgeRing=function(startDE){var de=startDE;var er=new EdgeRing(this.factory);do{er.add(de);de.setRing(er);de=de.getNext();Assert.isTrue(de!=null,'found null DE in ring');Assert.isTrue(de==startDE||!de.isInRing(),'found DE already in ring');}while(de!=startDE);return er;};PolygonizeGraph.prototype.deleteDangles=function(){var nodesToRemove=this.findNodesOfDegree(1);var dangleLines=new HashSet();var nodeStack=new Stack();for(var i=nodesToRemove.iterator();i.hasNext();){nodeStack.push(i.next());}
while(!nodeStack.isEmpty()){var node=nodeStack.pop();PolygonizeGraph.deleteAllEdges(node);var nodeOutEdges=node.getOutEdges().getEdges();for(var i=nodeOutEdges.iterator();i.hasNext();){var de=i.next();de.setMarked(true);var sym=de.getSym();if(sym!=null)
sym.setMarked(true);var e=de.getEdge();dangleLines.add(e.getLine());var toNode=de.getToNode();if(PolygonizeGraph.getDegreeNonDeleted(toNode)==1)
nodeStack.push(toNode);}}
return dangleLines;};PolygonizeGraph.prototype.computeDepthParity=function(){while(true){var de=null;if(de==null)
return;this.computeDepthParity(de);}};PolygonizeGraph.prototype.computeDepthParity=function(de){};jsts.operation.polygonize.PolygonizeGraph=PolygonizeGraph;})();jsts.index.strtree.Interval=function(){var other;if(arguments.length===1){other=arguments[0];return jsts.index.strtree.Interval(other.min,other.max);}else if(arguments.length===2){jsts.util.Assert.isTrue(this.min<=this.max);this.min=arguments[0];this.max=arguments[1];}};jsts.index.strtree.Interval.prototype.min=null;jsts.index.strtree.Interval.prototype.max=null;jsts.index.strtree.Interval.prototype.getCentre=function(){return(this.min+this.max)/2;};jsts.index.strtree.Interval.prototype.expandToInclude=function(other){this.max=Math.max(this.max,other.max);this.min=Math.min(this.min,other.min);return this;};jsts.index.strtree.Interval.prototype.intersects=function(other){return!(other.min>this.max||other.max<this.min);};jsts.index.strtree.Interval.prototype.equals=function(o){if(!(o instanceof jsts.index.strtree.Interval)){return false;}
other=o;return this.min===other.min&&this.max===other.max;};jsts.geom.GeometryFactory=function(precisionModel){this.precisionModel=precisionModel||new jsts.geom.PrecisionModel();};jsts.geom.GeometryFactory.prototype.precisionModel=null;jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel;};jsts.geom.GeometryFactory.prototype.createPoint=function(coordinate){var point=new jsts.geom.Point(coordinate,this);return point;};jsts.geom.GeometryFactory.prototype.createLineString=function(coordinates){var lineString=new jsts.geom.LineString(coordinates,this);return lineString;};jsts.geom.GeometryFactory.prototype.createLinearRing=function(coordinates){var linearRing=new jsts.geom.LinearRing(coordinates,this);return linearRing;};jsts.geom.GeometryFactory.prototype.createPolygon=function(shell,holes){var polygon=new jsts.geom.Polygon(shell,holes,this);return polygon;};jsts.geom.GeometryFactory.prototype.createMultiPoint=function(points){if(points&&points[0]instanceof jsts.geom.Coordinate){var converted=[];var i;for(i=0;i<points.length;i++){converted.push(this.createPoint(points[i]));}
points=converted;}
return new jsts.geom.MultiPoint(points,this);};jsts.geom.GeometryFactory.prototype.createMultiLineString=function(lineStrings){return new jsts.geom.MultiLineString(lineStrings,this);};jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(polygons){return new jsts.geom.MultiPolygon(polygons,this);};jsts.geom.GeometryFactory.prototype.buildGeometry=function(geomList){var geomClass=null;var isHeterogeneous=false;var hasGeometryCollection=false;for(var i=geomList.iterator();i.hasNext();){var geom=i.next();var partClass=geom.CLASS_NAME;if(geomClass===null){geomClass=partClass;}
if(!(partClass===geomClass)){isHeterogeneous=true;}
if(geom.isGeometryCollectionBase())
hasGeometryCollection=true;}
if(geomClass===null){return this.createGeometryCollection(null);}
if(isHeterogeneous||hasGeometryCollection){return this.createGeometryCollection(geomList.toArray());}
var geom0=geomList.get(0);var isCollection=geomList.size()>1;if(isCollection){if(geom0 instanceof jsts.geom.Polygon){return this.createMultiPolygon(geomList.toArray());}else if(geom0 instanceof jsts.geom.LineString){return this.createMultiLineString(geomList.toArray());}else if(geom0 instanceof jsts.geom.Point){return this.createMultiPoint(geomList.toArray());}
jsts.util.Assert.shouldNeverReachHere('Unhandled class: '+geom0);}
return geom0;};jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(geometries){return new jsts.geom.GeometryCollection(geometries,this);};jsts.geom.GeometryFactory.prototype.toGeometry=function(envelope){if(envelope.isNull()){return this.createPoint(null);}
if(envelope.getMinX()===envelope.getMaxX()&&envelope.getMinY()===envelope.getMaxY()){return this.createPoint(new jsts.geom.Coordinate(envelope.getMinX(),envelope.getMinY()));}
if(envelope.getMinX()===envelope.getMaxX()||envelope.getMinY()===envelope.getMaxY()){return this.createLineString([new jsts.geom.Coordinate(envelope.getMinX(),envelope.getMinY()),new jsts.geom.Coordinate(envelope.getMaxX(),envelope.getMaxY())]);}
return this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(envelope.getMinX(),envelope.getMinY()),new jsts.geom.Coordinate(envelope.getMinX(),envelope.getMaxY()),new jsts.geom.Coordinate(envelope.getMaxX(),envelope.getMaxY()),new jsts.geom.Coordinate(envelope.getMaxX(),envelope.getMinY()),new jsts.geom.Coordinate(envelope.getMinX(),envelope.getMinY())]),null);};jsts.geomgraph.NodeFactory=function(){};jsts.geomgraph.NodeFactory.prototype.createNode=function(coord){return new jsts.geomgraph.Node(coord,null);};(function(){jsts.geomgraph.Position=function(){};jsts.geomgraph.Position.ON=0;jsts.geomgraph.Position.LEFT=1;jsts.geomgraph.Position.RIGHT=2;jsts.geomgraph.Position.opposite=function(position){if(position===jsts.geomgraph.Position.LEFT){return jsts.geomgraph.Position.RIGHT;}
if(position===jsts.geomgraph.Position.RIGHT){return jsts.geomgraph.Position.LEFT;}
return position;};})();jsts.geomgraph.TopologyLocation=function(){this.location=[];if(arguments.length===3){var on=arguments[0];var left=arguments[1];var right=arguments[2];this.init(3);this.location[jsts.geomgraph.Position.ON]=on;this.location[jsts.geomgraph.Position.LEFT]=left;this.location[jsts.geomgraph.Position.RIGHT]=right;}else if(arguments[0]instanceof jsts.geomgraph.TopologyLocation){var gl=arguments[0];this.init(gl.location.length);if(gl!=null){for(var i=0;i<this.location.length;i++){this.location[i]=gl.location[i];}}}else if(typeof arguments[0]==='number'){var on=arguments[0];this.init(1);this.location[jsts.geomgraph.Position.ON]=on;}else if(arguments[0]instanceof Array){var location=arguments[0];this.init(location.length);}};jsts.geomgraph.TopologyLocation.prototype.location=null;jsts.geomgraph.TopologyLocation.prototype.init=function(size){this.location[size-1]=null;this.setAllLocations(jsts.geom.Location.NONE);};jsts.geomgraph.TopologyLocation.prototype.get=function(posIndex){if(posIndex<this.location.length)
return this.location[posIndex];return jsts.geom.Location.NONE;};jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var i=0;i<this.location.length;i++){if(this.location[i]!==jsts.geom.Location.NONE)
return false;}
return true;};jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var i=0;i<this.location.length;i++){if(this.location[i]===jsts.geom.Location.NONE)
return true;}
return false;};jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(le,locIndex){return this.location[locIndex]==le.location[locIndex];};jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1;};jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return this.location.length===1;};jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(this.location.length<=1)
return;var temp=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT];this.location[jsts.geomgraph.Position.RIGHT]=temp;};jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(locValue){for(var i=0;i<this.location.length;i++){this.location[i]=locValue;}};jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(locValue){for(var i=0;i<this.location.length;i++){if(this.location[i]===jsts.geom.Location.NONE)
this.location[i]=locValue;}};jsts.geomgraph.TopologyLocation.prototype.setLocation=function(locIndex,locValue){if(locValue!==undefined){this.location[locIndex]=locValue;}else{this.setLocation(jsts.geomgraph.Position.ON,locIndex);}};jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location;};jsts.geomgraph.TopologyLocation.prototype.setLocations=function(on,left,right){this.location[jsts.geomgraph.Position.ON]=on;this.location[jsts.geomgraph.Position.LEFT]=left;this.location[jsts.geomgraph.Position.RIGHT]=right;};jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(loc){for(var i=0;i<this.location.length;i++){if(this.location[i]!==loc)
return false;}
return true;};jsts.geomgraph.TopologyLocation.prototype.merge=function(gl){if(gl.location.length>this.location.length){var newLoc=[];newLoc[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON];newLoc[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE;newLoc[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE;this.location=newLoc;}
for(var i=0;i<this.location.length;i++){if(this.location[i]===jsts.geom.Location.NONE&&i<gl.location.length)
this.location[i]=gl.location[i];}};jsts.geomgraph.Label=function(){this.elt=[];var geomIndex,onLoc,leftLoc,lbl,rightLoc;if(arguments.length===4){geomIndex=arguments[0];onLoc=arguments[1];leftLoc=arguments[2];rightLoc=arguments[3];this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);this.elt[geomIndex].setLocations(onLoc,leftLoc,rightLoc);}else if(arguments.length===3){onLoc=arguments[0];leftLoc=arguments[1];rightLoc=arguments[2];this.elt[0]=new jsts.geomgraph.TopologyLocation(onLoc,leftLoc,rightLoc);this.elt[1]=new jsts.geomgraph.TopologyLocation(onLoc,leftLoc,rightLoc);}else if(arguments.length===2){geomIndex=arguments[0];onLoc=arguments[1];this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE);this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE);this.elt[geomIndex].setLocation(onLoc);}else if(arguments[0]instanceof jsts.geomgraph.Label){lbl=arguments[0];this.elt[0]=new jsts.geomgraph.TopologyLocation(lbl.elt[0]);this.elt[1]=new jsts.geomgraph.TopologyLocation(lbl.elt[1]);}else if(typeof arguments[0]==='number'){onLoc=arguments[0];this.elt[0]=new jsts.geomgraph.TopologyLocation(onLoc);this.elt[1]=new jsts.geomgraph.TopologyLocation(onLoc);}};jsts.geomgraph.Label.toLineLabel=function(label){var i,lineLabel=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(i=0;i<2;i++){lineLabel.setLocation(i,label.getLocation(i));}
return lineLabel;};jsts.geomgraph.Label.prototype.elt=null;jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip();this.elt[1].flip();};jsts.geomgraph.Label.prototype.getLocation=function(geomIndex,posIndex){if(arguments.length==1){return this.getLocation2.apply(this,arguments);}
return this.elt[geomIndex].get(posIndex);};jsts.geomgraph.Label.prototype.getLocation2=function(geomIndex){return this.elt[geomIndex].get(jsts.geomgraph.Position.ON);};jsts.geomgraph.Label.prototype.setLocation=function(geomIndex,posIndex,location){if(arguments.length==2){this.setLocation2.apply(this,arguments);return;}
this.elt[geomIndex].setLocation(posIndex,location);};jsts.geomgraph.Label.prototype.setLocation2=function(geomIndex,location){this.elt[geomIndex].setLocation(jsts.geomgraph.Position.ON,location);};jsts.geomgraph.Label.prototype.setAllLocations=function(geomIndex,location){this.elt[geomIndex].setAllLocations(location);};jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(geomIndex,location){if(arguments.length==1){this.setAllLocationsIfNull2.apply(this,arguments);return;}
this.elt[geomIndex].setAllLocationsIfNull(location);};jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(location){this.setAllLocationsIfNull(0,location);this.setAllLocationsIfNull(1,location);};jsts.geomgraph.Label.prototype.merge=function(lbl){var i;for(i=0;i<2;i++){if(this.elt[i]===null&&lbl.elt[i]!==null){this.elt[i]=new jsts.geomgraph.TopologyLocation(lbl.elt[i]);}else{this.elt[i].merge(lbl.elt[i]);}}};jsts.geomgraph.Label.prototype.getGeometryCount=function(){var count=0;if(!this.elt[0].isNull()){count++;}
if(!this.elt[1].isNull()){count++;}
return count;};jsts.geomgraph.Label.prototype.isNull=function(geomIndex){return this.elt[geomIndex].isNull();};jsts.geomgraph.Label.prototype.isAnyNull=function(geomIndex){return this.elt[geomIndex].isAnyNull();};jsts.geomgraph.Label.prototype.isArea=function(){if(arguments.length==1){return this.isArea2(arguments[0]);}
return this.elt[0].isArea()||this.elt[1].isArea();};jsts.geomgraph.Label.prototype.isArea2=function(geomIndex){return this.elt[geomIndex].isArea();};jsts.geomgraph.Label.prototype.isLine=function(geomIndex){return this.elt[geomIndex].isLine();};jsts.geomgraph.Label.prototype.isEqualOnSide=function(lbl,side){return this.elt[0].isEqualOnSide(lbl.elt[0],side)&&this.elt[1].isEqualOnSide(lbl.elt[1],side);};jsts.geomgraph.Label.prototype.allPositionsEqual=function(geomIndex,loc){return this.elt[geomIndex].allPositionsEqual(loc);};jsts.geomgraph.Label.prototype.toLine=function(geomIndex){if(this.elt[geomIndex].isArea()){this.elt[geomIndex]=new jsts.geomgraph.TopologyLocation(this.elt[geomIndex].location[0]);}};jsts.geomgraph.EdgeRing=function(start,geometryFactory){this.edges=[];this.pts=[];this.holes=[];this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE);this.geometryFactory=geometryFactory;if(start){this.computePoints(start);this.computeRing();}};jsts.geomgraph.EdgeRing.prototype.startDe=null;jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1;jsts.geomgraph.EdgeRing.prototype.edges=null;jsts.geomgraph.EdgeRing.prototype.pts=null;jsts.geomgraph.EdgeRing.prototype.label=null;jsts.geomgraph.EdgeRing.prototype.ring=null;jsts.geomgraph.EdgeRing.prototype._isHole=null;jsts.geomgraph.EdgeRing.prototype.shell=null;jsts.geomgraph.EdgeRing.prototype.holes=null;jsts.geomgraph.EdgeRing.prototype.geometryFactory=null;jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return(this.label.getGeometryCount()==1);};jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole;};jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(i){return this.pts[i];};jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring;};jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label;};jsts.geomgraph.EdgeRing.prototype.isShell=function(){return this.shell===null;};jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell;};jsts.geomgraph.EdgeRing.prototype.setShell=function(shell){this.shell=shell;if(shell!==null)
shell.addHole(this);};jsts.geomgraph.EdgeRing.prototype.addHole=function(ring){this.holes.push(ring);};jsts.geomgraph.EdgeRing.prototype.toPolygon=function(geometryFactory){var holeLR=[];for(var i=0;i<this.holes.length;i++){holeLR[i]=this.holes[i].getLinearRing();}
var poly=this.geometryFactory.createPolygon(this.getLinearRing(),holeLR);return poly;};jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(this.ring!==null)
return;var coord=[];for(var i=0;i<this.pts.length;i++){coord[i]=this.pts[i];}
this.ring=this.geometryFactory.createLinearRing(coord);this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates());};jsts.geomgraph.EdgeRing.prototype.getNext=function(de){throw new jsts.error.AbstractInvocationError();};jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(de,er){throw new jsts.error.AbstractInvocationError();};jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.EdgeRing.prototype.computePoints=function(start){this.startDe=start;var de=start;var isFirstEdge=true;do{if(de===null)
throw new jsts.error.TopologyError('Found null DirectedEdge');if(de.getEdgeRing()===this)
throw new jsts.error.TopologyError('Directed Edge visited twice during ring-building at '+
de.getCoordinate());this.edges.push(de);var label=de.getLabel();jsts.util.Assert.isTrue(label.isArea());this.mergeLabel(label);this.addPoints(de.getEdge(),de.isForward(),isFirstEdge);isFirstEdge=false;this.setEdgeRing(de,this);de=this.getNext(de);}while(de!==this.startDe);};jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){if(this.maxNodeDegree<0)
this.computeMaxNodeDegree();return this.maxNodeDegree;};jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var de=this.startDe;do{var node=de.getNode();var degree=node.getEdges().getOutgoingDegree(this);if(degree>this.maxNodeDegree)
this.maxNodeDegree=degree;de=this.getNext(de);}while(de!==this.startDe);this.maxNodeDegree*=2;};jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var de=this.startDe;do{de.getEdge().setInResult(true);de=de.getNext();}while(de!=this.startDe);};jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(deLabel){this.mergeLabel2(deLabel,0);this.mergeLabel2(deLabel,1);};jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(deLabel,geomIndex){var loc=deLabel.getLocation(geomIndex,jsts.geomgraph.Position.RIGHT);if(loc==jsts.geom.Location.NONE)
return;if(this.label.getLocation(geomIndex)===jsts.geom.Location.NONE){this.label.setLocation(geomIndex,loc);return;}};jsts.geomgraph.EdgeRing.prototype.addPoints=function(edge,isForward,isFirstEdge){var edgePts=edge.getCoordinates();if(isForward){var startIndex=1;if(isFirstEdge)
startIndex=0;for(var i=startIndex;i<edgePts.length;i++){this.pts.push(edgePts[i]);}}else{var startIndex=edgePts.length-2;if(isFirstEdge)
startIndex=edgePts.length-1;for(var i=startIndex;i>=0;i--){this.pts.push(edgePts[i]);}}};jsts.geomgraph.EdgeRing.prototype.containsPoint=function(p){var shell=this.getLinearRing();var env=shell.getEnvelopeInternal();if(!env.contains(p))
return false;if(!jsts.algorithm.CGAlgorithms.isPointInRing(p,shell.getCoordinates()))
return false;for(var i=0;i<this.holes.length;i++){var hole=this.holes[i];if(hole.containsPoint(p))
return false;}
return true;};(function(){jsts.geom.LinearRing=function(points,factory){jsts.geom.LineString.apply(this,arguments);};jsts.geom.LinearRing.prototype=new jsts.geom.LineString();jsts.geom.LinearRing.constructor=jsts.geom.LinearRing;jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE;};jsts.geom.LinearRing.prototype.isSimple=function(){return true;};jsts.geom.LinearRing.prototype.getGeometryType=function(){return'LinearRing';};jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4;jsts.geom.LinearRing.prototype.CLASS_NAME='jsts.geom.LinearRing';})();jsts.index.strtree.Boundable=function(){};jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractNode=function(level){this.level=level;this.childBoundables=[];};jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable();jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode;jsts.index.strtree.AbstractNode.prototype.childBoundables=null;jsts.index.strtree.AbstractNode.prototype.bounds=null;jsts.index.strtree.AbstractNode.prototype.level=null;jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables;};jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractNode.prototype.getBounds=function(){if(this.bounds===null){this.bounds=this.computeBounds();}
return this.bounds;};jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level;};jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(childBoundable){this.childBoundables.push(childBoundable);};(function(){jsts.noding.Noder=function(){};jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc;jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc;})();(function(){var Noder=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){};jsts.noding.SinglePassNoder.prototype=new Noder();jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder;jsts.noding.SinglePassNoder.prototype.segInt=null;jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(segInt){this.segInt=segInt;};})();jsts.index.SpatialIndex=function(){};jsts.index.SpatialIndex.prototype.insert=function(itemEnv,item){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.SpatialIndex.prototype.query=function(searchEnv,visitor){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.SpatialIndex.prototype.remove=function(itemEnv,item){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree=function(nodeCapacity){if(nodeCapacity===undefined)
return;this.itemBoundables=[];jsts.util.Assert.isTrue(nodeCapacity>1,'Node capacity must be greater than 1');this.nodeCapacity=nodeCapacity;};jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){};jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(aBounds,bBounds){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree.prototype.root=null;jsts.index.strtree.AbstractSTRtree.prototype.built=false;jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null;jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null;jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built);this.root=this.itemBoundables.length===0?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1);this.built=true;};jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(level){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(childBoundables,newLevel){jsts.util.Assert.isTrue(!(childBoundables.length===0));var parentBoundables=[];parentBoundables.push(this.createNode(newLevel));var sortedChildBoundables=[];for(var i=0;i<childBoundables.length;i++){sortedChildBoundables.push(childBoundables[i]);}
sortedChildBoundables.sort(this.getComparator());for(var i=0;i<sortedChildBoundables.length;i++){var childBoundable=sortedChildBoundables[i];if(this.lastNode(parentBoundables).getChildBoundables().length===this.getNodeCapacity()){parentBoundables.push(this.createNode(newLevel));}
this.lastNode(parentBoundables).addChildBoundable(childBoundable);}
return parentBoundables;};jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(nodes){return nodes[nodes.length-1];};jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(a,b){return a>b?1:a<b?-1:0;};jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(boundablesOfALevel,level){jsts.util.Assert.isTrue(!(boundablesOfALevel.length===0));var parentBoundables=this.createParentBoundables(boundablesOfALevel,level+1);if(parentBoundables.length===1){return parentBoundables[0];}
return this.createHigherLevels(parentBoundables,level+1);};jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){if(!this.built)
this.build();return this.root;};jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity;};jsts.index.strtree.AbstractSTRtree.prototype.size=function(){if(arguments.length===1){return this.size2(arguments[0]);}
if(!this.built){this.build();}
if(this.itemBoundables.length===0){return 0;}
return this.size2(root);};jsts.index.strtree.AbstractSTRtree.prototype.size2=function(node){var size=0;var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(childBoundable instanceof jsts.index.strtree.AbstractNode){size+=this.size(childBoundable);}else if(childBoundable instanceof jsts.index.strtree.ItemBoundable){size+=1;}}
return size;};jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){if(arguments.length===1){return this.depth2(arguments[0]);}
if(!this.built){this.build();}
if(this.itemBoundables.length===0){return 0;}
return this.depth2(root);};jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){var maxChildDepth=0;var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(childBoundable instanceof jsts.index.strtree.AbstractNode){var childDepth=this.depth(childBoundable);if(childDepth>maxChildDepth)
maxChildDepth=childDepth;}}
return maxChildDepth+1;};jsts.index.strtree.AbstractSTRtree.prototype.insert=function(bounds,item){jsts.util.Assert.isTrue(!this.built,'Cannot insert items into an STR packed R-tree after it has been built.');this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(bounds,item));};jsts.index.strtree.AbstractSTRtree.prototype.query=function(searchBounds){if(arguments.length>1){this.query2.apply(this,arguments);}
if(!this.built){this.build();}
var matches=[];if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()===null);return matches;}
if(this.getIntersectsOp().intersects(this.root.getBounds(),searchBounds)){this.query3(searchBounds,this.root,matches);}
return matches;};jsts.index.strtree.AbstractSTRtree.prototype.query2=function(searchBounds,visitor){if(arguments.length>2){this.query3.apply(this,arguments);}
if(!this.built){this.build();}
if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()===null);}
if(this.getIntersectsOp().intersects(this.root.getBounds(),searchBounds)){this.query4(searchBounds,this.root,visitor);}};jsts.index.strtree.AbstractSTRtree.prototype.query3=function(searchBounds,node,matches){if(!(arguments[2]instanceof Array)){this.query4.apply(this,arguments);}
var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(!this.getIntersectsOp().intersects(childBoundable.getBounds(),searchBounds)){continue;}
if(childBoundable instanceof jsts.index.strtree.AbstractNode){this.query3(searchBounds,childBoundable,matches);}else if(childBoundable instanceof jsts.index.strtree.ItemBoundable){matches.push(childBoundable.getItem());}else{jsts.util.Assert.shouldNeverReachHere();}}};jsts.index.strtree.AbstractSTRtree.prototype.query4=function(searchBounds,node,visitor){var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(!this.getIntersectsOp().intersects(childBoundable.getBounds(),searchBounds)){continue;}
if(childBoundable instanceof jsts.index.strtree.AbstractNode){this.query4(searchBounds,childBoundable,visitor);}else if(childBoundable instanceof jsts.index.strtree.ItemBoundable){visitor.visitItem(childBoundable.getItem());}else{jsts.util.Assert.shouldNeverReachHere();}}};jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(arguments.length===1){return this.itemsTree2.apply(this,arguments);}
if(!this.built){this.build();}
var valuesTree=this.itemsTree2(this.root);if(valuesTree===null)
return[];return valuesTree;};jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(node){var valuesTreeForNode=[];var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(childBoundable instanceof jsts.index.strtree.AbstractNode){var valuesTreeForChild=this.itemsTree(childBoundable);if(valuesTreeForChild!=null)
valuesTreeForNode.push(valuesTreeForChild);}else if(childBoundable instanceof jsts.index.strtree.ItemBoundable){valuesTreeForNode.push(childBoundable.getItem());}else{jsts.util.Assert.shouldNeverReachHere();}}
if(valuesTreeForNode.length<=0)
return null;return valuesTreeForNode;};jsts.index.strtree.AbstractSTRtree.prototype.remove=function(searchBounds,item){if(!this.built){this.build();}
if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()==null);}
if(this.getIntersectsOp().intersects(this.root.getBounds(),searchBounds)){return this.remove2(searchBounds,this.root,item);}
return false;};jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(searchBounds,node,item){var found=this.removeItem(node,item);if(found)
return true;var childToPrune=null;var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(!this.getIntersectsOp().intersects(childBoundable.getBounds(),searchBounds)){continue;}
if(childBoundable instanceof jsts.index.strtree.AbstractNode){found=this.remove(searchBounds,childBoundable,item);if(found){childToPrune=childBoundable;break;}}}
if(childToPrune!=null){if(childToPrune.getChildBoundables().length===0){childBoundables.splice(childBoundables.indexOf(childToPrune),1);}}
return found;};jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(node,item){var childToRemove=null;var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(childBoundable instanceof jsts.index.strtree.ItemBoundable){if(childBoundable.getItem()===item)
childToRemove=childBoundable;}}
if(childToRemove!==null){childBoundables.splice(childBoundables.indexOf(childToRemove),1);return true;}
return false;};jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(level){if(arguments.length>1){this.boundablesAtLevel2.apply(this,arguments);return;}
var boundables=[];this.boundablesAtLevel2(level,this.root,boundables);return boundables;};jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(level,top,boundables){jsts.util.Assert.isTrue(level>-2);if(top.getLevel()===level){boundables.add(top);return;}
var childBoundables=node.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var boundable=childBoundables[i];if(boundable instanceof jsts.index.strtree.AbstractNode){this.boundablesAtLevel(level,boundable,boundables);}else{jsts.util.Assert.isTrue(boundable instanceof jsts.index.strtree.ItemBoundable);if(level===-1){boundables.add(boundable);}}}
return;};jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.index.strtree.STRtree=function(nodeCapacity){nodeCapacity=nodeCapacity||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY;jsts.index.strtree.AbstractSTRtree.call(this,nodeCapacity);};jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree();jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree;jsts.index.strtree.STRtree.prototype.xComparator=function(o1,o2){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(o1.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(o2.getBounds()));};jsts.index.strtree.STRtree.prototype.yComparator=function(o1,o2){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(o1.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(o2.getBounds()));};jsts.index.strtree.STRtree.prototype.centreX=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinX(),e.getMaxX());};jsts.index.strtree.STRtree.prototype.centreY=function(e){return jsts.index.strtree.STRtree.prototype.avg(e.getMinY(),e.getMaxY());};jsts.index.strtree.STRtree.prototype.avg=function(a,b){return(a+b)/2.0;};jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(aBounds,bBounds){return aBounds.intersects(bBounds);}};jsts.index.strtree.STRtree.prototype.createParentBoundables=function(childBoundables,newLevel){jsts.util.Assert.isTrue(!(childBoundables.length===0));var minLeafCount=Math.ceil(childBoundables.length/this.getNodeCapacity());var sortedChildBoundables=[];for(var i=0;i<childBoundables.length;i++){sortedChildBoundables.push(childBoundables[i]);}
sortedChildBoundables.sort(this.xComparator);var verticalSlices=this.verticalSlices(sortedChildBoundables,Math.ceil(Math.sqrt(minLeafCount)));return this.createParentBoundablesFromVerticalSlices(verticalSlices,newLevel);};jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(verticalSlices,newLevel){jsts.util.Assert.isTrue(verticalSlices.length>0);var parentBoundables=[];for(var i=0;i<verticalSlices.length;i++){parentBoundables=parentBoundables.concat(this.createParentBoundablesFromVerticalSlice(verticalSlices[i],newLevel));}
return parentBoundables;};jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(childBoundables,newLevel){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,childBoundables,newLevel);};jsts.index.strtree.STRtree.prototype.verticalSlices=function(childBoundables,sliceCount){var sliceCapacity=Math.ceil(childBoundables.length/sliceCount);var slices=[];var i=0,boundablesAddedToSlice,childBoundable;for(var j=0;j<sliceCount;j++){slices[j]=[];boundablesAddedToSlice=0;while(i<childBoundables.length&&boundablesAddedToSlice<sliceCapacity){childBoundable=childBoundables[i++];slices[j].push(childBoundable);boundablesAddedToSlice++;}}
return slices;};jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10;jsts.index.strtree.STRtree.prototype.createNode=function(level){var abstractNode=new jsts.index.strtree.AbstractNode(level);abstractNode.computeBounds=function(){var bounds=null;var childBoundables=this.getChildBoundables();for(var i=0;i<childBoundables.length;i++){var childBoundable=childBoundables[i];if(bounds===null){bounds=new jsts.geom.Envelope(childBoundable.getBounds());}else{bounds.expandToInclude(childBoundable.getBounds());}}
return bounds;};return abstractNode;};jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp;};jsts.index.strtree.STRtree.prototype.insert=function(itemEnv,item){if(itemEnv.isNull()){return;}
jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,itemEnv,item);};jsts.index.strtree.STRtree.prototype.query=function(searchEnv,visitor){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments);};jsts.index.strtree.STRtree.prototype.remove=function(itemEnv,item){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,itemEnv,item);};jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this);};jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this);};jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator;};jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(itemDist){var bp=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),itemDist);return this.nearestNeighbour4(bp);};jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(env,item,itemDist){var bnd=new jsts.index.strtree.ItemBoundable(env,item);var bp=new jsts.index.strtree.BoundablePair(this.getRoot(),bnd,itemDist);return this.nearestNeighbour4(bp)[0];};jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(tree,itemDist){var bp=new jsts.index.strtree.BoundablePair(this.getRoot(),tree.getRoot(),itemDist);return this.nearestNeighbour4(bp);};jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(initBndPair){return this.nearestNeighbour5(initBndPair,Double.POSITIVE_INFINITY);};jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(initBndPair,maxDistance){var distanceLowerBound=maxDistance;var minPair=null;var priQ=[];priQ.push(initBndPair);while(!priQ.isEmpty()&&distanceLowerBound>0.0){var bndPair=priQ.pop();var currentDistance=bndPair.getDistance();if(currentDistance>=distanceLowerBound)
break;if(bndPair.isLeaves()){distanceLowerBound=currentDistance;minPair=bndPair;}else{bndPair.expandToQueue(priQ,distanceLowerBound);}}
return[minPair.getBoundable(0).getItem(),minPair.getBoundable(1).getItem()];};jsts.noding.SegmentString=function(){};jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc;jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc;jsts.noding.SegmentString.prototype.size=jsts.abstractFunc;jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc;jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc;jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc;jsts.noding.NodableSegmentString=function(){};jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString();jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc;jsts.noding.NodedSegmentString=function(pts,data){this.nodeList=new jsts.noding.SegmentNodeList(this);this.pts=pts;this.data=data;};jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString();jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString;jsts.noding.NodedSegmentString.getNodedSubstrings=function(segStrings){if(arguments.length===2){jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);return;}
var resultEdgelist=new javascript.util.ArrayList();jsts.noding.NodedSegmentString.getNodedSubstrings2(segStrings,resultEdgelist);return resultEdgelist;};jsts.noding.NodedSegmentString.getNodedSubstrings2=function(segStrings,resultEdgelist){for(var i=segStrings.iterator();i.hasNext();){var ss=i.next();ss.getNodeList().addSplitEdges(resultEdgelist);}};jsts.noding.NodedSegmentString.prototype.nodeList=null;jsts.noding.NodedSegmentString.prototype.pts=null;jsts.noding.NodedSegmentString.prototype.data=null;jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data;};jsts.noding.NodedSegmentString.prototype.setData=function(data){this.data=data;};jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList;};jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length;};jsts.noding.NodedSegmentString.prototype.getCoordinate=function(i){return this.pts[i];};jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts;};jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(index){if(index===this.pts.length-1)
return-1;return this.safeOctant(this.getCoordinate(index),this.getCoordinate(index+1));};jsts.noding.NodedSegmentString.prototype.safeOctant=function(p0,p1){if(p0.equals2D(p1))
return 0;return jsts.noding.Octant.octant(p0,p1);};jsts.noding.NodedSegmentString.prototype.addIntersections=function(li,segmentIndex,geomIndex){for(var i=0;i<li.getIntersectionNum();i++){this.addIntersection(li,segmentIndex,geomIndex,i);}};jsts.noding.NodedSegmentString.prototype.addIntersection=function(li,segmentIndex,geomIndex,intIndex){if(li instanceof jsts.geom.Coordinate){this.addIntersection2.apply(this,arguments);return;}
var intPt=new jsts.geom.Coordinate(li.getIntersection(intIndex));this.addIntersection2(intPt,segmentIndex);};jsts.noding.NodedSegmentString.prototype.addIntersection2=function(intPt,segmentIndex){this.addIntersectionNode(intPt,segmentIndex);};jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(intPt,segmentIndex){var normalizedSegmentIndex=segmentIndex;var nextSegIndex=normalizedSegmentIndex+1;if(nextSegIndex<this.pts.length){var nextPt=this.pts[nextSegIndex];if(intPt.equals2D(nextPt)){normalizedSegmentIndex=nextSegIndex;}}
var ei=this.nodeList.add(intPt,normalizedSegmentIndex);return ei;};jsts.noding.NodedSegmentString.prototype.toString=function(){var geometryFactory=new jsts.geom.GeometryFactory();return new jsts.io.WKTWriter().write(geometryFactory.createLineString(this.pts));};jsts.index.chain.MonotoneChainBuilder=function(){};jsts.index.chain.MonotoneChainBuilder.toIntArray=function(list){var array=[];for(var i=0;i<list.length;i++){array[i]=list[i];}
return array;};jsts.index.chain.MonotoneChainBuilder.getChains=function(pts){if(arguments.length===2){return jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments);}
return jsts.index.chain.MonotoneChainBuilder.getChains2(pts,null);};jsts.index.chain.MonotoneChainBuilder.getChains2=function(pts,context){var mcList=[];var startIndex=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(pts);for(var i=0;i<startIndex.length-1;i++){var mc=new jsts.index.chain.MonotoneChain(pts,startIndex[i],startIndex[i+1],context);mcList.push(mc);}
return mcList;};jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(pts){var start=0;var startIndexList=[];startIndexList.push(start);do{var last=jsts.index.chain.MonotoneChainBuilder.findChainEnd(pts,start);startIndexList.push(last);start=last;}while(start<pts.length-1);var startIndex=jsts.index.chain.MonotoneChainBuilder.toIntArray(startIndexList);return startIndex;};jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(pts,start){var safeStart=start;while(safeStart<pts.length-1&&pts[safeStart].equals2D(pts[safeStart+1])){safeStart++;}
if(safeStart>=pts.length-1){return pts.length-1;}
var chainQuad=jsts.geomgraph.Quadrant.quadrant(pts[safeStart],pts[safeStart+1]);var last=start+1;while(last<pts.length){if(!pts[last-1].equals2D(pts[last])){var quad=jsts.geomgraph.Quadrant.quadrant(pts[last-1],pts[last]);if(quad!==chainQuad)
break;}
last++;}
return last-1;};jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]];this.intPt=[null,null];this.pa=this.intPt[0];this.pb=this.intPt[1];this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.LineIntersector.NO_INTERSECTION=0;jsts.algorithm.LineIntersector.POINT_INTERSECTION=1;jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2;jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(precisionModel){this.precisionModel=precisionModel;};jsts.algorithm.LineIntersector.prototype.getEndpoint=function(segmentIndex,ptIndex){return this.inputLines[segmentIndex][ptIndex];};jsts.algorithm.LineIntersector.computeEdgeDistance=function(p,p0,p1){var dx=Math.abs(p1.x-p0.x);var dy=Math.abs(p1.y-p0.y);var dist=-1.0;if(p.equals(p0)){dist=0.0;}else if(p.equals(p1)){if(dx>dy){dist=dx;}else{dist=dy;}}else{var pdx=Math.abs(p.x-p0.x);var pdy=Math.abs(p.y-p0.y);if(dx>dy){dist=pdx;}else{dist=pdy;}
if(dist===0.0&&!p.equals(p0)){dist=Math.max(pdx,pdy);}}
if(dist===0.0&&!p.equals(p0)){throw new jsts.error.IllegalArgumentError('Bad distance calculation');}
return dist;};jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(p,p1,p2){var dx=p.x-p1.x;var dy=p.y-p1.y;var dist=Math.sqrt(dx*dx+dy*dy);if(!(dist===0.0&&!p.equals(p1))){throw new jsts.error.IllegalArgumentError('Invalid distance calculation');}
return dist;};jsts.algorithm.LineIntersector.prototype.result=null;jsts.algorithm.LineIntersector.prototype.inputLines=null;jsts.algorithm.LineIntersector.prototype.intPt=null;jsts.algorithm.LineIntersector.prototype.intLineIndex=null;jsts.algorithm.LineIntersector.prototype._isProper=null;jsts.algorithm.LineIntersector.prototype.pa=null;jsts.algorithm.LineIntersector.prototype.pb=null;jsts.algorithm.LineIntersector.prototype.precisionModel=null;jsts.algorithm.LineIntersector.prototype.computeIntersection=function(p,p1,p2){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;};jsts.algorithm.LineIntersector.prototype.computeIntersection=function(p1,p2,p3,p4){this.inputLines[0][0]=p1;this.inputLines[0][1]=p2;this.inputLines[1][0]=p3;this.inputLines[1][1]=p4;this.result=this.computeIntersect(p1,p2,p3,p4);};jsts.algorithm.LineIntersector.prototype.computeIntersect=function(p1,p2,q1,q2){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper;};jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result;};jsts.algorithm.LineIntersector.prototype.getIntersection=function(intIndex){return this.intPt[intIndex];};jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){if(this.intLineIndex===null){this.intLineIndex=[[],[]];this.computeIntLineIndex(0);this.computeIntLineIndex(1);}};jsts.algorithm.LineIntersector.prototype.isIntersection=function(pt){var i;for(i=0;i<this.result;i++){if(this.intPt[i].equals2D(pt)){return true;}}
return false;};jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){if(arguments.length===1){return this.isInteriorIntersection2.apply(this,arguments);}
if(this.isInteriorIntersection(0)){return true;}
if(this.isInteriorIntersection(1)){return true;}
return false;};jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(inputLineIndex){var i;for(i=0;i<this.result;i++){if(!(this.intPt[i].equals2D(this.inputLines[inputLineIndex][0])||this.intPt[i].equals2D(this.inputLines[inputLineIndex][1]))){return true;}}
return false;};jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper;};jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(segmentIndex,intIndex){this.computeIntLineIndex();return this.intPt[intLineIndex[segmentIndex][intIndex]];};jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(segmentIndex,intIndex){this.computeIntLineIndex();return this.intLineIndex[segmentIndex][intIndex];};jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(segmentIndex){var dist0=this.getEdgeDistance(segmentIndex,0);var dist1=this.getEdgeDistance(segmentIndex,1);if(dist0>dist1){this.intLineIndex[segmentIndex][0]=0;this.intLineIndex[segmentIndex][1]=1;}else{this.intLineIndex[segmentIndex][0]=1;this.intLineIndex[segmentIndex][1]=0;}};jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(segmentIndex,intIndex){var dist=jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[intIndex],this.inputLines[segmentIndex][0],this.inputLines[segmentIndex][1]);return dist;};jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this);};jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector();jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(p,p1,p2){if(arguments.length===4){jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments);return;}
this._isProper=false;if(jsts.geom.Envelope.intersects(p1,p2,p)){if((jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,p)===0)&&(jsts.algorithm.CGAlgorithms.orientationIndex(p2,p1,p)===0)){this._isProper=true;if(p.equals(p1)||p.equals(p2)){this._isProper=false;}
this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION;return;}}
this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(p1,p2,q1,q2){this._isProper=false;if(!jsts.geom.Envelope.intersects(p1,p2,q1,q2)){return jsts.algorithm.LineIntersector.NO_INTERSECTION;}
var Pq1=jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,q1);var Pq2=jsts.algorithm.CGAlgorithms.orientationIndex(p1,p2,q2);if((Pq1>0&&Pq2>0)||(Pq1<0&&Pq2<0)){return jsts.algorithm.LineIntersector.NO_INTERSECTION;}
var Qp1=jsts.algorithm.CGAlgorithms.orientationIndex(q1,q2,p1);var Qp2=jsts.algorithm.CGAlgorithms.orientationIndex(q1,q2,p2);if((Qp1>0&&Qp2>0)||(Qp1<0&&Qp2<0)){return jsts.algorithm.LineIntersector.NO_INTERSECTION;}
var collinear=Pq1===0&&Pq2===0&&Qp1===0&&Qp2===0;if(collinear){return this.computeCollinearIntersection(p1,p2,q1,q2);}
if(Pq1===0||Pq2===0||Qp1===0||Qp2===0){this._isProper=false;if(p1.equals2D(q1)||p1.equals2D(q2)){this.intPt[0]=p1;}else if(p2.equals2D(q1)||p2.equals2D(q2)){this.intPt[0]=p2;}
else if(Pq1===0){this.intPt[0]=new jsts.geom.Coordinate(q1);}else if(Pq2===0){this.intPt[0]=new jsts.geom.Coordinate(q2);}else if(Qp1===0){this.intPt[0]=new jsts.geom.Coordinate(p1);}else if(Qp2===0){this.intPt[0]=new jsts.geom.Coordinate(p2);}}else{this._isProper=true;this.intPt[0]=this.intersection(p1,p2,q1,q2);}
return jsts.algorithm.LineIntersector.POINT_INTERSECTION;};jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(p1,p2,q1,q2){var p1q1p2=jsts.geom.Envelope.intersects(p1,p2,q1);var p1q2p2=jsts.geom.Envelope.intersects(p1,p2,q2);var q1p1q2=jsts.geom.Envelope.intersects(q1,q2,p1);var q1p2q2=jsts.geom.Envelope.intersects(q1,q2,p2);if(p1q1p2&&p1q2p2){this.intPt[0]=q1;this.intPt[1]=q2;return jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}
if(q1p1q2&&q1p2q2){this.intPt[0]=p1;this.intPt[1]=p2;return jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}
if(p1q1p2&&q1p1q2){this.intPt[0]=q1;this.intPt[1]=p1;return q1.equals(p1)&&!p1q2p2&&!q1p2q2?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}
if(p1q1p2&&q1p2q2){this.intPt[0]=q1;this.intPt[1]=p2;return q1.equals(p2)&&!p1q2p2&&!q1p1q2?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}
if(p1q2p2&&q1p1q2){this.intPt[0]=q2;this.intPt[1]=p1;return q2.equals(p1)&&!p1q1p2&&!q1p2q2?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}
if(p1q2p2&&q1p2q2){this.intPt[0]=q2;this.intPt[1]=p2;return q2.equals(p2)&&!p1q1p2&&!q1p1q2?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION;}
return jsts.algorithm.LineIntersector.NO_INTERSECTION;};jsts.algorithm.RobustLineIntersector.prototype.intersection=function(p1,p2,q1,q2){var intPt=this.intersectionWithNormalization(p1,p2,q1,q2);if(!this.isInSegmentEnvelopes(intPt)){intPt=jsts.algorithm.CentralEndpointIntersector.getIntersection(p1,p2,q1,q2);}
if(this.precisionModel!==null){this.precisionModel.makePrecise(intPt);}
return intPt;};jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(p1,p2,q1,q2){var n1=new jsts.geom.Coordinate(p1);var n2=new jsts.geom.Coordinate(p2);var n3=new jsts.geom.Coordinate(q1);var n4=new jsts.geom.Coordinate(q2);var normPt=new jsts.geom.Coordinate();this.normalizeToEnvCentre(n1,n2,n3,n4,normPt);var intPt=this.safeHCoordinateIntersection(n1,n2,n3,n4);intPt.x+=normPt.x;intPt.y+=normPt.y;return intPt;};jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(p1,p2,q1,q2){var intPt=null;try{intPt=jsts.algorithm.HCoordinate.intersection(p1,p2,q1,q2);}catch(e){if(e instanceof jsts.error.NotRepresentableError){intPt=jsts.algorithm.CentralEndpointIntersector.getIntersection(p1,p2,q1,q2);}else{throw e;}}
return intPt;};jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(n1,n2,n3,n4,normPt){normPt.x=this.smallestInAbsValue(n1.x,n2.x,n3.x,n4.x);normPt.y=this.smallestInAbsValue(n1.y,n2.y,n3.y,n4.y);n1.x-=normPt.x;n1.y-=normPt.y;n2.x-=normPt.x;n2.y-=normPt.y;n3.x-=normPt.x;n3.y-=normPt.y;n4.x-=normPt.x;n4.y-=normPt.y;};jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(n00,n01,n10,n11,normPt){var minX0=n00.x<n01.x?n00.x:n01.x;var minY0=n00.y<n01.y?n00.y:n01.y;var maxX0=n00.x>n01.x?n00.x:n01.x;var maxY0=n00.y>n01.y?n00.y:n01.y;var minX1=n10.x<n11.x?n10.x:n11.x;var minY1=n10.y<n11.y?n10.y:n11.y;var maxX1=n10.x>n11.x?n10.x:n11.x;var maxY1=n10.y>n11.y?n10.y:n11.y;var intMinX=minX0>minX1?minX0:minX1;var intMaxX=maxX0<maxX1?maxX0:maxX1;var intMinY=minY0>minY1?minY0:minY1;var intMaxY=maxY0<maxY1?maxY0:maxY1;var intMidX=(intMinX+intMaxX)/2.0;var intMidY=(intMinY+intMaxY)/2.0;normPt.x=intMidX;normPt.y=intMidY;n00.x-=normPt.x;n00.y-=normPt.y;n01.x-=normPt.x;n01.y-=normPt.y;n10.x-=normPt.x;n10.y-=normPt.y;n11.x-=normPt.x;n11.y-=normPt.y;};jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(x1,x2,x3,x4){var x=x1;var xabs=Math.abs(x);if(Math.abs(x2)<xabs){x=x2;xabs=Math.abs(x2);}
if(Math.abs(x3)<xabs){x=x3;xabs=Math.abs(x3);}
if(Math.abs(x4)<xabs){x=x4;}
return x;};jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(intPt){var env0=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]);var env1=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return env0.contains(intPt)&&env1.contains(intPt);};jsts.algorithm.HCoordinate=function(){this.x=0.0;this.y=0.0;this.w=1.0;if(arguments.length===1){this.initFrom1Coordinate(arguments[0]);}else if(arguments.length===2&&arguments[0]instanceof jsts.geom.Coordinate){this.initFrom2Coordinates(arguments[0],arguments[1]);}else if(arguments.length===2&&arguments[0]instanceof jsts.algorithm.HCoordinate){this.initFrom2HCoordinates(arguments[0],arguments[1]);}else if(arguments.length===2){this.initFromXY(arguments[0],arguments[1]);}else if(arguments.length===3){this.initFromXYW(arguments[0],arguments[1],arguments[2]);}else if(arguments.length===4){this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3]);}};jsts.algorithm.HCoordinate.intersection=function(p1,p2,q1,q2){var px,py,pw,qx,qy,qw,x,y,w,xInt,yInt;px=p1.y-p2.y;py=p2.x-p1.x;pw=p1.x*p2.y-p2.x*p1.y;qx=q1.y-q2.y;qy=q2.x-q1.x;qw=q1.x*q2.y-q2.x*q1.y;x=py*qw-qy*pw;y=qx*pw-px*qw;w=px*qy-qx*py;xInt=x/w;yInt=y/w;if(!isFinite(xInt)||!isFinite(yInt)){throw new jsts.error.NotRepresentableError();}
return new jsts.geom.Coordinate(xInt,yInt);};jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(p){this.x=p.x;this.y=p.y;this.w=1.0;};jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(p1,p2){this.x=p1.y-p2.y;this.y=p2.x-p1.x;this.w=p1.x*p2.y-p2.x*p1.y;};jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(p1,p2){this.x=p1.y*p2.w-p2.y*p1.w;this.y=p2.x*p1.w-p1.x*p2.w;this.w=p1.x*p2.y-p2.x*p1.y;};jsts.algorithm.HCoordinate.prototype.initFromXYW=function(x,y,w){this.x=x;this.y=y;this.w=w;};jsts.algorithm.HCoordinate.prototype.initFromXY=function(x,y){this.x=x;this.y=y;this.w=1.0;};jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(p1,p2,q1,q2){var px,py,pw,qx,qy,qw;px=p1.y-p2.y;py=p2.x-p1.x;pw=p1.x*p2.y-p2.x*p1.y;qx=q1.y-q2.y;qy=q2.x-q1.x;qw=q1.x*q2.y-q2.x*q1.y;this.x=py*qw-qy*pw;this.y=qx*pw-px*qw;this.w=px*qy-qx*py;};jsts.algorithm.HCoordinate.prototype.getX=function(){var a=this.x/this.w;if(!isFinite(a)){throw new jsts.error.NotRepresentableError();}
return a;};jsts.algorithm.HCoordinate.prototype.getY=function(){var a=this.y/this.w;if(!isFinite(a)){throw new jsts.error.NotRepresentableError();}
return a;};jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var p=new jsts.geom.Coordinate();p.x=this.getX();p.y=this.getY();return p;};jsts.geom.LineSegment=function(){if(arguments.length===0){this.p0=new jsts.geom.Coordinate();this.p1=new jsts.geom.Coordinate();}else if(arguments.length===1){this.p0=arguments[0].p0;this.p1=arguments[0].p1;}else if(arguments.length===2){this.p0=arguments[0];this.p1=arguments[1];}else if(arguments.length===4){this.p0=new jsts.geom.Coordinate(arguments[0],arguments[1]);this.p1=new jsts.geom.Coordinate(arguments[2],arguments[3]);}};jsts.geom.LineSegment.prototype.p0=null;jsts.geom.LineSegment.prototype.p1=null;jsts.geom.LineSegment.midPoint=function(p0,p1){return new jsts.geom.Coordinate((p0.x+p1.x)/2,(p0.y+p1.y)/2);};jsts.geom.LineSegment.prototype.getCoordinate=function(i){if(i===0)return this.p0;return this.p1;};jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1);};jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y;};jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x;};jsts.geom.LineSegment.prototype.orientationIndex=function(arg){if(arg instanceof jsts.geom.LineSegment){return this.orientationIndex1(arg);}else if(arg instanceof jsts.geom.Coordinate){return this.orientationIndex2(arg);}};jsts.geom.LineSegment.prototype.orientationIndex1=function(seg){var orient0=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,seg.p0);var orient1=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,seg.p1);if(orient0>=0&&orient1>=0){return Math.max(orient0,orient1);}
if(orient0<=0&&orient1<=0){return Math.max(orient0,orient1);}
return 0;};jsts.geom.LineSegment.prototype.orientationIndex2=function(p){return jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,p);};jsts.geom.LineSegment.prototype.reverse=function(){var temp=this.p0;this.p0=this.p1;this.p1=temp;};jsts.geom.LineSegment.prototype.normalize=function(){if(this.p1.compareTo(this.p0)<0)this.reverse();};jsts.geom.LineSegment.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x);};jsts.geom.LineSegment.prototype.midPoint=function(){return jsts.geom.LineSegment.midPoint(this.p0,this.p1);};jsts.geom.LineSegment.prototype.distance=function(arg){if(arg instanceof jsts.geom.LineSegment){return this.distance1(arg);}else if(arg instanceof jsts.geom.Coordinate){return this.distance2(arg);}};jsts.geom.LineSegment.prototype.distance1=function(ls){return jsts.algorithm.CGAlgorithms.distanceLineLine(this.p0,this.p1,ls.p0,ls.p1);};jsts.geom.LineSegment.prototype.distance2=function(p){return jsts.algorithm.CGAlgorithms.distancePointLine(p,this.p0,this.p1);};jsts.geom.LineSegment.prototype.pointAlong=function(segmentLengthFraction){var coord=new jsts.geom.Coordinate();coord.x=this.p0.x+segmentLengthFraction*(this.p1.x-this.p0.x);coord.y=this.p0.y+segmentLengthFraction*(this.p1.y-this.p0.y);return coord;};jsts.geom.LineSegment.prototype.pointAlongOffset=function(segmentLengthFraction,offsetDistance){var segx=this.p0.x+segmentLengthFraction*(this.p1.x-this.p0.x);var segy=this.p0.y+segmentLengthFraction*(this.p1.y-this.p0.y);var dx=this.p1.x-this.p0.x;var dy=this.p1.y-this.p0.y;var len=Math.sqrt(dx*dx+dy*dy);var ux=0;var uy=0;if(offsetDistance!==0){if(len<=0){throw"Cannot compute offset from zero-length line segment";}
ux=offsetDistance*dx/len;uy=offsetDistance*dy/len;}
var offsetx=segx-uy;var offsety=segy+ux;var coord=new jsts.geom.Coordinate(offsetx,offsety);return coord;};jsts.geom.LineSegment.prototype.projectionFactor=function(p){if(p.equals(this.p0))
return 0.0;if(p.equals(this.p1))
return 1.0;var dx=this.p1.x-this.p0.x;var dy=this.p1.y-this.p0.y;var len2=dx*dx+dy*dy;var r=((p.x-this.p0.x)*dx+(p.y-this.p0.y)*dy)/len2;return r;};jsts.geom.LineSegment.prototype.segmentFraction=function(inputPt){var segFrac=this.projectionFactor(inputPt);if(segFrac<0){segFrac=0;}else if(segFrac>1||isNaN(segFrac)){segFrac=1;}
return segFrac;};jsts.geom.LineSegment.prototype.project=function(arg){if(arg instanceof jsts.geom.Coordinate){return this.project1(arg);}else if(arg instanceof jsts.geom.LineSegment){return this.project2(arg);}};jsts.geom.LineSegment.prototype.project1=function(p){if(p.equals(this.p0)||p.equals(this.p1)){return new jsts.geom.Coordinate(p);}
var r=this.projectionFactor(p);var coord=new jsts.geom.Coordinate();coord.x=this.p0.x+r*(this.p1.x-this.p0.x);coord.y=this.p0.y+r*(this.p1.y-this.p0.y);return coord;};jsts.geom.LineSegment.prototype.project2=function(seg){var pf0=this.projectionFactor(seg.p0);var pf1=this.projectionFactor(seg.p1);if(pf0>=1&&pf1>=1)return null;if(pf0<=0&&pf1<=0)return null;var newp0=this.project(seg.p0);if(pf0<0)newp0=p0;if(pf0>1)newp0=p1;var newp1=this.project(seg.p1);if(pf1<0.0)newp1=p0;if(pf1>1.0)newp1=p1;return new jsts.geom.LineSegment(newp0,newp1);};jsts.geom.LineSegment.prototype.closestPoint=function(p){var factor=this.projectionFactor(p);if(factor>0&&factor<1){return this.project(p);}
var dist0=this.p0.distance(p);var dist1=this.p1.distance(p);if(dist0<dist1)
return this.p0;return this.p1;};jsts.geom.LineSegment.prototype.closestPoints=function(line){var intPt=this.intersection(line);if(intPt!==null){return[intPt,intPt];}
var closestPt=[];var minDistance=Number.MAX_VALUE;var dist;var close00=this.closestPoint(line.p0);minDistance=close00.distance(line.p0);closestPt[0]=close00;closestPt[1]=line.p0;var close01=this.closestPoint(line.p1);dist=close01.distance(line.p1);if(dist<minDistance){minDistance=dist;closestPt[0]=close01;closestPt[1]=line.p1;}
var close10=line.closestPoint(this.p0);dist=close10.distance(this.p0);if(dist<minDistance){minDistance=dist;closestPt[0]=this.p0;closestPt[1]=close10;}
var close11=line.closestPoint(this.p1);dist=close11.distance(this.p1);if(dist<minDistance){minDistance=dist;closestPt[0]=this.p1;closestPt[1]=close11;}
return closestPt;};jsts.geom.LineSegment.prototype.intersection=function(line){var li=new jsts.algorithm.RobustLineIntersector();li.computeIntersection(this.p0,this.p1,line.p0,line.p1);if(li.hasIntersection())
return li.getIntersection(0);return null;};jsts.geom.LineSegment.prototype.setCoordinates=function(ls){if(ls instanceof jsts.geom.Coordinate){this.setCoordinates2.apply(this,arguments);return;}
this.setCoordinates2(ls.p0,ls.p1);};jsts.geom.LineSegment.prototype.setCoordinates2=function(p0,p1){this.p0.x=p0.x;this.p0.y=p0.y;this.p1.x=p1.x;this.p1.y=p1.y;};jsts.geom.LineSegment.prototype.distancePerpendicular=function(p){return jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular(p,this.p0,this.p1);};jsts.geom.LineSegment.prototype.lineIntersection=function(line){try{var intPt=jsts.algorithm.HCoordinate.intersection(this.p0,this.p1,line.p0,line.p1);return intPt;}catch(ex){}
return null;};jsts.geom.LineSegment.prototype.toGeometry=function(geomFactory){return geomFactory.createLineString([this.p0,this.p1]);};jsts.geom.LineSegment.prototype.equals=function(o){if(!(o instanceof jsts.geom.LineSegment)){return false;}
return this.p0.equals(o.p0)&&this.p1.equals(o.p1);};jsts.geom.LineSegment.prototype.compareTo=function(o){var comp0=this.p0.compareTo(o.p0);if(comp0!==0)return comp0;return this.p1.compareTo(o.p1);};jsts.geom.LineSegment.prototype.equalsTopo=function(other){return this.p0.equals(other.p0)&&this.p1.equals(other.p1)||this.p0.equals(other.p1)&&this.p1.equals(other.p0);};jsts.geom.LineSegment.prototype.toString=function(){return"LINESTRING("+
this.p0.x+" "+this.p0.y
+", "+
this.p1.x+" "+this.p1.y+")";};jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope();this.tempEnv2=new jsts.geom.Envelope();this.overlapSeg1=new jsts.geom.LineSegment();this.overlapSeg2=new jsts.geom.LineSegment();};jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(mc1,start1,mc2,start2){this.mc1.getLineSegment(start1,this.overlapSeg1);this.mc2.getLineSegment(start2,this.overlapSeg2);this.overlap2(this.overlapSeg1,this.overlapSeg2);};jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(seg1,seg2){};(function(){var MonotoneChainOverlapAction=jsts.index.chain.MonotoneChainOverlapAction;var SinglePassNoder=jsts.noding.SinglePassNoder;var STRtree=jsts.index.strtree.STRtree;var NodedSegmentString=jsts.noding.NodedSegmentString;var MonotoneChainBuilder=jsts.index.chain.MonotoneChainBuilder;var SegmentOverlapAction=function(si){this.si=si;};SegmentOverlapAction.prototype=new MonotoneChainOverlapAction();SegmentOverlapAction.constructor=SegmentOverlapAction;SegmentOverlapAction.prototype.si=null;SegmentOverlapAction.prototype.overlap=function(mc1,start1,mc2,start2){var ss1=mc1.getContext();var ss2=mc2.getContext();this.si.processIntersections(ss1,start1,ss2,start2);};jsts.noding.MCIndexNoder=function(){this.monoChains=[];this.index=new STRtree();};jsts.noding.MCIndexNoder.prototype=new SinglePassNoder();jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder;jsts.noding.MCIndexNoder.prototype.monoChains=null;jsts.noding.MCIndexNoder.prototype.index=null;jsts.noding.MCIndexNoder.prototype.idCounter=0;jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null;jsts.noding.MCIndexNoder.prototype.nOverlaps=0;jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains;};jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index;};jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this.nodedSegStrings);};jsts.noding.MCIndexNoder.prototype.computeNodes=function(inputSegStrings){this.nodedSegStrings=inputSegStrings;for(var i=inputSegStrings.iterator();i.hasNext();){this.add(i.next());}
this.intersectChains();};jsts.noding.MCIndexNoder.prototype.intersectChains=function(){var overlapAction=new SegmentOverlapAction(this.segInt);for(var i=0;i<this.monoChains.length;i++){var queryChain=this.monoChains[i];var overlapChains=this.index.query(queryChain.getEnvelope());for(var j=0;j<overlapChains.length;j++){var testChain=overlapChains[j];if(testChain.getId()>queryChain.getId()){queryChain.computeOverlaps(testChain,overlapAction);this.nOverlaps++;}
if(this.segInt.isDone())
return;}}};jsts.noding.MCIndexNoder.prototype.add=function(segStr){var segChains=MonotoneChainBuilder.getChains(segStr.getCoordinates(),segStr);for(var i=0;i<segChains.length;i++){var mc=segChains[i];mc.setId(this.idCounter++);this.index.insert(mc.getEnvelope(),mc);this.monoChains.push(mc);}};})();jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree();};jsts.simplify.LineSegmentIndex.prototype.index=null;jsts.simplify.LineSegmentIndex.prototype.add=function(line){if(line instanceof jsts.geom.LineSegment){this.add2(line);return;}
var segs=line.getSegments();for(var i=0;i<segs.length;i++){var seg=segs[i];this.add2(seg);}};jsts.simplify.LineSegmentIndex.prototype.add2=function(seg){this.index.insert(new jsts.geom.Envelope(seg.p0,seg.p1),seg);};jsts.simplify.LineSegmentIndex.prototype.remove=function(seg){this.index.remove(new jsts.geom.Envelope(seg.p0,seg.p1),seg);};jsts.simplify.LineSegmentIndex.prototype.query=function(querySeg){var env=new jsts.geom.Envelope(querySeg.p0,querySeg.p1);var visitor=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(querySeg);this.index.query(env,visitor);var itemsFound=visitor.getItems();return itemsFound;};jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(querySeg){this.items=[];this.querySeg=querySeg;};jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor();jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null;jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null;jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(item){var seg=item;if(jsts.geom.Envelope.intersects(seg.p0,seg.p1,this.querySeg.p0,this.querySeg.p1))
this.items.push(item);};jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items;};jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap();this.edgeList=null;this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE];};jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null;jsts.geomgraph.EdgeEndStar.prototype.edgeList=null;jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null;jsts.geomgraph.EdgeEndStar.prototype.insert=function(e){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(e,obj){this.edgeMap.put(e,obj);this.edgeList=null;};jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var it=this.iterator();if(!it.hasNext())
return null;var e=it.next();return e.getCoordinate();};jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size();};jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator();};jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){if(this.edgeList===null){this.edgeList=new javascript.util.ArrayList(this.edgeMap.values());}
return this.edgeList;};jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(ee){this.getEdges();var i=this.edgeList.indexOf(ee);var iNextCW=i-1;if(i===0)
iNextCW=this.edgeList.length-1;return this.edgeList[iNextCW];};jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(geomGraph){this.computeEdgeEndLabels(geomGraph[0].getBoundaryNodeRule());this.propagateSideLabels(0);this.propagateSideLabels(1);var hasDimensionalCollapseEdge=[false,false];for(var it=this.iterator();it.hasNext();){var e=it.next();var label=e.getLabel();for(var geomi=0;geomi<2;geomi++){if(label.isLine(geomi)&&label.getLocation(geomi)===jsts.geom.Location.BOUNDARY)
hasDimensionalCollapseEdge[geomi]=true;}}
for(var it=this.iterator();it.hasNext();){var e=it.next();var label=e.getLabel();for(var geomi=0;geomi<2;geomi++){if(label.isAnyNull(geomi)){var loc=jsts.geom.Location.NONE;if(hasDimensionalCollapseEdge[geomi]){loc=jsts.geom.Location.EXTERIOR;}else{var p=e.getCoordinate();loc=this.getLocation(geomi,p,geomGraph);}
label.setAllLocationsIfNull(geomi,loc);}}}};jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(boundaryNodeRule){for(var it=this.iterator();it.hasNext();){var ee=it.next();ee.computeLabel(boundaryNodeRule);}};jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(geomIndex,p,geom){if(this.ptInAreaLocation[geomIndex]===jsts.geom.Location.NONE){this.ptInAreaLocation[geomIndex]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(p,geom[geomIndex].getGeometry());}
return this.ptInAreaLocation[geomIndex];};jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(geomGraph){this.computeEdgeEndLabels(geomGraph.getBoundaryNodeRule());return this.checkAreaLabelsConsistent(0);};jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(geomIndex){var edges=this.getEdges();if(edges.size()<=0)
return true;var lastEdgeIndex=edges.size()-1;var startLabel=edges.get(lastEdgeIndex).getLabel();var startLoc=startLabel.getLocation(geomIndex,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(startLoc!=jsts.geom.Location.NONE,'Found unlabelled area edge');var currLoc=startLoc;for(var it=this.iterator();it.hasNext();){var e=it.next();var label=e.getLabel();jsts.util.Assert.isTrue(label.isArea(geomIndex),'Found non-area edge');var leftLoc=label.getLocation(geomIndex,jsts.geomgraph.Position.LEFT);var rightLoc=label.getLocation(geomIndex,jsts.geomgraph.Position.RIGHT);if(leftLoc===rightLoc){return false;}
if(rightLoc!==currLoc){return false;}
currLoc=leftLoc;}
return true;};jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(geomIndex){var startLoc=jsts.geom.Location.NONE;for(var it=this.iterator();it.hasNext();){var e=it.next();var label=e.getLabel();if(label.isArea(geomIndex)&&label.getLocation(geomIndex,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE)
startLoc=label.getLocation(geomIndex,jsts.geomgraph.Position.LEFT);}
if(startLoc===jsts.geom.Location.NONE)
return;var currLoc=startLoc;for(var it=this.iterator();it.hasNext();){var e=it.next();var label=e.getLabel();if(label.getLocation(geomIndex,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE)
label.setLocation(geomIndex,jsts.geomgraph.Position.ON,currLoc);if(label.isArea(geomIndex)){var leftLoc=label.getLocation(geomIndex,jsts.geomgraph.Position.LEFT);var rightLoc=label.getLocation(geomIndex,jsts.geomgraph.Position.RIGHT);if(rightLoc!==jsts.geom.Location.NONE){if(rightLoc!==currLoc)
throw new jsts.error.TopologyError('side location conflict',e.getCoordinate());if(leftLoc===jsts.geom.Location.NONE){jsts.util.Assert.shouldNeverReachHere('found single null side (at '+
e.getCoordinate()+')');}
currLoc=leftLoc;}else{jsts.util.Assert.isTrue(label.getLocation(geomIndex,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,'found single null side');label.setLocation(geomIndex,jsts.geomgraph.Position.RIGHT,currLoc);label.setLocation(geomIndex,jsts.geomgraph.Position.LEFT,currLoc);}}}};jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(eSearch){this.iterator();for(var i=0;i<this.edgeList.size();i++){var e=this.edgeList.get(i);if(e===eSearch)
return i;}
return-1;};jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments);};jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar();jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(e){var eb=this.edgeMap.get(e);if(eb===null){eb=new jsts.operation.relate.EdgeEndBundle(e);this.insertEdgeEnd(e,eb);}
else{eb.insert(e);}};jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(im){for(var it=this.iterator();it.hasNext();){var esb=it.next();esb.updateIM(im);}};jsts.index.ArrayListVisitor=function(){this.items=[];};jsts.index.ArrayListVisitor.prototype.visitItem=function(item){this.items.push(item);};jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items;};jsts.algorithm.distance.DistanceToPoint=function(){};jsts.algorithm.distance.DistanceToPoint.computeDistance=function(geom,pt,ptDist){if(geom instanceof jsts.geom.LineString){jsts.algorithm.distance.DistanceToPoint.computeDistance2(geom,pt,ptDist);}else if(geom instanceof jsts.geom.Polygon){jsts.algorithm.distance.DistanceToPoint.computeDistance4(geom,pt,ptDist);}else if(geom instanceof jsts.geom.GeometryCollection){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);jsts.algorithm.distance.DistanceToPoint.computeDistance(g,pt,ptDist);}}else{ptDist.setMinimum(geom.getCoordinate(),pt);}};jsts.algorithm.distance.DistanceToPoint.computeDistance2=function(line,pt,ptDist){var tempSegment=new jsts.geom.LineSegment();var coords=line.getCoordinates();for(var i=0;i<coords.length-1;i++){tempSegment.setCoordinates(coords[i],coords[i+1]);var closestPt=tempSegment.closestPoint(pt);ptDist.setMinimum(closestPt,pt);}};jsts.algorithm.distance.DistanceToPoint.computeDistance3=function(segment,pt,ptDist){var closestPt=segment.closestPoint(pt);ptDist.setMinimum(closestPt,pt);};jsts.algorithm.distance.DistanceToPoint.computeDistance4=function(poly,pt,ptDist){jsts.algorithm.distance.DistanceToPoint.computeDistance2(poly.getExteriorRing(),pt,ptDist);for(var i=0;i<poly.getNumInteriorRing();i++){jsts.algorithm.distance.DistanceToPoint.computeDistance2(poly.getInteriorRingN(i),pt,ptDist);}};jsts.index.strtree.ItemBoundable=function(bounds,item){this.bounds=bounds;this.item=item;};jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable();jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable;jsts.index.strtree.ItemBoundable.prototype.bounds=null;jsts.index.strtree.ItemBoundable.prototype.item=null;jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds;};jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item;};(function(){var ArrayList=javascript.util.ArrayList;var TreeMap=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new ArrayList();this.ocaMap=new TreeMap();};jsts.geomgraph.EdgeList.prototype.edges=null;jsts.geomgraph.EdgeList.prototype.ocaMap=null;jsts.geomgraph.EdgeList.prototype.add=function(e){this.edges.add(e);var oca=new jsts.noding.OrientedCoordinateArray(e.getCoordinates());this.ocaMap.put(oca,e);};jsts.geomgraph.EdgeList.prototype.addAll=function(edgeColl){for(var i=edgeColl.iterator();i.hasNext();){this.add(i.next());}};jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(e){var oca=new jsts.noding.OrientedCoordinateArray(e.getCoordinates());var matchEdge=this.ocaMap.get(oca);return matchEdge;};jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges;};jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator();};jsts.geomgraph.EdgeList.prototype.get=function(i){return this.edges.get(i);};jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(e){for(var i=0;i<this.edges.size();i++){if(this.edges.get(i).equals(e))
return i;}
return-1;};})();jsts.operation.IsSimpleOp=function(geom){this.geom=geom;};jsts.operation.IsSimpleOp.prototype.geom=null;jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=true;jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null;jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(geom){this.geom=geom;};jsts.operation.IsSimpleOp.prototype.isSimple=function(){this.nonSimpleLocation=null;if(this.geom instanceof jsts.geom.LineString){return this.isSimpleLinearGeometry(this.geom);}
if(this.geom instanceof jsts.geom.MultiLineString){return this.isSimpleLinearGeometry(this.geom);}
if(this.geom instanceof jsts.geom.MultiPoint){return this.isSimpleMultiPoint(this.geom);}
return true;};jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(mp){if(mp.isEmpty())
return true;var points=[];for(var i=0;i<mp.getNumGeometries();i++){var pt=mp.getGeometryN(i);var p=pt.getCoordinate();for(var j=0;j<points.length;j++){var point=points[j];if(p.equals2D(point)){this.nonSimpleLocation=p;return false;}}
points.push(p);}
return true;};jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(geom){if(geom.isEmpty())
return true;var graph=new jsts.geomgraph.GeometryGraph(0,geom);var li=new jsts.algorithm.RobustLineIntersector();var si=graph.computeSelfNodes(li,true);if(!si.hasIntersection())
return true;if(si.hasProperIntersection()){this.nonSimpleLocation=si.getProperIntersectionPoint();return false;}
if(this.hasNonEndpointIntersection(graph))
return false;if(this.isClosedEndpointsInInterior){if(this.hasClosedEndpointIntersection(graph))
return false;}
return true;};jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(graph){for(var i=graph.getEdgeIterator();i.hasNext();){var e=i.next();var maxSegmentIndex=e.getMaximumSegmentIndex();for(var eiIt=e.getEdgeIntersectionList().iterator();eiIt.hasNext();){var ei=eiIt.next();if(!ei.isEndPoint(maxSegmentIndex)){this.nonSimpleLocation=ei.getCoordinate();return true;}}}
return false;};jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(graph){var endPoints=new javascript.util.TreeMap();for(var i=graph.getEdgeIterator();i.hasNext();){var e=i.next();var maxSegmentIndex=e.getMaximumSegmentIndex();var isClosed=e.isClosed();var p0=e.getCoordinate(0);this.addEndpoint(endPoints,p0,isClosed);var p1=e.getCoordinate(e.getNumPoints()-1);this.addEndpoint(endPoints,p1,isClosed);}
for(var i=endPoints.values().iterator();i.hasNext();){var eiInfo=i.next();if(eiInfo.isClosed&&eiInfo.degree!=2){this.nonSimpleLocation=eiInfo.getCoordinate();return true;}}
return false;};jsts.operation.IsSimpleOp.EndpointInfo=function(pt){this.pt=pt;this.isClosed=false;this.degree=0;};jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt;};jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(isClosed){this.degree++;this.isClosed=this.isClosed||isClosed;};jsts.operation.IsSimpleOp.prototype.addEndpoint=function(endPoints,p,isClosed){var eiInfo=endPoints.get(p);if(eiInfo===null){eiInfo=new jsts.operation.IsSimpleOp.EndpointInfo(p);endPoints.put(p,eiInfo);}
eiInfo.addEndpoint(isClosed);};(function(){var LineStringSnapper=function(){this.snapTolerance=0.0;this.seg=new jsts.geom.LineSegment();this.allowSnappingToSourceVertices=false;this.isClosed=false;this.srcPts=[];if(arguments[0]instanceof jsts.geom.LineString){this.initFromLine.apply(this,arguments);}else{this.initFromPoints.apply(this,arguments);}};LineStringSnapper.prototype.initFromLine=function(srcLine,snapTolerance){this.initFromPoints(srcLine.getCoordinates(),snapTolerance);};LineStringSnapper.prototype.initFromPoints=function(srcPts,snapTolerance){this.srcPts=srcPts;this.isClosed=this.calcIsClosed(srcPts);this.snapTolerance=snapTolerance;};LineStringSnapper.prototype.setAllowSnappingToSourceVertices=function(allowSnappingToSourceVertices){this.allowSnappingToSourceVertices=allowSnappingToSourceVertices;};LineStringSnapper.prototype.calcIsClosed=function(pts){if(pts.length<=1){return false;}
return pts[0].equals(pts[pts.length-1]);};LineStringSnapper.prototype.snapTo=function(snapPts){var coordList=new jsts.geom.CoordinateList(this.srcPts);this.snapVertices(coordList,snapPts);this.snapSegments(coordList,snapPts);return coordList.toCoordinateArray();};LineStringSnapper.prototype.snapVertices=function(srcCoords,snapPts){var end=this.isClosed?srcCoords.size()-1:srcCoords.size(),i=0,srcPt,snapVert;for(i;i<end;i++){srcPt=srcCoords.get(i);snapVert=this.findSnapForVertex(srcPt,snapPts);if(snapVert!==null){srcCoords.set(i,new jsts.geom.Coordinate(snapVert));if(i===0&&this.isClosed)
srcCoords.set(srcCoords.size()-1,new jsts.geom.Coordinate(snapVert));}}};LineStringSnapper.prototype.findSnapForVertex=function(pt,snapPts){var i=0,il=snapPts.length;for(i=0;i<il;i++){if(pt.equals(snapPts[i])){return null;}
if(pt.distance(snapPts[i])<this.snapTolerance){return snapPts[i];}}
return null;};LineStringSnapper.prototype.snapSegments=function(srcCoords,snapPts){if(snapPts.length===0){return;}
var distinctPtCount=snapPts.length,i,snapPt,index;if(snapPts.length>1&&snapPts[0].equals2D(snapPts[snapPts.length-1])){distinctPtCount=snapPts.length-1;}
i=0;for(i;i<distinctPtCount;i++){snapPt=snapPts[i];index=this.findSegmentIndexToSnap(snapPt,srcCoords);if(index>=0){srcCoords.add(index+1,new jsts.geom.Coordinate(snapPt),false);}}};LineStringSnapper.prototype.findSegmentIndexToSnap=function(snapPt,srcCoords){var minDist=Number.MAX_VALUE,snapIndex=-1,i=0,dist;for(i;i<srcCoords.size()-1;i++){this.seg.p0=srcCoords.get(i);this.seg.p1=srcCoords.get(i+1);if(this.seg.p0.equals(snapPt)||this.seg.p1.equals(snapPt)){if(this.allowSnappingToSourceVertices){continue;}else{return-1;}}
dist=this.seg.distance(snapPt);if(dist<this.snapTolerance&&dist<minDist){minDist=dist;snapIndex=i;}}
return snapIndex;};jsts.operation.overlay.snap.LineStringSnapper=LineStringSnapper;})();(function(){var ArrayList=javascript.util.ArrayList;var GeometryComponentFilter=jsts.geom.GeometryComponentFilter;var LineString=jsts.geom.LineString;var EdgeRing=jsts.operation.polygonize.EdgeRing;var PolygonizeGraph=jsts.operation.polygonize.PolygonizeGraph;var Polygonizer=function(){var that=this;var LineStringAdder=function(){};LineStringAdder.prototype=new GeometryComponentFilter();LineStringAdder.prototype.filter=function(g){if(g instanceof LineString)
that.add(g);};this.lineStringAdder=new LineStringAdder();this.dangles=new ArrayList();this.cutEdges=new ArrayList();this.invalidRingLines=new ArrayList();};Polygonizer.prototype.lineStringAdder=null;Polygonizer.prototype.graph=null;Polygonizer.prototype.dangles=null;Polygonizer.prototype.cutEdges=null;Polygonizer.prototype.invalidRingLines=null;Polygonizer.prototype.holeList=null;Polygonizer.prototype.shellList=null;Polygonizer.prototype.polyList=null;Polygonizer.prototype.add=function(geomList){if(geomList instanceof jsts.geom.LineString){return this.add3(geomList);}else if(geomList instanceof jsts.geom.Geometry){return this.add2(geomList);}
for(var i=geomList.iterator();i.hasNext();){var geometry=i.next();this.add2(geometry);}};Polygonizer.prototype.add2=function(g){g.apply(this.lineStringAdder);};Polygonizer.prototype.add3=function(line){if(this.graph==null)
this.graph=new PolygonizeGraph(line.getFactory());this.graph.addEdge(line);};Polygonizer.prototype.getPolygons=function(){this.polygonize();return this.polyList;};Polygonizer.prototype.getDangles=function(){this.polygonize();return this.dangles;};Polygonizer.prototype.getCutEdges=function(){this.polygonize();return this.cutEdges;};Polygonizer.prototype.getInvalidRingLines=function(){this.polygonize();return this.invalidRingLines;};Polygonizer.prototype.polygonize=function(){if(this.polyList!=null)
return;this.polyList=new ArrayList();if(this.graph==null)
return;this.dangles=this.graph.deleteDangles();this.cutEdges=this.graph.deleteCutEdges();var edgeRingList=this.graph.getEdgeRings();var validEdgeRingList=new ArrayList();this.invalidRingLines=new ArrayList();this.findValidRings(edgeRingList,validEdgeRingList,this.invalidRingLines);this.findShellsAndHoles(validEdgeRingList);Polygonizer.assignHolesToShells(this.holeList,this.shellList);this.polyList=new ArrayList();for(var i=this.shellList.iterator();i.hasNext();){var er=i.next();this.polyList.add(er.getPolygon());}};Polygonizer.prototype.findValidRings=function(edgeRingList,validEdgeRingList,invalidRingList){for(var i=edgeRingList.iterator();i.hasNext();){var er=i.next();if(er.isValid())
validEdgeRingList.add(er);else
invalidRingList.add(er.getLineString());}};Polygonizer.prototype.findShellsAndHoles=function(edgeRingList){this.holeList=new ArrayList();this.shellList=new ArrayList();for(var i=edgeRingList.iterator();i.hasNext();){var er=i.next();if(er.isHole())
this.holeList.add(er);else
this.shellList.add(er);}};Polygonizer.assignHolesToShells=function(holeList,shellList){for(var i=holeList.iterator();i.hasNext();){var holeER=i.next();Polygonizer.assignHoleToShell(holeER,shellList);}};Polygonizer.assignHoleToShell=function(holeER,shellList){var shell=EdgeRing.findEdgeRingContaining(holeER,shellList);if(shell!=null)
shell.addHole(holeER.getRing());};jsts.operation.polygonize.Polygonizer=Polygonizer;})();(function(){var ArrayList=javascript.util.ArrayList;var GeometryTransformer=function(){};GeometryTransformer.prototype.inputGeom=null;GeometryTransformer.prototype.factory=null;GeometryTransformer.prototype.pruneEmptyGeometry=true;GeometryTransformer.prototype.preserveGeometryCollectionType=true;GeometryTransformer.prototype.preserveCollections=false;GeometryTransformer.prototype.reserveType=false;GeometryTransformer.prototype.getInputGeometry=function(){return this.inputGeom;};GeometryTransformer.prototype.transform=function(inputGeom){this.inputGeom=inputGeom;this.factory=inputGeom.getFactory();if(inputGeom instanceof jsts.geom.Point)
return this.transformPoint(inputGeom,null);if(inputGeom instanceof jsts.geom.MultiPoint)
return this.transformMultiPoint(inputGeom,null);if(inputGeom instanceof jsts.geom.LinearRing)
return this.transformLinearRing(inputGeom,null);if(inputGeom instanceof jsts.geom.LineString)
return this.transformLineString(inputGeom,null);if(inputGeom instanceof jsts.geom.MultiLineString)
return this.transformMultiLineString(inputGeom,null);if(inputGeom instanceof jsts.geom.Polygon)
return this.transformPolygon(inputGeom,null);if(inputGeom instanceof jsts.geom.MultiPolygon)
return this.transformMultiPolygon(inputGeom,null);if(inputGeom instanceof jsts.geom.GeometryCollection)
return this.transformGeometryCollection(inputGeom,null);throw new jsts.error.IllegalArgumentException('Unknown Geometry subtype: '+
inputGeom.getClass().getName());};GeometryTransformer.prototype.createCoordinateSequence=function(coords){return this.factory.getCoordinateSequenceFactory().create(coords);};GeometryTransformer.prototype.copy=function(seq){return seq.clone();};GeometryTransformer.prototype.transformCoordinates=function(coords,parent){return this.copy(coords);};GeometryTransformer.prototype.transformPoint=function(geom,parent){return this.factory.createPoint(this.transformCoordinates(geom.getCoordinateSequence(),geom));};GeometryTransformer.prototype.transformMultiPoint=function(geom,parent){var transGeomList=new ArrayList();for(var i=0;i<geom.getNumGeometries();i++){var transformGeom=this.transformPoint(geom.getGeometryN(i),geom);if(transformGeom==null)
continue;if(transformGeom.isEmpty())
continue;transGeomList.add(transformGeom);}
return this.factory.buildGeometry(transGeomList);};GeometryTransformer.prototype.transformLinearRing=function(geom,parent){var seq=this.transformCoordinates(geom.getCoordinateSequence(),geom);var seqSize=seq.length;if(seqSize>0&&seqSize<4&&!this.preserveType)
return this.factory.createLineString(seq);return this.factory.createLinearRing(seq);};GeometryTransformer.prototype.transformLineString=function(geom,parent){return this.factory.createLineString(this.transformCoordinates(geom.getCoordinateSequence(),geom));};GeometryTransformer.prototype.transformMultiLineString=function(geom,parent){var transGeomList=new ArrayList();for(var i=0;i<geom.getNumGeometries();i++){var transformGeom=this.transformLineString(geom.getGeometryN(i),geom);if(transformGeom==null)
continue;if(transformGeom.isEmpty())
continue;transGeomList.add(transformGeom);}
return this.factory.buildGeometry(transGeomList);};GeometryTransformer.prototype.transformPolygon=function(geom,parent){var isAllValidLinearRings=true;var shell=this.transformLinearRing(geom.getExteriorRing(),geom);if(shell==null||!(shell instanceof jsts.geom.LinearRing)||shell.isEmpty())
isAllValidLinearRings=false;var holes=new ArrayList();for(var i=0;i<geom.getNumInteriorRing();i++){var hole=this.transformLinearRing(geom.getInteriorRingN(i),geom);if(hole==null||hole.isEmpty()){continue;}
if(!(hole instanceof jsts.geom.LinearRing))
isAllValidLinearRings=false;holes.add(hole);}
if(isAllValidLinearRings)
return this.factory.createPolygon(shell,holes.toArray());else{var components=new ArrayList();if(shell!=null)
components.add(shell);components.addAll(holes);return this.factory.buildGeometry(components);}};GeometryTransformer.prototype.transformMultiPolygon=function(geom,parent){var transGeomList=new ArrayList();for(var i=0;i<geom.getNumGeometries();i++){var transformGeom=this.transformPolygon(geom.getGeometryN(i),geom);if(transformGeom==null)
continue;if(transformGeom.isEmpty())
continue;transGeomList.add(transformGeom);}
return this.factory.buildGeometry(transGeomList);};GeometryTransformer.prototype.transformGeometryCollection=function(geom,parent){var transGeomList=new ArrayList();for(var i=0;i<geom.getNumGeometries();i++){var transformGeom=this.transform(geom.getGeometryN(i));if(transformGeom==null)
continue;if(this.pruneEmptyGeometry&&transformGeom.isEmpty())
continue;transGeomList.add(transformGeom);}
if(this.preserveGeometryCollectionType)
return this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(transGeomList));return this.factory.buildGeometry(transGeomList);};jsts.geom.util.GeometryTransformer=GeometryTransformer;})();(function(){var LineStringSnapper=jsts.operation.overlay.snap.LineStringSnapper;var PrecisionModel=jsts.geom.PrecisionModel;var TreeSet=javascript.util.TreeSet;var SnapTransformer=function(snapTolerance,snapPts,isSelfSnap){this.snapTolerance=snapTolerance;this.snapPts=snapPts;this.isSelfSnap=isSelfSnap||false;};SnapTransformer.prototype=new jsts.geom.util.GeometryTransformer();SnapTransformer.prototype.snapTolerance=null;SnapTransformer.prototype.snapPts=null;SnapTransformer.prototype.isSelfSnap=false;SnapTransformer.prototype.transformCoordinates=function(coords,parent){var srcPts=coords;var newPts=this.snapLine(srcPts,this.snapPts);return newPts;};SnapTransformer.prototype.snapLine=function(srcPts,snapPts){var snapper=new LineStringSnapper(srcPts,this.snapTolerance);snapper.setAllowSnappingToSourceVertices(this.isSelfSnap);return snapper.snapTo(snapPts);};var GeometrySnapper=function(srcGeom){this.srcGeom=srcGeom;};GeometrySnapper.SNAP_PRECISION_FACTOR=1e-9;GeometrySnapper.computeOverlaySnapTolerance=function(g){if(arguments.length===2){return GeometrySnapper.computeOverlaySnapTolerance2.apply(this,arguments);}
var snapTolerance=this.computeSizeBasedSnapTolerance(g);var pm=g.getPrecisionModel();if(pm.getType()==PrecisionModel.FIXED){var fixedSnapTol=(1/pm.getScale())*2/1.415;if(fixedSnapTol>snapTolerance)
snapTolerance=fixedSnapTol;}
return snapTolerance;};GeometrySnapper.computeSizeBasedSnapTolerance=function(g){var env=g.getEnvelopeInternal();var minDimension=Math.min(env.getHeight(),env.getWidth());var snapTol=minDimension*GeometrySnapper.SNAP_PRECISION_FACTOR;return snapTol;};GeometrySnapper.computeOverlaySnapTolerance2=function(g0,g1){return Math.min(this.computeOverlaySnapTolerance(g0),this.computeOverlaySnapTolerance(g1));};GeometrySnapper.snap=function(g0,g1,snapTolerance){var snapGeom=[];var snapper0=new GeometrySnapper(g0);snapGeom[0]=snapper0.snapTo(g1,snapTolerance);var snapper1=new GeometrySnapper(g1);snapGeom[1]=snapper1.snapTo(snapGeom[0],snapTolerance);return snapGeom;};GeometrySnapper.snapToSelf=function(g0,snapTolerance,cleanResult){var snapper0=new GeometrySnapper(g0);return snapper0.snapToSelf(snapTolerance,cleanResult);};GeometrySnapper.prototype.srcGeom=null;GeometrySnapper.prototype.snapTo=function(snapGeom,snapTolerance){var snapPts=this.extractTargetCoordinates(snapGeom);var snapTrans=new SnapTransformer(snapTolerance,snapPts);return snapTrans.transform(this.srcGeom);};GeometrySnapper.prototype.snapToSelf=function(snapTolerance,cleanResult){var snapPts=this.extractTargetCoordinates(srcGeom);var snapTrans=new SnapTransformer(snapTolerance,snapPts,true);var snappedGeom=snapTrans.transform(srcGeom);var result=snappedGeom;if(cleanResult&&result instanceof Polygonal){result=snappedGeom.buffer(0);}
return result;};GeometrySnapper.prototype.extractTargetCoordinates=function(g){var ptSet=new TreeSet();var pts=g.getCoordinates();for(var i=0;i<pts.length;i++){ptSet.add(pts[i]);}
return ptSet.toArray();};GeometrySnapper.prototype.computeSnapTolerance=function(ringPts){var minSegLen=this.computeMinimumSegmentLength(ringPts);var snapTol=minSegLen/10;return snapTol;};GeometrySnapper.prototype.computeMinimumSegmentLength=function(pts){var minSegLen=Number.MAX_VALUE;for(var i=0;i<pts.length-1;i++){var segLen=pts[i].distance(pts[i+1]);if(segLen<minSegLen)
minSegLen=segLen;}
return minSegLen;};jsts.operation.overlay.snap.GeometrySnapper=GeometrySnapper;})();jsts.algorithm.PointLocator=function(boundaryRule){this.boundaryRule=boundaryRule?boundaryRule:jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;};jsts.algorithm.PointLocator.prototype.boundaryRule=null;jsts.algorithm.PointLocator.prototype.isIn=null;jsts.algorithm.PointLocator.prototype.numBoundaries=null;jsts.algorithm.PointLocator.prototype.intersects=function(p,geom){return this.locate(p,geom)!==jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.locate=function(p,geom){if(geom.isEmpty())
return jsts.geom.Location.EXTERIOR;if(geom instanceof jsts.geom.Point){return this.locate2(p,geom);}else if(geom instanceof jsts.geom.LineString){return this.locate3(p,geom);}else if(geom instanceof jsts.geom.Polygon){return this.locate4(p,geom);}
this.isIn=false;this.numBoundaries=0;this.computeLocation(p,geom);if(this.boundaryRule.isInBoundary(this.numBoundaries))
return jsts.geom.Location.BOUNDARY;if(this.numBoundaries>0||this.isIn)
return jsts.geom.Location.INTERIOR;return jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.computeLocation=function(p,geom){if(geom instanceof jsts.geom.Point||geom instanceof jsts.geom.LineString||geom instanceof jsts.geom.Polygon){this.updateLocationInfo(this.locate(p,geom));}else if(geom instanceof jsts.geom.MultiLineString){var ml=geom;for(var i=0;i<ml.getNumGeometries();i++){var l=ml.getGeometryN(i);this.updateLocationInfo(this.locate(p,l));}}else if(geom instanceof jsts.geom.MultiPolygon){var mpoly=geom;for(var i=0;i<mpoly.getNumGeometries();i++){var poly=mpoly.getGeometryN(i);this.updateLocationInfo(this.locate(p,poly));}}else if(geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.GeometryCollection){for(var i=0;i<geom.getNumGeometries();i++){var part=geom.getGeometryN(i);if(part!==geom){this.computeLocation(p,part);}}}};jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(loc){if(loc===jsts.geom.Location.INTERIOR)
this.isIn=true;if(loc===jsts.geom.Location.BOUNDARY)
this.numBoundaries++;};jsts.algorithm.PointLocator.prototype.locate2=function(p,pt){var ptCoord=pt.getCoordinate();if(ptCoord.equals2D(p))
return jsts.geom.Location.INTERIOR;return jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.locate3=function(p,l){if(!l.getEnvelopeInternal().intersects(p))
return jsts.geom.Location.EXTERIOR;var pt=l.getCoordinates();if(!l.isClosed()){if(p.equals(pt[0])||p.equals(pt[pt.length-1])){return jsts.geom.Location.BOUNDARY;}}
if(jsts.algorithm.CGAlgorithms.isOnLine(p,pt))
return jsts.geom.Location.INTERIOR;return jsts.geom.Location.EXTERIOR;};jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(p,ring){if(!ring.getEnvelopeInternal().intersects(p))
return jsts.geom.Location.EXTERIOR;return jsts.algorithm.CGAlgorithms.locatePointInRing(p,ring.getCoordinates());};jsts.algorithm.PointLocator.prototype.locate4=function(p,poly){if(poly.isEmpty())
return jsts.geom.Location.EXTERIOR;var shell=poly.getExteriorRing();var shellLoc=this.locateInPolygonRing(p,shell);if(shellLoc===jsts.geom.Location.EXTERIOR)
return jsts.geom.Location.EXTERIOR;if(shellLoc===jsts.geom.Location.BOUNDARY)
return jsts.geom.Location.BOUNDARY;for(var i=0;i<poly.getNumInteriorRing();i++){var hole=poly.getInteriorRingN(i);var holeLoc=this.locateInPolygonRing(p,hole);if(holeLoc===jsts.geom.Location.INTERIOR)
return jsts.geom.Location.EXTERIOR;if(holeLoc===jsts.geom.Location.BOUNDARY)
return jsts.geom.Location.BOUNDARY;}
return jsts.geom.Location.INTERIOR;};(function(){var Location=jsts.geom.Location;var ArrayList=javascript.util.ArrayList;var TreeMap=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(nodeFactory){this.nodeMap=new TreeMap();this.nodeFact=nodeFactory;};jsts.geomgraph.NodeMap.prototype.nodeMap=null;jsts.geomgraph.NodeMap.prototype.nodeFact=null;jsts.geomgraph.NodeMap.prototype.addNode=function(arg){var node,coord;if(arg instanceof jsts.geom.Coordinate){coord=arg;node=this.nodeMap.get(coord);if(node===null){node=this.nodeFact.createNode(coord);this.nodeMap.put(coord,node);}
return node;}else if(arg instanceof jsts.geomgraph.Node){var n=arg;coord=n.getCoordinate();node=this.nodeMap.get(coord);if(node===null){this.nodeMap.put(coord,n);return n;}
node.mergeLabel(n);return node;}};jsts.geomgraph.NodeMap.prototype.add=function(e){var p=e.getCoordinate();var n=this.addNode(p);n.add(e);};jsts.geomgraph.NodeMap.prototype.find=function(coord){return this.nodeMap.get(coord);};jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values();};jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator();};jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(geomIndex){var bdyNodes=new ArrayList();for(var i=this.iterator();i.hasNext();){var node=i.next();if(node.getLabel().getLocation(geomIndex)===Location.BOUNDARY){bdyNodes.add(node);}}
return bdyNodes;};})();(function(){var ArrayList=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(nodeFactory){this.edges=new ArrayList();this.edgeEndList=new ArrayList();this.nodes=new jsts.geomgraph.NodeMap(nodeFactory||new jsts.geomgraph.NodeFactory());};jsts.geomgraph.PlanarGraph.prototype.edges=null;jsts.geomgraph.PlanarGraph.prototype.nodes=null;jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null;jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(nodes){for(var nodeit=nodes.iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().linkResultDirectedEdges();}};jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator();};jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList;};jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(geomIndex,coord){var node=this.nodes.find(coord);if(node===null)
return false;var label=node.getLabel();if(label!==null&&label.getLocation(geomIndex)===jsts.geom.Location.BOUNDARY)
return true;return false;};jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(e){this.edges.add(e);};jsts.geomgraph.PlanarGraph.prototype.add=function(e){this.nodes.add(e);this.edgeEndList.add(e);};jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator();};jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values();};jsts.geomgraph.PlanarGraph.prototype.addNode=function(node){return this.nodes.addNode(node);};jsts.geomgraph.PlanarGraph.prototype.addEdges=function(edgesToAdd){for(var it=edgesToAdd.iterator();it.hasNext();){var e=it.next();this.edges.add(e);var de1=new jsts.geomgraph.DirectedEdge(e,true);var de2=new jsts.geomgraph.DirectedEdge(e,false);de1.setSym(de2);de2.setSym(de1);this.add(de1);this.add(de2);}};jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var nodeit=this.nodes.iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().linkResultDirectedEdges();}};jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(p0,p1){var i=0,il=this.edges.size(),e,eCoord;for(i;i<il;i++){e=this.edges.get(i);eCoord=e.getCoordinates();if(this.matchInSameDirection(p0,p1,eCoord[0],eCoord[1])){return e;}
if(this.matchInSameDirection(p0,p1,eCoord[eCoord.length-1],eCoord[eCoord.length-2])){return e;}}
return null;};jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(p0,p1,ep0,ep1){if(!p0.equals(ep0)){return false;}
if(jsts.algorithm.CGAlgorithms.computeOrientation(p0,p1,ep1)===jsts.algorithm.CGAlgorithms.COLLINEAR&&jsts.geomgraph.Quadrant.quadrant(p0,p1)===jsts.geomgraph.Quadrant.quadrant(ep0,ep1)){return true;}
return false;};jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(e){for(var i=this.getEdgeEnds().iterator();i.hasNext();){var ee=i.next();if(ee.getEdge()===e){return ee;}}
return null;};})();jsts.noding.SegmentIntersector=function(){};jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc;jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc;(function(){var SegmentIntersector=jsts.noding.SegmentIntersector;var ArrayList=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(li){this.li=li;this.intersections=new ArrayList();this.interiorIntersection=null;};jsts.noding.InteriorIntersectionFinder.prototype=new SegmentIntersector();jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder;jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=false;jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=false;jsts.noding.InteriorIntersectionFinder.prototype.li=null;jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null;jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null;jsts.noding.InteriorIntersectionFinder.prototype.intersections=null;jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(findAllIntersections){this.findAllIntersections=findAllIntersections;};jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections;};jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(isCheckEndSegmentsOnly){this.isCheckEndSegmentsOnly=isCheckEndSegmentsOnly;}
jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return this.interiorIntersection!=null;};jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection;};jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments;};jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(e0,segIndex0,e1,segIndex1){if(this.hasIntersection())
return;if(e0==e1&&segIndex0==segIndex1)
return;if(this.isCheckEndSegmentsOnly){var isEndSegPresent=this.isEndSegment(e0,segIndex0)||isEndSegment(e1,segIndex1);if(!isEndSegPresent)
return;}
var p00=e0.getCoordinates()[segIndex0];var p01=e0.getCoordinates()[segIndex0+1];var p10=e1.getCoordinates()[segIndex1];var p11=e1.getCoordinates()[segIndex1+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){if(this.li.isInteriorIntersection()){this.intSegments=[];this.intSegments[0]=p00;this.intSegments[1]=p01;this.intSegments[2]=p10;this.intSegments[3]=p11;this.interiorIntersection=this.li.getIntersection(0);this.intersections.add(this.interiorIntersection);}}};jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(segStr,index){if(index==0)
return true;if(index>=segStr.size()-2)
return true;return false;};jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){if(this.findAllIntersections)
return false;return this.interiorIntersection!=null;};})();(function(){var RobustLineIntersector=jsts.algorithm.RobustLineIntersector;var InteriorIntersectionFinder=jsts.noding.InteriorIntersectionFinder;var MCIndexNoder=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(segStrings){this.li=new RobustLineIntersector();this.segStrings=segStrings;};jsts.noding.FastNodingValidator.prototype.li=null;jsts.noding.FastNodingValidator.prototype.segStrings=null;jsts.noding.FastNodingValidator.prototype.findAllIntersections=false;jsts.noding.FastNodingValidator.prototype.segInt=null;jsts.noding.FastNodingValidator.prototype._isValid=true;jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(findAllIntersections){this.findAllIntersections=findAllIntersections;};jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections();};jsts.noding.FastNodingValidator.prototype.isValid=function(){this.execute();return this._isValid;};jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)
return'no intersections found';var intSegs=this.segInt.getIntersectionSegments();return'found non-noded intersection between '+
jsts.io.WKTWriter.toLineString(intSegs[0],intSegs[1])+' and '+
jsts.io.WKTWriter.toLineString(intSegs[2],intSegs[3]);};jsts.noding.FastNodingValidator.prototype.checkValid=function(){this.execute();if(!this._isValid)
throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection());};jsts.noding.FastNodingValidator.prototype.execute=function(){if(this.segInt!=null)
return;this.checkInteriorIntersections();};jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=true;this.segInt=new InteriorIntersectionFinder(this.li);this.segInt.setFindAllIntersections(this.findAllIntersections);var noder=new MCIndexNoder();noder.setSegmentIntersector(this.segInt);noder.computeNodes(this.segStrings);if(this.segInt.hasIntersection()){this._isValid=false;return;}};})();(function(){jsts.noding.BasicSegmentString=function(pts,data){this.pts=pts;this.data=data;};jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString();jsts.noding.BasicSegmentString.prototype.pts=null;jsts.noding.BasicSegmentString.prototype.data=null;jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data;}
jsts.noding.BasicSegmentString.prototype.setData=function(data){this.data=data;};jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length;};jsts.noding.BasicSegmentString.prototype.getCoordinate=function(i){return this.pts[i];};jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts;};jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(index){if(index==this.pts.length-1)
return-1;return jsts.noding.Octant.octant(this.getCoordinate(index),this.getCoordinate(index+1));};})();(function(){var FastNodingValidator=jsts.noding.FastNodingValidator;var BasicSegmentString=jsts.noding.BasicSegmentString;var ArrayList=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(edges){this.nv=new FastNodingValidator(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(edges));};jsts.geomgraph.EdgeNodingValidator.checkValid=function(edges){var validator=new jsts.geomgraph.EdgeNodingValidator(edges);validator.checkValid();};jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(edges){var segStrings=new ArrayList();for(var i=edges.iterator();i.hasNext();){var e=i.next();segStrings.add(new BasicSegmentString(e.getCoordinates(),e));}
return segStrings;};jsts.geomgraph.EdgeNodingValidator.prototype.nv=null;jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid();};})();jsts.operation.GeometryGraphOperation=function(g0,g1,boundaryNodeRule){this.li=new jsts.algorithm.RobustLineIntersector();this.arg=[];if(g0===undefined){return;}
if(g1===undefined){this.setComputationPrecision(g0.getPrecisionModel());this.arg[0]=new jsts.geomgraph.GeometryGraph(0,g0);return;}
boundaryNodeRule=boundaryNodeRule||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;if(g0.getPrecisionModel().compareTo(g1.getPrecisionModel())>=0)
this.setComputationPrecision(g0.getPrecisionModel());else
this.setComputationPrecision(g1.getPrecisionModel());this.arg[0]=new jsts.geomgraph.GeometryGraph(0,g0,boundaryNodeRule);this.arg[1]=new jsts.geomgraph.GeometryGraph(1,g1,boundaryNodeRule);};jsts.operation.GeometryGraphOperation.prototype.li=null;jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null;jsts.operation.GeometryGraphOperation.prototype.arg=null;jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(i){return arg[i].getGeometry();};jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(pm){this.resultPrecisionModel=pm;this.li.setPrecisionModel(this.resultPrecisionModel);};jsts.operation.overlay.OverlayNodeFactory=function(){};jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory();jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory;jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(coord){return new jsts.geomgraph.Node(coord,new jsts.geomgraph.DirectedEdgeStar());};jsts.operation.overlay.PolygonBuilder=function(geometryFactory){this.shellList=[];this.geometryFactory=geometryFactory;};jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null;jsts.operation.overlay.PolygonBuilder.prototype.shellList=null;jsts.operation.overlay.PolygonBuilder.prototype.add=function(graph){if(arguments.length===2){this.add2.apply(this,arguments);return;}
this.add2(graph.getEdgeEnds(),graph.getNodes());};jsts.operation.overlay.PolygonBuilder.prototype.add2=function(dirEdges,nodes){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(nodes);var maxEdgeRings=this.buildMaximalEdgeRings(dirEdges);var freeHoleList=[];var edgeRings=this.buildMinimalEdgeRings(maxEdgeRings,this.shellList,freeHoleList);this.sortShellsAndHoles(edgeRings,this.shellList,freeHoleList);this.placeFreeHoles(this.shellList,freeHoleList);};jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){var resultPolyList=this.computePolygons(this.shellList);return resultPolyList;};jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(dirEdges){var maxEdgeRings=[];for(var it=dirEdges.iterator();it.hasNext();){var de=it.next();if(de.isInResult()&&de.getLabel().isArea()){if(de.getEdgeRing()==null){var er=new jsts.operation.overlay.MaximalEdgeRing(de,this.geometryFactory);maxEdgeRings.push(er);er.setInResult();}}}
return maxEdgeRings;};jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(maxEdgeRings,shellList,freeHoleList){var edgeRings=[];for(var i=0;i<maxEdgeRings.length;i++){var er=maxEdgeRings[i];if(er.getMaxNodeDegree()>2){er.linkDirectedEdgesForMinimalEdgeRings();var minEdgeRings=er.buildMinimalRings();var shell=this.findShell(minEdgeRings);if(shell!==null){this.placePolygonHoles(shell,minEdgeRings);shellList.push(shell);}else{freeHoleList=freeHoleList.concat(minEdgeRings);}}else{edgeRings.push(er);}}
return edgeRings;};jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(minEdgeRings){var shellCount=0;var shell=null;for(var i=0;i<minEdgeRings.length;i++){var er=minEdgeRings[i];if(!er.isHole()){shell=er;shellCount++;}}
jsts.util.Assert.isTrue(shellCount<=1,'found two shells in MinimalEdgeRing list');return shell;};jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(shell,minEdgeRings){for(var i=0;i<minEdgeRings.length;i++){var er=minEdgeRings[i];if(er.isHole()){er.setShell(shell);}}};jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(edgeRings,shellList,freeHoleList){for(var i=0;i<edgeRings.length;i++){var er=edgeRings[i];if(er.isHole()){freeHoleList.push(er);}else{shellList.push(er);}}};jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(shellList,freeHoleList){for(var i=0;i<freeHoleList.length;i++){var hole=freeHoleList[i];if(hole.getShell()==null){var shell=this.findEdgeRingContaining(hole,shellList);if(shell===null)
throw new jsts.error.TopologyError('unable to assign hole to a shell',hole.getCoordinate(0));hole.setShell(shell);}}};jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(testEr,shellList){var testRing=testEr.getLinearRing();var testEnv=testRing.getEnvelopeInternal();var testPt=testRing.getCoordinateN(0);var minShell=null;var minEnv=null;for(var i=0;i<shellList.length;i++){var tryShell=shellList[i];var tryRing=tryShell.getLinearRing();var tryEnv=tryRing.getEnvelopeInternal();if(minShell!==null)
minEnv=minShell.getLinearRing().getEnvelopeInternal();var isContained=false;if(tryEnv.contains(testEnv)&&jsts.algorithm.CGAlgorithms.isPointInRing(testPt,tryRing.getCoordinates()))
isContained=true;if(isContained){if(minShell==null||minEnv.contains(tryEnv)){minShell=tryShell;}}}
return minShell;};jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(shellList){var resultPolyList=new javascript.util.ArrayList();for(var i=0;i<shellList.length;i++){var er=shellList[i];var poly=er.toPolygon(this.geometryFactory);resultPolyList.add(poly);}
return resultPolyList;};jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(p){for(var i=0;i<this.shellList.length;i++){var er=this.shellList[i];if(er.containsPoint(p))
return true;}
return false;};(function(){var Assert=jsts.util.Assert;var ArrayList=javascript.util.ArrayList;var LineBuilder=function(op,geometryFactory,ptLocator){this.lineEdgesList=new ArrayList();this.resultLineList=new ArrayList();this.op=op;this.geometryFactory=geometryFactory;this.ptLocator=ptLocator;};LineBuilder.prototype.op=null;LineBuilder.prototype.geometryFactory=null;LineBuilder.prototype.ptLocator=null;LineBuilder.prototype.lineEdgesList=null;LineBuilder.prototype.resultLineList=null;LineBuilder.prototype.build=function(opCode){this.findCoveredLineEdges();this.collectLines(opCode);this.buildLines(opCode);return this.resultLineList;};LineBuilder.prototype.findCoveredLineEdges=function(){for(var nodeit=this.op.getGraph().getNodes().iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().findCoveredLineEdges();}
for(var it=this.op.getGraph().getEdgeEnds().iterator();it.hasNext();){var de=it.next();var e=de.getEdge();if(de.isLineEdge()&&!e.isCoveredSet()){var isCovered=this.op.isCoveredByA(de.getCoordinate());e.setCovered(isCovered);}}};LineBuilder.prototype.collectLines=function(opCode){for(var it=this.op.getGraph().getEdgeEnds().iterator();it.hasNext();){var de=it.next();this.collectLineEdge(de,opCode,this.lineEdgesList);this.collectBoundaryTouchEdge(de,opCode,this.lineEdgesList);}};LineBuilder.prototype.collectLineEdge=function(de,opCode,edges){var label=de.getLabel();var e=de.getEdge();if(de.isLineEdge()){if(!de.isVisited()&&jsts.operation.overlay.OverlayOp.isResultOfOp(label,opCode)&&!e.isCovered()){edges.add(e);de.setVisitedEdge(true);}}};LineBuilder.prototype.collectBoundaryTouchEdge=function(de,opCode,edges){var label=de.getLabel();if(de.isLineEdge())
return;if(de.isVisited())
return;if(de.isInteriorAreaEdge())
return;if(de.getEdge().isInResult())
return;Assert.isTrue(!(de.isInResult()||de.getSym().isInResult())||!de.getEdge().isInResult());if(jsts.operation.overlay.OverlayOp.isResultOfOp(label,opCode)&&opCode===jsts.operation.overlay.OverlayOp.INTERSECTION){edges.add(de.getEdge());de.setVisitedEdge(true);}};LineBuilder.prototype.buildLines=function(opCode){for(var it=this.lineEdgesList.iterator();it.hasNext();){var e=it.next();var label=e.getLabel();var line=this.geometryFactory.createLineString(e.getCoordinates());this.resultLineList.add(line);e.setInResult(true);}};LineBuilder.prototype.labelIsolatedLines=function(edgesList){for(var it=edgesList.iterator();it.hasNext();){var e=it.next();var label=e.getLabel();if(e.isIsolated()){if(label.isNull(0))
this.labelIsolatedLine(e,0);else
this.labelIsolatedLine(e,1);}}};LineBuilder.prototype.labelIsolatedLine=function(e,targetIndex){var loc=ptLocator.locate(e.getCoordinate(),op.getArgGeometry(targetIndex));e.getLabel().setLocation(targetIndex,loc);};jsts.operation.overlay.LineBuilder=LineBuilder;})();(function(){var ArrayList=javascript.util.ArrayList;var PointBuilder=function(op,geometryFactory,ptLocator){this.resultPointList=new ArrayList();this.op=op;this.geometryFactory=geometryFactory;};PointBuilder.prototype.op=null;PointBuilder.prototype.geometryFactory=null;PointBuilder.prototype.resultPointList=null;PointBuilder.prototype.build=function(opCode){this.extractNonCoveredResultNodes(opCode);return this.resultPointList;};PointBuilder.prototype.extractNonCoveredResultNodes=function(opCode){for(var nodeit=this.op.getGraph().getNodes().iterator();nodeit.hasNext();){var n=nodeit.next();if(n.isInResult())
continue;if(n.isIncidentEdgeInResult())
continue;if(n.getEdges().getDegree()===0||opCode===jsts.operation.overlay.OverlayOp.INTERSECTION){var label=n.getLabel();if(jsts.operation.overlay.OverlayOp.isResultOfOp(label,opCode)){this.filterCoveredNodeToPoint(n);}}}};PointBuilder.prototype.filterCoveredNodeToPoint=function(n){var coord=n.getCoordinate();if(!this.op.isCoveredByLA(coord)){var pt=this.geometryFactory.createPoint(coord);this.resultPointList.add(pt);}};jsts.operation.overlay.PointBuilder=PointBuilder;})();(function(){var PointLocator=jsts.algorithm.PointLocator;var Location=jsts.geom.Location;var EdgeList=jsts.geomgraph.EdgeList;var Label=jsts.geomgraph.Label;var PlanarGraph=jsts.geomgraph.PlanarGraph;var Position=jsts.geomgraph.Position;var EdgeNodingValidator=jsts.geomgraph.EdgeNodingValidator;var GeometryGraphOperation=jsts.operation.GeometryGraphOperation;var OverlayNodeFactory=jsts.operation.overlay.OverlayNodeFactory;var PolygonBuilder=jsts.operation.overlay.PolygonBuilder;var LineBuilder=jsts.operation.overlay.LineBuilder;var PointBuilder=jsts.operation.overlay.PointBuilder;var Assert=jsts.util.Assert;var ArrayList=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(g0,g1){this.ptLocator=new PointLocator();this.edgeList=new EdgeList();this.resultPolyList=new ArrayList();this.resultLineList=new ArrayList();this.resultPointList=new ArrayList();GeometryGraphOperation.call(this,g0,g1);this.graph=new PlanarGraph(new OverlayNodeFactory());this.geomFact=g0.getFactory();};jsts.operation.overlay.OverlayOp.prototype=new GeometryGraphOperation();jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp;jsts.operation.overlay.OverlayOp.INTERSECTION=1;jsts.operation.overlay.OverlayOp.UNION=2;jsts.operation.overlay.OverlayOp.DIFFERENCE=3;jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4;jsts.operation.overlay.OverlayOp.overlayOp=function(geom0,geom1,opCode){var gov=new jsts.operation.overlay.OverlayOp(geom0,geom1);var geomOv=gov.getResultGeometry(opCode);return geomOv;}
jsts.operation.overlay.OverlayOp.isResultOfOp=function(label,opCode){if(arguments.length===3){return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments);}
var loc0=label.getLocation(0);var loc1=label.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(loc0,loc1,opCode);}
jsts.operation.overlay.OverlayOp.isResultOfOp2=function(loc0,loc1,opCode){if(loc0==Location.BOUNDARY)
loc0=Location.INTERIOR;if(loc1==Location.BOUNDARY)
loc1=Location.INTERIOR;switch(opCode){case jsts.operation.overlay.OverlayOp.INTERSECTION:return loc0==Location.INTERIOR&&loc1==Location.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return loc0==Location.INTERIOR||loc1==Location.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return loc0==Location.INTERIOR&&loc1!=Location.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return(loc0==Location.INTERIOR&&loc1!=Location.INTERIOR)||(loc0!=Location.INTERIOR&&loc1==Location.INTERIOR);}
return false;}
jsts.operation.overlay.OverlayOp.prototype.ptLocator=null;jsts.operation.overlay.OverlayOp.prototype.geomFact=null;jsts.operation.overlay.OverlayOp.prototype.resultGeom=null;jsts.operation.overlay.OverlayOp.prototype.graph=null;jsts.operation.overlay.OverlayOp.prototype.edgeList=null;jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null;jsts.operation.overlay.OverlayOp.prototype.resultLineList=null;jsts.operation.overlay.OverlayOp.prototype.resultPointList=null;jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(funcCode){this.computeOverlay(funcCode);return this.resultGeom;}
jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph;}
jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(opCode){this.copyPoints(0);this.copyPoints(1);this.arg[0].computeSelfNodes(this.li,false);this.arg[1].computeSelfNodes(this.li,false);this.arg[0].computeEdgeIntersections(this.arg[1],this.li,true);var baseSplitEdges=new ArrayList();this.arg[0].computeSplitEdges(baseSplitEdges);this.arg[1].computeSplitEdges(baseSplitEdges);var splitEdges=baseSplitEdges;this.insertUniqueEdges(baseSplitEdges);this.computeLabelsFromDepths();this.replaceCollapsedEdges();EdgeNodingValidator.checkValid(this.edgeList.getEdges());this.graph.addEdges(this.edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(opCode);this.cancelDuplicateResultEdges();var polyBuilder=new PolygonBuilder(this.geomFact);polyBuilder.add(this.graph);this.resultPolyList=polyBuilder.getPolygons();var lineBuilder=new LineBuilder(this,this.geomFact,this.ptLocator);this.resultLineList=lineBuilder.build(opCode);var pointBuilder=new PointBuilder(this,this.geomFact,this.ptLocator);this.resultPointList=pointBuilder.build(opCode);this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,opCode);}
jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(edges){for(var i=edges.iterator();i.hasNext();){var e=i.next();this.insertUniqueEdge(e);}}
jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(e){var existingEdge=this.edgeList.findEqualEdge(e);if(existingEdge!==null){var existingLabel=existingEdge.getLabel();var labelToMerge=e.getLabel();if(!existingEdge.isPointwiseEqual(e)){labelToMerge=new Label(e.getLabel());labelToMerge.flip();}
var depth=existingEdge.getDepth();if(depth.isNull()){depth.add(existingLabel);}
depth.add(labelToMerge);existingLabel.merge(labelToMerge);}else{this.edgeList.add(e);}};jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var it=this.edgeList.iterator();it.hasNext();){var e=it.next();var lbl=e.getLabel();var depth=e.getDepth();if(!depth.isNull()){depth.normalize();for(var i=0;i<2;i++){if(!lbl.isNull(i)&&lbl.isArea()&&!depth.isNull(i)){if(depth.getDelta(i)==0){lbl.toLine(i);}else{Assert.isTrue(!depth.isNull(i,Position.LEFT),'depth of LEFT side has not been initialized');lbl.setLocation(i,Position.LEFT,depth.getLocation(i,Position.LEFT));Assert.isTrue(!depth.isNull(i,Position.RIGHT),'depth of RIGHT side has not been initialized');lbl.setLocation(i,Position.RIGHT,depth.getLocation(i,Position.RIGHT));}}}}}}
jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){var newEdges=new ArrayList();for(var it=this.edgeList.iterator();it.hasNext();){var e=it.next();if(e.isCollapsed()){it.remove();newEdges.add(e.getCollapsedEdge());}}
this.edgeList.addAll(newEdges);}
jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(argIndex){for(var i=this.arg[argIndex].getNodeIterator();i.hasNext();){var graphNode=i.next();var newNode=this.graph.addNode(graphNode.getCoordinate());newNode.setLabel(argIndex,graphNode.getLabel().getLocation(argIndex));}}
jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var nodeit=this.graph.getNodes().iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().computeLabelling(this.arg);}
this.mergeSymLabels();this.updateNodeLabelling();}
jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var nodeit=this.graph.getNodes().iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().mergeSymLabels();}}
jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var nodeit=this.graph.getNodes().iterator();nodeit.hasNext();){var node=nodeit.next();var lbl=node.getEdges().getLabel();node.getLabel().merge(lbl);}}
jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){var nodeCount=0;for(var ni=this.graph.getNodes().iterator();ni.hasNext();){var n=ni.next();var label=n.getLabel();if(n.isIsolated()){nodeCount++;if(label.isNull(0))
this.labelIncompleteNode(n,0);else
this.labelIncompleteNode(n,1);}
n.getEdges().updateLabelling(label);}};jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(n,targetIndex){var loc=this.ptLocator.locate(n.getCoordinate(),this.arg[targetIndex].getGeometry());n.getLabel().setLocation(targetIndex,loc);};jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(opCode){for(var it=this.graph.getEdgeEnds().iterator();it.hasNext();){var de=it.next();var label=de.getLabel();if(label.isArea()&&!de.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(label.getLocation(0,Position.RIGHT),label.getLocation(1,Position.RIGHT),opCode)){de.setInResult(true);}}};jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var it=this.graph.getEdgeEnds().iterator();it.hasNext();){var de=it.next();var sym=de.getSym();if(de.isInResult()&&sym.isInResult()){de.setInResult(false);sym.setInResult(false);}}};jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(coord){if(this.isCovered(coord,this.resultLineList))
return true;if(this.isCovered(coord,this.resultPolyList))
return true;return false;};jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(coord){if(this.isCovered(coord,this.resultPolyList))
return true;return false;};jsts.operation.overlay.OverlayOp.prototype.isCovered=function(coord,geomList){for(var it=geomList.iterator();it.hasNext();){var geom=it.next();var loc=this.ptLocator.locate(coord,geom);if(loc!=Location.EXTERIOR)
return true;}
return false;};jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(resultPointList,resultLineList,resultPolyList,opcode){var geomList=new ArrayList();geomList.addAll(resultPointList);geomList.addAll(resultLineList);geomList.addAll(resultPolyList);return this.geomFact.buildGeometry(geomList);};jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(opCode){var result=null;switch(resultDimension(opCode,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case-1:result=geomFact.createGeometryCollection();break;case 0:result=geomFact.createPoint(null);break;case 1:result=geomFact.createLineString(null);break;case 2:result=geomFact.createPolygon(null,null);break;}
return result;};jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(opCode,g0,g1){var dim0=g0.getDimension();var dim1=g1.getDimension();var resultDimension=-1;switch(opCode){case jsts.operation.overlay.OverlayOp.INTERSECTION:resultDimension=Math.min(dim0,dim1);break;case jsts.operation.overlay.OverlayOp.UNION:resultDimension=Math.max(dim0,dim1);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:resultDimension=dim0;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:resultDimension=Math.max(dim0,dim1);break;}
return resultDimension;};})();(function(){var OverlayOp=jsts.operation.overlay.OverlayOp;var GeometrySnapper=jsts.operation.overlay.snap.GeometrySnapper;var SnapOverlayOp=function(g1,g2){this.geom=[];this.geom[0]=g1;this.geom[1]=g2;this.computeSnapTolerance();};SnapOverlayOp.overlayOp=function(g0,g1,opCode){var op=new SnapOverlayOp(g0,g1);return op.getResultGeometry(opCode);};SnapOverlayOp.intersection=function(g0,g1){return this.overlayOp(g0,g1,OverlayOp.INTERSECTION);};SnapOverlayOp.union=function(g0,g1){return this.overlayOp(g0,g1,OverlayOp.UNION);};SnapOverlayOp.difference=function(g0,g1){return overlayOp(g0,g1,OverlayOp.DIFFERENCE);};SnapOverlayOp.symDifference=function(g0,g1){return overlayOp(g0,g1,OverlayOp.SYMDIFFERENCE);};SnapOverlayOp.prototype.geom=null;SnapOverlayOp.prototype.snapTolerance=null;SnapOverlayOp.prototype.computeSnapTolerance=function(){this.snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this.geom[0],this.geom[1]);};SnapOverlayOp.prototype.getResultGeometry=function(opCode){var prepGeom=this.snap(this.geom);var result=OverlayOp.overlayOp(prepGeom[0],prepGeom[1],opCode);return this.prepareResult(result);};SnapOverlayOp.prototype.selfSnap=function(geom){var snapper0=new GeometrySnapper(geom);var snapGeom=snapper0.snapTo(geom,this.snapTolerance);return snapGeom;};SnapOverlayOp.prototype.snap=function(geom){var remGeom=geom;var snapGeom=GeometrySnapper.snap(remGeom[0],remGeom[1],this.snapTolerance);return snapGeom;};SnapOverlayOp.prototype.prepareResult=function(geom){return geom;};SnapOverlayOp.prototype.cbr=null;SnapOverlayOp.prototype.removeCommonBits=function(geom){this.cbr=new jsts.precision.CommonBitsRemover();this.cbr.add(this.geom[0]);this.cbr.add(this.geom[1]);var remGeom=[];remGeom[0]=cbr.removeCommonBits(this.geom[0].clone());remGeom[1]=cbr.removeCommonBits(this.geom[1].clone());return remGeom;};jsts.operation.overlay.snap.SnapOverlayOp=SnapOverlayOp;})();jsts.geomgraph.index.EdgeSetIntersector=function(){};jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(edges,si,testAllSegments){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(edges0,edges1,si){throw new jsts.error.AbstractMethodInvocationError();};jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){this.events=[];};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.events=null;jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.nOverlaps=0;jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections=function(edges,si,testAllSegments){if(si instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return;}
if(testAllSegments){this.addList2(edges,null);}else{this.addList(edges);}
this.computeIntersections3(si);};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections2=function(edges0,edges1,si){this.addList2(edges0,edges0);this.addList2(edges1,edges1);this.computeIntersections3(si);};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.add=function(edge,edgeSet){if(edge instanceof javascript.util.List){this.addList.apply(this,arguments);return;}
var mce=edge.getMonotoneChainEdge();var startIndex=mce.getStartIndexes();for(var i=0;i<startIndex.length-1;i++){var mc=new jsts.geomgraph.index.MonotoneChain(mce,i);var insertEvent=new jsts.geomgraph.index.SweepLineEvent(mce.getMinX(i),mc,edgeSet);this.events.push(insertEvent);this.events.push(new jsts.geomgraph.index.SweepLineEvent(mce.getMaxX(i),insertEvent));}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList=function(edges){for(var i=edges.iterator();i.hasNext();){var edge=i.next();this.add(edge,edge);}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList2=function(edges,edgeSet){for(var i=edges.iterator();i.hasNext();){var edge=i.next();this.add(edge,edgeSet);}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(a,b){return a.compareTo(b);});for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isDelete()){ev.getInsertEvent().setDeleteEventIndex(i);}}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections3=function(si){this.nOverlaps=0;this.prepareEvents();for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isInsert()){this.processOverlaps(i,ev.getDeleteEventIndex(),ev,si);}}};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.processOverlaps=function(start,end,ev0,si){var mc0=ev0.getObject();for(var i=start;i<end;i++){var ev1=this.events[i];if(ev1.isInsert()){var mc1=ev1.getObject();if(!ev0.isSameLabel(ev1)){mc0.computeIntersections(mc1,si);this.nOverlaps++;}}}};jsts.algorithm.locate.SimplePointInAreaLocator=function(geom){this.geom=geom;};jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(p,geom){if(geom.isEmpty())
return jsts.geom.Location.EXTERIOR;if(jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(p,geom))
return jsts.geom.Location.INTERIOR;return jsts.geom.Location.EXTERIOR;};jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(p,geom){if(geom instanceof jsts.geom.Polygon){return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(p,geom);}else if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){for(var i=0;i<geom.geometries.length;i++){var g2=geom.geometries[i];if(g2!==geom)
if(jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(p,g2))
return true;}}
return false;};jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(p,poly){if(poly.isEmpty())
return false;var shell=poly.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(p,shell))
return false;for(var i=0;i<poly.getNumInteriorRing();i++){var hole=poly.getInteriorRingN(i);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(p,hole))
return false;}
return true;};jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(p,ring){if(!ring.getEnvelopeInternal().intersects(p))
return false;return jsts.algorithm.CGAlgorithms.isPointInRing(p,ring.getCoordinates());};jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null;jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(p){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(p,geom);};(function(){var Location=jsts.geom.Location;var Position=jsts.geomgraph.Position;var EdgeEndStar=jsts.geomgraph.EdgeEndStar;var Assert=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this);};jsts.geomgraph.DirectedEdgeStar.prototype=new EdgeEndStar();jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar;jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null;jsts.geomgraph.DirectedEdgeStar.prototype.label=null;jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(ee){var de=ee;this.insertEdgeEnd(de,de);};jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label;};jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){var degree=0;for(var it=this.iterator();it.hasNext();){var de=it.next();if(de.isInResult())
degree++;}
return degree;};jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(er){var degree=0;for(var it=this.iterator();it.hasNext();){var de=it.next();if(de.getEdgeRing()===er)
degree++;}
return degree;};jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var edges=this.getEdges();var size=edges.size();if(size<1)
return null;var de0=edges.get(0);if(size==1)
return de0;var deLast=edges.get(size-1);var quad0=de0.getQuadrant();var quad1=deLast.getQuadrant();if(jsts.geomgraph.Quadrant.isNorthern(quad0)&&jsts.geomgraph.Quadrant.isNorthern(quad1))
return de0;else if(!jsts.geomgraph.Quadrant.isNorthern(quad0)&&!jsts.geomgraph.Quadrant.isNorthern(quad1))
return deLast;else{var nonHorizontalEdge=null;if(de0.getDy()!=0)
return de0;else if(deLast.getDy()!=0)
return deLast;}
Assert.shouldNeverReachHere('found two horizontal edges incident on node');return null;};jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(geom){EdgeEndStar.prototype.computeLabelling.call(this,geom);this.label=new jsts.geomgraph.Label(Location.NONE);for(var it=this.iterator();it.hasNext();){var ee=it.next();var e=ee.getEdge();var eLabel=e.getLabel();for(var i=0;i<2;i++){var eLoc=eLabel.getLocation(i);if(eLoc===Location.INTERIOR||eLoc===Location.BOUNDARY)
this.label.setLocation(i,Location.INTERIOR);}}};jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var it=this.iterator();it.hasNext();){var de=it.next();var label=de.getLabel();label.merge(de.getSym().getLabel());}};jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(nodeLabel){for(var it=this.iterator();it.hasNext();){var de=it.next();var label=de.getLabel();label.setAllLocationsIfNull(0,nodeLabel.getLocation(0));label.setAllLocationsIfNull(1,nodeLabel.getLocation(1));}};jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(this.resultAreaEdgeList!==null)
return this.resultAreaEdgeList;this.resultAreaEdgeList=new javascript.util.ArrayList();for(var it=this.iterator();it.hasNext();){var de=it.next();if(de.isInResult()||de.getSym().isInResult())
this.resultAreaEdgeList.add(de);}
return this.resultAreaEdgeList;};jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1;jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2;jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();var firstOut=null;var incoming=null;var state=this.SCANNING_FOR_INCOMING;for(var i=0;i<this.resultAreaEdgeList.size();i++){var nextOut=this.resultAreaEdgeList.get(i);var nextIn=nextOut.getSym();if(!nextOut.getLabel().isArea())
continue;if(firstOut===null&&nextOut.isInResult())
firstOut=nextOut;switch(state){case this.SCANNING_FOR_INCOMING:if(!nextIn.isInResult())
continue;incoming=nextIn;state=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!nextOut.isInResult())
continue;incoming.setNext(nextOut);state=this.SCANNING_FOR_INCOMING;break;}}
if(state===this.LINKING_TO_OUTGOING){if(firstOut===null)
throw new jsts.error.TopologyError('no outgoing dirEdge found',this.getCoordinate());Assert.isTrue(firstOut.isInResult(),'unable to link last incoming dirEdge');incoming.setNext(firstOut);}};jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(er){var firstOut=null;var incoming=null;var state=this.SCANNING_FOR_INCOMING;for(var i=this.resultAreaEdgeList.size()-1;i>=0;i--){var nextOut=this.resultAreaEdgeList.get(i);var nextIn=nextOut.getSym();if(firstOut===null&&nextOut.getEdgeRing()===er)
firstOut=nextOut;switch(state){case this.SCANNING_FOR_INCOMING:if(nextIn.getEdgeRing()!=er)
continue;incoming=nextIn;state=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(nextOut.getEdgeRing()!==er)
continue;incoming.setNextMin(nextOut);state=this.SCANNING_FOR_INCOMING;break;}}
if(state===this.LINKING_TO_OUTGOING){Assert.isTrue(firstOut!==null,'found null for first outgoing dirEdge');Assert.isTrue(firstOut.getEdgeRing()===er,'unable to link last incoming dirEdge');incoming.setNextMin(firstOut);}};jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();var prevOut=null;var firstIn=null;for(var i=this.edgeList.size()-1;i>=0;i--){var nextOut=this.edgeList.get(i);var nextIn=nextOut.getSym();if(firstIn===null)
firstIn=nextIn;if(prevOut!==null)
nextIn.setNext(prevOut);prevOut=nextOut;}
firstIn.setNext(prevOut);};jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){var startLoc=Location.NONE;for(var it=this.iterator();it.hasNext();){var nextOut=it.next();var nextIn=nextOut.getSym();if(!nextOut.isLineEdge()){if(nextOut.isInResult()){startLoc=Location.INTERIOR;break;}
if(nextIn.isInResult()){startLoc=Location.EXTERIOR;break;}}}
if(startLoc===Location.NONE)
return;var currLoc=startLoc;for(var it=this.iterator();it.hasNext();){var nextOut=it.next();var nextIn=nextOut.getSym();if(nextOut.isLineEdge()){nextOut.getEdge().setCovered(currLoc===Location.INTERIOR);}else{if(nextOut.isInResult())
currLoc=Location.EXTERIOR;if(nextIn.isInResult())
currLoc=Location.INTERIOR;}}};jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(de){if(arguments.length===2){this.computeDepths2.apply(this,arguments);return;}
var edgeIndex=this.findIndex(de);var label=de.getLabel();var startDepth=de.getDepth(Position.LEFT);var targetLastDepth=de.getDepth(Position.RIGHT);var nextDepth=this.computeDepths2(edgeIndex+1,this.edgeList.size(),startDepth);var lastDepth=this.computeDepths2(0,edgeIndex,nextDepth);if(lastDepth!=targetLastDepth)
throw new jsts.error.TopologyError('depth mismatch at '+
de.getCoordinate());};jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(startIndex,endIndex,startDepth){var currDepth=startDepth;for(var i=startIndex;i<endIndex;i++){var nextDe=this.edgeList.get(i);var label=nextDe.getLabel();nextDe.setEdgeDepths(Position.RIGHT,currDepth);currDepth=nextDe.getDepth(Position.LEFT);}
return currDepth;};})();jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate();};jsts.algorithm.CentroidLine.prototype.centSum=null;jsts.algorithm.CentroidLine.prototype.totalLength=0.0;jsts.algorithm.CentroidLine.prototype.add=function(geom){if(geom instanceof Array){this.add2.apply(this,arguments);return;}
if(geom instanceof jsts.geom.LineString){this.add(geom.getCoordinates());}else if(geom instanceof jsts.geom.Polygon){var poly=geom;this.add(poly.getExteriorRing().getCoordinates());for(var i=0;i<poly.getNumInteriorRing();i++){this.add(poly.getInteriorRingN(i).getCoordinates());}}else if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){this.add(gc.getGeometryN(i));}}};jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();cent.x=this.centSum.x/this.totalLength;cent.y=this.centSum.y/this.totalLength;return cent;};jsts.algorithm.CentroidLine.prototype.add2=function(pts){for(var i=0;i<pts.length-1;i++){var segmentLen=pts[i].distance(pts[i+1]);this.totalLength+=segmentLen;var midx=(pts[i].x+pts[i+1].x)/2;this.centSum.x+=segmentLen*midx;var midy=(pts[i].y+pts[i+1].y)/2;this.centSum.y+=segmentLen*midy;}};jsts.index.IntervalSize=function(){};jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50;jsts.index.IntervalSize.isZeroWidth=function(min,max){var width=max-min;if(width===0.0){return true;}
var maxAbs,scaledInterval,level;maxAbs=Math.max(Math.abs(min),Math.abs(max));scaledInterval=width/maxAbs;level=jsts.index.DoubleBits.exponent(scaledInterval);return level<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT;};jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0;jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(edges,si,testAllSegments){if(si instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return;}
this.nOverlaps=0;for(var i0=edges.iterator();i0.hasNext();){var edge0=i0.next();for(var i1=edges.iterator();i1.hasNext();){var edge1=i1.next();if(testAllSegments||edge0!=edge1)
this.computeIntersects(edge0,edge1,si);}}};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(edges0,edges1,si){this.nOverlaps=0;for(var i0=edges0.iterator();i0.hasNext();){var edge0=i0.next();for(var i1=edges1.iterator();i1.hasNext();){var edge1=i1.next();this.computeIntersects(edge0,edge1,si);}}};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(e0,e1,si){var pts0=e0.getCoordinates();var pts1=e1.getCoordinates();var i0,i1;for(i0=0;i0<pts0.length-1;i0++){for(i1=0;i1<pts1.length-1;i1++){si.addIntersections(e0,i0,e1,i1);}}};jsts.geomgraph.Edge=function(pts,label){this.pts=pts;this.label=label;this.eiList=new jsts.geomgraph.EdgeIntersectionList(this);this.depth=new jsts.geomgraph.Depth();};jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent();jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge;jsts.geomgraph.Edge.updateIM=function(label,im){im.setAtLeastIfValid(label.getLocation(0,jsts.geomgraph.Position.ON),label.getLocation(1,jsts.geomgraph.Position.ON),1);if(label.isArea()){im.setAtLeastIfValid(label.getLocation(0,jsts.geomgraph.Position.LEFT),label.getLocation(1,jsts.geomgraph.Position.LEFT),2);im.setAtLeastIfValid(label.getLocation(0,jsts.geomgraph.Position.RIGHT),label.getLocation(1,jsts.geomgraph.Position.RIGHT),2);}};jsts.geomgraph.Edge.prototype.pts=null;jsts.geomgraph.Edge.prototype.env=null;jsts.geomgraph.Edge.prototype.name=null;jsts.geomgraph.Edge.prototype.mce=null;jsts.geomgraph.Edge.prototype._isIsolated=true;jsts.geomgraph.Edge.prototype.depth=null;jsts.geomgraph.Edge.prototype.depthDelta=0;jsts.geomgraph.Edge.prototype.eiList=null;jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length;};jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(this.env===null){this.env=new jsts.geom.Envelope();for(var i=0;i<this.pts.length;i++){this.env.expandToInclude(pts[i]);}}
return env;};jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth;};jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta;};jsts.geomgraph.Edge.prototype.setDepthDelta=function(depthDelta){this.depthDelta=depthDelta;};jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts;};jsts.geomgraph.Edge.prototype.getCoordinate=function(i){if(i===undefined){if(this.pts.length>0){return this.pts[0];}else{return null;}}
return this.pts[i];};jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.geomgraph.Edge.prototype.setIsolated=function(isIsolated){this._isIsolated=isIsolated;};jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated;};jsts.geomgraph.Edge.prototype.addIntersections=function(li,segmentIndex,geomIndex){for(var i=0;i<li.getIntersectionNum();i++){this.addIntersection(li,segmentIndex,geomIndex,i);}};jsts.geomgraph.Edge.prototype.addIntersection=function(li,segmentIndex,geomIndex,intIndex){var intPt=new jsts.geom.Coordinate(li.getIntersection(intIndex));var normalizedSegmentIndex=segmentIndex;var dist=li.getEdgeDistance(geomIndex,intIndex);var nextSegIndex=normalizedSegmentIndex+1;if(nextSegIndex<this.pts.length){var nextPt=this.pts[nextSegIndex];if(intPt.equals2D(nextPt)){normalizedSegmentIndex=nextSegIndex;dist=0.0;}}
var ei=this.eiList.add(intPt,normalizedSegmentIndex,dist);};jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1;};jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList;};jsts.geomgraph.Edge.prototype.getMonotoneChainEdge=function(){if(this.mce==null){this.mce=new jsts.geomgraph.index.MonotoneChainEdge(this);}
return this.mce;};jsts.geomgraph.Edge.prototype.isClosed=function()
{return this.pts[0].equals(this.pts[this.pts.length-1]);};jsts.geomgraph.Edge.prototype.isCollapsed=function()
{if(!this.label.isArea())return false;if(this.pts.length!=3)return false;if(this.pts[0].equals(this.pts[2]))return true;return false;};jsts.geomgraph.Edge.prototype.getCollapsedEdge=function()
{var newPts=[];newPts[0]=this.pts[0];newPts[1]=this.pts[1];var newe=new jsts.geomgraph.Edge(newPts,jsts.geomgraph.Label.toLineLabel(this.label));return newe;};jsts.geomgraph.Edge.prototype.computeIM=function(im){jsts.geomgraph.Edge.updateIM(this.label,im);};jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(e)
{if(this.pts.length!=e.pts.length)return false;for(var i=0;i<this.pts.length;i++){if(!this.pts[i].equals2D(e.pts[i])){return false;}}
return true;};jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError();};jsts.noding.Octant.octant=function(dx,dy){if(dx instanceof jsts.geom.Coordinate){return jsts.noding.Octant.octant2.apply(this,arguments);}
if(dx===0.0&&dy===0.0)
throw new jsts.error.IllegalArgumentError('Cannot compute the octant for point ( '+dx+', '+dy+' )');var adx=Math.abs(dx);var ady=Math.abs(dy);if(dx>=0){if(dy>=0){if(adx>=ady)
return 0;else
return 1;}
else{if(adx>=ady)
return 7;else
return 6;}}
else{if(dy>=0){if(adx>=ady)
return 3;else
return 2;}
else{if(adx>=ady)
return 4;else
return 5;}}};jsts.noding.Octant.octant2=function(p0,p1){var dx=p1.x-p0.x;var dy=p1.y-p0.y;if(dx===0.0&&dy===0.0)
throw new jsts.error.IllegalArgumentError('Cannot compute the octant for two identical points '+p0);return jsts.noding.Octant.octant(dx,dy);};jsts.operation.union.UnionInteracting=function(g0,g1){this.g0=g0;this.g1=g1;this.geomFactory=g0.getFactory();this.interacts0=[];this.interacts1=[];};jsts.operation.union.UnionInteracting.union=function(g0,g1){var uue=new jsts.operation.union.UnionInteracting(g0,g1);return uue.union();};jsts.operation.union.UnionInteracting.prototype.geomFactory=null;jsts.operation.union.UnionInteracting.prototype.g0=null;jsts.operation.union.UnionInteracting.prototype.g1=null;jsts.operation.union.UnionInteracting.prototype.interacts0=null;jsts.operation.union.UnionInteracting.prototype.interacts1=null;jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var int0=this.extractElements(this.g0,this.interacts0,true);var int1=this.extractElements(this.g1,this.interacts1,true);if(int0.isEmpty()||int1.isEmpty()){}
var union=in0.union(int1);var disjoint0=this.extractElements(this.g0,this.interacts0,false);var disjoint1=this.extractElements(this.g1,this.interacts1,false);var overallUnion=jsts.geom.util.GeometryCombiner.combine(union,disjoint0,disjoint1);return overallUnion;};jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(g0,g1){var factory=g0.getFactory();var gColl=factory.createGeometryCollection([g0,g1]);var unionAll=gColl.buffer(0.0);return unionAll;};jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(elem0){if(!elem0){for(var i=0,l=this.g0.getNumGeometries();i<l;i++){var elem=this.g0.getGeometryN(i);this.interacts0[i]=this.computeInteracting(elem);}}
else{var interactsWithAny=false;for(var i=0,l=g1.getNumGeometries();i<l;i++){var elem1=this.g1.getGeometryN(i);var interacts=elem1.getEnvelopeInternal().intersects(elem0.getEnvelopeInternal());if(interacts){this.interacts1[i]=true;interactsWithAny=true;}}
return interactsWithAny;}};jsts.operation.union.UnionInteracting.prototype.extractElements=function(geom,interacts,isInteracting){var extractedGeoms=[];for(var i=0,l=geom.getNumGeometries();i<l;i++){var elem=geom.getGeometryN(i);if(interacts[i]===isInteracting){extractedGeoms.push(elem);}}
return this.geomFactory.buildGeometry(extractedGeoms);};jsts.triangulate.quadedge.TrianglePredicate=function(){};jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(a,b,c,p){var isInCircle=(a.x*a.x+a.y*a.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(b,c,p)-
(b.x*b.x+b.y*b.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(a,c,p)+
(c.x*c.x+c.y*c.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(a,b,p)-
(p.x*p.x+p.y*p.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(a,b,c)>0;return isInCircle;};jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(a,b,c,p){var adx,ady,bdx,bdy,cdx,cdy,abdet,bcdet,cadet,alift,blift,clift,disc;adx=a.x-p.x;ady=a.y-p.y;bdx=b.x-p.x;bdy=b.y-p.y;cdx=c.x-p.x;cdy=c.y-p.y;abdet=adx*bdy-bdx*ady;bcdet=bdx*cdy-cdx*bdy;cadet=cdx*ady-adx*cdy;alift=adx*adx+ady*ady;blift=bdx*bdx+bdy*bdy;clift=cdx*cdx+cdy*cdy;disc=alift*bcdet+blift*cadet+clift*abdet;return disc>0;};jsts.triangulate.quadedge.TrianglePredicate.triArea=function(a,b,c){return(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x);};jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(a,b,c,p){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(a,b,c,p);};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(a,b,c,p){var px,py,ax,ay,bx,by,cx,cy,aTerm,bTerm,cTerm,pTerm,sum,isInCircle;px=jsts.math.DD.valueOf(p.x);py=jsts.math.DD.valueOf(p.y);ax=jsts.math.DD.valueOf(a.x);ay=jsts.math.DD.valueOf(a.y);bx=jsts.math.DD.valueOf(b.x);by=jsts.math.DD.valueOf(b.y);cx=jsts.math.DD.valueOf(c.x);cy=jsts.math.DD.valueOf(c.y);aTerm=(ax.multiply(ax).add(ay.multiply(ay))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(bx,by,cx,cy,px,py));bTerm=(bx.multiply(bx).add(by.multiply(by))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(ax,ay,cx,cy,px,py));cTerm=(cx.multiply(cx).add(cy.multiply(cy))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(ax,ay,bx,by,px,py));pTerm=(px.multiply(px).add(py.multiply(py))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(ax,ay,bx,by,cx,cy));sum=aTerm.subtract(bTerm).add(cTerm).subtract(pTerm);isInCircle=sum.doubleValue()>0;return isInCircle;};jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(ax,ay,bx,by,cx,cy){return(bx.subtract(ax).multiply(cy.subtract(ay)).subtract(by.subtract(ay).multiply(cx.subtract(ax))));};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(a,b,c,p){var aTerm,bTerm,cTerm,pTerm,sum,isInCircle;aTerm=(jsts.math.DD.sqr(a.x).selfAdd(jsts.math.DD.sqr(a.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(b,c,p));bTerm=(jsts.math.DD.sqr(b.x).selfAdd(jsts.math.DD.sqr(b.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(a,c,p));cTerm=(jsts.math.DD.sqr(c.x).selfAdd(jsts.math.DD.sqr(c.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(a,b,p));pTerm=(jsts.math.DD.sqr(p.x).selfAdd(jsts.math.DD.sqr(p.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(a,b,c));sum=aTerm.selfSubtract(bTerm).selfAdd(cTerm).selfSubtract(pTerm);isInCircle=sum.doubleValue()>0;return isInCircle;};jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(a,b,c){var t1,t2;t1=jsts.math.DD.valueOf(b.x).selfSubtract(a.x).selfMultiply(jsts.math.DD.valueOf(c.y).selfSubtract(a.y));t2=jsts.math.DD.valueOf(b.y).selSubtract(a.y).selfMultiply(jsts.math.DD.valueOf(c.x).selfSubtract(a.x));return t1.selfSubtract(t2);};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(a,b,c,p){var adx,ady,bdx,bdy,cdx,cdy,abdet,bcdet,cadet,alift,blift,clift,sum,isInCircle;adx=jsts.math.DD.valueOf(a.x).selfSubtract(p.x);ady=jsts.math.DD.valueOf(a.y).selfSubtract(p.y);bdx=jsts.math.DD.valueOf(b.x).selfSubtract(p.x);bdx=jsts.math.DD.valueOf(b.y).selfSubtract(p.y);cdx=jsts.math.DD.valueOf(c.x).selfSubtract(p.x);cdx=jsts.math.DD.valueOf(c.y).selfSubtract(p.y);abdet=adx.multiply(bdy).selfSubtract(bdx.multiply(ady));bcdet=bdx.multiply(cdy).selfSubtract(cdx.multiply(bdy));cadet=cdx.multiply(ady).selfSubtract(adx.multiply(cdy));alift=adx.multiply(adx).selfAdd(ady.multiply(ady));blift=bdx.multiply(bdx).selfAdd(bdy.multiply(bdy));clift=cdx.multiply(cdx).selfAdd(cdy.multiply(cdy));sum=alift.selfMultiply(bcdet).selfAdd(blift.selfMultiply(cadet)).selfAdd(clift.selfMultiply(abdet));isInCircle=sum.doubleValue()>0;return isInCircle;};jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(a,b,c,p){var cc,ccRadius,pRadiusDiff;cc=jsts.geom.Triangle.circumcentre(a,b,c);ccRadius=a.distance(cc);pRadiusDiff=p.distance(cc)-ccRadius;return pRadiusDiff<=0;};jsts.operation.union.PointGeometryUnion=function(pointGeom,otherGeom){this.pointGeom=pointGeom;this.otherGeom=otherGeom;this.geomFact=otherGeom.getFactory();};jsts.operation.union.PointGeometryUnion.union=function(pointGeom,otherGeom){var unioner=new jsts.operation.union.PointGeometryUnion(pointGeom,otherGeom);return unioner.union();};jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null;jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null;jsts.operation.union.PointGeometryUnion.prototype.geomFact=null;jsts.operation.union.PointGeometryUnion.prototype.union=function(){var locator=new jsts.algorithm.PointLocator();var exteriorCoords=[];for(var i=0,l=this.pointGeom.getNumGeometries();i<l;i++){var point=this.pointGeom.getGeometryN(i);var coord=point.getCoordinate();var loc=locator.locate(coord,this.otherGeom);if(loc===jsts.geom.Location.EXTERIOR){var include=true;for(var j=exteriorCoords.length;i--;){if(exteriorCoords[j].equals(coord)){include=false;break;}}
if(include){exteriorCoords.push(coord);}}}
exteriorCoords.sort(function(x,y){return x.compareTo(y);});if(exteriorCoords.length===0){return this.otherGeom;}
var ptComp=null;var coords=jsts.geom.CoordinateArrays.toCoordinateArray(exteriorCoords);if(coords.length===1){ptComp=this.geomFact.createPoint(coords[0]);}
else{ptComp=this.geomFact.createMultiPoint(coords);}
return jsts.geom.util.GeometryCombiner.combine(ptComp,this.otherGeom);};jsts.noding.IntersectionFinderAdder=function(li){this.li=li;this.interiorIntersections=new javascript.util.ArrayList();};jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector();jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder;jsts.noding.IntersectionFinderAdder.prototype.li=null;jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null;jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections;};jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(e0,segIndex0,e1,segIndex1){if(e0===e1&&segIndex0===segIndex1)
return;var p00=e0.getCoordinates()[segIndex0];var p01=e0.getCoordinates()[segIndex0+1];var p10=e1.getCoordinates()[segIndex1];var p11=e1.getCoordinates()[segIndex1+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){if(this.li.isInteriorIntersection()){for(var intIndex=0;intIndex<this.li.getIntersectionNum();intIndex++){this.interiorIntersections.add(this.li.getIntersection(intIndex));}
e0.addIntersections(this.li,segIndex0,0);e1.addIntersections(this.li,segIndex1,1);}}};jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return false;};jsts.noding.snapround.MCIndexSnapRounder=function(pm){this.pm=pm;this.li=new jsts.algorithm.RobustLineIntersector();this.li.setPrecisionModel(pm);this.scaleFactor=pm.getScale();};jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder();jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder;jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings);};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(inputSegmentStrings){this.nodedSegStrings=inputSegmentStrings;this.noder=new jsts.noding.MCIndexNoder();this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex());this.snapRound(inputSegmentStrings,this.li);};jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(segStrings,li){var intersections=this.findInteriorIntersections(segStrings,li);this.computeIntersectionSnaps(intersections);this.computeVertexSnaps(segStrings);};jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(segStrings,li){var intFinderAdder=new jsts.noding.IntersectionFinderAdder(li);this.noder.setSegmentIntersector(intFinderAdder);this.noder.computeNodes(segStrings);return intFinderAdder.getInteriorIntersections();};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(snapPts){for(var it=snapPts.iterator();it.hasNext();){var snapPt=it.next();var hotPixel=new jsts.noding.snapround.HotPixel(snapPt,this.scaleFactor,this.li);this.pointSnapper.snap(hotPixel);}};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(edges){if(edges instanceof jsts.noding.NodedSegmentString){this.computeVertexSnaps2.apply(this,arguments);return;}
for(var i0=edges.iterator();i0.hasNext();){var edge0=i0.next();this.computeVertexSnaps(edge0);}};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(e){var pts0=e.getCoordinates();for(var i=0;i<pts0.length-1;i++){var hotPixel=new jsts.noding.snapround.HotPixel(pts0[i],this.scaleFactor,this.li);var isNodeAdded=this.pointSnapper.snap(hotPixel,e,i);if(isNodeAdded){e.addIntersection(pts0[i],i);}}};jsts.operation.valid.ConnectedInteriorTester=function(geomGraph){this.geomGraph=geomGraph;this.geometryFactory=new jsts.geom.GeometryFactory();this.disconnectedRingcoord=null;};jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(coord,pt){var i=0,il=coord.length;for(i;i<il;i++){if(!coord[i].equals(pt))
return coord[i];}
return null;};jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord;};jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var splitEdges=new javascript.util.ArrayList();this.geomGraph.computeSplitEdges(splitEdges);var graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory());graph.addEdges(splitEdges);this.setInteriorEdgesInResult(graph);graph.linkResultDirectedEdges();var edgeRings=this.buildEdgeRings(graph.getEdgeEnds());this.visitShellInteriors(this.geomGraph.getGeometry(),graph);return!this.hasUnvisitedShellEdge(edgeRings);};jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(graph){var it=graph.getEdgeEnds().iterator(),de;while(it.hasNext()){de=it.next();if(de.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){de.setInResult(true);}}};jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(dirEdges){var edgeRings=new javascript.util.ArrayList();for(var it=dirEdges.iterator();it.hasNext();){var de=it.next();if(de.isInResult()&&de.getEdgeRing()==null){var er=new jsts.operation.overlay.MaximalEdgeRing(de,this.geometryFactory);er.linkDirectedEdgesForMinimalEdgeRings();var minEdgeRings=er.buildMinimalRings();var i=0,il=minEdgeRings.length;for(i;i<il;i++){edgeRings.add(minEdgeRings[i]);}}}
return edgeRings;};jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(g,graph){if(g instanceof jsts.geom.Polygon){var p=g;this.visitInteriorRing(p.getExteriorRing(),graph);}
if(g instanceof jsts.geom.MultiPolygon){var mp=g;for(var i=0;i<mp.getNumGeometries();i++){var p=mp.getGeometryN(i);this.visitInteriorRing(p.getExteriorRing(),graph);}}};jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(ring,graph){var pts=ring.getCoordinates();var pt0=pts[0];var pt1=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(pts,pt0);var e=graph.findEdgeInSameDirection(pt0,pt1);var de=graph.findEdgeEnd(e);var intDe=null;if(de.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){intDe=de;}else if(de.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){intDe=de.getSym();}
this.visitLinkedDirectedEdges(intDe);};jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(start){var startDe=start;var de=start;do{de.setVisited(true);de=de.getNext();}while(de!=startDe);};jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(edgeRings){for(var i=0;i<edgeRings.size();i++){var er=edgeRings.get(i);if(er.isHole()){continue;}
var edges=er.getEdges();var de=edges[0];if(de.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)!=jsts.geom.Location.INTERIOR){continue;}
for(var j=0;j<edges.length;j++){de=edges[j];if(!de.isVisited()){disconnectedRingcoord=de.getCoordinate();return true;}}}
return false;};jsts.algorithm.InteriorPointLine=function(geometry){this.centroid;this.minDistance=Number.MAX_VALUE;this.interiorPoint=null;this.centroid=geometry.getCentroid().getCoordinate();this.addInterior(geometry);if(this.interiorPoint==null){this.addEndpoints(geometry);}};jsts.algorithm.InteriorPointLine.prototype.getInteriorPoint=function(){return this.interiorPoint;};jsts.algorithm.InteriorPointLine.prototype.addInterior=function(geometry){if(geometry instanceof jsts.geom.LineString){this.addInteriorCoord(geometry.getCoordinates());}else if(geometry instanceof jsts.geom.GeometryCollection){for(var i=0;i<geometry.getNumGeometries();i++){this.addInterior(geometry.getGeometryN(i));}}};jsts.algorithm.InteriorPointLine.prototype.addInteriorCoord=function(pts){for(var i=1;i<pts.length-1;i++){this.add(pts[i]);}};jsts.algorithm.InteriorPointLine.prototype.addEndpoints=function(geometry){if(geometry instanceof jsts.geom.LineString){this.addEndpointsCoord(geometry.getCoordinates());}else if(geometry instanceof jsts.geom.GeometryCollection){for(var i=0;i<geometry.getNumGeometries();i++){this.addEndpoints(geometry.getGeometryN(i));}}};jsts.algorithm.InteriorPointLine.prototype.addEndpointsCoord=function(pts){this.add(pts[0]);this.add(pts[pts.length-1]);};jsts.algorithm.InteriorPointLine.prototype.add=function(point){var dist=point.distance(this.centroid);if(dist<this.minDistance){this.interiorPoint=new jsts.geom.Coordinate(point);this.minDistance=dist;}};jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope();this.selectedSegment=new jsts.geom.LineSegment();};jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null;jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null;jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(mc,start){mc.getLineSegment(start,this.selectedSegment);this.select2(this.selectedSegment);};jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(seg){};jsts.algorithm.MCPointInRing=function(ring){this.ring=ring;this.tree=null;this.crossings=0;this.interval=new jsts.index.bintree.Interval();this.buildIndex();};jsts.algorithm.MCPointInRing.MCSelecter=function(p,parent){this.parent=parent;this.p=p;};jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction;jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter;jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(ls){this.parent.testLineSegment.apply(this.parent,[this.p,ls]);};jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree();var pts=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates());var mcList=jsts.index.chain.MonotoneChainBuilder.getChains(pts);for(var i=0;i<mcList.length;i++){var mc=mcList[i];var mcEnv=mc.getEnvelope();this.interval.min=mcEnv.getMinY();this.interval.max=mcEnv.getMaxY();this.tree.insert(this.interval,mc);}};jsts.algorithm.MCPointInRing.prototype.isInside=function(pt){this.crossings=0;var rayEnv=new jsts.geom.Envelope(-Number.MAX_VALUE,Number.MAX_VALUE,pt.y,pt.y);this.interval.min=pt.y;this.interval.max=pt.y;var segs=this.tree.query(this.interval);var mcSelecter=new jsts.algorithm.MCPointInRing.MCSelecter(pt,this);for(var i=segs.iterator();i.hasNext();){var mc=i.next();this.testMonotoneChain(rayEnv,mcSelecter,mc);}
if((this.crossings%2)==1){return true;}
return false;};jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(rayEnv,mcSelecter,mc){mc.select(rayEnv,mcSelecter);};jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(p,seg){var xInt,x1,y1,x2,y2,p1,p2;p1=seg.p0;p2=seg.p1;x1=p1.x-p.x;y1=p1.y-p.y;x2=p2.x-p.x;y2=p2.y-p.y;if(((y1>0)&&(y2<=0))||((y2>0)&&(y1<=0))){xInt=jsts.algorithm.RobustDeterminant.signOfDet2x2(x1,y1,x2,y2)/(y2-y1);if(0.0<xInt){this.crossings++;}}};jsts.operation.valid.TopologyValidationError=function(errorType,pt){this.errorType=errorType;this.pt=null;if(pt!=null){this.pt=pt.clone();}};jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2;jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3;jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4;jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5;jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6;jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7;jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8;jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9;jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10;jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11;jsts.operation.valid.TopologyValidationError.prototype.errMsg=['Topology Validation Error','Repeated Point','Hole lies outside shell','Holes are nested','Interior is disconnected','Self-intersection','Ring Self-intersection','Nested shells','Duplicate Rings','Too few distinct points in geometry component','Invalid Coordinate','Ring is not closed'];jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt;};jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType;};jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType];};jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var locStr='';if(this.pt!=null){locStr=' at or near point '+this.pt;return this.getMessage()+locStr;}
return locStr;};(function(){jsts.geom.MultiPolygon=function(geometries,factory){this.geometries=geometries||[];this.factory=factory;};jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon;jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty()){return this.getFactory().createMultiLineString(null);}
var allRings=[];for(var i=0;i<this.geometries.length;i++){var polygon=this.geometries[i];var rings=polygon.getBoundary();for(var j=0;j<rings.getNumGeometries();j++){allRings.push(rings.getGeometryN(j));}}
return this.getFactory().createMultiLineString(allRings);};jsts.geom.MultiPolygon.prototype.equalsExact=function(other,tolerance){if(!this.isEquivalentClass(other)){return false;}
return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,other,tolerance);};jsts.geom.MultiPolygon.prototype.CLASS_NAME='jsts.geom.MultiPolygon';})();jsts.geom.CoordinateSequenceFilter=function(){};jsts.geom.CoordinateSequenceFilter.prototype.filter=jsts.abstractFunc;jsts.geom.CoordinateSequenceFilter.prototype.isDone=jsts.abstractFunc;jsts.geom.CoordinateSequenceFilter.prototype.isGeometryChanged=jsts.abstractFunc;(function(){var Interval=function(){this.min=0.0;this.max=0.0;if(arguments.length===1){var interval=arguments[0];this.init(interval.min,interval.max);}else if(arguments.length===2){this.init(arguments[0],arguments[1]);}};Interval.prototype.init=function(min,max){this.min=min;this.max=max;if(min>max){this.min=max;this.max=min;}};Interval.prototype.getMin=function(){return this.min;};Interval.prototype.getMax=function(){return this.max;};Interval.prototype.getWidth=function(){return(this.max-this.min);};Interval.prototype.expandToInclude=function(interval){if(interval.max>this.max){this.max=interval.max;}
if(interval.min<this.min){this.min=interval.min;}};Interval.prototype.overlaps=function(){if(arguments.length===1){return this.overlapsInterval.apply(this,arguments);}else{return this.overlapsMinMax.apply(this,arguments);}};Interval.prototype.overlapsInterval=function(interval){return this.overlaps(interval.min,interval.max);};Interval.prototype.overlapsMinMax=function(min,max){if(this.min>max||this.max<min){return false;}
return true;};Interval.prototype.contains=function(){var interval;if(arguments[0]instanceof jsts.index.bintree.Interval){interval=arguments[0];return this.containsMinMax(interval.min,interval.max);}else if(arguments.length===1){return this.containsPoint(arguments[0]);}else{return this.containsMinMax(arguments[0],arguments[1]);}};Interval.prototype.containsMinMax=function(min,max){return(min>=this.min&&max<=this.max);};Interval.prototype.containsPoint=function(p){return(p>=this.min&&p<=this.max);};jsts.index.bintree.Interval=Interval;})();jsts.index.DoubleBits=function(){};jsts.index.DoubleBits.powerOf2=function(exp){return Math.pow(2,exp);};jsts.index.DoubleBits.exponent=function(d){return jsts.index.DoubleBits.CVTFWD(64,d)-1023;};jsts.index.DoubleBits.CVTFWD=function(NumW,Qty){var Sign,Expo,Mant,Bin,nb01='';var Inf={32:{d:0x7F,c:0x80,b:0,a:0},64:{d:0x7FF0,c:0,b:0,a:0}};var ExW={32:8,64:11}[NumW],MtW=NumW-ExW-1;if(!Bin){Sign=Qty<0||1/Qty<0;if(!isFinite(Qty)){Bin=Inf[NumW];if(Sign){Bin.d+=1<<(NumW/4-1);}
Expo=Math.pow(2,ExW)-1;Mant=0;}}
if(!Bin){Expo={32:127,64:1023}[NumW];Mant=Math.abs(Qty);while(Mant>=2){Expo++;Mant/=2;}
while(Mant<1&&Expo>0){Expo--;Mant*=2;}
if(Expo<=0){Mant/=2;nb01='Zero or Denormal';}
if(NumW===32&&Expo>254){nb01='Too big for Single';Bin={d:Sign?0xFF:0x7F,c:0x80,b:0,a:0};Expo=Math.pow(2,ExW)-1;Mant=0;}}
return Expo;};(function(){var DoubleBits=jsts.index.DoubleBits;var Interval=jsts.index.bintree.Interval;var Key=function(interval){this.pt=0.0;this.level=0;this.computeKey(interval);};Key.computeLevel=function(interval){var dx=interval.getWidth(),level;level=DoubleBits.exponent(dx)+1;return level;};Key.prototype.getPoint=function(){return this.pt;};Key.prototype.getLevel=function(){return this.level;};Key.prototype.getInterval=function(){return this.interval;};Key.prototype.computeKey=function(itemInterval){this.level=Key.computeLevel(itemInterval);this.interval=new Interval();this.computeInterval(this.level,itemInterval);while(!this.interval.contains(itemInterval)){this.level+=1;this.computeInterval(this.level,itemInterval);}};Key.prototype.computeInterval=function(level,itemInterval){var size=DoubleBits.powerOf2(level);this.pt=Math.floor(itemInterval.getMin()/size)*size;this.interval.init(this.pt,this.pt+size);};jsts.index.bintree.Key=Key;})();jsts.operation.buffer.SubgraphDepthLocater=function(subgraphs){this.subgraphs=[];this.seg=new jsts.geom.LineSegment();this.subgraphs=subgraphs;};jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null;jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null;jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(p){var stabbedSegments=this.findStabbedSegments(p);if(stabbedSegments.length===0)
return 0;stabbedSegments.sort();var ds=stabbedSegments[0];return ds.leftDepth;};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(stabbingRayLeftPt){if(arguments.length===3){this.findStabbedSegments2.apply(this,arguments);return;}
var stabbedSegments=[];for(var i=0;i<this.subgraphs.length;i++){var bsg=this.subgraphs[i];var env=bsg.getEnvelope();if(stabbingRayLeftPt.y<env.getMinY()||stabbingRayLeftPt.y>env.getMaxY())
continue;this.findStabbedSegments2(stabbingRayLeftPt,bsg.getDirectedEdges(),stabbedSegments);}
return stabbedSegments;};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(stabbingRayLeftPt,dirEdges,stabbedSegments){if(arguments[1]instanceof jsts.geomgraph.DirectedEdge){this.findStabbedSegments3(stabbingRayLeftPt,dirEdges,stabbedSegments);return;}
for(var i=dirEdges.iterator();i.hasNext();){var de=i.next();if(!de.isForward())
continue;this.findStabbedSegments3(stabbingRayLeftPt,de,stabbedSegments);}};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(stabbingRayLeftPt,dirEdge,stabbedSegments){var pts=dirEdge.getEdge().getCoordinates();for(var i=0;i<pts.length-1;i++){this.seg.p0=pts[i];this.seg.p1=pts[i+1];if(this.seg.p0.y>this.seg.p1.y)
this.seg.reverse();var maxx=Math.max(this.seg.p0.x,this.seg.p1.x);if(maxx<stabbingRayLeftPt.x)
continue;if(this.seg.isHorizontal())
continue;if(stabbingRayLeftPt.y<this.seg.p0.y||stabbingRayLeftPt.y>this.seg.p1.y)
continue;if(jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,stabbingRayLeftPt)===jsts.algorithm.CGAlgorithms.RIGHT)
continue;var depth=dirEdge.getDepth(jsts.geomgraph.Position.LEFT);if(!this.seg.p0.equals(pts[i]))
depth=dirEdge.getDepth(jsts.geomgraph.Position.RIGHT);var ds=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,depth);stabbedSegments.push(ds);}};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(seg,depth){this.upwardSeg=new jsts.geom.LineSegment(seg);this.leftDepth=depth;};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null;jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null;jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(obj){var other=obj;var orientIndex=this.upwardSeg.orientationIndex(other.upwardSeg);if(orientIndex===0)
orientIndex=-1*other.upwardSeg.orientationIndex(upwardSeg);if(orientIndex!==0)
return orientIndex;return this.compareX(this.upwardSeg,other.upwardSeg);};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(seg0,seg1){var compare0=seg0.p0.compareTo(seg1.p0);if(compare0!==0)
return compare0;return seg0.p1.compareTo(seg1.p1);};jsts.noding.snapround.HotPixel=function(pt,scaleFactor,li){this.corner=[];this.originalPt=pt;this.pt=pt;this.scaleFactor=scaleFactor;this.li=li;if(this.scaleFactor!==1.0){this.pt=new jsts.geom.Coordinate(this.scale(pt.x),this.scale(pt.y));this.p0Scaled=new jsts.geom.Coordinate();this.p1Scaled=new jsts.geom.Coordinate();}
this.initCorners(this.pt);};jsts.noding.snapround.HotPixel.prototype.li=null;jsts.noding.snapround.HotPixel.prototype.pt=null;jsts.noding.snapround.HotPixel.prototype.originalPt=null;jsts.noding.snapround.HotPixel.prototype.ptScaled=null;jsts.noding.snapround.HotPixel.prototype.p0Scaled=null;jsts.noding.snapround.HotPixel.prototype.p1Scaled=null;jsts.noding.snapround.HotPixel.prototype.scaleFactor=undefined;jsts.noding.snapround.HotPixel.prototype.minx=undefined;jsts.noding.snapround.HotPixel.prototype.maxx=undefined;jsts.noding.snapround.HotPixel.prototype.miny=undefined;jsts.noding.snapround.HotPixel.prototype.maxy=undefined;jsts.noding.snapround.HotPixel.prototype.corner=null;jsts.noding.snapround.HotPixel.prototype.safeEnv=null;jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt;};jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=0.75;jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(this.safeEnv===null){var safeTolerance=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-safeTolerance,this.originalPt.x+safeTolerance,this.originalPt.y-safeTolerance,this.originalPt.y+safeTolerance);}
return this.safeEnv;};jsts.noding.snapround.HotPixel.prototype.initCorners=function(pt){var tolerance=0.5;this.minx=pt.x-tolerance;this.maxx=pt.x+tolerance;this.miny=pt.y-tolerance;this.maxy=pt.y+tolerance;this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy);this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy);this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny);this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny);};jsts.noding.snapround.HotPixel.prototype.scale=function(val){return Math.round(val*this.scaleFactor);};jsts.noding.snapround.HotPixel.prototype.intersects=function(p0,p1){if(this.scaleFactor===1.0)
return this.intersectsScaled(p0,p1);this.copyScaled(p0,this.p0Scaled);this.copyScaled(p1,this.p1Scaled);return this.intersectsScaled(this.p0Scaled,this.p1Scaled);};jsts.noding.snapround.HotPixel.prototype.copyScaled=function(p,pScaled){pScaled.x=this.scale(p.x);pScaled.y=this.scale(p.y);};jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(p0,p1){var segMinx=Math.min(p0.x,p1.x);var segMaxx=Math.max(p0.x,p1.x);var segMiny=Math.min(p0.y,p1.y);var segMaxy=Math.max(p0.y,p1.y);var isOutsidePixelEnv=this.maxx<segMinx||this.minx>segMaxx||this.maxy<segMiny||this.miny>segMaxy;if(isOutsidePixelEnv)
return false;var intersects=this.intersectsToleranceSquare(p0,p1);jsts.util.Assert.isTrue(!(isOutsidePixelEnv&&intersects),'Found bad envelope test');return intersects;};jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(p0,p1){var intersectsLeft=false;var intersectsBottom=false;this.li.computeIntersection(p0,p1,this.corner[0],this.corner[1]);if(this.li.isProper())
return true;this.li.computeIntersection(p0,p1,this.corner[1],this.corner[2]);if(this.li.isProper())
return true;if(this.li.hasIntersection())
intersectsLeft=true;this.li.computeIntersection(p0,p1,this.corner[2],this.corner[3]);if(this.li.isProper())
return true;if(this.li.hasIntersection())
intersectsBottom=true;this.li.computeIntersection(p0,p1,this.corner[3],this.corner[0]);if(this.li.isProper())
return true;if(intersectsLeft&&intersectsBottom)
return true;if(p0.equals(this.pt))
return true;if(p1.equals(this.pt))
return true;return false;};jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(p0,p1){this.li.computeIntersection(p0,p1,this.corner[0],this.corner[1]);if(this.li.hasIntersection())
return true;this.li.computeIntersection(p0,p1,this.corner[1],this.corner[2]);if(this.li.hasIntersection())
return true;this.li.computeIntersection(p0,p1,this.corner[2],this.corner[3]);if(this.li.hasIntersection())
return true;this.li.computeIntersection(p0,p1,this.corner[3],this.corner[0]);if(this.li.hasIntersection())
return true;return false;};jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(segStr,segIndex){var p0=segStr.getCoordinate(segIndex);var p1=segStr.getCoordinate(segIndex+1);if(this.intersects(p0,p1)){segStr.addIntersection(this.getCoordinate(),segIndex);return true;}
return false;};jsts.operation.buffer.BufferInputLineSimplifier=function(inputLine){this.inputLine=inputLine;};jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(inputLine,distanceTol){var simp=new jsts.operation.buffer.BufferInputLineSimplifier(inputLine);return simp.simplify(distanceTol);};jsts.operation.buffer.BufferInputLineSimplifier.INIT=0;jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1;jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1;jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(distanceTol){this.distanceTol=Math.abs(distanceTol);if(distanceTol<0)
this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE;this.isDeleted=[];this.isDeleted.length=this.inputLine.length;var isChanged=false;do{isChanged=this.deleteShallowConcavities();}while(isChanged);return this.collapseLine();};jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){var index=1;var maxIndex=this.inputLine.length-1;var midIndex=this.findNextNonDeletedIndex(index);var lastIndex=this.findNextNonDeletedIndex(midIndex);var isChanged=false;while(lastIndex<this.inputLine.length){var isMiddleVertexDeleted=false;if(this.isDeletable(index,midIndex,lastIndex,this.distanceTol)){this.isDeleted[midIndex]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE;isMiddleVertexDeleted=true;isChanged=true;}
if(isMiddleVertexDeleted)
index=lastIndex;else
index=midIndex;midIndex=this.findNextNonDeletedIndex(index);lastIndex=this.findNextNonDeletedIndex(midIndex);}
return isChanged;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(index){var next=index+1;while(next<this.inputLine.length&&this.isDeleted[next]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE)
next++;return next;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){var coordList=[];for(var i=0;i<this.inputLine.length;i++){if(this.isDeleted[i]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE)
coordList.push(this.inputLine[i]);}
return coordList;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(i0,i1,i2,distanceTol){var p0=this.inputLine[i0];var p1=this.inputLine[i1];var p2=this.inputLine[i2];if(!this.isConcave(p0,p1,p2))
return false;if(!this.isShallow(p0,p1,p2,distanceTol))
return false;return this.isShallowSampled(p0,p1,i0,i2,distanceTol);};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(p0,p1,p2,distanceTol){var orientation=jsts.algorithm.CGAlgorithms.computeOrientation(p0,p1,p2);var isAngleToSimplify=(orientation===this.angleOrientation);if(!isAngleToSimplify)
return false;var dist=jsts.algorithm.CGAlgorithms.distancePointLine(p1,p0,p2);return dist<distanceTol;};jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10;jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(p0,p2,i0,i2,distanceTol){var inc=parseInt((i2-i0)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);if(inc<=0)
inc=1;for(var i=i0;i<i2;i+=inc){if(!this.isShallow(p0,p2,this.inputLine[i],distanceTol))
return false;}
return true;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(p0,p1,p2,distanceTol){var dist=jsts.algorithm.CGAlgorithms.distancePointLine(p1,p0,p2);return dist<distanceTol;};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(p0,p1,p2){var orientation=jsts.algorithm.CGAlgorithms.computeOrientation(p0,p1,p2);var isConcave=(orientation===this.angleOrientation);return isConcave;};jsts.geomgraph.index.SweepLineEvent=function(x,obj,label){if(!(obj instanceof jsts.geomgraph.index.SweepLineEvent)){this.eventType=jsts.geomgraph.index.SweepLineEvent.INSERT;this.label=label;this.xValue=x;this.obj=obj;return;}
this.eventType=jsts.geomgraph.index.SweepLineEvent.DELETE;this.xValue=x;this.insertEvent=obj;};jsts.geomgraph.index.SweepLineEvent.INSERT=1;jsts.geomgraph.index.SweepLineEvent.DELETE=2;jsts.geomgraph.index.SweepLineEvent.prototype.label=null;jsts.geomgraph.index.SweepLineEvent.prototype.xValue=null;jsts.geomgraph.index.SweepLineEvent.prototype.eventType=null;jsts.geomgraph.index.SweepLineEvent.prototype.insertEvent=null;jsts.geomgraph.index.SweepLineEvent.prototype.deleteEventIndex=null;jsts.geomgraph.index.SweepLineEvent.prototype.obj=null;jsts.geomgraph.index.SweepLineEvent.prototype.isInsert=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.INSERT;};jsts.geomgraph.index.SweepLineEvent.prototype.isDelete=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.DELETE;};jsts.geomgraph.index.SweepLineEvent.prototype.getInsertEvent=function(){return this.insertEvent;};jsts.geomgraph.index.SweepLineEvent.prototype.getDeleteEventIndex=function(){return this.deleteEventIndex;};jsts.geomgraph.index.SweepLineEvent.prototype.setDeleteEventIndex=function(deleteEventIndex){this.deleteEventIndex=deleteEventIndex;};jsts.geomgraph.index.SweepLineEvent.prototype.getObject=function(){return this.obj;};jsts.geomgraph.index.SweepLineEvent.prototype.isSameLabel=function(ev){if(this.label==null){return false;}
return this.label==ev.label;};jsts.geomgraph.index.SweepLineEvent.prototype.compareTo=function(pe){if(this.xValue<pe.xValue){return-1;}
if(this.xValue>pe.xValue){return 1;}
if(this.eventType<pe.eventType){return-1;}
if(this.eventType>pe.eventType){return 1;}
return 0;};jsts.geom.CoordinateList=function(coord,allowRepeated){this.array=[];allowRepeated=(allowRepeated===undefined)?true:allowRepeated;if(coord!==undefined){this.add(coord,allowRepeated);}};jsts.geom.CoordinateList.prototype=new javascript.util.ArrayList();jsts.geom.CoordinateList.prototype.iterator=null;jsts.geom.CoordinateList.prototype.remove=null;jsts.geom.CoordinateList.prototype.get=function(i){return this.array[i];};jsts.geom.CoordinateList.prototype.set=function(i,e){var o=this.array[i];this.array[i]=e;return o;};jsts.geom.CoordinateList.prototype.size=function(){return this.array.length;};jsts.geom.CoordinateList.prototype.add=function(){if(arguments.length>1){return this.addCoordinates.apply(this,arguments);}else{return this.array.push(arguments[0]);}};jsts.geom.CoordinateList.prototype.addCoordinates=function(coord,allowRepeated,direction){if(coord instanceof jsts.geom.Coordinate){return this.addCoordinate.apply(this,arguments);}else if(typeof coord==='number'){return this.insertCoordinate.apply(this,arguments);}
direction=direction||true;if(direction){for(var i=0;i<coord.length;i++){this.addCoordinate(coord[i],allowRepeated);}}else{for(var i=coord.length-1;i>=0;i--){this.addCoordinate(coord[i],allowRepeated);}}
return true;};jsts.geom.CoordinateList.prototype.addCoordinate=function(coord,allowRepeated){if(!allowRepeated){if(this.size()>=1){var last=this.get(this.size()-1);if(last.equals2D(coord))return;}}
this.add(coord);};jsts.geom.CoordinateList.prototype.insertCoordinate=function(index,coord,allowRepeated){if(!allowRepeated){var before=index>0?index-1:-1;if(before!==-1&&this.get(before).equals2D(coord)){return;}
var after=index<this.size()-1?index+1:-1;if(after!==-1&&this.get(after).equals2D(coord)){return;}}
this.array.splice(index,0,coord);};jsts.geom.CoordinateList.prototype.closeRing=function(){if(this.size()>0){this.addCoordinate(new jsts.geom.Coordinate(this.get(0)),false);}};jsts.geom.CoordinateList.prototype.toArray=function(){return this.array;};jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.array;};jsts.operation.buffer.OffsetSegmentGenerator=function(precisionModel,bufParams,distance){this.seg0=new jsts.geom.LineSegment();this.seg1=new jsts.geom.LineSegment();this.offset0=new jsts.geom.LineSegment();this.offset1=new jsts.geom.LineSegment();this.precisionModel=precisionModel;this.bufParams=bufParams;this.li=new jsts.algorithm.RobustLineIntersector();this.filletAngleQuantum=Math.PI/2.0/bufParams.getQuadrantSegments();if(this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND){this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR;}
this.init(distance);};jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=1.0E-3;jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=1.0E-3;jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1.0E-6;jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80;jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0.0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1;jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0.0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=false;jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle;};jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(distance){this.distance=distance;this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2.0));this.segList=new jsts.operation.buffer.OffsetSegmentString();this.segList.setPrecisionModel(this.precisionModel);this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(s1,s2,side){this.s1=s1;this.s2=s2;this.side=side;this.seg1.setCoordinates(this.s1,this.s2);this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates();};jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing();};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(pt,isForward){this.segList.addPts(pt,isForward);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(p,addStartPoint){this.s0=this.s1;this.s1=this.s2;this.s2=p;this.seg0.setCoordinates(this.s0,this.s1);this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0);this.seg1.setCoordinates(this.s1,this.s2);this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1);if(this.s1.equals(this.s2))
return;var orientation=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2);var outsideTurn=(orientation===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT)||(orientation===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT);if(orientation==0){this.addCollinear(addStartPoint);}else if(outsideTurn){this.addOutsideTurn(orientation,addStartPoint);}else{this.addInsideTurn(orientation,addStartPoint);}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(addStartPoint){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var numInt=this.li.getIntersectionNum();if(numInt>=2){if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE){if(addStartPoint)
this.segList.addPt(this.offset0.p1);this.segList.addPt(this.offset1.p0);}else{this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance);}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(orientation,addStartPoint){if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR){this.segList.addPt(this.offset0.p1);return;}
if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE){this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance);}else if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL){this.addBevelJoin(this.offset0,this.offset1);}else{if(addStartPoint)
this.segList.addPt(this.offset0.p1);this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,orientation,this.distance);this.segList.addPt(this.offset1.p0);}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(orientation,addStartPoint){this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1);if(this.li.hasIntersection()){this.segList.addPt(this.li.getIntersection(0));}else{this.hasNarrowConcaveAngle=true;if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR){this.segList.addPt(this.offset0.p1);}else{this.segList.addPt(this.offset0.p1);if(this.closingSegLengthFactor>0){var mid0=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(mid0);var mid1=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(mid1);}else{this.segList.addPt(this.s1);}
this.segList.addPt(this.offset1.p0);}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(seg,side,distance,offset){var sideSign=side===jsts.geomgraph.Position.LEFT?1:-1;var dx=seg.p1.x-seg.p0.x;var dy=seg.p1.y-seg.p0.y;var len=Math.sqrt(dx*dx+dy*dy);var ux=sideSign*distance*dx/len;var uy=sideSign*distance*dy/len;offset.p0.x=seg.p0.x-uy;offset.p0.y=seg.p0.y+ux;offset.p1.x=seg.p1.x-uy;offset.p1.y=seg.p1.y+ux;};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(p0,p1){var seg=new jsts.geom.LineSegment(p0,p1);var offsetL=new jsts.geom.LineSegment();this.computeOffsetSegment(seg,jsts.geomgraph.Position.LEFT,this.distance,offsetL);var offsetR=new jsts.geom.LineSegment();this.computeOffsetSegment(seg,jsts.geomgraph.Position.RIGHT,this.distance,offsetR);var dx=p1.x-p0.x;var dy=p1.y-p0.y;var angle=Math.atan2(dy,dx);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(offsetL.p1);this.addFillet(p1,angle+Math.PI/2,angle-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance);this.segList.addPt(offsetR.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(offsetL.p1);this.segList.addPt(offsetR.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var squareCapSideOffset=new jsts.geom.Coordinate();squareCapSideOffset.x=Math.abs(this.distance)*Math.cos(angle);squareCapSideOffset.y=Math.abs(this.distance)*Math.sin(angle);var squareCapLOffset=new jsts.geom.Coordinate(offsetL.p1.x+
squareCapSideOffset.x,offsetL.p1.y+squareCapSideOffset.y);var squareCapROffset=new jsts.geom.Coordinate(offsetR.p1.x+
squareCapSideOffset.x,offsetR.p1.y+squareCapSideOffset.y);this.segList.addPt(squareCapLOffset);this.segList.addPt(squareCapROffset);break;}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(p,offset0,offset1,distance){var isMitreWithinLimit=true;var intPt=null;try{intPt=jsts.algorithm.HCoordinate.intersection(offset0.p0,offset0.p1,offset1.p0,offset1.p1);var mitreRatio=distance<=0.0?1.0:intPt.distance(p)/Math.abs(distance);if(mitreRatio>this.bufParams.getMitreLimit())
this.isMitreWithinLimit=false;}catch(e){if(e instanceof jsts.error.NotRepresentableError){intPt=new jsts.geom.Coordinate(0,0);this.isMitreWithinLimit=false;}}
if(isMitreWithinLimit){this.segList.addPt(intPt);}else{this.addLimitedMitreJoin(offset0,offset1,distance,bufParams.getMitreLimit());}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(offset0,offset1,distance,mitreLimit){var basePt=this.seg0.p1;var ang0=jsts.algorithm.Angle.angle(basePt,this.seg0.p0);var ang1=jsts.algorithm.Angle.angle(basePt,this.seg1.p1);var angDiff=jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,basePt,this.seg1.p1);var angDiffHalf=angDiff/2;var midAng=jsts.algorithm.Angle.normalize(ang0+angDiffHalf);var mitreMidAng=jsts.algorithm.Angle.normalize(midAng+Math.PI);var mitreDist=mitreLimit*distance;var bevelDelta=mitreDist*Math.abs(Math.sin(angDiffHalf));var bevelHalfLen=distance-bevelDelta;var bevelMidX=basePt.x+mitreDist*Math.cos(mitreMidAng);var bevelMidY=basePt.y+mitreDist*Math.sin(mitreMidAng);var bevelMidPt=new jsts.geom.Coordinate(bevelMidX,bevelMidY);var mitreMidLine=new jsts.geom.LineSegment(basePt,bevelMidPt);var bevelEndLeft=mitreMidLine.pointAlongOffset(1.0,bevelHalfLen);var bevelEndRight=mitreMidLine.pointAlongOffset(1.0,-bevelHalfLen);if(this.side==jsts.geomgraph.Position.LEFT){this.segList.addPt(bevelEndLeft);this.segList.addPt(bevelEndRight);}else{this.segList.addPt(bevelEndRight);this.segList.addPt(bevelEndLeft);}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(offset0,offset1){this.segList.addPt(offset0.p1);this.segList.addPt(offset1.p0);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(p,p0,p1,direction,radius){if(!(p1 instanceof jsts.geom.Coordinate)){this.addFillet2.apply(this,arguments);return;}
var dx0=p0.x-p.x;var dy0=p0.y-p.y;var startAngle=Math.atan2(dy0,dx0);var dx1=p1.x-p.x;var dy1=p1.y-p.y;var endAngle=Math.atan2(dy1,dx1);if(direction===jsts.algorithm.CGAlgorithms.CLOCKWISE){if(startAngle<=endAngle)
startAngle+=2.0*Math.PI;}else{if(startAngle>=endAngle)
startAngle-=2.0*Math.PI;}
this.segList.addPt(p0);this.addFillet(p,startAngle,endAngle,direction,radius);this.segList.addPt(p1);};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(p,startAngle,endAngle,direction,radius){var directionFactor=direction===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1;var totalAngle=Math.abs(startAngle-endAngle);var nSegs=parseInt((totalAngle/this.filletAngleQuantum+0.5));if(nSegs<1)
return;var initAngle,currAngleInc;initAngle=0.0;currAngleInc=totalAngle/nSegs;var currAngle=initAngle;var pt=new jsts.geom.Coordinate();while(currAngle<totalAngle){var angle=startAngle+directionFactor*currAngle;pt.x=p.x+radius*Math.cos(angle);pt.y=p.y+radius*Math.sin(angle);this.segList.addPt(pt);currAngle+=currAngleInc;}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(p){var pt=new jsts.geom.Coordinate(p.x+this.distance,p.y);this.segList.addPt(pt);this.addFillet(p,0.0,2.0*Math.PI,-1,this.distance);this.segList.closeRing();};jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(p){this.segList.addPt(new jsts.geom.Coordinate(p.x+distance,p.y+distance));this.segList.addPt(new jsts.geom.Coordinate(p.x+distance,p.y-distance));this.segList.addPt(new jsts.geom.Coordinate(p.x-distance,p.y-distance));this.segList.addPt(new jsts.geom.Coordinate(p.x-distance,p.y+distance));this.segList.closeRing();};jsts.operation.overlay.MaximalEdgeRing=function(start,geometryFactory){jsts.geomgraph.EdgeRing.call(this,start,geometryFactory);};jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing();jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing;jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(de)
{return de.getNext();};jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(de,er)
{de.setEdgeRing(er);};jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function()
{var de=this.startDe;do{var node=de.getNode();node.getEdges().linkMinimalDirectedEdges(this);de=de.getNext();}while(de!=this.startDe);};jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function()
{var minEdgeRings=[];var de=this.startDe;do{if(de.getMinEdgeRing()===null){var minEr=new jsts.operation.overlay.MinimalEdgeRing(de,this.geometryFactory);minEdgeRings.push(minEr);}
de=de.getNext();}while(de!=this.startDe);return minEdgeRings;};jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate();};jsts.algorithm.CentroidPoint.prototype.ptCount=0;jsts.algorithm.CentroidPoint.prototype.centSum=null;jsts.algorithm.CentroidPoint.prototype.add=function(geom){if(geom instanceof jsts.geom.Point){this.add2(geom.getCoordinate());}else if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){this.add(gc.getGeometryN(i));}}};jsts.algorithm.CentroidPoint.prototype.add2=function(pt){this.ptCount+=1;this.centSum.x+=pt.x;this.centSum.y+=pt.y;};jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();cent.x=this.centSum.x/this.ptCount;cent.y=this.centSum.y/this.ptCount;return cent;};jsts.operation.distance.ConnectedElementLocationFilter=function(locations){this.locations=locations;};jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter();jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null;jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(geom){var locations=[];geom.apply(new jsts.operation.distance.ConnectedElementLocationFilter(locations));return locations;};jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(geom){if(geom instanceof jsts.geom.Point||geom instanceof jsts.geom.LineString||geom instanceof jsts.geom.Polygon)
this.locations.push(new jsts.operation.distance.GeometryLocation(geom,0,geom.getCoordinate()));};jsts.geomgraph.index.MonotoneChainEdge=function(e){this.e=e;this.pts=e.getCoordinates();var mcb=new jsts.geomgraph.index.MonotoneChainIndexer();this.startIndex=mcb.getChainStartIndices(this.pts);};jsts.geomgraph.index.MonotoneChainEdge.prototype.e=null;jsts.geomgraph.index.MonotoneChainEdge.prototype.pts=null;jsts.geomgraph.index.MonotoneChainEdge.prototype.startIndex=null;jsts.geomgraph.index.MonotoneChainEdge.prototype.env1=new jsts.geom.Envelope();jsts.geomgraph.index.MonotoneChainEdge.prototype.env2=new jsts.geom.Envelope();jsts.geomgraph.index.MonotoneChainEdge.prototype.getCoordinates=function(){return this.pts;};jsts.geomgraph.index.MonotoneChainEdge.prototype.getStartIndexes=function(){return this.startIndex;};jsts.geomgraph.index.MonotoneChainEdge.prototype.getMinX=function(chainIndex){var x1=this.pts[this.startIndex[chainIndex]].x;var x2=this.pts[this.startIndex[chainIndex+1]].x;if(x1<x2){return x1;}
return x2;};jsts.geomgraph.index.MonotoneChainEdge.prototype.getMaxX=function(chainIndex){var x1=this.pts[this.startIndex[chainIndex]].x;var x2=this.pts[this.startIndex[chainIndex+1]].x;if(x1>x2){return x1;}
return x2;};jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersects=function(mce,si){for(var i=0;i<this.startIndex.length-1;i++){for(var j=0;j<mce.startIndex.length-1;j++){this.computeIntersectsForChain(i,mce,j,si);}}};jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain=function(chainIndex0,mce,chainIndex1,si){this.computeIntersectsForChain2(this.startIndex[chainIndex0],this.startIndex[chainIndex0+1],mce,mce.startIndex[chainIndex1],mce.startIndex[chainIndex1+1],si);};jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain2=function(start0,end0,mce,start1,end1,ei){var p00=this.pts[start0];var p01=this.pts[end0];var p10=mce.pts[start1];var p11=mce.pts[end1];if(end0-start0==1&&end1-start1==1){ei.addIntersections(this.e,start0,mce.e,start1);return;}
this.env1.init(p00,p01);this.env2.init(p10,p11);if(!this.env1.intersects(this.env2)){return;}
var mid0=Math.floor((start0+end0)/2);var mid1=Math.floor((start1+end1)/2);if(start0<mid0){if(start1<mid1){this.computeIntersectsForChain2(start0,mid0,mce,start1,mid1,ei);}
if(mid1<end1){this.computeIntersectsForChain2(start0,mid0,mce,mid1,end1,ei);}}
if(mid0<end0){if(start1<mid1){this.computeIntersectsForChain2(mid0,end0,mce,start1,mid1,ei);}
if(mid1<end1){this.computeIntersectsForChain2(mid0,end0,mce,mid1,end1,ei);}}};(function(){var ArrayList=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){};jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(edges){if(arguments.length==2){this.computeEdgeEnds2.apply(this,arguments);return;}
var l=new ArrayList();for(var i=edges;i.hasNext();){var e=i.next();this.computeEdgeEnds2(e,l);}
return l;};jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(edge,l){var eiList=edge.getEdgeIntersectionList();eiList.addEndpoints();var it=eiList.iterator();var eiPrev=null;var eiCurr=null;if(!it.hasNext())
return;var eiNext=it.next();do{eiPrev=eiCurr;eiCurr=eiNext;eiNext=null;if(it.hasNext())
eiNext=it.next();if(eiCurr!==null){this.createEdgeEndForPrev(edge,l,eiCurr,eiPrev);this.createEdgeEndForNext(edge,l,eiCurr,eiNext);}}while(eiCurr!==null);};jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(edge,l,eiCurr,eiPrev){var iPrev=eiCurr.segmentIndex;if(eiCurr.dist===0.0){if(iPrev===0)
return;iPrev--;}
var pPrev=edge.getCoordinate(iPrev);if(eiPrev!==null&&eiPrev.segmentIndex>=iPrev)
pPrev=eiPrev.coord;var label=new jsts.geomgraph.Label(edge.getLabel());label.flip();var e=new jsts.geomgraph.EdgeEnd(edge,eiCurr.coord,pPrev,label);l.add(e);};jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(edge,l,eiCurr,eiNext){var iNext=eiCurr.segmentIndex+1;if(iNext>=edge.getNumPoints()&&eiNext===null)
return;var pNext=edge.getCoordinate(iNext);if(eiNext!==null&&eiNext.segmentIndex===eiCurr.segmentIndex)
pNext=eiNext.coord;var e=new jsts.geomgraph.EdgeEnd(edge,eiCurr.coord,pNext,new jsts.geomgraph.Label(edge.getLabel()));l.add(e);};})();(function(){var ArrayList=javascript.util.ArrayList;var TreeSet=javascript.util.TreeSet;var CoordinateFilter=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new TreeSet();this.list=new ArrayList();};jsts.util.UniqueCoordinateArrayFilter.prototype=new CoordinateFilter();jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null;jsts.util.UniqueCoordinateArrayFilter.prototype.list=null;jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray();};jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(coord){if(!this.treeSet.contains(coord)){this.list.add(coord);this.treeSet.add(coord);}};})();(function(){var CGAlgorithms=jsts.algorithm.CGAlgorithms;var UniqueCoordinateArrayFilter=jsts.util.UniqueCoordinateArrayFilter;var Assert=jsts.util.Assert;var Stack=javascript.util.Stack;var ArrayList=javascript.util.ArrayList;var Arrays=javascript.util.Arrays;var RadialComparator=function(origin){this.origin=origin;};RadialComparator.prototype.origin=null;RadialComparator.prototype.compare=function(o1,o2){var p1=o1;var p2=o2;return RadialComparator.polarCompare(this.origin,p1,p2);};RadialComparator.polarCompare=function(o,p,q){var dxp=p.x-o.x;var dyp=p.y-o.y;var dxq=q.x-o.x;var dyq=q.y-o.y;var orient=CGAlgorithms.computeOrientation(o,p,q);if(orient==CGAlgorithms.COUNTERCLOCKWISE)
return 1;if(orient==CGAlgorithms.CLOCKWISE)
return-1;var op=dxp*dxp+dyp*dyp;var oq=dxq*dxq+dyq*dyq;if(op<oq){return-1;}
if(op>oq){return 1;}
return 0;};jsts.algorithm.ConvexHull=function(){if(arguments.length===1){var geometry=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(geometry);this.geomFactory=geometry.getFactory();}else{this.pts=arguments[0];this.geomFactory=arguments[1];}};jsts.algorithm.ConvexHull.prototype.geomFactory=null;jsts.algorithm.ConvexHull.prototype.inputPts=null;jsts.algorithm.ConvexHull.extractCoordinates=function(geom){var filter=new UniqueCoordinateArrayFilter();geom.apply(filter);return filter.getCoordinates();};jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(this.inputPts.length==0){return this.geomFactory.createGeometryCollection(null);}
if(this.inputPts.length==1){return this.geomFactory.createPoint(this.inputPts[0]);}
if(this.inputPts.length==2){return this.geomFactory.createLineString(this.inputPts);}
var reducedPts=this.inputPts;if(this.inputPts.length>50){reducedPts=this.reduce(this.inputPts);}
var sortedPts=this.preSort(reducedPts);var cHS=this.grahamScan(sortedPts);var cH=cHS.toArray();return this.lineOrPolygon(cH);};jsts.algorithm.ConvexHull.prototype.reduce=function(inputPts){var polyPts=this.computeOctRing(inputPts);if(polyPts==null)
return this.inputPts;var reducedSet=new javascript.util.TreeSet();for(var i=0;i<polyPts.length;i++){reducedSet.add(polyPts[i]);}
for(var i=0;i<inputPts.length;i++){if(!CGAlgorithms.isPointInRing(inputPts[i],polyPts)){reducedSet.add(inputPts[i]);}}
var reducedPts=reducedSet.toArray();if(reducedPts.length<3)
return this.padArray3(reducedPts);return reducedPts;};jsts.algorithm.ConvexHull.prototype.padArray3=function(pts){var pad=[];for(var i=0;i<pad.length;i++){if(i<pts.length){pad[i]=pts[i];}else
pad[i]=pts[0];}
return pad;};jsts.algorithm.ConvexHull.prototype.preSort=function(pts){var t;for(var i=1;i<pts.length;i++){if((pts[i].y<pts[0].y)||((pts[i].y==pts[0].y)&&(pts[i].x<pts[0].x))){t=pts[0];pts[0]=pts[i];pts[i]=t;}}
Arrays.sort(pts,1,pts.length,new RadialComparator(pts[0]));return pts;};jsts.algorithm.ConvexHull.prototype.grahamScan=function(c){var p;var ps=new Stack();p=ps.push(c[0]);p=ps.push(c[1]);p=ps.push(c[2]);for(var i=3;i<c.length;i++){p=ps.pop();while(!ps.empty()&&CGAlgorithms.computeOrientation(ps.peek(),p,c[i])>0){p=ps.pop();}
p=ps.push(p);p=ps.push(c[i]);}
p=ps.push(c[0]);return ps;};jsts.algorithm.ConvexHull.prototype.isBetween=function(c1,c2,c3){if(CGAlgorithms.computeOrientation(c1,c2,c3)!==0){return false;}
if(c1.x!=c3.x){if(c1.x<=c2.x&&c2.x<=c3.x){return true;}
if(c3.x<=c2.x&&c2.x<=c1.x){return true;}}
if(c1.y!=c3.y){if(c1.y<=c2.y&&c2.y<=c3.y){return true;}
if(c3.y<=c2.y&&c2.y<=c1.y){return true;}}
return false;};jsts.algorithm.ConvexHull.prototype.computeOctRing=function(inputPts){var octPts=this.computeOctPts(inputPts);var coordList=new jsts.geom.CoordinateList();coordList.add(octPts,false);if(coordList.size()<3){return null;}
coordList.closeRing();return coordList.toCoordinateArray();};jsts.algorithm.ConvexHull.prototype.computeOctPts=function(inputPts){var pts=[];for(var j=0;j<8;j++){pts[j]=inputPts[0];}
for(var i=1;i<inputPts.length;i++){if(inputPts[i].x<pts[0].x){pts[0]=inputPts[i];}
if(inputPts[i].x-inputPts[i].y<pts[1].x-pts[1].y){pts[1]=inputPts[i];}
if(inputPts[i].y>pts[2].y){pts[2]=inputPts[i];}
if(inputPts[i].x+inputPts[i].y>pts[3].x+pts[3].y){pts[3]=inputPts[i];}
if(inputPts[i].x>pts[4].x){pts[4]=inputPts[i];}
if(inputPts[i].x-inputPts[i].y>pts[5].x-pts[5].y){pts[5]=inputPts[i];}
if(inputPts[i].y<pts[6].y){pts[6]=inputPts[i];}
if(inputPts[i].x+inputPts[i].y<pts[7].x+pts[7].y){pts[7]=inputPts[i];}}
return pts;};jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(coordinates){coordinates=this.cleanRing(coordinates);if(coordinates.length==3){return this.geomFactory.createLineString([coordinates[0],coordinates[1]]);}
var linearRing=this.geomFactory.createLinearRing(coordinates);return this.geomFactory.createPolygon(linearRing,null);};jsts.algorithm.ConvexHull.prototype.cleanRing=function(original){Assert.equals(original[0],original[original.length-1]);var cleanedRing=new ArrayList();var previousDistinctCoordinate=null;for(var i=0;i<=original.length-2;i++){var currentCoordinate=original[i];var nextCoordinate=original[i+1];if(currentCoordinate.equals(nextCoordinate)){continue;}
if(previousDistinctCoordinate!=null&&this.isBetween(previousDistinctCoordinate,currentCoordinate,nextCoordinate)){continue;}
cleanedRing.add(currentCoordinate);previousDistinctCoordinate=currentCoordinate;}
cleanedRing.add(original[original.length-1]);var cleanedRingCoordinates=[];return cleanedRing.toArray(cleanedRingCoordinates);};})();jsts.algorithm.MinimumDiameter=function(inputGeom,isConvex){this.convexHullPts=null;this.minBaseSeg=new jsts.geom.LineSegment();this.minWidthPt=null;this.minPtIndex=0;this.minWidth=0;jsts.algorithm.MinimumDiameter.inputGeom=inputGeom;jsts.algorithm.MinimumDiameter.isConvex=isConvex||false;};jsts.algorithm.MinimumDiameter.inputGeom=null;jsts.algorithm.MinimumDiameter.isConvex=false;jsts.algorithm.MinimumDiameter.nextIndex=function(pts,index){index++;if(index>=pts.length){index=0;}
return index;};jsts.algorithm.MinimumDiameter.computeC=function(a,b,p){return a*p.y-b*p.x;};jsts.algorithm.MinimumDiameter.computeSegmentForLine=function(a,b,c){var p0;var p1;if(Math.abs(b)>Math.abs(a)){p0=new jsts.geom.Coordinate(0,c/b);p1=new jsts.geom.Coordinate(1,c/b-a/b);}
else{p0=new jsts.geom.Coordinate(c/a,0);p1=new jsts.geom.Coordinate(c/a-b/a,1);}
return new jsts.geom.LineSegment(p0,p1);};jsts.algorithm.MinimumDiameter.prototype.getLength=function(){this.computeMinimumDiameter();return this.minWidth;};jsts.algorithm.MinimumDiameter.prototype.getWidthCoordinate=function(){this.computeMinimumDiameter();return this.minWidthPt;};jsts.algorithm.MinimumDiameter.prototype.getSupportingSegment=function(){this.computeMinimumDiameter();var coord=[this.minBaseSeg.p0,this.minBaseSeg.p1];return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(coord);};jsts.algorithm.MinimumDiameter.prototype.getDiameter=function(){this.computeMinimumDiameter();if(this.minWidthPt===null){return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(null);}
var basePt=this.minBaseSeg.project(this.minWidthPt);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString([basePt,this.minWidthPt]);};jsts.algorithm.MinimumDiameter.prototype.computeMinimumDiameter=function(){if(this.minWidthPt!==null){return;}
if(jsts.algorithm.MinimumDiameter.isConvex)
this.computeWidthConvex(jsts.algorithm.MinimumDiameter.inputGeom);else{var convexGeom=new jsts.algorithm.ConvexHull(jsts.algorithm.MinimumDiameter.inputGeom).getConvexHull();this.computeWidthConvex(convexGeom);}};jsts.algorithm.MinimumDiameter.prototype.computeWidthConvex=function(convexGeom){if(convexGeom instanceof jsts.geom.Polygon){this.convexHullPts=convexGeom.getExteriorRing().getCoordinates();}else{this.convexHullPts=convexGeom.getCoordinates();}
if(this.convexHullPts.length===0){this.minWidth=0;this.minWidthPt=null;this.minBaseSeg=null;}else if(this.convexHullPts.length===1){this.minWidth=0;this.minWidthPt=this.convexHullPts[0];this.minBaseSeg.p0=this.convexHullPts[0];this.minBaseSeg.p1=this.convexHullPts[0];}else if(this.convexHullPts.length===2||this.convexHullPts.length===3){this.minWidth=0;this.minWidthPt=this.convexHullPts[0];this.minBaseSeg.p0=this.convexHullPts[0];this.minBaseSeg.p1=this.convexHullPts[1];}else{this.computeConvexRingMinDiameter(this.convexHullPts);}};jsts.algorithm.MinimumDiameter.prototype.computeConvexRingMinDiameter=function(pts){this.minWidth=Number.MAX_VALUE;var currMaxIndex=1;var seg=new jsts.geom.LineSegment();for(var i=0;i<pts.length-1;i++){seg.p0=pts[i];seg.p1=pts[i+1];currMaxIndex=this.findMaxPerpDistance(pts,seg,currMaxIndex);}};jsts.algorithm.MinimumDiameter.prototype.findMaxPerpDistance=function(pts,seg,startIndex){var maxPerpDistance=seg.distancePerpendicular(pts[startIndex]);var nextPerpDistance=maxPerpDistance;var maxIndex=startIndex;var nextIndex=maxIndex;while(nextPerpDistance>=maxPerpDistance){maxPerpDistance=nextPerpDistance;maxIndex=nextIndex;nextIndex=jsts.algorithm.MinimumDiameter.nextIndex(pts,maxIndex);nextPerpDistance=seg.distancePerpendicular(pts[nextIndex]);}
if(maxPerpDistance<this.minWidth){this.minPtIndex=maxIndex;this.minWidth=maxPerpDistance;this.minWidthPt=pts[this.minPtIndex];this.minBaseSeg=new jsts.geom.LineSegment(seg);}
return maxIndex;};jsts.algorithm.MinimumDiameter.prototype.getMinimumRectangle=function(){this.computeMinimumDiameter();if(this.minWidth===0){if(this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)){return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPoint(this.minBaseSeg.p0);}
return this.minBaseSeg.toGeometry(jsts.algorithm.MinimumDiameter.inputGeom.getFactory());}
var dx=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x;var dy=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y;var minPara=Number.MAX_VALUE;var maxPara=-Number.MAX_VALUE;var minPerp=Number.MAX_VALUE;var maxPerp=-Number.MAX_VALUE;for(var i=0;i<this.convexHullPts.length;i++){var paraC=jsts.algorithm.MinimumDiameter.computeC(dx,dy,this.convexHullPts[i]);if(paraC>maxPara)maxPara=paraC;if(paraC<minPara)minPara=paraC;var perpC=jsts.algorithm.MinimumDiameter.computeC(-dy,dx,this.convexHullPts[i]);if(perpC>maxPerp)maxPerp=perpC;if(perpC<minPerp)minPerp=perpC;}
var maxPerpLine=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dx,-dy,maxPerp);var minPerpLine=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dx,-dy,minPerp);var maxParaLine=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dy,dx,maxPara);var minParaLine=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-dy,dx,minPara);var p0=maxParaLine.lineIntersection(maxPerpLine);var p1=minParaLine.lineIntersection(maxPerpLine);var p2=minParaLine.lineIntersection(minPerpLine);var p3=maxParaLine.lineIntersection(minPerpLine);var shell=jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLinearRing([p0,p1,p2,p3,p0]);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPolygon(shell,null);};(function(){jsts.io.GeoJSONParser=function(geometryFactory){this.geometryFactory=geometryFactory||new jsts.geom.GeometryFactory();this.geometryTypes=['Point','MultiPoint','LineString','MultiLineString','Polygon','MultiPolygon'];};jsts.io.GeoJSONParser.prototype.read=function(json){var obj;if(typeof json==='string'){obj=JSON.parse(json);}else{obj=json;}
var type=obj.type;if(!this.parse[type]){throw new Error('Unknown GeoJSON type: '+obj.type);}
if(this.geometryTypes.indexOf(type)!=-1){return this.parse[type].apply(this,[obj.coordinates]);}else if(type==='GeometryCollection'){return this.parse[type].apply(this,[obj.geometries]);}
return this.parse[type].apply(this,[obj]);};jsts.io.GeoJSONParser.prototype.parse={'Feature':function(obj){var feature={};for(var key in obj){feature[key]=obj[key];}
if(obj.geometry){var type=obj.geometry.type;if(!this.parse[type]){throw new Error('Unknown GeoJSON type: '+obj.type);}
feature.geometry=this.read(obj.geometry);}
if(obj.bbox){feature.bbox=this.parse.bbox.apply(this,[obj.bbox]);}
return feature;},'FeatureCollection':function(obj){var featureCollection={};if(obj.features){featureCollection.features=[];for(var i=0;i<obj.features.length;++i){featureCollection.features.push(this.read(obj.features[i]));}}
if(obj.bbox){featureCollection.bbox=this.parse.bbox.apply(this,[obj.bbox]);}
return featureCollection;},'coordinates':function(array){var coordinates=[];for(var i=0;i<array.length;++i){var sub=array[i];coordinates.push(new jsts.geom.Coordinate(sub[0],sub[1]));}
return coordinates;},'bbox':function(array){return this.geometryFactory.createLinearRing([new jsts.geom.Coordinate(array[0],array[1]),new jsts.geom.Coordinate(array[2],array[1]),new jsts.geom.Coordinate(array[2],array[3]),new jsts.geom.Coordinate(array[0],array[3]),new jsts.geom.Coordinate(array[0],array[1])]);},'Point':function(array){var coordinate=new jsts.geom.Coordinate(array[0],array[1]);return this.geometryFactory.createPoint(coordinate);},'MultiPoint':function(array){var points=[];for(var i=0;i<array.length;++i){points.push(this.parse.Point.apply(this,[array[i]]));}
return this.geometryFactory.createMultiPoint(points);},'LineString':function(array){var coordinates=this.parse.coordinates.apply(this,[array]);return this.geometryFactory.createLineString(coordinates);},'MultiLineString':function(array){var lineStrings=[];for(var i=0;i<array.length;++i){lineStrings.push(this.parse.LineString.apply(this,[array[i]]));}
return this.geometryFactory.createMultiLineString(lineStrings);},'Polygon':function(array){var shellCoordinates=this.parse.coordinates.apply(this,[array[0]]);var shell=this.geometryFactory.createLinearRing(shellCoordinates);var holes=[];for(var i=1;i<array.length;++i){var hole=array[i];var coordinates=this.parse.coordinates.apply(this,[hole]);var linearRing=this.geometryFactory.createLinearRing(coordinates);holes.push(linearRing);}
return this.geometryFactory.createPolygon(shell,holes);},'MultiPolygon':function(array){var polygons=[];for(var i=0;i<array.length;++i){var polygon=array[i];polygons.push(this.parse.Polygon.apply(this,[polygon]));}
return this.geometryFactory.createMultiPolygon(polygons);},'GeometryCollection':function(array){var geometries=[];for(var i=0;i<array.length;++i){var geometry=array[i];geometries.push(this.read(geometry));}
return this.geometryFactory.createGeometryCollection(geometries);}};jsts.io.GeoJSONParser.prototype.write=function(geometry){var type=geometry.CLASS_NAME.slice(10);if(!this.extract[type]){throw new Error('Geometry is not supported');}
return this.extract[type].apply(this,[geometry]);};jsts.io.GeoJSONParser.prototype.extract={'coordinate':function(coordinate){return[coordinate.x,coordinate.y];},'Point':function(point){var array=this.extract.coordinate.apply(this,[point.coordinate]);return{type:'Point',coordinates:array};},'MultiPoint':function(multipoint){var array=[];for(var i=0;i<multipoint.geometries.length;++i){var point=multipoint.geometries[i];var geoJson=this.extract.Point.apply(this,[point]);array.push(geoJson.coordinates);}
return{type:'MultiPoint',coordinates:array};},'LineString':function(linestring){var array=[];for(var i=0;i<linestring.points.length;++i){var coordinate=linestring.points[i];array.push(this.extract.coordinate.apply(this,[coordinate]));}
return{type:'LineString',coordinates:array};},'MultiLineString':function(multilinestring){var array=[];for(var i=0;i<multilinestring.geometries.length;++i){var linestring=multilinestring.geometries[i];var geoJson=this.extract.LineString.apply(this,[linestring]);array.push(geoJson.coordinates);}
return{type:'MultiLineString',coordinates:array};},'Polygon':function(polygon){var array=[];var shellGeoJson=this.extract.LineString.apply(this,[polygon.shell]);array.push(shellGeoJson.coordinates);for(var i=0;i<polygon.holes.length;++i){var hole=polygon.holes[i];var holeGeoJson=this.extract.LineString.apply(this,[hole]);array.push(holeGeoJson.coordinates);}
return{type:'Polygon',coordinates:array};},'MultiPolygon':function(multipolygon){var array=[];for(var i=0;i<multipolygon.geometries.length;++i){var polygon=multipolygon.geometries[i];var geoJson=this.extract.Polygon.apply(this,[polygon]);array.push(geoJson.coordinates);}
return{type:'MultiPolygon',coordinates:array};},'GeometryCollection':function(collection){var array=[];for(var i=0;i<collection.geometries.length;++i){var geometry=collection.geometries[i];var type=geometry.CLASS_NAME.slice(10);array.push(this.extract[type].apply(this,[geometry]));}
return{type:'GeometryCollection',geometries:array};}};})();jsts.triangulate.quadedge.Vertex=function(){if(arguments.length===1){this.initFromCoordinate(arguments[0]);}else{this.initFromXY(arguments[0],arguments[1]);}};jsts.triangulate.quadedge.Vertex.LEFT=0;jsts.triangulate.quadedge.Vertex.RIGHT=1;jsts.triangulate.quadedge.Vertex.BEYOND=2;jsts.triangulate.quadedge.Vertex.BEHIND=3;jsts.triangulate.quadedge.Vertex.BETWEEN=4;jsts.triangulate.quadedge.Vertex.ORIGIN=5;jsts.triangulate.quadedge.Vertex.DESTINATION=6;jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(x,y){this.p=new jsts.geom.Coordinate(x,y);};jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(_p){this.p=new jsts.geom.Coordinate(_p);};jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x;};jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y;};jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z;};jsts.triangulate.quadedge.Vertex.prototype.setZ=function(z){this.p.z=z;};jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p;};jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return'POINT ('+this.p.x+' '+this.p.y+')';};jsts.triangulate.quadedge.Vertex.prototype.equals=function(){if(arguments.length===1){return this.equalsExact(arguments[0]);}else{return this.equalsWithTolerance(arguments[0],arguments[1]);}};jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(other){return(this.p.x===other.getX()&&this.p.y===other.getY());};jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(other,tolerance){return(this.p.distance(other.getCoordinate())<tolerance);};jsts.triangulate.quadedge.Vertex.prototype.classify=function(p0,p1){var p2,a,b,sa;p2=this;a=p1.sub(p0);b=p2.sub(p0);sa=a.crossProduct(b);if(sa>0.0){return jsts.triangulate.quadedge.Vertex.LEFT;}
if(sa<0.0){return jsts.triangulate.quadedge.Vertex.RIGHT;}
if((a.getX()*b.getX()<0.0)||(a.getY()*b.getY()<0.0)){return jsts.triangulate.quadedge.Vertex.BEHIND;}
if(a.magn()<b.magn()){return jsts.triangulate.quadedge.Vertex.BEYOND;}
if(p0.equals(p2)){return jsts.triangulate.quadedge.Vertex.ORIGIN;}
if(p1.equals(p2)){return jsts.triangulate.quadedge.Vertex.DESTINATION;}
return jsts.triangulate.quadedge.Vertex.BETWEEN;};jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(v){return((this.p.x*v.getY())-(this.p.y*v.getX()));};jsts.triangulate.quadedge.Vertex.prototype.dot=function(v){return((this.p.x*v.getX())+(this.p.y*v.getY()));};jsts.triangulate.quadedge.Vertex.prototype.times=function(c){return new jsts.triangulate.quadedge.Vertex(c*this.p.x,c*this.p.y);};jsts.triangulate.quadedge.Vertex.prototype.sum=function(v){return new jsts.triangulate.quadedge.Vertex(this.p.x+v.getX(),this.p.y+
v.getY());};jsts.triangulate.quadedge.Vertex.prototype.sub=function(v){return new jsts.triangulate.quadedge.Vertex(this.p.x-v.getX(),this.p.y-
v.getY());};jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return(Math.sqrt((this.p.x*this.p.x)+(this.p.y*this.p.y)));};jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,-this.p.x);};jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(a,b,c){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(a.p,b.p,c.p,this.p);};jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(b,c){return((b.p.x-this.p.x)*(c.p.y-this.p.y)-(b.p.y-this.p.y)*(c.p.x-this.p.x)>0);};jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(e){return this.isCCW(e.dest(),e.orig());};jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(e){return this.isCCW(e.orig(),e.dest());};jsts.triangulate.quadedge.Vertex.prototype.bisector=function(a,b){var dx,dy,l1,l2;dx=b.getX()-a.getX();dy=b.getY()-a.getY();l1=new jsts.algorithm.HCoordinate(a.getX()+(dx/2.0),a.getY()+
(dy/2.0),1.0);l2=new jsts.algorithm.HCoordinate(a.getX()-dy+(dx/2.0),a.getY()+
dx+(dy/2.0),1.0);return new jsts.algorithm.HCoordinate(l1,l2);};jsts.triangulate.quadedge.Vertex.prototype.distance=function(v1,v2){return v1.p.distance(v2.p);};jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(b,c){var x,radius,edgeLength,el;x=this.circleCenter(b,c);radius=this.distance(x,b);edgeLength=this.distance(this,b);el=this.distance(b,c);if(el<edgeLength){edgeLength=el;}
el=this.distance(c,this);if(el<edgeLength){edgeLength=el;}
return radius/edgeLength;};jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(a){var xm,ym;xm=(this.p.x+a.getX())/2.0;ym=(this.p.y+a.getY())/2.0;return new jsts.triangulate.quadedge.Vertex(xm,ym);};jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(b,c){var a,cab,cbc,hcc,cc;a=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY());cab=this.bisector(a,b);cbc=this.bisector(b,c);hcc=new jsts.algorithm.HCoordinate(cab,cbc);cc=null;try{cc=new jsts.triangulate.quadedge.Vertex(hcc.getX(),hcc.getY());}catch(err){}
return cc;};jsts.operation.valid.IsValidOp=function(parentGeometry){this.parentGeometry=parentGeometry;this.isSelfTouchingRingFormingHoleValid=false;this.validErr=null;};jsts.operation.valid.IsValidOp.isValid=function(arg){if(arguments[0]instanceof jsts.geom.Coordinate){if(isNaN(arg.x)){return false;}
if(!isFinite(arg.x)&&!isNaN(arg.x)){return false;}
if(isNaN(arg.y)){return false;}
if(!isFinite(arg.y)&&!isNaN(arg.y)){return false;}
return true;}else{var isValidOp=new jsts.operation.valid.IsValidOp(arg);return isValidOp.isValid();}};jsts.operation.valid.IsValidOp.findPtNotNode=function(testCoords,searchRing,graph){var searchEdge=graph.findEdge(searchRing);var eiList=searchEdge.getEdgeIntersectionList();for(var i=0;i<testCoords.length;i++){var pt=testCoords[i];if(!eiList.isIntersection(pt)){return pt;}}
return null;};jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(isValid){this.isSelfTouchingRingFormingHoleValid=isValid;};jsts.operation.valid.IsValidOp.prototype.isValid=function(){this.checkValid(this.parentGeometry);return this.validErr==null;};jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){this.checkValid(this.parentGeometry);return this.validErr;};jsts.operation.valid.IsValidOp.prototype.checkValid=function(g){this.validErr=null;if(g.isEmpty()){return;}
if(g instanceof jsts.geom.Point){this.checkValidPoint(g);}else if(g instanceof jsts.geom.MultiPoint){this.checkValidMultiPoint(g);}else if(g instanceof jsts.geom.LinearRing){this.checkValidLinearRing(g);}else if(g instanceof jsts.geom.LineString){this.checkValidLineString(g);}else if(g instanceof jsts.geom.Polygon){this.checkValidPolygon(g);}else if(g instanceof jsts.geom.MultiPolygon){this.checkValidMultiPolygon(g);}else if(g instanceof jsts.geom.GeometryCollection){this.checkValidGeometryCollection(g);}else{throw g.constructor;}};jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(g){this.checkInvalidCoordinates(g.getCoordinates());};jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(g){this.checkInvalidCoordinates(g.getCoordinates());};jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(g){this.checkInvalidCoordinates(g.getCoordinates());if(this.validErr!=null){return;}
var graph=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(graph);};jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(g){this.checkInvalidCoordinates(g.getCoordinates());if(this.validErr!=null){return;}
this.checkClosedRing(g);if(this.validErr!=null){return;}
var graph=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(graph);if(this.validErr!=null){return;}
var li=new jsts.algorithm.RobustLineIntersector();graph.computeSelfNodes(li,true);this.checkNoSelfIntersectingRings(graph);};jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(g){this.checkInvalidCoordinates(g);if(this.validErr!=null){return;}
this.checkClosedRings(g);if(this.validErr!=null){return;}
var graph=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(graph);if(this.validErr!=null){return;}
this.checkConsistentArea(graph);if(this.validErr!=null){return;}
if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(graph);if(this.validErr!=null){return;}}
this.checkHolesInShell(g,graph);if(this.validErr!=null){return;}
this.checkHolesNotNested(g,graph);if(this.validErr!=null){return;}
this.checkConnectedInteriors(graph);};jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(g){var il=g.getNumGeometries();for(var i=0;i<il;i++){var p=g.getGeometryN(i);this.checkInvalidCoordinates(p);if(this.validErr!=null){return;}
this.checkClosedRings(p);if(this.validErr!=null){return;}}
var graph=new jsts.geomgraph.GeometryGraph(0,g);this.checkTooFewPoints(graph);if(this.validErr!=null){return;}
this.checkConsistentArea(graph);if(this.validErr!=null){return;}
if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(graph);if(this.validErr!=null){return;}}
for(var i=0;i<g.getNumGeometries();i++){var p=g.getGeometryN(i);this.checkHolesInShell(p,graph);if(this.validErr!=null){return;}}
for(var i=0;i<g.getNumGeometries();i++){var p=g.getGeometryN(i);this.checkHolesNotNested(p,graph);if(this.validErr!=null){return;}}
this.checkShellsNotNested(g,graph);if(this.validErr!=null){return;}
this.checkConnectedInteriors(graph);};jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(gc){for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this.checkValid(g);if(this.validErr!=null){return;}}};jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(arg){if(arg instanceof jsts.geom.Polygon){var poly=arg;this.checkInvalidCoordinates(poly.getExteriorRing().getCoordinates());if(this.validErr!=null){return;}
for(var i=0;i<poly.getNumInteriorRing();i++){this.checkInvalidCoordinates(poly.getInteriorRingN(i).getCoordinates());if(this.validErr!=null){return;}}}else{var coords=arg;for(var i=0;i<coords.length;i++){if(!jsts.operation.valid.IsValidOp.isValid(coords[i])){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,coords[i]);return;}}}};jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(poly){this.checkClosedRing(poly.getExteriorRing());if(this.validErr!=null){return;}
for(var i=0;i<poly.getNumInteriorRing();i++){this.checkClosedRing(poly.getInteriorRingN(i));if(this.validErr!=null){return;}}};jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(ring){if(!ring.isClosed()){var pt=null;if(ring.getNumPoints()>=1){pt=ring.getCoordinateN(0);}
this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,pt);}};jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(graph){if(graph.hasTooFewPoints){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,graph.getInvalidPoint());return;}};jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(graph){var cat=new jsts.operation.valid.ConsistentAreaTester(graph);var isValidArea=cat.isNodeConsistentArea();if(!isValidArea){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,cat.getInvalidPoint());return;}
if(cat.hasDuplicateRings()){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,cat.getInvalidPoint());}};jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(graph){for(var i=graph.getEdgeIterator();i.hasNext();){var e=i.next();this.checkNoSelfIntersectingRing(e.getEdgeIntersectionList());if(this.validErr!=null){return;}}};jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(eiList){var nodeSet=[];var isFirst=true;for(var i=eiList.iterator();i.hasNext();){var ei=i.next();if(isFirst){isFirst=false;continue;}
if(nodeSet.indexOf(ei.coord)>=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,ei.coord);return;}else{nodeSet.push(ei.coord);}}};jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(p,graph){var shell=p.getExteriorRing();var pir=new jsts.algorithm.MCPointInRing(shell);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);var holePt=jsts.operation.valid.IsValidOp.findPtNotNode(hole.getCoordinates(),shell,graph);if(holePt==null){return;}
var outside=!pir.isInside(holePt);if(outside){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,holePt);return;}}};jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(p,graph){var nestedTester=new jsts.operation.valid.IndexedNestedRingTester(graph);for(var i=0;i<p.getNumInteriorRing();i++){var innerHole=p.getInteriorRingN(i);nestedTester.add(innerHole);}
var isNonNested=nestedTester.isNonNested();if(!isNonNested){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,nestedTester.getNestedPoint());}};jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(mp,graph){for(var i=0;i<mp.getNumGeometries();i++){var p=mp.getGeometryN(i);var shell=p.getExteriorRing();for(var j=0;j<mp.getNumGeometries();j++){if(i==j){continue;}
var p2=mp.getGeometryN(j);this.checkShellNotNested(shell,p2,graph);if(this.validErr!=null){return;}}}};jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(shell,p,graph){var shellPts=shell.getCoordinates();var polyShell=p.getExteriorRing();var polyPts=polyShell.getCoordinates();var shellPt=jsts.operation.valid.IsValidOp.findPtNotNode(shellPts,polyShell,graph);if(shellPt==null){return;}
var insidePolyShell=jsts.algorithm.CGAlgorithms.isPointInRing(shellPt,polyPts);if(!insidePolyShell){return;}
if(p.getNumInteriorRing()<=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,shellPt);return;}
var badNestedPt=null;for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);badNestedPt=this.checkShellInsideHole(shell,hole,graph);if(badNestedPt==null){return;}}
this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,badNestedPt);};jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(shell,hole,graph){var shellPts=shell.getCoordinates();var holePts=hole.getCoordinates();var shellPt=jsts.operation.valid.IsValidOp.findPtNotNode(shellPts,hole,graph);if(shellPt!=null){var insideHole=jsts.algorithm.CGAlgorithms.isPointInRing(shellPt,holePts);if(!insideHole){return shellPt;}}
var holePt=jsts.operation.valid.IsValidOp.findPtNotNode(holePts,shell,graph);if(holePt!=null){var insideShell=jsts.algorithm.CGAlgorithms.isPointInRing(holePt,shellPts);if(insideShell){return holePt;}
return null;}
jsts.util.Assert.shouldNeverReachHere('points in shell and hole appear to be equal');return null;};jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(graph){var cit=new jsts.operation.valid.ConnectedInteriorTester(graph);if(!cit.isInteriorsConnected()){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,cit.getCoordinate());}};jsts.algorithm.RobustDeterminant=function(){};jsts.algorithm.RobustDeterminant.signOfDet2x2=function(x1,y1,x2,y2){var sign,swap,k,count;count=0;sign=1;if((x1===0.0)||(y2===0.0)){if((y1===0.0)||(x2===0.0)){return 0;}
else if(y1>0){if(x2>0){return-sign;}
else{return sign;}}
else{if(x2>0){return sign;}
else{return-sign;}}}
if((y1===0.0)||(x2===0.0)){if(y2>0){if(x1>0){return sign;}
else{return-sign;}}
else{if(x1>0){return-sign;}
else{return sign;}}}
if(0.0<y1){if(0.0<y2){if(y1>y2){sign=-sign;swap=x1;x1=x2;x2=swap;swap=y1;y1=y2;y2=swap;}}
else{if(y1<=-y2){sign=-sign;x2=-x2;y2=-y2;}
else{swap=x1;x1=-x2;x2=swap;swap=y1;y1=-y2;y2=swap;}}}
else{if(0.0<y2){if(-y1<=y2){sign=-sign;x1=-x1;y1=-y1;}
else{swap=-x1;x1=x2;x2=swap;swap=-y1;y1=y2;y2=swap;}}
else{if(y1>=y2){x1=-x1;y1=-y1;x2=-x2;y2=-y2;}
else{sign=-sign;swap=-x1;x1=-x2;x2=swap;swap=-y1;y1=-y2;y2=swap;}}}
if(0.0<x1){if(0.0<x2){if(x1>x2){return sign;}}
else{return sign;}}
else{if(0.0<x2){return-sign;}
else{if(x1>=x2){sign=-sign;x1=-x1;x2=-x2;}
else{return-sign;}}}
while(true){count=count+1;k=Math.floor(x2/x1);x2=x2-k*x1;y2=y2-k*y1;if(y2<0.0){return-sign;}
if(y2>y1){return sign;}
if(x1>x2+x2){if(y1<y2+y2){return sign;}}
else{if(y1>y2+y2){return-sign;}
else{x2=x1-x2;y2=y1-y2;sign=-sign;}}
if(y2===0.0){if(x2===0.0){return 0;}
else{return-sign;}}
if(x2===0.0){return sign;}
k=Math.floor(x1/x2);x1=x1-k*x2;y1=y1-k*y2;if(y1<0.0){return sign;}
if(y1>y2){return-sign;}
if(x2>x1+x1){if(y2<y1+y1){return-sign;}}
else{if(y2>y1+y1){return sign;}
else{x1=x2-x1;y1=y2-y1;sign=-sign;}}
if(y1===0.0){if(x1===0.0){return 0;}
else{return sign;}}
if(x1===0.0){return-sign;}}};jsts.algorithm.RobustDeterminant.orientationIndex=function(p1,p2,q){var dx1=p2.x-p1.x;var dy1=p2.y-p1.y;var dx2=q.x-p2.x;var dy2=q.y-p2.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(dx1,dy1,dx2,dy2);};jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4);this.subnode[0]=null;this.subnode[1]=null;this.subnode[2]=null;this.subnode[3]=null;this.items=[];};jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(env,centre){var subnodeIndex=-1;if(env.getMinX()>=centre.x){if(env.getMinY()>=centre.y){subnodeIndex=3;}
if(env.getMaxY()<=centre.y){subnodeIndex=1;}}
if(env.getMaxX()<=centre.x){if(env.getMinY()>=centre.y){subnodeIndex=2;}
if(env.getMaxY()<=centre.y){subnodeIndex=0;}}
return subnodeIndex;};jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items;};jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return(this.items.length>0);};jsts.index.quadtree.NodeBase.prototype.add=function(item){this.items.push(item);};jsts.index.quadtree.NodeBase.prototype.remove=function(itemEnv,item){if(!this.isSearchMatch(itemEnv)){return false;}
var found=false,i=0;for(i;i<4;i++){if(this.subnode[i]!==null){found=this.subnode[i].remove(itemEnv,item);if(found){if(this.subnode[i].isPrunable()){this.subnode[i]=null;}
break;}}}
if(found){return found;}
if(this.items.indexOf(item)!==-1){for(var i=this.items.length-1;i>=0;i--){if(this.items[i]===item){this.items.splice(i,1);}}
found=true;}
return found;};jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems());};jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){return true;}}
return false;};jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var isEmpty=true;if(this.items.length>0){isEmpty=false;}
var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){if(!this.subnode[i].isEmpty()){isEmpty=false;}}}
return isEmpty;};jsts.index.quadtree.NodeBase.prototype.addAllItems=function(resultItems){resultItems=resultItems.concat(this.items);var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){resultItems=this.subnode[i].addAllItems(resultItems);}}
return resultItems;};jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=function(searchEnv,resultItems){if(!this.isSearchMatch(searchEnv)){return;}
resultItems=resultItems.concat(this.items);var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){resultItems=this.subnode[i].addAllItemsFromOverlapping(searchEnv,resultItems);}}};jsts.index.quadtree.NodeBase.prototype.visit=function(searchEnv,visitor){if(!this.isSearchMatch(searchEnv)){return;}
this.visitItems(searchEnv,visitor);var i=0;for(i;i<4;i++){if(this.subnode[i]!==null){this.subnode[i].visit(searchEnv,visitor);}}};jsts.index.quadtree.NodeBase.prototype.visitItems=function(env,visitor){var i=0,il=this.items.length;for(i;i<il;i++){visitor.visitItem(this.items[i]);}};jsts.index.quadtree.NodeBase.prototype.depth=function(){var maxSubDepth=0,i=0,sqd;for(i;i<4;i++){if(this.subnode[i]!==null){sqd=this.subnode[i].depth();if(sqd>maxSubDepth){maxSubDepth=sqd;}}}
return maxSubDepth+1;};jsts.index.quadtree.NodeBase.prototype.size=function(){var subSize=0,i=0;for(i;i<4;i++){if(this.subnode[i]!==null){subSize+=this.subnode[i].size();}}
return subSize+this.items.length;};jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var subSize=0,i=0;for(i;i<4;i++){if(this.subnode[i]!==null){subSize+=this.subnode[i].size();}}
return subSize+1;};jsts.index.quadtree.Node=function(env,level){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments);this.env=env;this.level=level;this.centre=new jsts.geom.Coordinate();this.centre.x=(env.getMinX()+env.getMaxX())/2;this.centre.y=(env.getMinY()+env.getMaxY())/2;};jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase();jsts.index.quadtree.Node.createNode=function(env){var key,node;key=new jsts.index.quadtree.Key(env);node=new jsts.index.quadtree.Node(key.getEnvelope(),key.getLevel());return node;};jsts.index.quadtree.Node.createExpanded=function(node,addEnv){var expandEnv=new jsts.geom.Envelope(addEnv),largerNode;if(node!==null){expandEnv.expandToInclude(node.env);}
largerNode=jsts.index.quadtree.Node.createNode(expandEnv);if(node!==null){largerNode.insertNode(node);}
return largerNode;};jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env;};jsts.index.quadtree.Node.prototype.isSearchMatch=function(searchEnv){return this.env.intersects(searchEnv);};jsts.index.quadtree.Node.prototype.getNode=function(searchEnv){var subnodeIndex=this.getSubnodeIndex(searchEnv,this.centre),node;if(subnodeIndex!==-1){node=this.getSubnode(subnodeIndex);return node.getNode(searchEnv);}else{return this;}};jsts.index.quadtree.Node.prototype.find=function(searchEnv){var subnodeIndex=this.getSubnodeIndex(searchEnv,this.centre),node;if(subnodeIndex===-1){return this;}
if(this.subnode[subnodeIndex]!==null){node=this.subnode[subnodeIndex];return node.find(searchEnv);}
return this;};jsts.index.quadtree.Node.prototype.insertNode=function(node){var index=this.getSubnodeIndex(node.env,this.centre),childNode;if(node.level===this.level-1){this.subnode[index]=node;}else{childNode=this.createSubnode(index);childNode.insertNode(node);this.subnode[index]=childNode;}};jsts.index.quadtree.Node.prototype.getSubnode=function(index){if(this.subnode[index]===null){this.subnode[index]=this.createSubnode(index);}
return this.subnode[index];};jsts.index.quadtree.Node.prototype.createSubnode=function(index){var minx=0.0,maxx=0.0,miny=0.0,maxy=0.0,sqEnv,node;switch(index){case 0:minx=this.env.getMinX();maxx=this.centre.x;miny=this.env.getMinY();maxy=this.centre.y;break;case 1:minx=this.centre.x;maxx=this.env.getMaxX();miny=this.env.getMinY();maxy=this.centre.y;break;case 2:minx=this.env.getMinX();maxx=this.centre.x;miny=this.centre.y;maxy=this.env.getMaxY();break;case 3:minx=this.centre.x;maxx=this.env.getMaxX();miny=this.centre.y;maxy=this.env.getMaxY();break;}
sqEnv=new jsts.geom.Envelope(minx,maxx,miny,maxy);node=new jsts.index.quadtree.Node(sqEnv,this.level-1);return node;};(function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null;this.vertex=null;this.next=null;this.data=null;};var QuadEdge=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(o,d){var q0,q1,q2,q3,base;q0=new QuadEdge();q1=new QuadEdge();q2=new QuadEdge();q3=new QuadEdge();q0.rot=q1;q1.rot=q2;q2.rot=q3;q3.rot=q0;q0.setNext(q0);q1.setNext(q3);q2.setNext(q2);q3.setNext(q1);base=q0;base.setOrig(o);base.setDest(d);return base;};jsts.triangulate.quadedge.QuadEdge.connect=function(a,b){var e=QuadEdge.makeEdge(a.dest(),b.orig());QuadEdge.splice(e,a.lNext());QuadEdge.splice(e.sym(),b);return e;};jsts.triangulate.quadedge.QuadEdge.splice=function(a,b){var alpha,beta,t1,t2,t3,t4;alpha=a.oNext().rot;beta=b.oNext().rot;t1=b.oNext();t2=a.oNext();t3=beta.oNext();t4=alpha.oNext();a.setNext(t1);b.setNext(t2);alpha.setNext(t3);beta.setNext(t4);};jsts.triangulate.quadedge.QuadEdge.swap=function(e){var a,b;a=e.oPrev();b=e.sym().oPrev();QuadEdge.splice(e,a);QuadEdge.splice(e.sym(),b);QuadEdge.splice(e,a.lNext());QuadEdge.splice(e.sym(),b.lNext());e.setOrig(a.dest());e.setDest(b.dest());};jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){if(this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0){return this;}
else{return this.sym();}};jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(data){this.data=data;};jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data;};jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null;};jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return this.rot!==null;};jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(next){this.next=next;};jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym();};jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot;};jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next;};jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot;};jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym();};jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot();};jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot;};jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym();};jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot();};jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext();};jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(o){this.vertex=o;};jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(d){this.sym().setOrig(d);};jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex;};jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig();};jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate());};jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(qe){if(this.equalsOriented(qe)){return true;}
if(this.equalsOriented(qe.sym())){return true;}
return false;};jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(qe){if(this.orig().getCoordinate().equals2D(qe.orig().getCoordinate())&&this.dest().getCoordinate().equals2D(qe.dest().getCoordinate())){return true;}
return false;};jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function()
{return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate());};jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var p0,p1;p0=this.vertex.getCoordinate();p1=this.dest().getCoordinate();return jsts.io.WKTWriter.toLineString(p0,p1);};})();(function(){var Assert=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(edge,p0,p1,label){this.edge=edge;if(p0&&p1){this.init(p0,p1);}
if(label){this.label=label||null;}};jsts.geomgraph.EdgeEnd.prototype.edge=null;jsts.geomgraph.EdgeEnd.prototype.label=null;jsts.geomgraph.EdgeEnd.prototype.node=null;jsts.geomgraph.EdgeEnd.prototype.p0=null;jsts.geomgraph.EdgeEnd.prototype.p1=null;jsts.geomgraph.EdgeEnd.prototype.dx=null;jsts.geomgraph.EdgeEnd.prototype.dy=null;jsts.geomgraph.EdgeEnd.prototype.quadrant=null;jsts.geomgraph.EdgeEnd.prototype.init=function(p0,p1){this.p0=p0;this.p1=p1;this.dx=p1.x-p0.x;this.dy=p1.y-p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy);Assert.isTrue(!(this.dx===0&&this.dy===0),'EdgeEnd with identical endpoints found');};jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge;};jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label;};jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0;};jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1;};jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant;};jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx;};jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy;};jsts.geomgraph.EdgeEnd.prototype.setNode=function(node){this.node=node;};jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node;};jsts.geomgraph.EdgeEnd.prototype.compareTo=function(e){return this.compareDirection(e);};jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(e){if(this.dx===e.dx&&this.dy===e.dy)
return 0;if(this.quadrant>e.quadrant)
return 1;if(this.quadrant<e.quadrant)
return-1;return jsts.algorithm.CGAlgorithms.computeOrientation(e.p0,e.p1,this.p1);};jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(boundaryNodeRule){};})();jsts.operation.buffer.RightmostEdgeFinder=function(){};jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1;jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe;};jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord;};jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(dirEdgeList){for(var i=dirEdgeList.iterator();i.hasNext();){var de=i.next();if(!de.isForward())
continue;this.checkForRightmostCoordinate(de);}
jsts.util.Assert.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),'inconsistency in rightmost processing');if(this.minIndex===0){this.findRightmostEdgeAtNode();}else{this.findRightmostEdgeAtVertex();}
this.orientedDe=this.minDe;var rightmostSide=this.getRightmostSide(this.minDe,this.minIndex);if(rightmostSide==jsts.geomgraph.Position.LEFT){this.orientedDe=this.minDe.getSym();}};jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var node=this.minDe.getNode();var star=node.getEdges();this.minDe=star.getRightmostEdge();if(!this.minDe.isForward()){this.minDe=this.minDe.getSym();this.minIndex=this.minDe.getEdge().getCoordinates().length-1;}};jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var pts=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<pts.length,'rightmost point expected to be interior vertex of edge');var pPrev=pts[this.minIndex-1];var pNext=pts[this.minIndex+1];var orientation=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,pNext,pPrev);var usePrev=false;if(pPrev.y<this.minCoord.y&&pNext.y<this.minCoord.y&&orientation===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE){usePrev=true;}else if(pPrev.y>this.minCoord.y&&pNext.y>this.minCoord.y&&orientation===jsts.algorithm.CGAlgorithms.CLOCKWISE){usePrev=true;}
if(usePrev){this.minIndex=this.minIndex-1;}};jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(de){var coord=de.getEdge().getCoordinates();for(var i=0;i<coord.length-1;i++){if(this.minCoord===null||coord[i].x>this.minCoord.x){this.minDe=de;this.minIndex=i;this.minCoord=coord[i];}}};jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(de,index){var side=this.getRightmostSideOfSegment(de,index);if(side<0)
side=this.getRightmostSideOfSegment(de,index-1);if(side<0){this.minCoord=null;this.checkForRightmostCoordinate(de);}
return side;};jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(de,i){var e=de.getEdge();var coord=e.getCoordinates();if(i<0||i+1>=coord.length)
return-1;if(coord[i].y==coord[i+1].y)
return-1;var pos=jsts.geomgraph.Position.LEFT;if(coord[i].y<coord[i+1].y)
pos=jsts.geomgraph.Position.RIGHT;return pos;};(function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(subdiv){this.subdiv=subdiv;this.isUsingTolerance=subdiv.getTolerance()>0.0;};jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(vertices){var i=0,il=vertices.length,v;for(i;i<il;i++){v=vertices[i];this.insertSite(v);}};jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(v){var e,base,startEdge,t;e=this.subdiv.locate(v);if(this.subdiv.isVertexOfEdge(e,v)){return e;}
else if(this.subdiv.isOnEdge(e,v.getCoordinate())){e=e.oPrev();this.subdiv.delete_jsts(e.oNext());}
base=this.subdiv.makeEdge(e.orig(),v);jsts.triangulate.quadedge.QuadEdge.splice(base,e);startEdge=base;do{base=this.subdiv.connect(e,base.sym());e=base.oPrev();}while(e.lNext()!=startEdge);do{t=e.oPrev();if(t.dest().rightOf(e)&&v.isInCircle(e.orig(),t.dest(),e.dest())){jsts.triangulate.quadedge.QuadEdge.swap(e);e=e.oPrev();}else if(e.oNext()==startEdge){return base;}else{e=e.oNext().lPrev();}}while(true);};}());jsts.algorithm.CentroidArea=function(){this.basePt=null;this.triangleCent3=new jsts.geom.Coordinate();this.centSum=new jsts.geom.Coordinate();this.cg3=new jsts.geom.Coordinate();};jsts.algorithm.CentroidArea.prototype.basePt=null;jsts.algorithm.CentroidArea.prototype.triangleCent3=null;jsts.algorithm.CentroidArea.prototype.areasum2=0;jsts.algorithm.CentroidArea.prototype.cg3=null;jsts.algorithm.CentroidArea.prototype.centSum=null;jsts.algorithm.CentroidArea.prototype.totalLength=0.0;jsts.algorithm.CentroidArea.prototype.add=function(geom){if(geom instanceof jsts.geom.Polygon){var poly=geom;this.setBasePoint(poly.getExteriorRing().getCoordinateN(0));this.add3(poly);}else if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPolygon){var gc=geom;for(var i=0;i<gc.getNumGeometries();i++){this.add(gc.getGeometryN(i));}}else if(geom instanceof Array){this.add2(geom);}};jsts.algorithm.CentroidArea.prototype.add2=function(ring){this.setBasePoint(ring[0]);this.addShell(ring);};jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var cent=new jsts.geom.Coordinate();if(Math.abs(this.areasum2)>0.0){cent.x=this.cg3.x/3/this.areasum2;cent.y=this.cg3.y/3/this.areasum2;}else{cent.x=this.centSum.x/this.totalLength;cent.y=this.centSum.y/this.totalLength;}
return cent;};jsts.algorithm.CentroidArea.prototype.setBasePoint=function(basePt){if(this.basePt==null)
this.basePt=basePt;};jsts.algorithm.CentroidArea.prototype.add3=function(poly){this.addShell(poly.getExteriorRing().getCoordinates());for(var i=0;i<poly.getNumInteriorRing();i++){this.addHole(poly.getInteriorRingN(i).getCoordinates());}};jsts.algorithm.CentroidArea.prototype.addShell=function(pts){var isPositiveArea=!jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.basePt,pts[i],pts[i+1],isPositiveArea);}
this.addLinearSegments(pts);};jsts.algorithm.CentroidArea.prototype.addHole=function(pts){var isPositiveArea=jsts.algorithm.CGAlgorithms.isCCW(pts);for(var i=0;i<pts.length-1;i++){this.addTriangle(this.basePt,pts[i],pts[i+1],isPositiveArea);}
this.addLinearSegments(pts);};jsts.algorithm.CentroidArea.prototype.addTriangle=function(p0,p1,p2,isPositiveArea){var sign=(isPositiveArea)?1.0:-1.0;jsts.algorithm.CentroidArea.centroid3(p0,p1,p2,this.triangleCent3);var area2=jsts.algorithm.CentroidArea.area2(p0,p1,p2);this.cg3.x+=sign*area2*this.triangleCent3.x;this.cg3.y+=sign*area2*this.triangleCent3.y;this.areasum2+=sign*area2;};jsts.algorithm.CentroidArea.centroid3=function(p1,p2,p3,c){c.x=p1.x+p2.x+p3.x;c.y=p1.y+p2.y+p3.y;return;};jsts.algorithm.CentroidArea.area2=function(p1,p2,p3){return(p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y);};jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(pts){for(var i=0;i<pts.length-1;i++){var segmentLen=pts[i].distance(pts[i+1]);this.totalLength+=segmentLen;var midx=(pts[i].x+pts[i+1].x)/2;this.centSum.x+=segmentLen*midx;var midy=(pts[i].y+pts[i+1].y)/2;this.centSum.y+=segmentLen*midy;}};jsts.geomgraph.index.SweepLineSegment=function(edge,ptIndex){this.edge=edge;this.ptIndex=ptIndex;this.pts=edge.getCoordinates();};jsts.geomgraph.index.SweepLineSegment.prototype.edge=null;jsts.geomgraph.index.SweepLineSegment.prototype.pts=null;jsts.geomgraph.index.SweepLineSegment.prototype.ptIndex=null;jsts.geomgraph.index.SweepLineSegment.prototype.getMinX=function(){var x1=this.pts[this.ptIndex].x;var x2=this.pts[this.ptIndex+1].x;if(x1<x2){return x1;}
return x2;};jsts.geomgraph.index.SweepLineSegment.prototype.getMaxX=function(){var x1=this.pts[this.ptIndex].x;var x2=this.pts[this.ptIndex+1].x;if(x1>x2){return x1;}
return x2;};jsts.geomgraph.index.SweepLineSegment.prototype.computeIntersections=function(ss,si){si.addIntersections(this.edge,this.ptIndex,ss.edge,ss.ptIndex);};jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments);this.origin=new jsts.geom.Coordinate(0.0,0.0);};jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase();jsts.index.quadtree.Root.prototype.insert=function(itemEnv,item){var index=this.getSubnodeIndex(itemEnv,this.origin);if(index===-1){this.add(item);return;}
var node=this.subnode[index];if(node===null||!node.getEnvelope().contains(itemEnv)){var largerNode=jsts.index.quadtree.Node.createExpanded(node,itemEnv);this.subnode[index]=largerNode;}
this.insertContained(this.subnode[index],itemEnv,item);};jsts.index.quadtree.Root.prototype.insertContained=function(tree,itemEnv,item){var isZeroX,isZeroY,node;isZeroX=jsts.index.IntervalSize.isZeroWidth(itemEnv.getMinX(),itemEnv.getMaxX());isZeroY=jsts.index.IntervalSize.isZeroWidth(itemEnv.getMinY(),itemEnv.getMaxY());if(isZeroX||isZeroY){node=tree.find(itemEnv);}else{node=tree.getNode(itemEnv);}
node.add(item);};jsts.index.quadtree.Root.prototype.isSearchMatch=function(searchEnv){return true;};jsts.geomgraph.index.MonotoneChainIndexer=function(){};jsts.geomgraph.index.MonotoneChainIndexer.toIntArray=function(list){var array=[];for(var i=list.iterator();i.hasNext();){var element=i.next();array.push(element);}
return array;};jsts.geomgraph.index.MonotoneChainIndexer.prototype.getChainStartIndices=function(pts){var start=0;var startIndexList=new javascript.util.ArrayList();startIndexList.add(start);do{var last=this.findChainEnd(pts,start);startIndexList.add(last);start=last;}while(start<pts.length-1);var startIndex=jsts.geomgraph.index.MonotoneChainIndexer.toIntArray(startIndexList);return startIndex;};jsts.geomgraph.index.MonotoneChainIndexer.prototype.findChainEnd=function(pts,start){var chainQuad=jsts.geomgraph.Quadrant.quadrant(pts[start],pts[start+1]);var last=start+1;while(last<pts.length){var quad=jsts.geomgraph.Quadrant.quadrant(pts[last-1],pts[last]);if(quad!=chainQuad){break;}
last++;}
return last-1;};jsts.noding.IntersectionAdder=function(li){this.li=li;};jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector();jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder;jsts.noding.IntersectionAdder.isAdjacentSegments=function(i1,i2){return Math.abs(i1-i2)===1;};jsts.noding.IntersectionAdder.prototype._hasIntersection=false;jsts.noding.IntersectionAdder.prototype.hasProper=false;jsts.noding.IntersectionAdder.prototype.hasProperInterior=false;jsts.noding.IntersectionAdder.prototype.hasInterior=false;jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null;jsts.noding.IntersectionAdder.prototype.li=null;jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null;jsts.noding.IntersectionAdder.prototype.numIntersections=0;jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0;jsts.noding.IntersectionAdder.prototype.numProperIntersections=0;jsts.noding.IntersectionAdder.prototype.numTests=0;jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li;};jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint;};jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection;};jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper;};jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior;};jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior;};jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(e0,segIndex0,e1,segIndex1){if(e0==e1){if(this.li.getIntersectionNum()==1){if(jsts.noding.IntersectionAdder.isAdjacentSegments(segIndex0,segIndex1))
return true;if(e0.isClosed()){var maxSegIndex=e0.size()-1;if((segIndex0===0&&segIndex1===maxSegIndex)||(segIndex1===0&&segIndex0===maxSegIndex)){return true;}}}}
return false;};jsts.noding.IntersectionAdder.prototype.processIntersections=function(e0,segIndex0,e1,segIndex1){if(e0===e1&&segIndex0===segIndex1)
return;this.numTests++;var p00=e0.getCoordinates()[segIndex0];var p01=e0.getCoordinates()[segIndex0+1];var p10=e1.getCoordinates()[segIndex1];var p11=e1.getCoordinates()[segIndex1+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){this.numIntersections++;if(this.li.isInteriorIntersection()){this.numInteriorIntersections++;this.hasInterior=true;}
if(!this.isTrivialIntersection(e0,segIndex0,e1,segIndex1)){this._hasIntersection=true;e0.addIntersections(this.li,segIndex0,0);e1.addIntersections(this.li,segIndex1,1);if(this.li.isProper()){this.numProperIntersections++;this.hasProper=true;this.hasProperInterior=true;}}}};jsts.noding.IntersectionAdder.prototype.isDone=function(){return false;};jsts.operation.union.CascadedPolygonUnion=function(polys){this.inputPolys=polys;};jsts.operation.union.CascadedPolygonUnion.union=function(polys){var op=new jsts.operation.union.CascadedPolygonUnion(polys);return op.union();};jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys;jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null;jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4;jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(this.inputPolys.length===0){return null;}
this.geomFactory=this.inputPolys[0].getFactory();var index=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY);for(var i=0,l=this.inputPolys.length;i<l;i++){var item=this.inputPolys[i];index.insert(item.getEnvelopeInternal(),item);}
var itemTree=index.itemsTree();var unionAll=this.unionTree(itemTree);return unionAll;};jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(geomTree){var geoms=this.reduceToGeometries(geomTree);var union=this.binaryUnion(geoms);return union;};jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(geoms,start,end){start=start||0;end=end||geoms.length;if(end-start<=1){var g0=this.getGeometry(geoms,start);return this.unionSafe(g0,null);}
else if(end-start===2){return this.unionSafe(this.getGeometry(geoms,start),this.getGeometry(geoms,start+1));}
else{var mid=parseInt((end+start)/2);var g0=this.binaryUnion(geoms,start,mid);var g1=this.binaryUnion(geoms,mid,end);return this.unionSafe(g0,g1);}};jsts.operation.union.CascadedPolygonUnion.prototype.getGeometry=function(list,index){if(index>=list.length){return null;}
return list[index];};jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(geomTree){var geoms=[];for(var i=0,l=geomTree.length;i<l;i++){var o=geomTree[i],geom=null;if(o instanceof Array){geom=this.unionTree(o);}
else if(o instanceof jsts.geom.Geometry){geom=o;}
geoms.push(geom);}
return geoms;};jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(g0,g1){if(g0===null&&g1===null){return null;}
if(g0===null){return g1.clone();}
if(g1===null){return g0.clone();}
return this.unionOptimized(g0,g1);};jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(g0,g1){var g0Env=g0.getEnvelopeInternal(),g1Env=g1.getEnvelopeInternal();if(!g0Env.intersects(g1Env)){var combo=jsts.geom.util.GeometryCombiner.combine(g0,g1);return combo;}
if(g0.getNumGeometries<=1&&g1.getNumGeometries<=1){return this.unionActual(g0,g1);}
var commonEnv=g0Env.intersection(g1Env);return this.unionUsingEnvelopeIntersection(g0,g1,commonEnv);};jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(g0,g1,common){var disjointPolys=new javascript.util.ArrayList();var g0Int=this.extractByEnvelope(common,g0,disjointPolys);var g1Int=this.extractByEnvelope(common,g1,disjointPolys);var union=this.unionActual(g0Int,g1Int);disjointPolys.add(union);var overallUnion=jsts.geom.util.GeometryCombiner.combine(disjointPolys);return overallUnion;};jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(env,geom,disjointGeoms){var intersectingGeoms=new javascript.util.ArrayList();for(var i=0;i<geom.getNumGeometries();i++){var elem=geom.getGeometryN(i);if(elem.getEnvelopeInternal().intersects(env)){intersectingGeoms.add(elem);}
else{disjointGeoms.add(elem);}}
return this.geomFactory.buildGeometry(intersectingGeoms);};jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(g0,g1){return g0.union(g1);};(function(){jsts.geom.MultiPoint=function(points,factory){this.geometries=points||[];this.factory=factory;};jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint;jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null);};jsts.geom.MultiPoint.prototype.getGeometryN=function(n){return this.geometries[n];};jsts.geom.MultiPoint.prototype.equalsExact=function(other,tolerance){if(!this.isEquivalentClass(other)){return false;}
return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,other,tolerance);};jsts.geom.MultiPoint.prototype.CLASS_NAME='jsts.geom.MultiPoint';})();jsts.operation.buffer.OffsetCurveBuilder=function(precisionModel,bufParams){this.precisionModel=precisionModel;this.bufParams=bufParams;};jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0.0;jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null;jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null;jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams;};jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(inputPts,distance){this.distance=distance;if(this.distance<0.0&&!this.bufParams.isSingleSided())
return null;if(this.distance==0.0)
return null;var posDistance=Math.abs(this.distance);var segGen=this.getSegGen(posDistance);if(inputPts.length<=1){this.computePointCurve(inputPts[0],segGen);}else{if(this.bufParams.isSingleSided()){var isRightSide=distance<0.0;this.computeSingleSidedBufferCurve(inputPts,isRightSide,segGen);}else
this.computeLineBufferCurve(inputPts,segGen);}
var lineCoord=segGen.getCoordinates();return lineCoord;};jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(inputPts,side,distance){this.distance=distance;if(inputPts.length<=2)
return this.getLineCurve(inputPts,distance);if(this.distance==0.0){return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(inputPts);}
var segGen=this.getSegGen(this.distance);this.computeRingBufferCurve(inputPts,side,segGen);return segGen.getCoordinates();};jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(inputPts,distance){this.distance=distance;if(this.distance===0.0)
return null;var isRightSide=this.distance<0.0;var posDistance=Math.abs(this.distance);var segGen=this.getSegGen(posDistance);if(inputPts.length<=1){this.computePointCurve(inputPts[0],segGen);}else{this.computeOffsetCurve(inputPts,isRightSide,segGen);}
var curvePts=segGen.getCoordinates();if(isRightSide)
curvePts.reverse();return curvePts;};jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(pts){var copy=[];for(var i=0;i<pts.length;i++){copy.push(pts[i].clone());}
return copy;};jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(distance){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,distance);};jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100.0;jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(bufDistance){return bufDistance/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR;};jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(pt,segGen){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:segGen.createCircle(pt);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:segGen.createSquare(pt);break;}};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(inputPts,segGen){var distTol=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);var simp1=jsts.operation.buffer.BufferInputLineSimplifier.simplify(inputPts,distTol);var n1=simp1.length-1;segGen.initSideSegments(simp1[0],simp1[1],jsts.geomgraph.Position.LEFT);for(var i=2;i<=n1;i++){segGen.addNextSegment(simp1[i],true);}
segGen.addLastSegment();segGen.addLineEndCap(simp1[n1-1],simp1[n1]);var simp2=jsts.operation.buffer.BufferInputLineSimplifier.simplify(inputPts,-distTol);var n2=simp2.length-1;segGen.initSideSegments(simp2[n2],simp2[n2-1],jsts.geomgraph.Position.LEFT);for(var i=n2-2;i>=0;i--){segGen.addNextSegment(simp2[i],true);}
segGen.addLastSegment();segGen.addLineEndCap(simp2[1],simp2[0]);segGen.closeRing();};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(inputPts,isRightSide,segGen){var distTol=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(isRightSide){segGen.addSegments(inputPts,true);var simp2=jsts.operation.buffer.BufferInputLineSimplifier.simplify(inputPts,-distTol);var n2=simp2.length-1;segGen.initSideSegments(simp2[n2],simp2[n2-1],jsts.geomgraph.Position.LEFT);segGen.addFirstSegment();for(var i=n2-2;i>=0;i--){segGen.addNextSegment(simp2[i],true);}}else{segGen.addSegments(inputPts,false);var simp1=jsts.operation.buffer.BufferInputLineSimplifier.simplify(inputPts,distTol);var n1=simp1.length-1;segGen.initSideSegments(simp1[0],simp1[1],jsts.geomgraph.Position.LEFT);segGen.addFirstSegment();for(var i=2;i<=n1;i++){segGen.addNextSegment(simp1[i],true);}}
segGen.addLastSegment();segGen.closeRing();};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(inputPts,isRightSide,segGen){var distTol=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(isRightSide){var simp2=jsts.operation.buffer.BufferInputLineSimplifier.simplify(inputPts,-distTol);var n2=simp2.length-1;segGen.initSideSegments(simp2[n2],simp2[n2-1],jsts.geomgraph.Position.LEFT);segGen.addFirstSegment();for(var i=n2-2;i>=0;i--){segGen.addNextSegment(simp2[i],true);}}else{var simp1=jsts.operation.buffer.BufferInputLineSimplifier.simplify(inputPts,distTol);var n1=simp1.length-1;segGen.initSideSegments(simp1[0],simp1[1],jsts.geomgraph.Position.LEFT);segGen.addFirstSegment();for(var i=2;i<=n1;i++){segGen.addNextSegment(simp1[i],true);}}
segGen.addLastSegment();};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(inputPts,side,segGen){var distTol=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(side===jsts.geomgraph.Position.RIGHT)
distTol=-distTol;var simp=jsts.operation.buffer.BufferInputLineSimplifier.simplify(inputPts,distTol);var n=simp.length-1;segGen.initSideSegments(simp[n-1],simp[0],side);for(var i=1;i<=n;i++){var addStartPoint=i!==1;segGen.addNextSegment(simp[i],addStartPoint);}
segGen.closeRing();};(function(){var HotPixelSnapAction=function(hotPixel,parentEdge,vertexIndex){this.hotPixel=hotPixel;this.parentEdge=parentEdge;this.vertexIndex=vertexIndex;};HotPixelSnapAction.prototype=new jsts.index.chain.MonotoneChainSelectAction();HotPixelSnapAction.constructor=HotPixelSnapAction;HotPixelSnapAction.prototype.hotPixel=null;HotPixelSnapAction.prototype.parentEdge=null;HotPixelSnapAction.prototype.vertexIndex=null;HotPixelSnapAction.prototype._isNodeAdded=false;HotPixelSnapAction.prototype.isNodeAdded=function(){return this._isNodeAdded;};HotPixelSnapAction.prototype.select=function(mc,startIndex){var ss=mc.getContext();if(this.parentEdge!==null){if(ss===this.parentEdge&&startIndex===this.vertexIndex)
return;}
this._isNodeAdded=this.hotPixel.addSnappedNode(ss,startIndex);};jsts.noding.snapround.MCIndexPointSnapper=function(index){this.index=index;};jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null;jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(hotPixel,parentEdge,vertexIndex){if(arguments.length===1){this.snap2.apply(this,arguments);return;}
var pixelEnv=hotPixel.getSafeEnvelope();var hotPixelSnapAction=new HotPixelSnapAction(hotPixel,parentEdge,vertexIndex);this.index.query(pixelEnv,{visitItem:function(testChain){testChain.select(pixelEnv,hotPixelSnapAction);}});return hotPixelSnapAction.isNodeAdded();};jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(hotPixel){return this.snap(hotPixel,null,-1);};})();(function(){var NodeBase=function(){this.items=new javascript.util.ArrayList();this.subnode=[null,null];};NodeBase.getSubnodeIndex=function(interval,centre){var subnodeIndex=-1;if(interval.min>=centre){subnodeIndex=1;}
if(interval.max<=centre){subnodeIndex=0;}
return subnodeIndex;};NodeBase.prototype.getItems=function(){return this.items;};NodeBase.prototype.add=function(item){this.items.add(item);};NodeBase.prototype.addAllItems=function(items){items.addAll(this.items);var i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){this.subnode[i].addAllItems(items);}}
return items;};NodeBase.prototype.addAllItemsFromOverlapping=function(interval,resultItems){if(interval!==null&&!this.isSearchMatch(interval)){return;}
resultItems.addAll(this.items);if(this.subnode[0]!==null){this.subnode[0].addAllItemsFromOverlapping(interval,resultItems);}
if(this.subnode[1]!==null){this.subnode[1].addAllItemsFromOverlapping(interval,resultItems);}};NodeBase.prototype.remove=function(itemInterval,item){if(!this.isSearchMatch(itemInterval)){return false;}
var found=false,i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){found=this.subnode[i].remove(itemInterval,item);if(found){if(this.subnode[i].isPrunable()){this.subnode[i]=null;}
break;}}}
if(found){return found;}
found=this.items.remove(item);return found;};NodeBase.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems());};NodeBase.prototype.hasChildren=function(){var i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){return true;}}
return false;};NodeBase.prototype.hasItems=function(){return!this.items.isEmpty();};NodeBase.prototype.depth=function(){var maxSubDepth=0,i=0,il=2,sqd;for(i;i<il;i++){if(this.subnode[i]!==null){sqd=this.subnode[i].depth();if(sqd>maxSubDepth){maxSubDepth=sqd;}}}
return maxSubDepth+1;};NodeBase.prototype.size=function(){var subSize=0,i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){subSize+=this.subnode[i].size();}}
return subSize+this.items.size();};NodeBase.prototype.nodeSize=function(){var subSize=0,i=0,il=2;for(i;i<il;i++){if(this.subnode[i]!==null){subSize+=this.subnode[i].nodeSize();}}
return subSize+1;};jsts.index.bintree.NodeBase=NodeBase;})();(function(){var NodeBase=jsts.index.bintree.NodeBase;var Key=jsts.index.bintree.Key;var Interval=jsts.index.bintree.Interval;var Node=function(interval,level){this.items=new javascript.util.ArrayList();this.subnode=[null,null];this.interval=interval;this.level=level;this.centre=(interval.getMin()+interval.getMax())/2;};Node.prototype=new NodeBase();Node.constructor=Node;Node.createNode=function(itemInterval){var key,node;key=new Key(itemInterval);node=new Node(key.getInterval(),key.getLevel());return node;};Node.createExpanded=function(node,addInterval){var expandInt,largerNode;expandInt=new Interval(addInterval);if(node!==null){expandInt.expandToInclude(node.interval);}
largerNode=Node.createNode(expandInt);if(node!==null){largerNode.insert(node);}
return largerNode;};Node.prototype.getInterval=function(){return this.interval;};Node.prototype.isSearchMatch=function(itemInterval){return itemInterval.overlaps(this.interval);};Node.prototype.getNode=function(searchInterval){var subnodeIndex=NodeBase.getSubnodeIndex(searchInterval,this.centre),node;if(subnodeIndex!=-1){node=this.getSubnode(subnodeIndex);return node.getNode(searchInterval);}else{return this;}};Node.prototype.find=function(searchInterval){var subnodeIndex=NodeBase.getSubnodeIndex(searchInterval,this.centre),node;if(subnodeIndex===-1){return this;}
if(this.subnode[subnodeIndex]!==null){node=this.subnode[subnodeIndex];return node.find(searchInterval);}
return this;};Node.prototype.insert=function(node){var index=NodeBase.getSubnodeIndex(node.interval,this.centre),childNode;if(node.level===this.level-1){this.subnode[index]=node;}else{childNode=this.createSubnode(index);childNode.insert(node);this.subnode[index]=childNode;}};Node.prototype.getSubnode=function(index){if(this.subnode[index]===null){this.subnode[index]=this.createSubnode(index);}
return this.subnode[index];};Node.prototype.createSubnode=function(index){var min,max,subInt,node;min=0.0;max=0.0;switch(index){case 0:min=this.interval.getMin();max=this.centre;break;case 1:min=this.centre;max=this.interval.getMax();break;}
subInt=new Interval(min,max);node=new Node(subInt,this.level-1);return node;};jsts.index.bintree.Node=Node;})();(function(){var Node=jsts.index.bintree.Node;var NodeBase=jsts.index.bintree.NodeBase;var Root=function(){this.subnode=[null,null];this.items=new javascript.util.ArrayList();};Root.prototype=new jsts.index.bintree.NodeBase();Root.constructor=Root;Root.origin=0.0;Root.prototype.insert=function(itemInterval,item){var index=NodeBase.getSubnodeIndex(itemInterval,Root.origin),node,largerNode;if(index===-1){this.add(item);return;}
node=this.subnode[index];if(node===null||!node.getInterval().contains(itemInterval)){largerNode=Node.createExpanded(node,itemInterval);this.subnode[index]=largerNode;}
this.insertContained(this.subnode[index],itemInterval,item);};Root.prototype.insertContained=function(tree,itemInterval,item){var isZeroArea,node;isZeroArea=jsts.index.IntervalSize.isZeroWidth(itemInterval.getMin(),itemInterval.getMax());node=isZeroArea?tree.find(itemInterval):tree.getNode(itemInterval);node.add(item);};Root.prototype.isSearchMatch=function(interval){return true;};jsts.index.bintree.Root=Root;})();jsts.geomgraph.Quadrant=function(){};jsts.geomgraph.Quadrant.NE=0;jsts.geomgraph.Quadrant.NW=1;jsts.geomgraph.Quadrant.SW=2;jsts.geomgraph.Quadrant.SE=3;jsts.geomgraph.Quadrant.quadrant=function(dx,dy){if(dx instanceof jsts.geom.Coordinate){return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments);}
if(dx===0.0&&dy===0.0)
throw new jsts.error.IllegalArgumentError('Cannot compute the quadrant for point ( '+dx+', '+dy+' )');if(dx>=0.0){if(dy>=0.0)
return jsts.geomgraph.Quadrant.NE;else
return jsts.geomgraph.Quadrant.SE;}else{if(dy>=0.0)
return jsts.geomgraph.Quadrant.NW;else
return jsts.geomgraph.Quadrant.SW;}};jsts.geomgraph.Quadrant.quadrant2=function(p0,p1){if(p1.x===p0.x&&p1.y===p0.y)
throw new jsts.error.IllegalArgumentError('Cannot compute the quadrant for two identical points '+p0);if(p1.x>=p0.x){if(p1.y>=p0.y)
return jsts.geomgraph.Quadrant.NE;else
return jsts.geomgraph.Quadrant.SE;}else{if(p1.y>=p0.y)
return jsts.geomgraph.Quadrant.NW;else
return jsts.geomgraph.Quadrant.SW;}};jsts.geomgraph.Quadrant.isOpposite=function(quad1,quad2){if(quad1===quad2)
return false;var diff=(quad1-quad2+4)%4;if(diff===2)
return true;return false;};jsts.geomgraph.Quadrant.commonHalfPlane=function(quad1,quad2){if(quad1===quad2)
return quad1;var diff=(quad1-quad2+4)%4;if(diff===2)
return-1;var min=(quad1<quad2)?quad1:quad2;var max=(quad1>quad2)?quad1:quad2;if(min===0&&max===3)
return 3;return min;};jsts.geomgraph.Quadrant.isInHalfPlane=function(quad,halfPlane){if(halfPlane===jsts.geomgraph.Quadrant.SE){return quad===jsts.geomgraph.Quadrant.SE||quad===jsts.geomgraph.Quadrant.SW;}
return quad===halfPlane||quad===halfPlane+1;};jsts.geomgraph.Quadrant.isNorthern=function(quad){return quad===jsts.geomgraph.Quadrant.NE||quad===jsts.geomgraph.Quadrant.NW;};jsts.operation.valid.ConsistentAreaTester=function(geomGraph){this.geomGraph=geomGraph;this.li=new jsts.algorithm.RobustLineIntersector();this.nodeGraph=new jsts.operation.relate.RelateNodeGraph();this.invalidPoint=null;};jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint;};jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var intersector=this.geomGraph.computeSelfNodes(this.li,true);if(intersector.hasProperIntersection()){this.invalidPoint=intersector.getProperIntersectionPoint();return false;}
this.nodeGraph.build(this.geomGraph);return this.isNodeEdgeAreaLabelsConsistent();};jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var nodeIt=this.nodeGraph.getNodeIterator();nodeIt.hasNext();){var node=nodeIt.next();if(!node.getEdges().isAreaLabelsConsistent(this.geomGraph)){this.invalidPoint=node.getCoordinate().clone();return false;}}
return true;};jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var nodeIt=this.nodeGraph.getNodeIterator();nodeIt.hasNext();){var node=nodeIt.next();for(var i=node.getEdges().iterator();i.hasNext();){var eeb=i.next();if(eeb.getEdgeEnds().length>1){invalidPoint=eeb.getEdge().getCoordinate(0);return true;}}}
return false;};jsts.operation.relate.RelateNode=function(coord,edges){jsts.geomgraph.Node.apply(this,arguments);};jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node();jsts.operation.relate.RelateNode.prototype.computeIM=function(im){im.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0);};jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(im){this.edges.updateIM(im);};(function(){var Location=jsts.geom.Location;var Position=jsts.geomgraph.Position;var EdgeEnd=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(edge,isForward){EdgeEnd.call(this,edge);this.depth=[0,-999,-999];this._isForward=isForward;if(isForward){this.init(edge.getCoordinate(0),edge.getCoordinate(1));}else{var n=edge.getNumPoints()-1;this.init(edge.getCoordinate(n),edge.getCoordinate(n-1));}
this.computeDirectedLabel();};jsts.geomgraph.DirectedEdge.prototype=new EdgeEnd();jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge;jsts.geomgraph.DirectedEdge.depthFactor=function(currLocation,nextLocation){if(currLocation===Location.EXTERIOR&&nextLocation===Location.INTERIOR)
return 1;else if(currLocation===Location.INTERIOR&&nextLocation===Location.EXTERIOR)
return-1;return 0;};jsts.geomgraph.DirectedEdge.prototype._isForward=null;jsts.geomgraph.DirectedEdge.prototype._isInResult=false;jsts.geomgraph.DirectedEdge.prototype._isVisited=false;jsts.geomgraph.DirectedEdge.prototype.sym=null;jsts.geomgraph.DirectedEdge.prototype.next=null;jsts.geomgraph.DirectedEdge.prototype.nextMin=null;jsts.geomgraph.DirectedEdge.prototype.edgeRing=null;jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null;jsts.geomgraph.DirectedEdge.prototype.depth=null;jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge;};jsts.geomgraph.DirectedEdge.prototype.setInResult=function(isInResult){this._isInResult=isInResult;};jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult;};jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited;};jsts.geomgraph.DirectedEdge.prototype.setVisited=function(isVisited){this._isVisited=isVisited;};jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(edgeRing){this.edgeRing=edgeRing;};jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing;};jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(minEdgeRing){this.minEdgeRing=minEdgeRing;};jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing;};jsts.geomgraph.DirectedEdge.prototype.getDepth=function(position){return this.depth[position];};jsts.geomgraph.DirectedEdge.prototype.setDepth=function(position,depthVal){if(this.depth[position]!==-999){if(this.depth[position]!==depthVal)
throw new jsts.error.TopologyError('assigned depths do not match',this.getCoordinate());}
this.depth[position]=depthVal;};jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var depthDelta=this.edge.getDepthDelta();if(!this._isForward)
depthDelta=-depthDelta;return depthDelta;};jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(isVisited){this.setVisited(isVisited);this.sym.setVisited(isVisited);};jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym;};jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward;};jsts.geomgraph.DirectedEdge.prototype.setSym=function(de){this.sym=de;};jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next;};jsts.geomgraph.DirectedEdge.prototype.setNext=function(next){this.next=next;};jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin;};jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(nextMin){this.nextMin=nextMin;};jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var isLine=this.label.isLine(0)||this.label.isLine(1);var isExteriorIfArea0=!this.label.isArea(0)||this.label.allPositionsEqual(0,Location.EXTERIOR);var isExteriorIfArea1=!this.label.isArea(1)||this.label.allPositionsEqual(1,Location.EXTERIOR);return isLine&&isExteriorIfArea0&&isExteriorIfArea1;};jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){var isInteriorAreaEdge=true;for(var i=0;i<2;i++){if(!(this.label.isArea(i)&&this.label.getLocation(i,Position.LEFT)===Location.INTERIOR&&this.label.getLocation(i,Position.RIGHT)===Location.INTERIOR)){isInteriorAreaEdge=false;}}
return isInteriorAreaEdge;};jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel());if(!this._isForward)
this.label.flip();};jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(position,depth){var depthDelta=this.getEdge().getDepthDelta();if(!this._isForward)
depthDelta=-depthDelta;var directionFactor=1;if(position===Position.LEFT)
directionFactor=-1;var oppositePos=Position.opposite(position);var delta=depthDelta*directionFactor;var oppositeDepth=depth+delta;this.setDepth(position,depth);this.setDepth(oppositePos,oppositeDepth);};})();jsts.operation.distance.DistanceOp=function(g0,g1,terminateDistance){this.ptLocator=new jsts.algorithm.PointLocator();this.geom=[];this.geom[0]=g0;this.geom[1]=g1;this.terminateDistance=terminateDistance;};jsts.operation.distance.DistanceOp.prototype.geom=null;jsts.operation.distance.DistanceOp.prototype.terminateDistance=0.0;jsts.operation.distance.DistanceOp.prototype.ptLocator=null;jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null;jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE;jsts.operation.distance.DistanceOp.distance=function(g0,g1){var distOp=new jsts.operation.distance.DistanceOp(g0,g1,0.0);return distOp.distance();};jsts.operation.distance.DistanceOp.isWithinDistance=function(g0,g1,distance){var distOp=new jsts.operation.distance.DistanceOp(g0,g1,distance);return distOp.distance()<=distance;};jsts.operation.distance.DistanceOp.nearestPoints=function(g0,g1){var distOp=new jsts.operation.distance.DistanceOp(g0,g1,0.0);return distOp.nearestPoints();};jsts.operation.distance.DistanceOp.prototype.distance=function(){if(this.geom[0]===null||this.geom[1]===null)
throw new jsts.error.IllegalArgumentError('null geometries are not supported');if(this.geom[0].isEmpty()||this.geom[1].isEmpty())
return 0.0;this.computeMinDistance();return this.minDistance;};jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var nearestPts=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return nearestPts;};jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){this.computeMinDistance();return this.minDistanceLocation;};jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(locGeom,flip){if(locGeom[0]===null)
return;if(flip){this.minDistanceLocation[0]=locGeom[1];this.minDistanceLocation[1]=locGeom[0];}else{this.minDistanceLocation[0]=locGeom[0];this.minDistanceLocation[1]=locGeom[1];}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){if(arguments.length>0){this.computeMinDistance2.apply(this,arguments);return;}
if(this.minDistanceLocation!==null)
return;this.minDistanceLocation=[];this.computeContainmentDistance();if(this.minDistance<=this.terminateDistance)
return;this.computeFacetDistance();};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(arguments.length===2){this.computeContainmentDistance2.apply(this,arguments);return;}else if(arguments.length===3&&(!arguments[0]instanceof jsts.operation.distance.GeometryLocation)){this.computeContainmentDistance3.apply(this,arguments);return;}else if(arguments.length===3){this.computeContainmentDistance4.apply(this,arguments);return;}
var locPtPoly=[];this.computeContainmentDistance2(0,locPtPoly);if(this.minDistance<=this.terminateDistance)
return;this.computeContainmentDistance2(1,locPtPoly);};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(polyGeomIndex,locPtPoly){var locationsIndex=1-polyGeomIndex;var polys=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[polyGeomIndex]);if(polys.length>0){var insideLocs=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[locationsIndex]);this.computeContainmentDistance3(insideLocs,polys,locPtPoly);if(this.minDistance<=this.terminateDistance){this.minDistanceLocation[locationsIndex]=locPtPoly[0];this.minDistanceLocation[polyGeomIndex]=locPtPoly[1];return;}}};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(locs,polys,locPtPoly){for(var i=0;i<locs.length;i++){var loc=locs[i];for(var j=0;j<polys.length;j++){this.computeContainmentDistance4(loc,polys[j],locPtPoly);if(this.minDistance<=this.terminateDistance)
return;}}};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(ptLoc,poly,locPtPoly){var pt=ptLoc.getCoordinate();if(jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(pt,poly)){this.minDistance=0.0;locPtPoly[0]=ptLoc;locPtPoly[1]=new jsts.operation.distance.GeometryLocation(poly,pt);return;}};jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var locGeom=[];var lines0=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]);var lines1=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]);var pts0=jsts.geom.util.PointExtracter.getPoints(this.geom[0]);var pts1=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(lines0,lines1,locGeom);this.updateMinDistance(locGeom,false);if(this.minDistance<=this.terminateDistance)
return;locGeom[0]=null;locGeom[1]=null;this.computeMinDistanceLinesPoints(lines0,pts1,locGeom);this.updateMinDistance(locGeom,false);if(this.minDistance<=this.terminateDistance)
return;locGeom[0]=null;locGeom[1]=null;this.computeMinDistanceLinesPoints(lines1,pts0,locGeom);this.updateMinDistance(locGeom,true);if(this.minDistance<=this.terminateDistance)
return;locGeom[0]=null;locGeom[1]=null;this.computeMinDistancePoints(pts0,pts1,locGeom);this.updateMinDistance(locGeom,false);};jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(lines0,lines1,locGeom){for(var i=0;i<lines0.length;i++){var line0=lines0[i];for(var j=0;j<lines1.length;j++){var line1=lines1[j];this.computeMinDistance(line0,line1,locGeom);if(this.minDistance<=this.terminateDistance)
return;}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(points0,points1,locGeom){for(var i=0;i<points0.length;i++){var pt0=points0[i];for(var j=0;j<points1.length;j++){var pt1=points1[j];var dist=pt0.getCoordinate().distance(pt1.getCoordinate());if(dist<this.minDistance){this.minDistance=dist;locGeom[0]=new jsts.operation.distance.GeometryLocation(pt0,0,pt0.getCoordinate());locGeom[1]=new jsts.operation.distance.GeometryLocation(pt1,0,pt1.getCoordinate());}
if(this.minDistance<=this.terminateDistance)
return;}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(lines,points,locGeom){for(var i=0;i<lines.length;i++){var line=lines[i];for(var j=0;j<points.length;j++){var pt=points[j];this.computeMinDistance(line,pt,locGeom);if(this.minDistance<=this.terminateDistance)
return;}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(line0,line1,locGeom){if(line1 instanceof jsts.geom.Point){this.computeMinDistance3(line0,line1,locGeom);return;}
if(line0.getEnvelopeInternal().distance(line1.getEnvelopeInternal())>this.minDistance){return;}
var coord0=line0.getCoordinates();var coord1=line1.getCoordinates();for(var i=0;i<coord0.length-1;i++){for(var j=0;j<coord1.length-1;j++){var dist=jsts.algorithm.CGAlgorithms.distanceLineLine(coord0[i],coord0[i+1],coord1[j],coord1[j+1]);if(dist<this.minDistance){this.minDistance=dist;var seg0=new jsts.geom.LineSegment(coord0[i],coord0[i+1]);var seg1=new jsts.geom.LineSegment(coord1[j],coord1[j+1]);var closestPt=seg0.closestPoints(seg1);locGeom[0]=new jsts.operation.distance.GeometryLocation(line0,i,closestPt[0]);locGeom[1]=new jsts.operation.distance.GeometryLocation(line1,j,closestPt[1]);}
if(this.minDistance<=this.terminateDistance){return;}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(line,pt,locGeom){if(line.getEnvelopeInternal().distance(pt.getEnvelopeInternal())>this.minDistance){return;}
var coord0=line.getCoordinates();var coord=pt.getCoordinate();for(var i=0;i<coord0.length-1;i++){var dist=jsts.algorithm.CGAlgorithms.distancePointLine(coord,coord0[i],coord0[i+1]);if(dist<this.minDistance){this.minDistance=dist;var seg=new jsts.geom.LineSegment(coord0[i],coord0[i+1]);var segClosestPoint=seg.closestPoint(coord);locGeom[0]=new jsts.operation.distance.GeometryLocation(line,i,segClosestPoint);locGeom[1]=new jsts.operation.distance.GeometryLocation(pt,0,coord);}
if(this.minDistance<=this.terminateDistance){return;}}};jsts.index.strtree.SIRtree=function(nodeCapacity){nodeCapacity=nodeCapacity||10;jsts.index.strtree.AbstractSTRtree.call(this,nodeCapacity);};jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree();jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree;jsts.index.strtree.SIRtree.prototype.comperator={compare:function(o1,o2){return o1.getBounds().getCentre()-o2.getBounds().getCentre();}};jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(aBounds,bBounds){return aBounds.intersects(bBounds);}};jsts.index.strtree.SIRtree.prototype.createNode=function(level){var AbstractNode=function(level){jsts.index.strtree.AbstractNode.apply(this,arguments);};AbstractNode.prototype=new jsts.index.strtree.AbstractNode();AbstractNode.constructor=AbstractNode;AbstractNode.prototype.computeBounds=function(){var bounds=null,childBoundables=this.getChildBoundables(),childBoundable;for(var i=0,l=childBoundables.length;i<l;i++){childBoundable=childBoundables[i];if(bounds===null){bounds=new jsts.index.strtree.Interval(childBoundable.getBounds());}
else{bounds.expandToInclude(childBoundable.getBounds());}}
return bounds;};return AbstractNode;};jsts.index.strtree.SIRtree.prototype.insert=function(x1,x2,item){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(x1,x2),Math.max(x1,x2)),item);};jsts.index.strtree.SIRtree.prototype.query=function(x1,x2){x2=x2||x1;jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(x1,x2),Math.max(x1,x2)));};jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp;};jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator;};jsts.simplify.DouglasPeuckerSimplifier=function(inputGeom){this.inputGeom=inputGeom;this.isEnsureValidTopology=true;};jsts.simplify.DouglasPeuckerSimplifier.prototype.inputGeom=null;jsts.simplify.DouglasPeuckerSimplifier.prototype.distanceTolerance=null;jsts.simplify.DouglasPeuckerSimplifier.prototype.isEnsureValidTopology=null;jsts.simplify.DouglasPeuckerSimplifier.simplify=function(geom,distanceTolerance){var tss=new jsts.simplify.DouglasPeuckerSimplifier(geom);tss.setDistanceTolerance(distanceTolerance);return tss.getResultGeometry();};jsts.simplify.DouglasPeuckerSimplifier.prototype.setDistanceTolerance=function(distanceTolerance){if(distanceTolerance<0.0){throw"Tolerance must be non-negative";}
this.distanceTolerance=distanceTolerance;};jsts.simplify.DouglasPeuckerSimplifier.prototype.setEnsureValid=function(isEnsureValidTopology){this.isEnsureValidTopology=isEnsureValidTopology;};jsts.simplify.DouglasPeuckerSimplifier.prototype.getResultGeometry=function(){if(this.inputGeom.isEmpty()){return this.inputGeom.clone();}
return(new jsts.simplify.DPTransformer(this.distanceTolerance,this.isEnsureValidTopology)).transform(this.inputGeom);};(function(){jsts.operation.predicate.RectangleContains=function(rectangle){this.rectEnv=rectangle.getEnvelopeInternal();}
jsts.operation.predicate.RectangleContains.contains=function(rectangle,b){var rc=new jsts.operation.predicate.RectangleContains(rectangle);return rc.contains(b);}
jsts.operation.predicate.RectangleContains.prototype.rectEnv=null;jsts.operation.predicate.RectangleContains.prototype.contains=function(geom){if(!this.rectEnv.contains(geom.getEnvelopeInternal()))
return false;if(this.isContainedInBoundary(geom))
return false;return true;}
jsts.operation.predicate.RectangleContains.prototype.isContainedInBoundary=function(geom){if(geom instanceof jsts.geom.Polygon)return false;if(geom instanceof jsts.geom.Point)return this.isPointContainedInBoundary(geom.getCoordinate());if(geom instanceof jsts.geom.LineString)return this.isLineStringContainedInBoundary(geom);for(var i=0;i<geom.getNumGeometries();i++){var comp=geom.getGeometryN(i);if(!this.isContainedInBoundary(comp))
return false;}
return true;}
jsts.operation.predicate.RectangleContains.prototype.isPointContainedInBoundary=function(pt){return pt.x==this.rectEnv.getMinX()||pt.x==this.rectEnv.getMaxX()||pt.y==this.rectEnv.getMinY()||pt.y==this.rectEnv.getMaxY();}
jsts.operation.predicate.RectangleContains.prototype.isLineStringContainedInBoundary=function(line){var seq=line.getCoordinateSequence();for(var i=0;i<seq.length-1;i++){var p0=seq[i];var p1=seq[i+1];if(!this.isLineSegmentContainedInBoundary(p0,p1))
return false;}
return true;}
jsts.operation.predicate.RectangleContains.prototype.isLineSegmentContainedInBoundary=function(p0,p1){if(p0.equals(p1))
return this.isPointContainedInBoundary(p0);if(p0.x==p1.x){if(p0.x==this.rectEnv.getMinX()||p0.x==this.rectEnv.getMaxX())
return true;}
else if(p0.y==p1.y){if(p0.y==this.rectEnv.getMinY()||p0.y==this.rectEnv.getMaxY())
return true;}
return false;}})();(function(){var Location=jsts.geom.Location;var Position=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var i=0;i<2;i++){for(var j=0;j<3;j++){this.depth[i][j]=jsts.geomgraph.Depth.NULL_VALUE;}}};jsts.geomgraph.Depth.NULL_VALUE=-1;jsts.geomgraph.Depth.depthAtLocation=function(location){if(location===Location.EXTERIOR)
return 0;if(location===Location.INTERIOR)
return 1;return jsts.geomgraph.Depth.NULL_VALUE;};jsts.geomgraph.Depth.prototype.depth=null;jsts.geomgraph.Depth.prototype.getDepth=function(geomIndex,posIndex){return this.depth[geomIndex][posIndex];};jsts.geomgraph.Depth.prototype.setDepth=function(geomIndex,posIndex,depthValue){this.depth[geomIndex][posIndex]=depthValue;};jsts.geomgraph.Depth.prototype.getLocation=function(geomIndex,posIndex){if(this.depth[geomIndex][posIndex]<=0)
return Location.EXTERIOR;return Location.INTERIOR;};jsts.geomgraph.Depth.prototype.add=function(geomIndex,posIndex,location){if(location===Location.INTERIOR)
this.depth[geomIndex][posIndex]++;};jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0){return this.isNull2.apply(this,arguments);}
for(var i=0;i<2;i++){for(var j=0;j<3;j++){if(this.depth[i][j]!==jsts.geomgraph.Depth.NULL_VALUE)
return false;}}
return true;};jsts.geomgraph.Depth.prototype.isNull2=function(geomIndex){if(arguments.length>1){return this.isNull3.apply(this,arguments);}
return this.depth[geomIndex][1]==jsts.geomgraph.Depth.NULL_VALUE;};jsts.geomgraph.Depth.prototype.isNull3=function(geomIndex,posIndex){return this.depth[geomIndex][posIndex]==jsts.geomgraph.Depth.NULL_VALUE;};jsts.geomgraph.Depth.prototype.add=function(lbl){for(var i=0;i<2;i++){for(var j=1;j<3;j++){var loc=lbl.getLocation(i,j);if(loc===Location.EXTERIOR||loc===Location.INTERIOR){if(this.isNull(i,j)){this.depth[i][j]=jsts.geomgraph.Depth.depthAtLocation(loc);}else
this.depth[i][j]+=jsts.geomgraph.Depth.depthAtLocation(loc);}}}};jsts.geomgraph.Depth.prototype.getDelta=function(geomIndex){return this.depth[geomIndex][Position.RIGHT]-
this.depth[geomIndex][Position.LEFT];};jsts.geomgraph.Depth.prototype.normalize=function(){for(var i=0;i<2;i++){if(!this.isNull(i)){var minDepth=this.depth[i][1];if(this.depth[i][2]<minDepth)
minDepth=this.depth[i][2];if(minDepth<0)
minDepth=0;for(var j=1;j<3;j++){var newValue=0;if(this.depth[i][j]>minDepth)
newValue=1;this.depth[i][j]=newValue;}}}};jsts.geomgraph.Depth.prototype.toString=function(){return'A: '+this.depth[0][1]+','+this.depth[0][2]+' B: '+
this.depth[1][1]+','+this.depth[1][2];};})();jsts.algorithm.BoundaryNodeRule=function(){};jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(boundaryCount){throw new jsts.error.AbstractMethodInvocationError();};jsts.algorithm.Mod2BoundaryNodeRule=function(){};jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule();jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(boundaryCount){return boundaryCount%2===1;};jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule();jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE;jsts.operation.distance.GeometryLocation=function(component,segIndex,pt){this.component=component;this.segIndex=segIndex;this.pt=pt;};jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1;jsts.operation.distance.GeometryLocation.prototype.component=null;jsts.operation.distance.GeometryLocation.prototype.segIndex=null;jsts.operation.distance.GeometryLocation.prototype.pt=null;jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component;};jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex;};jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt;};jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA;};jsts.geom.util.PointExtracter=function(pts){this.pts=pts;};jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.PointExtracter.prototype.pts=null;jsts.geom.util.PointExtracter.getPoints=function(geom,list){if(list===undefined){list=[];}
if(geom instanceof jsts.geom.Point){list.push(geom);}else if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){geom.apply(new jsts.geom.util.PointExtracter(list));}
return list;};jsts.geom.util.PointExtracter.prototype.filter=function(geom){if(geom instanceof jsts.geom.Point)
this.pts.push(geom);};(function(){var Location=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory());};jsts.operation.relate.RelateNodeGraph.prototype.nodes=null;jsts.operation.relate.RelateNodeGraph.prototype.build=function(geomGraph){this.computeIntersectionNodes(geomGraph,0);this.copyNodesAndLabels(geomGraph,0);var eeBuilder=new jsts.operation.relate.EdgeEndBuilder();var eeList=eeBuilder.computeEdgeEnds(geomGraph.getEdgeIterator());this.insertEdgeEnds(eeList);};jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(geomGraph,argIndex){for(var edgeIt=geomGraph.getEdgeIterator();edgeIt.hasNext();){var e=edgeIt.next();var eLoc=e.getLabel().getLocation(argIndex);for(var eiIt=e.getEdgeIntersectionList().iterator();eiIt.hasNext();){var ei=eiIt.next();var n=this.nodes.addNode(ei.coord);if(eLoc===Location.BOUNDARY)
n.setLabelBoundary(argIndex);else{if(n.getLabel().isNull(argIndex))
n.setLabel(argIndex,Location.INTERIOR);}}}};jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(geomGraph,argIndex){for(var nodeIt=geomGraph.getNodeIterator();nodeIt.hasNext();){var graphNode=nodeIt.next();var newNode=this.nodes.addNode(graphNode.getCoordinate());newNode.setLabel(argIndex,graphNode.getLabel().getLocation(argIndex));}};jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(ee){for(var i=ee.iterator();i.hasNext();){var e=i.next();this.nodes.add(e);}};jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator();};})();jsts.geomgraph.index.SimpleSweepLineIntersector=function(){};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.events=[];jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.nOverlaps=null;jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections=function(edges,si,testAllSegments){if(si instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return;}
if(testAllSegments){this.add(edges,null);}else{this.add(edges);}
this.computeIntersections3(si);};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections2=function(edges0,edges1,si){this.add(edges0,edges0);this.add(edges1,edges1);this.computeIntersections3(si);};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add=function(edge,edgeSet){if(edge instanceof javascript.util.List){this.add2.apply(this,arguments);return;}
var pts=edge.getCoordinates();for(var i=0;i<pts.length-1;i++){var ss=new jsts.geomgraph.index.SweepLineSegment(edge,i);var insertEvent=new jsts.geomgraph.index.SweepLineEvent(ss.getMinX(),ss,edgeSet);this.events.push(insertEvent);this.events.push(new jsts.geomgraph.index.SweepLineEvent(ss.getMaxX(),insertEvent));}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add2=function(edges,edgeSet){for(var i=edges.iterator();i.hasNext();){var edge=i.next();if(edgeSet){this.add(edge,edgeSet);}else{this.add(edge,edge);}}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(a,b){return a.compareTo(b);});for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isDelete()){ev.getInsertEvent().setDeleteEventIndex(i);}}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections3=function(si){this.nOverlaps=0;this.prepareEvents();for(var i=0;i<this.events.length;i++){var ev=this.events[i];if(ev.isInsert()){this.processOverlaps(i,ev.getDeleteEventIndex(),ev,si);}}};jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.processOverlaps=function(start,end,ev0,si){var ss0=ev0.getObject();for(var i=start;i<end;i++){var ev1=this.events[i];if(ev1.isInsert()){var ss1=ev1.getObject();if(!ev0.isSameLabel(ev1)){ss0.computeIntersections(ss1,si);this.nOverlaps++;}}}}
jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null;this.tolerance=0.0;this.subdiv=null;this.clipEnv=null;this.diagramEnv=null;};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var arg=arguments[0];if(arg instanceof jsts.geom.Geometry||arg instanceof jsts.geom.Coordinate||arg instanceof jsts.geom.Point||arg instanceof jsts.geom.MultiPoint||arg instanceof jsts.geom.LineString||arg instanceof jsts.geom.MultiLineString||arg instanceof jsts.geom.LinearRing||arg instanceof jsts.geom.Polygon||arg instanceof jsts.geom.MultiPolygon){this.setSitesByGeometry(arg);}else{this.setSitesByArray(arg);}};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(geom){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(geom);};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(coords){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(coords);};jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(clipEnv){this.clipEnv=clipEnv;};jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(tolerance)
{this.tolerance=tolerance;};jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(this.subdiv!==null){return;}
var siteEnv,expandBy,vertices,triangulator;siteEnv=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords);this.diagramEnv=siteEnv;expandBy=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(expandBy);if(this.clipEnv!==null){this.diagramEnv.expandToInclude(this.clipEnv);}
vertices=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords);this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(siteEnv,this.tolerance);triangulator=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv);triangulator.insertSites(vertices);};jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){this.create();return this.subdiv;};jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(geomFact){this.create();var polys=this.subdiv.getVoronoiDiagram(geomFact);return this.clipGeometryCollection(polys,this.diagramEnv);};jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(geom,clipEnv){var clipPoly,clipped,i,il,g,result;clipPoly=geom.getFactory().toGeometry(clipEnv);clipped=[];i=0,il=geom.getNumGeometries();for(i;i<il;i++){g=geom.getGeometryN(i);result=null;if(clipEnv.contains(g.getEnvelopeInternal())){result=g;}
else if(clipEnv.intersects(g.getEnvelopeInternal())){result=clipPoly.intersection(g);}
if(result!==null&&!result.isEmpty()){clipped.push(result);}}
return geom.getFactory().createGeometryCollection(clipped);};jsts.operation.valid.IndexedNestedRingTester=function(graph){this.graph=graph;this.rings=new javascript.util.ArrayList();this.totalEnv=new jsts.geom.Envelope();this.index=null;this.nestedPt=null;};jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt;};jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(ring){this.rings.add(ring);this.totalEnv.expandToInclude(ring.getEnvelopeInternal());};jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var i=0;i<this.rings.size();i++){var innerRing=this.rings.get(i);var innerRingPts=innerRing.getCoordinates();var results=this.index.query(innerRing.getEnvelopeInternal());for(var j=0;j<results.length;j++){var searchRing=results[j];var searchRingPts=searchRing.getCoordinates();if(innerRing==searchRing){continue;}
if(!innerRing.getEnvelopeInternal().intersects(searchRing.getEnvelopeInternal())){continue;}
var innerRingPt=jsts.operation.valid.IsValidOp.findPtNotNode(innerRingPts,searchRing,this.graph);if(innerRingPt==null){continue;}
var isInside=jsts.algorithm.CGAlgorithms.isPointInRing(innerRingPt,searchRingPts);if(isInside){this.nestedPt=innerRingPt;return false;}}}
return true;};jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree();for(var i=0;i<this.rings.size();i++){var ring=this.rings.get(i);var env=ring.getEnvelopeInternal();this.index.insert(env,ring);}};jsts.geomgraph.index.MonotoneChain=function(mce,chainIndex){this.mce=mce;this.chainIndex=chainIndex;};jsts.geomgraph.index.MonotoneChain.prototype.mce=null;jsts.geomgraph.index.MonotoneChain.prototype.chainIndex=null;jsts.geomgraph.index.MonotoneChain.prototype.computeIntersections=function(mc,si){this.mce.computeIntersectsForChain(this.chainIndex,mc.mce,mc.chainIndex,si);};jsts.noding.SegmentNode=function(segString,coord,segmentIndex,segmentOctant){this.segString=segString;this.coord=new jsts.geom.Coordinate(coord);this.segmentIndex=segmentIndex;this.segmentOctant=segmentOctant;this._isInterior=!coord.equals2D(segString.getCoordinate(segmentIndex));};jsts.noding.SegmentNode.prototype.segString=null;jsts.noding.SegmentNode.prototype.coord=null;jsts.noding.SegmentNode.prototype.segmentIndex=null;jsts.noding.SegmentNode.prototype.segmentOctant=null;jsts.noding.SegmentNode.prototype._isInterior=null;jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord;};jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior;};jsts.noding.SegmentNode.prototype.isEndPoint=function(maxSegmentIndex){if(this.segmentIndex===0&&!this._isInterior)return true;if(this.segmentIndex===this.maxSegmentIndex)return true;return false;};jsts.noding.SegmentNode.prototype.compareTo=function(obj){var other=obj;if(this.segmentIndex<other.segmentIndex)return-1;if(this.segmentIndex>other.segmentIndex)return 1;if(this.coord.equals2D(other.coord))return 0;return jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,other.coord);};(function(){jsts.io.GeoJSONWriter=function(){this.parser=new jsts.io.GeoJSONParser(this.geometryFactory);};jsts.io.GeoJSONWriter.prototype.write=function(geometry){var geoJson=this.parser.write(geometry);return geoJson;};})();jsts.io.OpenLayersParser=function(geometryFactory){this.geometryFactory=geometryFactory||new jsts.geom.GeometryFactory();};jsts.io.OpenLayersParser.prototype.read=function(geometry){if(geometry.CLASS_NAME==='OpenLayers.Geometry.Point'){return this.convertFromPoint(geometry);}else if(geometry.CLASS_NAME==='OpenLayers.Geometry.LineString'){return this.convertFromLineString(geometry);}else if(geometry.CLASS_NAME==='OpenLayers.Geometry.LinearRing'){return this.convertFromLinearRing(geometry);}else if(geometry.CLASS_NAME==='OpenLayers.Geometry.Polygon'){return this.convertFromPolygon(geometry);}else if(geometry.CLASS_NAME==='OpenLayers.Geometry.MultiPoint'){return this.convertFromMultiPoint(geometry);}else if(geometry.CLASS_NAME==='OpenLayers.Geometry.MultiLineString'){return this.convertFromMultiLineString(geometry);}else if(geometry.CLASS_NAME==='OpenLayers.Geometry.MultiPolygon'){return this.convertFromMultiPolygon(geometry);}else if(geometry.CLASS_NAME==='OpenLayers.Geometry.Collection'){return this.convertFromCollection(geometry);}};jsts.io.OpenLayersParser.prototype.convertFromPoint=function(point){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(point.x,point.y));};jsts.io.OpenLayersParser.prototype.convertFromLineString=function(lineString){var i;var coordinates=[];for(i=0;i<lineString.components.length;i++){coordinates.push(new jsts.geom.Coordinate(lineString.components[i].x,lineString.components[i].y));}
return this.geometryFactory.createLineString(coordinates);};jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(linearRing){var i;var coordinates=[];for(i=0;i<linearRing.components.length;i++){coordinates.push(new jsts.geom.Coordinate(linearRing.components[i].x,linearRing.components[i].y));}
return this.geometryFactory.createLinearRing(coordinates);};jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(polygon){var i;var shell=null;var holes=[];for(i=0;i<polygon.components.length;i++){var linearRing=this.convertFromLinearRing(polygon.components[i]);if(i===0){shell=linearRing;}else{holes.push(linearRing);}}
return this.geometryFactory.createPolygon(shell,holes);};jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(multiPoint){var i;var points=[];for(i=0;i<multiPoint.components.length;i++){points.push(this.convertFromPoint(multiPoint.components[i]));}
return this.geometryFactory.createMultiPoint(points);};jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(multiLineString){var i;var lineStrings=[];for(i=0;i<multiLineString.components.length;i++){lineStrings.push(this.convertFromLineString(multiLineString.components[i]));}
return this.geometryFactory.createMultiLineString(lineStrings);};jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(multiPolygon){var i;var polygons=[];for(i=0;i<multiPolygon.components.length;i++){polygons.push(this.convertFromPolygon(multiPolygon.components[i]));}
return this.geometryFactory.createMultiPolygon(polygons);};jsts.io.OpenLayersParser.prototype.convertFromCollection=function(collection){var i;var geometries=[];for(i=0;i<collection.components.length;i++){geometries.push(this.read(collection.components[i]));}
return this.geometryFactory.createGeometryCollection(geometries);};jsts.io.OpenLayersParser.prototype.write=function(geometry){if(geometry.CLASS_NAME==='jsts.geom.Point'){return this.convertToPoint(geometry.coordinate);}else if(geometry.CLASS_NAME==='jsts.geom.LineString'){return this.convertToLineString(geometry);}else if(geometry.CLASS_NAME==='jsts.geom.LinearRing'){return this.convertToLinearRing(geometry);}else if(geometry.CLASS_NAME==='jsts.geom.Polygon'){return this.convertToPolygon(geometry);}else if(geometry.CLASS_NAME==='jsts.geom.MultiPoint'){return this.convertToMultiPoint(geometry);}else if(geometry.CLASS_NAME==='jsts.geom.MultiLineString'){return this.convertToMultiLineString(geometry);}else if(geometry.CLASS_NAME==='jsts.geom.MultiPolygon'){return this.convertToMultiPolygon(geometry);}else if(geometry.CLASS_NAME==='jsts.geom.GeometryCollection'){return this.convertToCollection(geometry);}};jsts.io.OpenLayersParser.prototype.convertToPoint=function(coordinate){return new OpenLayers.Geometry.Point(coordinate.x,coordinate.y);};jsts.io.OpenLayersParser.prototype.convertToLineString=function(lineString){var i;var points=[];for(i=0;i<lineString.points.length;i++){var coordinate=lineString.points[i];points.push(this.convertToPoint(coordinate));}
return new OpenLayers.Geometry.LineString(points);};jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(linearRing){var i;var points=[];for(i=0;i<linearRing.points.length;i++){var coordinate=linearRing.points[i];points.push(this.convertToPoint(coordinate));}
return new OpenLayers.Geometry.LinearRing(points);};jsts.io.OpenLayersParser.prototype.convertToPolygon=function(polygon){var i;var rings=[];rings.push(this.convertToLinearRing(polygon.shell));for(i=0;i<polygon.holes.length;i++){var ring=polygon.holes[i];rings.push(this.convertToLinearRing(ring));}
return new OpenLayers.Geometry.Polygon(rings);};jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(multiPoint){var i;var points=[];for(i=0;i<multiPoint.geometries.length;i++){var coordinate=multiPoint.geometries[i].coordinate;points.push(new OpenLayers.Geometry.Point(coordinate.x,coordinate.y));}
return new OpenLayers.Geometry.MultiPoint(points);};jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(multiLineString){var i;var lineStrings=[];for(i=0;i<multiLineString.geometries.length;i++){lineStrings.push(this.convertToLineString(multiLineString.geometries[i]));}
return new OpenLayers.Geometry.MultiLineString(lineStrings);};jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(multiPolygon){var i;var polygons=[];for(i=0;i<multiPolygon.geometries.length;i++){polygons.push(this.convertToPolygon(multiPolygon.geometries[i]));}
return new OpenLayers.Geometry.MultiPolygon(polygons);};jsts.io.OpenLayersParser.prototype.convertToCollection=function(geometryCollection){var i;var geometries=[];for(i=0;i<geometryCollection.geometries.length;i++){var geometry=geometryCollection.geometries[i];var geometryOpenLayers=this.write(geometry);geometries.push(geometryOpenLayers);}
return new OpenLayers.Geometry.Collection(geometries);};jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root();this.minExtent=1.0;};jsts.index.quadtree.Quadtree.ensureExtent=function(itemEnv,minExtent){var minx,maxx,miny,maxy;minx=itemEnv.getMinX();maxx=itemEnv.getMaxX();miny=itemEnv.getMinY();maxy=itemEnv.getMaxY();if(minx!==maxx&&miny!==maxy){return itemEnv;}
if(minx===maxx){minx=minx-(minExtent/2.0);maxx=minx+(minExtent/2.0);}
if(miny===maxy){miny=miny-(minExtent/2.0);maxy=miny+(minExtent/2.0);}
return new jsts.geom.Envelope(minx,maxx,miny,maxy);};jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth();};jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size();};jsts.index.quadtree.Quadtree.prototype.insert=function(itemEnv,item){this.collectStats(itemEnv);var insertEnv=jsts.index.quadtree.Quadtree.ensureExtent(itemEnv,this.minExtent);this.root.insert(insertEnv,item);};jsts.index.quadtree.Quadtree.prototype.remove=function(itemEnv,item){var posEnv=jsts.index.quadtree.Quadtree.ensureExtent(itemEnv,this.minExtent);return this.root.remove(posEnv,item);};jsts.index.quadtree.Quadtree.prototype.query=function(){if(arguments.length===1){return jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments);}else{jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments);}};jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(searchEnv){var visitor=new jsts.index.ArrayListVisitor();this.query(searchEnv,visitor);return visitor.getItems();};jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(searchEnv,visitor){this.root.visit(searchEnv,visitor);};jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var foundItems=[];foundItems=this.root.addAllItems(foundItems);return foundItems;};jsts.index.quadtree.Quadtree.prototype.collectStats=function(itemEnv){var delX=itemEnv.getWidth();if(delX<this.minExtent&&delX>0.0){this.minExtent=delX;}
var delY=itemEnv.getHeight();if(delY<this.minExtent&&delY>0.0){this.minExtent=delY;}};jsts.operation.relate.RelateNodeFactory=function(){};jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory();jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(coord){return new jsts.operation.relate.RelateNode(coord,new jsts.operation.relate.EdgeEndBundleStar());};jsts.index.quadtree.Key=function(itemEnv){this.pt=new jsts.geom.Coordinate();this.level=0;this.env=null;this.computeKey(itemEnv);};jsts.index.quadtree.Key.computeQuadLevel=function(env){var dx,dy,dMax,level;dx=env.getWidth();dy=env.getHeight();dMax=dx>dy?dx:dy;level=jsts.index.DoubleBits.exponent(dMax)+1;return level;};jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt;};jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level;};jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env;};jsts.index.quadtree.Key.prototype.getCentre=function(){var x,y;x=(this.env.getMinX()+this.env.getMaxX())/2;y=(this.env.getMinY()+this.env.getMaxY())/2;return new jsts.geom.Coordinate(x,y);};jsts.index.quadtree.Key.prototype.computeKey=function(){if(arguments[0]instanceof jsts.geom.Envelope){this.computeKeyFromEnvelope(arguments[0]);}else{this.computeKeyFromLevel(arguments[0],arguments[1]);}};jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(env){this.level=jsts.index.quadtree.Key.computeQuadLevel(env);this.env=new jsts.geom.Envelope();this.computeKey(this.level,env);while(!this.env.contains(env)){this.level+=1;this.computeKey(this.level,env);}};jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(level,env){var quadSize=jsts.index.DoubleBits.powerOf2(level);this.pt.x=Math.floor(env.getMinX()/quadSize)*quadSize;this.pt.y=Math.floor(env.getMinY()/quadSize)*quadSize;this.env.init(this.pt.x,this.pt.x+quadSize,this.pt.y,this.pt.y+
quadSize);};jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError();};jsts.geom.CoordinateArrays.copyDeep=function(){if(arguments.length===1){return jsts.geom.CoordinateArrays.copyDeep1(arguments[0]);}else if(arguments.length===5){jsts.geom.CoordinateArrays.copyDeep2(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);}};jsts.geom.CoordinateArrays.copyDeep1=function(coordinates){var copy=[];for(var i=0;i<coordinates.length;i++){copy[i]=new jsts.geom.Coordinate(coordinates[i]);}
return copy;};jsts.geom.CoordinateArrays.copyDeep2=function(src,srcStart,dest,destStart,length){for(var i=0;i<length;i++){dest[destStart+i]=new jsts.geom.Coordinate(src[srcStart+i]);}};jsts.geom.CoordinateArrays.removeRepeatedPoints=function(coord){var coordList;if(!this.hasRepeatedPoints(coord)){return coord;}
coordList=new jsts.geom.CoordinateList(coord,false);return coordList.toCoordinateArray();};jsts.geom.CoordinateArrays.hasRepeatedPoints=function(coord){var i;for(i=1;i<coord.length;i++){if(coord[i-1].equals(coord[i])){return true;}}
return false;};jsts.geom.CoordinateArrays.ptNotInList=function(testPts,pts){for(var i=0;i<testPts.length;i++){var testPt=testPts[i];if(jsts.geom.CoordinateArrays.indexOf(testPt,pts)<0)
return testPt;}
return null;};jsts.geom.CoordinateArrays.increasingDirection=function(pts){for(var i=0;i<parseInt(pts.length/2);i++){var j=pts.length-1-i;var comp=pts[i].compareTo(pts[j]);if(comp!=0)
return comp;}
return 1;};jsts.geom.CoordinateArrays.minCoordinate=function(coordinates){var minCoord=null;for(var i=0;i<coordinates.length;i++){if(minCoord===null||minCoord.compareTo(coordinates[i])>0){minCoord=coordinates[i];}}
return minCoord;};jsts.geom.CoordinateArrays.scroll=function(coordinates,firstCoordinate){var i=jsts.geom.CoordinateArrays.indexOf(firstCoordinate,coordinates);if(i<0)
return;var newCoordinates=coordinates.slice(i).concat(coordinates.slice(0,i));for(i=0;i<newCoordinates.length;i++){coordinates[i]=newCoordinates[i];}};jsts.geom.CoordinateArrays.indexOf=function(coordinate,coordinates){for(var i=0;i<coordinates.length;i++){if(coordinate.equals(coordinates[i])){return i;}}
return-1;};jsts.operation.overlay.MinimalEdgeRing=function(start,geometryFactory){jsts.geomgraph.EdgeRing.call(this,start,geometryFactory);};jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing();jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing;jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(de){return de.getNextMin();};jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(de,er){de.setMinEdgeRing(er);};jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null;this.tolerance=0.0;this.subdiv=null;};jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(geom){if(geom===undefined||geom===null){return new jsts.geom.CoordinateList([],false).toArray();}
var coords=geom.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(coords);};jsts.triangulate.DelaunayTriangulationBuilder.unique=function(coords){coords.sort(function(a,b){return a.compareTo(b);});var coordList=new jsts.geom.CoordinateList(coords,false);return coordList.toArray();};jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(coords){var verts=new Array(coords.length),i=0,il=coords.length,coord;for(i;i<il;i++){coord=coords[i];verts[i]=new jsts.triangulate.quadedge.Vertex(coord);}
return verts;};jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(coords){var env=new jsts.geom.Envelope(),i=0,il=coords.length;for(i;i<il;i++){env.expandToInclude(coords[i]);}
return env;};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var arg=arguments[0];if(arg instanceof jsts.geom.Geometry||arg instanceof jsts.geom.Coordinate||arg instanceof jsts.geom.Point||arg instanceof jsts.geom.MultiPoint||arg instanceof jsts.geom.LineString||arg instanceof jsts.geom.MultiLineString||arg instanceof jsts.geom.LinearRing||arg instanceof jsts.geom.Polygon||arg instanceof jsts.geom.MultiPolygon){this.setSitesFromGeometry(arg);}else{this.setSitesFromCollection(arg);}};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(geom){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(geom);};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(coords){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(coords);};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(tolerance){this.tolerance=tolerance;};jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(this.subdiv===null){var siteEnv,vertices,triangulator;siteEnv=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords);vertices=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords);this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(siteEnv,this.tolerance);triangulator=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv);triangulator.insertSites(vertices);}};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){this.create();return this.subdiv;};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(geomFact){this.create();return this.subdiv.getEdges(geomFact);};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(geomFact){this.create();return this.subdiv.getTriangles(geomFact);};jsts.algorithm.RayCrossingCounter=function(p){this.p=p;};jsts.algorithm.RayCrossingCounter.locatePointInRing=function(p,ring){var counter=new jsts.algorithm.RayCrossingCounter(p);for(var i=1;i<ring.length;i++){var p1=ring[i];var p2=ring[i-1];counter.countSegment(p1,p2);if(counter.isOnSegment())
return counter.getLocation();}
return counter.getLocation();};jsts.algorithm.RayCrossingCounter.prototype.p=null;jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0;jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=false;jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(p1,p2){if(p1.x<this.p.x&&p2.x<this.p.x)
return;if(this.p.x==p2.x&&this.p.y===p2.y){this.isPointOnSegment=true;return;}
if(p1.y===this.p.y&&p2.y===this.p.y){var minx=p1.x;var maxx=p2.x;if(minx>maxx){minx=p2.x;maxx=p1.x;}
if(this.p.x>=minx&&this.p.x<=maxx){this.isPointOnSegment=true;}
return;}
if(((p1.y>this.p.y)&&(p2.y<=this.p.y))||((p2.y>this.p.y)&&(p1.y<=this.p.y))){var x1=p1.x-this.p.x;var y1=p1.y-this.p.y;var x2=p2.x-this.p.x;var y2=p2.y-this.p.y;var xIntSign=jsts.algorithm.RobustDeterminant.signOfDet2x2(x1,y1,x2,y2);if(xIntSign===0.0){this.isPointOnSegment=true;return;}
if(y2<y1)
xIntSign=-xIntSign;if(xIntSign>0.0){this.crossingCount++;}}};jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment;};jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){if(this.isPointOnSegment)
return jsts.geom.Location.BOUNDARY;if((this.crossingCount%2)===1){return jsts.geom.Location.INTERIOR;}
return jsts.geom.Location.EXTERIOR;};jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR;};jsts.operation.BoundaryOp=function(geom,bnRule){this.geom=geom;this.geomFact=geom.getFactory();this.bnRule=bnRule||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE;};jsts.operation.BoundaryOp.prototype.geom=null;jsts.operation.BoundaryOp.prototype.geomFact=null;jsts.operation.BoundaryOp.prototype.bnRule=null;jsts.operation.BoundaryOp.prototype.getBoundary=function(){if(this.geom instanceof jsts.geom.LineString)return this.boundaryLineString(this.geom);if(this.geom instanceof jsts.geom.MultiLineString)return this.boundaryMultiLineString(this.geom);return this.geom.getBoundary();};jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null);};jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(mLine){if(this.geom.isEmpty()){return this.getEmptyMultiPoint();}
var bdyPts=this.computeBoundaryCoordinates(mLine);if(bdyPts.length==1){return this.geomFact.createPoint(bdyPts[0]);}
return this.geomFact.createMultiPoint(bdyPts);};jsts.operation.BoundaryOp.prototype.endpoints=null;jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(mLine){var i,line,endpoint,bdyPts=[];this.endpoints=[];for(i=0;i<mLine.getNumGeometries();i++){line=mLine.getGeometryN(i);if(line.getNumPoints()==0)
continue;this.addEndpoint(line.getCoordinateN(0));this.addEndpoint(line.getCoordinateN(line.getNumPoints()-1));}
for(i=0;i<this.endpoints.length;i++){endpoint=this.endpoints[i];if(this.bnRule.isInBoundary(endpoint.count)){bdyPts.push(endpoint.coordinate);}}
return bdyPts;};jsts.operation.BoundaryOp.prototype.addEndpoint=function(pt){var i,endpoint,found=false;for(i=0;i<this.endpoints.length;i++){endpoint=this.endpoints[i];if(endpoint.coordinate.equals(pt)){found=true;break;}}
if(!found){endpoint={};endpoint.coordinate=pt;endpoint.count=0;this.endpoints.push(endpoint);}
endpoint.count++;};jsts.operation.BoundaryOp.prototype.boundaryLineString=function(line){if(this.geom.isEmpty()){return this.getEmptyMultiPoint();}
if(line.isClosed()){var closedEndpointOnBoundary=this.bnRule.isInBoundary(2);if(closedEndpointOnBoundary){return line.getStartPoint();}
else{return this.geomFact.createMultiPoint(null);}}
return this.geomFact.createMultiPoint([line.getStartPoint(),line.getEndPoint()]);};jsts.operation.buffer.OffsetCurveSetBuilder=function(inputGeom,distance,curveBuilder){this.inputGeom=inputGeom;this.distance=distance;this.curveBuilder=curveBuilder;this.curveList=new javascript.util.ArrayList();};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){this.add(this.inputGeom);return this.curveList;};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(coord,leftLoc,rightLoc){if(coord==null||coord.length<2)
return;var e=new jsts.noding.NodedSegmentString(coord,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,leftLoc,rightLoc));this.curveList.add(e);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(g){if(g.isEmpty())
return;if(g instanceof jsts.geom.Polygon)
this.addPolygon(g);else if(g instanceof jsts.geom.LineString)
this.addLineString(g);else if(g instanceof jsts.geom.Point)
this.addPoint(g);else if(g instanceof jsts.geom.MultiPoint)
this.addCollection(g);else if(g instanceof jsts.geom.MultiLineString)
this.addCollection(g);else if(g instanceof jsts.geom.MultiPolygon)
this.addCollection(g);else if(g instanceof jsts.geom.GeometryCollection)
this.addCollection(g);else
throw new jsts.error.IllegalArgumentError();};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(gc){for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this.add(g);}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(p){if(this.distance<=0.0)
return;var coord=p.getCoordinates();var curve=this.curveBuilder.getLineCurve(coord,this.distance);this.addCurve(curve,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(line){if(this.distance<=0.0&&!this.curveBuilder.getBufferParameters().isSingleSided())
return;var coord=jsts.geom.CoordinateArrays.removeRepeatedPoints(line.getCoordinates());var curve=this.curveBuilder.getLineCurve(coord,this.distance);this.addCurve(curve,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(p){var offsetDistance=this.distance;var offsetSide=jsts.geomgraph.Position.LEFT;if(this.distance<0.0){offsetDistance=-this.distance;offsetSide=jsts.geomgraph.Position.RIGHT;}
var shell=p.getExteriorRing();var shellCoord=jsts.geom.CoordinateArrays.removeRepeatedPoints(shell.getCoordinates());if(this.distance<0.0&&this.isErodedCompletely(shell,this.distance))
return;if(this.distance<=0.0&&shellCoord.length<3)
return;this.addPolygonRing(shellCoord,offsetDistance,offsetSide,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);var holeCoord=jsts.geom.CoordinateArrays.removeRepeatedPoints(hole.getCoordinates());if(this.distance>0.0&&this.isErodedCompletely(hole,-this.distance))
continue;this.addPolygonRing(holeCoord,offsetDistance,jsts.geomgraph.Position.opposite(offsetSide),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR);}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(coord,offsetDistance,side,cwLeftLoc,cwRightLoc){if(offsetDistance==0.0&&coord.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE)
return;var leftLoc=cwLeftLoc;var rightLoc=cwRightLoc;if(coord.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(coord)){leftLoc=cwRightLoc;rightLoc=cwLeftLoc;side=jsts.geomgraph.Position.opposite(side);}
var curve=this.curveBuilder.getRingCurve(coord,side,offsetDistance);this.addCurve(curve,leftLoc,rightLoc);};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(ring,bufferDistance){var ringCoord=ring.getCoordinates();var minDiam=0.0;if(ringCoord.length<4)
return bufferDistance<0;if(ringCoord.length==4)
return this.isTriangleErodedCompletely(ringCoord,bufferDistance);var env=ring.getEnvelopeInternal();var envMinDimension=Math.min(env.getHeight(),env.getWidth());if(bufferDistance<0.0&&2*Math.abs(bufferDistance)>envMinDimension)
return true;return false;};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(triangleCoord,bufferDistance){var tri=new jsts.geom.Triangle(triangleCoord[0],triangleCoord[1],triangleCoord[2]);var inCentre=tri.inCentre();var distToCentre=jsts.algorithm.CGAlgorithms.distancePointLine(inCentre,tri.p0,tri.p1);return distToCentre<Math.abs(bufferDistance);};jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList();this.nodes=new javascript.util.ArrayList();this.finder=new jsts.operation.buffer.RightmostEdgeFinder();};jsts.operation.buffer.BufferSubgraph.prototype.finder=null;jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null;jsts.operation.buffer.BufferSubgraph.prototype.nodes=null;jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null;jsts.operation.buffer.BufferSubgraph.prototype.env=null;jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList;};jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes;};jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(this.env===null){var edgeEnv=new jsts.geom.Envelope();for(var it=this.dirEdgeList.iterator();it.hasNext();){var dirEdge=it.next();var pts=dirEdge.getEdge().getCoordinates();for(var j=0;j<pts.length-1;j++){edgeEnv.expandToInclude(pts[j]);}}
this.env=edgeEnv;}
return this.env;};jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord;};jsts.operation.buffer.BufferSubgraph.prototype.create=function(node){this.addReachable(node);this.finder.findEdge(this.dirEdgeList);this.rightMostCoord=this.finder.getCoordinate();};jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(startNode){var nodeStack=[];nodeStack.push(startNode);while(nodeStack.length!==0){var node=nodeStack.pop();this.add(node,nodeStack);}};jsts.operation.buffer.BufferSubgraph.prototype.add=function(node,nodeStack){node.setVisited(true);this.nodes.add(node);for(var i=node.getEdges().iterator();i.hasNext();){var de=i.next();this.dirEdgeList.add(de);var sym=de.getSym();var symNode=sym.getNode();if(!symNode.isVisited())
nodeStack.push(symNode);}};jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var it=this.dirEdgeList.iterator();it.hasNext();){var de=it.next();de.setVisited(false);}};jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(outsideDepth){this.clearVisitedEdges();var de=this.finder.getEdge();var n=de.getNode();var label=de.getLabel();de.setEdgeDepths(jsts.geomgraph.Position.RIGHT,outsideDepth);this.copySymDepths(de);this.computeDepths(de);};jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(startEdge){var nodesVisited=[];var nodeQueue=[];var startNode=startEdge.getNode();nodeQueue.push(startNode);nodesVisited.push(startNode);startEdge.setVisited(true);while(nodeQueue.length!==0){var n=nodeQueue.shift();nodesVisited.push(n);this.computeNodeDepth(n);for(var i=n.getEdges().iterator();i.hasNext();){var de=i.next();var sym=de.getSym();if(sym.isVisited())
continue;var adjNode=sym.getNode();if(nodesVisited.indexOf(adjNode)===-1){nodeQueue.push(adjNode);nodesVisited.push(adjNode);}}}};jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(n){var startEdge=null;for(var i=n.getEdges().iterator();i.hasNext();){var de=i.next();if(de.isVisited()||de.getSym().isVisited()){startEdge=de;break;}}
if(startEdge==null)
throw new jsts.error.TopologyError('unable to find edge to compute depths at '+n.getCoordinate());n.getEdges().computeDepths(startEdge);for(var i=n.getEdges().iterator();i.hasNext();){var de=i.next();de.setVisited(true);this.copySymDepths(de);}};jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(de){var sym=de.getSym();sym.setDepth(jsts.geomgraph.Position.LEFT,de.getDepth(jsts.geomgraph.Position.RIGHT));sym.setDepth(jsts.geomgraph.Position.RIGHT,de.getDepth(jsts.geomgraph.Position.LEFT));};jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var it=this.dirEdgeList.iterator();it.hasNext();){var de=it.next();if(de.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&de.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!de.isInteriorAreaEdge()){de.setInResult(true);}}};jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(o){var graph=o;if(this.rightMostCoord.x<graph.rightMostCoord.x){return-1;}
if(this.rightMostCoord.x>graph.rightMostCoord.x){return 1;}
return 0;};jsts.simplify.DPTransformer=function(distanceTolerance,isEnsureValidTopology){this.distanceTolerance=distanceTolerance;this.isEnsureValidTopology=isEnsureValidTopology;};jsts.simplify.DPTransformer.prototype=new jsts.geom.util.GeometryTransformer();jsts.simplify.DPTransformer.prototype.distanceTolerance=null;jsts.simplify.DPTransformer.prototype.isEnsureValidTopology=null;jsts.simplify.DPTransformer.prototype.transformCoordinates=function(coords,parent){var inputPts=coords;var newPts=null;if(inputPts.length==0){newPts=[];}else{newPts=jsts.simplify.DouglasPeuckerLineSimplifier.simplify(inputPts,this.distanceTolerance);}
return newPts;};jsts.simplify.DPTransformer.prototype.transformPolygon=function(geom,parent){if(geom.isEmpty()){return null;}
var rawGeom=jsts.geom.util.GeometryTransformer.prototype.transformPolygon.apply(this,arguments);if(parent instanceof jsts.geom.MultiPolygon){return rawGeom;}
return this.createValidArea(rawGeom);};jsts.simplify.DPTransformer.prototype.transformLinearRing=function(geom,parent){var removeDegenerateRings=parent instanceof jsts.geom.Polygon;var simpResult=jsts.geom.util.GeometryTransformer.prototype.transformLinearRing.apply(this,arguments);if(removeDegenerateRings&&!(simpResult instanceof jsts.geom.LinearRing)){return null;}
return simpResult;};jsts.simplify.DPTransformer.prototype.transformMultiPolygon=function(geom,parent){var rawGeom=jsts.geom.util.GeometryTransformer.prototype.transformMultiPolygon.apply(this,arguments);return this.createValidArea(rawGeom);};jsts.simplify.DPTransformer.prototype.createValidArea=function(rawAreaGeom){if(this.isEnsureValidTopology){return rawAreaGeom.buffer(0.0);}
return rawAreaGeom;};jsts.geom.util.GeometryExtracter=function(clz,comps){this.clz=clz;this.comps=comps;};jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.GeometryExtracter.prototype.clz=null;jsts.geom.util.GeometryExtracter.prototype.comps=null;jsts.geom.util.GeometryExtracter.extract=function(geom,clz,list){list=list||new javascript.util.ArrayList();if(geom instanceof clz){list.add(geom);}
else if(geom instanceof jsts.geom.GeometryCollection||geom instanceof jsts.geom.MultiPoint||geom instanceof jsts.geom.MultiLineString||geom instanceof jsts.geom.MultiPolygon){geom.apply(new jsts.geom.util.GeometryExtracter(clz,list));}
return list;};jsts.geom.util.GeometryExtracter.prototype.filter=function(geom){if(this.clz===null||geom instanceof this.clz){this.comps.add(geom);}};(function(){var OverlayOp=jsts.operation.overlay.OverlayOp;var SnapOverlayOp=jsts.operation.overlay.snap.SnapOverlayOp;var SnapIfNeededOverlayOp=function(g1,g2){this.geom=[];this.geom[0]=g1;this.geom[1]=g2;};SnapIfNeededOverlayOp.overlayOp=function(g0,g1,opCode){var op=new SnapIfNeededOverlayOp(g0,g1);return op.getResultGeometry(opCode);};SnapIfNeededOverlayOp.intersection=function(g0,g1){return overlayOp(g0,g1,OverlayOp.INTERSECTION);};SnapIfNeededOverlayOp.union=function(g0,g1){return overlayOp(g0,g1,OverlayOp.UNION);};SnapIfNeededOverlayOp.difference=function(g0,g1){return overlayOp(g0,g1,OverlayOp.DIFFERENCE);};SnapIfNeededOverlayOp.symDifference=function(g0,g1){return overlayOp(g0,g1,OverlayOp.SYMDIFFERENCE);};SnapIfNeededOverlayOp.prototype.geom=null;SnapIfNeededOverlayOp.prototype.getResultGeometry=function(opCode){var result=null;var isSuccess=false;var savedException=null;try{result=OverlayOp.overlayOp(this.geom[0],this.geom[1],opCode);var isValid=true;if(isValid)
isSuccess=true;}catch(ex){savedException=ex;}
if(!isSuccess){try{result=SnapOverlayOp.overlayOp(this.geom[0],this.geom[1],opCode);}catch(ex){throw savedException;}}
return result;};jsts.operation.overlay.snap.SnapIfNeededOverlayOp=SnapIfNeededOverlayOp;})();(function(){var GeometryExtracter=jsts.geom.util.GeometryExtracter;var CascadedPolygonUnion=jsts.operation.union.CascadedPolygonUnion;var PointGeometryUnion=jsts.operation.union.PointGeometryUnion;var OverlayOp=jsts.operation.overlay.OverlayOp;var SnapIfNeededOverlayOp=jsts.operation.overlay.snap.SnapIfNeededOverlayOp;var ArrayList=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(geoms,geomFact){this.polygons=new ArrayList();this.lines=new ArrayList();this.points=new ArrayList();if(geomFact){this.geomFact=geomFact;}
this.extract(geoms);};jsts.operation.union.UnaryUnionOp.union=function(geoms,geomFact){var op=new jsts.operation.union.UnaryUnionOp(geoms,geomFact);return op.union();};jsts.operation.union.UnaryUnionOp.prototype.polygons=null;jsts.operation.union.UnaryUnionOp.prototype.lines=null;jsts.operation.union.UnaryUnionOp.prototype.points=null;jsts.operation.union.UnaryUnionOp.prototype.geomFact=null;jsts.operation.union.UnaryUnionOp.prototype.extract=function(geoms){if(geoms instanceof ArrayList){for(var i=geoms.iterator();i.hasNext();){var geom=i.next();this.extract(geom);}}else{if(this.geomFact===null){this.geomFact=geoms.getFactory();}
GeometryExtracter.extract(geoms,jsts.geom.Polygon,this.polygons);GeometryExtracter.extract(geoms,jsts.geom.LineString,this.lines);GeometryExtracter.extract(geoms,jsts.geom.Point,this.points);}};jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(this.geomFact===null){return null;}
var unionPoints=null;if(this.points.size()>0){var ptGeom=this.geomFact.buildGeometry(this.points);unionPoints=this.unionNoOpt(ptGeom);}
var unionLines=null;if(this.lines.size()>0){var lineGeom=this.geomFact.buildGeometry(this.lines);unionLines=this.unionNoOpt(lineGeom);}
var unionPolygons=null;if(this.polygons.size()>0){unionPolygons=CascadedPolygonUnion.union(this.polygons);}
var unionLA=this.unionWithNull(unionLines,unionPolygons);var union=null;if(unionPoints===null){union=unionLA;}else if(unionLA===null){union=unionPoints;}else{union=PointGeometryUnion(unionPoints,unionLA);}
if(union===null){return this.geomFact.createGeometryCollection(null);}
return union;};jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(g0,g1){if(g0===null&&g1===null){return null;}
if(g1===null){return g0;}
if(g0===null){return g1;}
return g0.union(g1);};jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(g0){var empty=this.geomFact.createPoint(null);return SnapIfNeededOverlayOp.overlayOp(g0,empty,OverlayOp.UNION);};}());jsts.index.kdtree.KdNode=function(){this.left=null;this.right=null;this.count=1;if(arguments.length===2){this.initializeFromCoordinate.apply(this,arguments[0],arguments[1]);}else if(arguments.length===3){this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2]);}};jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(x,y,data){this.p=new jsts.geom.Coordinate(x,y);this.data=data;};jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(p,data){this.p=p;this.data=data;};jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x;};jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y;};jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p;};jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data;};jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left;};jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right;};jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1;};jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count;};jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1;};jsts.index.kdtree.KdNode.prototype.setLeft=function(left){this.left=left;};jsts.index.kdtree.KdNode.prototype.setRight=function(right){this.right=right;};jsts.algorithm.InteriorPointPoint=function(geometry){this.minDistance=Number.MAX_VALUE;this.interiorPoint=null;this.centroid=geometry.getCentroid().getCoordinate();this.add(geometry);};jsts.algorithm.InteriorPointPoint.prototype.add=function(geometry){if(geometry instanceof jsts.geom.Point){this.addPoint(geometry.getCoordinate());}else if(geometry instanceof jsts.geom.GeometryCollection){for(var i=0;i<geometry.getNumGeometries();i++){this.add(geometry.getGeometryN(i));}}};jsts.algorithm.InteriorPointPoint.prototype.addPoint=function(point){var dist=point.distance(this.centroid);if(dist<this.minDistance){this.interiorPoint=new jsts.geom.Coordinate(point);this.minDistance=dist;}};jsts.algorithm.InteriorPointPoint.prototype.getInteriorPoint=function(){return this.interiorPoint;};(function(){jsts.geom.MultiLineString=function(geometries,factory){this.geometries=geometries||[];this.factory=factory;};jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString;jsts.geom.MultiLineString.prototype.getBoundary=function(){return(new jsts.operation.BoundaryOp(this)).getBoundary();};jsts.geom.MultiLineString.prototype.equalsExact=function(other,tolerance){if(!this.isEquivalentClass(other)){return false;}
return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,other,tolerance);};jsts.geom.MultiLineString.prototype.CLASS_NAME='jsts.geom.MultiLineString';})();(function(){var Interval=jsts.index.bintree.Interval;var Root=jsts.index.bintree.Root;var Bintree=function(){this.root=new Root();this.minExtent=1.0;};Bintree.ensureExtent=function(itemInterval,minExtent){var min,max;min=itemInterval.getMin();max=itemInterval.getMax();if(min!==max){return itemInterval;}
if(min===max){min=min-(minExtent/2.0);max=min+(minExtent/2.0);}
return new Interval(min,max);};Bintree.prototype.depth=function(){if(this.root!==null){return this.root.depth();}
return 0;};Bintree.prototype.size=function(){if(this.root!==null){return this.root.size();}
return 0;};Bintree.prototype.nodeSize=function(){if(this.root!==null){return this.root.nodeSize();}
return 0;};Bintree.prototype.insert=function(itemInterval,item){this.collectStats(itemInterval);var insertInterval=Bintree.ensureExtent(itemInterval,this.minExtent);this.root.insert(insertInterval,item);};Bintree.prototype.remove=function(itemInterval,item){var insertInterval=Bintree.ensureExtent(itemInterval,this.minExtent);return this.root.remove(insertInterval,item);};Bintree.prototype.iterator=function(){var foundItems=new javascript.util.ArrayList();this.root.addAllItems(foundItems);return foundItems.iterator();};Bintree.prototype.query=function(){if(arguments.length===2){this.queryAndAdd(arguments[0],arguments[1]);}else{var x=arguments[0];if(!x instanceof Interval){x=new Interval(x,x);}
return this.queryInterval(x);}};Bintree.prototype.queryInterval=function(interval){var foundItems=new javascript.util.ArrayList();this.query(interval,foundItems);return foundItems;};Bintree.prototype.queryAndAdd=function(interval,foundItems){this.root.addAllItemsFromOverlapping(interval,foundItems);};Bintree.prototype.collectStats=function(interval){var del=interval.getWidth();if(del<this.minExtent&&del>0.0){this.minExtent=del;}};jsts.index.bintree.Bintree=Bintree;})();jsts.algorithm.InteriorPointArea=function(geometry){this.factory;this.interiorPoint=null;this.maxWidth=0;this.factory=geometry.getFactory();this.add(geometry);};jsts.algorithm.InteriorPointArea.avg=function(a,b){return(a+b)/2;};jsts.algorithm.InteriorPointArea.prototype.getInteriorPoint=function(){return this.interiorPoint;};jsts.algorithm.InteriorPointArea.prototype.add=function(geometry){if(geometry instanceof jsts.geom.Polygon){this.addPolygon(geometry);}else if(geometry instanceof jsts.geom.GeometryCollection){for(var i=0;i<geometry.getNumGeometries();i++){this.add(geometry.getGeometryN(i));}}};jsts.algorithm.InteriorPointArea.prototype.addPolygon=function(geometry){if(geometry.isEmpty()){return;}
var intPt;var width=0;var bisector=this.horizontalBisector(geometry);if(bisector.getLength()==0.0){width=0;intPt=bisector.getCoordinate();}else{var intersections=bisector.intersection(geometry);var widestIntersection=this.widestGeometry(intersections);width=widestIntersection.getEnvelopeInternal().getWidth();intPt=this.centre(widestIntersection.getEnvelopeInternal());}
if(this.interiorPoint==null||width>this.maxWidth){this.interiorPoint=intPt;this.maxWidth=width;}};jsts.algorithm.InteriorPointArea.prototype.widestGeometry=function(obj){if(obj instanceof jsts.geom.GeometryCollection){var gc=obj;if(gc.isEmpty()){return gc;}
var widestGeometry=gc.getGeometryN(0);for(var i=1;i<gc.getNumGeometries();i++){if(gc.getGeometryN(i).getEnvelopeInternal().getWidth()>widestGeometry.getEnvelopeInternal().getWidth()){widestGeometry=gc.getGeometryN(i);}}
return widestGeometry;}else if(obj instanceof jsts.geom.Geometry){return obj;}};jsts.algorithm.InteriorPointArea.prototype.horizontalBisector=function(geometry){var envelope=geometry.getEnvelopeInternal();var bisectY=jsts.algorithm.SafeBisectorFinder.getBisectorY(geometry);return this.factory.createLineString([new jsts.geom.Coordinate(envelope.getMinX(),bisectY),new jsts.geom.Coordinate(envelope.getMaxX(),bisectY)]);};jsts.algorithm.InteriorPointArea.prototype.centre=function(envelope){return new jsts.geom.Coordinate(jsts.algorithm.InteriorPointArea.avg(envelope.getMinX(),envelope.getMaxX()),jsts.algorithm.InteriorPointArea.avg(envelope.getMinY(),envelope.getMaxY()));};jsts.algorithm.SafeBisectorFinder=function(poly){this.poly;this.centreY;this.hiY=Number.MAX_VALUE;this.loY=-Number.MAX_VALUE;this.poly=poly;this.hiY=poly.getEnvelopeInternal().getMaxY();this.loY=poly.getEnvelopeInternal().getMinY();this.centreY=jsts.algorithm.InteriorPointArea.avg(this.loY,this.hiY);};jsts.algorithm.SafeBisectorFinder.getBisectorY=function(poly){var finder=new jsts.algorithm.SafeBisectorFinder(poly);return finder.getBisectorY();};jsts.algorithm.SafeBisectorFinder.prototype.getBisectorY=function(){this.process(this.poly.getExteriorRing());for(var i=0;i<this.poly.getNumInteriorRing();i++){this.process(this.poly.getInteriorRingN(i));}
var bisectY=jsts.algorithm.InteriorPointArea.avg(this.hiY,this.loY);return bisectY;};jsts.algorithm.SafeBisectorFinder.prototype.process=function(line){var seq=line.getCoordinateSequence();for(var i=0;i<seq.length;i++){var y=seq[i].y;this.updateInterval(y);}};jsts.algorithm.SafeBisectorFinder.prototype.updateInterval=function(y){if(y<=this.centreY){if(y>this.loY){this.loY=y;}}else if(y>this.centreY){if(y<this.hiY){this.hiY=y;}}};jsts.operation.buffer.BufferParameters=function(quadrantSegments,endCapStyle,joinStyle,mitreLimit){if(quadrantSegments)
this.setQuadrantSegments(quadrantSegments);if(endCapStyle)
this.setEndCapStyle(endCapStyle);if(joinStyle)
this.setJoinStyle(joinStyle);if(mitreLimit)
this.setMitreLimit(mitreLimit);};jsts.operation.buffer.BufferParameters.CAP_ROUND=1;jsts.operation.buffer.BufferParameters.CAP_FLAT=2;jsts.operation.buffer.BufferParameters.CAP_SQUARE=3;jsts.operation.buffer.BufferParameters.JOIN_ROUND=1;jsts.operation.buffer.BufferParameters.JOIN_MITRE=2;jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3;jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8;jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5.0;jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS;jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND;jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND;jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT;jsts.operation.buffer.BufferParameters.prototype._isSingleSided=false;jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments;};jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(quadrantSegments){this.quadrantSegments=quadrantSegments;};jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(quadSegs){this.quadrantSegments=quadSegs;if(this.quadrantSegments===0)
this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL;if(this.quadrantSegments<0){this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE;this.mitreLimit=Math.abs(this.quadrantSegments);}
if(quadSegs<=0){this.quadrantSegments=1;}
if(this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND){this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS;}};jsts.operation.buffer.BufferParameters.bufferDistanceError=function(quadSegs){var alpha=Math.PI/2.0/quadSegs;return 1-Math.cos(alpha/2.0);};jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle;};jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(endCapStyle){this.endCapStyle=endCapStyle;};jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle;};jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(joinStyle){this.joinStyle=joinStyle;};jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit;};jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(mitreLimit){this.mitreLimit=mitreLimit;};jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(isSingleSided){this._isSingleSided=isSingleSided;};jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided;};(function(){jsts.geom.util.ShortCircuitedGeometryVisitor=function(){};jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone=false;jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.applyTo=function(geom){for(var i=0;i<geom.getNumGeometries()&&!this.isDone;i++){var element=geom.getGeometryN(i);if(!(element instanceof jsts.geom.GeometryCollection)){this.visit(element);if(this.isDone()){this.isDone=true;return;}}
else
this.applyTo(element);}}
jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.visit=function(element){};jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone=function(){};})();(function(){var EnvelopeIntersectsVisitor=function(rectEnv){this.rectEnv=rectEnv;};EnvelopeIntersectsVisitor.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor();EnvelopeIntersectsVisitor.constructor=EnvelopeIntersectsVisitor;EnvelopeIntersectsVisitor.prototype.rectEnv=null;EnvelopeIntersectsVisitor.prototype.intersects=false;EnvelopeIntersectsVisitor.prototype.intersects=function(){return this.intersects;}
EnvelopeIntersectsVisitor.prototype.visit=function(element){var elementEnv=element.getEnvelopeInternal();if(!this.rectEnv.intersects(elementEnv)){return;}
if(this.rectEnv.contains(elementEnv)){this.intersects=true;return;}
if(elementEnv.getMinX()>=rectEnv.getMinX()&&elementEnv.getMaxX()<=rectEnv.getMaxX()){this.intersects=true;return;}
if(elementEnv.getMinY()>=rectEnv.getMinY()&&elementEnv.getMaxY()<=rectEnv.getMaxY()){this.intersects=true;return;}}
EnvelopeIntersectsVisitor.prototype.isDone=function(){return this.intersects==true;}
var GeometryContainsPointVisitor=function(rectangle){this.rectSeq=rectangle.getExteriorRing().getCoordinateSequence();this.rectEnv=rectangle.getEnvelopeInternal();};GeometryContainsPointVisitor.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor();GeometryContainsPointVisitor.constructor=GeometryContainsPointVisitor;GeometryContainsPointVisitor.prototype.rectSeq=null;GeometryContainsPointVisitor.prototype.rectEnv=null;GeometryContainsPointVisitor.prototype.containsPoint=false;GeometryContainsPointVisitor.prototype.containsPoint=function(){return this.containsPoint;}
GeometryContainsPointVisitor.prototype.visit=function(geom){if(!(geom instanceof jsts.geom.Polygon))
return;var elementEnv=geom.getEnvelopeInternal();if(!this.rectEnv.intersects(elementEnv))
return;var rectPt=new jsts.geom.Coordinate();for(var i=0;i<4;i++){this.rectSeq.getCoordinate(i,rectPt);if(!elementEnv.contains(rectPt))
continue;if(SimplePointInAreaLocator.containsPointInPolygon(rectPt,geom)){this.containsPoint=true;return;}}}
GeometryContainsPointVisitor.prototype.isDone=function(){return this.containsPoint==true;}
var RectangleIntersectsSegmentVisitor=function(rectangle){this.rectEnv=rectangle.getEnvelopeInternal();this.rectIntersector=new RectangleLineIntersector(rectEnv);};RectangleIntersectsSegmentVisitor.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor();RectangleIntersectsSegmentVisitor.constructor=RectangleIntersectsSegmentVisitor;RectangleIntersectsSegmentVisitor.prototype.rectEnv=null;RectangleIntersectsSegmentVisitor.prototype.rectIntersector=null;RectangleIntersectsSegmentVisitor.prototype.hasIntersection=false;RectangleIntersectsSegmentVisitor.prototype.p0=null;RectangleIntersectsSegmentVisitor.prototype.p1=null;RectangleIntersectsSegmentVisitor.prototype.intersects=function(){return this.hasIntersection;}
RectangleIntersectsSegmentVisitor.prototype.visit=function(geom){var elementEnv=geom.getEnvelopeInternal();if(!this.rectEnv.intersects(elementEnv))
return;var lines=LinearComponentExtracter.getLines(geom);this.checkIntersectionWithLineStrings(lines);}
RectangleIntersectsSegmentVisitor.prototype.checkIntersectionWithLineStrings=function(lines){for(var i=lines.iterator();i.hasNext();){var testLine=i.next();this.checkIntersectionWithSegments(testLine);if(this.hasIntersection)
return;}}
RectangleIntersectsSegmentVisitor.prototype.checkIntersectionWithSegments=function(testLine){var seq1=testLine.getCoordinateSequence();for(var j=1;j<seq1.length;j++){this.p0=seq1[j-1];this.p1=seq1[j];if(rectIntersector.intersects(p0,p1)){this.hasIntersection=true;return;}}}
RectangleIntersectsSegmentVisitor.prototype.isDone=function(){return this.hasIntersection==true;}
jsts.operation.predicate.RectangleIntersects=function(rectangle){this.rectangle=rectangle;this.rectEnv=rectangle.getEnvelopeInternal();}
jsts.operation.predicate.RectangleIntersects.intersects=function(rectangle,b){var rp=new jsts.operation.predicate.RectangleIntersects(rectangle);return rp.intersects(b);}
jsts.operation.predicate.RectangleIntersects.prototype.rectangle=null;jsts.operation.predicate.RectangleIntersects.prototype.rectEnv=null;jsts.operation.predicate.RectangleIntersects.prototype.intersects=function(geom){if(!this.rectEnv.intersects(geom.getEnvelopeInternal()))
return false;var visitor=new EnvelopeIntersectsVisitor(this.rectEnv);visitor.applyTo(geom);if(visitor.intersects())
return true;var ecpVisitor=new GeometryContainsPointVisitor(rectangle);ecpVisitor.applyTo(geom);if(ecpVisitor.containsPoint())
return true;var riVisitor=new RectangleIntersectsSegmentVisitor(rectangle);riVisitor.applyTo(geom);if(riVisitor.intersects())
return true;return false;}})();jsts.operation.buffer.BufferBuilder=function(bufParams){this.bufParams=bufParams;this.edgeList=new jsts.geomgraph.EdgeList();};jsts.operation.buffer.BufferBuilder.depthDelta=function(label){var lLoc=label.getLocation(0,jsts.geomgraph.Position.LEFT);var rLoc=label.getLocation(0,jsts.geomgraph.Position.RIGHT);if(lLoc===jsts.geom.Location.INTERIOR&&rLoc===jsts.geom.Location.EXTERIOR)
return 1;else if(lLoc===jsts.geom.Location.EXTERIOR&&rLoc===jsts.geom.Location.INTERIOR)
return-1;return 0;};jsts.operation.buffer.BufferBuilder.prototype.bufParams=null;jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null;jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null;jsts.operation.buffer.BufferBuilder.prototype.geomFact=null;jsts.operation.buffer.BufferBuilder.prototype.graph=null;jsts.operation.buffer.BufferBuilder.prototype.edgeList=null;jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(pm){this.workingPrecisionModel=pm;};jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(noder){this.workingNoder=noder;};jsts.operation.buffer.BufferBuilder.prototype.buffer=function(g,distance){var precisionModel=this.workingPrecisionModel;if(precisionModel===null)
precisionModel=g.getPrecisionModel();this.geomFact=g.getFactory();var curveBuilder=new jsts.operation.buffer.OffsetCurveBuilder(precisionModel,this.bufParams);var curveSetBuilder=new jsts.operation.buffer.OffsetCurveSetBuilder(g,distance,curveBuilder);var bufferSegStrList=curveSetBuilder.getCurves();if(bufferSegStrList.size()<=0){return this.createEmptyResultGeometry();}
this.computeNodedEdges(bufferSegStrList,precisionModel);this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory());this.graph.addEdges(this.edgeList.getEdges());var subgraphList=this.createSubgraphs(this.graph);var polyBuilder=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(subgraphList,polyBuilder);var resultPolyList=polyBuilder.getPolygons();if(resultPolyList.size()<=0){return this.createEmptyResultGeometry();}
var resultGeom=this.geomFact.buildGeometry(resultPolyList);return resultGeom;};jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(precisionModel){if(this.workingNoder!==null)
return this.workingNoder;var noder=new jsts.noding.MCIndexNoder();var li=new jsts.algorithm.RobustLineIntersector();li.setPrecisionModel(precisionModel);noder.setSegmentIntersector(new jsts.noding.IntersectionAdder(li));return noder;};jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(bufferSegStrList,precisionModel){var noder=this.getNoder(precisionModel);noder.computeNodes(bufferSegStrList);var nodedSegStrings=noder.getNodedSubstrings();for(var i=nodedSegStrings.iterator();i.hasNext();){var segStr=i.next();var oldLabel=segStr.getData();var edge=new jsts.geomgraph.Edge(segStr.getCoordinates(),new jsts.geomgraph.Label(oldLabel));this.insertUniqueEdge(edge);}};jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(e){var existingEdge=this.edgeList.findEqualEdge(e);if(existingEdge!=null){var existingLabel=existingEdge.getLabel();var labelToMerge=e.getLabel();if(!existingEdge.isPointwiseEqual(e)){labelToMerge=new jsts.geomgraph.Label(e.getLabel());labelToMerge.flip();}
existingLabel.merge(labelToMerge);var mergeDelta=jsts.operation.buffer.BufferBuilder.depthDelta(labelToMerge);var existingDelta=existingEdge.getDepthDelta();var newDelta=existingDelta+mergeDelta;existingEdge.setDepthDelta(newDelta);}else{this.edgeList.add(e);e.setDepthDelta(jsts.operation.buffer.BufferBuilder.depthDelta(e.getLabel()));}};jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(graph){var subgraphList=[];for(var i=graph.getNodes().iterator();i.hasNext();){var node=i.next();if(!node.isVisited()){var subgraph=new jsts.operation.buffer.BufferSubgraph();subgraph.create(node);subgraphList.push(subgraph);}}
var compare=function(a,b){return a.compareTo(b);};subgraphList.sort(compare);subgraphList.reverse();return subgraphList;};jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(subgraphList,polyBuilder){var processedGraphs=[];for(var i=0;i<subgraphList.length;i++){var subgraph=subgraphList[i];var p=subgraph.getRightmostCoordinate();var locater=new jsts.operation.buffer.SubgraphDepthLocater(processedGraphs);var outsideDepth=locater.getDepth(p);subgraph.computeDepth(outsideDepth);subgraph.findResultEdges();processedGraphs.push(subgraph);polyBuilder.add(subgraph.getDirectedEdges(),subgraph.getNodes());}};jsts.operation.buffer.BufferBuilder.convertSegStrings=function(it){var fact=new jsts.geom.GeometryFactory();var lines=new javascript.util.ArrayList();while(it.hasNext()){var ss=it.next();var line=fact.createLineString(ss.getCoordinates());lines.add(line);}
return fact.buildGeometry(lines);};jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){var emptyGeom=this.geomFact.createPolygon(null,null);return emptyGeom;};jsts.noding.SegmentPointComparator=function(){};jsts.noding.SegmentPointComparator.compare=function(octant,p0,p1){if(p0.equals2D(p1))
return 0;var xSign=jsts.noding.SegmentPointComparator.relativeSign(p0.x,p1.x);var ySign=jsts.noding.SegmentPointComparator.relativeSign(p0.y,p1.y);switch(octant){case 0:return jsts.noding.SegmentPointComparator.compareValue(xSign,ySign);case 1:return jsts.noding.SegmentPointComparator.compareValue(ySign,xSign);case 2:return jsts.noding.SegmentPointComparator.compareValue(ySign,-xSign);case 3:return jsts.noding.SegmentPointComparator.compareValue(-xSign,ySign);case 4:return jsts.noding.SegmentPointComparator.compareValue(-xSign,-ySign);case 5:return jsts.noding.SegmentPointComparator.compareValue(-ySign,-xSign);case 6:return jsts.noding.SegmentPointComparator.compareValue(-ySign,xSign);case 7:return jsts.noding.SegmentPointComparator.compareValue(xSign,-ySign);}
return 0;};jsts.noding.SegmentPointComparator.relativeSign=function(x0,x1){if(x0<x1)
return-1;if(x0>x1)
return 1;return 0;};jsts.noding.SegmentPointComparator.compareValue=function(compareSign0,compareSign1){if(compareSign0<0)
return-1;if(compareSign0>0)
return 1;if(compareSign1<0)
return-1;if(compareSign1>0)
return 1;return 0;};jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments);this._relate=new jsts.operation.relate.RelateComputer(this.arg);};jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation();jsts.operation.relate.RelateOp.relate=function(a,b,boundaryNodeRule){var relOp=new jsts.operation.relate.RelateOp(a,b,boundaryNodeRule);var im=relOp.getIntersectionMatrix();return im;};jsts.operation.relate.RelateOp.prototype._relate=null;jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM();};jsts.index.chain.MonotoneChain=function(pts,start,end,context){this.pts=pts;this.start=start;this.end=end;this.context=context;};jsts.index.chain.MonotoneChain.prototype.pts=null;jsts.index.chain.MonotoneChain.prototype.start=null;jsts.index.chain.MonotoneChain.prototype.end=null;jsts.index.chain.MonotoneChain.prototype.env=null;jsts.index.chain.MonotoneChain.prototype.context=null;jsts.index.chain.MonotoneChain.prototype.id=null;jsts.index.chain.MonotoneChain.prototype.setId=function(id){this.id=id;};jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id;};jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context;};jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(this.env==null){var p0=this.pts[this.start];var p1=this.pts[this.end];this.env=new jsts.geom.Envelope(p0,p1);}
return this.env;};jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start;};jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end;};jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(index,ls){ls.p0=this.pts[index];ls.p1=this.pts[index+1];};jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){var coord=[];var index=0;for(var i=this.start;i<=this.end;i++){coord[index++]=this.pts[i];}
return coord;};jsts.index.chain.MonotoneChain.prototype.select=function(searchEnv,mcs){this.computeSelect2(searchEnv,this.start,this.end,mcs);};jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(searchEnv,start0,end0,mcs){var p0=this.pts[start0];var p1=this.pts[end0];mcs.tempEnv1.init(p0,p1);if(end0-start0===1){mcs.select(this,start0);return;}
if(!searchEnv.intersects(mcs.tempEnv1))
return;var mid=parseInt((start0+end0)/2);if(start0<mid){this.computeSelect2(searchEnv,start0,mid,mcs);}
if(mid<end0){this.computeSelect2(searchEnv,mid,end0,mcs);}};jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(mc,mco){if(arguments.length===6){return this.computeOverlaps2.apply(this,arguments);}
this.computeOverlaps2(this.start,this.end,mc,mc.start,mc.end,mco);};jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(start0,end0,mc,start1,end1,mco){var p00=this.pts[start0];var p01=this.pts[end0];var p10=mc.pts[start1];var p11=mc.pts[end1];if(end0-start0===1&&end1-start1===1){mco.overlap(this,start0,mc,start1);return;}
mco.tempEnv1.init(p00,p01);mco.tempEnv2.init(p10,p11);if(!mco.tempEnv1.intersects(mco.tempEnv2))
return;var mid0=parseInt((start0+end0)/2);var mid1=parseInt((start1+end1)/2);if(start0<mid0){if(start1<mid1)
this.computeOverlaps2(start0,mid0,mc,start1,mid1,mco);if(mid1<end1)
this.computeOverlaps2(start0,mid0,mc,mid1,end1,mco);}
if(mid0<end0){if(start1<mid1)
this.computeOverlaps2(mid0,end0,mc,start1,mid1,mco);if(mid1<end1)
this.computeOverlaps2(mid0,end0,mc,mid1,end1,mco);}};(function(){var Location=jsts.geom.Location;var Dimension=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(elements){var other=elements;if(elements===undefined||elements===null){this.matrix=[[],[],[]];this.setAll(Dimension.FALSE);}else if(typeof elements==='string'){this.set(elements);}else if(other instanceof jsts.geom.IntersectionMatrix){this.matrix[Location.INTERIOR][Location.INTERIOR]=other.matrix[Location.INTERIOR][Location.INTERIOR];this.matrix[Location.INTERIOR][Location.BOUNDARY]=other.matrix[Location.INTERIOR][Location.BOUNDARY];this.matrix[Location.INTERIOR][Location.EXTERIOR]=other.matrix[Location.INTERIOR][Location.EXTERIOR];this.matrix[Location.BOUNDARY][Location.INTERIOR]=other.matrix[Location.BOUNDARY][Location.INTERIOR];this.matrix[Location.BOUNDARY][Location.BOUNDARY]=other.matrix[Location.BOUNDARY][Location.BOUNDARY];this.matrix[Location.BOUNDARY][Location.EXTERIOR]=other.matrix[Location.BOUNDARY][Location.EXTERIOR];this.matrix[Location.EXTERIOR][Location.INTERIOR]=other.matrix[Location.EXTERIOR][Location.INTERIOR];this.matrix[Location.EXTERIOR][Location.BOUNDARY]=other.matrix[Location.EXTERIOR][Location.BOUNDARY];this.matrix[Location.EXTERIOR][Location.EXTERIOR]=other.matrix[Location.EXTERIOR][Location.EXTERIOR];}};jsts.geom.IntersectionMatrix.prototype.matrix=null;jsts.geom.IntersectionMatrix.prototype.add=function(im){var i,j;for(i=0;i<3;i++){for(j=0;j<3;j++){this.setAtLeast(i,j,im.get(i,j));}}};jsts.geom.IntersectionMatrix.matches=function(actualDimensionValue,requiredDimensionSymbol){if(typeof actualDimensionValue==='string'){return jsts.geom.IntersectionMatrix.matches2.call(this,arguments);}
if(requiredDimensionSymbol==='*'){return true;}
if(requiredDimensionSymbol==='T'&&(actualDimensionValue>=0||actualDimensionValue===Dimension.TRUE)){return true;}
if(requiredDimensionSymbol==='F'&&actualDimensionValue===Dimension.FALSE){return true;}
if(requiredDimensionSymbol==='0'&&actualDimensionValue===Dimension.P){return true;}
if(requiredDimensionSymbol==='1'&&actualDimensionValue===Dimension.L){return true;}
if(requiredDimensionSymbol==='2'&&actualDimensionValue===Dimension.A){return true;}
return false;};jsts.geom.IntersectionMatrix.matches2=function(actualDimensionSymbols,requiredDimensionSymbols){var m=new jsts.geom.IntersectionMatrix(actualDimensionSymbols);return m.matches(requiredDimensionSymbols);};jsts.geom.IntersectionMatrix.prototype.set=function(row,column,dimensionValue){if(typeof row==='string'){this.set2(row);return;}
this.matrix[row][column]=dimensionValue;};jsts.geom.IntersectionMatrix.prototype.set2=function(dimensionSymbols){for(var i=0;i<dimensionSymbols.length();i++){var row=i/3;var col=i%3;this.matrix[row][col]=Dimension.toDimensionValue(dimensionSymbols.charAt(i));}};jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(row,column,minimumDimensionValue){if(arguments.length===1){this.setAtLeast2(arguments[0]);return;}
if(this.matrix[row][column]<minimumDimensionValue){this.matrix[row][column]=minimumDimensionValue;}};jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(row,column,minimumDimensionValue){if(row>=0&&column>=0){this.setAtLeast(row,column,minimumDimensionValue);}};jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(minimumDimensionSymbols){var i;for(i=0;i<minimumDimensionSymbols.length;i++){var row=parseInt(i/3);var col=parseInt(i%3);this.setAtLeast(row,col,jsts.geom.Dimension.toDimensionValue(minimumDimensionSymbols.charAt(i)));}};jsts.geom.IntersectionMatrix.prototype.setAll=function(dimensionValue){var ai,bi;for(ai=0;ai<3;ai++){for(bi=0;bi<3;bi++){this.matrix[ai][bi]=dimensionValue;}}};jsts.geom.IntersectionMatrix.prototype.get=function(row,column){return this.matrix[row][column];};jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[Location.INTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.INTERIOR][Location.BOUNDARY]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.BOUNDARY]===Dimension.FALSE;};jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return!this.isDisjoint();};jsts.geom.IntersectionMatrix.prototype.isTouches=function(dimensionOfGeometryA,dimensionOfGeometryB){if(dimensionOfGeometryA>dimensionOfGeometryB){return this.isTouches(dimensionOfGeometryB,dimensionOfGeometryA);}
if((dimensionOfGeometryA==Dimension.A&&dimensionOfGeometryB==Dimension.A)||(dimensionOfGeometryA==Dimension.L&&dimensionOfGeometryB==Dimension.L)||(dimensionOfGeometryA==Dimension.L&&dimensionOfGeometryB==Dimension.A)||(dimensionOfGeometryA==Dimension.P&&dimensionOfGeometryB==Dimension.A)||(dimensionOfGeometryA==Dimension.P&&dimensionOfGeometryB==Dimension.L)){return this.matrix[Location.INTERIOR][Location.INTERIOR]===Dimension.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.BOUNDARY],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.BOUNDARY][Location.INTERIOR],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.BOUNDARY][Location.BOUNDARY],'T'));}
return false;};jsts.geom.IntersectionMatrix.prototype.isCrosses=function(dimensionOfGeometryA,dimensionOfGeometryB){if((dimensionOfGeometryA==Dimension.P&&dimensionOfGeometryB==Dimension.L)||(dimensionOfGeometryA==Dimension.P&&dimensionOfGeometryB==Dimension.A)||(dimensionOfGeometryA==Dimension.L&&dimensionOfGeometryB==Dimension.A)){return jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.INTERIOR],'T')&&jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.EXTERIOR],'T');}
if((dimensionOfGeometryA==Dimension.L&&dimensionOfGeometryB==Dimension.P)||(dimensionOfGeometryA==Dimension.A&&dimensionOfGeometryB==Dimension.P)||(dimensionOfGeometryA==Dimension.A&&dimensionOfGeometryB==Dimension.L)){return jsts.geom.IntersectionMatrix.matches(matrix[Location.INTERIOR][Location.INTERIOR],'T')&&jsts.geom.IntersectionMatrix.matches(this.matrix[Location.EXTERIOR][Location.INTERIOR],'T');}
if(dimensionOfGeometryA===Dimension.L&&dimensionOfGeometryB===Dimension.L){return this.matrix[Location.INTERIOR][Location.INTERIOR]===0;}
return false;};jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.INTERIOR],'T')&&this.matrix[Location.INTERIOR][Location.EXTERIOR]==Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]==Dimension.FALSE;};jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.INTERIOR],'T')&&this.matrix[Location.EXTERIOR][Location.INTERIOR]==Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]==Dimension.FALSE;};jsts.geom.IntersectionMatrix.prototype.isCovers=function(){var hasPointInCommon=jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.INTERIOR],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.BOUNDARY],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.BOUNDARY][Location.INTERIOR],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.BOUNDARY][Location.BOUNDARY],'T');return hasPointInCommon&&this.matrix[Location.EXTERIOR][Location.INTERIOR]==Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]==Dimension.FALSE;};jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){var hasPointInCommon=jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.INTERIOR],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.BOUNDARY],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.BOUNDARY][Location.INTERIOR],'T')||jsts.geom.IntersectionMatrix.matches(this.matrix[Location.BOUNDARY][Location.BOUNDARY],'T');return hasPointInCommon&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE;};jsts.geom.IntersectionMatrix.prototype.isEquals=function(dimensionOfGeometryA,dimensionOfGeometryB){if(dimensionOfGeometryA!==dimensionOfGeometryB){return false;}
return jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.INTERIOR],'T')&&this.matrix[Location.EXTERIOR][Location.INTERIOR]===Dimension.FALSE&&this.matrix[Location.INTERIOR][Location.EXTERIOR]===Dimension.FALSE&&this.matrix[Location.EXTERIOR][Location.BOUNDARY]===Dimension.FALSE&&this.matrix[Location.BOUNDARY][Location.EXTERIOR]===Dimension.FALSE;};jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(dimensionOfGeometryA,dimensionOfGeometryB){if((dimensionOfGeometryA==Dimension.P&&dimensionOfGeometryB===Dimension.P)||(dimensionOfGeometryA==Dimension.A&&dimensionOfGeometryB===Dimension.A)){return jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.INTERIOR],'T')&&jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.EXTERIOR],'T')&&jsts.geom.IntersectionMatrix.matches(this.matrix[Location.EXTERIOR][Location.INTERIOR],'T');}
if(dimensionOfGeometryA===Dimension.L&&dimensionOfGeometryB===Dimension.L){return this.matrix[Location.INTERIOR][Location.INTERIOR]==1&&jsts.geom.IntersectionMatrix.matches(this.matrix[Location.INTERIOR][Location.EXTERIOR],'T')&&jsts.geom.IntersectionMatrix.matches(this.matrix[Location.EXTERIOR][Location.INTERIOR],'T');}
return false;};jsts.geom.IntersectionMatrix.prototype.matches=function(requiredDimensionSymbols){if(requiredDimensionSymbols.length!=9){throw new jsts.error.IllegalArgumentException('Should be length 9: '+
requiredDimensionSymbols);}
for(var ai=0;ai<3;ai++){for(var bi=0;bi<3;bi++){if(!jsts.geom.IntersectionMatrix.matches(this.matrix[ai][bi],requiredDimensionSymbols.charAt(3*ai+bi))){return false;}}}
return true;};jsts.geom.IntersectionMatrix.prototype.transpose=function(){var temp=matrix[1][0];this.matrix[1][0]=this.matrix[0][1];this.matrix[0][1]=temp;temp=this.matrix[2][0];this.matrix[2][0]=this.matrix[0][2];this.matrix[0][2]=temp;temp=this.matrix[2][1];this.matrix[2][1]=this.matrix[1][2];this.matrix[1][2]=temp;return this;};jsts.geom.IntersectionMatrix.prototype.toString=function(){var ai,bi,buf='';for(ai=0;ai<3;ai++){for(bi=0;bi<3;bi++){buf+=Dimension.toDimensionSymbol(this.matrix[ai][bi]);}}
return buf;};})();jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(subdiv){this.subdiv=subdiv;this.lastEdge=null;this.init();};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge();};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){var edges=this.subdiv.getEdges();return edges[0];};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(v){if(!this.lastEdge.isLive()){this.init();}
var e=this.subdiv.locateFromEdge(v,this.lastEdge);this.lastEdge=e;return e;};jsts.noding.SegmentNodeList=function(edge){this.nodeMap=new javascript.util.TreeMap();this.edge=edge;};jsts.noding.SegmentNodeList.prototype.nodeMap=null;jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator();};jsts.noding.SegmentNodeList.prototype.edge=null;jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge;};jsts.noding.SegmentNodeList.prototype.add=function(intPt,segmentIndex){var eiNew=new jsts.noding.SegmentNode(this.edge,intPt,segmentIndex,this.edge.getSegmentOctant(segmentIndex));var ei=this.nodeMap.get(eiNew);if(ei!==null){jsts.util.Assert.isTrue(ei.coord.equals2D(intPt),'Found equal nodes with different coordinates');return ei;}
this.nodeMap.put(eiNew,eiNew);return eiNew;};jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var maxSegIndex=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0);this.add(this.edge.getCoordinate(maxSegIndex),maxSegIndex);};jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var collapsedVertexIndexes=[];this.findCollapsesFromInsertedNodes(collapsedVertexIndexes);this.findCollapsesFromExistingVertices(collapsedVertexIndexes);for(var i=0;i<collapsedVertexIndexes.length;i++){var vertexIndex=collapsedVertexIndexes[i];this.add(this.edge.getCoordinate(vertexIndex),vertexIndex);}};jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(collapsedVertexIndexes){for(var i=0;i<this.edge.size()-2;i++){var p0=this.edge.getCoordinate(i);var p1=this.edge.getCoordinate(i+1);var p2=this.edge.getCoordinate(i+2);if(p0.equals2D(p2)){collapsedVertexIndexes.push(i+1);}}};jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(collapsedVertexIndexes){var collapsedVertexIndex=[null];var it=this.iterator();var eiPrev=it.next();while(it.hasNext()){var ei=it.next();var isCollapsed=this.findCollapseIndex(eiPrev,ei,collapsedVertexIndex);if(isCollapsed)
collapsedVertexIndexes.push(collapsedVertexIndex[0]);eiPrev=ei;}};jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(ei0,ei1,collapsedVertexIndex){if(!ei0.coord.equals2D(ei1.coord))
return false;var numVerticesBetween=ei1.segmentIndex-ei0.segmentIndex;if(!ei1.isInterior()){numVerticesBetween--;}
if(numVerticesBetween===1){collapsedVertexIndex[0]=ei0.segmentIndex+1;return true;}
return false;};jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(edgeList){this.addEndpoints();this.addCollapsedNodes();var it=this.iterator();var eiPrev=it.next();while(it.hasNext()){var ei=it.next();var newEdge=this.createSplitEdge(eiPrev,ei);edgeList.add(newEdge);eiPrev=ei;}};jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(splitEdges){var edgePts=edge.getCoordinates();var split0=splitEdges[0];var pt0=split0.getCoordinate(0);if(!pt0.equals2D(edgePts[0]))
throw new Error('bad split edge start point at '+pt0);var splitn=splitEdges[splitEdges.length-1];var splitnPts=splitn.getCoordinates();var ptn=splitnPts[splitnPts.length-1];if(!ptn.equals2D(edgePts[edgePts.length-1]))
throw new Error('bad split edge end point at '+ptn);};jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(ei0,ei1){var npts=ei1.segmentIndex-ei0.segmentIndex+2;var lastSegStartPt=this.edge.getCoordinate(ei1.segmentIndex);var useIntPt1=ei1.isInterior()||!ei1.coord.equals2D(lastSegStartPt);if(!useIntPt1){npts--;}
var pts=[];var ipt=0;pts[ipt++]=new jsts.geom.Coordinate(ei0.coord);for(var i=ei0.segmentIndex+1;i<=ei1.segmentIndex;i++){pts[ipt++]=this.edge.getCoordinate(i);}
if(useIntPt1)
pts[ipt]=ei1.coord;return new jsts.noding.NodedSegmentString(pts,this.edge.getData());};jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory);};jsts.io.WKTWriter.prototype.write=function(geometry){var wkt=this.parser.write(geometry);return wkt;};jsts.io.WKTWriter.toLineString=function(p0,p1){if(arguments.length!==2){throw new jsts.error.NotImplementedError();}
return'LINESTRING ( '+p0.x+' '+p0.y+', '+p1.x+' '+p1.y+' )';};jsts.io.WKTReader=function(geometryFactory){this.geometryFactory=geometryFactory||new jsts.geom.GeometryFactory();this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new jsts.io.WKTParser(this.geometryFactory);};jsts.io.WKTReader.prototype.read=function(wkt){var geometry=this.parser.read(wkt);if(this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED){this.reducePrecision(geometry);}
return geometry;};jsts.io.WKTReader.prototype.reducePrecision=function(geometry){var i,len;if(geometry.coordinate){this.precisionModel.makePrecise(geometry.coordinate);}else if(geometry.points){for(i=0,len=geometry.points.length;i<len;i++){this.precisionModel.makePrecise(geometry.points[i]);}}else if(geometry.geometries){for(i=0,len=geometry.geometries.length;i<len;i++){this.reducePrecision(geometry.geometries[i]);}}};jsts.triangulate.quadedge.QuadEdgeSubdivision=function(env,tolerance){this.tolerance=tolerance;this.edgeCoincidenceTolerance=tolerance/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR;this.visitedKey=0;this.quadEdges=[];this.startingEdge;this.tolerance;this.edgeCoincidenceTolerance;this.frameEnv;this.locator=null;this.seg=new jsts.geom.LineSegment();this.triEdges=new Array(3);this.frameVertex=new Array(3);this.createFrame(env);this.startingEdge=this.initSubdiv();this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this);};jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1000;jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(startQE,triEdge){triEdge[0]=startQE;triEdge[1]=triEdge[0].lNext();triEdge[2]=triEdge[1].lNext();if(triEdge[2].lNext()!=triEdge[0]){throw new jsts.IllegalArgumentError('Edges do not form a triangle');}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(env){var deltaX,deltaY,offset;deltaX=env.getWidth();deltaY=env.getHeight();offset=0.0;if(deltaX>deltaY){offset=deltaX*10.0;}else{offset=deltaY*10.0;}
this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((env.getMaxX()+env.getMinX())/2.0,env.getMaxY()
+offset);this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(env.getMinX()-offset,env.getMinY()-offset);this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(env.getMaxX()+offset,env.getMinY()-offset);this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate());this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate());};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var ea,eb,ec;ea=this.makeEdge(this.frameVertex[0],this.frameVertex[1]);eb=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);jsts.triangulate.quadedge.QuadEdge.splice(ea.sym(),eb);ec=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);jsts.triangulate.quadedge.QuadEdge.splice(eb.sym(),ec);jsts.triangulate.quadedge.QuadEdge.splice(ec.sym(),ea);return ea;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){if(arguments.length>0){return this.getEdgesByFactory(arguments[0]);}else{return this.quadEdges;}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(locator){this.locator=locator;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(o,d){var q=jsts.triangulate.quadedge.QuadEdge.makeEdge(o,d);this.quadEdges.push(q);return q;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(a,b){var q=jsts.triangulate.quadedge.QuadEdge.connect(a,b);this.quadEdges.push(q);return q;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(e){jsts.triangulate.quadedge.QuadEdge.splice(e,e.oPrev());jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),e.sym().oPrev());var eSym,eRot,eRotSym;e.eSym=e.sym();eRot=e.rot;eRotSym=e.rot.sym();var idx=this.quadEdges.indexOf(e);if(idx!==-1){this.quadEdges.splice(idx,1);}
idx=this.quadEdges.indexOf(eSym);if(idx!==-1){this.quadEdges.splice(idx,1);}
idx=this.quadEdges.indexOf(eRot);if(idx!==-1){this.quadEdges.splice(idx,1);}
idx=this.quadEdges.indexOf(eRotSym);if(idx!==-1){this.quadEdges.splice(idx,1);}
e.delete_jsts();eSym.delete_jsts();eRot.delete_jsts();eRotSym.delete_jsts();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(v,startEdge){var iter=0,maxIter=this.quadEdges.length,e;e=startEdge;while(true){iter++;if(iter>maxIter){throw new jsts.error.LocateFailureError(e.toLineSegment());}
if((v.equals(e.orig()))||(v.equals(e.dest()))){break;}else if(v.rightOf(e)){e=e.sym();}else if(!v.rightOf(e.oNext())){e=e.oNext();}else if(!v.rightOf(e.dPrev())){e=e.dPrev();}else{break;}}
return e;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){if(arguments.length===1){if(arguments[0]instanceof jsts.triangulate.quadedge.Vertex){return this.locateByVertex(arguments[0]);}else{return this.locateByCoordinate(arguments[0]);}}else{return this.locateByCoordinates(arguments[0],arguments[1]);}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(v){return this.locator.locate(v);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(p){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(p));};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinates=function(p0,p1){var e,base,locEdge;var e=this.locator.locate(new jsts.triangulate.quadedge.Vertex(p0));if(e===null){return null;}
base=e;if(e.dest().getCoordinate().equals2D(p0)){base=e.sym();}
locEdge=base;do{if(locEdge.dest().getCoordinate().equals2D(p1)){return locEdge;}
locEdge=locEdge.oNext();}while(locEdge!=base);return null;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(v){var e,base,startEdge;e=this.locate(v);if((v.equals(e.orig(),this.tolerance))||(v.equals(e.dest(),this.tolerance))){return e;}
base=this.makeEdge(e.orig(),v);jsts.triangulate.quadedge.QuadEdge.splice(base,e);startEdge=base;do{base=this.connect(e,base.sym());e=base.oPrev();}while(e.lNext()!=startEdge);return startEdge;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(e){if(this.isFrameVertex(e.orig())||this.isFrameVertex(e.dest())){return true;}
return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(e){var leftTri,rightTri,vLeftTriOther,vRightTriOther;leftTri=new Array(3);this.getTriangleEdges(e,leftTri);rightTri=new Array(3);this.getTriangleEdges(e.sym(),rightTri);vLeftTriOther=e.lNext().dest();if(this.isFrameVertex(vLeftTriOther)){return true;}
vRightTriOther=e.sym().lNext().dest();if(this.isFrameVertex(vRightTriOther)){return true;}
return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(v){if(v.equals(this.frameVertex[0])){return true;}
if(v.equals(this.frameVertex[1])){return true;}
if(v.equals(this.frameVertex[2])){return true;}
return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(e,p){this.seg.setCoordinates(e.orig().getCoordinate(),e.dest().getCoordinate());var dist=this.seg.distance(p);return dist<this.edgeCoincidenceTolerance;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(e,v){if((v.equals(e.orig(),this.tolerance))||(v.equals(e.dest(),this.tolerance))){return true;}
return false;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(includeFrame)
{var vertices=[],i,il,qe,v,vd;i=0,il=this.quadEdges.length;for(i;i<il;i++){qe=this.quadEdges[i];v=qe.orig();if(includeFrame||!this.isFrameVertex(v)){vertices.push(v);}
vd=qe.dest();if(includeFrame||!this.isFrameVertex(vd)){vertices.push(vd);}}
return vertices;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(includeFrame)
{var edges,visitedVertices,i,il,qe,v,qd,vd;edges=[];visitedVertices=[];i=0,il=this.quadEdges.length;for(i;i<il;i++){qe=this.quadEdges[i];v=qe.orig();if(visitedVertices.indexOf(v)===-1){visitedVertices.push(v);if(includeFrame||!this.isFrameVertex(v)){edges.push(qe);}}
qd=qe.sym();vd=qd.orig();if(visitedVertices.indexOf(vd)===-1){visitedVertices.push(vd);if(includeFrame||!this.isFrameVertex(vd)){edges.push(qd);}}}
return edges;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(includeFrame){this.visitedKey++;var edges,edgeStack,visitedEdges,edge,priQE;edges=[];edgeStack=[];edgeStack.push(this.startingEdge);visitedEdges=[];while(edgeStack.length>0){edge=edgeStack.pop();if(visitedEdges.indexOf(edge)===-1){priQE=edge.getPrimary();if(includeFrame||!this.isFrameEdge(priQE)){edges.push(priQE);}
edgeStack.push(edge.oNext());edgeStack.push(edge.sym().oNext());visitedEdges.push(edge);visitedEdges.push(edge.sym());}}
return edges;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(triVisitor,includeFrame){this.visitedKey++;var edgeStack,visitedEdges,edge,triEdges;edgeStack=[];edgeStack.push(this.startingEdge);visitedEdges=[];while(edgeStack.length>0){edge=edgeStack.pop();if(visitedEdges.indexOf(edge)===-1){triEdges=this.fetchTriangleToVisit(edge,edgeStack,includeFrame,visitedEdges);if(triEdges!==null)
triVisitor.visit(triEdges);}}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(edge,edgeStack,includeFrame,visitedEdges){var curr,edgeCount,isFrame,sym;curr=edge;edgeCount=0;isFrame=false;do{this.triEdges[edgeCount]=curr;if(this.isFrameEdge(curr)){isFrame=true;}
sym=curr.sym();if(visitedEdges.indexOf(sym)===-1){edgeStack.push(sym);}
visitedEdges.push(curr);edgeCount++;curr=curr.lNext();}while(curr!==edge);if(isFrame&&!includeFrame){return null;}
return this.triEdges;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(includeFrame){var visitor=new jsts.triangulate.quadedge.TriangleEdgesListVisitor();this.visitTriangles(visitor,includeFrame);return visitor.getTriangleEdges();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(includeFrame){var visitor=new TriangleVertexListVisitor();this.visitTriangles(visitor,includeFrame);return visitor.getTriangleVertices();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(includeFrame){var visitor=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor();this.visitTriangles(visitor,includeFrame);return visitor.getTriangles();};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(geomFact){var quadEdges,edges,i,il,qe,coords;quadEdges=this.getPrimaryEdges(false);edges=[];i=0;il=quadEdges.length;for(i;i<il;i++){qe=quadEdges[i];coords=[];coords[0]=(qe.orig().getCoordinate());coords[1]=(qe.dest().getCoordinate());edges[i]=geomFact.createLineString(coords);}
return geomFact.createMultiLineString(edges);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(geomFact){var triPtsList,tris,triPt,i,il;triPtsList=this.getTriangleCoordinates(false);tris=new Array(triPtsList.length);i=0,il=triPtsList.length;for(i;i<il;i++){triPt=triPtsList[i];tris[i]=geomFact.createPolygon(geomFact.createLinearRing(triPt,null));}
return geomFact.createGeometryCollection(tris);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(geomFact)
{var vorCells=this.getVoronoiCellPolygons(geomFact);return geomFact.createGeometryCollection(vorCells);};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(geomFact)
{this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor(),true);var cells,edges,i,il,qe;cells=[];edges=this.getVertexUniqueEdges(false);i=0,il=edges.length;for(i;i<il;i++){qe=edges[i];cells.push(this.getVoronoiCellPolygon(qe,geomFact));}
return cells;};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(qe,geomFact)
{var cellPts,startQe,cc,coordList,cellPoly,v;cellPts=[];startQE=qe;do{cc=qe.rot.orig().getCoordinate();cellPts.push(cc);qe=qe.oPrev();}while(qe!==startQE);coordList=new jsts.geom.CoordinateList([],false);coordList.add(cellPts,false);coordList.closeRing();if(coordList.size()<4){coordList.add(coordList.get(coordList.size()-1),true);}
cellPoly=geomFact.createPolygon(geomFact.createLinearRing(coordList.toArray()),null);v=startQE.orig();return cellPoly;};jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){};jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(triEdges){var a,b,c,cc,ccVertex,i;a=triEdges[0].orig().getCoordinate();b=triEdges[1].orig().getCoordinate();c=triEdges[2].orig().getCoordinate();cc=jsts.geom.Triangle.circumcentre(a,b,c);ccVertex=new jsts.triangulate.quadedge.Vertex(cc);i=0;for(i;i<3;i++){triEdges[i].rot.setOrig(ccVertex);}};jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[];};jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(triEdges){var clone=triEdges.concat();this.triList.push(clone);};jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList;};jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[];};jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(triEdges){var vertices=[];vertices.push(trieEdges[0].orig());vertices.push(trieEdges[1].orig());vertices.push(trieEdges[2].orig());this.triList.push(vertices);};jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList;};jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],false);this.triCoords=[];};jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(triEdges){this.coordList=new jsts.geom.CoordinateList([],false);var i=0,v,pts;for(i;i<3;i++){v=triEdges[i].orig();this.coordList.add(v.getCoordinate());}
if(this.coordList.size()>0){this.coordList.closeRing();pts=this.coordList.toArray();if(pts.length!==4){return;}
this.triCoords.push(pts);}};jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords;};jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var e=arguments[0]instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1];var edge=e.getEdge();var coord=e.getCoordinate();var dirCoord=e.getDirectedCoordinate();var label=new jsts.geomgraph.Label(e.getLabel());jsts.geomgraph.EdgeEnd.call(this,edge,coord,dirCoord,label);this.insert(e);};jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd();jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null;jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label;};jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds;};jsts.operation.relate.EdgeEndBundle.prototype.insert=function(e){this.edgeEnds.push(e);};jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(boundaryNodeRule){var isArea=false;for(var i=0;i<this.edgeEnds.length;i++){var e=this.edgeEnds[i];if(e.getLabel().isArea())
isArea=true;}
if(isArea)
this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);else
this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(var i=0;i<2;i++){this.computeLabelOn(i,boundaryNodeRule);if(isArea)
this.computeLabelSides(i);}};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(geomIndex,boundaryNodeRule){var boundaryCount=0;var foundInterior=false;for(var i=0;i<this.edgeEnds.length;i++){var e=this.edgeEnds[i];var loc=e.getLabel().getLocation(geomIndex);if(loc==jsts.geom.Location.BOUNDARY)
boundaryCount++;if(loc==jsts.geom.Location.INTERIOR)
foundInterior=true;}
var loc=jsts.geom.Location.NONE;if(foundInterior)
loc=jsts.geom.Location.INTERIOR;if(boundaryCount>0){loc=jsts.geomgraph.GeometryGraph.determineBoundary(boundaryNodeRule,boundaryCount);}
this.label.setLocation(geomIndex,loc);};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(geomIndex){this.computeLabelSide(geomIndex,jsts.geomgraph.Position.LEFT);this.computeLabelSide(geomIndex,jsts.geomgraph.Position.RIGHT);};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(geomIndex,side){for(var i=0;i<this.edgeEnds.length;i++){var e=this.edgeEnds[i];if(e.getLabel().isArea()){var loc=e.getLabel().getLocation(geomIndex,side);if(loc===jsts.geom.Location.INTERIOR){this.label.setLocation(geomIndex,side,jsts.geom.Location.INTERIOR);return;}else if(loc===jsts.geom.Location.EXTERIOR)
this.label.setLocation(geomIndex,side,jsts.geom.Location.EXTERIOR);}}};jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(im){jsts.geomgraph.Edge.updateIM(this.label,im);};jsts.index.kdtree.KdTree=function(tolerance){var tol=0.0;if(tolerance!==undefined){tol=tolerance;}
this.root=null;this.last=null;this.numberOfNodes=0;this.tolerance=tol;};jsts.index.kdtree.KdTree.prototype.insert=function(){if(arguments.length===1){return this.insertCoordinate.apply(this,arguments[0]);}else{return this.insertWithData.apply(this,arguments[0],arguments[1]);}};jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(p){return this.insertWithData(p,null);};jsts.index.kdtree.KdTree.prototype.insertWithData=function(p,data){if(this.root===null){this.root=new jsts.index.kdtree.KdNode(p,data);return this.root;}
var currentNode=this.root,leafNode=this.root,isOddLevel=true,isLessThan=true;while(currentNode!==last){if(isOddLevel){isLessThan=p.x<currentNode.getX();}else{isLessThan=p.y<currentNode.getY();}
leafNode=currentNode;if(isLessThan){currentNode=currentNode.getLeft();}else{currentNode=currentNode.getRight();}
if(currentNode!==null){var isInTolerance=p.distance(currentNode.getCoordinate())<=this.tolerance;if(isInTolerance){currentNode.increment();return currentNode;}}
isOddLevel=!isOddLevel;}
this.numberOfNodes=numberOfNodes+1;var node=new jsts.index.kdtree.KdNode(p,data);node.setLeft(this.last);node.setRight(this.last);if(isLessThan){leafNode.setLeft(node);}else{leafNode.setRight(node);}
return node;};jsts.index.kdtree.KdTree.prototype.queryNode=function(currentNode,bottomNode,queryEnv,odd,result){if(currentNode===bottomNode){return;}
var min,max,discriminant;if(odd){min=queryEnv.getMinX();max=queryEnv.getMaxX();discriminant=currentNode.getX();}else{min=queryEnv.getMinY();max=queryEnv.getMaxY();discriminant=currentNode.getY();}
var searchLeft=min<discriminant;var searchRight=discriminant<=max;if(searchLeft){this.queryNode(currentNode.getLeft(),bottomNode,queryEnv,!odd,result);}
if(queryEnv.contains(currentNode.getCoordinate())){result.add(currentNode);}
if(searchRight){this.queryNode(currentNode.getRight(),bottomNode,queryEnv,!odd,result);}};jsts.index.kdtree.KdTree.prototype.query=function(){if(arguments.length===1){return this.queryByEnvelope.apply(this,arguments[0]);}else{return this.queryWithArray.apply(this,arguments[0],arguments[1]);}};jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(queryEnv){var result=[];this.queryNode(this.root,this.last,queryEnv,true,result);return result;};jsts.index.kdtree.KdTree.prototype.queryWithArray=function(queryEnv,result){this.queryNode(this.root,this.last,queryEnv,true,result);};jsts.geom.Triangle=function(p0,p1,p2){this.p0=p0;this.p1=p1;this.p2=p2;};jsts.geom.Triangle.isAcute=function(a,b,c){if(!jsts.algorithm.Angle.isAcute(a,b,c)){return false;}
if(!jsts.algorithm.Angle.isAcute(b,c,a)){return false;}
if(!jsts.algorithm.Angle.isAcute(c,a,b)){return false;}
return true;};jsts.geom.Triangle.perpendicularBisector=function(a,b){var dx,dy,l1,l2;dx=b.x-a.x;dy=b.y-a.y;l1=new jsts.algorithm.HCoordinate(a.x+dx/2.0,a.y+dy/2.0,1.0);l2=new jsts.algorithm.HCoordinate(a.x-dy+dx/2.0,a.y+dx+dy/2.0,1.0);return new jsts.algorithm.HCoordinate(l1,l2);};jsts.geom.Triangle.circumcentre=function(a,b,c){var cx,cy,ax,ay,bx,by,denom,numx,numy,ccx,ccy;cx=c.x;cy=c.y;ax=a.x-cx;ay=a.y-cy;bx=b.x-cx;by=b.y-cy;denom=2*jsts.geom.Triangle.det(ax,ay,bx,by);numx=jsts.geom.Triangle.det(ay,ax*ax+ay*ay,by,bx*bx+by*by);numy=jsts.geom.Triangle.det(ax,ax*ax+ay*ay,bx,bx*bx+by*by);ccx=cx-numx/denom;ccy=cy+numy/denom;return new jsts.geom.Coordinate(ccx,ccy);};jsts.geom.Triangle.det=function(m00,m01,m10,m11){return m00*m11-m01*m10;};jsts.geom.Triangle.inCentre=function(a,b,c){var len0,len1,len2,circum,inCentreX,inCentreY;len0=b.distance(c);len1=a.distance(c);len2=a.distance(b);circum=len0+len1+len2;inCentreX=(len0*a.x+len1*b.x+len2*c.x)/circum;inCentreY=(len0*a.y+len1*b.y+len2*c.y)/circum;return new jsts.geom.Coordinate(inCentreX,inCentreY);};jsts.geom.Triangle.centroid=function(a,b,c){var x,y;x=(a.x+b.x+c.x)/3;y=(a.y+b.y+c.y)/3;return new jsts.geom.Coordinate(x,y);};jsts.geom.Triangle.longestSideLength=function(a,b,c){var lenAB,lenBC,lenCA,maxLen;lenAB=a.distance(b);lenBC=b.distance(c);lenCA=c.distance(a);maxLen=lenAB;if(lenBC>maxLen){maxLen=lenBC;}
if(lenCA>maxLen){maxLen=lenCA;}
return maxLen;};jsts.geom.Triangle.angleBisector=function(a,b,c){var len0,len2,frac,dx,dy,splitPt;len0=b.distance(a);len2=b.distance(c);frac=len0/(len0+len2);dx=c.x-a.x;dy=c.y-a.y;splitPt=new jsts.geom.Coordinate(a.x+frac*dx,a.y+frac*dy);return splitPt;};jsts.geom.Triangle.area=function(a,b,c){return Math.abs(((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2.0);};jsts.geom.Triangle.signedArea=function(a,b,c){return((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2.0;};jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2);};jsts.noding.OrientedCoordinateArray=function(pts){this.pts=pts;this._orientation=jsts.noding.OrientedCoordinateArray.orientation(pts);};jsts.noding.OrientedCoordinateArray.prototype.pts=null;jsts.noding.OrientedCoordinateArray.prototype._orientation=undefined;jsts.noding.OrientedCoordinateArray.orientation=function(pts){return jsts.geom.CoordinateArrays.increasingDirection(pts)===1;};jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(o1){var oca=o1;var comp=jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,oca.pts,oca._orientation);return comp;};jsts.noding.OrientedCoordinateArray.compareOriented=function(pts1,orientation1,pts2,orientation2){var dir1=orientation1?1:-1;var dir2=orientation2?1:-1;var limit1=orientation1?pts1.length:-1;var limit2=orientation2?pts2.length:-1;var i1=orientation1?0:pts1.length-1;var i2=orientation2?0:pts2.length-1;var comp=0;while(true){var compPt=pts1[i1].compareTo(pts2[i2]);if(compPt!==0)
return compPt;i1+=dir1;i2+=dir2;var done1=i1===limit1;var done2=i2===limit2;if(done1&&!done2)
return-1;if(!done1&&done2)
return 1;if(done1&&done2)
return 0;}};jsts.algorithm.CentralEndpointIntersector=function(p00,p01,p10,p11){this.pts=[p00,p01,p10,p11];this.compute();};jsts.algorithm.CentralEndpointIntersector.getIntersection=function(p00,p01,p10,p11){var intor=new jsts.algorithm.CentralEndpointIntersector(p00,p01,p10,p11);return intor.getIntersection();};jsts.algorithm.CentralEndpointIntersector.prototype.pts=null;jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null;jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var centroid=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(centroid,this.pts);};jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt;};jsts.algorithm.CentralEndpointIntersector.average=function(pts){var avg=new jsts.geom.Coordinate();var i,n=pts.length;for(i=0;i<n;i++){avg.x+=pts[i].x;avg.y+=pts[i].y;}
if(n>0){avg.x/=n;avg.y/=n;}
return avg;};jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(p,pts){var minDist=Number.MAX_VALUE;var i,result=null,dist;for(i=0;i<pts.length;i++){dist=p.distance(pts[i]);if(dist<minDist){minDist=dist;result=pts[i];}}
return result;};jsts.operation.buffer.BufferOp=function(g,bufParams){this.argGeom=g;this.bufParams=bufParams?bufParams:new jsts.operation.buffer.BufferParameters();};jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12;jsts.operation.buffer.BufferOp.precisionScaleFactor=function(g,distance,maxPrecisionDigits){var env=g.getEnvelopeInternal();var envSize=Math.max(env.getHeight(),env.getWidth());var expandByDistance=distance>0.0?distance:0.0;var bufEnvSize=envSize+2*expandByDistance;var bufEnvLog10=(Math.log(bufEnvSize)/Math.log(10)+1.0);var minUnitLog10=bufEnvLog10-maxPrecisionDigits;var scaleFactor=Math.pow(10.0,-minUnitLog10);return scaleFactor;};jsts.operation.buffer.BufferOp.bufferOp=function(g,distance){if(arguments.length>2){return jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments);}
var gBuf=new jsts.operation.buffer.BufferOp(g);var geomBuf=gBuf.getResultGeometry(distance);return geomBuf;};jsts.operation.buffer.BufferOp.bufferOp2=function(g,distance,params){if(arguments.length>3){return jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments);}
var bufOp=new jsts.operation.buffer.BufferOp(g,params);var geomBuf=bufOp.getResultGeometry(distance);return geomBuf;};jsts.operation.buffer.BufferOp.bufferOp3=function(g,distance,quadrantSegments){if(arguments.length>4){return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments);}
var bufOp=new jsts.operation.buffer.BufferOp(g);bufOp.setQuadrantSegments(quadrantSegments);var geomBuf=bufOp.getResultGeometry(distance);return geomBuf;};jsts.operation.buffer.BufferOp.bufferOp4=function(g,distance,quadrantSegments,endCapStyle){var bufOp=new jsts.operation.buffer.BufferOp(g);bufOp.setQuadrantSegments(quadrantSegments);bufOp.setEndCapStyle(endCapStyle);var geomBuf=bufOp.getResultGeometry(distance);return geomBuf;};jsts.operation.buffer.BufferOp.prototype.argGeom=null;jsts.operation.buffer.BufferOp.prototype.distance=null;jsts.operation.buffer.BufferOp.prototype.bufParams=null;jsts.operation.buffer.BufferOp.prototype.resultGeometry=null;jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(endCapStyle){this.bufParams.setEndCapStyle(endCapStyle);};jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(quadrantSegments){this.bufParams.setQuadrantSegments(quadrantSegments);};jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(dist){this.distance=dist;this.computeGeometry();return this.resultGeometry;};jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){this.bufferOriginalPrecision();if(this.resultGeometry!==null){return;}
var argPM=this.argGeom.getPrecisionModel();if(argPM.getType()===jsts.geom.PrecisionModel.FIXED){this.bufferFixedPrecision(argPM);}else{this.bufferReducedPrecision();}};jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var precDigits;var saveException=null;for(precDigits=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;precDigits>=0;precDigits--){try{this.bufferReducedPrecision2(precDigits);}catch(ex){saveException=ex;}
if(this.resultGeometry!==null){return;}}
throw saveException;};jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var bufBuilder=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=bufBuilder.buffer(this.argGeom,this.distance);}catch(e){}};jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(precisionDigits){var sizeBasedScaleFactor=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,precisionDigits);var fixedPM=new jsts.geom.PrecisionModel(sizeBasedScaleFactor);this.bufferFixedPrecision(fixedPM);};jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(fixedPM){var noder=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1.0)),fixedPM.getScale());var bufBuilder=new jsts.operation.buffer.BufferBuilder(this.bufParams);bufBuilder.setWorkingPrecisionModel(fixedPM);bufBuilder.setNoder(noder);this.resultGeometry=bufBuilder.buffer(this.argGeom,this.distance);};(function(){var Location=jsts.geom.Location;var Position=jsts.geomgraph.Position;var Assert=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(argIndex,parentGeom,boundaryNodeRule){jsts.geomgraph.PlanarGraph.call(this);this.lineEdgeMap=new javascript.util.HashMap();this.ptLocator=new jsts.algorithm.PointLocator();this.argIndex=argIndex;this.parentGeom=parentGeom;this.boundaryNodeRule=boundaryNodeRule||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;if(parentGeom!==null){this.add(parentGeom);}};jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph();jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph;jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleMCSweepLineIntersector();};jsts.geomgraph.GeometryGraph.determineBoundary=function(boundaryNodeRule,boundaryCount){return boundaryNodeRule.isInBoundary(boundaryCount)?Location.BOUNDARY:Location.INTERIOR;};jsts.geomgraph.GeometryGraph.prototype.parentGeom=null;jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null;jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null;jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=true;jsts.geomgraph.GeometryGraph.prototype.argIndex=null;jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null;jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=false;jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null;jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null;jsts.geomgraph.GeometryGraph.prototype.ptLocator=null;jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom;};jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){if(this.boundaryNodes===null)
this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex);return this.boundaryNodes;};jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule;};jsts.geomgraph.GeometryGraph.prototype.findEdge=function(line){return this.lineEdgeMap.get(line);};jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(edgelist){for(var i=this.edges.iterator();i.hasNext();){var e=i.next();e.eiList.addSplitEdges(edgelist);}}
jsts.geomgraph.GeometryGraph.prototype.add=function(g){if(g.isEmpty()){return;}
if(g instanceof jsts.geom.MultiPolygon)
this.useBoundaryDeterminationRule=false;if(g instanceof jsts.geom.Polygon)
this.addPolygon(g);else if(g instanceof jsts.geom.LineString)
this.addLineString(g);else if(g instanceof jsts.geom.Point)
this.addPoint(g);else if(g instanceof jsts.geom.MultiPoint)
this.addCollection(g);else if(g instanceof jsts.geom.MultiLineString)
this.addCollection(g);else if(g instanceof jsts.geom.MultiPolygon)
this.addCollection(g);else if(g instanceof jsts.geom.GeometryCollection)
this.addCollection(g);else
throw new jsts.error.IllegalArgumentError('Geometry type not supported.');};jsts.geomgraph.GeometryGraph.prototype.addCollection=function(gc){for(var i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this.add(g);}};jsts.geomgraph.GeometryGraph.prototype.addEdge=function(e){this.insertEdge(e);var coord=e.getCoordinates();this.insertPoint(this.argIndex,coord[0],Location.BOUNDARY);this.insertPoint(this.argIndex,coord[coord.length-1],Location.BOUNDARY);};jsts.geomgraph.GeometryGraph.prototype.addPoint=function(p){var coord=p.getCoordinate();this.insertPoint(this.argIndex,coord,Location.INTERIOR);};jsts.geomgraph.GeometryGraph.prototype.addLineString=function(line){var coord=jsts.geom.CoordinateArrays.removeRepeatedPoints(line.getCoordinates());if(coord.length<2){this.hasTooFewPoints=true;this.invalidPoint=coords[0];return;}
var e=new jsts.geomgraph.Edge(coord,new jsts.geomgraph.Label(this.argIndex,Location.INTERIOR));this.lineEdgeMap.put(line,e);this.insertEdge(e);Assert.isTrue(coord.length>=2,'found LineString with single point');this.insertBoundaryPoint(this.argIndex,coord[0]);this.insertBoundaryPoint(this.argIndex,coord[coord.length-1]);};jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(lr,cwLeft,cwRight){if(lr.isEmpty())
return;var coord=jsts.geom.CoordinateArrays.removeRepeatedPoints(lr.getCoordinates());if(coord.length<4){this.hasTooFewPoints=true;this.invalidPoint=coord[0];return;}
var left=cwLeft;var right=cwRight;if(jsts.algorithm.CGAlgorithms.isCCW(coord)){left=cwRight;right=cwLeft;}
var e=new jsts.geomgraph.Edge(coord,new jsts.geomgraph.Label(this.argIndex,Location.BOUNDARY,left,right));this.lineEdgeMap.put(lr,e);this.insertEdge(e);this.insertPoint(this.argIndex,coord[0],Location.BOUNDARY);};jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(p){this.addPolygonRing(p.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);this.addPolygonRing(hole,Location.INTERIOR,Location.EXTERIOR);}};jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(g,li,includeProper){var si=new jsts.geomgraph.index.SegmentIntersector(li,includeProper,true);si.setBoundaryNodes(this.getBoundaryNodes(),g.getBoundaryNodes());var esi=this.createEdgeSetIntersector();esi.computeIntersections(this.edges,g.edges,si);return si;};jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(li,computeRingSelfNodes){var si=new jsts.geomgraph.index.SegmentIntersector(li,true,false);var esi=this.createEdgeSetIntersector();if(!computeRingSelfNodes&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)){esi.computeIntersections(this.edges,si,false);}else{esi.computeIntersections(this.edges,si,true);}
this.addSelfIntersectionNodes(this.argIndex);return si;};jsts.geomgraph.GeometryGraph.prototype.insertPoint=function(argIndex,coord,onLocation){var n=this.nodes.addNode(coord);var lbl=n.getLabel();if(lbl==null){n.label=new jsts.geomgraph.Label(argIndex,onLocation);}else
lbl.setLocation(argIndex,onLocation);};jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(argIndex,coord){var n=this.nodes.addNode(coord);var lbl=n.getLabel();var boundaryCount=1;var loc=Location.NONE;if(lbl!==null)
loc=lbl.getLocation(argIndex,Position.ON);if(loc===Location.BOUNDARY)
boundaryCount++;var newLoc=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,boundaryCount);lbl.setLocation(argIndex,newLoc);};jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(argIndex){for(var i=this.edges.iterator();i.hasNext();){var e=i.next();var eLoc=e.getLabel().getLocation(argIndex);for(var eiIt=e.eiList.iterator();eiIt.hasNext();){var ei=eiIt.next();this.addSelfIntersectionNode(argIndex,ei.coord,eLoc);}}};jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(argIndex,coord,loc){if(this.isBoundaryNode(argIndex,coord))
return;if(loc===Location.BOUNDARY&&this.useBoundaryDeterminationRule)
this.insertBoundaryPoint(argIndex,coord);else
this.insertPoint(argIndex,coord,loc);};jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint;};})();jsts.operation.buffer.OffsetSegmentString=function(){this.ptList=[];};jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null;jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null;jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0.0;jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(precisionModel){this.precisionModel=precisionModel;};jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(minimimVertexDistance){this.minimimVertexDistance=minimimVertexDistance;};jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(pt){var bufPt=new jsts.geom.Coordinate(pt);this.precisionModel.makePrecise(bufPt);if(this.isRedundant(bufPt))
return;this.ptList.push(bufPt);};jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(pt,isForward){if(isForward){for(var i=0;i<pt.length;i++){this.addPt(pt[i]);}}else{for(var i=pt.length-1;i>=0;i--){this.addPt(pt[i]);}}};jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(pt){if(this.ptList.length<1)
return false;var lastPt=this.ptList[this.ptList.length-1];var ptDist=pt.distance(lastPt);if(ptDist<this.minimimVertexDistance)
return true;return false;};jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(this.ptList.length<1)
return;var startPt=new jsts.geom.Coordinate(this.ptList[0]);var lastPt=this.ptList[this.ptList.length-1];var last2Pt=null;if(this.ptList.length>=2)
last2Pt=this.ptList[this.ptList.length-2];if(startPt.equals(lastPt))
return;this.ptList.push(startPt);};jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){};jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList;};jsts.algorithm.distance.PointPairDistance=function(){this.pt=[new jsts.geom.Coordinate(),new jsts.geom.Coordinate()];};jsts.algorithm.distance.PointPairDistance.prototype.pt=null;jsts.algorithm.distance.PointPairDistance.prototype.distance=NaN;jsts.algorithm.distance.PointPairDistance.prototype.isNull=true;jsts.algorithm.distance.PointPairDistance.prototype.initialize=function(p0,p1,distance){if(p0===undefined){this.isNull=true;return;}
this.pt[0].setCoordinate(p0);this.pt[1].setCoordinate(p1);this.distance=distance!==undefined?distance:p0.distance(p1);this.isNull=false;};jsts.algorithm.distance.PointPairDistance.prototype.getDistance=function(){return this.distance;};jsts.algorithm.distance.PointPairDistance.prototype.getCoordinates=function(){return this.pt;};jsts.algorithm.distance.PointPairDistance.prototype.getCoordinate=function(i){return this.pt[i];};jsts.algorithm.distance.PointPairDistance.prototype.setMaximum=function(ptDist){if(arguments.length===2){this.setMaximum2.apply(this,arguments);return;}
this.setMaximum(ptDist.pt[0],ptDist.pt[1]);};jsts.algorithm.distance.PointPairDistance.prototype.setMaximum2=function(p0,p1){if(this.isNull){this.initialize(p0,p1);return;}
var dist=p0.distance(p1);if(dist>this.distance)
this.initialize(p0,p1,dist);};jsts.algorithm.distance.PointPairDistance.prototype.setMinimum=function(ptDist){if(arguments.length===2){this.setMinimum2.apply(this,arguments);return;}
this.setMinimum(ptDist.pt[0],ptDist.pt[1]);};jsts.algorithm.distance.PointPairDistance.prototype.setMinimum2=function(p0,p1){if(this.isNull){this.initialize(p0,p1);return;}
var dist=p0.distance(p1);if(dist<this.distance)
this.initialize(p0,p1,dist);};(function(){var PointPairDistance=jsts.algorithm.distance.PointPairDistance;var DistanceToPoint=jsts.algorithm.distance.DistanceToPoint;var MaxPointDistanceFilter=function(geom){this.maxPtDist=new PointPairDistance();this.minPtDist=new PointPairDistance();this.euclideanDist=new DistanceToPoint();this.geom=geom;};MaxPointDistanceFilter.prototype=new jsts.geom.CoordinateFilter();MaxPointDistanceFilter.prototype.maxPtDist=new PointPairDistance();MaxPointDistanceFilter.prototype.minPtDist=new PointPairDistance();MaxPointDistanceFilter.prototype.euclideanDist=new DistanceToPoint();MaxPointDistanceFilter.prototype.geom;MaxPointDistanceFilter.prototype.filter=function(pt){this.minPtDist.initialize();DistanceToPoint.computeDistance(this.geom,pt,this.minPtDist);this.maxPtDist.setMaximum(this.minPtDist);};MaxPointDistanceFilter.prototype.getMaxPointDistance=function(){return this.maxPtDist;};var MaxDensifiedByFractionDistanceFilter=function(geom,fraction){this.maxPtDist=new PointPairDistance();this.minPtDist=new PointPairDistance();this.geom=geom;this.numSubSegs=Math.round(1.0/fraction);};MaxDensifiedByFractionDistanceFilter.prototype=new jsts.geom.CoordinateSequenceFilter();MaxDensifiedByFractionDistanceFilter.prototype.maxPtDist=new PointPairDistance();MaxDensifiedByFractionDistanceFilter.prototype.minPtDist=new PointPairDistance();MaxDensifiedByFractionDistanceFilter.prototype.geom;MaxDensifiedByFractionDistanceFilter.prototype.numSubSegs=0;MaxDensifiedByFractionDistanceFilter.prototype.filter=function(seq,index){if(index==0)
return;var p0=seq[index-1];var p1=seq[index];var delx=(p1.x-p0.x)/this.numSubSegs;var dely=(p1.y-p0.y)/this.numSubSegs;for(var i=0;i<this.numSubSegs;i++){var x=p0.x+i*delx;var y=p0.y+i*dely;var pt=new jsts.geom.Coordinate(x,y);this.minPtDist.initialize();DistanceToPoint.computeDistance(this.geom,pt,this.minPtDist);this.maxPtDist.setMaximum(this.minPtDist);}};MaxDensifiedByFractionDistanceFilter.prototype.isGeometryChanged=function(){return false;};MaxDensifiedByFractionDistanceFilter.prototype.isDone=function(){return false;};MaxDensifiedByFractionDistanceFilter.prototype.getMaxPointDistance=function(){return this.maxPtDist;};jsts.algorithm.distance.DiscreteHausdorffDistance=function(g0,g1){this.g0=g0;this.g1=g1;this.ptDist=new jsts.algorithm.distance.PointPairDistance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g0=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g1=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.ptDist=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.densifyFrac=0.0;jsts.algorithm.distance.DiscreteHausdorffDistance.distance=function(g0,g1,densifyFrac){var dist=new jsts.algorithm.distance.DiscreteHausdorffDistance(g0,g1);if(densifyFrac!==undefined)
dist.setDensifyFraction(densifyFrac);return dist.distance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.setDensifyFraction=function(densifyFrac){if(densifyFrac>1.0||densifyFrac<=0.0)
throw new jsts.error.IllegalArgumentError('Fraction is not in range (0.0 - 1.0]');this.densifyFrac=densifyFrac;};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.distance=function(){this.compute(this.g0,this.g1);return ptDist.getDistance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.orientedDistance=function(){this.computeOrientedDistance(this.g0,this.g1,this.ptDist);return this.ptDist.getDistance();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.getCoordinates=function(){return ptDist.getCoordinates();};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.compute=function(g0,g1){this.computeOrientedDistance(g0,g1,this.ptDist);this.computeOrientedDistance(g1,g0,this.ptDist);};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(discreteGeom,geom,ptDist){var distFilter=new MaxPointDistanceFilter(geom);discreteGeom.apply(distFilter);ptDist.setMaximum(distFilter.getMaxPointDistance());if(this.densifyFrac>0){var fracFilter=new MaxDensifiedByFractionDistanceFilter(geom,this.densifyFrac);discreteGeom.apply(fracFilter);ptDist.setMaximum(fracFilter.getMaxPointDistance());}};})();jsts.algorithm.MinimumBoundingCircle=function(geom){this.input=null;this.extremalPts=null;this.centre=null;this.radius=0;this.input=geom;};jsts.algorithm.MinimumBoundingCircle.prototype.getCircle=function(){this.compute();if(this.centre===null){return this.input.getFactory().createPolygon(null,null);}
var centrePoint=this.input.getFactory().createPoint(this.centre);if(this.radius===0){return centrePoint;}
return centrePoint.buffer(this.radius);};jsts.algorithm.MinimumBoundingCircle.prototype.getExtremalPoints=function(){this.compute();return this.extremalPts;};jsts.algorithm.MinimumBoundingCircle.prototype.getCentre=function(){this.compute();return this.centre;};jsts.algorithm.MinimumBoundingCircle.prototype.getRadius=function(){this.compute();return this.radius;};jsts.algorithm.MinimumBoundingCircle.prototype.computeCentre=function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new jsts.geom.Coordinate((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=jsts.geom.Triangle.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2]);break;}};jsts.algorithm.MinimumBoundingCircle.prototype.compute=function(){if(this.extremalPts!==null){return;}
this.computeCirclePoints();this.computeCentre();if(this.centre!==null){this.radius=this.centre.distance(this.extremalPts[0]);}};jsts.algorithm.MinimumBoundingCircle.prototype.computeCirclePoints=function(){if(this.input.isEmpty()){this.extremalPts=[];return;}
var pts;if(this.input.getNumPoints()===1){pts=this.input.getCoordinates();this.extremalPts=[new jsts.geom.Coordinate(pts[0])];return;}
var convexHull=this.input.convexHull();var hullPts=convexHull.getCoordinates();pts=hullPts;if(hullPts[0].equals2D(hullPts[hullPts.length-1])){pts=[];jsts.geom.CoordinateArrays.copyDeep(hullPts,0,pts,0,hullPts.length-1);}
if(pts.length<=2){this.extremalPts=jsts.geom.CoordinateArrays.copyDeep(pts);return;}
var P=jsts.algorithm.MinimumBoundingCircle.lowestPoint(pts);var Q=jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX(pts,P);for(var i=0;i<pts.length;i++){var R=jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment(pts,P,Q);if(jsts.algorithm.Angle.isObtuse(P,R,Q)){this.extremalPts=[new jsts.geom.Coordinate(P),new jsts.geom.Coordinate(Q)];return;}
if(jsts.algorithm.Angle.isObtuse(R,P,Q)){P=R;continue;}
if(jsts.algorithm.Angle.isObtuse(R,Q,P)){Q=R;continue;}
this.extremalPts=[new jsts.geom.Coordinate(P),new jsts.geom.Coordinate(Q),new jsts.geom.Coordinate(R)];return;}
throw new Error("Logic failure in Minimum Bounding Circle algorithm!");};jsts.algorithm.MinimumBoundingCircle.lowestPoint=function(pts){var min=pts[0];for(var i=1;i<pts.length;i++){if(pts[i].y<min.y){min=pts[i];}}
return min;};jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX=function(pts,P){var minSin=Number.MAX_VALUE;var minAngPt=null;for(var i=0;i<pts.length;i++){var p=pts[i];if(p===P)continue;var dx=p.x-P.x;var dy=p.y-P.y;if(dy<0)dy=-dy;var len=Math.sqrt(dx*dx+dy*dy);var sin=dy/len;if(sin<minSin){minSin=sin;minAngPt=p;}}
return minAngPt;};jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment=function(pts,P,Q){var minAng=Number.MAX_VALUE;var minAngPt=null;for(var i=0;i<pts.length;i++){var p=pts[i];if(p===P)continue;if(p===Q)continue;var ang=jsts.algorithm.Angle.angleBetween(P,p,Q);if(ang<minAng){minAng=ang;minAngPt=p;}}
return minAngPt;};jsts.noding.ScaledNoder=function(noder,scaleFactor,offsetX,offsetY){this.offsetX=offsetX?offsetX:0;this.offsetY=offsetY?offsetY:0;this.noder=noder;this.scaleFactor=scaleFactor;this.isScaled=!this.isIntegerPrecision();};jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder();jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder;jsts.noding.ScaledNoder.prototype.noder=null;jsts.noding.ScaledNoder.prototype.scaleFactor=undefined;jsts.noding.ScaledNoder.prototype.offsetX=undefined;jsts.noding.ScaledNoder.prototype.offsetY=undefined;jsts.noding.ScaledNoder.prototype.isScaled=false;jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return this.scaleFactor===1.0;};jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var splitSS=this.noder.getNodedSubstrings();if(this.isScaled)
this.rescale(splitSS);return splitSS;};jsts.noding.ScaledNoder.prototype.computeNodes=function(inputSegStrings){var intSegStrings=inputSegStrings;if(this.isScaled)
intSegStrings=this.scale(inputSegStrings);this.noder.computeNodes(intSegStrings);};jsts.noding.ScaledNoder.prototype.scale=function(segStrings){if(segStrings instanceof Array){return this.scale2(segStrings);}
var transformed=new javascript.util.ArrayList();for(var i=segStrings.iterator();i.hasNext();){var ss=i.next();transformed.add(new jsts.noding.NodedSegmentString(this.scale(ss.getCoordinates()),ss.getData()));}
return transformed;};jsts.noding.ScaledNoder.prototype.scale2=function(pts){var roundPts=[];for(var i=0;i<pts.length;i++){roundPts[i]=new jsts.geom.Coordinate(Math.round((pts[i].x-this.offsetX)*this.scaleFactor),Math.round((pts[i].y-this.offsetY)*this.scaleFactor));}
var roundPtsNoDup=jsts.geom.CoordinateArrays.removeRepeatedPoints(roundPts);return roundPtsNoDup;};jsts.noding.ScaledNoder.prototype.rescale=function(segStrings){if(segStrings instanceof Array){this.rescale2(segStrings);return;}
for(var i=segStrings.iterator();i.hasNext();){var ss=i.next();this.rescale(ss.getCoordinates());}};jsts.noding.ScaledNoder.prototype.rescale2=function(pts){for(var i=0;i<pts.length;i++){pts[i].x=pts[i].x/this.scaleFactor+this.offsetX;pts[i].y=pts[i].y/this.scaleFactor+this.offsetY;}};(function(){var ArrayList=javascript.util.ArrayList;jsts.geomgraph.index.SegmentIntersector=function(li,includeProper,recordIsolated){this.li=li;this.includeProper=includeProper;this.recordIsolated=recordIsolated;};jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(i1,i2){return Math.abs(i1-i2)===1;};jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=false;jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=false;jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=false;jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null;jsts.geomgraph.index.SegmentIntersector.prototype.li=null;jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null;jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null;jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null;jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0;jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0;jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null;jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(bdyNodes0,bdyNodes1){this.bdyNodes=[];this.bdyNodes[0]=bdyNodes0;this.bdyNodes[1]=bdyNodes1;};jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint;};jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection;};jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper;};jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior;};jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(e0,segIndex0,e1,segIndex1){if(e0===e1){if(this.li.getIntersectionNum()===1){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(segIndex0,segIndex1))
return true;if(e0.isClosed()){var maxSegIndex=e0.getNumPoints()-1;if((segIndex0===0&&segIndex1===maxSegIndex)||(segIndex1===0&&segIndex0===maxSegIndex)){return true;}}}}
return false;};jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(e0,segIndex0,e1,segIndex1){if(e0===e1&&segIndex0===segIndex1)
return;this.numTests++;var p00=e0.getCoordinates()[segIndex0];var p01=e0.getCoordinates()[segIndex0+1];var p10=e1.getCoordinates()[segIndex1];var p11=e1.getCoordinates()[segIndex1+1];this.li.computeIntersection(p00,p01,p10,p11);if(this.li.hasIntersection()){if(this.recordIsolated){e0.setIsolated(false);e1.setIsolated(false);}
this.numIntersections++;if(!this.isTrivialIntersection(e0,segIndex0,e1,segIndex1)){this._hasIntersection=true;if(this.includeProper||!this.li.isProper()){e0.addIntersections(this.li,segIndex0,0);e1.addIntersections(this.li,segIndex1,1);}
if(this.li.isProper()){this.properIntersectionPoint=this.li.getIntersection(0).clone();this.hasProper=true;if(!this.isBoundaryPoint(this.li,this.bdyNodes))
this.hasProperInterior=true;}}}};jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(li,bdyNodes){if(bdyNodes===null)
return false;if(bdyNodes instanceof Array){if(this.isBoundaryPoint(li,bdyNodes[0]))
return true;if(this.isBoundaryPoint(li,bdyNodes[1]))
return true;return false;}else{for(var i=bdyNodes.iterator();i.hasNext();){var node=i.next();var pt=node.getCoordinate();if(li.isIntersection(pt))
return true;}
return false;}};})();
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js":[function(require,module,exports){
(function (global){
/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011-2014 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
;(function(){var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var t;c.length&&(t=c.shift());)c.length||void 0===b?d=d[t]?d[t]:d[t]={}:d[t]=b}function g(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.p=function(a,c,O){var M=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,M)}};function h(a){this.message=a||""}g(h,Error);f("javascript.util.EmptyStackException",h);h.prototype.name="EmptyStackException";function k(a){this.message=a||""}g(k,Error);f("javascript.util.IndexOutOfBoundsException",k);k.prototype.name="IndexOutOfBoundsException";function l(){}f("javascript.util.Iterator",l);l.prototype.hasNext=l.prototype.c;l.prototype.next=l.prototype.next;l.prototype.remove=l.prototype.remove;function m(){}f("javascript.util.Collection",m);function n(){}g(n,m);f("javascript.util.List",n);function p(){}f("javascript.util.Map",p);function q(a){this.message=a||""}g(q,Error);f("javascript.util.NoSuchElementException",q);q.prototype.name="NoSuchElementException";function r(a){this.message=a||""}g(r,Error);r.prototype.name="OperationNotSupported";function s(a){this.a=[];a instanceof m&&this.e(a)}g(s,n);f("javascript.util.ArrayList",s);s.prototype.a=null;s.prototype.add=function(a){this.a.push(a);return!0};s.prototype.add=s.prototype.add;s.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};s.prototype.addAll=s.prototype.e;s.prototype.set=function(a,b){var c=this.a[a];this.a[a]=b;return c};s.prototype.set=s.prototype.set;s.prototype.f=function(){return new u(this)};s.prototype.iterator=s.prototype.f;
s.prototype.get=function(a){if(0>a||a>=this.size())throw new k;return this.a[a]};s.prototype.get=s.prototype.get;s.prototype.g=function(){return 0===this.a.length};s.prototype.isEmpty=s.prototype.g;s.prototype.size=function(){return this.a.length};s.prototype.size=s.prototype.size;s.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};s.prototype.toArray=s.prototype.h;
s.prototype.remove=function(a){for(var b=!1,c=0,d=this.a.length;c<d;c++)if(this.a[c]===a){this.a.splice(c,1);b=!0;break}return b};s.prototype.remove=s.prototype.remove;function u(a){this.j=a}f("$jscomp.scope.Iterator_",u);u.prototype.j=null;u.prototype.b=0;u.prototype.next=function(){if(this.b===this.j.size())throw new q;return this.j.get(this.b++)};u.prototype.next=u.prototype.next;u.prototype.c=function(){return this.b<this.j.size()?!0:!1};u.prototype.hasNext=u.prototype.c;
u.prototype.remove=function(){throw new r;};u.prototype.remove=u.prototype.remove;function v(){}f("javascript.util.Arrays",v);
v.sort=function(){var a=arguments[0],b,c,d;if(1===arguments.length)a.sort();else if(2===arguments.length)c=arguments[1],d=function(a,b){return c.compare(a,b)},a.sort(d);else if(3===arguments.length)for(b=a.slice(arguments[1],arguments[2]),b.sort(),d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b]);else if(4===arguments.length)for(b=a.slice(arguments[1],arguments[2]),c=arguments[3],d=function(a,b){return c.compare(a,b)},b.sort(d),
d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b])};v.asList=function(a){for(var b=new s,c=0,d=a.length;c<d;c++)b.add(a[c]);return b};function w(){this.i={}}g(w,p);f("javascript.util.HashMap",w);w.prototype.i=null;w.prototype.get=function(a){return this.i[a]||null};w.prototype.get=w.prototype.get;w.prototype.put=function(a,b){return this.i[a]=b};w.prototype.put=w.prototype.put;w.prototype.m=function(){var a=new s,b;for(b in this.i)this.i.hasOwnProperty(b)&&a.add(this.i[b]);return a};w.prototype.values=w.prototype.m;w.prototype.size=function(){return this.m().size()};w.prototype.size=w.prototype.size;function x(){}g(x,m);f("javascript.util.Set",x);function y(a){this.a=[];a instanceof m&&this.e(a)}g(y,x);f("javascript.util.HashSet",y);y.prototype.a=null;y.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(this.a[b]===a)return!0;return!1};y.prototype.contains=y.prototype.contains;y.prototype.add=function(a){if(this.contains(a))return!1;this.a.push(a);return!0};y.prototype.add=y.prototype.add;y.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};y.prototype.addAll=y.prototype.e;
y.prototype.remove=function(){throw new r;};y.prototype.remove=y.prototype.remove;y.prototype.size=function(){return this.a.length};y.prototype.g=function(){return 0===this.a.length};y.prototype.isEmpty=y.prototype.g;y.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};y.prototype.toArray=y.prototype.h;y.prototype.f=function(){return new z(this)};y.prototype.iterator=y.prototype.f;function z(a){this.k=a}f("$jscomp.scope.Iterator_$1",z);z.prototype.k=null;
z.prototype.b=0;z.prototype.next=function(){if(this.b===this.k.size())throw new q;return this.k.a[this.b++]};z.prototype.next=z.prototype.next;z.prototype.c=function(){return this.b<this.k.size()?!0:!1};z.prototype.hasNext=z.prototype.c;z.prototype.remove=function(){throw new r;};z.prototype.remove=z.prototype.remove;function A(){}g(A,p);f("javascript.util.SortedMap",A);function B(){}g(B,x);f("javascript.util.SortedSet",B);function C(){this.a=[]}g(C,n);f("javascript.util.Stack",C);C.prototype.a=null;C.prototype.push=function(a){this.a.push(a);return a};C.prototype.push=C.prototype.push;C.prototype.pop=function(){if(0===this.a.length)throw new h;return this.a.pop()};C.prototype.pop=C.prototype.pop;C.prototype.o=function(){if(0===this.a.length)throw new h;return this.a[this.a.length-1]};C.prototype.peek=C.prototype.o;C.prototype.empty=function(){return 0===this.a.length?!0:!1};C.prototype.empty=C.prototype.empty;
C.prototype.g=function(){return this.empty()};C.prototype.isEmpty=C.prototype.g;C.prototype.search=function(a){return this.a.indexOf(a)};C.prototype.search=C.prototype.search;C.prototype.size=function(){return this.a.length};C.prototype.size=C.prototype.size;C.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};C.prototype.toArray=C.prototype.h;function D(a){return null==a?null:a.parent}function E(a,b){null!==a&&(a.color=b)}function F(a){return null==a?null:a.left}function G(a){return null==a?null:a.right}function H(){this.d=null;this.n=0}g(H,A);f("javascript.util.TreeMap",H);H.prototype.get=function(a){for(var b=this.d;null!==b;){var c=a.compareTo(b.key);if(0>c)b=b.left;else if(0<c)b=b.right;else return b.value}return null};H.prototype.get=H.prototype.get;
H.prototype.put=function(a,b){if(null===this.d)return this.d={key:a,value:b,left:null,right:null,parent:null,color:0},this.n=1,null;var c=this.d,d,t;do if(d=c,t=a.compareTo(c.key),0>t)c=c.left;else if(0<t)c=c.right;else return d=c.value,c.value=b,d;while(null!==c);c={key:a,left:null,right:null,value:b,parent:d,color:0};0>t?d.left=c:d.right=c;for(c.color=1;null!=c&&c!=this.d&&1==c.parent.color;)D(c)==F(D(D(c)))?(d=G(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==G(D(c))&&
(c=D(c),I(this,c)),E(D(c),0),E(D(D(c)),1),J(this,D(D(c))))):(d=F(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==F(D(c))&&(c=D(c),J(this,c)),E(D(c),0),E(D(D(c)),1),I(this,D(D(c)))));this.d.color=0;this.n++;return null};H.prototype.put=H.prototype.put;H.prototype.m=function(){var a=new s,b;b=this.d;if(null!=b)for(;null!=b.left;)b=b.left;if(null!==b)for(a.add(b.value);null!==(b=K(b));)a.add(b.value);return a};H.prototype.values=H.prototype.m;
function I(a,b){if(null!=b){var c=b.right;b.right=c.left;null!=c.left&&(c.left.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.left==b?b.parent.left=c:b.parent.right=c;c.left=b;b.parent=c}}function J(a,b){if(null!=b){var c=b.left;b.left=c.right;null!=c.right&&(c.right.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.right==b?b.parent.right=c:b.parent.left=c;c.right=b;b.parent=c}}
function K(a){if(null===a)return null;if(null!==a.right)for(var b=a.right;null!==b.left;)b=b.left;else for(b=a.parent;null!==b&&a===b.right;)a=b,b=b.parent;return b}H.prototype.size=function(){return this.n};H.prototype.size=H.prototype.size;function L(a){this.a=[];a instanceof m&&this.e(a)}g(L,B);f("javascript.util.TreeSet",L);L.prototype.a=null;L.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(0===this.a[b].compareTo(a))return!0;return!1};L.prototype.contains=L.prototype.contains;L.prototype.add=function(a){if(this.contains(a))return!1;for(var b=0,c=this.a.length;b<c;b++)if(1===this.a[b].compareTo(a))return this.a.splice(b,0,a),!0;this.a.push(a);return!0};L.prototype.add=L.prototype.add;
L.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};L.prototype.addAll=L.prototype.e;L.prototype.remove=function(){throw new r;};L.prototype.remove=L.prototype.remove;L.prototype.size=function(){return this.a.length};L.prototype.size=L.prototype.size;L.prototype.g=function(){return 0===this.a.length};L.prototype.isEmpty=L.prototype.g;L.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};L.prototype.toArray=L.prototype.h;L.prototype.f=function(){return new N(this)};
L.prototype.iterator=L.prototype.f;function N(a){this.l=a}f("$jscomp.scope.Iterator_$2",N);N.prototype.l=null;N.prototype.b=0;N.prototype.next=function(){if(this.b===this.l.size())throw new q;return this.l.a[this.b++]};N.prototype.next=N.prototype.next;N.prototype.c=function(){return this.b<this.l.size()?!0:!1};N.prototype.hasNext=N.prototype.c;N.prototype.remove=function(){throw new r;};N.prototype.remove=N.prototype.remove;"undefined"!==typeof global&&(global.javascript={},global.javascript.util={},global.javascript.util.ArrayList=s,global.javascript.util.Arrays=v,global.javascript.util.Collection=m,global.javascript.util.EmptyStackException=h,global.javascript.util.HashMap=w,global.javascript.util.HashSet=y,global.javascript.util.IndexOutOfBoundsException=k,global.javascript.util.Iterator=l,global.javascript.util.List=n,global.javascript.util.Map=p,global.javascript.util.NoSuchElementException=q,global.javascript.util.OperationNotSupported=
r,global.javascript.util.Set=x,global.javascript.util.SortedMap=A,global.javascript.util.SortedSet=B,global.javascript.util.Stack=C,global.javascript.util.TreeMap=H,global.javascript.util.TreeSet=L);}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/node_modules/javascript.util/index.js":[function(require,module,exports){
require('./dist/javascript.util-node.min.js');

},{"./dist/javascript.util-node.min.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-combine/index.js":[function(require,module,exports){
module.exports = function(fc){
  var type = fc.features[0].geometry.type;
  var err;
  var geometries = fc.features.map(function(f){
    return f.geometry;
  })

  switch(type){
    case 'Point':
      var multiPoint = {
        type: 'Feature',
        geometry: {
          type: 'MultiPoint',
          coordinates: []
        }
      };
      multiPoint.geometry.coordinates = pluckCoods(geometries);
      return multiPoint;
      break
    case 'LineString':
      var multiLineString = {
        type: 'Feature',
        geometry: {
          type: 'MultiLineString',
          coordinates: []
        }
      };
      multiLineString.geometry.coordinates = pluckCoods(geometries)
      return multiLineString;
      break
    case 'Polygon':
      var multiPolygon = {
        type: 'Feature',
        geometry: {
          type: 'MultiPolygon',
          coordinates: []
        }
      };
      multiPolygon.geometry.coordinates = pluckCoods(geometries)
      return multiPolygon;
      break
  }
}

function pluckCoods(multi){
  return multi.map(function(geom){
    return geom.coordinates;
  });
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
module.exports = function(features){
  var fc = {
    "type": "FeatureCollection",
    "features": features
  };

  return fc;
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bbox-polygon/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/index.js":[function(require,module,exports){
var extent = require('turf-extent'),
    point = require('turf-point');

/**
 * Takes a {@link FeatureCollection} of any type and returns the absolute center point of all features.
 *
 * @module turf/center
 * @param {FeatureCollection} features a FeatureCollection of any type
 * @return {Point} a Point feature at the
 * absolute center point of all input features
 * @example
 * var features = turf.featurecollection([
 *     turf.point([-97.522259, 35.469100]),
 *     turf.point([-97.502754, 35.463455]),
 *     turf.point([-97.508269, 35.463245]),
 *     turf.point([-97.516809, 35.465779]),
 *     turf.point([-97.515372, 35.467072]),
 *     turf.point([-97.509363, 35.463053]),
 *     turf.point([-97.511123, 35.466601]),
 *     turf.point([-97.518547, 35.469327]),
 *     turf.point([-97.519706, 35.469659]),
 *     turf.point([-97.517839, 35.466998]),
 *     turf.point([-97.508678, 35.464942]),
 *     turf.point([-97.514914, 35.463453])
 * ]);
 *
 * var centerPt = turf.center(features);
 * centerPt.properties['marker-size'] = 'large';
 * centerPt.properties['marker-color'] = '#000';
 *
 * var result = turf.featurecollection(features.features.concat(centerPt));
 *
 * //=result
 */

module.exports = function(layer, done){
  var ext = extent(layer);
  var x = (ext[0] + ext[2])/2;
  var y = (ext[1] + ext[3])/2;
  return point([x, y]);
};

},{"turf-extent":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-extent/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-extent/index.js":[function(require,module,exports){
var flatten = require('flatten');

/**
 * Calculates the extent of all features and returns a bounding box.
 *
 * @module turf/extent
 * @param {GeoJSON-Object} input - any valid GeoJSON Object
 * @return {Array<number>} extent - the bounding box of the GeoJSON given
 * as an array in WSEN order.
 * @example
 * var extent = require('turf-extent')
 * var fs = require('fs')
 * var fc = JSON.parse(fs.readFileSync('/path/to/myFeatureCollection.geojson'))
 * var bbox = extent(fc)
 * console.log(bbox) // [minX, minY, maxX, maxY]
 */
module.exports = function(layer){
  var extent = [Infinity, Infinity, -Infinity, -Infinity];

  var features = [];
  if (layer.type === 'FeatureCollection') features = layer.features;
  else if (layer.type === 'Feature') features = [layer];
  else features = [{ geometry: layer }];

  for(var i = 0; i < features.length; i++){
    var coords = features[i].geometry.coordinates;
    switch(features[i].geometry.type){
      case 'Point':
        extent0(coords, extent);
        break;
      case 'LineString':
      case 'MultiPoint':
        extent1(coords, extent);
        break;
      case 'Polygon':
      case 'MultiLineString':
        extent2(coords, extent);
        break;
      case 'MultiPolygon':
        extent3(coords, extent);
        break;
      default:
        return new Error('Unknown Geometry Type');
    }
  }
  return extent;
};

function extent0(coord, extent) {
  if(extent[0] > coord[0]) extent[0] = coord[0];
  if(extent[1] > coord[1]) extent[1] = coord[1];
  if(extent[2] < coord[0]) extent[2] = coord[0];
  if(extent[3] < coord[1]) extent[3] = coord[1];
}

function extent1(coords, extent) {
  for(var i = 0; i < coords.length; i++){
    var coord = coords[i];
    if(extent[0] > coord[0]) extent[0] = coord[0];
    if(extent[1] > coord[1]) extent[1] = coord[1];
    if(extent[2] < coord[0]) extent[2] = coord[0];
    if(extent[3] < coord[1]) extent[3] = coord[1];
  }
}

function extent2(coords, extent) {
  for(var i = 0; i < coords.length; i++){
    for(var j = 0; j < coords[i].length; j++){
      var coord = coords[i][j];
      if(extent[0] > coord[0]) extent[0] = coord[0];
      if(extent[1] > coord[1]) extent[1] = coord[1];
      if(extent[2] < coord[0]) extent[2] = coord[0];
      if(extent[3] < coord[1]) extent[3] = coord[1];
    }
  }
}

function extent3(coords, extent) {
  for(var i = 0; i < coords.length; i++){
    for(var j = 0; j < coords[i].length; j++){
      for(var k = 0; k < coords[i][j].length; k++){
        var coord = coords[i][j][k];
        if(extent[0] > coord[0]) extent[0] = coord[0];
        if(extent[1] > coord[1]) extent[1] = coord[1];
        if(extent[2] < coord[0]) extent[2] = coord[0];
        if(extent[3] < coord[1]) extent[3] = coord[1];
      }
    }
  }
}

},{"flatten":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-extent/node_modules/flatten/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-extent/node_modules/flatten/index.js":[function(require,module,exports){
module.exports = function flatten(list, depth) {
  depth = (typeof depth == 'number') ? depth : Infinity;

  return _flatten(list, 1);

  function _flatten(list, d) {
    return list.reduce(function (acc, item) {
      if (Array.isArray(item) && d < depth) {
        return acc.concat(_flatten(item, d + 1));
      }
      else {
        return acc.concat(item);
      }
    }, []);
  }
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/index.js":[function(require,module,exports){
var each = require('turf-meta').coordEach;
var point = require('turf-point');

/**
 * Takes a {@link Feature} or {@link FeatureCollection} of any type and calculates the centroid using the arithmetic mean of all vertices.
 * This lessens the effect of small islands and artifacts when calculating
 * the centroid of a set of polygons.
 *
 * @module turf/centroid
 * @param {FeatureCollection} fc a {@link Feature} or FeatureCollection of any type
 * @return {Point} a Point feature at the centroid of the input feature(s)
 * @example
 * var poly = turf.polygon([[
 * 	[105.818939,21.004714],
 * 	[105.818939,21.061754],
 * 	[105.890007,21.061754],
 * 	[105.890007,21.004714],
 * 	[105.818939,21.004714]
 * ]]);
 *
 * var centroidPt = turf.centroid(poly);
 *
 * var result = turf.featurecollection([poly, centroidPt]);
 *
 * //=result
 */
module.exports = function(features){
  var xSum = 0, ySum = 0, len = 0;
  each(features, function(coord) {
    xSum += coord[0];
    ySum += coord[1];
    len++;
  });
  return point([xSum / len, ySum / len]);
};

},{"turf-meta":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/node_modules/turf-meta/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/node_modules/turf-meta/index.js":[function(require,module,exports){
/**
 * Lazily iterate over coordinates in any GeoJSON object, similar to
 * Array.forEach.
 *
 * @param {Object} layer any GeoJSON object
 * @param {Function} callback a method that takes (value)
 * @example
 * var point = { type: 'Point', coordinates: [0, 0] };
 * coordEach(point, function(coords) {
 *   // coords is equal to [0, 0]
 * });
 */
function coordEach(layer, callback) {
  var features = [], i, j, k, g;

  switch (layer.type) {
      case 'FeatureCollection':
        features = layer.features;
        break;
      case 'Feature':
        features = [layer];
        break;
      default:
        features = [{ geometry: layer }];
        break;
  }

  for (i = 0; i < features.length; i++) {
    var geometries = (features[i].geometry.type === 'GeometryCollection') ?
        features[i].geometry.geometries :
        [features[i].geometry];
    for (g = 0; g < geometries.length; g++) {
      var coords = geometries[g].coordinates;
      switch (geometries[g].type) {
        case 'Point':
          callback(coords);
          break;
        case 'LineString':
        case 'MultiPoint':
          for (j = 0; j < coords.length; j++) callback(coords[j]);
          break;
        case 'Polygon':
        case 'MultiLineString':
          for (j = 0; j < coords.length; j++)
            for (k = 0; k < coords[j].length; k++)
              callback(coords[j][k]);
          break;
        case 'MultiPolygon':
          for (j = 0; j < coords.length; j++)
            for (k = 0; k < coords[j].length; k++)
              for (l = 0; l < coords[j][k].length; l++)
                callback(coords[j][k][l]);
          break;
        default:
          throw new Error('Unknown Geometry Type');
      }
    }
  }
}
module.exports.coordEach = coordEach;

/**
 * Lazily reduce coordinates in any GeoJSON object into a single value,
 * similar to how Array.reduce works. However, in this case we lazily run
 * the reduction, so an array of all coordinates is unnecessary.
 *
 * @param {Object} layer any GeoJSON object
 * @param {Function} callback a method that takes (memo, value) and returns
 * a new memo
 * @param {*} memo the starting value of memo: can be any type.
 */
function coordReduce(layer, callback, memo) {
  coordEach(layer, function(coord) {
    memo = callback(memo, coord);
  });
  return memo;
}
module.exports.coordReduce = coordReduce;

/**
 * Lazily iterate over property objects in any GeoJSON object, similar to
 * Array.forEach.
 *
 * @param {Object} layer any GeoJSON object
 * @param {Function} callback a method that takes (value)
 * @example
 * var point = { type: 'Feature', geometry: null, properties: { foo: 1 } };
 * propEach(point, function(props) {
 *   // props is equal to { foo: 1}
 * });
 */
function propEach(layer, callback) {
  var i;
  switch (layer.type) {
      case 'FeatureCollection':
        features = layer.features;
        for (i = 0; i < layer.features.length; i++) {
            callback(layer.features[i].properties);
        }
        break;
      case 'Feature':
        callback(layer.properties);
        break;
  }
}
module.exports.propEach = propEach;

/**
 * Lazily reduce properties in any GeoJSON object into a single value,
 * similar to how Array.reduce works. However, in this case we lazily run
 * the reduction, so an array of all properties is unnecessary.
 *
 * @param {Object} layer any GeoJSON object
 * @param {Function} callback a method that takes (memo, coord) and returns
 * a new memo
 * @param {*} memo the starting value of memo: can be any type.
 */
function propReduce(layer, callback, memo) {
  propEach(layer, function(prop) {
    memo = callback(memo, prop);
  });
  return memo;
}
module.exports.propReduce = propReduce;

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-combine/index.js":[function(require,module,exports){
/**
* Combines a {@link FeatureCollection} of {@link Point}, {@link LineString}, or {@link Polygon} features into {@link MultiPoint}, {@link MultiLineString}, or {@link MultiPolygon} features.
*
* @module turf/combine
* @param {FeatureCollection} fc a FeatureCollection of any type
* @return {FeatureCollection} a FeatureCollection of corresponding type to input
* @example
* var fc = {
*   "type": "FeatureCollection",
*   "features": [
*     {
*       "type": "Feature",
*       "properties": {},
*       "geometry": {
*         "type": "Point",
*         "coordinates": [19.026432, 47.49134]
*       }
*     }, {
*       "type": "Feature",
*       "properties": {},
*       "geometry": {
*         "type": "Point",
*         "coordinates": [19.074497, 47.509548]
*       }
*     }
*   ]
* };
*
* var combined = turf.combine(fc);
*
* //=combined
*/

module.exports = function(fc) {
  var type = fc.features[0].geometry.type;
  var geometries = fc.features.map(function(f) {
    return f.geometry;
  });

  switch (type) {
    case 'Point':
      return {
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'MultiPoint',
          coordinates: pluckCoods(geometries)
        }
      };
    case 'LineString':
      return {
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'MultiLineString',
          coordinates: pluckCoods(geometries)
        }
      };
    case 'Polygon':
      return {
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'MultiPolygon',
          coordinates: pluckCoods(geometries)
        }
      };
    default:
      return fc;
  }
};

function pluckCoods(multi){
  return multi.map(function(geom){
    return geom.coordinates;
  });
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/index.js":[function(require,module,exports){
// 1. run tin on points
// 2. calculate lenth of all edges and area of all triangles
// 3. remove triangles that fail the max length test
// 4. buffer the results slightly
// 5. merge the results
var t = {};
t.tin = require('turf-tin');
t.merge = require('turf-merge');
t.distance = require('turf-distance');
t.point = require('turf-point');

/**
 * Takes a {@link FeatureCollection} of {@link Point} features and
 * returns a concave hull.
 *
 * Internally, this implements
 * a [Monotone chain algorithm](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain#JavaScript).
 *
 * @module turf/concave
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {number} maxEdge the size of an edge necessary for part of the
 * hull to become concave (in miles)
 * @returns {Feature} a {@link Polygon} feature
 * @throws {Error} if maxEdge parameter is missing
 * @example
 * var points = turf.featurecollection([
 *  turf.point([-63.601226, 44.642643]),
 *  turf.point([-63.591442, 44.651436]),
 *  turf.point([-63.580799, 44.648749]),
 *  turf.point([-63.573589, 44.641788]),
 *  turf.point([-63.587665, 44.64533]),
 *  turf.point([-63.595218, 44.64765])
 * ]);
 *
 * var hull = turf.concave(points, 1);
 *
 * var result = turf.featurecollection(
 *  points.features.concat(hull));
 *
 * //=result
 */


module.exports = function(points, maxEdge) {
  if (typeof maxEdge !== 'number') throw new Error('maxEdge parameter is required');

  var tinPolys = t.tin(points, null);
  var filteredPolys = tinPolys.features.filter(filterTriangles);
  tinPolys.features = filteredPolys;

  function filterTriangles(triangle) {
    var pt1 = t.point(triangle.geometry.coordinates[0][0]);
    var pt2 = t.point(triangle.geometry.coordinates[0][1]);
    var pt3 = t.point(triangle.geometry.coordinates[0][2]);
    var dist1 = t.distance(pt1, pt2, 'miles');
    var dist2 = t.distance(pt2, pt3, 'miles');
    var dist3 = t.distance(pt1, pt3, 'miles');
    return (dist1 <= maxEdge && dist2 <= maxEdge && dist3 <= maxEdge);
  }

  return t.merge(tinPolys);
};

},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-distance/index.js","turf-merge":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-point/index.js","turf-tin":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-along/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/index.js":[function(require,module,exports){
var clone = require('clone');
var union = require('turf-union');

module.exports = function(polygons, done){

  var merged = clone(polygons.features[0]),
    features = polygons.features;

  for (var i = 0, len = features.length; i < len; i++) {
    var poly = features[i];

    if(poly.geometry){
      merged = union(merged, poly);
    }
  }

  return merged;
}

},{"clone":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/clone/clone.js","turf-union":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/clone/clone.js":[function(require,module,exports){
(function (Buffer){
'use strict';

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

// shim for Node's 'util' package
// DO NOT REMOVE THIS! It is required for compatibility with EnderJS (http://enderjs.com/).
var util = {
  isArray: function (ar) {
    return Array.isArray(ar) || (typeof ar === 'object' && objectToString(ar) === '[object Array]');
  },
  isDate: function (d) {
    return typeof d === 'object' && objectToString(d) === '[object Date]';
  },
  isRegExp: function (re) {
    return typeof re === 'object' && objectToString(re) === '[object RegExp]';
  },
  getRegExpFlags: function (re) {
    var flags = '';
    re.global && (flags += 'g');
    re.ignoreCase && (flags += 'i');
    re.multiline && (flags += 'm');
    return flags;
  }
};


if (typeof module === 'object')
  module.exports = clone;

/**
 * Clones (copies) an Object using deep copying.
 *
 * This function supports circular references by default, but if you are certain
 * there are no circular references in your object, you can save some CPU time
 * by calling clone(obj, false).
 *
 * Caution: if `circular` is false and `parent` contains circular references,
 * your program may enter an infinite loop and crash.
 *
 * @param `parent` - the object to be cloned
 * @param `circular` - set to true if the object to be cloned may contain
 *    circular references. (optional - true by default)
 * @param `depth` - set to a number if the object is only to be cloned to
 *    a particular depth. (optional - defaults to Infinity)
 * @param `prototype` - sets the prototype to be used when cloning an object.
 *    (optional - defaults to parent prototype).
*/

function clone(parent, circular, depth, prototype) {
  // maintain two arrays for circular references, where corresponding parents
  // and children have the same index
  var allParents = [];
  var allChildren = [];

  var useBuffer = typeof Buffer != 'undefined';

  if (typeof circular == 'undefined')
    circular = true;

  if (typeof depth == 'undefined')
    depth = Infinity;

  // recurse this function so we don't reset allParents and allChildren
  function _clone(parent, depth) {
    // cloning null always returns null
    if (parent === null)
      return null;

    if (depth == 0)
      return parent;

    var child;
    var proto;
    if (typeof parent != 'object') {
      return parent;
    }

    if (util.isArray(parent)) {
      child = [];
    } else if (util.isRegExp(parent)) {
      child = new RegExp(parent.source, util.getRegExpFlags(parent));
      if (parent.lastIndex) child.lastIndex = parent.lastIndex;
    } else if (util.isDate(parent)) {
      child = new Date(parent.getTime());
    } else if (useBuffer && Buffer.isBuffer(parent)) {
      child = new Buffer(parent.length);
      parent.copy(child);
      return child;
    } else {
      if (typeof prototype == 'undefined') {
        proto = Object.getPrototypeOf(parent);
        child = Object.create(proto);
      }
      else {
        child = Object.create(prototype);
        proto = prototype;
      }
    }

    if (circular) {
      var index = allParents.indexOf(parent);

      if (index != -1) {
        return allChildren[index];
      }
      allParents.push(parent);
      allChildren.push(child);
    }

    for (var i in parent) {
      var attrs;
      if (proto) {
        attrs = Object.getOwnPropertyDescriptor(proto, i);
      }
      
      if (attrs && attrs.set == null) {
        continue;
      }
      child[i] = _clone(parent[i], depth - 1);
    }

    return child;
  }

  return _clone(parent, depth);
}

/**
 * Simple flat clone using prototype, accepts only objects, usefull for property
 * override on FLAT configuration object (no nested props).
 *
 * USE WITH CAUTION! This may not behave as you wish if you do not know how this
 * works.
 */
clone.clonePrototype = function(parent) {
  if (parent === null)
    return null;

  var c = function () {};
  c.prototype = parent;
  return new c();
};

}).call(this,require("buffer").Buffer)

},{"buffer":"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/index.js":[function(require,module,exports){
// look here for help http://svn.osgeo.org/grass/grass/branches/releasebranch_6_4/vector/v.overlay/main.c
//must be array of polygons

// depend on jsts for now https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html

var jsts = require('jsts');

module.exports = function(poly1, poly2){
  var reader = new jsts.io.GeoJSONReader();
  var a = reader.read(JSON.stringify(poly1.geometry));
  var b = reader.read(JSON.stringify(poly2.geometry));
  var union = a.union(b);
  var parser = new jsts.io.GeoJSONParser();

  union = parser.write(union);
  return {
    type: 'Feature',
    geometry: union,
    properties: poly1.properties
  };
}

},{"jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/index.js"][0].apply(exports,arguments)
},{"./lib/jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/lib/jsts.js","javascript.util":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/lib/jsts.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/lib/jsts.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js":[function(require,module,exports){
(function (global){
/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011-2014 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
;(function(){var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var t;c.length&&(t=c.shift());)c.length||void 0===b?d=d[t]?d[t]:d[t]={}:d[t]=b}function g(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.p=function(a,c,O){var M=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,M)}};function h(a){this.message=a||""}g(h,Error);f("javascript.util.EmptyStackException",h);h.prototype.name="EmptyStackException";function k(a){this.message=a||""}g(k,Error);f("javascript.util.IndexOutOfBoundsException",k);k.prototype.name="IndexOutOfBoundsException";function l(){}f("javascript.util.Iterator",l);l.prototype.hasNext=l.prototype.c;l.prototype.next=l.prototype.next;l.prototype.remove=l.prototype.remove;function m(){}f("javascript.util.Collection",m);function n(){}g(n,m);f("javascript.util.List",n);function p(){}f("javascript.util.Map",p);function q(a){this.message=a||""}g(q,Error);f("javascript.util.NoSuchElementException",q);q.prototype.name="NoSuchElementException";function r(a){this.message=a||""}g(r,Error);r.prototype.name="OperationNotSupported";function s(a){this.a=[];a instanceof m&&this.e(a)}g(s,n);f("javascript.util.ArrayList",s);s.prototype.a=null;s.prototype.add=function(a){this.a.push(a);return!0};s.prototype.add=s.prototype.add;s.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};s.prototype.addAll=s.prototype.e;s.prototype.set=function(a,b){var c=this.a[a];this.a[a]=b;return c};s.prototype.set=s.prototype.set;s.prototype.f=function(){return new u(this)};s.prototype.iterator=s.prototype.f;
s.prototype.get=function(a){if(0>a||a>=this.size())throw new k;return this.a[a]};s.prototype.get=s.prototype.get;s.prototype.g=function(){return 0===this.a.length};s.prototype.isEmpty=s.prototype.g;s.prototype.size=function(){return this.a.length};s.prototype.size=s.prototype.size;s.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};s.prototype.toArray=s.prototype.h;
s.prototype.remove=function(a){for(var b=!1,c=0,d=this.a.length;c<d;c++)if(this.a[c]===a){this.a.splice(c,1);b=!0;break}return b};s.prototype.remove=s.prototype.remove;function u(a){this.j=a}f("$jscomp.scope.Iterator_",u);u.prototype.j=null;u.prototype.b=0;u.prototype.next=function(){if(this.b===this.j.size())throw new q;return this.j.get(this.b++)};u.prototype.next=u.prototype.next;u.prototype.c=function(){return this.b<this.j.size()?!0:!1};u.prototype.hasNext=u.prototype.c;
u.prototype.remove=function(){throw new r;};u.prototype.remove=u.prototype.remove;function v(){}f("javascript.util.Arrays",v);
v.sort=function(){var a=arguments[0],b,c,d;if(1===arguments.length)a.sort();else if(2===arguments.length)c=arguments[1],d=function(a,b){return c.compare(a,b)},a.sort(d);else if(3===arguments.length)for(b=a.slice(arguments[1],arguments[2]),b.sort(),d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b]);else if(4===arguments.length)for(b=a.slice(arguments[1],arguments[2]),c=arguments[3],d=function(a,b){return c.compare(a,b)},b.sort(d),
d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b])};v.asList=function(a){for(var b=new s,c=0,d=a.length;c<d;c++)b.add(a[c]);return b};function w(){this.i={}}g(w,p);f("javascript.util.HashMap",w);w.prototype.i=null;w.prototype.get=function(a){return this.i[a]||null};w.prototype.get=w.prototype.get;w.prototype.put=function(a,b){return this.i[a]=b};w.prototype.put=w.prototype.put;w.prototype.m=function(){var a=new s,b;for(b in this.i)this.i.hasOwnProperty(b)&&a.add(this.i[b]);return a};w.prototype.values=w.prototype.m;w.prototype.size=function(){return this.m().size()};w.prototype.size=w.prototype.size;function x(){}g(x,m);f("javascript.util.Set",x);function y(a){this.a=[];a instanceof m&&this.e(a)}g(y,x);f("javascript.util.HashSet",y);y.prototype.a=null;y.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(this.a[b]===a)return!0;return!1};y.prototype.contains=y.prototype.contains;y.prototype.add=function(a){if(this.contains(a))return!1;this.a.push(a);return!0};y.prototype.add=y.prototype.add;y.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};y.prototype.addAll=y.prototype.e;
y.prototype.remove=function(){throw new r;};y.prototype.remove=y.prototype.remove;y.prototype.size=function(){return this.a.length};y.prototype.g=function(){return 0===this.a.length};y.prototype.isEmpty=y.prototype.g;y.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};y.prototype.toArray=y.prototype.h;y.prototype.f=function(){return new z(this)};y.prototype.iterator=y.prototype.f;function z(a){this.k=a}f("$jscomp.scope.Iterator_$1",z);z.prototype.k=null;
z.prototype.b=0;z.prototype.next=function(){if(this.b===this.k.size())throw new q;return this.k.a[this.b++]};z.prototype.next=z.prototype.next;z.prototype.c=function(){return this.b<this.k.size()?!0:!1};z.prototype.hasNext=z.prototype.c;z.prototype.remove=function(){throw new r;};z.prototype.remove=z.prototype.remove;function A(){}g(A,p);f("javascript.util.SortedMap",A);function B(){}g(B,x);f("javascript.util.SortedSet",B);function C(){this.a=[]}g(C,n);f("javascript.util.Stack",C);C.prototype.a=null;C.prototype.push=function(a){this.a.push(a);return a};C.prototype.push=C.prototype.push;C.prototype.pop=function(){if(0===this.a.length)throw new h;return this.a.pop()};C.prototype.pop=C.prototype.pop;C.prototype.o=function(){if(0===this.a.length)throw new h;return this.a[this.a.length-1]};C.prototype.peek=C.prototype.o;C.prototype.empty=function(){return 0===this.a.length?!0:!1};C.prototype.empty=C.prototype.empty;
C.prototype.g=function(){return this.empty()};C.prototype.isEmpty=C.prototype.g;C.prototype.search=function(a){return this.a.indexOf(a)};C.prototype.search=C.prototype.search;C.prototype.size=function(){return this.a.length};C.prototype.size=C.prototype.size;C.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};C.prototype.toArray=C.prototype.h;function D(a){return null==a?null:a.parent}function E(a,b){null!==a&&(a.color=b)}function F(a){return null==a?null:a.left}function G(a){return null==a?null:a.right}function H(){this.d=null;this.n=0}g(H,A);f("javascript.util.TreeMap",H);H.prototype.get=function(a){for(var b=this.d;null!==b;){var c=a.compareTo(b.key);if(0>c)b=b.left;else if(0<c)b=b.right;else return b.value}return null};H.prototype.get=H.prototype.get;
H.prototype.put=function(a,b){if(null===this.d)return this.d={key:a,value:b,left:null,right:null,parent:null,color:0},this.n=1,null;var c=this.d,d,t;do if(d=c,t=a.compareTo(c.key),0>t)c=c.left;else if(0<t)c=c.right;else return d=c.value,c.value=b,d;while(null!==c);c={key:a,left:null,right:null,value:b,parent:d,color:0};0>t?d.left=c:d.right=c;for(c.color=1;null!=c&&c!=this.d&&1==c.parent.color;)D(c)==F(D(D(c)))?(d=G(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==G(D(c))&&
(c=D(c),I(this,c)),E(D(c),0),E(D(D(c)),1),J(this,D(D(c))))):(d=F(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==F(D(c))&&(c=D(c),J(this,c)),E(D(c),0),E(D(D(c)),1),I(this,D(D(c)))));this.d.color=0;this.n++;return null};H.prototype.put=H.prototype.put;H.prototype.m=function(){var a=new s,b;b=this.d;if(null!=b)for(;null!=b.left;)b=b.left;if(null!==b)for(a.add(b.value);null!==(b=K(b));)a.add(b.value);return a};H.prototype.values=H.prototype.m;
function I(a,b){if(null!=b){var c=b.right;b.right=c.left;null!=c.left&&(c.left.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.left==b?b.parent.left=c:b.parent.right=c;c.left=b;b.parent=c}}function J(a,b){if(null!=b){var c=b.left;b.left=c.right;null!=c.right&&(c.right.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.right==b?b.parent.right=c:b.parent.left=c;c.right=b;b.parent=c}}
function K(a){if(null===a)return null;if(null!==a.right)for(var b=a.right;null!==b.left;)b=b.left;else for(b=a.parent;null!==b&&a===b.right;)a=b,b=b.parent;return b}H.prototype.size=function(){return this.n};H.prototype.size=H.prototype.size;function L(a){this.a=[];a instanceof m&&this.e(a)}g(L,B);f("javascript.util.TreeSet",L);L.prototype.a=null;L.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(0===this.a[b].compareTo(a))return!0;return!1};L.prototype.contains=L.prototype.contains;L.prototype.add=function(a){if(this.contains(a))return!1;for(var b=0,c=this.a.length;b<c;b++)if(1===this.a[b].compareTo(a))return this.a.splice(b,0,a),!0;this.a.push(a);return!0};L.prototype.add=L.prototype.add;
L.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};L.prototype.addAll=L.prototype.e;L.prototype.remove=function(){throw new r;};L.prototype.remove=L.prototype.remove;L.prototype.size=function(){return this.a.length};L.prototype.size=L.prototype.size;L.prototype.g=function(){return 0===this.a.length};L.prototype.isEmpty=L.prototype.g;L.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};L.prototype.toArray=L.prototype.h;L.prototype.f=function(){return new N(this)};
L.prototype.iterator=L.prototype.f;function N(a){this.l=a}f("$jscomp.scope.Iterator_$2",N);N.prototype.l=null;N.prototype.b=0;N.prototype.next=function(){if(this.b===this.l.size())throw new q;return this.l.a[this.b++]};N.prototype.next=N.prototype.next;N.prototype.c=function(){return this.b<this.l.size()?!0:!1};N.prototype.hasNext=N.prototype.c;N.prototype.remove=function(){throw new r;};N.prototype.remove=N.prototype.remove;"undefined"!==typeof global&&(global.javascript={},global.javascript.util={},global.javascript.util.ArrayList=s,global.javascript.util.Arrays=v,global.javascript.util.Collection=m,global.javascript.util.EmptyStackException=h,global.javascript.util.HashMap=w,global.javascript.util.HashSet=y,global.javascript.util.IndexOutOfBoundsException=k,global.javascript.util.Iterator=l,global.javascript.util.List=n,global.javascript.util.Map=p,global.javascript.util.NoSuchElementException=q,global.javascript.util.OperationNotSupported=
r,global.javascript.util.Set=x,global.javascript.util.SortedMap=A,global.javascript.util.SortedSet=B,global.javascript.util.Stack=C,global.javascript.util.TreeMap=H,global.javascript.util.TreeSet=L);}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/jsts/node_modules/javascript.util/index.js"][0].apply(exports,arguments)
},{"./dist/javascript.util-node.min.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Delaunay_triangulation
//https://github.com/ironwallaby/delaunay
var polygon = require('turf-polygon');
var nearest = require('turf-nearest');
var point = require('turf-point');

/**
 * Takes a set of points and the name of a z-value property and
 * creates a [Triangulated Irregular Network](http://en.wikipedia.org/wiki/Triangulated_irregular_network),
 * or a TIN for short. These are often used
 * for developing elevation contour maps or stepped heat visualizations.
 *
 * @module turf/tin
 * @param {GeoJSONFeatureCollection} points - a GeoJSON FeatureCollection containing
 * Features with Point geometries
 * @param {string} propertyName - name of the property from which to pull z values
 * @return {GeoJSONFeatureCollection} output
 * @example
 * var fs = require('fs')
 * var z = 'elevation'
 * var pts = JSON.parse(fs.readFileSync('/path/to/pts.geojson'))
 * var tinPolys = turf.tin(pts, z)
 * console.log(tinPolys)
 */
module.exports = function(points, z){
  //break down points
  var vertices = [];
  points.features.forEach(function(p){
    vertices.push({x:p.geometry.coordinates[0], y:p.geometry.coordinates[1]});
  })

  var triangulated = triangulate(vertices);
  var triangles = {
    type: 'FeatureCollection',
    features: []
  };

  triangulated.forEach(function(triangle){
    var coords = [[[triangle.a.x, triangle.a.y], [triangle.b.x, triangle.b.y], [triangle.c.x, triangle.c.y]]];
    var poly = polygon(coords, {a: null, b: null, c: null});

    triangles.features.push(poly);
  });
  if(z){
    // add values from vertices
    triangles.features.forEach(function(tri){
      var coordinateNumber = 1;
      tri.geometry.coordinates[0].forEach(function(c){
        var closest = nearest(point(c[0], c[1]), points);

        if(coordinateNumber === 1){
          tri.properties.a = closest.properties[z];
        }
        else if(coordinateNumber === 2){
          tri.properties.b = closest.properties[z];
        }
        else if(coordinateNumber === 3){
          tri.properties.c = closest.properties[z];
        }
        coordinateNumber++;
      });
    });
  }

  triangles.features.forEach(function(tri){
    tri = correctRings(tri);
  });
  
  return triangles;
}

function correctRings(poly){
  poly.geometry.coordinates.forEach(function(ring){
    var isWrapped =  ring[0] === ring.slice(-1)[0];
    if(!isWrapped){
      ring.push(ring[0]);
    }
  })
  return poly;
}

function Triangle(a, b, c) {
  this.a = a
  this.b = b
  this.c = c

  var A = b.x - a.x,
      B = b.y - a.y,
      C = c.x - a.x,
      D = c.y - a.y,
      E = A * (a.x + b.x) + B * (a.y + b.y),
      F = C * (a.x + c.x) + D * (a.y + c.y),
      G = 2 * (A * (c.y - b.y) - B * (c.x - b.x)),
      minx, miny, dx, dy

  /* If the points of the triangle are collinear, then just find the
   * extremes and use the midpoint as the center of the circumcircle. */
  if(Math.abs(G) < 0.000001) {
    minx = Math.min(a.x, b.x, c.x)
    miny = Math.min(a.y, b.y, c.y)
    dx   = (Math.max(a.x, b.x, c.x) - minx) * 0.5
    dy   = (Math.max(a.y, b.y, c.y) - miny) * 0.5

    this.x = minx + dx
    this.y = miny + dy
    this.r = dx * dx + dy * dy
  }

  else {
    this.x = (D*E - B*F) / G
    this.y = (A*F - C*E) / G
    dx = this.x - a.x
    dy = this.y - a.y
    this.r = dx * dx + dy * dy
  }
}

Triangle.prototype.draw = function(ctx) {
  ctx.beginPath()
  ctx.moveTo(this.a.x, this.a.y)
  ctx.lineTo(this.b.x, this.b.y)
  ctx.lineTo(this.c.x, this.c.y)
  ctx.closePath()
  ctx.stroke()
}

function byX(a, b) {
  return b.x - a.x
}

function dedup(edges) {
  var j = edges.length,
      a, b, i, m, n

  outer: while(j) {
    b = edges[--j]
    a = edges[--j]
    i = j
    while(i) {
      n = edges[--i]
      m = edges[--i]
      if((a === m && b === n) || (a === n && b === m)) {
        edges.splice(j, 2)
        edges.splice(i, 2)
        j -= 2
        continue outer
      }
    }
  }
}

function triangulate(vertices) {
  /* Bail if there aren't enough vertices to form any triangles. */
  if(vertices.length < 3)
    return []

  /* Ensure the vertex array is in order of descending X coordinate
   * (which is needed to ensure a subquadratic runtime), and then find
   * the bounding box around the points. */
  vertices.sort(byX)

  var i    = vertices.length - 1,
      xmin = vertices[i].x,
      xmax = vertices[0].x,
      ymin = vertices[i].y,
      ymax = ymin

  while(i--) {
    if(vertices[i].y < ymin) ymin = vertices[i].y
    if(vertices[i].y > ymax) ymax = vertices[i].y
  }

  /* Find a supertriangle, which is a triangle that surrounds all the
   * vertices. This is used like something of a sentinel value to remove
   * cases in the main algorithm, and is removed before we return any
   * results.
   *
   * Once found, put it in the "open" list. (The "open" list is for
   * triangles who may still need to be considered; the "closed" list is
   * for triangles which do not.) */
  var dx     = xmax - xmin,
      dy     = ymax - ymin,
      dmax   = (dx > dy) ? dx : dy,
      xmid   = (xmax + xmin) * 0.5,
      ymid   = (ymax + ymin) * 0.5,
      open   = [
        new Triangle(
          {x: xmid - 20 * dmax, y: ymid -      dmax, __sentinel: true},
          {x: xmid            , y: ymid + 20 * dmax, __sentinel: true},
          {x: xmid + 20 * dmax, y: ymid -      dmax, __sentinel: true}
        )
      ],
      closed = [],
      edges = [],
      j, a, b

  /* Incrementally add each vertex to the mesh. */
  i = vertices.length
  while(i--) {
    /* For each open triangle, check to see if the current point is
     * inside it's circumcircle. If it is, remove the triangle and add
     * it's edges to an edge list. */
    edges.length = 0
    j = open.length
    while(j--) {
      /* If this point is to the right of this triangle's circumcircle,
       * then this triangle should never get checked again. Remove it
       * from the open list, add it to the closed list, and skip. */
      dx = vertices[i].x - open[j].x
      if(dx > 0 && dx * dx > open[j].r) {
        closed.push(open[j])
        open.splice(j, 1)
        continue
      }

      /* If not, skip this triangle. */
      dy = vertices[i].y - open[j].y
      if(dx * dx + dy * dy > open[j].r)
        continue

      /* Remove the triangle and add it's edges to the edge list. */
      edges.push(
        open[j].a, open[j].b,
        open[j].b, open[j].c,
        open[j].c, open[j].a
      )
      open.splice(j, 1)
    }

    /* Remove any doubled edges. */
    dedup(edges)

    /* Add a new triangle for each edge. */
    j = edges.length
    while(j) {
      b = edges[--j]
      a = edges[--j]
      open.push(new Triangle(a, b, vertices[i]))
    }
  }

  /* Copy any remaining open triangles to the closed list, and then
   * remove any triangles that share a vertex with the supertriangle. */
  Array.prototype.push.apply(closed, open)

  i = closed.length
  while(i--)
    if(closed[i].a.__sentinel ||
       closed[i].b.__sentinel ||
       closed[i].c.__sentinel)
      closed.splice(i, 1)

  /* Yay, we're done! */
  return closed
}

/*if (typeof module !== 'undefined') {
    module.exports = {
        Triangle: Triangle,
        triangulate: triangulate
    }
}*/

},{"turf-nearest":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-nearest/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-point/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-nearest/index.js":[function(require,module,exports){
distance = require('turf-distance');

module.exports = function(targetPoint, points){
  var nearestPoint;
  var count = 0;
  var dist = Infinity;
  points.features.forEach(function(pt){
    if(!nearestPoint){
      nearestPoint = pt;
      var dist = distance(targetPoint, pt, 'miles');
      nearestPoint.properties.distance = dist;
    }
    else{
      var dist = distance(targetPoint, pt, 'miles');
      if(dist < nearestPoint.properties.distance){
        nearestPoint = pt;
        nearestPoint.properties.distance = dist;
      }
    }
  });
  delete nearestPoint.properties.distance;
  return nearestPoint;
}
},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-distance/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-point/index.js":[function(require,module,exports){
/**
 * Generates a new GeoJSON Point feature, given coordinates
 * and, optionally, properties.
 *
 * @module turf/point
 * @param {number} longitude - position west to east in decimal degrees
 * @param {number} latitude - position south to north in decimal degrees
 * @param {Object} properties
 * @return {GeoJSONPoint} output
 * @example
 * var pt1 = turf.point(-75.343, 39.984)
 */
module.exports = function(x, y, properties){
  if(x instanceof Array) {
  	properties = y;
  	y = x[1];
  	x = x[0];
  } else if(isNaN(x) || isNaN(y)) throw new Error('Invalid coordinates')
  return {
    type: "Feature",
    geometry: {
      type: "Point",
      coordinates: [x, y]
    },
    properties: properties || {}
  };
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/index.js":[function(require,module,exports){
var each = require('turf-meta').coordEach,
    convexHull = require('convex-hull'),
    polygon = require('turf-polygon');

/**
 * Takes any {@link GeoJSON} object and returns a
 * [convex hull](http://en.wikipedia.org/wiki/Convex_hull) polygon.
 *
 * Internally this uses
 * the [convex-hull](https://github.com/mikolalysenko/convex-hull) module that
 * implements a [monotone chain hull](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain).
 *
 * @module turf/convex
 * @param {GeoJSON} input any GeoJSON object
 * @returns {Feature} a {@link Polygon} feature
 * @example
 * var points = turf.featurecollection([
 *   turf.point([10.195312, 43.755225]),
 *   turf.point([10.404052, 43.8424511]),
 *   turf.point([10.579833, 43.659924]),
 *   turf.point([10.360107, 43.516688]),
 *   turf.point([10.14038, 43.588348]),
 *   turf.point([10.195312, 43.755225])]);
 *
 * var hull = turf.convex(points);
 *
 * var result = turf.featurecollection(
 *   points.features.concat(hull));
 *
 * //=result
 */
module.exports = function(fc) {
  var points = [];
  each(fc, function(coord) { points.push(coord); });
  var hull = convexHull(points);
  var ring = [];
  for (var i = 0; i < hull.length; i++) {
      ring.push(points[hull[i][0]]);
  }
  ring.push(points[hull[hull.length - 1][1]]);
  return polygon([ring]);
};

},{"convex-hull":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/ch.js","turf-meta":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/turf-meta/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/ch.js":[function(require,module,exports){
"use strict"

var convexHull1d = require('./lib/ch1d')
var convexHull2d = require('./lib/ch2d')
var convexHullnd = require('./lib/chnd')

module.exports = convexHull

function convexHull(points) {
  var n = points.length
  if(n === 0) {
    return []
  } else if(n === 1) {
    return [[0]]
  }
  var d = points[0].length
  if(d === 0) {
    return []
  } else if(d === 1) {
    return convexHull1d(points)
  } else if(d === 2) {
    return convexHull2d(points)
  }
  return convexHullnd(points, d)
}
},{"./lib/ch1d":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/lib/ch1d.js","./lib/ch2d":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/lib/ch2d.js","./lib/chnd":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/lib/chnd.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/lib/ch1d.js":[function(require,module,exports){
"use strict"

module.exports = convexHull1d

function convexHull1d(points) {
  var lo = 0
  var hi = 0
  for(var i=1; i<points.length; ++i) {
    if(points[i][0] < points[lo][0]) {
      lo = i
    }
    if(points[i][0] > points[hi][0]) {
      hi = i
    }
  }
  if(lo < hi) {
    return [[lo], [hi]]
  } else if(lo > hi) {
    return [[hi], [lo]]
  } else {
    return [[lo]]
  }
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/lib/ch2d.js":[function(require,module,exports){
'use strict'

module.exports = convexHull2D

var monotoneHull = require('monotone-convex-hull-2d')

function convexHull2D(points) {
  var hull = monotoneHull(points)
  var h = hull.length
  if(h <= 2) {
    return []
  }
  var edges = new Array(h)
  var a = hull[h-1]
  for(var i=0; i<h; ++i) {
    var b = hull[i]
    edges[i] = [a,b]
    a = b
  }
  return edges
}

},{"monotone-convex-hull-2d":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/lib/chnd.js":[function(require,module,exports){
'use strict'

module.exports = convexHullnD

var ich = require('incremental-convex-hull')
var aff = require('affine-hull')

function permute(points, front) {
  var n = points.length
  var npoints = new Array(n)
  for(var i=0; i<front.length; ++i) {
    npoints[i] = points[front[i]]
  }
  var ptr = front.length
  for(var i=0; i<n; ++i) {
    if(front.indexOf(i) < 0) {
      npoints[ptr++] = points[i]
    }
  }
  return npoints
}

function invPermute(cells, front) {
  var nc = cells.length
  var nf = front.length
  for(var i=0; i<nc; ++i) {
    var c = cells[i]
    for(var j=0; j<c.length; ++j) {
      var x = c[j]
      if(x < nf) {
        c[j] = front[x]
      } else {
        x = x - nf
        for(var k=0; k<nf; ++k) {
          if(x >= front[k]) {
            x += 1
          }
        }
        c[j] = x
      }
    }
  }
  return cells
}

function convexHullnD(points, d) {
  try {
    return ich(points, true)
  } catch(e) {
    //If point set is degenerate, try to find a basis and rerun it
    var ah = aff(points)
    if(ah.length <= d) {
      //No basis, no try
      return []
    }
    var npoints = permute(points, ah)
    var nhull   = ich(npoints, true)
    return invPermute(nhull, ah)
  }
}
},{"affine-hull":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/aff.js","incremental-convex-hull":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/ich.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/aff.js":[function(require,module,exports){
'use strict'

module.exports = affineHull

var orient = require('robust-orientation')

function linearlyIndependent(points, d) {
  var nhull = new Array(d+1)
  for(var i=0; i<points.length; ++i) {
    nhull[i] = points[i]
  }
  for(var i=0; i<=points.length; ++i) {
    for(var j=points.length; j<=d; ++j) {
      var x = new Array(d)
      for(var k=0; k<d; ++k) {
        x[k] = Math.pow(j+1-i, k)
      }
      nhull[j] = x
    }
    var o = orient.apply(void 0, nhull)
    if(o) {
      return true
    }
  }
  return false
}

function affineHull(points) {
  var n = points.length
  if(n === 0) {
    return []
  }
  if(n === 1) {
    return [0]
  }
  var d = points[0].length
  var frame = [ points[0] ]
  var index = [ 0 ]
  for(var i=1; i<n; ++i) {
    frame.push(points[i])
    if(!linearlyIndependent(frame, d)) {
      frame.pop()
      continue
    }
    index.push(i)
    if(index.length === d+1) {
      return index
    }
  }
  return index
}
},{"robust-orientation":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/orientation.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js":[function(require,module,exports){
"use strict"

module.exports = fastTwoSum

function fastTwoSum(a, b, result) {
	var x = a + b
	var bv = x - a
	var av = x - bv
	var br = b - bv
	var ar = a - av
	if(result) {
		result[0] = ar + br
		result[1] = x
		return result
	}
	return [ar+br, x]
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js":[function(require,module,exports){
"use strict"

var twoProduct = require("two-product")
var twoSum = require("two-sum")

module.exports = scaleLinearExpansion

function scaleLinearExpansion(e, scale) {
  var n = e.length
  if(n === 1) {
    var ts = twoProduct(e[0], scale)
    if(ts[0]) {
      return ts
    }
    return [ ts[1] ]
  }
  var g = new Array(2 * n)
  var q = [0.1, 0.1]
  var t = [0.1, 0.1]
  var count = 0
  twoProduct(e[0], scale, q)
  if(q[0]) {
    g[count++] = q[0]
  }
  for(var i=1; i<n; ++i) {
    twoProduct(e[i], scale, t)
    var pq = q[1]
    twoSum(pq, t[0], q)
    if(q[0]) {
      g[count++] = q[0]
    }
    var a = t[1]
    var b = q[1]
    var x = a + b
    var bv = x - a
    var y = b - bv
    q[1] = x
    if(y) {
      g[count++] = y
    }
  }
  if(q[1]) {
    g[count++] = q[1]
  }
  if(count === 0) {
    g[count++] = 0.0
  }
  g.length = count
  return g
}
},{"two-product":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js","two-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js":[function(require,module,exports){
"use strict"

module.exports = robustSubtract

//Easy case: Add two scalars
function scalarScalar(a, b) {
  var x = a + b
  var bv = x - a
  var av = x - bv
  var br = b - bv
  var ar = a - av
  var y = ar + br
  if(y) {
    return [y, x]
  }
  return [x]
}

function robustSubtract(e, f) {
  var ne = e.length|0
  var nf = f.length|0
  if(ne === 1 && nf === 1) {
    return scalarScalar(e[0], -f[0])
  }
  var n = ne + nf
  var g = new Array(n)
  var count = 0
  var eptr = 0
  var fptr = 0
  var abs = Math.abs
  var ei = e[eptr]
  var ea = abs(ei)
  var fi = -f[fptr]
  var fa = abs(fi)
  var a, b
  if(ea < fa) {
    b = ei
    eptr += 1
    if(eptr < ne) {
      ei = e[eptr]
      ea = abs(ei)
    }
  } else {
    b = fi
    fptr += 1
    if(fptr < nf) {
      fi = -f[fptr]
      fa = abs(fi)
    }
  }
  if((eptr < ne && ea < fa) || (fptr >= nf)) {
    a = ei
    eptr += 1
    if(eptr < ne) {
      ei = e[eptr]
      ea = abs(ei)
    }
  } else {
    a = fi
    fptr += 1
    if(fptr < nf) {
      fi = -f[fptr]
      fa = abs(fi)
    }
  }
  var x = a + b
  var bv = x - a
  var y = b - bv
  var q0 = y
  var q1 = x
  var _x, _bv, _av, _br, _ar
  while(eptr < ne && fptr < nf) {
    if(ea < fa) {
      a = ei
      eptr += 1
      if(eptr < ne) {
        ei = e[eptr]
        ea = abs(ei)
      }
    } else {
      a = fi
      fptr += 1
      if(fptr < nf) {
        fi = -f[fptr]
        fa = abs(fi)
      }
    }
    b = q0
    x = a + b
    bv = x - a
    y = b - bv
    if(y) {
      g[count++] = y
    }
    _x = q1 + x
    _bv = _x - q1
    _av = _x - _bv
    _br = x - _bv
    _ar = q1 - _av
    q0 = _ar + _br
    q1 = _x
  }
  while(eptr < ne) {
    a = ei
    b = q0
    x = a + b
    bv = x - a
    y = b - bv
    if(y) {
      g[count++] = y
    }
    _x = q1 + x
    _bv = _x - q1
    _av = _x - _bv
    _br = x - _bv
    _ar = q1 - _av
    q0 = _ar + _br
    q1 = _x
    eptr += 1
    if(eptr < ne) {
      ei = e[eptr]
    }
  }
  while(fptr < nf) {
    a = fi
    b = q0
    x = a + b
    bv = x - a
    y = b - bv
    if(y) {
      g[count++] = y
    } 
    _x = q1 + x
    _bv = _x - q1
    _av = _x - _bv
    _br = x - _bv
    _ar = q1 - _av
    q0 = _ar + _br
    q1 = _x
    fptr += 1
    if(fptr < nf) {
      fi = -f[fptr]
    }
  }
  if(q0) {
    g[count++] = q0
  }
  if(q1) {
    g[count++] = q1
  }
  if(!count) {
    g[count++] = 0.0  
  }
  g.length = count
  return g
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js":[function(require,module,exports){
"use strict"

module.exports = linearExpansionSum

//Easy case: Add two scalars
function scalarScalar(a, b) {
  var x = a + b
  var bv = x - a
  var av = x - bv
  var br = b - bv
  var ar = a - av
  var y = ar + br
  if(y) {
    return [y, x]
  }
  return [x]
}

function linearExpansionSum(e, f) {
  var ne = e.length|0
  var nf = f.length|0
  if(ne === 1 && nf === 1) {
    return scalarScalar(e[0], f[0])
  }
  var n = ne + nf
  var g = new Array(n)
  var count = 0
  var eptr = 0
  var fptr = 0
  var abs = Math.abs
  var ei = e[eptr]
  var ea = abs(ei)
  var fi = f[fptr]
  var fa = abs(fi)
  var a, b
  if(ea < fa) {
    b = ei
    eptr += 1
    if(eptr < ne) {
      ei = e[eptr]
      ea = abs(ei)
    }
  } else {
    b = fi
    fptr += 1
    if(fptr < nf) {
      fi = f[fptr]
      fa = abs(fi)
    }
  }
  if((eptr < ne && ea < fa) || (fptr >= nf)) {
    a = ei
    eptr += 1
    if(eptr < ne) {
      ei = e[eptr]
      ea = abs(ei)
    }
  } else {
    a = fi
    fptr += 1
    if(fptr < nf) {
      fi = f[fptr]
      fa = abs(fi)
    }
  }
  var x = a + b
  var bv = x - a
  var y = b - bv
  var q0 = y
  var q1 = x
  var _x, _bv, _av, _br, _ar
  while(eptr < ne && fptr < nf) {
    if(ea < fa) {
      a = ei
      eptr += 1
      if(eptr < ne) {
        ei = e[eptr]
        ea = abs(ei)
      }
    } else {
      a = fi
      fptr += 1
      if(fptr < nf) {
        fi = f[fptr]
        fa = abs(fi)
      }
    }
    b = q0
    x = a + b
    bv = x - a
    y = b - bv
    if(y) {
      g[count++] = y
    }
    _x = q1 + x
    _bv = _x - q1
    _av = _x - _bv
    _br = x - _bv
    _ar = q1 - _av
    q0 = _ar + _br
    q1 = _x
  }
  while(eptr < ne) {
    a = ei
    b = q0
    x = a + b
    bv = x - a
    y = b - bv
    if(y) {
      g[count++] = y
    }
    _x = q1 + x
    _bv = _x - q1
    _av = _x - _bv
    _br = x - _bv
    _ar = q1 - _av
    q0 = _ar + _br
    q1 = _x
    eptr += 1
    if(eptr < ne) {
      ei = e[eptr]
    }
  }
  while(fptr < nf) {
    a = fi
    b = q0
    x = a + b
    bv = x - a
    y = b - bv
    if(y) {
      g[count++] = y
    } 
    _x = q1 + x
    _bv = _x - q1
    _av = _x - _bv
    _br = x - _bv
    _ar = q1 - _av
    q0 = _ar + _br
    q1 = _x
    fptr += 1
    if(fptr < nf) {
      fi = f[fptr]
    }
  }
  if(q0) {
    g[count++] = q0
  }
  if(q1) {
    g[count++] = q1
  }
  if(!count) {
    g[count++] = 0.0  
  }
  g.length = count
  return g
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js":[function(require,module,exports){
"use strict"

module.exports = twoProduct

var SPLITTER = +(Math.pow(2, 27) + 1.0)

function twoProduct(a, b, result) {
  var x = a * b

  var c = SPLITTER * a
  var abig = c - a
  var ahi = c - abig
  var alo = a - ahi

  var d = SPLITTER * b
  var bbig = d - b
  var bhi = d - bbig
  var blo = b - bhi

  var err1 = x - (ahi * bhi)
  var err2 = err1 - (alo * bhi)
  var err3 = err2 - (ahi * blo)

  var y = alo * blo - err3

  if(result) {
    result[0] = y
    result[1] = x
    return result
  }

  return [ y, x ]
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/orientation.js":[function(require,module,exports){
"use strict"

var twoProduct = require("two-product")
var robustSum = require("robust-sum")
var robustScale = require("robust-scale")
var robustSubtract = require("robust-subtract")

var NUM_EXPAND = 5

var EPSILON     = 1.1102230246251565e-16
var ERRBOUND3   = (3.0 + 16.0 * EPSILON) * EPSILON
var ERRBOUND4   = (7.0 + 56.0 * EPSILON) * EPSILON

function cofactor(m, c) {
  var result = new Array(m.length-1)
  for(var i=1; i<m.length; ++i) {
    var r = result[i-1] = new Array(m.length-1)
    for(var j=0,k=0; j<m.length; ++j) {
      if(j === c) {
        continue
      }
      r[k++] = m[i][j]
    }
  }
  return result
}

function matrix(n) {
  var result = new Array(n)
  for(var i=0; i<n; ++i) {
    result[i] = new Array(n)
    for(var j=0; j<n; ++j) {
      result[i][j] = ["m", j, "[", (n-i-1), "]"].join("")
    }
  }
  return result
}

function sign(n) {
  if(n & 1) {
    return "-"
  }
  return ""
}

function generateSum(expr) {
  if(expr.length === 1) {
    return expr[0]
  } else if(expr.length === 2) {
    return ["sum(", expr[0], ",", expr[1], ")"].join("")
  } else {
    var m = expr.length>>1
    return ["sum(", generateSum(expr.slice(0, m)), ",", generateSum(expr.slice(m)), ")"].join("")
  }
}

function determinant(m) {
  if(m.length === 2) {
    return [["sum(prod(", m[0][0], ",", m[1][1], "),prod(-", m[0][1], ",", m[1][0], "))"].join("")]
  } else {
    var expr = []
    for(var i=0; i<m.length; ++i) {
      expr.push(["scale(", generateSum(determinant(cofactor(m, i))), ",", sign(i), m[0][i], ")"].join(""))
    }
    return expr
  }
}

function orientation(n) {
  var pos = []
  var neg = []
  var m = matrix(n)
  var args = []
  for(var i=0; i<n; ++i) {
    if((i&1)===0) {
      pos.push.apply(pos, determinant(cofactor(m, i)))
    } else {
      neg.push.apply(neg, determinant(cofactor(m, i)))
    }
    args.push("m" + i)
  }
  var posExpr = generateSum(pos)
  var negExpr = generateSum(neg)
  var funcName = "orientation" + n + "Exact"
  var code = ["function ", funcName, "(", args.join(), "){var p=", posExpr, ",n=", negExpr, ",d=sub(p,n);\
return d[d.length-1];};return ", funcName].join("")
  var proc = new Function("sum", "prod", "scale", "sub", code)
  return proc(robustSum, twoProduct, robustScale, robustSubtract)
}

var orientation3Exact = orientation(3)
var orientation4Exact = orientation(4)

var CACHED = [
  function orientation0() { return 0 },
  function orientation1() { return 0 },
  function orientation2(a, b) { 
    return b[0] - a[0]
  },
  function orientation3(a, b, c) {
    var l = (a[1] - c[1]) * (b[0] - c[0])
    var r = (a[0] - c[0]) * (b[1] - c[1])
    var det = l - r
    var s
    if(l > 0) {
      if(r <= 0) {
        return det
      } else {
        s = l + r
      }
    } else if(l < 0) {
      if(r >= 0) {
        return det
      } else {
        s = -(l + r)
      }
    } else {
      return det
    }
    var tol = ERRBOUND3 * s
    if(det >= tol || det <= -tol) {
      return det
    }
    return orientation3Exact(a, b, c)
  },
  function orientation4(a,b,c,d) {
    var adx = a[0] - d[0]
    var bdx = b[0] - d[0]
    var cdx = c[0] - d[0]
    var ady = a[1] - d[1]
    var bdy = b[1] - d[1]
    var cdy = c[1] - d[1]
    var adz = a[2] - d[2]
    var bdz = b[2] - d[2]
    var cdz = c[2] - d[2]
    var bdxcdy = bdx * cdy
    var cdxbdy = cdx * bdy
    var cdxady = cdx * ady
    var adxcdy = adx * cdy
    var adxbdy = adx * bdy
    var bdxady = bdx * ady
    var det = adz * (bdxcdy - cdxbdy) 
            + bdz * (cdxady - adxcdy)
            + cdz * (adxbdy - bdxady)
    var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz)
                  + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz)
                  + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz)
    var tol = ERRBOUND4 * permanent
    if ((det > tol) || (-det > tol)) {
      return det
    }
    return orientation4Exact(a,b,c,d)
  }
]

function slowOrient(args) {
  var proc = CACHED[args.length]
  if(!proc) {
    proc = CACHED[args.length] = orientation(args.length)
  }
  return proc.apply(undefined, args)
}

function generateOrientationProc() {
  while(CACHED.length <= NUM_EXPAND) {
    CACHED.push(orientation(CACHED.length))
  }
  var args = []
  var procArgs = ["slow"]
  for(var i=0; i<=NUM_EXPAND; ++i) {
    args.push("a" + i)
    procArgs.push("o" + i)
  }
  var code = [
    "function getOrientation(", args.join(), "){switch(arguments.length){case 0:case 1:return 0;"
  ]
  for(var i=2; i<=NUM_EXPAND; ++i) {
    code.push("case ", i, ":return o", i, "(", args.slice(0, i).join(), ");")
  }
  code.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation")
  procArgs.push(code.join(""))

  var proc = Function.apply(undefined, procArgs)
  module.exports = proc.apply(undefined, [slowOrient].concat(CACHED))
  for(var i=0; i<=NUM_EXPAND; ++i) {
    module.exports[i] = CACHED[i]
  }
}

generateOrientationProc()
},{"robust-scale":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js","robust-subtract":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js","robust-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js","two-product":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/ich.js":[function(require,module,exports){
"use strict"

//High level idea:
// 1. Use Clarkson's incremental construction to find convex hull
// 2. Point location in triangulation by jump and walk

module.exports = incrementalConvexHull

var orient = require("robust-orientation")
var compareCell = require("simplicial-complex").compareCells

function compareInt(a, b) {
  return a - b
}

function Simplex(vertices, adjacent, boundary) {
  this.vertices = vertices
  this.adjacent = adjacent
  this.boundary = boundary
  this.lastVisited = -1
}

Simplex.prototype.flip = function() {
  var t = this.vertices[0]
  this.vertices[0] = this.vertices[1]
  this.vertices[1] = t
  var u = this.adjacent[0]
  this.adjacent[0] = this.adjacent[1]
  this.adjacent[1] = u
}

function GlueFacet(vertices, cell, index) {
  this.vertices = vertices
  this.cell = cell
  this.index = index
}

function compareGlue(a, b) {
  return compareCell(a.vertices, b.vertices)
}

function bakeOrient(d) {
  var code = ["function orient(){var tuple=this.tuple;return test("]
  for(var i=0; i<=d; ++i) {
    if(i > 0) {
      code.push(",")
    }
    code.push("tuple[", i, "]")
  }
  code.push(")}return orient")
  var proc = new Function("test", code.join(""))
  var test = orient[d+1]
  if(!test) {
    test = orient
  }
  return proc(test)
}

var BAKED = []

function Triangulation(dimension, vertices, simplices) {
  this.dimension = dimension
  this.vertices = vertices
  this.simplices = simplices
  this.interior = simplices.filter(function(c) {
    return !c.boundary
  })

  this.tuple = new Array(dimension+1)
  for(var i=0; i<=dimension; ++i) {
    this.tuple[i] = this.vertices[i]
  }

  var o = BAKED[dimension]
  if(!o) {
    o = BAKED[dimension] = bakeOrient(dimension)
  }
  this.orient = o
}

var proto = Triangulation.prototype

//Degenerate situation where we are on boundary, but coplanar to face
proto.handleBoundaryDegeneracy = function(cell, point) {
  var d = this.dimension
  var n = this.vertices.length - 1
  var tuple = this.tuple
  var verts = this.vertices

  //Dumb solution: Just do dfs from boundary cell until we find any peak, or terminate
  var toVisit = [ cell ]
  cell.lastVisited = -n
  while(toVisit.length > 0) {
    cell = toVisit.pop()
    var cellVerts = cell.vertices
    var cellAdj = cell.adjacent
    for(var i=0; i<=d; ++i) {
      var neighbor = cellAdj[i]
      if(!neighbor.boundary || neighbor.lastVisited <= -n) {
        continue
      }
      var nv = neighbor.vertices
      for(var j=0; j<=d; ++j) {
        var vv = nv[j]
        if(vv < 0) {
          tuple[j] = point
        } else {
          tuple[j] = verts[vv]
        }
      }
      var o = this.orient()
      if(o > 0) {
        return neighbor
      }
      neighbor.lastVisited = -n
      if(o === 0) {
        toVisit.push(neighbor)
      }
    }
  }
  return null
}

proto.walk = function(point, random) {
  //Alias local properties
  var n = this.vertices.length - 1
  var d = this.dimension
  var verts = this.vertices
  var tuple = this.tuple

  //Compute initial jump cell
  var initIndex = random ? (this.interior.length * Math.random())|0 : (this.interior.length-1)
  var cell = this.interior[ initIndex ]

  //Start walking
outerLoop:
  while(!cell.boundary) {
    var cellVerts = cell.vertices
    var cellAdj = cell.adjacent

    for(var i=0; i<=d; ++i) {
      tuple[i] = verts[cellVerts[i]]
    }
    cell.lastVisited = n

    //Find farthest adjacent cell
    for(var i=0; i<=d; ++i) {
      var neighbor = cellAdj[i]
      if(neighbor.lastVisited >= n) {
        continue
      }
      var prev = tuple[i]
      tuple[i] = point
      var o = this.orient()
      tuple[i] = prev
      if(o < 0) {
        cell = neighbor
        continue outerLoop
      } else {
        if(!neighbor.boundary) {
          neighbor.lastVisited = n
        } else {
          neighbor.lastVisited = -n
        }
      }
    }
    return
  }

  return cell
}

proto.addPeaks = function(point, cell) {
  var n = this.vertices.length - 1
  var d = this.dimension
  var verts = this.vertices
  var tuple = this.tuple
  var interior = this.interior
  var simplices = this.simplices

  //Walking finished at boundary, time to add peaks
  var tovisit = [ cell ]

  //Stretch initial boundary cell into a peak
  cell.lastVisited = n
  cell.vertices[cell.vertices.indexOf(-1)] = n
  cell.boundary = false
  interior.push(cell)

  //Record a list of all new boundaries created by added peaks so we can glue them together when we are all done
  var glueFacets = []

  //Do a traversal of the boundary walking outward from starting peak
  while(tovisit.length > 0) {
    //Pop off peak and walk over adjacent cells
    var cell = tovisit.pop()
    var cellVerts = cell.vertices
    var cellAdj = cell.adjacent
    var indexOfN = cellVerts.indexOf(n)
    if(indexOfN < 0) {
      continue
    }

    for(var i=0; i<=d; ++i) {
      if(i === indexOfN) {
        continue
      }

      //For each boundary neighbor of the cell
      var neighbor = cellAdj[i]
      if(!neighbor.boundary || neighbor.lastVisited >= n) {
        continue
      }

      var nv = neighbor.vertices

      //Test if neighbor is a peak
      if(neighbor.lastVisited !== -n) {      
        //Compute orientation of p relative to each boundary peak
        var indexOfNeg1 = 0
        for(var j=0; j<=d; ++j) {
          if(nv[j] < 0) {
            indexOfNeg1 = j
            tuple[j] = point
          } else {
            tuple[j] = verts[nv[j]]
          }
        }
        var o = this.orient()

        //Test if neighbor cell is also a peak
        if(o > 0) {
          nv[indexOfNeg1] = n
          neighbor.boundary = false
          interior.push(neighbor)
          tovisit.push(neighbor)
          neighbor.lastVisited = n
          continue
        } else {
          neighbor.lastVisited = -n
        }
      }

      var na = neighbor.adjacent

      //Otherwise, replace neighbor with new face
      var vverts = cellVerts.slice()
      var vadj = cellAdj.slice()
      var ncell = new Simplex(vverts, vadj, true)
      simplices.push(ncell)

      //Connect to neighbor
      var opposite = na.indexOf(cell)
      if(opposite < 0) {
        continue
      }
      na[opposite] = ncell
      vadj[indexOfN] = neighbor

      //Connect to cell
      vverts[i] = -1
      vadj[i] = cell
      cellAdj[i] = ncell

      //Flip facet
      ncell.flip()

      //Add to glue list
      for(var j=0; j<=d; ++j) {
        var uu = vverts[j]
        if(uu < 0 || uu === n) {
          continue
        }
        var nface = new Array(d-1)
        var nptr = 0
        for(var k=0; k<=d; ++k) {
          var vv = vverts[k]
          if(vv < 0 || k === j) {
            continue
          }
          nface[nptr++] = vv
        }
        glueFacets.push(new GlueFacet(nface, ncell, j))
      }
    }
  }

  //Glue boundary facets together
  glueFacets.sort(compareGlue)

  for(var i=0; i+1<glueFacets.length; i+=2) {
    var a = glueFacets[i]
    var b = glueFacets[i+1]
    var ai = a.index
    var bi = b.index
    if(ai < 0 || bi < 0) {
      continue
    }
    a.cell.adjacent[a.index] = b.cell
    b.cell.adjacent[b.index] = a.cell
  }
}

proto.insert = function(point, random) {
  //Add point
  var verts = this.vertices
  verts.push(point)

  var cell = this.walk(point, random)
  if(!cell) {
    return
  }

  //Alias local properties
  var d = this.dimension
  var tuple = this.tuple

  //Degenerate case: If point is coplanar to cell, then walk until we find a non-degenerate boundary
  for(var i=0; i<=d; ++i) {
    var vv = cell.vertices[i]
    if(vv < 0) {
      tuple[i] = point
    } else {
      tuple[i] = verts[vv]
    }
  }
  var o = this.orient(tuple)
  if(o < 0) {
    return
  } else if(o === 0) {
    cell = this.handleBoundaryDegeneracy(cell, point)
    if(!cell) {
      return
    }
  }

  //Add peaks
  this.addPeaks(point, cell)
}

//Extract all boundary cells
proto.boundary = function() {
  var d = this.dimension
  var boundary = []
  var cells = this.simplices
  var nc = cells.length
  for(var i=0; i<nc; ++i) {
    var c = cells[i]
    if(c.boundary) {
      var bcell = new Array(d)
      var cv = c.vertices
      var ptr = 0
      var parity = 0
      for(var j=0; j<=d; ++j) {
        if(cv[j] >= 0) {
          bcell[ptr++] = cv[j]
        } else {
          parity = j&1
        }
      }
      if(parity === (d&1)) {
        var t = bcell[0]
        bcell[0] = bcell[1]
        bcell[1] = t
      }
      boundary.push(bcell)
    }
  }
  return boundary
}

function incrementalConvexHull(points, randomSearch) {
  var n = points.length
  if(n === 0) {
    throw new Error("Must have at least d+1 points")
  }
  var d = points[0].length
  if(n <= d) {
    throw new Error("Must input at least d+1 points")
  }

  //FIXME: This could be degenerate, but need to select d+1 non-coplanar points to bootstrap process
  var initialSimplex = points.slice(0, d+1)

  //Make sure initial simplex is positively oriented
  var o = orient.apply(void 0, initialSimplex)
  if(o === 0) {
    throw new Error("Input not in general position")
  }
  var initialCoords = new Array(d+1)
  for(var i=0; i<=d; ++i) {
    initialCoords[i] = i
  }
  if(o < 0) {
    initialCoords[0] = 1
    initialCoords[1] = 0
  }

  //Create initial topological index, glue pointers together (kind of messy)
  var initialCell = new Simplex(initialCoords, new Array(d+1), false)
  var boundary = initialCell.adjacent
  var list = new Array(d+2)
  for(var i=0; i<=d; ++i) {
    var verts = initialCoords.slice()
    for(var j=0; j<=d; ++j) {
      if(j === i) {
        verts[j] = -1
      }
    }
    var t = verts[0]
    verts[0] = verts[1]
    verts[1] = t
    var cell = new Simplex(verts, new Array(d+1), true)
    boundary[i] = cell
    list[i] = cell
  }
  list[d+1] = initialCell
  for(var i=0; i<=d; ++i) {
    var verts = boundary[i].vertices
    var adj = boundary[i].adjacent
    for(var j=0; j<=d; ++j) {
      var v = verts[j]
      if(v < 0) {
        adj[j] = initialCell
        continue
      }
      for(var k=0; k<=d; ++k) {
        if(boundary[k].vertices.indexOf(v) < 0) {
          adj[j] = boundary[k]
        }
      }
    }
  }

  //Initialize triangles
  var triangles = new Triangulation(d, initialSimplex, list)

  //Insert remaining points
  var useRandom = !!randomSearch
  for(var i=d+1; i<n; ++i) {
    triangles.insert(points[i], useRandom)
  }
  
  //Extract boundary cells
  return triangles.boundary()
}
},{"robust-orientation":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/orientation.js","simplicial-complex":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/simplicial-complex/topology.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js"][0].apply(exports,arguments)
},{"two-product":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js","two-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/orientation.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/affine-hull/node_modules/robust-orientation/orientation.js"][0].apply(exports,arguments)
},{"robust-scale":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js","robust-subtract":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js","robust-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js","two-product":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/simplicial-complex/node_modules/bit-twiddle/twiddle.js":[function(require,module,exports){
/**
 * Bit twiddling hacks for JavaScript.
 *
 * Author: Mikola Lysenko
 *
 * Ported from Stanford bit twiddling hack library:
 *    http://graphics.stanford.edu/~seander/bithacks.html
 */

"use strict"; "use restrict";

//Number of bits in an integer
var INT_BITS = 32;

//Constants
exports.INT_BITS  = INT_BITS;
exports.INT_MAX   =  0x7fffffff;
exports.INT_MIN   = -1<<(INT_BITS-1);

//Returns -1, 0, +1 depending on sign of x
exports.sign = function(v) {
  return (v > 0) - (v < 0);
}

//Computes absolute value of integer
exports.abs = function(v) {
  var mask = v >> (INT_BITS-1);
  return (v ^ mask) - mask;
}

//Computes minimum of integers x and y
exports.min = function(x, y) {
  return y ^ ((x ^ y) & -(x < y));
}

//Computes maximum of integers x and y
exports.max = function(x, y) {
  return x ^ ((x ^ y) & -(x < y));
}

//Checks if a number is a power of two
exports.isPow2 = function(v) {
  return !(v & (v-1)) && (!!v);
}

//Computes log base 2 of v
exports.log2 = function(v) {
  var r, shift;
  r =     (v > 0xFFFF) << 4; v >>>= r;
  shift = (v > 0xFF  ) << 3; v >>>= shift; r |= shift;
  shift = (v > 0xF   ) << 2; v >>>= shift; r |= shift;
  shift = (v > 0x3   ) << 1; v >>>= shift; r |= shift;
  return r | (v >> 1);
}

//Computes log base 10 of v
exports.log10 = function(v) {
  return  (v >= 1000000000) ? 9 : (v >= 100000000) ? 8 : (v >= 10000000) ? 7 :
          (v >= 1000000) ? 6 : (v >= 100000) ? 5 : (v >= 10000) ? 4 :
          (v >= 1000) ? 3 : (v >= 100) ? 2 : (v >= 10) ? 1 : 0;
}

//Counts number of bits
exports.popCount = function(v) {
  v = v - ((v >>> 1) & 0x55555555);
  v = (v & 0x33333333) + ((v >>> 2) & 0x33333333);
  return ((v + (v >>> 4) & 0xF0F0F0F) * 0x1010101) >>> 24;
}

//Counts number of trailing zeros
function countTrailingZeros(v) {
  var c = 32;
  v &= -v;
  if (v) c--;
  if (v & 0x0000FFFF) c -= 16;
  if (v & 0x00FF00FF) c -= 8;
  if (v & 0x0F0F0F0F) c -= 4;
  if (v & 0x33333333) c -= 2;
  if (v & 0x55555555) c -= 1;
  return c;
}
exports.countTrailingZeros = countTrailingZeros;

//Rounds to next power of 2
exports.nextPow2 = function(v) {
  v += v === 0;
  --v;
  v |= v >>> 1;
  v |= v >>> 2;
  v |= v >>> 4;
  v |= v >>> 8;
  v |= v >>> 16;
  return v + 1;
}

//Rounds down to previous power of 2
exports.prevPow2 = function(v) {
  v |= v >>> 1;
  v |= v >>> 2;
  v |= v >>> 4;
  v |= v >>> 8;
  v |= v >>> 16;
  return v - (v>>>1);
}

//Computes parity of word
exports.parity = function(v) {
  v ^= v >>> 16;
  v ^= v >>> 8;
  v ^= v >>> 4;
  v &= 0xf;
  return (0x6996 >>> v) & 1;
}

var REVERSE_TABLE = new Array(256);

(function(tab) {
  for(var i=0; i<256; ++i) {
    var v = i, r = i, s = 7;
    for (v >>>= 1; v; v >>>= 1) {
      r <<= 1;
      r |= v & 1;
      --s;
    }
    tab[i] = (r << s) & 0xff;
  }
})(REVERSE_TABLE);

//Reverse bits in a 32 bit word
exports.reverse = function(v) {
  return  (REVERSE_TABLE[ v         & 0xff] << 24) |
          (REVERSE_TABLE[(v >>> 8)  & 0xff] << 16) |
          (REVERSE_TABLE[(v >>> 16) & 0xff] << 8)  |
           REVERSE_TABLE[(v >>> 24) & 0xff];
}

//Interleave bits of 2 coordinates with 16 bits.  Useful for fast quadtree codes
exports.interleave2 = function(x, y) {
  x &= 0xFFFF;
  x = (x | (x << 8)) & 0x00FF00FF;
  x = (x | (x << 4)) & 0x0F0F0F0F;
  x = (x | (x << 2)) & 0x33333333;
  x = (x | (x << 1)) & 0x55555555;

  y &= 0xFFFF;
  y = (y | (y << 8)) & 0x00FF00FF;
  y = (y | (y << 4)) & 0x0F0F0F0F;
  y = (y | (y << 2)) & 0x33333333;
  y = (y | (y << 1)) & 0x55555555;

  return x | (y << 1);
}

//Extracts the nth interleaved component
exports.deinterleave2 = function(v, n) {
  v = (v >>> n) & 0x55555555;
  v = (v | (v >>> 1))  & 0x33333333;
  v = (v | (v >>> 2))  & 0x0F0F0F0F;
  v = (v | (v >>> 4))  & 0x00FF00FF;
  v = (v | (v >>> 16)) & 0x000FFFF;
  return (v << 16) >> 16;
}


//Interleave bits of 3 coordinates, each with 10 bits.  Useful for fast octree codes
exports.interleave3 = function(x, y, z) {
  x &= 0x3FF;
  x  = (x | (x<<16)) & 4278190335;
  x  = (x | (x<<8))  & 251719695;
  x  = (x | (x<<4))  & 3272356035;
  x  = (x | (x<<2))  & 1227133513;

  y &= 0x3FF;
  y  = (y | (y<<16)) & 4278190335;
  y  = (y | (y<<8))  & 251719695;
  y  = (y | (y<<4))  & 3272356035;
  y  = (y | (y<<2))  & 1227133513;
  x |= (y << 1);
  
  z &= 0x3FF;
  z  = (z | (z<<16)) & 4278190335;
  z  = (z | (z<<8))  & 251719695;
  z  = (z | (z<<4))  & 3272356035;
  z  = (z | (z<<2))  & 1227133513;
  
  return x | (z << 2);
}

//Extracts nth interleaved component of a 3-tuple
exports.deinterleave3 = function(v, n) {
  v = (v >>> n)       & 1227133513;
  v = (v | (v>>>2))   & 3272356035;
  v = (v | (v>>>4))   & 251719695;
  v = (v | (v>>>8))   & 4278190335;
  v = (v | (v>>>16))  & 0x3FF;
  return (v<<22)>>22;
}

//Computes next combination in colexicographic order (this is mistakenly called nextPermutation on the bit twiddling hacks page)
exports.nextCombination = function(v) {
  var t = v | (v - 1);
  return (t + 1) | (((~t & -~t) - 1) >>> (countTrailingZeros(v) + 1));
}


},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/simplicial-complex/node_modules/union-find/index.js":[function(require,module,exports){
"use strict"; "use restrict";

module.exports = UnionFind;

function UnionFind(count) {
  this.roots = new Array(count);
  this.ranks = new Array(count);
  
  for(var i=0; i<count; ++i) {
    this.roots[i] = i;
    this.ranks[i] = 0;
  }
}

var proto = UnionFind.prototype

Object.defineProperty(proto, "length", {
  "get": function() {
    return this.roots.length
  }
})

proto.makeSet = function() {
  var n = this.roots.length;
  this.roots.push(n);
  this.ranks.push(0);
  return n;
}

proto.find = function(x) {
  var roots = this.roots;
  while(roots[x] !== x) {
    var y = roots[x];
    roots[x] = roots[y];
    x = y;
  }
  return x;
}

proto.link = function(x, y) {
  var xr = this.find(x)
    , yr = this.find(y);
  if(xr === yr) {
    return;
  }
  var ranks = this.ranks
    , roots = this.roots
    , xd    = ranks[xr]
    , yd    = ranks[yr];
  if(xd < yd) {
    roots[xr] = yr;
  } else if(yd < xd) {
    roots[yr] = xr;
  } else {
    roots[yr] = xr;
    ++ranks[xr];
  }
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/simplicial-complex/topology.js":[function(require,module,exports){
"use strict"; "use restrict";

var bits      = require("bit-twiddle")
  , UnionFind = require("union-find")

//Returns the dimension of a cell complex
function dimension(cells) {
  var d = 0
    , max = Math.max
  for(var i=0, il=cells.length; i<il; ++i) {
    d = max(d, cells[i].length)
  }
  return d-1
}
exports.dimension = dimension

//Counts the number of vertices in faces
function countVertices(cells) {
  var vc = -1
    , max = Math.max
  for(var i=0, il=cells.length; i<il; ++i) {
    var c = cells[i]
    for(var j=0, jl=c.length; j<jl; ++j) {
      vc = max(vc, c[j])
    }
  }
  return vc+1
}
exports.countVertices = countVertices

//Returns a deep copy of cells
function cloneCells(cells) {
  var ncells = new Array(cells.length)
  for(var i=0, il=cells.length; i<il; ++i) {
    ncells[i] = cells[i].slice(0)
  }
  return ncells
}
exports.cloneCells = cloneCells

//Ranks a pair of cells up to permutation
function compareCells(a, b) {
  var n = a.length
    , t = a.length - b.length
    , min = Math.min
  if(t) {
    return t
  }
  switch(n) {
    case 0:
      return 0;
    case 1:
      return a[0] - b[0];
    case 2:
      var d = a[0]+a[1]-b[0]-b[1]
      if(d) {
        return d
      }
      return min(a[0],a[1]) - min(b[0],b[1])
    case 3:
      var l1 = a[0]+a[1]
        , m1 = b[0]+b[1]
      d = l1+a[2] - (m1+b[2])
      if(d) {
        return d
      }
      var l0 = min(a[0], a[1])
        , m0 = min(b[0], b[1])
        , d  = min(l0, a[2]) - min(m0, b[2])
      if(d) {
        return d
      }
      return min(l0+a[2], l1) - min(m0+b[2], m1)
    
    //TODO: Maybe optimize n=4 as well?
    
    default:
      var as = a.slice(0)
      as.sort()
      var bs = b.slice(0)
      bs.sort()
      for(var i=0; i<n; ++i) {
        t = as[i] - bs[i]
        if(t) {
          return t
        }
      }
      return 0
  }
}
exports.compareCells = compareCells

function compareZipped(a, b) {
  return compareCells(a[0], b[0])
}

//Puts a cell complex into normal order for the purposes of findCell queries
function normalize(cells, attr) {
  if(attr) {
    var len = cells.length
    var zipped = new Array(len)
    for(var i=0; i<len; ++i) {
      zipped[i] = [cells[i], attr[i]]
    }
    zipped.sort(compareZipped)
    for(var i=0; i<len; ++i) {
      cells[i] = zipped[i][0]
      attr[i] = zipped[i][1]
    }
    return cells
  } else {
    cells.sort(compareCells)
    return cells
  }
}
exports.normalize = normalize

//Removes all duplicate cells in the complex
function unique(cells) {
  if(cells.length === 0) {
    return []
  }
  var ptr = 1
    , len = cells.length
  for(var i=1; i<len; ++i) {
    var a = cells[i]
    if(compareCells(a, cells[i-1])) {
      if(i === ptr) {
        ptr++
        continue
      }
      cells[ptr++] = a
    }
  }
  cells.length = ptr
  return cells
}
exports.unique = unique;

//Finds a cell in a normalized cell complex
function findCell(cells, c) {
  var lo = 0
    , hi = cells.length-1
    , r  = -1
  while (lo <= hi) {
    var mid = (lo + hi) >> 1
      , s   = compareCells(cells[mid], c)
    if(s <= 0) {
      if(s === 0) {
        r = mid
      }
      lo = mid + 1
    } else if(s > 0) {
      hi = mid - 1
    }
  }
  return r
}
exports.findCell = findCell;

//Builds an index for an n-cell.  This is more general than dual, but less efficient
function incidence(from_cells, to_cells) {
  var index = new Array(from_cells.length)
  for(var i=0, il=index.length; i<il; ++i) {
    index[i] = []
  }
  var b = []
  for(var i=0, n=to_cells.length; i<n; ++i) {
    var c = to_cells[i]
    var cl = c.length
    for(var k=1, kn=(1<<cl); k<kn; ++k) {
      b.length = bits.popCount(k)
      var l = 0
      for(var j=0; j<cl; ++j) {
        if(k & (1<<j)) {
          b[l++] = c[j]
        }
      }
      var idx=findCell(from_cells, b)
      if(idx < 0) {
        continue
      }
      while(true) {
        index[idx++].push(i)
        if(idx >= from_cells.length || compareCells(from_cells[idx], b) !== 0) {
          break
        }
      }
    }
  }
  return index
}
exports.incidence = incidence

//Computes the dual of the mesh.  This is basically an optimized version of buildIndex for the situation where from_cells is just the list of vertices
function dual(cells, vertex_count) {
  if(!vertex_count) {
    return incidence(unique(skeleton(cells, 0)), cells, 0)
  }
  var res = new Array(vertex_count)
  for(var i=0; i<vertex_count; ++i) {
    res[i] = []
  }
  for(var i=0, len=cells.length; i<len; ++i) {
    var c = cells[i]
    for(var j=0, cl=c.length; j<cl; ++j) {
      res[c[j]].push(i)
    }
  }
  return res
}
exports.dual = dual

//Enumerates all cells in the complex
function explode(cells) {
  var result = []
  for(var i=0, il=cells.length; i<il; ++i) {
    var c = cells[i]
      , cl = c.length|0
    for(var j=1, jl=(1<<cl); j<jl; ++j) {
      var b = []
      for(var k=0; k<cl; ++k) {
        if((j >>> k) & 1) {
          b.push(c[k])
        }
      }
      result.push(b)
    }
  }
  return normalize(result)
}
exports.explode = explode

//Enumerates all of the n-cells of a cell complex
function skeleton(cells, n) {
  if(n < 0) {
    return []
  }
  var result = []
    , k0     = (1<<(n+1))-1
  for(var i=0; i<cells.length; ++i) {
    var c = cells[i]
    for(var k=k0; k<(1<<c.length); k=bits.nextCombination(k)) {
      var b = new Array(n+1)
        , l = 0
      for(var j=0; j<c.length; ++j) {
        if(k & (1<<j)) {
          b[l++] = c[j]
        }
      }
      result.push(b)
    }
  }
  return normalize(result)
}
exports.skeleton = skeleton;

//Computes the boundary of all cells, does not remove duplicates
function boundary(cells) {
  var res = []
  for(var i=0,il=cells.length; i<il; ++i) {
    var c = cells[i]
    for(var j=0,cl=c.length; j<cl; ++j) {
      var b = new Array(c.length-1)
      for(var k=0, l=0; k<cl; ++k) {
        if(k !== j) {
          b[l++] = c[k]
        }
      }
      res.push(b)
    }
  }
  return normalize(res)
}
exports.boundary = boundary;

//Computes connected components for a dense cell complex
function connectedComponents_dense(cells, vertex_count) {
  var labels = new UnionFind(vertex_count)
  for(var i=0; i<cells.length; ++i) {
    var c = cells[i]
    for(var j=0; j<c.length; ++j) {
      for(var k=j+1; k<c.length; ++k) {
        labels.link(c[j], c[k])
      }
    }
  }
  var components = []
    , component_labels = labels.ranks
  for(var i=0; i<component_labels.length; ++i) {
    component_labels[i] = -1
  }
  for(var i=0; i<cells.length; ++i) {
    var l = labels.find(cells[i][0])
    if(component_labels[l] < 0) {
      component_labels[l] = components.length
      components.push([cells[i].slice(0)])
    } else {
      components[component_labels[l]].push(cells[i].slice(0))
    }
  }
  return components
}

//Computes connected components for a sparse graph
function connectedComponents_sparse(cells) {
  var vertices  = unique(normalize(skeleton(cells, 0)))
    , labels    = new UnionFind(vertices.length)
  for(var i=0; i<cells.length; ++i) {
    var c = cells[i]
    for(var j=0; j<c.length; ++j) {
      var vj = findCell(vertices, [c[j]])
      for(var k=j+1; k<c.length; ++k) {
        labels.link(vj, findCell(vertices, [c[k]]))
      }
    }
  }
  var components        = []
    , component_labels  = labels.ranks
  for(var i=0; i<component_labels.length; ++i) {
    component_labels[i] = -1
  }
  for(var i=0; i<cells.length; ++i) {
    var l = labels.find(findCell(vertices, [cells[i][0]]));
    if(component_labels[l] < 0) {
      component_labels[l] = components.length
      components.push([cells[i].slice(0)])
    } else {
      components[component_labels[l]].push(cells[i].slice(0))
    }
  }
  return components
}

//Computes connected components for a cell complex
function connectedComponents(cells, vertex_count) {
  if(vertex_count) {
    return connectedComponents_dense(cells, vertex_count)
  }
  return connectedComponents_sparse(cells)
}
exports.connectedComponents = connectedComponents

},{"bit-twiddle":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/simplicial-complex/node_modules/bit-twiddle/twiddle.js","union-find":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/simplicial-complex/node_modules/union-find/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/index.js":[function(require,module,exports){
'use strict'

module.exports = monotoneConvexHull2D

var orient = require('robust-orientation')[3]

function monotoneConvexHull2D(points) {
  var n = points.length

  if(n < 3) {
    var result = new Array(n)
    for(var i=0; i<n; ++i) {
      result[i] = i
    }

    if(n === 2 &&
       points[0][0] === points[1][0] &&
       points[0][1] === points[1][1]) {
      return [0]
    }

    return result
  }

  //Sort point indices along x-axis
  var sorted = new Array(n)
  for(var i=0; i<n; ++i) {
    sorted[i] = i
  }
  sorted.sort(function(a,b) {
    var d = points[a][0]-points[b][0]
    if(d) {
      return d
    }
    return points[a][1] - points[b][1]
  })

  //Construct upper and lower hulls
  var lower = [sorted[0], sorted[1]]
  var upper = [sorted[0], sorted[1]]

  for(var i=2; i<n; ++i) {
    var idx = sorted[i]
    var p   = points[idx]

    //Insert into lower list
    var m = lower.length
    while(m > 1 && orient(
        points[lower[m-2]], 
        points[lower[m-1]], 
        p) <= 0) {
      m -= 1
      lower.pop()
    }
    lower.push(idx)

    //Insert into upper list
    m = upper.length
    while(m > 1 && orient(
        points[upper[m-2]], 
        points[upper[m-1]], 
        p) >= 0) {
      m -= 1
      upper.pop()
    }
    upper.push(idx)
  }

  //Merge lists together
  var result = new Array(upper.length + lower.length - 2)
  var ptr    = 0
  for(var i=0, nl=lower.length; i<nl; ++i) {
    result[ptr++] = lower[i]
  }
  for(var j=upper.length-2; j>0; --j) {
    result[ptr++] = upper[j]
  }

  //Return result
  return result
}
},{"robust-orientation":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/orientation.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js"][0].apply(exports,arguments)
},{"two-product":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/two-product/two-product.js","two-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-scale/node_modules/two-sum/two-sum.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/two-product/two-product.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/node_modules/two-product/two-product.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/orientation.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/incremental-convex-hull/node_modules/robust-orientation/orientation.js"][0].apply(exports,arguments)
},{"robust-scale":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-scale/robust-scale.js","robust-subtract":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-subtract/robust-diff.js","robust-sum":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/robust-sum/robust-sum.js","two-product":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/convex-hull/node_modules/monotone-convex-hull-2d/node_modules/robust-orientation/node_modules/two-product/two-product.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/turf-meta/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-centroid/node_modules/turf-meta/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/turf-polygon/index.js":[function(require,module,exports){
/**
 * Takes an array of LinearRings and optionally an {@link Object} with properties and returns a GeoJSON {@link Polygon} feature.
 *
 * @module turf/polygon
 * @param {Array<Array<Number>>} rings an array of LinearRings
 * @param {Object} properties an optional properties object
 * @return {Polygon} a Polygon feature
 * @throws {Error} throw an error if a LinearRing of the polygon has too few positions
 * or if a LinearRing of the Polygon does not have matching Positions at the
 * beginning & end.
 * @example
 * var polygon = turf.polygon([[
 *  [-2.275543, 53.464547],
 *  [-2.275543, 53.489271],
 *  [-2.215118, 53.489271],
 *  [-2.215118, 53.464547],
 *  [-2.275543, 53.464547]
 * ]], { name: 'poly1', population: 400});
 *
 * //=polygon
 */
module.exports = function(coordinates, properties){

  if (coordinates === null) throw new Error('No coordinates passed');

  for (var i = 0; i < coordinates.length; i++) {
    var ring = coordinates[i];
    for (var j = 0; j < ring[ring.length - 1].length; j++) {
      if (ring.length < 4) {
        throw new Error('Each LinearRing of a Polygon must have 4 or more Positions.');
      }
      if (ring[ring.length - 1][j] !== ring[0][j]) {
        throw new Error('First and last Position are not equivalent.');
      }
    }
  }

  var polygon = {
    "type": "Feature",
    "geometry": {
      "type": "Polygon",
      "coordinates": coordinates
    },
    "properties": properties
  };

  if (!polygon.properties) {
    polygon.properties = {};
  }

  return polygon;
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-count/index.js":[function(require,module,exports){
var inside = require('turf-inside');

/**
 * Takes a {@link FeatureCollection} of {@link Point} features and a {@link FeatureCollection} of {@link Polygon} features and calculates the number of points that fall within the set of polygons.
 *
 * @module turf/count
 * @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {String} countField a field to append to the attributes of the Polygon features representing Point counts
 * @return {FeatureCollection} a FeatureCollection of Polygon features with `countField` appended
 * @example
 * var polygons = turf.featurecollection([
 *  turf.polygon([[
 *    [-112.072391,46.586591],
 *    [-112.072391,46.61761],
 *    [-112.028102,46.61761],
 *    [-112.028102,46.586591],
 *    [-112.072391,46.586591]
 *  ]]),
 *  turf.polygon([[
 *    [-112.023983,46.570426],
 *    [-112.023983,46.615016],
 *    [-111.966133,46.615016],
 *    [-111.966133,46.570426],
 *    [-112.023983,46.570426]
 *  ]])
 * ]);
 * var points = turf.featurecollection([
 *  turf.point([-112.0372, 46.608058], {population: 200}),
 *  turf.point([-112.045955, 46.596264],
 *    {population: 600})
 * ]);
 *
 * var counted = turf.count(polygons, points, 'pt_count');
 *
 * var result = turf.featurecollection(
 *   points.features.concat(counted.features));
 *
 * //=result
 */

module.exports = function(polyFC, ptFC, outField, done){
  for (var i = 0; i < polyFC.features.length; i++) {
    var poly = polyFC.features[i];
    if(!poly.properties) poly.properties = {};
    var values = 0;
    for (var j = 0; j < ptFC.features.length; j++) {
      var pt = ptFC.features[j];
      if (inside(pt, poly)) {
        values++;
      }
    }
    poly.properties[outField] = values;
  }

  return polyFC;
};

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-count/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-count/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html
var point = require('turf-point');

/**
 * Takes a {@link Point} feature and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.
 *
 * @module turf/destination
 * @param {Point} start a Point feature at the starting point
 * @param {Number} distance distance from the starting point
 * @param {Number} bearing ranging from -180 to 180
 * @param {String} units miles, kilometers, degrees, or radians
 * @returns {Point} a Point feature at the destination
 * @example
 * var point1 = turf.point([-75.343, 39.984]);
 * var distance = 50;
 * var bearing = 90;
 * var units = 'miles';
 *
 * var destination = turf.destination(point1, distance, bearing, units);
 * point1.properties['marker-color'] = '#0f0';
 * destination.properties['marker-color'] = '#f00';
 *
 * var result = turf.featurecollection([point1, destination]);
 *
 * //=result
 */
module.exports = function (point1, distance, bearing, units) {
    var coordinates1 = point1.geometry.coordinates;
    var longitude1 = toRad(coordinates1[0]);
    var latitude1 = toRad(coordinates1[1]);
    var bearing_rad = toRad(bearing);

    var R = 0;
    switch (units) {
    case 'miles':
        R = 3960;
        break
    case 'kilometers':
        R = 6373;
        break
    case 'degrees':
        R = 57.2957795;
        break
    case 'radians':
        R = 1;
        break
    }

    var latitude2 = Math.asin(Math.sin(latitude1) * Math.cos(distance / R) +
        Math.cos(latitude1) * Math.sin(distance / R) * Math.cos(bearing_rad));
    var longitude2 = longitude1 + Math.atan2(Math.sin(bearing_rad) * Math.sin(distance / R) * Math.cos(latitude1),
        Math.cos(distance / R) - Math.sin(latitude1) * Math.sin(latitude2));

    return point([toDeg(longitude2), toDeg(latitude2)]);
};

function toRad(degree) {
    return degree * Math.PI / 180;
}

function toDeg(rad) {
    return rad * 180 / Math.PI;
}

},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-deviation/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

/**
* Calculates the standard deviation value of a field for points within a set of polygons.
*
* @module turf/deviation
* @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
* @param {FeatureCollection} points a FeatureCollection of {@link Point} features
* @param {String} inField the field in `points` from which to aggregate
* @param {String} outField the field to append to `polygons` representing deviation
* @return {FeatureCollection} a FeatureCollection of Polygon features with appended field representing deviation
* @example
* var polygons = turf.featurecollection([
*   turf.polygon([[
*     [-97.807159, 30.270335],
*     [-97.807159, 30.369913],
*     [-97.612838, 30.369913],
*     [-97.612838, 30.270335],
*     [-97.807159, 30.270335]
*   ]]),
*   turf.polygon([[
*     [-97.825698, 30.175405],
*     [-97.825698, 30.264404],
*     [-97.630691, 30.264404],
*     [-97.630691, 30.175405],
*     [-97.825698, 30.175405]
*   ]])
* ]);
* var points = turf.featurecollection([
*   turf.point([-97.709655, 30.311245],
*     {population: 500}),
*   turf.point([-97.766647, 30.345028],
*     {population: 400}),
*   turf.point([-97.765274, 30.294646],
*     {population: 600}),
*   turf.point([-97.753601, 30.216355],
*     {population: 500}),
*   turf.point([-97.667083, 30.208047],
*   {population: 200})
* ]);
*
* var inField = 'population';
* var outField = 'pop_deviation';
*
* var deviated = turf.deviation(
*   polygons, points, inField, outField);
*
* var result = turf.featurecollection(
*   points.features.concat(deviated.features));
*
* //=result
*/

module.exports = function(polyFC, ptFC, inField, outField, done){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = ss.standard_deviation(values);
  })

  return polyFC;
}

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-deviation/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-deviation/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-deviation/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-deviation/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-distance/index.js":[function(require,module,exports){
var invariant = require('turf-invariant');
//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html

/**
 * Takes two {@link Point} features and calculates
 * the distance between them in degress, radians,
 * miles, or kilometers. This uses the
 * [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula)
 * to account for global curvature.
 *
 * @module turf/distance
 * @param {Feature} from origin point
 * @param {Feature} to destination point
 * @param {String} [units=kilometers] can be degrees, radians, miles, or kilometers
 * @return {Number} distance between the two points
 * @example
 * var point1 = turf.point([-75.343, 39.984]);
 * var point2 = turf.point([-75.534, 39.123]);
 * var units = 'miles';
 *
 * var points = turf.featurecollection([point1, point2]);
 *
 * //=points
 *
 * var distance = turf.distance(point1, point2, units);
 *
 * //=distance
 */
module.exports = function(point1, point2, units){
  invariant.featureOf(point1, 'Point', 'distance');
  invariant.featureOf(point2, 'Point', 'distance');
  var coordinates1 = point1.geometry.coordinates;
  var coordinates2 = point2.geometry.coordinates;

  var dLat = toRad(coordinates2[1] - coordinates1[1]);
  var dLon = toRad(coordinates2[0] - coordinates1[0]);
  var lat1 = toRad(coordinates1[1]);
  var lat2 = toRad(coordinates2[1]);
  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

  var R;
  switch(units){
    case 'miles':
      R = 3960;
      break;
    case 'kilometers':
      R = 6373;
      break;
    case 'degrees':
      R = 57.2957795;
      break;
    case 'radians':
      R = 1;
      break;
    case undefined:
      R = 6373;
      break;
    default:
      throw new Error('unknown option given to "units"');
  }

  var distance = R * c;
  return distance;
};

function toRad(degree) {
  return degree * Math.PI / 180;
}

},{"turf-invariant":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-distance/node_modules/turf-invariant/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-distance/node_modules/turf-invariant/index.js":[function(require,module,exports){
var isArray = require('is-array');

module.exports.geojsonType = geojsonType;
module.exports.collectionOf = collectionOf;
module.exports.featureOf = featureOf;

/**
 * Enforce expectations about types of GeoJSON objects for Turf.
 *
 * @alias geojsonType
 * @param {GeoJSON} value any GeoJSON object
 * @param {string} type expected GeoJSON type
 * @param {String} name name of calling function
 * @throws Error if value is not the expected type.
 */
function geojsonType(value, type, name) {
    if (!type || !name) throw new Error('type and name required');

    if (!value || value.type !== type) {
        throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + value.type);
    }
}

/**
 * Enforce expectations about types of {@link Feature} inputs for Turf.
 * Internally this uses {@link geojsonType} to judge geometry types.
 *
 * @alias featureOf
 * @param {Feature} feature a feature with an expected geometry type
 * @param {string} types expected GeoJSON type
 * @param {String} name name of calling function
 * @throws Error if value is not the expected type.
 */
function featureOf(value, type, name) {
    if (!name) throw new Error('.featureOf() requires a name');
    if (!value || value.type !== 'Feature' || !value.geometry) {
        throw new Error('Invalid input to ' + name + ', Feature with geometry required');
    }
    if (!value.geometry || value.geometry.type !== type) {
        throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + value.geometry.type);
    }
}

/**
 * Enforce expectations about types of {@link FeatureCollection} inputs for Turf.
 * Internally this uses {@link geojsonType} to judge geometry types.
 *
 * @alias collectionOf
 * @param {FeatureCollection} featurecollection a featurecollection for which features will be judged
 * @param {string} type expected GeoJSON type
 * @param {String} name name of calling function
 * @throws Error if value is not the expected type.
 */
function collectionOf(value, type, name) {
    if (!name) throw new Error('.collectionOf() requires a name');
    if (!value || value.type !== 'FeatureCollection') {
        throw new Error('Invalid input to ' + name + ', FeatureCollection required');
    }
    for (var i = 0; i < value.features.length; i++) {
        var feature = value.features[i];
        if (!feature || feature.type !== 'Feature' || !feature.geometry) {
            throw new Error('Invalid input to ' + name + ', Feature with geometry required');
        }
        if (!feature.geometry || feature.geometry.type !== type) {
            throw new Error('Invalid input to ' + name + ': must be a ' + type + ', given ' + feature.geometry.type);
        }
    }
}

},{"is-array":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/is-array/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/index.js":[function(require,module,exports){
var extent = require('turf-extent');
var bboxPolygon = require('turf-bbox-polygon');

/**
 * Takes a {@link Feature} or {@link FeatureCollection} and returns a rectangular {@link Polygon} feature that encompasses all vertices.
 *
 * @module turf/envelope
 * @param {FeatureCollection} fc a FeatureCollection of any type
 * @return {Polygon} a rectangular Polygon feature that encompasses all vertices
 * @example
 * var fc = turf.featurecollection([
 *  turf.point([-75.343, 39.984], {name: 'Location A'}),
 *  turf.point([-75.833, 39.284], {name: 'Location B'}),
 *  turf.point([-75.534, 39.123], {name: 'Location C'})
 * ]);
 *
 * var enveloped = turf.envelope(fc);
 *
 * var result = turf.featurecollection(
 * 	fc.features.concat(enveloped));
 *
 * //=result
 */

module.exports = function(features, done){
  var bbox = extent(features);
  var poly = bboxPolygon(bbox);
  return poly;
}

},{"turf-bbox-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-bbox-polygon/index.js","turf-extent":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-extent/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-bbox-polygon/index.js":[function(require,module,exports){
var polygon = require('turf-polygon');

module.exports = function(bbox){
  var lowLeft = [bbox[0], bbox[1]];
  var topLeft = [bbox[0], bbox[3]];
  var topRight = [bbox[2], bbox[3]];
  var lowRight = [bbox[2], bbox[1]];

  var poly = polygon([[
    lowLeft,
    lowRight,
    topRight,
    topLeft,
    lowLeft
  ]]);
  return poly;
}

},{"turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-bbox-polygon/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-bbox-polygon/node_modules/turf-polygon/index.js":[function(require,module,exports){
module.exports = function(coordinates, properties){
  if(coordinates === null) return new Error('No coordinates passed')
  var polygon = { 
    "type": "Feature",
    "geometry": {
      "type": "Polygon",
      "coordinates": coordinates
    },
    "properties": properties
  }

  if(!polygon.properties){
    polygon.properties = {}
  }
  
  return polygon
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-extent/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-extent/index.js"][0].apply(exports,arguments)
},{"flatten":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-extent/node_modules/flatten/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-extent/node_modules/flatten/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-center/node_modules/turf-extent/node_modules/flatten/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/index.js":[function(require,module,exports){
// depend on jsts for now https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html
var jsts = require('jsts');

/**
 * Finds the difference between two polygons by clipping the second
 * polygon from the first.
 *
 * @module turf/erase
 * @param {Polygon} poly1 input Polygon feaure
 * @param {Polygon} poly2 Polygon feature to erase from `poly1`
 * @return {Polygon} a Polygon feature showing the area of `poly1` excluding the area of `poly2`
 * @example
 * var poly1 = turf.polygon([[
 *  [-46.738586, -23.596711],
 *  [-46.738586, -23.458207],
 *  [-46.560058, -23.458207],
 *  [-46.560058, -23.596711],
 *  [-46.738586, -23.596711]
 * ]]);
 * poly1.properties.fill = '#0f0';
 * var poly2 = turf.polygon([[
 *  [-46.650009, -23.631314],
 *  [-46.650009, -23.5237],
 *  [-46.509246, -23.5237],
 *  [-46.509246, -23.631314],
 *  [-46.650009, -23.631314]
 * ]]);
 * poly2.properties.fill = '#00f';
 *
 * var erased = turf.erase(poly1, poly2);
 * erased.properties.fill = '#f00';
 *
 * var polygons = turf.featurecollection([poly1, poly2]);
 *
 * //=polygons
 *
 * //=erased
 */

module.exports = function(p1, p2, done){
  var poly1 = JSON.parse(JSON.stringify(p1));
  var poly2 = JSON.parse(JSON.stringify(p2));
  if(poly1.type !== 'Feature') {
    poly1 = {
      type: 'Feature',
      properties: {},
      geometry: poly1
    };
  }
  if(poly2.type !== 'Feature') {
    poly2 = {
      type: 'Feature',
      properties: {},
      geometry: poly2
    };
  }

  var reader = new jsts.io.GeoJSONReader();
  var a = reader.read(JSON.stringify(poly1.geometry));
  var b = reader.read(JSON.stringify(poly2.geometry));
  var erased = a.difference(b);
  var parser = new jsts.io.GeoJSONParser();
  erased = parser.write(erased);

  poly1.geometry = erased;

  if (poly1.geometry.type === 'GeometryCollection' && poly1.geometry.geometries.length === 0) {
    return;
  } else {
    return {
      type: 'Feature',
      properties: poly1.properties,
      geometry: erased
    };
  }
};

},{"jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/index.js"][0].apply(exports,arguments)
},{"./lib/jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/lib/jsts.js","javascript.util":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/node_modules/javascript.util/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/lib/jsts.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/lib/jsts.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js":[function(require,module,exports){
(function (global){
/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011-2014 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
;(function(){var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var t;c.length&&(t=c.shift());)c.length||void 0===b?d=d[t]?d[t]:d[t]={}:d[t]=b}function g(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.p=function(a,c,O){var M=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,M)}};function h(a){this.message=a||""}g(h,Error);f("javascript.util.EmptyStackException",h);h.prototype.name="EmptyStackException";function k(a){this.message=a||""}g(k,Error);f("javascript.util.IndexOutOfBoundsException",k);k.prototype.name="IndexOutOfBoundsException";function l(){}f("javascript.util.Iterator",l);l.prototype.hasNext=l.prototype.c;l.prototype.next=l.prototype.next;l.prototype.remove=l.prototype.remove;function m(){}f("javascript.util.Collection",m);function n(){}g(n,m);f("javascript.util.List",n);function p(){}f("javascript.util.Map",p);function q(a){this.message=a||""}g(q,Error);f("javascript.util.NoSuchElementException",q);q.prototype.name="NoSuchElementException";function r(a){this.message=a||""}g(r,Error);r.prototype.name="OperationNotSupported";function s(a){this.a=[];a instanceof m&&this.e(a)}g(s,n);f("javascript.util.ArrayList",s);s.prototype.a=null;s.prototype.add=function(a){this.a.push(a);return!0};s.prototype.add=s.prototype.add;s.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};s.prototype.addAll=s.prototype.e;s.prototype.set=function(a,b){var c=this.a[a];this.a[a]=b;return c};s.prototype.set=s.prototype.set;s.prototype.f=function(){return new u(this)};s.prototype.iterator=s.prototype.f;
s.prototype.get=function(a){if(0>a||a>=this.size())throw new k;return this.a[a]};s.prototype.get=s.prototype.get;s.prototype.g=function(){return 0===this.a.length};s.prototype.isEmpty=s.prototype.g;s.prototype.size=function(){return this.a.length};s.prototype.size=s.prototype.size;s.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};s.prototype.toArray=s.prototype.h;
s.prototype.remove=function(a){for(var b=!1,c=0,d=this.a.length;c<d;c++)if(this.a[c]===a){this.a.splice(c,1);b=!0;break}return b};s.prototype.remove=s.prototype.remove;function u(a){this.j=a}f("$jscomp.scope.Iterator_",u);u.prototype.j=null;u.prototype.b=0;u.prototype.next=function(){if(this.b===this.j.size())throw new q;return this.j.get(this.b++)};u.prototype.next=u.prototype.next;u.prototype.c=function(){return this.b<this.j.size()?!0:!1};u.prototype.hasNext=u.prototype.c;
u.prototype.remove=function(){throw new r;};u.prototype.remove=u.prototype.remove;function v(){}f("javascript.util.Arrays",v);
v.sort=function(){var a=arguments[0],b,c,d;if(1===arguments.length)a.sort();else if(2===arguments.length)c=arguments[1],d=function(a,b){return c.compare(a,b)},a.sort(d);else if(3===arguments.length)for(b=a.slice(arguments[1],arguments[2]),b.sort(),d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b]);else if(4===arguments.length)for(b=a.slice(arguments[1],arguments[2]),c=arguments[3],d=function(a,b){return c.compare(a,b)},b.sort(d),
d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b])};v.asList=function(a){for(var b=new s,c=0,d=a.length;c<d;c++)b.add(a[c]);return b};function w(){this.i={}}g(w,p);f("javascript.util.HashMap",w);w.prototype.i=null;w.prototype.get=function(a){return this.i[a]||null};w.prototype.get=w.prototype.get;w.prototype.put=function(a,b){return this.i[a]=b};w.prototype.put=w.prototype.put;w.prototype.m=function(){var a=new s,b;for(b in this.i)this.i.hasOwnProperty(b)&&a.add(this.i[b]);return a};w.prototype.values=w.prototype.m;w.prototype.size=function(){return this.m().size()};w.prototype.size=w.prototype.size;function x(){}g(x,m);f("javascript.util.Set",x);function y(a){this.a=[];a instanceof m&&this.e(a)}g(y,x);f("javascript.util.HashSet",y);y.prototype.a=null;y.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(this.a[b]===a)return!0;return!1};y.prototype.contains=y.prototype.contains;y.prototype.add=function(a){if(this.contains(a))return!1;this.a.push(a);return!0};y.prototype.add=y.prototype.add;y.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};y.prototype.addAll=y.prototype.e;
y.prototype.remove=function(){throw new r;};y.prototype.remove=y.prototype.remove;y.prototype.size=function(){return this.a.length};y.prototype.g=function(){return 0===this.a.length};y.prototype.isEmpty=y.prototype.g;y.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};y.prototype.toArray=y.prototype.h;y.prototype.f=function(){return new z(this)};y.prototype.iterator=y.prototype.f;function z(a){this.k=a}f("$jscomp.scope.Iterator_$1",z);z.prototype.k=null;
z.prototype.b=0;z.prototype.next=function(){if(this.b===this.k.size())throw new q;return this.k.a[this.b++]};z.prototype.next=z.prototype.next;z.prototype.c=function(){return this.b<this.k.size()?!0:!1};z.prototype.hasNext=z.prototype.c;z.prototype.remove=function(){throw new r;};z.prototype.remove=z.prototype.remove;function A(){}g(A,p);f("javascript.util.SortedMap",A);function B(){}g(B,x);f("javascript.util.SortedSet",B);function C(){this.a=[]}g(C,n);f("javascript.util.Stack",C);C.prototype.a=null;C.prototype.push=function(a){this.a.push(a);return a};C.prototype.push=C.prototype.push;C.prototype.pop=function(){if(0===this.a.length)throw new h;return this.a.pop()};C.prototype.pop=C.prototype.pop;C.prototype.o=function(){if(0===this.a.length)throw new h;return this.a[this.a.length-1]};C.prototype.peek=C.prototype.o;C.prototype.empty=function(){return 0===this.a.length?!0:!1};C.prototype.empty=C.prototype.empty;
C.prototype.g=function(){return this.empty()};C.prototype.isEmpty=C.prototype.g;C.prototype.search=function(a){return this.a.indexOf(a)};C.prototype.search=C.prototype.search;C.prototype.size=function(){return this.a.length};C.prototype.size=C.prototype.size;C.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};C.prototype.toArray=C.prototype.h;function D(a){return null==a?null:a.parent}function E(a,b){null!==a&&(a.color=b)}function F(a){return null==a?null:a.left}function G(a){return null==a?null:a.right}function H(){this.d=null;this.n=0}g(H,A);f("javascript.util.TreeMap",H);H.prototype.get=function(a){for(var b=this.d;null!==b;){var c=a.compareTo(b.key);if(0>c)b=b.left;else if(0<c)b=b.right;else return b.value}return null};H.prototype.get=H.prototype.get;
H.prototype.put=function(a,b){if(null===this.d)return this.d={key:a,value:b,left:null,right:null,parent:null,color:0},this.n=1,null;var c=this.d,d,t;do if(d=c,t=a.compareTo(c.key),0>t)c=c.left;else if(0<t)c=c.right;else return d=c.value,c.value=b,d;while(null!==c);c={key:a,left:null,right:null,value:b,parent:d,color:0};0>t?d.left=c:d.right=c;for(c.color=1;null!=c&&c!=this.d&&1==c.parent.color;)D(c)==F(D(D(c)))?(d=G(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==G(D(c))&&
(c=D(c),I(this,c)),E(D(c),0),E(D(D(c)),1),J(this,D(D(c))))):(d=F(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==F(D(c))&&(c=D(c),J(this,c)),E(D(c),0),E(D(D(c)),1),I(this,D(D(c)))));this.d.color=0;this.n++;return null};H.prototype.put=H.prototype.put;H.prototype.m=function(){var a=new s,b;b=this.d;if(null!=b)for(;null!=b.left;)b=b.left;if(null!==b)for(a.add(b.value);null!==(b=K(b));)a.add(b.value);return a};H.prototype.values=H.prototype.m;
function I(a,b){if(null!=b){var c=b.right;b.right=c.left;null!=c.left&&(c.left.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.left==b?b.parent.left=c:b.parent.right=c;c.left=b;b.parent=c}}function J(a,b){if(null!=b){var c=b.left;b.left=c.right;null!=c.right&&(c.right.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.right==b?b.parent.right=c:b.parent.left=c;c.right=b;b.parent=c}}
function K(a){if(null===a)return null;if(null!==a.right)for(var b=a.right;null!==b.left;)b=b.left;else for(b=a.parent;null!==b&&a===b.right;)a=b,b=b.parent;return b}H.prototype.size=function(){return this.n};H.prototype.size=H.prototype.size;function L(a){this.a=[];a instanceof m&&this.e(a)}g(L,B);f("javascript.util.TreeSet",L);L.prototype.a=null;L.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(0===this.a[b].compareTo(a))return!0;return!1};L.prototype.contains=L.prototype.contains;L.prototype.add=function(a){if(this.contains(a))return!1;for(var b=0,c=this.a.length;b<c;b++)if(1===this.a[b].compareTo(a))return this.a.splice(b,0,a),!0;this.a.push(a);return!0};L.prototype.add=L.prototype.add;
L.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};L.prototype.addAll=L.prototype.e;L.prototype.remove=function(){throw new r;};L.prototype.remove=L.prototype.remove;L.prototype.size=function(){return this.a.length};L.prototype.size=L.prototype.size;L.prototype.g=function(){return 0===this.a.length};L.prototype.isEmpty=L.prototype.g;L.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};L.prototype.toArray=L.prototype.h;L.prototype.f=function(){return new N(this)};
L.prototype.iterator=L.prototype.f;function N(a){this.l=a}f("$jscomp.scope.Iterator_$2",N);N.prototype.l=null;N.prototype.b=0;N.prototype.next=function(){if(this.b===this.l.size())throw new q;return this.l.a[this.b++]};N.prototype.next=N.prototype.next;N.prototype.c=function(){return this.b<this.l.size()?!0:!1};N.prototype.hasNext=N.prototype.c;N.prototype.remove=function(){throw new r;};N.prototype.remove=N.prototype.remove;"undefined"!==typeof global&&(global.javascript={},global.javascript.util={},global.javascript.util.ArrayList=s,global.javascript.util.Arrays=v,global.javascript.util.Collection=m,global.javascript.util.EmptyStackException=h,global.javascript.util.HashMap=w,global.javascript.util.HashSet=y,global.javascript.util.IndexOutOfBoundsException=k,global.javascript.util.Iterator=l,global.javascript.util.List=n,global.javascript.util.Map=p,global.javascript.util.NoSuchElementException=q,global.javascript.util.OperationNotSupported=
r,global.javascript.util.Set=x,global.javascript.util.SortedMap=A,global.javascript.util.SortedSet=B,global.javascript.util.Stack=C,global.javascript.util.TreeMap=H,global.javascript.util.TreeSet=L);}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/node_modules/javascript.util/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js"][0].apply(exports,arguments)
},{"./dist/javascript.util-node.min.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/index.js":[function(require,module,exports){
var featureCollection = require('turf-featurecollection');
var each = require('turf-meta').coordEach;
var point = require('turf-point');

/**
 * Takes any {@link GeoJSON} object and return all positions as
 * a {@link FeatureCollection} of {@link Point} features.
 *
 * @module turf/explode
 * @param {GeoJSON} input input features
 * @return {FeatureCollection} a FeatureCollection of {@link Point} features representing the exploded input features
 * @throws {Error} if it encounters an unknown geometry type
 * @example
 * var poly = {
 *   "type": "Feature",
 *   "properties": {},
 *   "geometry": {
 *     "type": "Polygon",
 *     "coordinates": [[
 *       [177.434692, -17.77517],
 *       [177.402076, -17.779093],
 *       [177.38079, -17.803937],
 *       [177.40242, -17.826164],
 *       [177.438468, -17.824857],
 *       [177.454948, -17.796746],
 *       [177.434692, -17.77517]
 *     ]]
 *   }
 * };
 *
 * var points = turf.explode(poly);
 *
 * //=poly
 *
 * //=points
 */
module.exports = function(layer) {
  var points = [];
  each(layer, function(coord) {
    points.push(point(coord));
  });
  return featureCollection(points);
};

},{"turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-featurecollection/index.js","turf-meta":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-meta/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-buffer/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-meta/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/turf-meta/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-extent/index.js":[function(require,module,exports){
var each = require('turf-meta').coordEach;

/**
 * Takes any {@link GeoJSON} object, calculates the extent of all input features, and returns a bounding box.
 *
 * @module turf/extent
 * @param {GeoJSON} input any valid GeoJSON Object
 * @return {Array<number>} the bounding box of `input` given
 * as an array in WSEN order (west, south, east, north)
 * @example
 * var input = turf.featurecollection([
 *  turf.point([114.175329, 22.2524]),
 *  turf.point([114.170007, 22.267969]),
 *  turf.point([114.200649, 22.274641]),
 *  turf.point([114.186744, 22.265745])
 * ]);
 *
 * var bbox = turf.extent(input);
 *
 * var bboxPolygon = turf.bboxPolygon(bbox);
 * bboxPolygon.properties.fill = '#00f';
 *
 * var result = turf.featurecollection(
 *  input.features.concat(bboxPolygon));
 *
 * //=result
 */
module.exports = function(layer) {
    var extent = [Infinity, Infinity, -Infinity, -Infinity];
    each(layer, function(coord) {
      if (extent[0] > coord[0]) extent[0] = coord[0];
      if (extent[1] > coord[1]) extent[1] = coord[1];
      if (extent[2] < coord[0]) extent[2] = coord[0];
      if (extent[3] < coord[1]) extent[3] = coord[1];
    });
    return extent;
};

},{"turf-meta":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-extent/node_modules/turf-meta/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-extent/node_modules/turf-meta/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-meta/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
/**
 * Takes one or more {@link Feature|Features} and creates a {@link FeatureCollection}
 *
 * @module turf/featurecollection
 * @param {Feature} features input Features
 * @returns {FeatureCollection} a FeatureCollection of input features
 * @example
 * var features = [
 *  turf.point([-75.343, 39.984], {name: 'Location A'}),
 *  turf.point([-75.833, 39.284], {name: 'Location B'}),
 *  turf.point([-75.534, 39.123], {name: 'Location C'})
 * ];
 *
 * var fc = turf.featurecollection(features);
 *
 * //=fc
 */
module.exports = function(features){
  return {
    type: "FeatureCollection",
    features: features
  };
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-filter/index.js":[function(require,module,exports){
var featureCollection = require('turf-featurecollection');

/**
 * Takes a {@link FeatureCollection} and filters it by a given property and value
 *
 * @module turf/filter
 * @param {FeatureCollection} features input FeatureCollection of any type
 * @param {String} key the property on which to filter
 * @param {String} value the value of that property on which to filter
 * @return {FeatureCollection} a filtered collection with only features that match input `key` and `value`
 * @example
 * var features = turf.featurecollection([
 *  turf.point([-72.581777, 44.260875], {species: 'oak'}),
 *  turf.point([-72.570018, 44.260691], {species: 'birch'}),
 *  turf.point([-72.576284, 44.257925], {species: 'oak'}),
 *  turf.point([-72.56916, 44.254605], {species: 'redwood'}),
 *  turf.point([-72.581691, 44.24858], {species: 'maple'}),
 *  turf.point([-72.583837, 44.255773], {species: 'oak'})
 * ]);
 *
 * var key = 'species';
 * var value = 'oak';
 *
 * var filtered = turf.filter(features, key, value);
 *
 * //=features
 *
 * //=filtered
 */
module.exports = function(collection, key, val) {
  var newFC = featureCollection([]);
  for(var i = 0; i < collection.features.length; i++) {
    if(collection.features[i].properties[key] === val) {
      newFC.features.push(collection.features[i]);
    }
  }
  return newFC;
};

},{"turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-filter/node_modules/turf-featurecollection/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-filter/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-explode/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-flip/index.js":[function(require,module,exports){
/**
 * Takes a {@link GeoJSON} object of any type and flips all of its coordinates
 * from `[x, y]` to `[y, x]`.
 *
 * @module turf/flip
 * @param {GeoJSON} input input GeoJSON object
 * @returns {GeoJSON} a GeoJSON object of the same type as `input` with flipped coordinates
 * @example
 * var saudiArabia = turf.point([20.566406, 43.421008]);
 *
 * //=saudiArabia
 *
 * var serbia = turf.flip(saudiArabia);
 *
 * //=serbia
 */
module.exports = flipAny;

function flipAny(_) {
    // ensure that we don't modify features in-place and changes to the
    // output do not change the previous feature, including changes to nested
    // properties.
    var input = JSON.parse(JSON.stringify(_));
    switch (input.type) {
        case 'FeatureCollection':
            for (var i = 0; i < input.features.length; i++)
                flipGeometry(input.features[i].geometry);
            return input;
        case 'Feature':
            flipGeometry(input.geometry);
            return input;
        default:
            flipGeometry(input);
            return input;
    }
}

function flipGeometry(geometry) {
    var coords = geometry.coordinates;
    switch(geometry.type) {
      case 'Point':
        flip0(coords);
        break;
      case 'LineString':
      case 'MultiPoint':
        flip1(coords);
        break;
      case 'Polygon':
      case 'MultiLineString':
        flip2(coords);
        break;
      case 'MultiPolygon':
        flip3(coords);
        break;
      case 'GeometryCollection':
        geometry.geometries.forEach(flipGeometry);
        break;
    }
}

function flip0(coord) {
    coord.reverse();
}

function flip1(coords) {
  for(var i = 0; i < coords.length; i++) coords[i].reverse();
}

function flip2(coords) {
  for(var i = 0; i < coords.length; i++)
    for(var j = 0; j < coords[i].length; j++) coords[i][j].reverse();
}

function flip3(coords) {
  for(var i = 0; i < coords.length; i++)
    for(var j = 0; j < coords[i].length; j++)
      for(var k = 0; k < coords[i][j].length; k++) coords[i][j][k].reverse();
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-grid/index.js":[function(require,module,exports){
var point = require('turf-point');

/**
 * Takes a bounding box and a cell depth and returns a {@link FeatureCollection} of {@link Point} features in a grid.
 *
 * @module turf/grid
 * @param {Array<number>} extent extent in [minX, minY, maxX, maxY] order
 * @param {Number} depth how many cells to output
 * @return {FeatureCollection} grid as FeatureCollection with {@link Point} features
 * @example
 * var extent = [-70.823364, -33.553984, -70.473175, -33.302986];
 * var depth = 10;
 *
 * var grid = turf.grid(extent, depth);
 *
 * //=grid
 */
module.exports = function(extents, depth) {
  var xmin = extents[0];
  var ymin = extents[1];
  var xmax = extents[2];
  var ymax = extents[3];
  var interval = (xmax - xmin) / depth;
  var coords = [];
  var fc = {
    type: 'FeatureCollection',
    features: []
  };

  for (var x=0; x<=depth; x++){
    for (var y=0;y<=depth; y++){
      fc.features.push(point([(x * interval) + xmin, (y * interval) + ymin]));
    }
  }
  return fc;
}

},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-grid/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-grid/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-hex/index.js":[function(require,module,exports){
var polygon = require('turf-polygon');

/**
 * Takes a bounding box and a cell size in degrees and returns a {@link FeatureCollection} of flat-topped
 * hexagons ({@link Polygon} features) aligned in an "odd-q" vertical grid as
 * described in [Hexagonal Grids](http://www.redblobgames.com/grids/hexagons/)
 *
 * @module turf/hex
 * @param {Array<number>} bbox bounding box in [minX, minY, maxX, maxY] order
 * @param {Number} size size of cells in degrees
 * @return {FeatureCollection} a FeatureCollection of hexagonal {@link Polygon} features in a grid
 * @example
 * var bbox = [7.2669410, 43.695307, 7.2862529, 43.706476];
 * var size = 0.001;
 *
 * var hexgrid = turf.hex(bbox, size);
 *
 * //=hexgrid
 */
module.exports = hexgrid;

//Precompute cosines and sines of angles used in hexagon creation
// for performance gain
var cosines = [];
var sines = [];
for (var i = 0; i < 6; i++) {
  var angle = 2 * Math.PI/6 * i;
  cosines.push(Math.cos(angle));
  sines.push(Math.sin(angle));
}

//Center should be [x, y]
function hexagon(center, radius) {
  var vertices = [];

  for (var i = 0; i < 6; i++) {
    var x = center[0] + radius * cosines[i];
    var y = center[1] + radius * sines[i];

    vertices.push([x,y]);
  }

  //first and last vertex must be the same
  vertices.push(vertices[0]);

  return polygon([vertices]);
}

function hexgrid(bbox, radius) {
  var xmin = bbox[0];
  var ymin = bbox[1];
  var xmax = bbox[2];
  var ymax = bbox[3];

  var fc = {
    type: 'FeatureCollection',
    features: []
  };

  var hex_width = radius * 2;
  var hex_height = Math.sqrt(3)/2 * hex_width;

  var box_width = xmax - xmin;
  var box_height = ymax - ymin;

  var x_interval = 3/4 * hex_width;
  var y_interval = hex_height;

  var x_span = box_width / (hex_width - radius/2);
  var x_count = Math.ceil(x_span);
  if (Math.round(x_span) === x_count) {
    x_count++;
  }

  var x_adjust = ((x_count * x_interval - radius/2) - box_width)/2 - radius/2;

  var y_count = Math.ceil(box_height / hex_height);

  var y_adjust = (box_height - y_count * hex_height)/2;

  var hasOffsetY = y_count * hex_height - box_height > hex_height/2;
  if (hasOffsetY) {
    y_adjust -= hex_height/4;
  }

  for (var x = 0; x < x_count; x++) {
    for (var y = 0; y <= y_count; y++) {

      var isOdd = x % 2 === 1;
      if (y === 0 && isOdd) {
        continue;
      }

      if (y === 0 && hasOffsetY) {
        continue;
      }

      var center_x = x * x_interval + xmin - x_adjust;
      var center_y = y * y_interval + ymin + y_adjust;

      if (isOdd) {
        center_y -= hex_height/2;
      }

      fc.features.push(hexagon([center_x, center_y], radius));
    }
  }

  return fc;
}

},{"turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-hex/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-hex/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-inside/index.js":[function(require,module,exports){
// http://en.wikipedia.org/wiki/Even%E2%80%93odd_rule
// modified from: https://github.com/substack/point-in-polygon/blob/master/index.js
// which was modified from http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html

/**
 * Takes a {@link Point} feature and a {@link Polygon} feature and determines if the Point resides inside the Polygon. The Polygon can
 * be convex or concave. The function accepts any valid Polygon or {@link MultiPolygon}
 * and accounts for holes.
 *
 * @module turf/inside
 * @param {Point} point a Point feature
 * @param {Polygon} polygon a Polygon feature
 * @return {Boolean} `true` if the Point is inside the Polygon; `false` if the Point is not inside the Polygon
 * @example
 * var pt1 = turf.point([-111.467285, 40.75766],
 *  {'marker-color': "#f00"});
 * var pt2 = turf.point([-111.873779, 40.647303],
 *  {'marker-color': "#0f0" });
 * var poly = turf.polygon([[
 *  [-112.074279, 40.52215],
 *  [-112.074279, 40.853293],
 *  [-111.610107, 40.853293],
 *  [-111.610107, 40.52215],
 *  [-112.074279, 40.52215]
 * ]]);
 * var features = turf.featurecollection([pt1, pt2, poly]);
 *
 * //=features
 *
 * var isInside1 = turf.inside(pt1, poly);
 * //=isInside1
 *
 * var isInside2 = turf.inside(pt2, poly);
 * //=isInside2
 */
module.exports = function(point, polygon) {
  var polys = polygon.geometry.coordinates;
  var pt = [point.geometry.coordinates[0], point.geometry.coordinates[1]];
  // normalize to multipolygon
  if(polygon.geometry.type === 'Polygon') polys = [polys];

  var insidePoly = false;
  var i = 0;
  while (i < polys.length && !insidePoly) {
    // check if it is in the outer ring first
    if(inRing(pt, polys[i][0])) {
      var inHole = false;
      var k = 1;
      // check for the point in any of the holes
      while(k < polys[i].length && !inHole) {
        if(inRing(pt, polys[i][k])) {
          inHole = true;
        }
        k++;
      }
      if(!inHole) insidePoly = true;
    }
    i++;
  }
  return insidePoly;
}

// pt is [x,y] and ring is [[x,y], [x,y],..]
function inRing (pt, ring) {
  var isInside = false;
  for (var i = 0, j = ring.length - 1; i < ring.length; j = i++) {
    var xi = ring[i][0], yi = ring[i][1];
    var xj = ring[j][0], yj = ring[j][1];
    
    var intersect = ((yi > pt[1]) != (yj > pt[1]))
        && (pt[0] < (xj - xi) * (pt[1] - yi) / (yj - yi) + xi);
    if (intersect) isInside = !isInside;
  }
  return isInside;
}


},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/index.js":[function(require,module,exports){
// depend on jsts for now https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html
var jsts = require('jsts');
var featurecollection = require('turf-featurecollection');

/**
 * Takes two {@link Polygon} features and finds their intersection.
 *
 * @module turf/intersect
 * @param {Polygon} poly1 the first Polygon
 * @param {Polygon} poly2 the second Polygon
 * @return {Polygon} a Polygon feature representing the area where `poly1` and `poly2` overlap
 * @example
 * var poly1 = turf.polygon([[
 *  [-122.801742, 45.48565],
 *  [-122.801742, 45.60491],
 *  [-122.584762, 45.60491],
 *  [-122.584762, 45.48565],
 *  [-122.801742, 45.48565]
 * ]]);
 * poly1.properties.fill = '#0f0';
 * var poly2 = turf.polygon([[
 *  [-122.520217, 45.535693],
 *  [-122.64038, 45.553967],
 *  [-122.720031, 45.526554],
 *  [-122.669906, 45.507309],
 *  [-122.723464, 45.446643],
 *  [-122.532577, 45.408574],
 *  [-122.487258, 45.477466],
 *  [-122.520217, 45.535693]
 * ]]);
 * poly2.properties.fill = '#00f';
 * var polygons = turf.featurecollection([poly1, poly2]);
 *
 * var intersection = turf.intersect(poly1, poly2);
 *
 * //=polygons
 *
 * //=intersection
 */
module.exports = function(poly1, poly2){
  var reader = new jsts.io.GeoJSONReader(),
    a = reader.read(JSON.stringify(poly1)),
    b = reader.read(JSON.stringify(poly2)),
    intersection = a.intersection(b),
    parser = new jsts.io.GeoJSONParser();

  intersection = parser.write(intersection);
  if(intersection.type === 'GeometryCollection' && intersection.geometries.length === 0) {
    return;
  } else {
    return {
      type: 'Feature',
      properties: {},
      geometry: intersection
    };
  }
};

},{"jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/turf-featurecollection/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/index.js"][0].apply(exports,arguments)
},{"./lib/jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/lib/jsts.js","javascript.util":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/node_modules/javascript.util/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/lib/jsts.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/lib/jsts.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js":[function(require,module,exports){
(function (global){
/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011-2014 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
;(function(){var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var t;c.length&&(t=c.shift());)c.length||void 0===b?d=d[t]?d[t]:d[t]={}:d[t]=b}function g(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.p=function(a,c,O){var M=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,M)}};function h(a){this.message=a||""}g(h,Error);f("javascript.util.EmptyStackException",h);h.prototype.name="EmptyStackException";function k(a){this.message=a||""}g(k,Error);f("javascript.util.IndexOutOfBoundsException",k);k.prototype.name="IndexOutOfBoundsException";function l(){}f("javascript.util.Iterator",l);l.prototype.hasNext=l.prototype.c;l.prototype.next=l.prototype.next;l.prototype.remove=l.prototype.remove;function m(){}f("javascript.util.Collection",m);function n(){}g(n,m);f("javascript.util.List",n);function p(){}f("javascript.util.Map",p);function q(a){this.message=a||""}g(q,Error);f("javascript.util.NoSuchElementException",q);q.prototype.name="NoSuchElementException";function r(a){this.message=a||""}g(r,Error);r.prototype.name="OperationNotSupported";function s(a){this.a=[];a instanceof m&&this.e(a)}g(s,n);f("javascript.util.ArrayList",s);s.prototype.a=null;s.prototype.add=function(a){this.a.push(a);return!0};s.prototype.add=s.prototype.add;s.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};s.prototype.addAll=s.prototype.e;s.prototype.set=function(a,b){var c=this.a[a];this.a[a]=b;return c};s.prototype.set=s.prototype.set;s.prototype.f=function(){return new u(this)};s.prototype.iterator=s.prototype.f;
s.prototype.get=function(a){if(0>a||a>=this.size())throw new k;return this.a[a]};s.prototype.get=s.prototype.get;s.prototype.g=function(){return 0===this.a.length};s.prototype.isEmpty=s.prototype.g;s.prototype.size=function(){return this.a.length};s.prototype.size=s.prototype.size;s.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};s.prototype.toArray=s.prototype.h;
s.prototype.remove=function(a){for(var b=!1,c=0,d=this.a.length;c<d;c++)if(this.a[c]===a){this.a.splice(c,1);b=!0;break}return b};s.prototype.remove=s.prototype.remove;function u(a){this.j=a}f("$jscomp.scope.Iterator_",u);u.prototype.j=null;u.prototype.b=0;u.prototype.next=function(){if(this.b===this.j.size())throw new q;return this.j.get(this.b++)};u.prototype.next=u.prototype.next;u.prototype.c=function(){return this.b<this.j.size()?!0:!1};u.prototype.hasNext=u.prototype.c;
u.prototype.remove=function(){throw new r;};u.prototype.remove=u.prototype.remove;function v(){}f("javascript.util.Arrays",v);
v.sort=function(){var a=arguments[0],b,c,d;if(1===arguments.length)a.sort();else if(2===arguments.length)c=arguments[1],d=function(a,b){return c.compare(a,b)},a.sort(d);else if(3===arguments.length)for(b=a.slice(arguments[1],arguments[2]),b.sort(),d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b]);else if(4===arguments.length)for(b=a.slice(arguments[1],arguments[2]),c=arguments[3],d=function(a,b){return c.compare(a,b)},b.sort(d),
d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b])};v.asList=function(a){for(var b=new s,c=0,d=a.length;c<d;c++)b.add(a[c]);return b};function w(){this.i={}}g(w,p);f("javascript.util.HashMap",w);w.prototype.i=null;w.prototype.get=function(a){return this.i[a]||null};w.prototype.get=w.prototype.get;w.prototype.put=function(a,b){return this.i[a]=b};w.prototype.put=w.prototype.put;w.prototype.m=function(){var a=new s,b;for(b in this.i)this.i.hasOwnProperty(b)&&a.add(this.i[b]);return a};w.prototype.values=w.prototype.m;w.prototype.size=function(){return this.m().size()};w.prototype.size=w.prototype.size;function x(){}g(x,m);f("javascript.util.Set",x);function y(a){this.a=[];a instanceof m&&this.e(a)}g(y,x);f("javascript.util.HashSet",y);y.prototype.a=null;y.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(this.a[b]===a)return!0;return!1};y.prototype.contains=y.prototype.contains;y.prototype.add=function(a){if(this.contains(a))return!1;this.a.push(a);return!0};y.prototype.add=y.prototype.add;y.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};y.prototype.addAll=y.prototype.e;
y.prototype.remove=function(){throw new r;};y.prototype.remove=y.prototype.remove;y.prototype.size=function(){return this.a.length};y.prototype.g=function(){return 0===this.a.length};y.prototype.isEmpty=y.prototype.g;y.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};y.prototype.toArray=y.prototype.h;y.prototype.f=function(){return new z(this)};y.prototype.iterator=y.prototype.f;function z(a){this.k=a}f("$jscomp.scope.Iterator_$1",z);z.prototype.k=null;
z.prototype.b=0;z.prototype.next=function(){if(this.b===this.k.size())throw new q;return this.k.a[this.b++]};z.prototype.next=z.prototype.next;z.prototype.c=function(){return this.b<this.k.size()?!0:!1};z.prototype.hasNext=z.prototype.c;z.prototype.remove=function(){throw new r;};z.prototype.remove=z.prototype.remove;function A(){}g(A,p);f("javascript.util.SortedMap",A);function B(){}g(B,x);f("javascript.util.SortedSet",B);function C(){this.a=[]}g(C,n);f("javascript.util.Stack",C);C.prototype.a=null;C.prototype.push=function(a){this.a.push(a);return a};C.prototype.push=C.prototype.push;C.prototype.pop=function(){if(0===this.a.length)throw new h;return this.a.pop()};C.prototype.pop=C.prototype.pop;C.prototype.o=function(){if(0===this.a.length)throw new h;return this.a[this.a.length-1]};C.prototype.peek=C.prototype.o;C.prototype.empty=function(){return 0===this.a.length?!0:!1};C.prototype.empty=C.prototype.empty;
C.prototype.g=function(){return this.empty()};C.prototype.isEmpty=C.prototype.g;C.prototype.search=function(a){return this.a.indexOf(a)};C.prototype.search=C.prototype.search;C.prototype.size=function(){return this.a.length};C.prototype.size=C.prototype.size;C.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};C.prototype.toArray=C.prototype.h;function D(a){return null==a?null:a.parent}function E(a,b){null!==a&&(a.color=b)}function F(a){return null==a?null:a.left}function G(a){return null==a?null:a.right}function H(){this.d=null;this.n=0}g(H,A);f("javascript.util.TreeMap",H);H.prototype.get=function(a){for(var b=this.d;null!==b;){var c=a.compareTo(b.key);if(0>c)b=b.left;else if(0<c)b=b.right;else return b.value}return null};H.prototype.get=H.prototype.get;
H.prototype.put=function(a,b){if(null===this.d)return this.d={key:a,value:b,left:null,right:null,parent:null,color:0},this.n=1,null;var c=this.d,d,t;do if(d=c,t=a.compareTo(c.key),0>t)c=c.left;else if(0<t)c=c.right;else return d=c.value,c.value=b,d;while(null!==c);c={key:a,left:null,right:null,value:b,parent:d,color:0};0>t?d.left=c:d.right=c;for(c.color=1;null!=c&&c!=this.d&&1==c.parent.color;)D(c)==F(D(D(c)))?(d=G(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==G(D(c))&&
(c=D(c),I(this,c)),E(D(c),0),E(D(D(c)),1),J(this,D(D(c))))):(d=F(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==F(D(c))&&(c=D(c),J(this,c)),E(D(c),0),E(D(D(c)),1),I(this,D(D(c)))));this.d.color=0;this.n++;return null};H.prototype.put=H.prototype.put;H.prototype.m=function(){var a=new s,b;b=this.d;if(null!=b)for(;null!=b.left;)b=b.left;if(null!==b)for(a.add(b.value);null!==(b=K(b));)a.add(b.value);return a};H.prototype.values=H.prototype.m;
function I(a,b){if(null!=b){var c=b.right;b.right=c.left;null!=c.left&&(c.left.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.left==b?b.parent.left=c:b.parent.right=c;c.left=b;b.parent=c}}function J(a,b){if(null!=b){var c=b.left;b.left=c.right;null!=c.right&&(c.right.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.right==b?b.parent.right=c:b.parent.left=c;c.right=b;b.parent=c}}
function K(a){if(null===a)return null;if(null!==a.right)for(var b=a.right;null!==b.left;)b=b.left;else for(b=a.parent;null!==b&&a===b.right;)a=b,b=b.parent;return b}H.prototype.size=function(){return this.n};H.prototype.size=H.prototype.size;function L(a){this.a=[];a instanceof m&&this.e(a)}g(L,B);f("javascript.util.TreeSet",L);L.prototype.a=null;L.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(0===this.a[b].compareTo(a))return!0;return!1};L.prototype.contains=L.prototype.contains;L.prototype.add=function(a){if(this.contains(a))return!1;for(var b=0,c=this.a.length;b<c;b++)if(1===this.a[b].compareTo(a))return this.a.splice(b,0,a),!0;this.a.push(a);return!0};L.prototype.add=L.prototype.add;
L.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};L.prototype.addAll=L.prototype.e;L.prototype.remove=function(){throw new r;};L.prototype.remove=L.prototype.remove;L.prototype.size=function(){return this.a.length};L.prototype.size=L.prototype.size;L.prototype.g=function(){return 0===this.a.length};L.prototype.isEmpty=L.prototype.g;L.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};L.prototype.toArray=L.prototype.h;L.prototype.f=function(){return new N(this)};
L.prototype.iterator=L.prototype.f;function N(a){this.l=a}f("$jscomp.scope.Iterator_$2",N);N.prototype.l=null;N.prototype.b=0;N.prototype.next=function(){if(this.b===this.l.size())throw new q;return this.l.a[this.b++]};N.prototype.next=N.prototype.next;N.prototype.c=function(){return this.b<this.l.size()?!0:!1};N.prototype.hasNext=N.prototype.c;N.prototype.remove=function(){throw new r;};N.prototype.remove=N.prototype.remove;"undefined"!==typeof global&&(global.javascript={},global.javascript.util={},global.javascript.util.ArrayList=s,global.javascript.util.Arrays=v,global.javascript.util.Collection=m,global.javascript.util.EmptyStackException=h,global.javascript.util.HashMap=w,global.javascript.util.HashSet=y,global.javascript.util.IndexOutOfBoundsException=k,global.javascript.util.Iterator=l,global.javascript.util.List=n,global.javascript.util.Map=p,global.javascript.util.NoSuchElementException=q,global.javascript.util.OperationNotSupported=
r,global.javascript.util.Set=x,global.javascript.util.SortedMap=A,global.javascript.util.SortedSet=B,global.javascript.util.Stack=C,global.javascript.util.TreeMap=H,global.javascript.util.TreeSet=L);}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/node_modules/javascript.util/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-erase/node_modules/jsts/node_modules/javascript.util/index.js"][0].apply(exports,arguments)
},{"./dist/javascript.util-node.min.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-filter/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/conrec.js":[function(require,module,exports){
/**
 * Copyright (c) 2010, Jason Davies.
 *
 * All rights reserved.  This code is based on Bradley White's Java version,
 * which is in turn based on Nicholas Yue's C++ version, which in turn is based
 * on Paul D. Bourke's original Fortran version.  See below for the respective
 * copyright notices.
 *
 * See http://local.wasp.uwa.edu.au/~pbourke/papers/conrec/ for the original
 * paper by Paul D. Bourke.
 *
 * The vector conversion code is based on http://apptree.net/conrec.htm by
 * Graham Cox.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of the <organization> nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * Copyright (c) 1996-1997 Nicholas Yue
 *
 * This software is copyrighted by Nicholas Yue. This code is based on Paul D.
 * Bourke's CONREC.F routine.
 *
 * The authors hereby grant permission to use, copy, and distribute this
 * software and its documentation for any purpose, provided that existing
 * copyright notices are retained in all copies and that this notice is
 * included verbatim in any distributions. Additionally, the authors grant
 * permission to modify this software and its documentation for any purpose,
 * provided that such modifications are not distributed without the explicit
 * consent of the authors and that existing copyright notices are retained in
 * all copies. Some of the algorithms implemented by this software are
 * patented, observe all applicable patent law.
 *
 * IN NO EVENT SHALL THE AUTHORS OR DISTRIBUTORS BE LIABLE TO ANY PARTY FOR
 * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT
 * OF THE USE OF THIS SOFTWARE, ITS DOCUMENTATION, OR ANY DERIVATIVES THEREOF,
 * EVEN IF THE AUTHORS HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * THE AUTHORS AND DISTRIBUTORS SPECIFICALLY DISCLAIM ANY WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.  THIS SOFTWARE IS
 * PROVIDED ON AN "AS IS" BASIS, AND THE AUTHORS AND DISTRIBUTORS HAVE NO
 * OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR
 * MODIFICATIONS.
 */
module.exports = Conrec;

var EPSILON = 1e-10;

function pointsEqual(a, b) {
  var x = a.x - b.x, y = a.y - b.y;
  return x * x + y * y < EPSILON;
}

function reverseList(list) {
  var pp = list.head;

  while (pp) {
    // swap prev/next pointers
    var temp = pp.next;
    pp.next = pp.prev;
    pp.prev = temp;

    // continue through the list
    pp = temp;
  }

  // swap head/tail pointers
  var temp = list.head;
  list.head = list.tail;
  list.tail = temp;
}

function ContourBuilder(level) {
  this.level = level;
  this.s = null;
  this.count = 0;
}
ContourBuilder.prototype.remove_seq = function(list) {
  // if list is the first item, static ptr s is updated
  if (list.prev) {
    list.prev.next = list.next;
  } else {
    this.s = list.next;
  }

  if (list.next) {
    list.next.prev = list.prev;
  }
  --this.count;
}
ContourBuilder.prototype.addSegment = function(a, b) {
  var ss = this.s;
  var ma = null;
  var mb = null;
  var prependA = false;
  var prependB = false;

  while (ss) {
    if (ma == null) {
      // no match for a yet
      if (pointsEqual(a, ss.head.p)) {
        ma = ss;
        prependA = true;
      } else if (pointsEqual(a, ss.tail.p)) {
        ma = ss;
      }
    }
    if (mb == null) {
      // no match for b yet
      if (pointsEqual(b, ss.head.p)) {
        mb = ss;
        prependB = true;
      } else if (pointsEqual(b, ss.tail.p)) {
        mb = ss;
      }
    }
    // if we matched both no need to continue searching
    if (mb != null && ma != null) {
      break;
    } else {
      ss = ss.next;
    }
  }

  // c is the case selector based on which of ma and/or mb are set
  var c = ((ma != null) ? 1 : 0) | ((mb != null) ? 2 : 0);

  switch(c) {
    case 0:   // both unmatched, add as new sequence
      var aa = {p: a, prev: null};
      var bb = {p: b, next: null};
      aa.next = bb;
      bb.prev = aa;

      // create sequence element and push onto head of main list. The order
      // of items in this list is unimportant
      ma = {head: aa, tail: bb, next: this.s, prev: null, closed: false};
      if (this.s) {
        this.s.prev = ma;
      }
      this.s = ma;

      ++this.count;    // not essential - tracks number of unmerged sequences
    break;

    case 1:   // a matched, b did not - thus b extends sequence ma
      var pp = {p: b};

      if (prependA) {
        pp.next = ma.head;
        pp.prev = null;
        ma.head.prev = pp;
        ma.head = pp;
      } else {
        pp.next = null;
        pp.prev = ma.tail;
        ma.tail.next = pp;
        ma.tail = pp;
      }
    break;

    case 2:   // b matched, a did not - thus a extends sequence mb
      var pp = {p: a};

      if (prependB) {
        pp.next = mb.head;
        pp.prev = null;
        mb.head.prev = pp;
        mb.head = pp;
      } else {
        pp.next = null;
        pp.prev = mb.tail;
        mb.tail.next = pp;
        mb.tail = pp;
      }
    break;

    case 3:   // both matched, can merge sequences
      // if the sequences are the same, do nothing, as we are simply closing this path (could set a flag)

      if (ma === mb) {
        var pp = {p: ma.tail.p, next: ma.head, prev: null};
        ma.head.prev = pp;
        ma.head = pp;
        ma.closed = true;
        break;
      }

      // there are 4 ways the sequence pair can be joined. The current setting of prependA and
      // prependB will tell us which type of join is needed. For head/head and tail/tail joins
      // one sequence needs to be reversed
      switch((prependA ? 1 : 0) | (prependB ? 2 : 0)) {
        case 0:   // tail-tail
          // reverse ma and append to mb
          reverseList(ma);
          // fall through to head/tail case
        case 1:   // head-tail
          // ma is appended to mb and ma discarded
          mb.tail.next = ma.head;
          ma.head.prev = mb.tail;
          mb.tail = ma.tail;

          //discard ma sequence record
          this.remove_seq(ma);
        break;

        case 3:   // head-head
          // reverse ma and append mb to it
          reverseList(ma);
          // fall through to tail/head case
        case 2:   // tail-head
          // mb is appended to ma and mb is discarded
          ma.tail.next = mb.head;
          mb.head.prev = ma.tail;
          ma.tail = mb.tail;

          //discard mb sequence record
          this.remove_seq(mb);
      break;
    }
  }
}

/**
 * Implements CONREC.
 *
 * @param {function} drawContour function for drawing contour.  Defaults to a
 *                               custom "contour builder", which populates the
 *                               contours property.
 */
function Conrec(drawContour) {
  if (!drawContour) {
    var c = this;
    c.contours = {};
    /**
     * drawContour - interface for implementing the user supplied method to
     * render the countours.
     *
     * Draws a line between the start and end coordinates.
     *
     * @param startX    - start coordinate for X
     * @param startY    - start coordinate for Y
     * @param endX      - end coordinate for X
     * @param endY      - end coordinate for Y
     * @param contourLevel - Contour level for line.
     */
    this.drawContour = function(startX, startY, endX, endY, contourLevel, k) {
      var cb = c.contours[k];
      if (!cb) {
        cb = c.contours[k] = new ContourBuilder(contourLevel);
      }
      cb.addSegment({x: startX, y: startY}, {x: endX, y: endY});
    }
    this.contourList = function() {
      var l = [];
      var a = c.contours;
      for (var k in a) {
        var s = a[k].s;
        var level = a[k].level;
        while (s) {
          var h = s.head;
          var l2 = [];
          l2.level = level;
          l2.k = k;
          while (h && h.p) {
            l2.push(h.p);
            h = h.next;
          }
          l.push(l2);
          s = s.next;
        }
      }
      l.sort(function(a, b) { return a.k - b.k });
      return l;
    }
  } else {
    this.drawContour = drawContour;
  }
  this.h  = new Array(5);
  this.sh = new Array(5);
  this.xh = new Array(5);
  this.yh = new Array(5);
}

/**
 * contour is a contouring subroutine for rectangularily spaced data
 *
 * It emits calls to a line drawing subroutine supplied by the user which
 * draws a contour map corresponding to real*4data on a randomly spaced
 * rectangular grid. The coordinates emitted are in the same units given in
 * the x() and y() arrays.
 *
 * Any number of contour levels may be specified but they must be in order of
 * increasing value.
 *
 *
 * @param {number[][]} d - matrix of data to contour
 * @param {number} ilb,iub,jlb,jub - index bounds of data matrix
 *
 *             The following two, one dimensional arrays (x and y) contain
 *             the horizontal and vertical coordinates of each sample points.
 * @param {number[]} x  - data matrix column coordinates
 * @param {number[]} y  - data matrix row coordinates
 * @param {number} nc   - number of contour levels
 * @param {number[]} z  - contour levels in increasing order.
 */
Conrec.prototype.contour = function(d, ilb, iub, jlb, jub, x, y, nc, z) {
  var h = this.h, sh = this.sh, xh = this.xh, yh = this.yh;
  var drawContour = this.drawContour;
  this.contours = {};

  /** private */
  var xsect = function(p1, p2){
    return (h[p2]*xh[p1]-h[p1]*xh[p2])/(h[p2]-h[p1]);
  }

  var ysect = function(p1, p2){
    return (h[p2]*yh[p1]-h[p1]*yh[p2])/(h[p2]-h[p1]);
  }
  var m1;
  var m2;
  var m3;
  var case_value;
  var dmin;
  var dmax;
  var x1 = 0.0;
  var x2 = 0.0;
  var y1 = 0.0;
  var y2 = 0.0;

  // The indexing of im and jm should be noted as it has to start from zero
  // unlike the fortran counter part
  var im = [0, 1, 1, 0];
  var jm = [0, 0, 1, 1];

  // Note that castab is arranged differently from the FORTRAN code because
  // Fortran and C/C++ arrays are transposed of each other, in this case
  // it is more tricky as castab is in 3 dimensions
  var castab = [
    [
      [0, 0, 8], [0, 2, 5], [7, 6, 9]
    ],
    [
      [0, 3, 4], [1, 3, 1], [4, 3, 0]
    ],
    [
      [9, 6, 7], [5, 2, 0], [8, 0, 0]
    ]
  ];

  for (var j=(jub-1);j>=jlb;j--) {
    for (var i=ilb;i<=iub-1;i++) {
      var temp1, temp2;
      temp1 = Math.min(d[i][j],d[i][j+1]);
      temp2 = Math.min(d[i+1][j],d[i+1][j+1]);
      dmin  = Math.min(temp1,temp2);
      temp1 = Math.max(d[i][j],d[i][j+1]);
      temp2 = Math.max(d[i+1][j],d[i+1][j+1]);
      dmax  = Math.max(temp1,temp2);

      if (dmax>=z[0]&&dmin<=z[nc-1]) {
        for (var k=0;k<nc;k++) {
          if (z[k]>=dmin&&z[k]<=dmax) {
            for (var m=4;m>=0;m--) {
              if (m>0) {
                // The indexing of im and jm should be noted as it has to
                // start from zero
                h[m] = d[i+im[m-1]][j+jm[m-1]]-z[k];
                xh[m] = x[i+im[m-1]];
                yh[m] = y[j+jm[m-1]];
              } else {
                h[0] = 0.25*(h[1]+h[2]+h[3]+h[4]);
                xh[0]=0.5*(x[i]+x[i+1]);
                yh[0]=0.5*(y[j]+y[j+1]);
              }
              if (h[m]>EPSILON) {
                sh[m] = 1;
              } else if (h[m]<-EPSILON) {
                sh[m] = -1;
              } else
                sh[m] = 0;
            }
            //
            // Note: at this stage the relative heights of the corners and the
            // centre are in the h array, and the corresponding coordinates are
            // in the xh and yh arrays. The centre of the box is indexed by 0
            // and the 4 corners by 1 to 4 as shown below.
            // Each triangle is then indexed by the parameter m, and the 3
            // vertices of each triangle are indexed by parameters m1,m2,and
            // m3.
            // It is assumed that the centre of the box is always vertex 2
            // though this isimportant only when all 3 vertices lie exactly on
            // the same contour level, in which case only the side of the box
            // is drawn.
            //
            //
            //      vertex 4 +-------------------+ vertex 3
            //               | \               / |
            //               |   \    m-3    /   |
            //               |     \       /     |
            //               |       \   /       |
            //               |  m=2    X   m=2   |       the centre is vertex 0
            //               |       /   \       |
            //               |     /       \     |
            //               |   /    m=1    \   |
            //               | /               \ |
            //      vertex 1 +-------------------+ vertex 2
            //
            //
            //
            //               Scan each triangle in the box
            //
            for (m=1;m<=4;m++) {
              m1 = m;
              m2 = 0;
              if (m!=4) {
                  m3 = m+1;
              } else {
                  m3 = 1;
              }
              case_value = castab[sh[m1]+1][sh[m2]+1][sh[m3]+1];
              if (case_value!=0) {
                switch (case_value) {
                  case 1: // Line between vertices 1 and 2
                    x1=xh[m1];
                    y1=yh[m1];
                    x2=xh[m2];
                    y2=yh[m2];
                    break;
                  case 2: // Line between vertices 2 and 3
                    x1=xh[m2];
                    y1=yh[m2];
                    x2=xh[m3];
                    y2=yh[m3];
                    break;
                  case 3: // Line between vertices 3 and 1
                    x1=xh[m3];
                    y1=yh[m3];
                    x2=xh[m1];
                    y2=yh[m1];
                    break;
                  case 4: // Line between vertex 1 and side 2-3
                    x1=xh[m1];
                    y1=yh[m1];
                    x2=xsect(m2,m3);
                    y2=ysect(m2,m3);
                    break;
                  case 5: // Line between vertex 2 and side 3-1
                    x1=xh[m2];
                    y1=yh[m2];
                    x2=xsect(m3,m1);
                    y2=ysect(m3,m1);
                    break;
                  case 6: //  Line between vertex 3 and side 1-2
                    x1=xh[m3];
                    y1=yh[m3];
                    x2=xsect(m1,m2);
                    y2=ysect(m1,m2);
                    break;
                  case 7: // Line between sides 1-2 and 2-3
                    x1=xsect(m1,m2);
                    y1=ysect(m1,m2);
                    x2=xsect(m2,m3);
                    y2=ysect(m2,m3);
                    break;
                  case 8: // Line between sides 2-3 and 3-1
                    x1=xsect(m2,m3);
                    y1=ysect(m2,m3);
                    x2=xsect(m3,m1);
                    y2=ysect(m3,m1);
                    break;
                  case 9: // Line between sides 3-1 and 1-2
                    x1=xsect(m3,m1);
                    y1=ysect(m3,m1);
                    x2=xsect(m1,m2);
                    y2=ysect(m1,m2);
                    break;
                  default:
                    break;
                }
                // Put your processing code here and comment out the printf
                //printf("%f %f %f %f %f\n",x1,y1,x2,y2,z[k]);
                drawContour(x1,y1,x2,y2,z[k],k);
              }
            }
          }
        }
      }
    }
  }
}


},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/index.js":[function(require,module,exports){
//https://github.com/jasondavies/conrec.js
//http://stackoverflow.com/questions/263305/drawing-a-topographical-map
var tin = require('turf-tin');
var inside = require('turf-inside');
var grid = require('turf-grid');
var extent = require('turf-extent');
var planepoint = require('turf-planepoint');
var featurecollection = require('turf-featurecollection');
var linestring = require('turf-linestring');
var polygon = require('turf-polygon');
var point = require('turf-point');
var square = require('turf-square');
var size = require('turf-size');
var Conrec = require('./conrec.js');

/**
 * Takes a {@link FeatureCollection} of {@link Point} features with z-values and an array of
 * value breaks and generates filled contour isobands.
 *
 * @module turf/isobands
 * @param {FeatureCollection} points a FeeatureCollection of {@link Point} features
 * @param {string} z the property name in `points` from which z-values will be pulled
 * @param {number} resolution resolution of the underlying grid
 * @param {Array<number>} breaks where to draw contours
 * @returns {FeatureCollection} a FeatureCollection of {@link Polygon} features representing isobands
 * @example
 * // create random points with random
 * // z-values in their properties
 * var points = turf.random('point', 100, {
 *   bbox: [0, 30, 20, 50]
 * });
 * for (var i = 0; i < points.features.length; i++) {
 *   points.features[i].properties.z = Math.random() * 10;
 * }
 * var breaks = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
 * var isolined = turf.isobands(points, 'z', 15, breaks);
 * //=isolined
 */
module.exports = function(points, z, resolution, breaks){
  var addEdgesResult = addEdges(points, z, resolution);

  var tinResult = tin(points, z);
  var extentBBox = extent(points);
  var squareBBox = square(extentBBox);
  var gridResult = grid(squareBBox, resolution);
  var data = [];

  gridResult.features.forEach(function(pt){
    tinResult.features.forEach(function(triangle){
      if (inside(pt, triangle)) {
        pt.properties = {};
        pt.properties[z] = planepoint(pt, triangle);
      }
    });
    if(!pt.properties){
      pt.properties = {};
      pt.properties[z] = -100;
    }
  });

  var depth = Math.sqrt(gridResult.features.length);
  for (var x=0; x<depth; x++){
    var xGroup = gridResult.features.slice(x * depth, (x + 1) * depth);
    var xFlat = [];
    xGroup.forEach(function(verticalPoint){
      if(verticalPoint.properties){
        xFlat.push(verticalPoint.properties[z]);
      } else{
        xFlat.push(0);
      }
    });
    data.push(xFlat);
  }
  var interval = (squareBBox[2] - squareBBox[0]) / depth;
  var xCoordinates = [];
  var yCoordinates = [];
  for (var x=0; x<depth; x++){
    xCoordinates.push(x * interval + squareBBox[0]);
    yCoordinates.push(x * interval + squareBBox[1]);
  }

  //change zero breaks to .01 to deal with bug in conrec algorithm
  breaks = breaks.map(function(num) {
    if(num === 0){
      return 0.01;
    }
    else{
      return num;
    }
  });
  //deduplicate breaks
  breaks = unique(breaks);

  var c = new Conrec();
  c.contour(data, 0, resolution, 0, resolution, xCoordinates, yCoordinates, breaks.length, breaks);
  var contourList = c.contourList();

  var fc = featurecollection([]);
  contourList.forEach(function(c){
    if(c.length > 2){
      var polyCoordinates = [];
      c.forEach(function(coord){
        polyCoordinates.push([coord.x, coord.y]);
      });
      polyCoordinates.push([c[0].x, c[0].y]);
      var poly = polygon([polyCoordinates]);
      poly.properties = {};
      poly.properties[z] = c.level;
      fc.features.push(poly);
    }
  });

  return fc;
};

function addEdges(points, z, resolution){
  var extentBBox = extent(points),
    sizeResult;

  var squareBBox = square(extentBBox);
  var sizeBBox = size(squareBBox, 0.35);

  var edgeDistance = sizeBBox[2] - sizeBBox[0];
  var extendDistance = edgeDistance / resolution;

  var xmin = sizeBBox[0];
  var ymin = sizeBBox[1];
  var xmax = sizeBBox[2];
  var ymax = sizeBBox[3];

  //left
  var left = [[xmin, ymin],[xmin, ymax]];
  for(var i = 0; i<=resolution; i++){
    var pt = point([xmin, ymin + (extendDistance * i)]);
    pt.properties = {};
    pt.properties[z] = -100;
    points.features.push(pt);
  }

  var i, pt;

  //bottom
  var bottom = [[xmin, ymin],[xmax, ymin]];
  for(i = 0; i<=resolution; i++){
    pt = point([xmin + (extendDistance * i), ymin]);
    pt.properties = {};
    pt.properties[z] = -100;
    points.features.push(pt);
  }

  //right
  var right = [[xmax, ymin],[xmax, ymax]];
  for(i = 0; i<=resolution; i++){
    pt = point([xmax, ymin + (extendDistance * i)]);
    pt.properties = {};
    pt.properties[z] = -100;
    points.features.push(pt);
  }

  //top
  var top = [[xmin, ymax],[xmax, ymax]];
  for(i = 0; i<=resolution; i++){
    pt = point([xmin + (extendDistance * i), ymax]);
    pt.properties = {};
    pt.properties[z] = -100;
    points.features.push(pt);
  }

  return points;
}

function unique(a) {
  return a.reduce(function(p, c) {
      if (p.indexOf(c) < 0) p.push(c);
      return p;
  }, []);
}

},{"./conrec.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/conrec.js","turf-extent":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-extent/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js","turf-grid":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-grid/index.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-inside/index.js","turf-linestring":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-linestring/index.js","turf-planepoint":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-planepoint/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-point/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-polygon/index.js","turf-size":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-size/index.js","turf-square":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/index.js","turf-tin":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-extent/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-extent/index.js"][0].apply(exports,arguments)
},{"flatten":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-extent/node_modules/flatten/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-extent/node_modules/flatten/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-envelope/node_modules/turf-extent/node_modules/flatten/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-grid/index.js":[function(require,module,exports){
var point = require('turf-point');

module.exports = function(extents, depth) {
  var xmin = extents[0];
  var ymin = extents[1];
  var xmax = extents[2];
  var ymax = extents[3];
  var interval = (xmax - xmin) / depth;
  var coords = [];
  var fc = {
    type: 'FeatureCollection',
    features: []
  };

  for (var x=0; x<=depth; x++){
    for (var y=0;y<=depth; y++){
      fc.features.push(point((x * interval) + xmin, (y * interval) + ymin));
    }
  }
  return fc;
}

},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-grid/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-grid/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-linestring/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-bezier/node_modules/turf-linestring/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-planepoint/index.js":[function(require,module,exports){
module.exports = function(point, triangle, done){
  var x = point.geometry.coordinates[0],
      y = point.geometry.coordinates[1],
      x1 = triangle.geometry.coordinates[0][0][0],
      y1 = triangle.geometry.coordinates[0][0][1],
      z1 = triangle.properties.a,
      x2 = triangle.geometry.coordinates[0][1][0],
      y2 = triangle.geometry.coordinates[0][1][1],
      z2 = triangle.properties.b,
      x3 = triangle.geometry.coordinates[0][2][0],
      y3 = triangle.geometry.coordinates[0][2][1],
      z3 = triangle.properties.c;

  var z = (z3 * (x-x1) * (y-y2) + z1 * (x-x2) * (y-y3) + z2 * (x-x3) * (y-y1)
      - z2 * (x-x1) * (y-y3) - z3 * (x-x2) * (y-y1) - z1 * (x-x3) * (y-y2)) /
      ((x-x1) * (y-y2) + (x-x2) * (y-y3) +(x-x3) * (y-y1) -
       (x-x1) * (y-y3) - (x-x2) * (y-y1) - (x-x3) * (y-y2));

  return z;
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-hex/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-size/index.js":[function(require,module,exports){
module.exports = function(bbox, factor){
  var currentXDistance = (bbox[2] - bbox[0]);
  var currentYDistance = (bbox[3] - bbox[1]);
  var newXDistance = currentXDistance * factor;
  var newYDistance = currentYDistance * factor;
  var xChange = newXDistance - currentXDistance;
  var yChange = newYDistance - currentYDistance;

  var lowX = bbox[0] - (xChange / 2);
  var lowY = bbox[1] - (yChange / 2);
  var highX = (xChange / 2) + bbox[2];
  var highY = (yChange / 2) + bbox[3];

  var sized = [lowX, lowY, highX, highY];
  return sized;
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/index.js":[function(require,module,exports){
var midpoint = require('turf-midpoint');
var point = require('turf-point');
var distance = require('turf-distance');

module.exports = function(bbox){
  var squareBbox = [0,0,0,0];
  var lowLeft = point(bbox[0], bbox[1]);
  var topLeft = point(bbox[0], bbox[3]);
  var topRight = point(bbox[2], bbox[3]);
  var lowRight = point(bbox[2], bbox[1]);

  var horizontalDistance = distance(lowLeft, lowRight, 'miles');
  var verticalDistance = distance(lowLeft, topLeft, 'miles');
  if(horizontalDistance >= verticalDistance){
    squareBbox[0] = bbox[0];
    squareBbox[2] = bbox[2];
    var verticalMidpoint = midpoint(lowLeft, topLeft);
    squareBbox[1] = verticalMidpoint.geometry.coordinates[1] - ((bbox[2] - bbox[0]) / 2);
    squareBbox[3] = verticalMidpoint.geometry.coordinates[1] + ((bbox[2] - bbox[0]) / 2);
    return squareBbox;
  }
  else {
    squareBbox[1] = bbox[1];
    squareBbox[3] = bbox[3];
    var horzontalMidpoint = midpoint(lowLeft, lowRight);
    squareBbox[0] = horzontalMidpoint.geometry.coordinates[0] - ((bbox[3] - bbox[1]) / 2);
    squareBbox[2] = horzontalMidpoint.geometry.coordinates[0] + ((bbox[3] - bbox[1]) / 2);
    return squareBbox;
  }
}


},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-distance/index.js","turf-midpoint":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-midpoint/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-distance/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Haversine_formula
//http://www.movable-type.co.uk/scripts/latlong.html

module.exports = function(point1, point2, units){
  var coordinates1 = point1.geometry.coordinates
  var coordinates2 = point2.geometry.coordinates

  var dLat = toRad(coordinates2[1] - coordinates1[1])
  var dLon = toRad(coordinates2[0] - coordinates1[0])
  var lat1 = toRad(coordinates1[1])
  var lat2 = toRad(coordinates2[1])
  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2)
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a))

  var R = 0
  switch(units){
    case 'miles':
      R = 3960
      break
    case 'kilometers':
      R = 6373
      break
    case 'degrees':
      R = 57.2957795
      break
    case 'radians':
      R = 1
      break
  }
  var distance = R * c
  return distance
}

function toRad(degree){
  return degree * Math.PI / 180
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-midpoint/index.js":[function(require,module,exports){
// http://cs.selu.edu/~rbyrd/math/midpoint/
// ((x1+x2)/2), ((y1+y2)/2)
var point = require('turf-point')

module.exports = function(point1, point2) {
  if(point1 === null || point2 === null || point1 && point2 === null){
    return new Error('Less than two points passed.')
  }

  var x1 = point1.geometry.coordinates[0];
  var x2 = point2.geometry.coordinates[0];
  var y1 = point1.geometry.coordinates[1];
  var y2 = point2.geometry.coordinates[1];

  var x3 = x1 + x2;
  var midX = x3/2;
  var y3 = y1 + y2;
  var midY = y3/2;

  var midpoint = point(midX, midY);

  return midpoint
}
},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js":[function(require,module,exports){
module.exports = function(x, y, properties){
  if(isNaN(x) || isNaN(y)) throw new Error('Invalid coordinates')
  return {
    type: "Feature",
    geometry: {
      type: "Point",
      coordinates: [x, y]
    },
    properties: properties || {}
  }
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-grid/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/index.js"][0].apply(exports,arguments)
},{"turf-nearest":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-nearest/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-point/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-nearest/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-tin/node_modules/turf-nearest/index.js"][0].apply(exports,arguments)
},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-nearest/node_modules/turf-distance/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-nearest/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/conrec.js":[function(require,module,exports){
/**
 * Copyright (c) 2010, Jason Davies.
 *
 * All rights reserved.  This code is based on Bradley White's Java version,
 * which is in turn based on Nicholas Yue's C++ version, which in turn is based
 * on Paul D. Bourke's original Fortran version.  See below for the respective
 * copyright notices.
 *
 * See http://local.wasp.uwa.edu.au/~pbourke/papers/conrec/ for the original
 * paper by Paul D. Bourke.
 *
 * The vector conversion code is based on http://apptree.net/conrec.htm by
 * Graham Cox.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of the <organization> nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * Copyright (c) 1996-1997 Nicholas Yue
 *
 * This software is copyrighted by Nicholas Yue. This code is based on Paul D.
 * Bourke's CONREC.F routine.
 *
 * The authors hereby grant permission to use, copy, and distribute this
 * software and its documentation for any purpose, provided that existing
 * copyright notices are retained in all copies and that this notice is
 * included verbatim in any distributions. Additionally, the authors grant
 * permission to modify this software and its documentation for any purpose,
 * provided that such modifications are not distributed without the explicit
 * consent of the authors and that existing copyright notices are retained in
 * all copies. Some of the algorithms implemented by this software are
 * patented, observe all applicable patent law.
 *
 * IN NO EVENT SHALL THE AUTHORS OR DISTRIBUTORS BE LIABLE TO ANY PARTY FOR
 * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT
 * OF THE USE OF THIS SOFTWARE, ITS DOCUMENTATION, OR ANY DERIVATIVES THEREOF,
 * EVEN IF THE AUTHORS HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * THE AUTHORS AND DISTRIBUTORS SPECIFICALLY DISCLAIM ANY WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.  THIS SOFTWARE IS
 * PROVIDED ON AN "AS IS" BASIS, AND THE AUTHORS AND DISTRIBUTORS HAVE NO
 * OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR
 * MODIFICATIONS.
 */


  module.exports = Conrec;

  var EPSILON = 1e-10;

  function pointsEqual(a, b) {
    var x = a.x - b.x, y = a.y - b.y;
    return x * x + y * y < EPSILON;
  }

  function reverseList(list) {
    var pp = list.head;

    while (pp) {
      // swap prev/next pointers
      var temp = pp.next;
      pp.next = pp.prev;
      pp.prev = temp;

      // continue through the list
      pp = temp;
    }

    // swap head/tail pointers
    var temp = list.head;
    list.head = list.tail;
    list.tail = temp;
  }

  function ContourBuilder(level) {
    this.level = level;
    this.s = null;
    this.count = 0;
  }
  ContourBuilder.prototype.remove_seq = function(list) {
    // if list is the first item, static ptr s is updated
    if (list.prev) {
      list.prev.next = list.next;
    } else {
      this.s = list.next;
    }

    if (list.next) {
      list.next.prev = list.prev;
    }
    --this.count;
  }
  ContourBuilder.prototype.addSegment = function(a, b) {
    var ss = this.s;
    var ma = null;
    var mb = null;
    var prependA = false;
    var prependB = false;

    while (ss) {
      if (ma == null) {
        // no match for a yet
        if (pointsEqual(a, ss.head.p)) {
          ma = ss;
          prependA = true;
        } else if (pointsEqual(a, ss.tail.p)) {
          ma = ss;
        }
      }
      if (mb == null) {
        // no match for b yet
        if (pointsEqual(b, ss.head.p)) {
          mb = ss;
          prependB = true;
        } else if (pointsEqual(b, ss.tail.p)) {
          mb = ss;
        }
      }
      // if we matched both no need to continue searching
      if (mb != null && ma != null) {
        break;
      } else {
        ss = ss.next;
      }
    }

    // c is the case selector based on which of ma and/or mb are set
    var c = ((ma != null) ? 1 : 0) | ((mb != null) ? 2 : 0);

    switch(c) {
      case 0:   // both unmatched, add as new sequence
        var aa = {p: a, prev: null};
        var bb = {p: b, next: null};
        aa.next = bb;
        bb.prev = aa;

        // create sequence element and push onto head of main list. The order
        // of items in this list is unimportant
        ma = {head: aa, tail: bb, next: this.s, prev: null, closed: false};
        if (this.s) {
          this.s.prev = ma;
        }
        this.s = ma;

        ++this.count;    // not essential - tracks number of unmerged sequences
      break;

      case 1:   // a matched, b did not - thus b extends sequence ma
        var pp = {p: b};

        if (prependA) {
          pp.next = ma.head;
          pp.prev = null;
          ma.head.prev = pp;
          ma.head = pp;
        } else {
          pp.next = null;
          pp.prev = ma.tail;
          ma.tail.next = pp;
          ma.tail = pp;
        }
      break;

      case 2:   // b matched, a did not - thus a extends sequence mb
        var pp = {p: a};

        if (prependB) {
          pp.next = mb.head;
          pp.prev = null;
          mb.head.prev = pp;
          mb.head = pp;
        } else {
          pp.next = null;
          pp.prev = mb.tail;
          mb.tail.next = pp;
          mb.tail = pp;
        }
      break;

      case 3:   // both matched, can merge sequences
        // if the sequences are the same, do nothing, as we are simply closing this path (could set a flag)

        if (ma === mb) {
          var pp = {p: ma.tail.p, next: ma.head, prev: null};
          ma.head.prev = pp;
          ma.head = pp;
          ma.closed = true;
          break;
        }

        // there are 4 ways the sequence pair can be joined. The current setting of prependA and
        // prependB will tell us which type of join is needed. For head/head and tail/tail joins
        // one sequence needs to be reversed
        switch((prependA ? 1 : 0) | (prependB ? 2 : 0)) {
          case 0:   // tail-tail
            // reverse ma and append to mb
            reverseList(ma);
            // fall through to head/tail case
          case 1:   // head-tail
            // ma is appended to mb and ma discarded
            mb.tail.next = ma.head;
            ma.head.prev = mb.tail;
            mb.tail = ma.tail;

            //discard ma sequence record
            this.remove_seq(ma);
          break;

          case 3:   // head-head
            // reverse ma and append mb to it
            reverseList(ma);
            // fall through to tail/head case
          case 2:   // tail-head
            // mb is appended to ma and mb is discarded
            ma.tail.next = mb.head;
            mb.head.prev = ma.tail;
            ma.tail = mb.tail;

            //discard mb sequence record
            this.remove_seq(mb);
        break;
      }
    }
  }

  /**
   * Implements CONREC.
   *
   * @param {function} drawContour function for drawing contour.  Defaults to a
   *                               custom "contour builder", which populates the
   *                               contours property.
   */
  function Conrec(drawContour) {
    if (!drawContour) {
      var c = this;
      c.contours = {};
      /**
       * drawContour - interface for implementing the user supplied method to
       * render the countours.
       *
       * Draws a line between the start and end coordinates.
       *
       * @param startX    - start coordinate for X
       * @param startY    - start coordinate for Y
       * @param endX      - end coordinate for X
       * @param endY      - end coordinate for Y
       * @param contourLevel - Contour level for line.
       */
      this.drawContour = function(startX, startY, endX, endY, contourLevel, k) {
        var cb = c.contours[k];
        if (!cb) {
          cb = c.contours[k] = new ContourBuilder(contourLevel);
        }
        cb.addSegment({x: startX, y: startY}, {x: endX, y: endY});
      }
      this.contourList = function() {
        var l = [];
        var a = c.contours;
        for (var k in a) {
          var s = a[k].s;
          var level = a[k].level;
          while (s) {
            var h = s.head;
            var l2 = [];
            l2.level = level;
            l2.k = k;
            while (h && h.p) {
              l2.push(h.p);
              h = h.next;
            }
            l.push(l2);
            s = s.next;
          }
        }
        l.sort(function(a, b) { return a.k - b.k });
        return l;
      }
    } else {
      this.drawContour = drawContour;
    }
    this.h  = new Array(5);
    this.sh = new Array(5);
    this.xh = new Array(5);
    this.yh = new Array(5);
  }

  /**
   * contour is a contouring subroutine for rectangularily spaced data
   *
   * It emits calls to a line drawing subroutine supplied by the user which
   * draws a contour map corresponding to real*4data on a randomly spaced
   * rectangular grid. The coordinates emitted are in the same units given in
   * the x() and y() arrays.
   *
   * Any number of contour levels may be specified but they must be in order of
   * increasing value.
   *
   *
   * @param {number[][]} d - matrix of data to contour
   * @param {number} ilb,iub,jlb,jub - index bounds of data matrix
   *
   *             The following two, one dimensional arrays (x and y) contain
   *             the horizontal and vertical coordinates of each sample points.
   * @param {number[]} x  - data matrix column coordinates
   * @param {number[]} y  - data matrix row coordinates
   * @param {number} nc   - number of contour levels
   * @param {number[]} z  - contour levels in increasing order.
   */
  Conrec.prototype.contour = function(d, ilb, iub, jlb, jub, x, y, nc, z) {
    var h = this.h, sh = this.sh, xh = this.xh, yh = this.yh;
    var drawContour = this.drawContour;
    this.contours = {};

    /** private */
    var xsect = function(p1, p2){
      return (h[p2]*xh[p1]-h[p1]*xh[p2])/(h[p2]-h[p1]);
    }

    var ysect = function(p1, p2){
      return (h[p2]*yh[p1]-h[p1]*yh[p2])/(h[p2]-h[p1]);
    }
    var m1;
    var m2;
    var m3;
    var case_value;
    var dmin;
    var dmax;
    var x1 = 0.0;
    var x2 = 0.0;
    var y1 = 0.0;
    var y2 = 0.0;

    // The indexing of im and jm should be noted as it has to start from zero
    // unlike the fortran counter part
    var im = [0, 1, 1, 0];
    var jm = [0, 0, 1, 1];

    // Note that castab is arranged differently from the FORTRAN code because
    // Fortran and C/C++ arrays are transposed of each other, in this case
    // it is more tricky as castab is in 3 dimensions
    var castab = [
      [
        [0, 0, 8], [0, 2, 5], [7, 6, 9]
      ],
      [
        [0, 3, 4], [1, 3, 1], [4, 3, 0]
      ],
      [
        [9, 6, 7], [5, 2, 0], [8, 0, 0]
      ]
    ];

    for (var j=(jub-1);j>=jlb;j--) {
      for (var i=ilb;i<=iub-1;i++) {
        var temp1, temp2;
        temp1 = Math.min(d[i][j],d[i][j+1]);
        temp2 = Math.min(d[i+1][j],d[i+1][j+1]);
        dmin  = Math.min(temp1,temp2);
        temp1 = Math.max(d[i][j],d[i][j+1]);
        temp2 = Math.max(d[i+1][j],d[i+1][j+1]);
        dmax  = Math.max(temp1,temp2);

        if (dmax>=z[0]&&dmin<=z[nc-1]) {
          for (var k=0;k<nc;k++) {
            if (z[k]>=dmin&&z[k]<=dmax) {
              for (var m=4;m>=0;m--) {
                if (m>0) {
                  // The indexing of im and jm should be noted as it has to
                  // start from zero
                  h[m] = d[i+im[m-1]][j+jm[m-1]]-z[k];
                  xh[m] = x[i+im[m-1]];
                  yh[m] = y[j+jm[m-1]];
                } else {
                  h[0] = 0.25*(h[1]+h[2]+h[3]+h[4]);
                  xh[0]=0.5*(x[i]+x[i+1]);
                  yh[0]=0.5*(y[j]+y[j+1]);
                }
                if (h[m]>EPSILON) {
                  sh[m] = 1;
                } else if (h[m]<-EPSILON) {
                  sh[m] = -1;
                } else
                  sh[m] = 0;
              }
              //
              // Note: at this stage the relative heights of the corners and the
              // centre are in the h array, and the corresponding coordinates are
              // in the xh and yh arrays. The centre of the box is indexed by 0
              // and the 4 corners by 1 to 4 as shown below.
              // Each triangle is then indexed by the parameter m, and the 3
              // vertices of each triangle are indexed by parameters m1,m2,and
              // m3.
              // It is assumed that the centre of the box is always vertex 2
              // though this isimportant only when all 3 vertices lie exactly on
              // the same contour level, in which case only the side of the box
              // is drawn.
              //
              //
              //      vertex 4 +-------------------+ vertex 3
              //               | \               / |
              //               |   \    m-3    /   |
              //               |     \       /     |
              //               |       \   /       |
              //               |  m=2    X   m=2   |       the centre is vertex 0
              //               |       /   \       |
              //               |     /       \     |
              //               |   /    m=1    \   |
              //               | /               \ |
              //      vertex 1 +-------------------+ vertex 2
              //
              //
              //
              //               Scan each triangle in the box
              //
              for (m=1;m<=4;m++) {
                m1 = m;
                m2 = 0;
                if (m!=4) {
                    m3 = m+1;
                } else {
                    m3 = 1;
                }
                case_value = castab[sh[m1]+1][sh[m2]+1][sh[m3]+1];
                if (case_value!=0) {
                  switch (case_value) {
                    case 1: // Line between vertices 1 and 2
                      x1=xh[m1];
                      y1=yh[m1];
                      x2=xh[m2];
                      y2=yh[m2];
                      break;
                    case 2: // Line between vertices 2 and 3
                      x1=xh[m2];
                      y1=yh[m2];
                      x2=xh[m3];
                      y2=yh[m3];
                      break;
                    case 3: // Line between vertices 3 and 1
                      x1=xh[m3];
                      y1=yh[m3];
                      x2=xh[m1];
                      y2=yh[m1];
                      break;
                    case 4: // Line between vertex 1 and side 2-3
                      x1=xh[m1];
                      y1=yh[m1];
                      x2=xsect(m2,m3);
                      y2=ysect(m2,m3);
                      break;
                    case 5: // Line between vertex 2 and side 3-1
                      x1=xh[m2];
                      y1=yh[m2];
                      x2=xsect(m3,m1);
                      y2=ysect(m3,m1);
                      break;
                    case 6: //  Line between vertex 3 and side 1-2
                      x1=xh[m3];
                      y1=yh[m3];
                      x2=xsect(m1,m2);
                      y2=ysect(m1,m2);
                      break;
                    case 7: // Line between sides 1-2 and 2-3
                      x1=xsect(m1,m2);
                      y1=ysect(m1,m2);
                      x2=xsect(m2,m3);
                      y2=ysect(m2,m3);
                      break;
                    case 8: // Line between sides 2-3 and 3-1
                      x1=xsect(m2,m3);
                      y1=ysect(m2,m3);
                      x2=xsect(m3,m1);
                      y2=ysect(m3,m1);
                      break;
                    case 9: // Line between sides 3-1 and 1-2
                      x1=xsect(m3,m1);
                      y1=ysect(m3,m1);
                      x2=xsect(m1,m2);
                      y2=ysect(m1,m2);
                      break;
                    default:
                      break;
                  }
                  // Put your processing code here and comment out the printf
                  //printf("%f %f %f %f %f\n",x1,y1,x2,y2,z[k]);
                  drawContour(x1,y1,x2,y2,z[k],k);
                }
              }
            }
          }
        }
      }
    }
  }

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/index.js":[function(require,module,exports){
//https://github.com/jasondavies/conrec.js
//http://stackoverflow.com/questions/263305/drawing-a-topographical-map
var tin = require('turf-tin');
var inside = require('turf-inside');
var grid = require('turf-grid');
var extent = require('turf-extent');
var planepoint = require('turf-planepoint');
var featurecollection = require('turf-featurecollection');
var linestring = require('turf-linestring');
var square = require('turf-square');
var Conrec = require('./conrec');

/**
 * Takes a {@link FeatureCollection} of {@link Point} features with z-values and an array of
 * value breaks and generates [isolines](http://en.wikipedia.org/wiki/Isoline).
 *
 * @module turf/isolines
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {string} z the property name in `points` from which z-values will be pulled
 * @param {number} resolution resolution of the underlying grid
 * @param {number[]} breaks where to draw contours
 * @returns {FeatureCollection} a FeatureCollection of {@link LineString} features representing isolines
 * @example
 * // create random points with random
 * // z-values in their properties
 * var points = turf.random('point', 100, {
 *   bbox: [0, 30, 20, 50]
 * });
 * for (var i = 0; i < points.features.length; i++) {
 *   points.features[i].properties.z = Math.random() * 10;
 * }
 * var breaks = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
 * var isolined = turf.isolines(points, 'z', 15, breaks);
 * //=isolined
 */
module.exports = function(points, z, resolution, breaks, done){
  var tinResult = tin(points, z);
  var extentBBox = extent(points);
  var squareBBox = square(extentBBox);
  var gridResult = grid(squareBBox, resolution);
  var data = [];

  for (var i = 0; i < gridResult.features.length; i++) {
    var pt = gridResult.features[i];
    for (var j = 0; j < tinResult.features.length; j++) {
      var triangle = tinResult.features[j];
      if (inside(pt, triangle)) {
        pt.properties = {};
        pt.properties[z] = planepoint(pt, triangle);
      }
    }
  }

  var depth = Math.sqrt(gridResult.features.length);
  for (var x=0; x<depth; x++){
    var xGroup = gridResult.features.slice(x * depth, (x + 1) * depth);
    var xFlat = [];
    xGroup.forEach(function(verticalPoint){
      if(verticalPoint.properties){
        xFlat.push(verticalPoint.properties[z]);
      } else{
        xFlat.push(0);
      }
    });
    data.push(xFlat);
  }
  var interval = (squareBBox[2] - squareBBox[0]) / depth;
  var xCoordinates = [];
  var yCoordinates = [];
  for (var x = 0; x < depth; x++) {
    xCoordinates.push(x * interval + squareBBox[0]);
    yCoordinates.push(x * interval + squareBBox[1]);
  }

  var c = new Conrec();
  c.contour(data, 0, resolution, 0, resolution, xCoordinates, yCoordinates, breaks.length, breaks);
  var contourList = c.contourList();

  var fc = featurecollection([]);
  contourList.forEach(function(c){
    if(c.length > 2){
      var polyCoordinates = [];
      c.forEach(function(coord){
        polyCoordinates.push([coord.x, coord.y]);
      });
      var poly = linestring(polyCoordinates);
      poly.properties = {};
      poly.properties[z] = c.level;

      fc.features.push(poly);
    }
  });

  return fc;
}




},{"./conrec":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/conrec.js","turf-extent":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-extent/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-featurecollection/index.js","turf-grid":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-grid/index.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-inside/index.js","turf-linestring":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-linestring/index.js","turf-planepoint":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-planepoint/index.js","turf-square":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/index.js","turf-tin":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-extent/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-extent/index.js"][0].apply(exports,arguments)
},{"flatten":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-extent/node_modules/flatten/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-extent/node_modules/flatten/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-extent/node_modules/flatten/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-grid/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-grid/index.js"][0].apply(exports,arguments)
},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-grid/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-grid/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-linestring/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-linestring/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-planepoint/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-planepoint/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/index.js"][0].apply(exports,arguments)
},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-distance/index.js","turf-midpoint":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-midpoint/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-midpoint/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-midpoint/index.js"][0].apply(exports,arguments)
},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-grid/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/index.js"][0].apply(exports,arguments)
},{"turf-nearest":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-nearest/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-point/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-nearest/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-nearest/index.js"][0].apply(exports,arguments)
},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-nearest/node_modules/turf-distance/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-nearest/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-tin/node_modules/turf-nearest/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-grid/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-jenks/index.js":[function(require,module,exports){
var ss = require('simple-statistics');

/**
* Takes a {@FeatureCollection} of any type and returns an array of the [Jenks Natural breaks](http://en.wikipedia.org/wiki/Jenks_natural_breaks_optimization)
* for a given property
* @module turf/jenks
* @param {FeatureCollection} input a FeatureCollection of any type
* @param {string} field the property in `input` on which to calculate Jenks natural breaks
* @param {number} numberOfBreaks number of classes in which to group the data
* @return {Array<number>} the break number for each class plus the minimum and maximum values
* @example
* var points = turf.featurecollection([
*   turf.point([49.859733, 40.400424], {population: 200}),
*   turf.point([49.83879, 40.401209], {population: 600}),
*   turf.point([49.817848, 40.376889], {population: 100}),
*   turf.point([49.840507, 40.386043], {population: 200}),
*   turf.point([49.854583, 40.37532], {population: 300})]);
*
* var breaks = turf.jenks(points, 'population', 3);
*
* //=breaks
*/
module.exports = function(fc, field, num){
  var vals = [];
  var breaks = [];

  fc.features.forEach(function(feature){
    if(feature.properties[field]!==undefined){
      vals.push(feature.properties[field]);
    }
  });
  breaks = ss.jenks(vals, num);

  return breaks;
};

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-jenks/node_modules/simple-statistics/src/simple_statistics.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-jenks/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/index.js":[function(require,module,exports){
/**
 * Takes a {@link Polygon} feature and returns a {@link FeatureCollection} of {@link Point} features at all self-intersections.
 *
 * @module turf/kinks
 * @param {Polygon} polygon a Polygon feature
 * @returns {FeatureCollection} a FeatureCollection of {@link Point} features representing self-intersections
 * @example
 * var poly = turf.polygon([[
 *  [-12.034835, 8.901183],
 *  [-12.060413, 8.899826],
 *  [-12.03638, 8.873199],
 *  [-12.059383, 8.871418],
 *  [-12.034835, 8.901183]
 * ]]);
 * 
 * var kinks = turf.kinks(poly);
 *
 * var result = turf.featurecollection(
 *  kinks.intersections.features.concat(poly));
 *
 * //=result
 */

var polygon = require('turf-polygon');
var point = require('turf-point');
var fc = require('turf-featurecollection');

module.exports = function(polyIn) {
  var poly;
  var results = {intersections: fc([]), fixed: null};
  if (polyIn.type === 'Feature') {
    poly = polyIn.geometry;
  } else {
    poly = polyIn;
  }
  var intersectionHash = {};
  poly.coordinates.forEach(function(ring1){
    poly.coordinates.forEach(function(ring2){
      for(var i = 0; i < ring1.length-1; i++) {
        for(var k = 0; k < ring2.length-1; k++) {
          var intersection = lineIntersects(ring1[i][0],ring1[i][1],ring1[i+1][0],ring1[i+1][1],
            ring2[k][0],ring2[k][1],ring2[k+1][0],ring2[k+1][1]);
          if(intersection) {
            results.intersections.features.push(point([intersection[0], intersection[1]]));
          }
        }
      }
    })
  })
  return results;
}


// modified from http://jsfiddle.net/justin_c_rounds/Gd2S2/light/
function lineIntersects(line1StartX, line1StartY, line1EndX, line1EndY, line2StartX, line2StartY, line2EndX, line2EndY) {
  // if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point
  var denominator, a, b, numerator1, numerator2, result = {
    x: null,
    y: null,
    onLine1: false,
    onLine2: false
  };
  denominator = ((line2EndY - line2StartY) * (line1EndX - line1StartX)) - ((line2EndX - line2StartX) * (line1EndY - line1StartY));
  if (denominator == 0) {
    if(result.x != null && result.y != null) {
      return result;
    } else {
      return false;
    }
  }
  a = line1StartY - line2StartY;
  b = line1StartX - line2StartX;
  numerator1 = ((line2EndX - line2StartX) * a) - ((line2EndY - line2StartY) * b);
  numerator2 = ((line1EndX - line1StartX) * a) - ((line1EndY - line1StartY) * b);
  a = numerator1 / denominator;
  b = numerator2 / denominator;

  // if we cast these lines infinitely in both directions, they intersect here:
  result.x = line1StartX + (a * (line1EndX - line1StartX));
  result.y = line1StartY + (a * (line1EndY - line1StartY));

  // if line1 is a segment and line2 is infinite, they intersect if:
  if (a > 0 && a < 1) {
    result.onLine1 = true;
  }
  // if line2 is a segment and line1 is infinite, they intersect if:
  if (b > 0 && b < 1) {
    result.onLine2 = true;
  }
  // if line1 and line2 are segments, they intersect if both of the above are true
  if(result.onLine1 && result.onLine2){
    return [result.x, result.y];
  }
  else {
    return false;
  }
}

},{"turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/node_modules/turf-featurecollection/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/node_modules/turf-point/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-kinks/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/index.js":[function(require,module,exports){
var distance = require('turf-distance');
var point = require('turf-point');

/**
 * Takes a {@link LineString} feature and measures its length in the specified units.
 *
 * @module turf/line-distance
 *
 * @param {LineString} Line to measure
 * @param {String} [units=miles] can be degrees, radians, miles, or kilometers
 * @return {Number} length of the LineString
 * @example
 * var line = turf.linestring([
 *   [-77.031669, 38.878605],
 *   [-77.029609, 38.881946],
 *   [-77.020339, 38.884084],
 *   [-77.025661, 38.885821],
 *   [-77.021884, 38.889563],
 *   [-77.019824, 38.892368]
 * ]);
 *
 * var length = turf.lineDistance(line, 'miles');
 *
 * //=length
 */

module.exports = function (line, units) {
  var coords;
  if(line.type === 'Feature') coords = line.geometry.coordinates;
  else if(line.type === 'LineString') coords = line.geometry.coordinates;
  else throw new Error('input must be a LineString Feature or Geometry');

  var travelled = 0;
  for(var i = 0; i < coords.length - 1; i++) {
    travelled += distance(point(coords[i]), point(coords[i+1]), units);
  }
  return travelled;
}

},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/node_modules/turf-distance/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-tin/node_modules/turf-nearest/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-linestring/index.js":[function(require,module,exports){
/**
 * Creates a {@link LineString} {@link Feature} based on a
 * coordinate array. Properties can be added optionally.
 *
 * @module turf/linestring
 * @param {Array<Array<Number>>} coordinates an array of Positions
 * @param {Object} properties an Object of key-value pairs to add as properties
 * @return {LineString} a LineString feature
 * @throws {Error} if no coordinates are passed
 * @example
 * var linestring1 = turf.linestring([
 *	[-21.964416, 64.148203],
 *	[-21.956176, 64.141316],
 *	[-21.93901, 64.135924],
 *	[-21.927337, 64.136673]
 * ]);
 * var linestring2 = turf.linestring([
 *	[-21.929054, 64.127985],
 *	[-21.912918, 64.134726],
 *	[-21.916007, 64.141016],
 * 	[-21.930084, 64.14446]
 * ], {name: 'line 1', distance: 145});
 *
 * //=linestring1
 *
 * //=linestring2
 */
module.exports = function(coordinates, properties){
  if (!coordinates) {
      throw new Error('No coordinates passed');
  }
  return {
    "type": "Feature",
    "geometry": {
      "type": "LineString",
      "coordinates": coordinates
    },
    "properties": properties || {}
  };
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-max/index.js":[function(require,module,exports){
var inside = require('turf-inside');

/**
 * Calculates the maximum value of a field for a set of {@link Point} features within a set of {@link Polygon} features.
 *
 * @module turf/max
 * @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {string} inField the field in input data to analyze
 * @param {string} outField the field in which to store results
 * @return {FeatureCollection} a FeatureCollection of {@link Polygon} features
 * with properties listed as `outField` values
 * @example
 * var polygons = turf.featurecollection([
 *   turf.polygon([[
 *     [101.551437, 3.150114],
 *     [101.551437, 3.250208],
 *     [101.742324, 3.250208],
 *     [101.742324, 3.150114],
 *     [101.551437, 3.150114]
 *   ]]),
 *   turf.polygon([[
 *     [101.659927, 3.011612],
 *     [101.659927, 3.143944],
 *     [101.913986, 3.143944],
 *     [101.913986, 3.011612],
 *     [101.659927, 3.011612]
 *   ]])
 * ]);
 * var points = turf.featurecollection([
 *   turf.point([101.56105, 3.213874], {population: 200}),
 *   turf.point([101.709365, 3.211817], {population: 600}),
 *   turf.point([101.645507, 3.169311], {population: 100}),
 *   turf.point([101.708679, 3.071266], {population: 200}),
 *   turf.point([101.826782, 3.081551], {population: 300})]);
 *
 * var aggregated = turf.max(
 *   polygons, points, 'population', 'max');
 *
 * var result = turf.featurecollection(
 *   points.features.concat(aggregated.features));
 *
 * //=result
 */
module.exports = function(polyFC, ptFC, inField, outField){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = max(values);
  });

  return polyFC;
}

function max(x) {
    var value;
    for (var i = 0; i < x.length; i++) {
        // On the first iteration of this loop, max is
        // undefined and is thus made the maximum element in the array
        if (x[i] > value || value === undefined) value = x[i];
    }
    return value;
}

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-max/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-max/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-median/index.js":[function(require,module,exports){
var inside = require('turf-inside');

/**
 * Calculates the median value of a field for a set of {@link Point} features within a set of {@link Polygon} features.
 *
 * @module turf/median
 * @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {string} inField the field in input data to analyze
 * @param {string} outField the field in which to store results
 * @return {FeatureCollection} a FeatureCollection of {@link Polygon} features
 * with properties listed as `outField` values
 * @example
 * var polygons = turf.featurecollection([
 *   turf.polygon([[
 *    [18.400039, -33.970697],
 *    [18.400039, -33.818518],
 *    [18.665771, -33.818518],
 *    [18.665771, -33.970697],
 *    [18.400039, -33.970697]
 *   ]]),
 *   turf.polygon([[
 *    [18.538742, -34.050383],
 *    [18.538742, -33.98721],
 *    [18.703536, -33.98721],
 *    [18.703536, -34.050383],
 *    [18.538742, -34.050383]
 *   ]])
 * ]);
 * var points = turf.featurecollection([
 *   turf.point([18.514022, -33.860152], {population: 200}),
 *   turf.point([18.48999, -33.926269], {population: 600}),
 *   turf.point([18.583374, -33.905755], {population: 100}),
 *   turf.point([18.591613, -34.024778], {population: 200}),
 *   turf.point([18.653411, -34.017949], {population: 300})
 * ]);
 * var medians = turf.median(
 *  polygons, points, 'population', 'median');
 *
 * var result = turf.featurecollection(
 *  medians.features.concat(points.features));
 *
 * //=result
 */
module.exports = function(polyFC, ptFC, inField, outField){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = median(values);
  });

  return polyFC;
};

function median(x) {
    // The median of an empty list is null
    if (x.length === 0) return null;

    // Sorting the array makes it easy to find the center, but
    // use `.slice()` to ensure the original array `x` is not modified
    var sorted = x.slice().sort(function (a, b) { return a - b; });

    // If the length of the list is odd, it's the central number
    if (sorted.length % 2 === 1) {
        return sorted[(sorted.length - 1) / 2];
    // Otherwise, the median is the average of the two numbers
    // at the center of the list
    } else {
        var a = sorted[(sorted.length / 2) - 1];
        var b = sorted[(sorted.length / 2)];
        return (a + b) / 2;
    }
}

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-median/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-median/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/index.js":[function(require,module,exports){
var clone = require('clone');
var union = require('turf-union');

/**
 * Takes a {@link FeatureCollection} of {@link Polygon} features and returns a single merged
 * polygon feature. If the input Polygon features are not contiguous, this function returns a {@link MultiPolygon} feature.
 * @module turf/merge
 * @param {FeatureCollection} fc a FeatureCollection of {@link Polygon} features
 * @return {Feature} a {@link Polygon} or {@link MultiPolygon} feature
 * @example
 * var polygons = turf.featurecollection([
 *  turf.polygon([[
 *    [9.994812, 53.549487],
 *    [10.046997, 53.598209],
 *    [10.117721, 53.531737],
 *    [9.994812, 53.549487]
 *  ]], { fill: '#0f0' }),
 *  turf.polygon([[
 *    [10.000991, 53.50418],
 *    [10.03807, 53.562539],
 *    [9.926834, 53.551731],
 *    [10.000991, 53.50418]
 *  ]], { fill: '#00f' })
 * ]);
 *
 * var merged = turf.merge(polygons);
 *
 * //=polygons
 *
 * //=merged
 */
module.exports = function(polygons, done){

  var merged = clone(polygons.features[0]),
    features = polygons.features;

  for (var i = 0, len = features.length; i < len; i++) {
    var poly = features[i];

    if(poly.geometry){
      merged = union(merged, poly);
    }
  }

  return merged;
};

},{"clone":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/clone/clone.js","turf-union":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/clone/clone.js":[function(require,module,exports){
(function (Buffer){
'use strict';

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

// shim for Node's 'util' package
// DO NOT REMOVE THIS! It is required for compatibility with EnderJS (http://enderjs.com/).
var util = {
  isArray: function (ar) {
    return Array.isArray(ar) || (typeof ar === 'object' && objectToString(ar) === '[object Array]');
  },
  isDate: function (d) {
    return typeof d === 'object' && objectToString(d) === '[object Date]';
  },
  isRegExp: function (re) {
    return typeof re === 'object' && objectToString(re) === '[object RegExp]';
  },
  getRegExpFlags: function (re) {
    var flags = '';
    re.global && (flags += 'g');
    re.ignoreCase && (flags += 'i');
    re.multiline && (flags += 'm');
    return flags;
  }
};


if (typeof module === 'object')
  module.exports = clone;

/**
 * Clones (copies) an Object using deep copying.
 *
 * This function supports circular references by default, but if you are certain
 * there are no circular references in your object, you can save some CPU time
 * by calling clone(obj, false).
 *
 * Caution: if `circular` is false and `parent` contains circular references,
 * your program may enter an infinite loop and crash.
 *
 * @param `parent` - the object to be cloned
 * @param `circular` - set to true if the object to be cloned may contain
 *    circular references. (optional - true by default)
 * @param `depth` - set to a number if the object is only to be cloned to
 *    a particular depth. (optional - defaults to Infinity)
 * @param `prototype` - sets the prototype to be used when cloning an object.
 *    (optional - defaults to parent prototype).
*/

function clone(parent, circular, depth, prototype) {
  // maintain two arrays for circular references, where corresponding parents
  // and children have the same index
  var allParents = [];
  var allChildren = [];

  var useBuffer = typeof Buffer != 'undefined';

  if (typeof circular == 'undefined')
    circular = true;

  if (typeof depth == 'undefined')
    depth = Infinity;

  // recurse this function so we don't reset allParents and allChildren
  function _clone(parent, depth) {
    // cloning null always returns null
    if (parent === null)
      return null;

    if (depth == 0)
      return parent;

    var child;
    var proto;
    if (typeof parent != 'object') {
      return parent;
    }

    if (util.isArray(parent)) {
      child = [];
    } else if (util.isRegExp(parent)) {
      child = new RegExp(parent.source, util.getRegExpFlags(parent));
      if (parent.lastIndex) child.lastIndex = parent.lastIndex;
    } else if (util.isDate(parent)) {
      child = new Date(parent.getTime());
    } else if (useBuffer && Buffer.isBuffer(parent)) {
      child = new Buffer(parent.length);
      parent.copy(child);
      return child;
    } else {
      if (typeof prototype == 'undefined') {
        proto = Object.getPrototypeOf(parent);
        child = Object.create(proto);
      }
      else {
        child = Object.create(prototype);
        proto = prototype;
      }
    }

    if (circular) {
      var index = allParents.indexOf(parent);

      if (index != -1) {
        return allChildren[index];
      }
      allParents.push(parent);
      allChildren.push(child);
    }

    for (var i in parent) {
      var attrs;
      if (proto) {
        attrs = Object.getOwnPropertyDescriptor(proto, i);
      }
      
      if (attrs && attrs.set == null) {
        continue;
      }
      child[i] = _clone(parent[i], depth - 1);
    }

    return child;
  }

  return _clone(parent, depth);
}

/**
 * Simple flat clone using prototype, accepts only objects, usefull for property
 * override on FLAT configuration object (no nested props).
 *
 * USE WITH CAUTION! This may not behave as you wish if you do not know how this
 * works.
 */
clone.clonePrototype = function(parent) {
  if (parent === null)
    return null;

  var c = function () {};
  c.prototype = parent;
  return new c();
};

}).call(this,require("buffer").Buffer)

},{"buffer":"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-concave/node_modules/turf-merge/node_modules/turf-union/index.js"][0].apply(exports,arguments)
},{"jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/index.js"][0].apply(exports,arguments)
},{"./lib/jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/lib/jsts.js","javascript.util":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/lib/jsts.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/lib/jsts.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js":[function(require,module,exports){
(function (global){
/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011-2014 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
;(function(){var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var t;c.length&&(t=c.shift());)c.length||void 0===b?d=d[t]?d[t]:d[t]={}:d[t]=b}function g(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.p=function(a,c,O){var M=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,M)}};function h(a){this.message=a||""}g(h,Error);f("javascript.util.EmptyStackException",h);h.prototype.name="EmptyStackException";function k(a){this.message=a||""}g(k,Error);f("javascript.util.IndexOutOfBoundsException",k);k.prototype.name="IndexOutOfBoundsException";function l(){}f("javascript.util.Iterator",l);l.prototype.hasNext=l.prototype.c;l.prototype.next=l.prototype.next;l.prototype.remove=l.prototype.remove;function m(){}f("javascript.util.Collection",m);function n(){}g(n,m);f("javascript.util.List",n);function p(){}f("javascript.util.Map",p);function q(a){this.message=a||""}g(q,Error);f("javascript.util.NoSuchElementException",q);q.prototype.name="NoSuchElementException";function r(a){this.message=a||""}g(r,Error);r.prototype.name="OperationNotSupported";function s(a){this.a=[];a instanceof m&&this.e(a)}g(s,n);f("javascript.util.ArrayList",s);s.prototype.a=null;s.prototype.add=function(a){this.a.push(a);return!0};s.prototype.add=s.prototype.add;s.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};s.prototype.addAll=s.prototype.e;s.prototype.set=function(a,b){var c=this.a[a];this.a[a]=b;return c};s.prototype.set=s.prototype.set;s.prototype.f=function(){return new u(this)};s.prototype.iterator=s.prototype.f;
s.prototype.get=function(a){if(0>a||a>=this.size())throw new k;return this.a[a]};s.prototype.get=s.prototype.get;s.prototype.g=function(){return 0===this.a.length};s.prototype.isEmpty=s.prototype.g;s.prototype.size=function(){return this.a.length};s.prototype.size=s.prototype.size;s.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};s.prototype.toArray=s.prototype.h;
s.prototype.remove=function(a){for(var b=!1,c=0,d=this.a.length;c<d;c++)if(this.a[c]===a){this.a.splice(c,1);b=!0;break}return b};s.prototype.remove=s.prototype.remove;function u(a){this.j=a}f("$jscomp.scope.Iterator_",u);u.prototype.j=null;u.prototype.b=0;u.prototype.next=function(){if(this.b===this.j.size())throw new q;return this.j.get(this.b++)};u.prototype.next=u.prototype.next;u.prototype.c=function(){return this.b<this.j.size()?!0:!1};u.prototype.hasNext=u.prototype.c;
u.prototype.remove=function(){throw new r;};u.prototype.remove=u.prototype.remove;function v(){}f("javascript.util.Arrays",v);
v.sort=function(){var a=arguments[0],b,c,d;if(1===arguments.length)a.sort();else if(2===arguments.length)c=arguments[1],d=function(a,b){return c.compare(a,b)},a.sort(d);else if(3===arguments.length)for(b=a.slice(arguments[1],arguments[2]),b.sort(),d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b]);else if(4===arguments.length)for(b=a.slice(arguments[1],arguments[2]),c=arguments[3],d=function(a,b){return c.compare(a,b)},b.sort(d),
d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b])};v.asList=function(a){for(var b=new s,c=0,d=a.length;c<d;c++)b.add(a[c]);return b};function w(){this.i={}}g(w,p);f("javascript.util.HashMap",w);w.prototype.i=null;w.prototype.get=function(a){return this.i[a]||null};w.prototype.get=w.prototype.get;w.prototype.put=function(a,b){return this.i[a]=b};w.prototype.put=w.prototype.put;w.prototype.m=function(){var a=new s,b;for(b in this.i)this.i.hasOwnProperty(b)&&a.add(this.i[b]);return a};w.prototype.values=w.prototype.m;w.prototype.size=function(){return this.m().size()};w.prototype.size=w.prototype.size;function x(){}g(x,m);f("javascript.util.Set",x);function y(a){this.a=[];a instanceof m&&this.e(a)}g(y,x);f("javascript.util.HashSet",y);y.prototype.a=null;y.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(this.a[b]===a)return!0;return!1};y.prototype.contains=y.prototype.contains;y.prototype.add=function(a){if(this.contains(a))return!1;this.a.push(a);return!0};y.prototype.add=y.prototype.add;y.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};y.prototype.addAll=y.prototype.e;
y.prototype.remove=function(){throw new r;};y.prototype.remove=y.prototype.remove;y.prototype.size=function(){return this.a.length};y.prototype.g=function(){return 0===this.a.length};y.prototype.isEmpty=y.prototype.g;y.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};y.prototype.toArray=y.prototype.h;y.prototype.f=function(){return new z(this)};y.prototype.iterator=y.prototype.f;function z(a){this.k=a}f("$jscomp.scope.Iterator_$1",z);z.prototype.k=null;
z.prototype.b=0;z.prototype.next=function(){if(this.b===this.k.size())throw new q;return this.k.a[this.b++]};z.prototype.next=z.prototype.next;z.prototype.c=function(){return this.b<this.k.size()?!0:!1};z.prototype.hasNext=z.prototype.c;z.prototype.remove=function(){throw new r;};z.prototype.remove=z.prototype.remove;function A(){}g(A,p);f("javascript.util.SortedMap",A);function B(){}g(B,x);f("javascript.util.SortedSet",B);function C(){this.a=[]}g(C,n);f("javascript.util.Stack",C);C.prototype.a=null;C.prototype.push=function(a){this.a.push(a);return a};C.prototype.push=C.prototype.push;C.prototype.pop=function(){if(0===this.a.length)throw new h;return this.a.pop()};C.prototype.pop=C.prototype.pop;C.prototype.o=function(){if(0===this.a.length)throw new h;return this.a[this.a.length-1]};C.prototype.peek=C.prototype.o;C.prototype.empty=function(){return 0===this.a.length?!0:!1};C.prototype.empty=C.prototype.empty;
C.prototype.g=function(){return this.empty()};C.prototype.isEmpty=C.prototype.g;C.prototype.search=function(a){return this.a.indexOf(a)};C.prototype.search=C.prototype.search;C.prototype.size=function(){return this.a.length};C.prototype.size=C.prototype.size;C.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};C.prototype.toArray=C.prototype.h;function D(a){return null==a?null:a.parent}function E(a,b){null!==a&&(a.color=b)}function F(a){return null==a?null:a.left}function G(a){return null==a?null:a.right}function H(){this.d=null;this.n=0}g(H,A);f("javascript.util.TreeMap",H);H.prototype.get=function(a){for(var b=this.d;null!==b;){var c=a.compareTo(b.key);if(0>c)b=b.left;else if(0<c)b=b.right;else return b.value}return null};H.prototype.get=H.prototype.get;
H.prototype.put=function(a,b){if(null===this.d)return this.d={key:a,value:b,left:null,right:null,parent:null,color:0},this.n=1,null;var c=this.d,d,t;do if(d=c,t=a.compareTo(c.key),0>t)c=c.left;else if(0<t)c=c.right;else return d=c.value,c.value=b,d;while(null!==c);c={key:a,left:null,right:null,value:b,parent:d,color:0};0>t?d.left=c:d.right=c;for(c.color=1;null!=c&&c!=this.d&&1==c.parent.color;)D(c)==F(D(D(c)))?(d=G(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==G(D(c))&&
(c=D(c),I(this,c)),E(D(c),0),E(D(D(c)),1),J(this,D(D(c))))):(d=F(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==F(D(c))&&(c=D(c),J(this,c)),E(D(c),0),E(D(D(c)),1),I(this,D(D(c)))));this.d.color=0;this.n++;return null};H.prototype.put=H.prototype.put;H.prototype.m=function(){var a=new s,b;b=this.d;if(null!=b)for(;null!=b.left;)b=b.left;if(null!==b)for(a.add(b.value);null!==(b=K(b));)a.add(b.value);return a};H.prototype.values=H.prototype.m;
function I(a,b){if(null!=b){var c=b.right;b.right=c.left;null!=c.left&&(c.left.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.left==b?b.parent.left=c:b.parent.right=c;c.left=b;b.parent=c}}function J(a,b){if(null!=b){var c=b.left;b.left=c.right;null!=c.right&&(c.right.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.right==b?b.parent.right=c:b.parent.left=c;c.right=b;b.parent=c}}
function K(a){if(null===a)return null;if(null!==a.right)for(var b=a.right;null!==b.left;)b=b.left;else for(b=a.parent;null!==b&&a===b.right;)a=b,b=b.parent;return b}H.prototype.size=function(){return this.n};H.prototype.size=H.prototype.size;function L(a){this.a=[];a instanceof m&&this.e(a)}g(L,B);f("javascript.util.TreeSet",L);L.prototype.a=null;L.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(0===this.a[b].compareTo(a))return!0;return!1};L.prototype.contains=L.prototype.contains;L.prototype.add=function(a){if(this.contains(a))return!1;for(var b=0,c=this.a.length;b<c;b++)if(1===this.a[b].compareTo(a))return this.a.splice(b,0,a),!0;this.a.push(a);return!0};L.prototype.add=L.prototype.add;
L.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};L.prototype.addAll=L.prototype.e;L.prototype.remove=function(){throw new r;};L.prototype.remove=L.prototype.remove;L.prototype.size=function(){return this.a.length};L.prototype.size=L.prototype.size;L.prototype.g=function(){return 0===this.a.length};L.prototype.isEmpty=L.prototype.g;L.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};L.prototype.toArray=L.prototype.h;L.prototype.f=function(){return new N(this)};
L.prototype.iterator=L.prototype.f;function N(a){this.l=a}f("$jscomp.scope.Iterator_$2",N);N.prototype.l=null;N.prototype.b=0;N.prototype.next=function(){if(this.b===this.l.size())throw new q;return this.l.a[this.b++]};N.prototype.next=N.prototype.next;N.prototype.c=function(){return this.b<this.l.size()?!0:!1};N.prototype.hasNext=N.prototype.c;N.prototype.remove=function(){throw new r;};N.prototype.remove=N.prototype.remove;"undefined"!==typeof global&&(global.javascript={},global.javascript.util={},global.javascript.util.ArrayList=s,global.javascript.util.Arrays=v,global.javascript.util.Collection=m,global.javascript.util.EmptyStackException=h,global.javascript.util.HashMap=w,global.javascript.util.HashSet=y,global.javascript.util.IndexOutOfBoundsException=k,global.javascript.util.Iterator=l,global.javascript.util.List=n,global.javascript.util.Map=p,global.javascript.util.NoSuchElementException=q,global.javascript.util.OperationNotSupported=
r,global.javascript.util.Set=x,global.javascript.util.SortedMap=A,global.javascript.util.SortedSet=B,global.javascript.util.Stack=C,global.javascript.util.TreeMap=H,global.javascript.util.TreeSet=L);}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-intersect/node_modules/jsts/node_modules/javascript.util/index.js"][0].apply(exports,arguments)
},{"./dist/javascript.util-node.min.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-midpoint/index.js":[function(require,module,exports){
// http://cs.selu.edu/~rbyrd/math/midpoint/
// ((x1+x2)/2), ((y1+y2)/2)
var point = require('turf-point');

/**
 * Takes two {@link Point} features and returns a Point midway between the two.
 *
 * @module turf/midpoint
 * @param {Point} pt1 first point
 * @param {Point} pt2 second point
 * @return {Point} a point between the two
 * @example
 * var pt1 = turf.point([144.834823, -37.771257]);
 * pt1.properties['marker-color'] = '#00f';
 * var pt2 = turf.point([145.14244, -37.830937]);
 * pt2.properties['marker-color'] = '#00f';
 *
 * var midpointed = turf.midpoint(pt1, pt2);
 * midpointed.properties['marker-color'] = '#f00';
 *
 * var result = turf.featurecollection([
 *  pt1, pt2, midpointed]);
 *
 * //=result
 */
module.exports = function(point1, point2) {
  if (point1 === null || point2 === null){
    throw new Error('Less than two points passed.');
  }

  var x1 = point1.geometry.coordinates[0];
  var x2 = point2.geometry.coordinates[0];
  var y1 = point1.geometry.coordinates[1];
  var y2 = point2.geometry.coordinates[1];

  var x3 = x1 + x2;
  var midX = x3/2;
  var y3 = y1 + y2;
  var midY = y3/2;

  return point([midX, midY]);
};

},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-midpoint/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-midpoint/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-min/index.js":[function(require,module,exports){
var inside = require('turf-inside');

/**
* Calculates the minimum value of a field for {@link Point} features within a set of {@link Polygon} features.
*
* @module turf/min
* @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
* @param {FeatureCollection} points a FeatureCollection of {@link Point} features
* @param {string} inField the field in input data to analyze
* @param {string} outField the field in which to store results
* @return {FeatureCollection} a FeatureCollection of {@link Polygon} features
* with properties listed as `outField` values
* @example
* var polygons = turf.featurecollection([
*   turf.polygon([[
*     [72.809658, 18.961818],
*     [72.809658, 18.974805],
*     [72.827167, 18.974805],
*     [72.827167, 18.961818],
*     [72.809658, 18.961818]
*   ]]),
*   turf.polygon([[
*     [72.820987, 18.947043],
*     [72.820987, 18.95922],
*     [72.841243, 18.95922],
*     [72.841243, 18.947043],
*     [72.820987, 18.947043]
*   ]])
* ]);
* var points = turf.featurecollection([
*   turf.point([72.814464, 18.971396], {population: 200}),
*   turf.point([72.820043, 18.969772], {population: 600}),
*   turf.point([72.817296, 18.964253], {population: 100}),
*   turf.point([72.83575, 18.954837], {population: 200}),
*   turf.point([72.828197, 18.95094], {population: 300})]);
*
* var minimums = turf.min(
*   polygons, points, 'population', 'min');
*
* var result = turf.featurecollection(
*   points.features.concat(minimums.features));
*
* //=result
*/
module.exports = function(polyFC, ptFC, inField, outField){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = min(values);
  });

  return polyFC;
};

function min(x) {
    var value;
    for (var i = 0; i < x.length; i++) {
        // On the first iteration of this loop, min is
        // undefined and is thus made the minimum element in the array
        if (x[i] < value || value === undefined) value = x[i];
    }
    return value;
}

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-min/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-min/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-nearest/index.js":[function(require,module,exports){
var distance = require('turf-distance');

/**
 * Takes a {@link Point} feature and a {@link FeatureCollection} of Point features and returns the Point feature from the FeatureCollection closest to the input point.
 *
 * @module turf/nearest
 * @param {Point} point the reference point
 * @param {FeatureCollection} against a FeatureCollection of Point features
 * @return {Feature} the closest Point feature in `against` to `point`
 * @example
 * var point = turf.point([28.965797, 41.010086]);
 * point.properties['marker-color'] = '#0f0';
 * var against = turf.featurecollection([
 *  turf.point([28.973865, 41.011122]),
 *  turf.point([28.948459, 41.024204]),
 *  turf.point([28.938674, 41.013324])
 * ]);
 *
 * var nearest = turf.nearest(point, against);
 * nearest.properties['marker-color'] = '#f00';
 *
 * var result = turf.featurecollection(
  against.features.concat(point));
 *
 * //=result
 */
module.exports = function(targetPoint, points){
  var nearestPoint;
  var count = 0;
  var dist = Infinity;
  points.features.forEach(function(pt){
    if(!nearestPoint){
      nearestPoint = pt;
      var dist = distance(targetPoint, pt, 'miles');
      nearestPoint.properties.distance = dist;
    }
    else{
      var dist = distance(targetPoint, pt, 'miles');
      if(dist < nearestPoint.properties.distance){
        nearestPoint = pt;
        nearestPoint.properties.distance = dist;
      }
    }
  });
  delete nearestPoint.properties.distance;
  return nearestPoint;
}

},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-nearest/node_modules/turf-distance/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-nearest/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-planepoint/index.js":[function(require,module,exports){
/**
 * Takes a triangular plane as a {@link Polygon} feature
 * and a {@link Point} feature within that triangle and returns the z-value
 * at that point. The Polygon needs to have properties `a`, `b`, and `c`
 * that define the values at its three corners.
 *
 * @module turf/planepoint
 * @param {Point} interpolatedPoint the Point for which a z-value will be calculated
 * @param {Polygon} triangle a Polygon feature with three vertices
 * @return {number} the z-value for `interpolatedPoint`
 * @example
 * var point = turf.point([-75.3221, 39.529]);
 * // triangle is a polygon with "a", "b",
 * // and "c" values representing
 * // the values of the coordinates in order.
 * var triangle = turf.polygon([[
 *  [-75.1221, 39.57],
 *  [-75.58, 39.18],
 *  [-75.97, 39.86],
 *  [-75.1221, 39.57]
 * ]],
 *   {"a": 11, "b": 122, "c": 44});
 *
 * var features = turf.featurecollection(
 *  [triangle, point]);
 *
 * var zValue = turf.planepoint(point, triangle);
 *
 * //=features
 *
 * //=zValue
 */
module.exports = function(point, triangle){
  var x = point.geometry.coordinates[0],
      y = point.geometry.coordinates[1],
      x1 = triangle.geometry.coordinates[0][0][0],
      y1 = triangle.geometry.coordinates[0][0][1],
      z1 = triangle.properties.a,
      x2 = triangle.geometry.coordinates[0][1][0],
      y2 = triangle.geometry.coordinates[0][1][1],
      z2 = triangle.properties.b,
      x3 = triangle.geometry.coordinates[0][2][0],
      y3 = triangle.geometry.coordinates[0][2][1],
      z3 = triangle.properties.c;

  var z = (z3 * (x-x1) * (y-y2) + z1 * (x-x2) * (y-y3) + z2 * (x-x3) * (y-y1) -
      z2 * (x-x1) * (y-y3) - z3 * (x-x2) * (y-y1) - z1 * (x-x3) * (y-y2)) /
      ((x-x1) * (y-y2) + (x-x2) * (y-y3) +(x-x3) * (y-y1) -
       (x-x1) * (y-y3) - (x-x2) * (y-y1) - (x-x3) * (y-y2));

  return z;
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/index.js":[function(require,module,exports){
var featureCollection = require('turf-featurecollection');
var centroid = require('turf-center');
var distance = require('turf-distance');
var inside = require('turf-inside');
var explode = require('turf-explode');

/**
 * Finds a {@link Point} guaranteed to be on the surface of
 * {@link GeoJSON} object.
 *
 * * Given a {@link Polygon}, the point will be in the area of the polygon
 * * Given a {@link LineString}, the point will be along the string
 * * Given a {@link Point}, the point will the same as the input
 *
 * @module turf/pointOnSurface
 * @param {GeoJSON} input any GeoJSON object
 * @returns {Feature} a point on the surface of `input`
 * @example
 * // create a random polygon
 * var polygon = turf.random('polygon');
 *
 * //=polygon
 *
 * var pointOnPolygon = turf.pointOnSurface(polygon);
 *
 * var fc = turf.featurecollection(polygon.features.concat(pointOnPolygon));
 *
 * //=pointOnPolygon
 */
module.exports = function(fc) {
  // normalize
  if(fc.type != 'FeatureCollection') {
    if(fc.type != 'Feature') {
      fc = {
        type: 'Feature',
        geometry: fc,
        properties: {}
      };
    }
    fc = featureCollection([fc]);
  }

  //get centroid
  var cent = centroid(fc);

  // check to see if centroid is on surface
  var onSurface = false;
  var i = 0;
  while(!onSurface && i < fc.features.length) {
    var geom = fc.features[i].geometry;
    if (geom.type === 'Point') {
      if (cent.geometry.coordinates[0] === geom.coordinates[0] &&
        cent.geometry.coordinates[1] === geom.coordinates[1]) {
        onSurface = true;
      }
    } else if(geom.type === 'MultiPoint') {
      var onMultiPoint = false;
      var k = 0;
      while(!onMultiPoint && k < geom.coordinates.length) {
        if (cent.geometry.coordinates[0] === geom.coordinates[k][0] &&
          cent.geometry.coordinates[1] === geom.coordinates[k][1]) {
          onSurface = true;
          onMultiPoint = true;
        }
        k++;
      }
    } else if(geom.type === 'LineString') {
      var onLine = false;
      var k = 0;
      while(!onLine && k < geom.coordinates.length - 1) {
        var x = cent.geometry.coordinates[0];
        var y = cent.geometry.coordinates[1];
        var x1 = geom.coordinates[k][0];
        var y1 = geom.coordinates[k][1];
        var x2 = geom.coordinates[k+1][0];
        var y2 = geom.coordinates[k+1][1];
        if(pointOnSegment(x, y, x1, y1, x2, y2)) {
          onLine = true;
          onSurface = true;
        }
        k++;
      }
    } else if(geom.type === 'MultiLineString') {
      var onMultiLine = false;
      var j = 0;
      while(!onMultiLine && j < geom.coordinates.length) {
        var onLine = false;
        var k = 0;
        var line = geom.coordinates[j];
        while(!onLine && k < line.length - 1) {
          var x = cent.geometry.coordinates[0];
          var y = cent.geometry.coordinates[1];
          var x1 = line[k][0];
          var y1 = line[k][1];
          var x2 = line[k+1][0];
          var y2 = line[k+1][1];
          if(pointOnSegment(x, y, x1, y1, x2, y2)) {
            onLine = true;
            onSurface = true;
          }
          k++;
        }
        j++;
      }
    } else if(geom.type === 'Polygon' || geom.type === 'MultiPolygon') {
      var f = {
        type: 'Feature',
        geometry: geom,
        properties: {}
      };
      if(inside(cent, f)) {
        onSurface = true;
      }
    }
    i++;
  }
  if(onSurface) {
    return cent;
  } else {
    var vertices = featureCollection([]);
    for(var i = 0; i < fc.features.length; i++) {
      vertices.features = vertices.features.concat(explode(fc.features[i]).features);
    }
    var closestVertex;
    var closestDistance = Infinity;
    for(var i = 0; i < vertices.features.length; i++) {
      var dist = distance(cent, vertices.features[i], 'miles');
      if(dist < closestDistance) {
        closestDistance = dist;
        closestVertex = vertices.features[i];
      }
    }
    return closestVertex;
  }
};

function pointOnSegment (x, y, x1, y1, x2, y2) {
  var ab = Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));
  var ap = Math.sqrt((x-x1)*(x-x1)+(y-y1)*(y-y1));
  var pb = Math.sqrt((x2-x)*(x2-x)+(y2-y)*(y2-y));
  if(ab === ap + pb) {
    return true;
  }
}

},{"turf-center":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-center/index.js","turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-distance/index.js","turf-explode":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-featurecollection/index.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-center/index.js":[function(require,module,exports){
var extent = require('turf-extent');

module.exports = function(layer, done){
  var ext = extent(layer);
  var x = (ext[0] + ext[2])/2;
  var y = (ext[1] + ext[3])/2;
  var center = {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [x, y]
    }
  };
  return center;
}
},{"turf-extent":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-center/node_modules/turf-extent/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-center/node_modules/turf-extent/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-extent/index.js"][0].apply(exports,arguments)
},{"flatten":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-center/node_modules/turf-extent/node_modules/flatten/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-center/node_modules/turf-extent/node_modules/flatten/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-extent/node_modules/flatten/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/index.js":[function(require,module,exports){
var flatten = require('flatten');
var featureCollection = require('turf-featurecollection');
var point = require('turf-point');

module.exports = function(fc){
  if(fc.type === 'FeatureCollection'){
    for(var i in fc.features){
      var coordinates ;
      switch(fc.features[i].geometry.type){
        case 'Point':
          coordinates = [fc.features[i].geometry.coordinates];
          break
        case 'LineString':
          coordinates = fc.features[i].geometry.coordinates;
          break
        case 'Polygon':
          coordinates = fc.features[i].geometry.coordinates;
          coordinates = flatCoords(coordinates);
          break
        case 'MultiPoint':
          coordinates = fc.features[i].geometry.coordinates;
          break
        case 'MultiLineString':
          coordinates = fc.features[i].geometry.coordinates;
          coordinates = flatCoords(coordinates);
          break
        case 'MultiPolygon':
          coordinates = fc.features[i].geometry.coordinates;
          coordinates = flatCoords(coordinates);
          break
      }
      if(!fc.features[i].geometry && fc.features[i].properties){
        return new Error('Unknown Geometry Type');
      }
    }
      
    var exploded = featureCollection([]);

    coordinates.forEach(function(coords){
      exploded.features.push(point(coords[0], coords[1]));
    })

    return exploded;
  }
  else{
    var coordinates ;
    var geometry;
    if(fc.type === 'Feature'){
      geometry = fc.geometry;
    }
    else{
      geometry = fc;
    }
    switch(geometry.type){
      case 'Point':
        coordinates = [geometry.coordinates];
        break
      case 'LineString':
        coordinates = geometry.coordinates;
        break
      case 'Polygon':
        coordinates = geometry.coordinates;
        coordinates = flatCoords(coordinates);
        break
      case 'MultiPoint':
        coordinates = geometry.coordinates;
        break
      case 'MultiLineString':
        coordinates = geometry.coordinates;
        coordinates = flatCoords(coordinates);
        break
      case 'MultiPolygon':
        coordinates = geometry.coordinates;
        coordinates = flatCoords(coordinates);
        break
    }
    if(!geometry){
      return new Error('No Geometry Found');
    }

    var exploded = featureCollection([]);

    coordinates.forEach(function(coords){
      exploded.features.push(point(coords[0], coords[1]));
    })

    return exploded;
  }
}

function flatCoords(coords){
  var newCoords = [];
  coords = flatten(coords);
  coords.forEach(function(c, i){
    if(i % 2 == 0) // if is even
      newCoords.push([c, coords[i+1]]);
  })
  return newCoords;
}
},{"flatten":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/node_modules/flatten/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/node_modules/turf-featurecollection/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/node_modules/flatten/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-center/node_modules/turf-extent/node_modules/flatten/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
module.exports = function(features){
  var fc = {
    "type": "FeatureCollection",
    "features": features
  }

  return fc
}
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-explode/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point-on-surface/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-point/index.js":[function(require,module,exports){
/**
 * Takes coordinates and properties (optional) and returns a new {@link Point} feature.
 *
 * @module turf/point
 * @param {number} longitude position west to east in decimal degrees
 * @param {number} latitude position south to north in decimal degrees
 * @param {Object} properties an Object that is used as the {@link Feature}'s
 * properties
 * @return {Point} a Point feature
 * @example
 * var pt1 = turf.point([-75.343, 39.984]);
 *
 * //=pt1
 */
var isArray = Array.isArray || function(arg) {
  return Object.prototype.toString.call(arg) === '[object Array]';
};
module.exports = function(coordinates, properties) {
  if (!isArray(coordinates)) throw new Error('Coordinates must be an array');
  if (coordinates.length < 2) throw new Error('Coordinates must be at least 2 numbers long');
  return {
    type: "Feature",
    geometry: {
      type: "Point",
      coordinates: coordinates
    },
    properties: properties || {}
  };
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-convex/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-quantile/index.js":[function(require,module,exports){
var ss = require('simple-statistics');

/**
* Takes a {@link FeatureCollection}, a property name, and a set of percentiles and returns a quantile array.
* @module turf/quantile
* @param {FeatureCollection} input a FeatureCollection of any type
* @param {String} field the property in `input` from which to retrieve quantile values
* @param {Array<number>} percentiles an Array of percentiles on which to calculate quantile values
* @return {Array<number>} an array of the break values
* @example
* var points = turf.featurecollection([
*   turf.point([5,5], {population: 5}),
*   turf.point([1,3], {population: 40}),
*   turf.point([14,2], {population: 80}),
*   turf.point([13,1], {population: 90}),
*   turf.point([19,7], {population: 100})
* ]);
*
* var breaks = turf.quantile(
*   points, 'population', [25, 50, 75, 99]);
*
* //=breaks
*/
module.exports = function(fc, field, percentiles){
  var vals = [];
  var quantiles = [];

  fc.features.forEach(function(feature){
    vals.push(feature.properties[field]);
  });
  percentiles.forEach(function(percentile){
    quantiles.push(ss.quantile(vals, percentile * 0.01));
  });
  return quantiles;
};

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-quantile/node_modules/simple-statistics/src/simple_statistics.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-quantile/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-random/index.js":[function(require,module,exports){
var random = require('geojson-random');

/**
 * Generates random {@link GeoJSON} data, including {@link Point|Points} and {@link Polygon|Polygons}, for testing
 * and experimentation.
 *
 * @module turf/random
 * @param {String} [type='point'] type of features desired: 'points' or 'polygons'
 * @param {Number} [count=1] how many geometries should be generated.
 * @param {Object} options options relevant to the feature desired. Can include:
 * @param {Array<number>} options.bbox a bounding box inside of which geometries
 * are placed. In the case of {@link Point} features, they are guaranteed to be within this bounds,
 * while {@link Polygon} features have their centroid within the bounds.
 * @param {Number} [options.num_vertices=10] options.vertices the number of vertices added
 * to polygon features.
 * @param {Number} [options.max_radial_length=10] the total number of decimal
 * degrees longitude or latitude that a polygon can extent outwards to
 * from its center.
 * @return {FeatureCollection} generated random features
 * @example
 * var points = turf.random('points', 100, {
 *   bbox: [-70, 40, -60, 60]
 * });
 *
 * //=points
 *
 * var polygons = turf.random('polygons', 4, {
 *   bbox: [-70, 40, -60, 60]
 * });
 *
 * //=polygons
 */
module.exports = function(type, count, options) {
    options = options || {};
    count = count || 1;
    switch (type) {
        case 'point':
        case 'points':
        case undefined:
            return random.point(count, options.bbox);
        case 'polygon':
        case 'polygons':
            return random.polygon(
                count,
                options.num_vertices,
                options.max_radial_length,
                options.bbox);
        default:
            throw new Error('Unknown type given: valid options are points and polygons');
    }
};

},{"geojson-random":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-random/node_modules/geojson-random/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-random/node_modules/geojson-random/index.js":[function(require,module,exports){
module.exports = function() {
    throw new Error('call .point() or .polygon() instead');
};

function position(bbox) {
    if (bbox) return coordInBBBOX(bbox);
    else return [lon(), lat()];
}

module.exports.position = position;

module.exports.point = function(count, bbox) {
    var features = [];
    for (i = 0; i < count; i++) {
        features.push(feature(bbox ? point(position(bbox)) : point()));
    }
    return collection(features);
};

module.exports.polygon = function(count, num_vertices, max_radial_length, bbox) {
    if (typeof num_vertices !== 'number') num_vertices = 10;
    if (typeof max_radial_length !== 'number') max_radial_length = 10;
    var features = [];
    for (i = 0; i < count; i++) {
        var vertices = [],
            circle_offsets = Array.apply(null,
                new Array(num_vertices + 1)).map(Math.random);

        circle_offsets.forEach(sumOffsets);
        circle_offsets.forEach(scaleOffsets);
        vertices[vertices.length - 1] = vertices[0]; // close the ring

        // center the polygon around something
        vertices = vertices.map(vertexToCoordinate(position(bbox)));
        features.push(feature(polygon([vertices])));
    }

    function sumOffsets(cur, index, arr) {
        arr[index] = (index > 0) ? cur + arr[index - 1] : cur;
    }

    function scaleOffsets(cur, index) {
        cur = cur * 2 * Math.PI / circle_offsets[circle_offsets.length - 1];
        var radial_scaler = Math.random();
        vertices.push([
            radial_scaler * max_radial_length * Math.sin(cur),
            radial_scaler * max_radial_length * Math.cos(cur)
        ]);
    }

    return collection(features);
};


function vertexToCoordinate(hub) {
    return function(cur, index) { return [cur[0] + hub[0], cur[1] + hub[1]]; };
}

function rnd() { return Math.random() - 0.5; }
function lon() { return rnd() * 360; }
function lat() { return rnd() * 180; }

function point(coordinates) {
    return {
        type: 'Point',
        coordinates: coordinates || [lon(), lat()]
    };
}

function coordInBBBOX(bbox) {
    var lonSpan = bbox[2] - bbox[0],
        latSpan = bbox[3] - bbox[1],
        randInSpan = Math.random() * (lonSpan * latSpan);
    return [
        (bbox[2] === bbox[0]) ? bbox[2] : randInSpan % (lonSpan) + bbox[0],
        (bbox[3] === bbox[1]) ? bbox[1] : randInSpan / (latSpan) + bbox[1]];
}

function pointInBBBOX() {
    return {
        type: 'Point',
        coordinates: [lon(), lat()]
    };
}

function polygon(coordinates) {
    return {
        type: 'Polygon',
        coordinates: coordinates
    };
}

function feature(geom) {
    return {
        type: 'Feature',
        geometry: geom,
        properties: {}
    };
}

function collection(f) {
    return {
        type: 'FeatureCollection',
        features: f
    };
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-reclass/index.js":[function(require,module,exports){
var featurecollection = require('turf-featurecollection');
var reclass = require('./index.js');

/**
 * Takes a {@link FeatureCollection}, an input field, an output field, and
 * an array of translations and outputs an identical FeatureCollection with
 * the output field property populated.
* @module turf/reclass
* @param {FeatureCollection} input a FeatureCollection of any type
* @param {string} inField the field to translate
* @param {string} outField the field in which to store translated results
* @param {Array<number>} translations an array of translations
* @return {FeatureCollection} a FeatureCollection with identical geometries to `input` but with `outField` populated.
* @example
* var points = turf.featurecollection([
*   turf.point([13.170547, 32.888669], {population: 200}),
*   turf.point([13.182048, 32.889533], {population: 600}),
*   turf.point([13.17398, 32.882182], {population: 100}),
*   turf.point([13.174324, 32.895011], {population: 200}),
*   turf.point([13.185825, 32.884344], {population: 300})
* ]);
* // 0 to 200 will map to "small", 200 to 400 will map to "medium", 400 to 600 will map to "large"
* var translations = [
*   [0, 200, "small"],
*   [200, 400, "medium"],
*   [400, 600, "large"]
* ];
*
* var reclassed = turf.reclass(
*   points, 'population', 'size', translations);
*
* //=reclassed
*
*/
module.exports = function(fc, inField, outField, translations, done){
  var reclassed = featurecollection([]);

  fc.features.forEach(function(feature){
    var reclassedFeature;
    var found = false;
    for(var i = 0; i < translations.length; i++){
      if(feature.properties[inField] >= translations[i][0] && feature.properties[inField] <= translations[i][1]) {
        feature.properties[outField] = translations[i][2];
      }
    }
    reclassed.features.push(feature);
  });

  return reclassed;
};

},{"./index.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-reclass/index.js","turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-reclass/node_modules/turf-featurecollection/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-reclass/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-remove/index.js":[function(require,module,exports){
var featureCollection = require('turf-featurecollection');

/**
 * Takes a {@link FeatureCollection} of any type, a property, and a value and
 * returns a FeatureCollection with features matching that
 * property-value pair removed.
 *
 * @module turf/remove
 * @param {FeatureCollection} features a FeatureCollection of any type
 * @param {String} property the property to filter
 * @param {String} value the value to filter
 * @return {FeatureCollection} the resulting FeatureCollection without features that match the property-value pair
 * @example
 * var points = turf.featurecollection([
 *  turf.point([-0.235004, 5.551918], {'marker-color': '#00f'}),
 *  turf.point([-0.209598, 5.56439], {'marker-color': '#f00'}),
 *  turf.point([-0.197753, 5.556018], {'marker-color': '#00f'}),
 *  turf.point([-0.217323, 5.549526], {'marker-color': '#000'}),
 *  turf.point([-0.211315, 5.543887], {'marker-color': '#0f0'}),
 *  turf.point([-0.202217, 5.547134], {'marker-color': '#00f'}),
 *  turf.point([-0.231227, 5.56644], {'marker-color': '#0f0'})
 * ]);
 *
 * //=points
 *
 * var filtered = turf.remove(points, 'marker-color', '#00f');
 *
 * //=filtered
*/
module.exports = function(collection, key, val) {
  var newFC = featureCollection([]);
  for(var i = 0; i < collection.features.length; i++) {
    if(collection.features[i].properties[key] != val) {
      newFC.features.push(collection.features[i]);
    }
  }
  return newFC;
};

},{"turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-remove/node_modules/turf-featurecollection/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-remove/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sample/index.js":[function(require,module,exports){
// http://stackoverflow.com/questions/11935175/sampling-a-random-subset-from-an-array
var featureCollection = require('turf-featurecollection');

/**
 * Takes a {@link FeatureCollection} and returns a FeatureCollection with given number of {@link Feature|features} at random.
 *
 * @module turf/sample
 * @param {FeatureCollection} features a FeatureCollection of any type
 * @param {number} n number of features to select
 * @return {FeatureCollection} a FeatureCollection with `n` features
 * @example
 * var points = turf.random('points', 1000);
 *
 * //=points
 *
 * var sample = turf.sample(points, 10);
 *
 * //=sample
 */
module.exports = function(fc, num){
  var outFC = featureCollection(getRandomSubarray(fc.features, num));
  return outFC;
};

function getRandomSubarray(arr, size) {
  var shuffled = arr.slice(0), i = arr.length, min = i - size, temp, index;
  while (i-- > min) {
      index = Math.floor((i + 1) * Math.random());
      temp = shuffled[index];
      shuffled[index] = shuffled[i];
      shuffled[i] = temp;
  }
  return shuffled.slice(min);
}

},{"turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sample/node_modules/turf-featurecollection/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sample/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-simplify/index.js":[function(require,module,exports){
var simplify = require('simplify-js');

/**
 * Takes a {@link LineString} or {@link Polygon} feature and returns a simplified version. Internally uses [simplify-js](http://mourner.github.io/simplify-js/) to perform simplification.
 *
 * @module turf/simplify
 * @param {Feature} feature a {@link LineString} or {@link Polygon} feature to be simplified
 * @param {number} tolerance simplification tolerance
 * @param {boolean} highQuality whether or not to spend more time to create
 * a higher-quality simplification with a different algorithm
 * @return {Feature} a simplified feature
 * @example
 * var feature = turf.polygon([[
 *  [-70.603637, -33.399918],
 *  [-70.614624, -33.395332],
 *  [-70.639343, -33.392466],
 *  [-70.659942, -33.394759],
 *  [-70.683975, -33.404504],
 *  [-70.697021, -33.419406],
 *  [-70.701141, -33.434306],
 *  [-70.700454, -33.446339],
 *  [-70.694274, -33.458369],
 *  [-70.682601, -33.465816],
 *  [-70.668869, -33.472117],
 *  [-70.646209, -33.473835],
 *  [-70.624923, -33.472117],
 *  [-70.609817, -33.468107],
 *  [-70.595397, -33.458369],
 *  [-70.587158, -33.442901],
 *  [-70.587158, -33.426283],
 *  [-70.590591, -33.414248],
 *  [-70.594711, -33.406224],
 *  [-70.603637, -33.399918]
 * ]]);
 * var tolerance = 0.01;
 *
 * var simplified = turf.simplify(
 *  feature, tolerance, false);
 *
 * //=feature
 *
 * //=simplified
 */
module.exports = function(feature, tolerance, highQuality){
  if(feature.geometry.type === 'LineString') {
    var line = {
      type: 'LineString',
      coordinates: []
    };
    var pts = feature.geometry.coordinates.map(function(coord) {
      return {x: coord[0], y: coord[1]};
    });
    line.coordinates = simplify(pts, tolerance, highQuality).map(function(coords){
      return [coords.x, coords.y];
    });
    
    return simpleFeature(line, feature.properties);
  } else if(feature.geometry.type === 'Polygon') {
    var poly = {
      type: 'Polygon',
      coordinates: []
    };
    feature.geometry.coordinates.forEach(function(ring){
      var pts = ring.map(function(coord) {
        return {x: coord[0], y: coord[1]};
      });
      var simpleRing = simplify(pts, tolerance, highQuality).map(function(coords){
        return [coords.x, coords.y];
      });
      poly.coordinates.push(simpleRing);
    });
    return simpleFeature(poly, feature.properties)
  }
}

function simpleFeature (geom, properties) {
  return {
    type: 'Feature',
    geometry: geom,
    properties: properties
  };
}

},{"simplify-js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-simplify/node_modules/simplify-js/simplify.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-simplify/node_modules/simplify-js/simplify.js":[function(require,module,exports){
/*
 (c) 2013, Vladimir Agafonkin
 Simplify.js, a high-performance JS polyline simplification library
 mourner.github.io/simplify-js
*/

(function () { 'use strict';

// to suit your point format, run search/replace for '.x' and '.y';
// for 3D version, see 3d branch (configurability would draw significant performance overhead)

// square distance between 2 points
function getSqDist(p1, p2) {

    var dx = p1.x - p2.x,
        dy = p1.y - p2.y;

    return dx * dx + dy * dy;
}

// square distance from a point to a segment
function getSqSegDist(p, p1, p2) {

    var x = p1.x,
        y = p1.y,
        dx = p2.x - x,
        dy = p2.y - y;

    if (dx !== 0 || dy !== 0) {

        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);

        if (t > 1) {
            x = p2.x;
            y = p2.y;

        } else if (t > 0) {
            x += dx * t;
            y += dy * t;
        }
    }

    dx = p.x - x;
    dy = p.y - y;

    return dx * dx + dy * dy;
}
// rest of the code doesn't care about point format

// basic distance-based simplification
function simplifyRadialDist(points, sqTolerance) {

    var prevPoint = points[0],
        newPoints = [prevPoint],
        point;

    for (var i = 1, len = points.length; i < len; i++) {
        point = points[i];

        if (getSqDist(point, prevPoint) > sqTolerance) {
            newPoints.push(point);
            prevPoint = point;
        }
    }

    if (prevPoint !== point) newPoints.push(point);

    return newPoints;
}

// simplification using optimized Douglas-Peucker algorithm with recursion elimination
function simplifyDouglasPeucker(points, sqTolerance) {

    var len = points.length,
        MarkerArray = typeof Uint8Array !== 'undefined' ? Uint8Array : Array,
        markers = new MarkerArray(len),
        first = 0,
        last = len - 1,
        stack = [],
        newPoints = [],
        i, maxSqDist, sqDist, index;

    markers[first] = markers[last] = 1;

    while (last) {

        maxSqDist = 0;

        for (i = first + 1; i < last; i++) {
            sqDist = getSqSegDist(points[i], points[first], points[last]);

            if (sqDist > maxSqDist) {
                index = i;
                maxSqDist = sqDist;
            }
        }

        if (maxSqDist > sqTolerance) {
            markers[index] = 1;
            stack.push(first, index, index, last);
        }

        last = stack.pop();
        first = stack.pop();
    }

    for (i = 0; i < len; i++) {
        if (markers[i]) newPoints.push(points[i]);
    }

    return newPoints;
}

// both algorithms combined for awesome performance
function simplify(points, tolerance, highestQuality) {

    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;

    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);
    points = simplifyDouglasPeucker(points, sqTolerance);

    return points;
}

// export as AMD module / Node module / browser or worker variable
if (typeof define === 'function' && define.amd) define(function() { return simplify; });
else if (typeof module !== 'undefined') module.exports = simplify;
else if (typeof self !== 'undefined') self.simplify = simplify;
else window.simplify = simplify;

})();

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-size/index.js":[function(require,module,exports){
/**
 * Takes a bounding box and returns a new bounding box with a size expanded or contracted
 * by a factor of X.
 *
 * @module turf/size
 * @param {Array<number>} bbox a bounding box
 * @param {number} factor the ratio of the new bbox to the input bbox
 * @return {Array<number>} the resized bbox
 * @example
 * var bbox = [0, 0, 10, 10]
 *
 * var resized = turf.size(bbox, 2);
 *
 * var features = turf.featurecollection([
 *   turf.bboxPolygon(bbox),
 *   turf.bboxPolygon(resized)]);
 *
 * //=features
 */
module.exports = function(bbox, factor){
  var currentXDistance = (bbox[2] - bbox[0]);
  var currentYDistance = (bbox[3] - bbox[1]);
  var newXDistance = currentXDistance * factor;
  var newYDistance = currentYDistance * factor;
  var xChange = newXDistance - currentXDistance;
  var yChange = newYDistance - currentYDistance;

  var lowX = bbox[0] - (xChange / 2);
  var lowY = bbox[1] - (yChange / 2);
  var highX = (xChange / 2) + bbox[2];
  var highY = (yChange / 2) + bbox[3];

  var sized = [lowX, lowY, highX, highY];
  return sized;
}

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/index.js":[function(require,module,exports){
var midpoint = require('turf-midpoint');
var point = require('turf-point');
var distance = require('turf-distance');

/**
 * Takes a bounding box and calculates the minimum square bounding box that would contain the input.
 *
 * @module turf/square
 * @param {Array<number>} bbox a bounding box
 * @return {Array<number>} a square surrounding `bbox`
 * @example
 * var bbox = [-20,-20,-15,0];
 *
 * var squared = turf.square(bbox);
 *
 * var features = turf.featurecollection([
 *   turf.bboxPolygon(bbox),
 *   turf.bboxPolygon(squared)]);
 *
 * //=features
 */
module.exports = function(bbox){
  var squareBbox = [0,0,0,0];
  var lowLeft = point([bbox[0], bbox[1]]);
  var topLeft = point([bbox[0], bbox[3]]);
  var topRight = point([bbox[2], bbox[3]]);
  var lowRight = point([bbox[2], bbox[1]]);

  var horizontalDistance = distance(lowLeft, lowRight, 'miles');
  var verticalDistance = distance(lowLeft, topLeft, 'miles');
  if(horizontalDistance >= verticalDistance){
    squareBbox[0] = bbox[0];
    squareBbox[2] = bbox[2];
    var verticalMidpoint = midpoint(lowLeft, topLeft);
    squareBbox[1] = verticalMidpoint.geometry.coordinates[1] - ((bbox[2] - bbox[0]) / 2);
    squareBbox[3] = verticalMidpoint.geometry.coordinates[1] + ((bbox[2] - bbox[0]) / 2);
    return squareBbox;
  }
  else {
    squareBbox[1] = bbox[1];
    squareBbox[3] = bbox[3];
    var horzontalMidpoint = midpoint(lowLeft, lowRight);
    squareBbox[0] = horzontalMidpoint.geometry.coordinates[0] - ((bbox[3] - bbox[1]) / 2);
    squareBbox[2] = horzontalMidpoint.geometry.coordinates[0] + ((bbox[3] - bbox[1]) / 2);
    return squareBbox;
  }
}


},{"turf-distance":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-distance/index.js","turf-midpoint":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-midpoint/index.js","turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-distance/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-line-distance/node_modules/turf-distance/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-midpoint/index.js":[function(require,module,exports){
// http://cs.selu.edu/~rbyrd/math/midpoint/
// ((x1+x2)/2), ((y1+y2)/2)
var point = require('turf-point');

module.exports = function(point1, point2) {
  if(point1 === null || point2 === null || point1 && point2 === null){
    return new Error('Less than two points passed.');
  }

  var x1 = point1.geometry.coordinates[0];
  var x2 = point2.geometry.coordinates[0];
  var y1 = point1.geometry.coordinates[1];
  var y2 = point2.geometry.coordinates[1];

  var x3 = x1 + x2;
  var midX = x3/2;
  var y3 = y1 + y2;
  var midY = y3/2;

  var midpoint = point(midX, midY);

  return midpoint;
}
},{"turf-point":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-midpoint/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isolines/node_modules/turf-grid/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-square/node_modules/turf-point/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-destination/node_modules/turf-point/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sum/index.js":[function(require,module,exports){
var inside = require('turf-inside');

/**
* Calculates the sum of a field for {@link Point} features within a set of {@link Polygon} features.
*
* @module turf/sum
* @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
* @param {FeatureCollection} points a FeatureCollection of {@link Point} features
* @param {String} inField the field in input data to analyze
* @param {String} outField the field in which to store results
* @return {FeatureCollection} a FeatureCollection of {@link Polygon} features
* with properties listed as `outField`
* @example
* var polygons = turf.featurecollection([
*   turf.polygon([[
*     [-87.990188, 43.026486],
*     [-87.990188, 43.062115],
*     [-87.913284, 43.062115],
*     [-87.913284, 43.026486],
*     [-87.990188, 43.026486]
*   ]]),
*   turf.polygon([[
*     [-87.973709, 42.962452],
*     [-87.973709, 43.014689],
*     [-87.904014, 43.014689],
*     [-87.904014, 42.962452],
*     [-87.973709, 42.962452]
*   ]])
* ]);
* var points = turf.featurecollection([
*   turf.point([-87.974052, 43.049321], {population: 200}),
*   turf.point([-87.957229, 43.037277], {population: 600}),
*   turf.point([-87.931137, 43.048568], {population: 100}),
*   turf.point([-87.963409, 42.99611], {population: 200}),
*   turf.point([-87.94178, 42.974762], {population: 300})
* ]);
*
* var aggregated = turf.sum(
*   polygons, points, 'population', 'sum');
*
* var result = turf.featurecollection(
*   points.features.concat(aggregated.features));
*
* //=result
*/
module.exports = function(polyFC, ptFC, inField, outField){
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = sum(values);
  });

  return polyFC;
};

function sum(x) {
    var value = 0;
    for (var i = 0; i < x.length; i++) {
        value += x[i];
    }
    return value;
}

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sum/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-sum/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tag/index.js":[function(require,module,exports){
var inside = require('turf-inside');

/**
 * Takes a {@link FeatureCollection} of {@link Point} features and a FeatureCollection of {@link Polygon} features and performs a spatial join.
 *
 * @module turf/tag
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
 * @param {String} polyId property in `polygons` to add to joined Point features
 * @param {String} containingPolyId property in `points` in which to store joined property from `polygons
 * @return {FeatureCollection} a FeatureCollection of point features
 * @example
 * var bbox = [0, 0, 50, 50];
 * // create a triangular grid of polygons
 * var triangleGrid = turf.tin(turf.grid(bbox, 10));
 * triangleGrid.features.forEach(function(f) {
 *   f.properties.fill = '#' +
 *     (~~(Math.random() * 16)).toString(16) +
 *     (~~(Math.random() * 16)).toString(16) +
 *     (~~(Math.random() * 16)).toString(16);
 *   f.properties.stroke = 0;
 *   f.properties['fill-opacity'] = 1;
 * });
 * var randomPoints = turf.random('point', 30, {
 *   bbox: bbox
 * });
 * var both = turf.featurecollection(
 *   triangleGrid.features.concat(randomPoints.features));
 *
 * //=both
 *
 * var tagged = turf.tag(randomPoints, triangleGrid,
 *                       'fill', 'marker-color');
 *
 * //=tagged
 */
module.exports = function(points, polygons, field, outField){
  // prevent mutations
  points = JSON.parse(JSON.stringify(points));
  polygons = JSON.parse(JSON.stringify(polygons));
  points.features.forEach(function(pt) {
    if (!pt.properties) {
      pt.properties = {};
    }
    polygons.features.forEach(function(poly) {
      if (pt.properties[outField] === undefined) {
        var isInside = inside(pt, poly);
        if (isInside) {
          pt.properties[outField] = poly.properties[field];
        }
      }
    });
  });
  return points;
};

},{"turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tag/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tag/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tin/index.js":[function(require,module,exports){
//http://en.wikipedia.org/wiki/Delaunay_triangulation
//https://github.com/ironwallaby/delaunay
var polygon = require('turf-polygon');
var featurecollection = require('turf-featurecollection');

/**
 * Takes a set of points and the name of a z-value property and
 * creates a [Triangulated Irregular Network](http://en.wikipedia.org/wiki/Triangulated_irregular_network),
 * or a TIN for short, returned as a collection of Polygons. These are often used
 * for developing elevation contour maps or stepped heat visualizations.
 *
 * This triangulates the points, as well as adds properties called `a`, `b`,
 * and `c` representing the value of the given `propertyName` at each of
 * the points that represent the corners of the triangle.
 *
 * @module turf/tin
 * @param {FeatureCollection} points - a GeoJSON FeatureCollection containing
 * Features with {@link Point} geometries
 * @param {string=} propertyName - name of the property from which to pull z values.
 * This is optional: if not given, then there will be no extra data added to the
 * derived triangles.
 * @return {FeatureCollection} TIN output
 * @example
 * // generate some random point data
 * var points = turf.random('points', 30, {
 *   bbox: [50, 30, 70, 50]
 * });
 * //=points
 * // add a random property to each point between 0 and 9
 * for (var i = 0; i < points.features.length; i++) {
 *   points.features[i].properties.z = ~~(Math.random() * 9);
 * }
 * var tin = turf.tin(points, 'z')
 * for (var i = 0; i < tin.features.length; i++) {
 *   var properties  = tin.features[i].properties;
 *   // roughly turn the properties of each
 *   // triangle into a fill color
 *   // so we can visualize the result
 *   properties.fill = '#' + properties.a +
 *     properties.b + properties.c;
 * }
 * //=tin
 */
module.exports = function(points, z) {
  //break down points
  return featurecollection(triangulate(points.features.map(function(p) {
    var point = {
      x: p.geometry.coordinates[0],
      y: p.geometry.coordinates[1]
    };
    if (z) point.z = p.properties[z];
    return point;
  })).map(function(triangle) {
    return polygon([[
        [triangle.a.x, triangle.a.y],
        [triangle.b.x, triangle.b.y],
        [triangle.c.x, triangle.c.y],
        [triangle.a.x, triangle.a.y]
    ]], {
        a: triangle.a.z,
        b: triangle.b.z,
        c: triangle.c.z
      });
  }));
};

function Triangle(a, b, c) {
  this.a = a;
  this.b = b;
  this.c = c;

  var A = b.x - a.x,
    B = b.y - a.y,
    C = c.x - a.x,
    D = c.y - a.y,
    E = A * (a.x + b.x) + B * (a.y + b.y),
    F = C * (a.x + c.x) + D * (a.y + c.y),
    G = 2 * (A * (c.y - b.y) - B * (c.x - b.x)),
    minx, miny, dx, dy;

  /* If the points of the triangle are collinear, then just find the
   * extremes and use the midpoint as the center of the circumcircle. */
  if (Math.abs(G) < 0.000001) {
    minx = Math.min(a.x, b.x, c.x);
    miny = Math.min(a.y, b.y, c.y);
    dx = (Math.max(a.x, b.x, c.x) - minx) * 0.5;
    dy = (Math.max(a.y, b.y, c.y) - miny) * 0.5;

    this.x = minx + dx;
    this.y = miny + dy;
    this.r = dx * dx + dy * dy;
  } else {
    this.x = (D * E - B * F) / G;
    this.y = (A * F - C * E) / G;
    dx = this.x - a.x;
    dy = this.y - a.y;
    this.r = dx * dx + dy * dy;
  }
}

function byX(a, b) {
  return b.x - a.x;
}

function dedup(edges) {
  var j = edges.length,
    a, b, i, m, n;

  outer:
  while (j) {
    b = edges[--j];
    a = edges[--j];
    i = j;
    while (i) {
      n = edges[--i];
      m = edges[--i];
      if ((a === m && b === n) || (a === n && b === m)) {
        edges.splice(j, 2);
        edges.splice(i, 2);
        j -= 2;
        continue outer;
      }
    }
  }
}

function triangulate(vertices) {
  /* Bail if there aren't enough vertices to form any triangles. */
  if (vertices.length < 3)
    return [];

    /* Ensure the vertex array is in order of descending X coordinate
     * (which is needed to ensure a subquadratic runtime), and then find
     * the bounding box around the points. */
  vertices.sort(byX);

  var i = vertices.length - 1,
    xmin = vertices[i].x,
    xmax = vertices[0].x,
    ymin = vertices[i].y,
    ymax = ymin;

  while (i--) {
    if (vertices[i].y < ymin)
      ymin = vertices[i].y;
    if (vertices[i].y > ymax)
      ymax = vertices[i].y;
  }

  /* Find a supertriangle, which is a triangle that surrounds all the
   * vertices. This is used like something of a sentinel value to remove
   * cases in the main algorithm, and is removed before we return any
   * results.
   *
   * Once found, put it in the "open" list. (The "open" list is for
   * triangles who may still need to be considered; the "closed" list is
   * for triangles which do not.) */
  var dx = xmax - xmin,
    dy = ymax - ymin,
    dmax = (dx > dy) ? dx : dy,
    xmid = (xmax + xmin) * 0.5,
    ymid = (ymax + ymin) * 0.5,
    open = [
      new Triangle({
        x: xmid - 20 * dmax,
        y: ymid - dmax,
        __sentinel: true
      },
      {
        x: xmid,
        y: ymid + 20 * dmax,
        __sentinel: true
      },
      {
        x: xmid + 20 * dmax,
        y: ymid - dmax,
        __sentinel: true
      }
    )],
    closed = [],
    edges = [],
    j, a, b;

    /* Incrementally add each vertex to the mesh. */
  i = vertices.length;
  while (i--) {
    /* For each open triangle, check to see if the current point is
     * inside it's circumcircle. If it is, remove the triangle and add
     * it's edges to an edge list. */
    edges.length = 0;
    j = open.length;
    while (j--) {
      /* If this point is to the right of this triangle's circumcircle,
       * then this triangle should never get checked again. Remove it
       * from the open list, add it to the closed list, and skip. */
      dx = vertices[i].x - open[j].x;
      if (dx > 0 && dx * dx > open[j].r) {
        closed.push(open[j]);
        open.splice(j, 1);
        continue;
      }

      /* If not, skip this triangle. */
      dy = vertices[i].y - open[j].y;
      if (dx * dx + dy * dy > open[j].r)
        continue;

      /* Remove the triangle and add it's edges to the edge list. */
      edges.push(
        open[j].a, open[j].b,
        open[j].b, open[j].c,
        open[j].c, open[j].a
      );
      open.splice(j, 1);
    }

    /* Remove any doubled edges. */
    dedup(edges);

    /* Add a new triangle for each edge. */
    j = edges.length;
    while (j) {
      b = edges[--j];
      a = edges[--j];
      open.push(new Triangle(a, b, vertices[i]));
    }
  }

  /* Copy any remaining open triangles to the closed list, and then
   * remove any triangles that share a vertex with the supertriangle. */
  Array.prototype.push.apply(closed, open);

  i = closed.length;
  while (i--)
  if (closed[i].a.__sentinel ||
      closed[i].b.__sentinel ||
      closed[i].c.__sentinel)
      closed.splice(i, 1);

      /* Yay, we're done! */
  return closed;
}

},{"turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tin/node_modules/turf-featurecollection/index.js","turf-polygon":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tin/node_modules/turf-polygon/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tin/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-tin/node_modules/turf-polygon/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-polygon/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/index.js":[function(require,module,exports){
// look here for help http://svn.osgeo.org/grass/grass/branches/releasebranch_6_4/vector/v.overlay/main.c
//must be array of polygons

// depend on jsts for now https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html

var jsts = require('jsts');

/**
 * Takes two {@link Polygon} features and returnes a combined {@link Polygon} feature. If the input Polygon features are not contiguous, this function returns a {@link MultiPolygon} feature.
 *
 * @module turf/union
 * @param {Polygon} poly1 an input Polygon
 * @param {Polygon} poly2 another input Polygon
 * @return {Feature} a combined {@link Polygon} or {@link MultiPolygon} feature
 * @example
 * var poly1 = turf.polygon([[
 *  [-82.574787, 35.594087],
 *  [-82.574787, 35.615581],
 *  [-82.545261, 35.615581],
 *  [-82.545261, 35.594087],
 *  [-82.574787, 35.594087]
 * ]]);
 * poly1.properties.fill = '#0f0';
 * var poly2 = turf.polygon([[
 *  [-82.560024, 35.585153],
 *  [-82.560024, 35.602602],
 *  [-82.52964, 35.602602],
 *  [-82.52964, 35.585153],
 *  [-82.560024, 35.585153]
 * ]]);
 * poly2.properties.fill = '#00f';
 * var polyFC = turf.featurecollection([poly1, poly2]);
 *
 * var union = turf.union(poly1, poly2);
 *
 * //=polyFC
 *
 * //=union
 */
module.exports = function(poly1, poly2){
  var reader = new jsts.io.GeoJSONReader();
  var a = reader.read(JSON.stringify(poly1.geometry));
  var b = reader.read(JSON.stringify(poly2.geometry));
  var union = a.union(b);
  var parser = new jsts.io.GeoJSONParser();

  union = parser.write(union);
  return {
    type: 'Feature',
    geometry: union,
    properties: poly1.properties
  };
}

},{"jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/index.js"][0].apply(exports,arguments)
},{"./lib/jsts":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/lib/jsts.js","javascript.util":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/lib/jsts.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/lib/jsts.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js":[function(require,module,exports){
(function (global){
/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011-2014 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
;(function(){var e=this;function f(a,b){var c=a.split("."),d=e;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var t;c.length&&(t=c.shift());)c.length||void 0===b?d=d[t]?d[t]:d[t]={}:d[t]=b}function g(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.p=function(a,c,O){var M=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,M)}};function h(a){this.message=a||""}g(h,Error);f("javascript.util.EmptyStackException",h);h.prototype.name="EmptyStackException";function k(a){this.message=a||""}g(k,Error);f("javascript.util.IndexOutOfBoundsException",k);k.prototype.name="IndexOutOfBoundsException";function l(){}f("javascript.util.Iterator",l);l.prototype.hasNext=l.prototype.c;l.prototype.next=l.prototype.next;l.prototype.remove=l.prototype.remove;function m(){}f("javascript.util.Collection",m);function n(){}g(n,m);f("javascript.util.List",n);function p(){}f("javascript.util.Map",p);function q(a){this.message=a||""}g(q,Error);f("javascript.util.NoSuchElementException",q);q.prototype.name="NoSuchElementException";function r(a){this.message=a||""}g(r,Error);r.prototype.name="OperationNotSupported";function s(a){this.a=[];a instanceof m&&this.e(a)}g(s,n);f("javascript.util.ArrayList",s);s.prototype.a=null;s.prototype.add=function(a){this.a.push(a);return!0};s.prototype.add=s.prototype.add;s.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};s.prototype.addAll=s.prototype.e;s.prototype.set=function(a,b){var c=this.a[a];this.a[a]=b;return c};s.prototype.set=s.prototype.set;s.prototype.f=function(){return new u(this)};s.prototype.iterator=s.prototype.f;
s.prototype.get=function(a){if(0>a||a>=this.size())throw new k;return this.a[a]};s.prototype.get=s.prototype.get;s.prototype.g=function(){return 0===this.a.length};s.prototype.isEmpty=s.prototype.g;s.prototype.size=function(){return this.a.length};s.prototype.size=s.prototype.size;s.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};s.prototype.toArray=s.prototype.h;
s.prototype.remove=function(a){for(var b=!1,c=0,d=this.a.length;c<d;c++)if(this.a[c]===a){this.a.splice(c,1);b=!0;break}return b};s.prototype.remove=s.prototype.remove;function u(a){this.j=a}f("$jscomp.scope.Iterator_",u);u.prototype.j=null;u.prototype.b=0;u.prototype.next=function(){if(this.b===this.j.size())throw new q;return this.j.get(this.b++)};u.prototype.next=u.prototype.next;u.prototype.c=function(){return this.b<this.j.size()?!0:!1};u.prototype.hasNext=u.prototype.c;
u.prototype.remove=function(){throw new r;};u.prototype.remove=u.prototype.remove;function v(){}f("javascript.util.Arrays",v);
v.sort=function(){var a=arguments[0],b,c,d;if(1===arguments.length)a.sort();else if(2===arguments.length)c=arguments[1],d=function(a,b){return c.compare(a,b)},a.sort(d);else if(3===arguments.length)for(b=a.slice(arguments[1],arguments[2]),b.sort(),d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b]);else if(4===arguments.length)for(b=a.slice(arguments[1],arguments[2]),c=arguments[3],d=function(a,b){return c.compare(a,b)},b.sort(d),
d=a.slice(0,arguments[1]).concat(b,a.slice(arguments[2],a.length)),a.splice(0,a.length),b=0;b<d.length;b++)a.push(d[b])};v.asList=function(a){for(var b=new s,c=0,d=a.length;c<d;c++)b.add(a[c]);return b};function w(){this.i={}}g(w,p);f("javascript.util.HashMap",w);w.prototype.i=null;w.prototype.get=function(a){return this.i[a]||null};w.prototype.get=w.prototype.get;w.prototype.put=function(a,b){return this.i[a]=b};w.prototype.put=w.prototype.put;w.prototype.m=function(){var a=new s,b;for(b in this.i)this.i.hasOwnProperty(b)&&a.add(this.i[b]);return a};w.prototype.values=w.prototype.m;w.prototype.size=function(){return this.m().size()};w.prototype.size=w.prototype.size;function x(){}g(x,m);f("javascript.util.Set",x);function y(a){this.a=[];a instanceof m&&this.e(a)}g(y,x);f("javascript.util.HashSet",y);y.prototype.a=null;y.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(this.a[b]===a)return!0;return!1};y.prototype.contains=y.prototype.contains;y.prototype.add=function(a){if(this.contains(a))return!1;this.a.push(a);return!0};y.prototype.add=y.prototype.add;y.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};y.prototype.addAll=y.prototype.e;
y.prototype.remove=function(){throw new r;};y.prototype.remove=y.prototype.remove;y.prototype.size=function(){return this.a.length};y.prototype.g=function(){return 0===this.a.length};y.prototype.isEmpty=y.prototype.g;y.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};y.prototype.toArray=y.prototype.h;y.prototype.f=function(){return new z(this)};y.prototype.iterator=y.prototype.f;function z(a){this.k=a}f("$jscomp.scope.Iterator_$1",z);z.prototype.k=null;
z.prototype.b=0;z.prototype.next=function(){if(this.b===this.k.size())throw new q;return this.k.a[this.b++]};z.prototype.next=z.prototype.next;z.prototype.c=function(){return this.b<this.k.size()?!0:!1};z.prototype.hasNext=z.prototype.c;z.prototype.remove=function(){throw new r;};z.prototype.remove=z.prototype.remove;function A(){}g(A,p);f("javascript.util.SortedMap",A);function B(){}g(B,x);f("javascript.util.SortedSet",B);function C(){this.a=[]}g(C,n);f("javascript.util.Stack",C);C.prototype.a=null;C.prototype.push=function(a){this.a.push(a);return a};C.prototype.push=C.prototype.push;C.prototype.pop=function(){if(0===this.a.length)throw new h;return this.a.pop()};C.prototype.pop=C.prototype.pop;C.prototype.o=function(){if(0===this.a.length)throw new h;return this.a[this.a.length-1]};C.prototype.peek=C.prototype.o;C.prototype.empty=function(){return 0===this.a.length?!0:!1};C.prototype.empty=C.prototype.empty;
C.prototype.g=function(){return this.empty()};C.prototype.isEmpty=C.prototype.g;C.prototype.search=function(a){return this.a.indexOf(a)};C.prototype.search=C.prototype.search;C.prototype.size=function(){return this.a.length};C.prototype.size=C.prototype.size;C.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};C.prototype.toArray=C.prototype.h;function D(a){return null==a?null:a.parent}function E(a,b){null!==a&&(a.color=b)}function F(a){return null==a?null:a.left}function G(a){return null==a?null:a.right}function H(){this.d=null;this.n=0}g(H,A);f("javascript.util.TreeMap",H);H.prototype.get=function(a){for(var b=this.d;null!==b;){var c=a.compareTo(b.key);if(0>c)b=b.left;else if(0<c)b=b.right;else return b.value}return null};H.prototype.get=H.prototype.get;
H.prototype.put=function(a,b){if(null===this.d)return this.d={key:a,value:b,left:null,right:null,parent:null,color:0},this.n=1,null;var c=this.d,d,t;do if(d=c,t=a.compareTo(c.key),0>t)c=c.left;else if(0<t)c=c.right;else return d=c.value,c.value=b,d;while(null!==c);c={key:a,left:null,right:null,value:b,parent:d,color:0};0>t?d.left=c:d.right=c;for(c.color=1;null!=c&&c!=this.d&&1==c.parent.color;)D(c)==F(D(D(c)))?(d=G(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==G(D(c))&&
(c=D(c),I(this,c)),E(D(c),0),E(D(D(c)),1),J(this,D(D(c))))):(d=F(D(D(c))),1==(null==d?0:d.color)?(E(D(c),0),E(d,0),E(D(D(c)),1),c=D(D(c))):(c==F(D(c))&&(c=D(c),J(this,c)),E(D(c),0),E(D(D(c)),1),I(this,D(D(c)))));this.d.color=0;this.n++;return null};H.prototype.put=H.prototype.put;H.prototype.m=function(){var a=new s,b;b=this.d;if(null!=b)for(;null!=b.left;)b=b.left;if(null!==b)for(a.add(b.value);null!==(b=K(b));)a.add(b.value);return a};H.prototype.values=H.prototype.m;
function I(a,b){if(null!=b){var c=b.right;b.right=c.left;null!=c.left&&(c.left.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.left==b?b.parent.left=c:b.parent.right=c;c.left=b;b.parent=c}}function J(a,b){if(null!=b){var c=b.left;b.left=c.right;null!=c.right&&(c.right.parent=b);c.parent=b.parent;null==b.parent?a.d=c:b.parent.right==b?b.parent.right=c:b.parent.left=c;c.right=b;b.parent=c}}
function K(a){if(null===a)return null;if(null!==a.right)for(var b=a.right;null!==b.left;)b=b.left;else for(b=a.parent;null!==b&&a===b.right;)a=b,b=b.parent;return b}H.prototype.size=function(){return this.n};H.prototype.size=H.prototype.size;function L(a){this.a=[];a instanceof m&&this.e(a)}g(L,B);f("javascript.util.TreeSet",L);L.prototype.a=null;L.prototype.contains=function(a){for(var b=0,c=this.a.length;b<c;b++)if(0===this.a[b].compareTo(a))return!0;return!1};L.prototype.contains=L.prototype.contains;L.prototype.add=function(a){if(this.contains(a))return!1;for(var b=0,c=this.a.length;b<c;b++)if(1===this.a[b].compareTo(a))return this.a.splice(b,0,a),!0;this.a.push(a);return!0};L.prototype.add=L.prototype.add;
L.prototype.e=function(a){for(a=a.f();a.c();)this.add(a.next());return!0};L.prototype.addAll=L.prototype.e;L.prototype.remove=function(){throw new r;};L.prototype.remove=L.prototype.remove;L.prototype.size=function(){return this.a.length};L.prototype.size=L.prototype.size;L.prototype.g=function(){return 0===this.a.length};L.prototype.isEmpty=L.prototype.g;L.prototype.h=function(){for(var a=[],b=0,c=this.a.length;b<c;b++)a.push(this.a[b]);return a};L.prototype.toArray=L.prototype.h;L.prototype.f=function(){return new N(this)};
L.prototype.iterator=L.prototype.f;function N(a){this.l=a}f("$jscomp.scope.Iterator_$2",N);N.prototype.l=null;N.prototype.b=0;N.prototype.next=function(){if(this.b===this.l.size())throw new q;return this.l.a[this.b++]};N.prototype.next=N.prototype.next;N.prototype.c=function(){return this.b<this.l.size()?!0:!1};N.prototype.hasNext=N.prototype.c;N.prototype.remove=function(){throw new r;};N.prototype.remove=N.prototype.remove;"undefined"!==typeof global&&(global.javascript={},global.javascript.util={},global.javascript.util.ArrayList=s,global.javascript.util.Arrays=v,global.javascript.util.Collection=m,global.javascript.util.EmptyStackException=h,global.javascript.util.HashMap=w,global.javascript.util.HashSet=y,global.javascript.util.IndexOutOfBoundsException=k,global.javascript.util.Iterator=l,global.javascript.util.List=n,global.javascript.util.Map=p,global.javascript.util.NoSuchElementException=q,global.javascript.util.OperationNotSupported=
r,global.javascript.util.Set=x,global.javascript.util.SortedMap=A,global.javascript.util.SortedSet=B,global.javascript.util.Stack=C,global.javascript.util.TreeMap=H,global.javascript.util.TreeSet=L);}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-merge/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/index.js"][0].apply(exports,arguments)
},{"./dist/javascript.util-node.min.js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-union/node_modules/jsts/node_modules/javascript.util/dist/javascript.util-node.min.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-variance/index.js":[function(require,module,exports){
var ss = require('simple-statistics');
var inside = require('turf-inside');

/**
* Calculates the variance value of a field for {@link Point} features within a set of {@link Polygon} features.
*
* @module turf/variance
* @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
* @param {FeatureCollection} points a FeatureCollection of {@link Point} features
* @param {string} inField the field in input data to analyze
* @param {string} outField the field in which to store results
* @return {FeatureCollection} a FeatureCollection of {@link Polygon} features
* with properties listed as `outField`
* @example
* var polygons = turf.featurecollection([
*   turf.polygon([[
*     [-97.414398, 37.684092],
*     [-97.414398, 37.731353],
*     [-97.332344, 37.731353],
*     [-97.332344, 37.684092],
*     [-97.414398, 37.684092]
*   ]]),
*   turf.polygon([[
*     [-97.333717, 37.606072],
*     [-97.333717, 37.675397],
*     [-97.237586, 37.675397],
*     [-97.237586, 37.606072],
*     [-97.333717, 37.606072]
*   ]])
* ]);
* var points = turf.featurecollection([
*   turf.point([-97.401351, 37.719676], {population: 200}),
*   turf.point([-97.355346, 37.706639], {population: 600}),
*   turf.point([-97.387962, 37.70012], {population: 100}),
*   turf.point([-97.301788, 37.66507], {population: 200}),
*   turf.point([-97.265052, 37.643325], {population: 300})]);
*
* var aggregated = turf.variance(
*   polygons, points, 'population', 'variance');
*
* var result = turf.featurecollection(
*   points.features.concat(aggregated.features));
*
* //=result
*/
module.exports = function (polyFC, ptFC, inField, outField) {
  polyFC.features.forEach(function(poly){
    if(!poly.properties){
      poly.properties = {};
    }
    var values = [];
    ptFC.features.forEach(function(pt){
      if (inside(pt, poly)) {
        values.push(pt.properties[inField]);
      }
    });
    poly.properties[outField] = ss.variance(values);
  });

  return polyFC;
};

},{"simple-statistics":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-variance/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-variance/node_modules/simple-statistics/src/simple_statistics.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-variance/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-within/index.js":[function(require,module,exports){
var inside = require('turf-inside');
var featureCollection = require('turf-featurecollection');

/**
 * Takes a {@link FeatureCollection} of {@link Point} features and a FeatureCollection of {@link Polygon} features and returns a FeatureCollection of Point features representing all points that fall within a collection of polygons.
 *
 * @module turf/within
 * @param {FeatureCollection} points a FeatureCollection of {@link Point} features
 * @param {FeatureCollection} polygons a FeatureCollection of {@link Polygon} features
 * @return {FeatureCollection} a collection of all points that land
 * within at least one polygon
 * @example
 * var searchWithin = turf.featurecollection([
 *   turf.polygon([[
 *     [-46.653,-23.543],
 *     [-46.634,-23.5346],
 *     [-46.613,-23.543],
 *     [-46.614,-23.559],
 *     [-46.631,-23.567],
 *     [-46.653,-23.560],
 *     [-46.653,-23.543]
 *   ]])
 * ]);
 * var points = turf.featurecollection([
 *   turf.point([-46.6318, -23.5523]),
 *   turf.point([-46.6246, -23.5325]),
 *   turf.point([-46.6062, -23.5513]),
 *   turf.point([-46.663, -23.554]),
 *   turf.point([-46.643, -23.557])
 * ]);
 *
 * var ptsWithin = turf.within(points, searchWithin);
 *
 * //=points
 *
 * //=searchWithin
 *
 * //=ptsWithin
 */
module.exports = function(ptFC, polyFC){
  var pointsWithin = featureCollection([]);
  for (var i = 0; i < polyFC.features.length; i++) {
    for (var j = 0; j < ptFC.features.length; j++) {
      var isInside = inside(ptFC.features[j], polyFC.features[i]);
      if(isInside){
        pointsWithin.features.push(ptFC.features[j]);
      }
    }
  }
  return pointsWithin;
};

},{"turf-featurecollection":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-within/node_modules/turf-featurecollection/index.js","turf-inside":"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-within/node_modules/turf-inside/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-within/node_modules/turf-featurecollection/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-isobands/node_modules/turf-featurecollection/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-within/node_modules/turf-inside/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/turf-aggregate/node_modules/turf-median/node_modules/turf-inside/index.js"][0].apply(exports,arguments)
},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/index.js":[function(require,module,exports){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('is-array')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50
Buffer.poolSize = 8192 // not used by this implementation

var kMaxLength = 0x3fffffff
var rootParent = {}

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Note:
 *
 * - Implementation must support adding new properties to `Uint8Array` instances.
 *   Firefox 4-29 lacked support, fixed in Firefox 30+.
 *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *    incorrect length in some situations.
 *
 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will
 * get the Object implementation, which is slower but will work correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = (function () {
  try {
    var buf = new ArrayBuffer(0)
    var arr = new Uint8Array(buf)
    arr.foo = function () { return 42 }
    return 42 === arr.foo() && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        new Uint8Array(1).subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
})()

/**
 * Class: Buffer
 * =============
 *
 * The Buffer constructor returns instances of `Uint8Array` that are augmented
 * with function properties for all the node `Buffer` API functions. We use
 * `Uint8Array` so that square bracket notation works as expected -- it returns
 * a single octet.
 *
 * By augmenting the instances, we can avoid modifying the `Uint8Array`
 * prototype.
 */
function Buffer (subject, encoding, noZero) {
  if (!(this instanceof Buffer))
    return new Buffer(subject, encoding, noZero)

  var type = typeof subject

  // Find the length
  var length
  if (type === 'number')
    length = subject > 0 ? subject >>> 0 : 0
  else if (type === 'string') {
    length = Buffer.byteLength(subject, encoding)
  } else if (type === 'object' && subject !== null) { // assume object is array-like
    if (subject.type === 'Buffer' && isArray(subject.data))
      subject = subject.data
    length = +subject.length > 0 ? Math.floor(+subject.length) : 0
  } else
    throw new TypeError('must start with number, buffer, array or string')

  if (length > kMaxLength)
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
      'size: 0x' + kMaxLength.toString(16) + ' bytes')

  var buf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Preferred: Return an augmented `Uint8Array` instance for best performance
    buf = Buffer._augment(new Uint8Array(length))
  } else {
    // Fallback: Return THIS instance of Buffer (created by `new`)
    buf = this
    buf.length = length
    buf._isBuffer = true
  }

  var i
  if (Buffer.TYPED_ARRAY_SUPPORT && typeof subject.byteLength === 'number') {
    // Speed optimization -- use set if we're copying from a typed array
    buf._set(subject)
  } else if (isArrayish(subject)) {
    // Treat array-ish objects as a byte array
    if (Buffer.isBuffer(subject)) {
      for (i = 0; i < length; i++)
        buf[i] = subject.readUInt8(i)
    } else {
      for (i = 0; i < length; i++)
        buf[i] = ((subject[i] % 256) + 256) % 256
    }
  } else if (type === 'string') {
    buf.write(subject, 0, encoding)
  } else if (type === 'number' && !Buffer.TYPED_ARRAY_SUPPORT && !noZero) {
    for (i = 0; i < length; i++) {
      buf[i] = 0
    }
  }

  if (length > 0 && length <= Buffer.poolSize)
    buf.parent = rootParent

  return buf
}

function SlowBuffer(subject, encoding, noZero) {
  if (!(this instanceof SlowBuffer))
    return new SlowBuffer(subject, encoding, noZero)

  var buf = new Buffer(subject, encoding, noZero)
  delete buf.parent
  return buf
}

Buffer.isBuffer = function (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b))
    throw new TypeError('Arguments must be Buffers')

  var x = a.length
  var y = b.length
  for (var i = 0, len = Math.min(x, y); i < len && a[i] === b[i]; i++) {}
  if (i !== len) {
    x = a[i]
    y = b[i]
  }
  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'binary':
    case 'base64':
    case 'raw':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function (list, totalLength) {
  if (!isArray(list)) throw new TypeError('Usage: Buffer.concat(list[, length])')

  if (list.length === 0) {
    return new Buffer(0)
  } else if (list.length === 1) {
    return list[0]
  }

  var i
  if (totalLength === undefined) {
    totalLength = 0
    for (i = 0; i < list.length; i++) {
      totalLength += list[i].length
    }
  }

  var buf = new Buffer(totalLength)
  var pos = 0
  for (i = 0; i < list.length; i++) {
    var item = list[i]
    item.copy(buf, pos)
    pos += item.length
  }
  return buf
}

Buffer.byteLength = function (str, encoding) {
  var ret
  str = str + ''
  switch (encoding || 'utf8') {
    case 'ascii':
    case 'binary':
    case 'raw':
      ret = str.length
      break
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      ret = str.length * 2
      break
    case 'hex':
      ret = str.length >>> 1
      break
    case 'utf8':
    case 'utf-8':
      ret = utf8ToBytes(str).length
      break
    case 'base64':
      ret = base64ToBytes(str).length
      break
    default:
      ret = str.length
  }
  return ret
}

// pre-set for values that may exist in the future
Buffer.prototype.length = undefined
Buffer.prototype.parent = undefined

// toString(encoding, start=0, end=buffer.length)
Buffer.prototype.toString = function (encoding, start, end) {
  var loweredCase = false

  start = start >>> 0
  end = end === undefined || end === Infinity ? this.length : end >>> 0

  if (!encoding) encoding = 'utf8'
  if (start < 0) start = 0
  if (end > this.length) end = this.length
  if (end <= start) return ''

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'binary':
        return binarySlice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase)
          throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.equals = function (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max)
      str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  return Buffer.compare(this, b)
}

// `get` will be removed in Node 0.13+
Buffer.prototype.get = function (offset) {
  console.log('.get() is deprecated. Access using array indexes instead.')
  return this.readUInt8(offset)
}

// `set` will be removed in Node 0.13+
Buffer.prototype.set = function (v, offset) {
  console.log('.set() is deprecated. Access using array indexes instead.')
  return this.writeUInt8(v, offset)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new Error('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; i++) {
    var byte = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(byte)) throw new Error('Invalid hex string')
    buf[offset + i] = byte
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  var charsWritten = blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
  return charsWritten
}

function asciiWrite (buf, string, offset, length) {
  var charsWritten = blitBuffer(asciiToBytes(string), buf, offset, length)
  return charsWritten
}

function binaryWrite (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  var charsWritten = blitBuffer(base64ToBytes(string), buf, offset, length)
  return charsWritten
}

function utf16leWrite (buf, string, offset, length) {
  var charsWritten = blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length, 2)
  return charsWritten
}

Buffer.prototype.write = function (string, offset, length, encoding) {
  // Support both (string, offset, length, encoding)
  // and the legacy (string, encoding, offset, length)
  if (isFinite(offset)) {
    if (!isFinite(length)) {
      encoding = length
      length = undefined
    }
  } else {  // legacy
    var swap = encoding
    encoding = offset
    offset = length
    length = swap
  }

  offset = Number(offset) || 0

  if (length < 0 || offset < 0 || offset > this.length)
    throw new RangeError('attempt to write outside buffer bounds');

  var remaining = this.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }
  encoding = String(encoding || 'utf8').toLowerCase()

  var ret
  switch (encoding) {
    case 'hex':
      ret = hexWrite(this, string, offset, length)
      break
    case 'utf8':
    case 'utf-8':
      ret = utf8Write(this, string, offset, length)
      break
    case 'ascii':
      ret = asciiWrite(this, string, offset, length)
      break
    case 'binary':
      ret = binaryWrite(this, string, offset, length)
      break
    case 'base64':
      ret = base64Write(this, string, offset, length)
      break
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      ret = utf16leWrite(this, string, offset, length)
      break
    default:
      throw new TypeError('Unknown encoding: ' + encoding)
  }
  return ret
}

Buffer.prototype.toJSON = function () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  var res = ''
  var tmp = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    if (buf[i] <= 0x7F) {
      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])
      tmp = ''
    } else {
      tmp += '%' + buf[i].toString(16)
    }
  }

  return res + decodeUtf8Char(tmp)
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function binarySlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; i++) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len;
    if (start < 0)
      start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0)
      end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start)
    end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = Buffer._augment(this.subarray(start, end))
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined, true)
    for (var i = 0; i < sliceLen; i++) {
      newBuf[i] = this[i + start]
    }
  }

  if (newBuf.length)
    newBuf.parent = this.parent || this

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0)
    throw new RangeError('offset is not uint')
  if (offset + ext > length)
    throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100))
    val += this[offset + i] * mul

  return val
}

Buffer.prototype.readUIntBE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100))
    val += this[offset + --byteLength] * mul;

  return val
}

Buffer.prototype.readUInt8 = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
      ((this[offset + 1] << 16) |
      (this[offset + 2] << 8) |
      this[offset + 3])
}

Buffer.prototype.readIntLE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100))
    val += this[offset + i] * mul
  mul *= 0x80

  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100))
    val += this[offset + --i] * mul
  mul *= 0x80

  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80))
    return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16) |
      (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
      (this[offset + 1] << 16) |
      (this[offset + 2] << 8) |
      (this[offset + 3])
}

Buffer.prototype.readFloatLE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
}

Buffer.prototype.writeUIntLE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100))
    this[offset + i] = (value / mul) >>> 0 & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100))
    this[offset + i] = (value / mul) >>> 0 & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = value
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
  } else objectWriteUInt16(this, value, offset, true)
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = value
  } else objectWriteUInt16(this, value, offset, false)
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = value
  } else objectWriteUInt32(this, value, offset, true)
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = value
  } else objectWriteUInt32(this, value, offset, false)
  return offset + 4
}

Buffer.prototype.writeIntLE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkInt(this,
             value,
             offset,
             byteLength,
             Math.pow(2, 8 * byteLength - 1) - 1,
             -Math.pow(2, 8 * byteLength - 1))
  }

  var i = 0
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100))
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkInt(this,
             value,
             offset,
             byteLength,
             Math.pow(2, 8 * byteLength - 1) - 1,
             -Math.pow(2, 8 * byteLength - 1))
  }

  var i = byteLength - 1
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100))
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = value
  return offset + 1
}

Buffer.prototype.writeInt16LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
  } else objectWriteUInt16(this, value, offset, true)
  return offset + 2
}

Buffer.prototype.writeInt16BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = value
  } else objectWriteUInt16(this, value, offset, false)
  return offset + 2
}

Buffer.prototype.writeInt32LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else objectWriteUInt32(this, value, offset, true)
  return offset + 4
}

Buffer.prototype.writeInt32BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = value
  } else objectWriteUInt32(this, value, offset, false)
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
  if (offset < 0) throw new RangeError('index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert)
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert)
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function (target, target_start, start, end) {
  var source = this

  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (target_start >= target.length) target_start = target.length
  if (!target_start) target_start = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || source.length === 0) return 0

  // Fatal error conditions
  if (target_start < 0)
    throw new RangeError('targetStart out of bounds')
  if (start < 0 || start >= source.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length)
    end = this.length
  if (target.length - target_start < end - start)
    end = target.length - target_start + start

  var len = end - start

  if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < len; i++) {
      target[i + target_start] = this[i + start]
    }
  } else {
    target._set(this.subarray(start, start + len), target_start)
  }

  return len
}

// fill(value, start=0, end=buffer.length)
Buffer.prototype.fill = function (value, start, end) {
  if (!value) value = 0
  if (!start) start = 0
  if (!end) end = this.length

  if (end < start) throw new RangeError('end < start')

  // Fill 0 bytes; we're done
  if (end === start) return
  if (this.length === 0) return

  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')
  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')

  var i
  if (typeof value === 'number') {
    for (i = start; i < end; i++) {
      this[i] = value
    }
  } else {
    var bytes = utf8ToBytes(value.toString())
    var len = bytes.length
    for (i = start; i < end; i++) {
      this[i] = bytes[i % len]
    }
  }

  return this
}

/**
 * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.
 * Added in Node 0.12. Only available in browsers that support ArrayBuffer.
 */
Buffer.prototype.toArrayBuffer = function () {
  if (typeof Uint8Array !== 'undefined') {
    if (Buffer.TYPED_ARRAY_SUPPORT) {
      return (new Buffer(this)).buffer
    } else {
      var buf = new Uint8Array(this.length)
      for (var i = 0, len = buf.length; i < len; i += 1) {
        buf[i] = this[i]
      }
      return buf.buffer
    }
  } else {
    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')
  }
}

// HELPER FUNCTIONS
// ================

var BP = Buffer.prototype

/**
 * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods
 */
Buffer._augment = function (arr) {
  arr.constructor = Buffer
  arr._isBuffer = true

  // save reference to original Uint8Array get/set methods before overwriting
  arr._get = arr.get
  arr._set = arr.set

  // deprecated, will be removed in node 0.13+
  arr.get = BP.get
  arr.set = BP.set

  arr.write = BP.write
  arr.toString = BP.toString
  arr.toLocaleString = BP.toString
  arr.toJSON = BP.toJSON
  arr.equals = BP.equals
  arr.compare = BP.compare
  arr.copy = BP.copy
  arr.slice = BP.slice
  arr.readUIntLE = BP.readUIntLE
  arr.readUIntBE = BP.readUIntBE
  arr.readUInt8 = BP.readUInt8
  arr.readUInt16LE = BP.readUInt16LE
  arr.readUInt16BE = BP.readUInt16BE
  arr.readUInt32LE = BP.readUInt32LE
  arr.readUInt32BE = BP.readUInt32BE
  arr.readIntLE = BP.readIntLE
  arr.readIntBE = BP.readIntBE
  arr.readInt8 = BP.readInt8
  arr.readInt16LE = BP.readInt16LE
  arr.readInt16BE = BP.readInt16BE
  arr.readInt32LE = BP.readInt32LE
  arr.readInt32BE = BP.readInt32BE
  arr.readFloatLE = BP.readFloatLE
  arr.readFloatBE = BP.readFloatBE
  arr.readDoubleLE = BP.readDoubleLE
  arr.readDoubleBE = BP.readDoubleBE
  arr.writeUInt8 = BP.writeUInt8
  arr.writeUIntLE = BP.writeUIntLE
  arr.writeUIntBE = BP.writeUIntBE
  arr.writeUInt16LE = BP.writeUInt16LE
  arr.writeUInt16BE = BP.writeUInt16BE
  arr.writeUInt32LE = BP.writeUInt32LE
  arr.writeUInt32BE = BP.writeUInt32BE
  arr.writeIntLE = BP.writeIntLE
  arr.writeIntBE = BP.writeIntBE
  arr.writeInt8 = BP.writeInt8
  arr.writeInt16LE = BP.writeInt16LE
  arr.writeInt16BE = BP.writeInt16BE
  arr.writeInt32LE = BP.writeInt32LE
  arr.writeInt32BE = BP.writeInt32BE
  arr.writeFloatLE = BP.writeFloatLE
  arr.writeFloatBE = BP.writeFloatBE
  arr.writeDoubleLE = BP.writeDoubleLE
  arr.writeDoubleBE = BP.writeDoubleBE
  arr.fill = BP.fill
  arr.inspect = BP.inspect
  arr.toArrayBuffer = BP.toArrayBuffer

  return arr
}

var INVALID_BASE64_RE = /[^+\/0-9A-z\-]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function isArrayish (subject) {
  return isArray(subject) || Buffer.isBuffer(subject) ||
      subject && typeof subject === 'object' &&
      typeof subject.length === 'number'
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes(string, units) {
  var codePoint, length = string.length
  var leadSurrogate = null
  units = units || Infinity
  var bytes = []
  var i = 0

  for (; i<length; i++) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {

      // last char was a lead
      if (leadSurrogate) {

        // 2 leads in a row
        if (codePoint < 0xDC00) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          leadSurrogate = codePoint
          continue
        }

        // valid surrogate pair
        else {
          codePoint = leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00 | 0x10000
          leadSurrogate = null
        }
      }

      // no lead yet
      else {

        // unexpected trail
        if (codePoint > 0xDBFF) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // unpaired lead
        else if (i + 1 === length) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        else {
          leadSurrogate = codePoint
          continue
        }
      }
    }

    // valid bmp char, but last char was a lead
    else if (leadSurrogate) {
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
      leadSurrogate = null
    }

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    }
    else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      );
    }
    else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      );
    }
    else if (codePoint < 0x200000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      );
    }
    else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; i++) {

    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length, unitSize) {
  if (unitSize) length -= length % unitSize;
  for (var i = 0; i < length; i++) {
    if ((i + offset >= dst.length) || (i >= src.length))
      break
    dst[i + offset] = src[i]
  }
  return i
}

function decodeUtf8Char (str) {
  try {
    return decodeURIComponent(str)
  } catch (err) {
    return String.fromCharCode(0xFFFD) // UTF 8 invalid char
  }
}

},{"base64-js":"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","ieee754":"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","is-array":"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js"}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js":[function(require,module,exports){
var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

;(function (exports) {
	'use strict';

  var Arr = (typeof Uint8Array !== 'undefined')
    ? Uint8Array
    : Array

	var PLUS   = '+'.charCodeAt(0)
	var SLASH  = '/'.charCodeAt(0)
	var NUMBER = '0'.charCodeAt(0)
	var LOWER  = 'a'.charCodeAt(0)
	var UPPER  = 'A'.charCodeAt(0)
	var PLUS_URL_SAFE = '-'.charCodeAt(0)
	var SLASH_URL_SAFE = '_'.charCodeAt(0)

	function decode (elt) {
		var code = elt.charCodeAt(0)
		if (code === PLUS ||
		    code === PLUS_URL_SAFE)
			return 62 // '+'
		if (code === SLASH ||
		    code === SLASH_URL_SAFE)
			return 63 // '/'
		if (code < NUMBER)
			return -1 //no match
		if (code < NUMBER + 10)
			return code - NUMBER + 26 + 26
		if (code < UPPER + 26)
			return code - UPPER
		if (code < LOWER + 26)
			return code - LOWER + 26
	}

	function b64ToByteArray (b64) {
		var i, j, l, tmp, placeHolders, arr

		if (b64.length % 4 > 0) {
			throw new Error('Invalid string. Length must be a multiple of 4')
		}

		// the number of equal signs (place holders)
		// if there are two placeholders, than the two characters before it
		// represent one byte
		// if there is only one, then the three characters before it represent 2 bytes
		// this is just a cheap hack to not do indexOf twice
		var len = b64.length
		placeHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0

		// base64 is 4/3 + up to two characters of the original data
		arr = new Arr(b64.length * 3 / 4 - placeHolders)

		// if there are placeholders, only get up to the last complete 4 chars
		l = placeHolders > 0 ? b64.length - 4 : b64.length

		var L = 0

		function push (v) {
			arr[L++] = v
		}

		for (i = 0, j = 0; i < l; i += 4, j += 3) {
			tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))
			push((tmp & 0xFF0000) >> 16)
			push((tmp & 0xFF00) >> 8)
			push(tmp & 0xFF)
		}

		if (placeHolders === 2) {
			tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)
			push(tmp & 0xFF)
		} else if (placeHolders === 1) {
			tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)
			push((tmp >> 8) & 0xFF)
			push(tmp & 0xFF)
		}

		return arr
	}

	function uint8ToBase64 (uint8) {
		var i,
			extraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes
			output = "",
			temp, length

		function encode (num) {
			return lookup.charAt(num)
		}

		function tripletToBase64 (num) {
			return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)
		}

		// go through the array every three bytes, we'll deal with trailing stuff later
		for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {
			temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
			output += tripletToBase64(temp)
		}

		// pad the end with zeros, but make sure to not forget the extra bytes
		switch (extraBytes) {
			case 1:
				temp = uint8[uint8.length - 1]
				output += encode(temp >> 2)
				output += encode((temp << 4) & 0x3F)
				output += '=='
				break
			case 2:
				temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])
				output += encode(temp >> 10)
				output += encode((temp >> 4) & 0x3F)
				output += encode((temp << 2) & 0x3F)
				output += '='
				break
		}

		return output
	}

	exports.toByteArray = b64ToByteArray
	exports.fromByteArray = uint8ToBase64
}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js":[function(require,module,exports){
exports.read = function(buffer, offset, isLE, mLen, nBytes) {
  var e, m,
      eLen = nBytes * 8 - mLen - 1,
      eMax = (1 << eLen) - 1,
      eBias = eMax >> 1,
      nBits = -7,
      i = isLE ? (nBytes - 1) : 0,
      d = isLE ? -1 : 1,
      s = buffer[offset + i];

  i += d;

  e = s & ((1 << (-nBits)) - 1);
  s >>= (-nBits);
  nBits += eLen;
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8);

  m = e & ((1 << (-nBits)) - 1);
  e >>= (-nBits);
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8);

  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity);
  } else {
    m = m + Math.pow(2, mLen);
    e = e - eBias;
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
};

exports.write = function(buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c,
      eLen = nBytes * 8 - mLen - 1,
      eMax = (1 << eLen) - 1,
      eBias = eMax >> 1,
      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),
      i = isLE ? 0 : (nBytes - 1),
      d = isLE ? 1 : -1,
      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;

  value = Math.abs(value);

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0;
    e = eMax;
  } else {
    e = Math.floor(Math.log(value) / Math.LN2);
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * Math.pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }

    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
      e = 0;
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8);

  e = (e << mLen) | m;
  eLen += mLen;
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8);

  buffer[offset + i - d] |= s * 128;
};

},{}],"/Users/tmcw/src/presentations/turf-geodc/node_modules/watchify/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js":[function(require,module,exports){
arguments[4]["/Users/tmcw/src/presentations/turf-geodc/node_modules/turf/node_modules/is-array/index.js"][0].apply(exports,arguments)
},{}]},{},["/Users/tmcw/src/presentations/turf-geodc/index.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy9pcy1hcnJheS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1hdmVyYWdlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWdncmVnYXRlL25vZGVfbW9kdWxlcy90dXJmLWF2ZXJhZ2Uvbm9kZV9tb2R1bGVzL3R1cmYtaW5zaWRlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWdncmVnYXRlL25vZGVfbW9kdWxlcy90dXJmLWNvdW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWdncmVnYXRlL25vZGVfbW9kdWxlcy90dXJmLWNvdW50L25vZGVfbW9kdWxlcy90dXJmLWluc2lkZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1kZXZpYXRpb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtZGV2aWF0aW9uL25vZGVfbW9kdWxlcy9zaW1wbGUtc3RhdGlzdGljcy9zcmMvc2ltcGxlX3N0YXRpc3RpY3MuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtZGV2aWF0aW9uL25vZGVfbW9kdWxlcy90dXJmLWluc2lkZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1tYXgvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtbWF4L25vZGVfbW9kdWxlcy9zaW1wbGUtc3RhdGlzdGljcy9zcmMvc2ltcGxlX3N0YXRpc3RpY3MuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtbWF4L25vZGVfbW9kdWxlcy90dXJmLWluc2lkZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1tZWRpYW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtbWVkaWFuL25vZGVfbW9kdWxlcy9zaW1wbGUtc3RhdGlzdGljcy9zcmMvc2ltcGxlX3N0YXRpc3RpY3MuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtbWVkaWFuL25vZGVfbW9kdWxlcy90dXJmLWluc2lkZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1taW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtbWluL25vZGVfbW9kdWxlcy9zaW1wbGUtc3RhdGlzdGljcy9zcmMvc2ltcGxlX3N0YXRpc3RpY3MuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtc3VtL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWdncmVnYXRlL25vZGVfbW9kdWxlcy90dXJmLXN1bS9ub2RlX21vZHVsZXMvc2ltcGxlLXN0YXRpc3RpY3Mvc3JjL3NpbXBsZV9zdGF0aXN0aWNzLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWdncmVnYXRlL25vZGVfbW9kdWxlcy90dXJmLXN1bS9ub2RlX21vZHVsZXMvdHVyZi1pbnNpZGUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtdmFyaWFuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hZ2dyZWdhdGUvbm9kZV9tb2R1bGVzL3R1cmYtdmFyaWFuY2Uvbm9kZV9tb2R1bGVzL3NpbXBsZS1zdGF0aXN0aWNzL3NyYy9zaW1wbGVfc3RhdGlzdGljcy5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFsb25nL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWxvbmcvbm9kZV9tb2R1bGVzL3R1cmYtYmVhcmluZy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFsb25nL25vZGVfbW9kdWxlcy90dXJmLWRlc3RpbmF0aW9uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWxvbmcvbm9kZV9tb2R1bGVzL3R1cmYtZGlzdGFuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hbG9uZy9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFyZWEvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hcmVhL25vZGVfbW9kdWxlcy9nZW9qc29uLWFyZWEvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hcmVhL25vZGVfbW9kdWxlcy9nZW9qc29uLWFyZWEvbm9kZV9tb2R1bGVzL3dnczg0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYXZlcmFnZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJib3gtcG9seWdvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJib3gtcG9seWdvbi9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYmVhcmluZy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJlemllci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJlemllci9ub2RlX21vZHVsZXMvdHVyZi1saW5lc3RyaW5nL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYmV6aWVyL3NwbGluZS5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJ1ZmZlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJ1ZmZlci9ub2RlX21vZHVsZXMvanN0cy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJ1ZmZlci9ub2RlX21vZHVsZXMvanN0cy9saWIvanN0cy5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJ1ZmZlci9ub2RlX21vZHVsZXMvanN0cy9ub2RlX21vZHVsZXMvamF2YXNjcmlwdC51dGlsL2Rpc3QvamF2YXNjcmlwdC51dGlsLW5vZGUubWluLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYnVmZmVyL25vZGVfbW9kdWxlcy9qc3RzL25vZGVfbW9kdWxlcy9qYXZhc2NyaXB0LnV0aWwvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1idWZmZXIvbm9kZV9tb2R1bGVzL3R1cmYtY29tYmluZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJ1ZmZlci9ub2RlX21vZHVsZXMvdHVyZi1mZWF0dXJlY29sbGVjdGlvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJ1ZmZlci9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY2VudGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY2VudGVyL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNlbnRlci9ub2RlX21vZHVsZXMvdHVyZi1leHRlbnQvbm9kZV9tb2R1bGVzL2ZsYXR0ZW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jZW50ZXIvbm9kZV9tb2R1bGVzL3R1cmYtcG9pbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jZW50cm9pZC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNlbnRyb2lkL25vZGVfbW9kdWxlcy90dXJmLW1ldGEvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jZW50cm9pZC9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbWJpbmUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29uY2F2ZS9ub2RlX21vZHVsZXMvdHVyZi1kaXN0YW5jZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtbWVyZ2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLW1lcmdlL25vZGVfbW9kdWxlcy9jbG9uZS9jbG9uZS5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtbWVyZ2Uvbm9kZV9tb2R1bGVzL3R1cmYtdW5pb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLW1lcmdlL25vZGVfbW9kdWxlcy90dXJmLXVuaW9uL25vZGVfbW9kdWxlcy9qc3RzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29uY2F2ZS9ub2RlX21vZHVsZXMvdHVyZi1tZXJnZS9ub2RlX21vZHVsZXMvdHVyZi11bmlvbi9ub2RlX21vZHVsZXMvanN0cy9saWIvanN0cy5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtbWVyZ2Uvbm9kZV9tb2R1bGVzL3R1cmYtdW5pb24vbm9kZV9tb2R1bGVzL2pzdHMvbm9kZV9tb2R1bGVzL2phdmFzY3JpcHQudXRpbC9kaXN0L2phdmFzY3JpcHQudXRpbC1ub2RlLm1pbi5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtbWVyZ2Uvbm9kZV9tb2R1bGVzL3R1cmYtdW5pb24vbm9kZV9tb2R1bGVzL2pzdHMvbm9kZV9tb2R1bGVzL2phdmFzY3JpcHQudXRpbC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtcG9pbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLXRpbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtdGluL25vZGVfbW9kdWxlcy90dXJmLW5lYXJlc3QvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLXRpbi9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtdGluL25vZGVfbW9kdWxlcy90dXJmLXBvbHlnb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL2NoLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9saWIvY2gxZC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbGliL2NoMmQuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL2xpYi9jaG5kLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvYWZmaW5lLWh1bGwvYWZmLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvYWZmaW5lLWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvcm9idXN0LXNjYWxlL25vZGVfbW9kdWxlcy90d28tc3VtL3R3by1zdW0uanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9hZmZpbmUtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc2NhbGUvcm9idXN0LXNjYWxlLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvYWZmaW5lLWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvcm9idXN0LXN1YnRyYWN0L3JvYnVzdC1kaWZmLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvYWZmaW5lLWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvcm9idXN0LXN1bS9yb2J1c3Qtc3VtLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvYWZmaW5lLWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvdHdvLXByb2R1Y3QvdHdvLXByb2R1Y3QuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9hZmZpbmUtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL29yaWVudGF0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvaW5jcmVtZW50YWwtY29udmV4LWh1bGwvaWNoLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvaW5jcmVtZW50YWwtY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvcm9idXN0LXNjYWxlL25vZGVfbW9kdWxlcy90d28tc3VtL3R3by1zdW0uanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9pbmNyZW1lbnRhbC1jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc2NhbGUvcm9idXN0LXNjYWxlLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvaW5jcmVtZW50YWwtY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvcm9idXN0LXN1YnRyYWN0L3JvYnVzdC1kaWZmLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvaW5jcmVtZW50YWwtY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvcm9idXN0LXN1bS9yb2J1c3Qtc3VtLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvaW5jcmVtZW50YWwtY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvdHdvLXByb2R1Y3QvdHdvLXByb2R1Y3QuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9pbmNyZW1lbnRhbC1jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL29yaWVudGF0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvaW5jcmVtZW50YWwtY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL3NpbXBsaWNpYWwtY29tcGxleC9ub2RlX21vZHVsZXMvYml0LXR3aWRkbGUvdHdpZGRsZS5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL2luY3JlbWVudGFsLWNvbnZleC1odWxsL25vZGVfbW9kdWxlcy9zaW1wbGljaWFsLWNvbXBsZXgvbm9kZV9tb2R1bGVzL3VuaW9uLWZpbmQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9pbmNyZW1lbnRhbC1jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvc2ltcGxpY2lhbC1jb21wbGV4L3RvcG9sb2d5LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvbW9ub3RvbmUtY29udmV4LWh1bGwtMmQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9tb25vdG9uZS1jb252ZXgtaHVsbC0yZC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc2NhbGUvbm9kZV9tb2R1bGVzL3R3by1zdW0vdHdvLXN1bS5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL21vbm90b25lLWNvbnZleC1odWxsLTJkL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vbm9kZV9tb2R1bGVzL3JvYnVzdC1zY2FsZS9yb2J1c3Qtc2NhbGUuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9tb25vdG9uZS1jb252ZXgtaHVsbC0yZC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc3VidHJhY3Qvcm9idXN0LWRpZmYuanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9tb25vdG9uZS1jb252ZXgtaHVsbC0yZC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc3VtL3JvYnVzdC1zdW0uanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9tb25vdG9uZS1jb252ZXgtaHVsbC0yZC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy90d28tcHJvZHVjdC90d28tcHJvZHVjdC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL21vbm90b25lLWNvbnZleC1odWxsLTJkL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vb3JpZW50YXRpb24uanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL3R1cmYtbWV0YS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY291bnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1kZXN0aW5hdGlvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWRlc3RpbmF0aW9uL25vZGVfbW9kdWxlcy90dXJmLXBvaW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZGV2aWF0aW9uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZGlzdGFuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1kaXN0YW5jZS9ub2RlX21vZHVsZXMvdHVyZi1pbnZhcmlhbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1lbnZlbG9wZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWVudmVsb3BlL25vZGVfbW9kdWxlcy90dXJmLWJib3gtcG9seWdvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWVudmVsb3BlL25vZGVfbW9kdWxlcy90dXJmLWJib3gtcG9seWdvbi9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZW52ZWxvcGUvbm9kZV9tb2R1bGVzL3R1cmYtZXh0ZW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZW52ZWxvcGUvbm9kZV9tb2R1bGVzL3R1cmYtZXh0ZW50L25vZGVfbW9kdWxlcy9mbGF0dGVuL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZXJhc2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1lcmFzZS9ub2RlX21vZHVsZXMvanN0cy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWVyYXNlL25vZGVfbW9kdWxlcy9qc3RzL2xpYi9qc3RzLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZXJhc2Uvbm9kZV9tb2R1bGVzL2pzdHMvbm9kZV9tb2R1bGVzL2phdmFzY3JpcHQudXRpbC9kaXN0L2phdmFzY3JpcHQudXRpbC1ub2RlLm1pbi5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWVyYXNlL25vZGVfbW9kdWxlcy9qc3RzL25vZGVfbW9kdWxlcy9qYXZhc2NyaXB0LnV0aWwvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1leHBsb2RlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZXhwbG9kZS9ub2RlX21vZHVsZXMvdHVyZi1mZWF0dXJlY29sbGVjdGlvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWV4cGxvZGUvbm9kZV9tb2R1bGVzL3R1cmYtbWV0YS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9ub2RlX21vZHVsZXMvdHVyZi1tZXRhL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1maWx0ZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1maWx0ZXIvbm9kZV9tb2R1bGVzL3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1mbGlwL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZ3JpZC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWhleC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWhleC9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaW5zaWRlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaW50ZXJzZWN0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaW50ZXJzZWN0L25vZGVfbW9kdWxlcy9qc3RzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaW50ZXJzZWN0L25vZGVfbW9kdWxlcy9qc3RzL2xpYi9qc3RzLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaW50ZXJzZWN0L25vZGVfbW9kdWxlcy9qc3RzL25vZGVfbW9kdWxlcy9qYXZhc2NyaXB0LnV0aWwvZGlzdC9qYXZhc2NyaXB0LnV0aWwtbm9kZS5taW4uanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pbnRlcnNlY3Qvbm9kZV9tb2R1bGVzL2pzdHMvbm9kZV9tb2R1bGVzL2phdmFzY3JpcHQudXRpbC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWludGVyc2VjdC9ub2RlX21vZHVsZXMvdHVyZi1mZWF0dXJlY29sbGVjdGlvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL2NvbnJlYy5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtZXh0ZW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtZXh0ZW50L25vZGVfbW9kdWxlcy9mbGF0dGVuL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1ncmlkL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtZ3JpZC9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLWxpbmVzdHJpbmcvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1wbGFuZXBvaW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtcG9seWdvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXNpemUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1zcXVhcmUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1zcXVhcmUvbm9kZV9tb2R1bGVzL3R1cmYtZGlzdGFuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1zcXVhcmUvbm9kZV9tb2R1bGVzL3R1cmYtbWlkcG9pbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1zcXVhcmUvbm9kZV9tb2R1bGVzL3R1cmYtbWlkcG9pbnQvbm9kZV9tb2R1bGVzL3R1cmYtcG9pbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1zcXVhcmUvbm9kZV9tb2R1bGVzL3R1cmYtcG9pbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi10aW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi10aW4vbm9kZV9tb2R1bGVzL3R1cmYtbmVhcmVzdC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXRpbi9ub2RlX21vZHVsZXMvdHVyZi1uZWFyZXN0L25vZGVfbW9kdWxlcy90dXJmLWRpc3RhbmNlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtdGluL25vZGVfbW9kdWxlcy90dXJmLXBvaW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvY29ucmVjLmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29saW5lcy9ub2RlX21vZHVsZXMvdHVyZi1leHRlbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29saW5lcy9ub2RlX21vZHVsZXMvdHVyZi1leHRlbnQvbm9kZV9tb2R1bGVzL2ZsYXR0ZW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29saW5lcy9ub2RlX21vZHVsZXMvdHVyZi1ncmlkL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvbm9kZV9tb2R1bGVzL3R1cmYtZ3JpZC9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2xpbmVzL25vZGVfbW9kdWxlcy90dXJmLWxpbmVzdHJpbmcvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29saW5lcy9ub2RlX21vZHVsZXMvdHVyZi1wbGFuZXBvaW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvbm9kZV9tb2R1bGVzL3R1cmYtc3F1YXJlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvbm9kZV9tb2R1bGVzL3R1cmYtc3F1YXJlL25vZGVfbW9kdWxlcy90dXJmLWRpc3RhbmNlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvbm9kZV9tb2R1bGVzL3R1cmYtc3F1YXJlL25vZGVfbW9kdWxlcy90dXJmLW1pZHBvaW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvbm9kZV9tb2R1bGVzL3R1cmYtc3F1YXJlL25vZGVfbW9kdWxlcy90dXJmLW1pZHBvaW50L25vZGVfbW9kdWxlcy90dXJmLXBvaW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvbm9kZV9tb2R1bGVzL3R1cmYtdGluL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvbGluZXMvbm9kZV9tb2R1bGVzL3R1cmYtdGluL25vZGVfbW9kdWxlcy90dXJmLW5lYXJlc3QvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29saW5lcy9ub2RlX21vZHVsZXMvdHVyZi10aW4vbm9kZV9tb2R1bGVzL3R1cmYtbmVhcmVzdC9ub2RlX21vZHVsZXMvdHVyZi1kaXN0YW5jZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWplbmtzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYta2lua3MvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1saW5lLWRpc3RhbmNlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtbGluZS1kaXN0YW5jZS9ub2RlX21vZHVsZXMvdHVyZi1kaXN0YW5jZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWxpbmVzdHJpbmcvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1tYXgvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1tZWRpYW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1tZXJnZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLW1lcmdlL25vZGVfbW9kdWxlcy9jbG9uZS9jbG9uZS5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLW1lcmdlL25vZGVfbW9kdWxlcy90dXJmLXVuaW9uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtbWVyZ2Uvbm9kZV9tb2R1bGVzL3R1cmYtdW5pb24vbm9kZV9tb2R1bGVzL2pzdHMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1tZXJnZS9ub2RlX21vZHVsZXMvdHVyZi11bmlvbi9ub2RlX21vZHVsZXMvanN0cy9saWIvanN0cy5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLW1lcmdlL25vZGVfbW9kdWxlcy90dXJmLXVuaW9uL25vZGVfbW9kdWxlcy9qc3RzL25vZGVfbW9kdWxlcy9qYXZhc2NyaXB0LnV0aWwvZGlzdC9qYXZhc2NyaXB0LnV0aWwtbm9kZS5taW4uanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1tZXJnZS9ub2RlX21vZHVsZXMvdHVyZi11bmlvbi9ub2RlX21vZHVsZXMvanN0cy9ub2RlX21vZHVsZXMvamF2YXNjcmlwdC51dGlsL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtbWlkcG9pbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1taW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1uZWFyZXN0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtcGxhbmVwb2ludC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXBvaW50LW9uLXN1cmZhY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC1vbi1zdXJmYWNlL25vZGVfbW9kdWxlcy90dXJmLWNlbnRlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXBvaW50LW9uLXN1cmZhY2Uvbm9kZV9tb2R1bGVzL3R1cmYtY2VudGVyL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXBvaW50LW9uLXN1cmZhY2Uvbm9kZV9tb2R1bGVzL3R1cmYtY2VudGVyL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9ub2RlX21vZHVsZXMvZmxhdHRlbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXBvaW50LW9uLXN1cmZhY2Uvbm9kZV9tb2R1bGVzL3R1cmYtZXhwbG9kZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXBvaW50LW9uLXN1cmZhY2Uvbm9kZV9tb2R1bGVzL3R1cmYtZXhwbG9kZS9ub2RlX21vZHVsZXMvdHVyZi1mZWF0dXJlY29sbGVjdGlvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXBvaW50LW9uLXN1cmZhY2Uvbm9kZV9tb2R1bGVzL3R1cmYtZXhwbG9kZS9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXBvaW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtcG9seWdvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXF1YW50aWxlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtcmFuZG9tL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtcmFuZG9tL25vZGVfbW9kdWxlcy9nZW9qc29uLXJhbmRvbS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXJlY2xhc3MvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1yZW1vdmUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1zYW1wbGUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1zaW1wbGlmeS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXNpbXBsaWZ5L25vZGVfbW9kdWxlcy9zaW1wbGlmeS1qcy9zaW1wbGlmeS5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXNpemUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1zcXVhcmUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1zcXVhcmUvbm9kZV9tb2R1bGVzL3R1cmYtbWlkcG9pbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1zdW0vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi10YWcvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi10aW4vaW5kZXguanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi11bmlvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXVuaW9uL25vZGVfbW9kdWxlcy9qc3RzL25vZGVfbW9kdWxlcy9qYXZhc2NyaXB0LnV0aWwvZGlzdC9qYXZhc2NyaXB0LnV0aWwtbm9kZS5taW4uanMiLCJub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi12YXJpYW5jZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLXdpdGhpbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2Jhc2U2NC1qcy9saWIvYjY0LmpzIiwibm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2llZWU3NTQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvd2F0Y2hpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlci9ub2RlX21vZHVsZXMvaXMtYXJyYXkvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaC9DQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTs7QUNBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTs7QUNBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3g0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25GQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1cURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMUNBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVIQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7O0FDQUE7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMUNBOztBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN2JBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdFZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRkE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RUE7O0FDQUE7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMUNBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0NBOztBQ0FBOzs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdENBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUdBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTs7QUNBQTs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMxQ0E7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDamdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqTEE7O0FDQUE7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBOzs7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDcEJBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xHQTs7QUNBQTs7OztBQ0FBOztBQ0FBOzs7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7Ozs7QUNBQTs7QUNBQTs7QUNBQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0Q0E7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoSkE7O0FDQUE7O0FDQUE7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMUNBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7O0FDQUE7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNsR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNsUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3B5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEZBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciB0dXJmID0gcmVxdWlyZSgndHVyZicpO1xudmFyIG1hcCA9IEwubWFwKCdtYXAnLCB7XG4gICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgIGNyczogTC5DUlMuU2ltcGxlLFxuICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2Vcbn0pLnNldFZpZXcoWzAsIDBdLCAwKTtcblxubWFwLmF0dHJpYnV0aW9uQ29udHJvbC5zZXRQcmVmaXgoJyh0KSB0byB0b2dnbGUgdHJhbnNmb3JtcywgKGUpIHRvIHJlc2V0IGV4dGVudCcpO1xuXG52YXIgdGhlTGF5ZXIgPSBMLmxheWVyR3JvdXAoKS5hZGRUbyhtYXApO1xuXG5mdW5jdGlvbiBjb2xvcigpIHtcbiAgICByZXR1cm4gcmFuZG9tQ29sb3Ioe1xuICAgICAgICBsdW1pbm9zaXR5OiAnbGlnaHQnXG4gICAgfSk7XG59XG5cbnZhciBvcHRpb25zID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogJ09yaWdpbmFsJyxcbiAgICAgICAgZGF0YTogbG9nbyxcbiAgICAgICAgY29sb3I6IGNvbG9yKClcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ0VudmVsb3BlJyxcbiAgICAgICAgZGF0YTogdHVyZi5lbnZlbG9wZShsb2dvKSxcbiAgICAgICAgY29sb3I6IGNvbG9yKClcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ0NlbnRlcicsXG4gICAgICAgIGRhdGE6IHR1cmYuY2VudGVyKGxvZ28pLFxuICAgICAgICBjb2xvcjogY29sb3IoKVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnRXhwbG9kZScsXG4gICAgICAgIGRhdGE6IHR1cmYuZXhwbG9kZShsb2dvKSxcbiAgICAgICAgY29sb3I6IGNvbG9yKClcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ1RJTicsXG4gICAgICAgIGRhdGE6IHR1cmYudGluKHR1cmYuZXhwbG9kZShsb2dvKSksXG4gICAgICAgIGNvbG9yOiBjb2xvcigpXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICdDb252ZXgnLFxuICAgICAgICBkYXRhOiB0dXJmLmNvbnZleChsb2dvKSxcbiAgICAgICAgY29sb3I6IGNvbG9yKClcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ0ZsaXAnLFxuICAgICAgICBkYXRhOiB0dXJmLmZsaXAobG9nbyksXG4gICAgICAgIGNvbG9yOiBjb2xvcigpXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICdSYW5kb20nLFxuICAgICAgICBkYXRhOiB0dXJmLnJhbmRvbSgncG9pbnRzJywgNTApLFxuICAgICAgICBjb2xvcjogY29sb3IoKVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnSGV4JyxcbiAgICAgICAgZGF0YTogdHVyZi5oZXgodHVyZi5leHRlbnQobG9nbyksIDEwKSxcbiAgICAgICAgY29sb3I6IGNvbG9yKClcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ0hleC1Db3VudCcsXG4gICAgICAgIGRhdGE6IHR1cmYuY291bnQodHVyZi5oZXgodHVyZi5leHRlbnQobG9nbyksIDEwKSwgdHVyZi5leHBsb2RlKGxvZ28pLCAnY291bnQnKSxcbiAgICAgICAgY29sb3I6IGNvbG9yKClcbiAgICB9XG5dO1xuXG52YXIgb3B0aW9uc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcHRpb25zJyk7XG5cbm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbihvKSB7XG4gICAgdmFyIGxpbmsgPSBvcHRpb25zRGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG4gICAgbGluay5pbm5lckhUTUwgPSBvLm5hbWU7XG4gICAgbGluay5zdHlsZS5iYWNrZ3JvdW5kID0gby5jb2xvcjtcbiAgICBsaW5rLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZWN0RGF0YShvLmRhdGEpO1xuICAgICAgICB0b2dnbGVQYW5lbCgpO1xuICAgIH07XG59KTtcblxuZnVuY3Rpb24gc2VsZWN0RGF0YShkYXRhKSB7XG4gICAgdGhlTGF5ZXIuY2xlYXJMYXllcnMoKTtcbiAgICB2YXIgYWRkZWQgPSBMLmdlb0pzb24oZGF0YSwge1xuICAgICAgICBzdHlsZTogZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMgJiYgZmVhdHVyZS5wcm9wZXJ0aWVzLmNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjZmZmJyxcbiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IGZlYXR1cmUucHJvcGVydGllcy5jb3VudCAvIDEwLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDEsXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDIsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwMCdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjZmZmJyxcbiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuOSxcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiA1LFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAyLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyMwMDAnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcG9pbnRUb0xheWVyOiBmdW5jdGlvbiAoZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgICByZXR1cm4gTC5jaXJjbGVNYXJrZXIobGF0bG5nLCB7XG4gICAgICAgICAgICAgIHJhZGl1czogMTAsXG4gICAgICAgICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgICAgICAgc3Ryb2tlOiB0cnVlLFxuICAgICAgICAgICAgICBjb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICB3ZWlnaHQ6IDMsXG4gICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLmFkZFRvKHRoZUxheWVyKTtcbn1cblxuc2VsZWN0RGF0YShvcHRpb25zWzBdLmRhdGEpO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLndoaWNoID09PSA4NCkgdG9nZ2xlUGFuZWwoKTtcbiAgICBpZiAoZS53aGljaCA9PT0gNjkpIHtcbiAgICAgICAgbWFwLmZpdEJvdW5kcyhMLmdlb0pzb24obG9nbykuZ2V0Qm91bmRzKCkpO1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gdG9nZ2xlUGFuZWwoZSkge1xuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3B0aW9ucycpLmNsYXNzTmFtZSAhPSAnc2hvdycpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wdGlvbnMnKS5jbGFzc05hbWUgPSAnc2hvdyc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wdGlvbnMnKS5jbGFzc05hbWUgPSAnJztcbiAgICB9XG59XG5cblxubWFwLmZpdEJvdW5kcyh0aGVMYXllci5nZXRMYXllcnMoKVswXS5nZXRCb3VuZHMoKSk7XG4iLCIvKipcbiAqIFR1cmYgaXMgYSBtb2R1bGFyIEdJUyBlbmdpbmUgd3JpdHRlbiBpbiBKYXZhU2NyaXB0LiBJdCBwZXJmb3JtcyBnZW9zcGF0aWFsXG4gKiBwcm9jZXNzaW5nIHRhc2tzIHdpdGggR2VvSlNPTiBkYXRhIGFuZCBjYW4gYmUgcnVuIG9uIGEgc2VydmVyIG9yIGluIGEgYnJvd3Nlci5cbiAqXG4gKiBAbW9kdWxlIHR1cmZcbiAqIEBzdW1tYXJ5IEdJUyBGb3IgV2ViIE1hcHNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzb2xpbmVzOiByZXF1aXJlKCd0dXJmLWlzb2xpbmVzJyksXG4gIGlzb2JhbmRzOiByZXF1aXJlKCd0dXJmLWlzb2JhbmRzJyksXG4gIG1lcmdlOiByZXF1aXJlKCd0dXJmLW1lcmdlJyksXG4gIGNvbnZleDogcmVxdWlyZSgndHVyZi1jb252ZXgnKSxcbiAgd2l0aGluOiByZXF1aXJlKCd0dXJmLXdpdGhpbicpLFxuICBjb25jYXZlOiByZXF1aXJlKCd0dXJmLWNvbmNhdmUnKSxcbiAgY291bnQ6IHJlcXVpcmUoJ3R1cmYtY291bnQnKSxcbiAgZXJhc2U6IHJlcXVpcmUoJ3R1cmYtZXJhc2UnKSxcbiAgdmFyaWFuY2U6IHJlcXVpcmUoJ3R1cmYtdmFyaWFuY2UnKSxcbiAgZGV2aWF0aW9uOiByZXF1aXJlKCd0dXJmLWRldmlhdGlvbicpLFxuICBtZWRpYW46IHJlcXVpcmUoJ3R1cmYtbWVkaWFuJyksXG4gIG1pbjogcmVxdWlyZSgndHVyZi1taW4nKSxcbiAgbWF4OiByZXF1aXJlKCd0dXJmLW1heCcpLFxuICBhZ2dyZWdhdGU6IHJlcXVpcmUoJ3R1cmYtYWdncmVnYXRlJyksXG4gIGZsaXA6IHJlcXVpcmUoJ3R1cmYtZmxpcCcpLFxuICBzaW1wbGlmeTogcmVxdWlyZSgndHVyZi1zaW1wbGlmeScpLFxuICBzdW06IHJlcXVpcmUoJ3R1cmYtc3VtJyksXG4gIGF2ZXJhZ2U6IHJlcXVpcmUoJ3R1cmYtYXZlcmFnZScpLFxuICBiZXppZXI6IHJlcXVpcmUoJ3R1cmYtYmV6aWVyJyksXG4gIHRhZzogcmVxdWlyZSgndHVyZi10YWcnKSxcbiAgc2l6ZTogcmVxdWlyZSgndHVyZi1zaXplJyksXG4gIHNhbXBsZTogcmVxdWlyZSgndHVyZi1zYW1wbGUnKSxcbiAgamVua3M6IHJlcXVpcmUoJ3R1cmYtamVua3MnKSxcbiAgcXVhbnRpbGU6IHJlcXVpcmUoJ3R1cmYtcXVhbnRpbGUnKSxcbiAgZW52ZWxvcGU6IHJlcXVpcmUoJ3R1cmYtZW52ZWxvcGUnKSxcbiAgc3F1YXJlOiByZXF1aXJlKCd0dXJmLXNxdWFyZScpLFxuICBtaWRwb2ludDogcmVxdWlyZSgndHVyZi1taWRwb2ludCcpLFxuICBidWZmZXI6IHJlcXVpcmUoJ3R1cmYtYnVmZmVyJyksXG4gIGNlbnRlcjogcmVxdWlyZSgndHVyZi1jZW50ZXInKSxcbiAgY2VudHJvaWQ6IHJlcXVpcmUoJ3R1cmYtY2VudHJvaWQnKSxcbiAgY29tYmluZTogcmVxdWlyZSgndHVyZi1jb21iaW5lJyksXG4gIGRpc3RhbmNlOiByZXF1aXJlKCd0dXJmLWRpc3RhbmNlJyksXG4gIGV4cGxvZGU6IHJlcXVpcmUoJ3R1cmYtZXhwbG9kZScpLFxuICBleHRlbnQ6IHJlcXVpcmUoJ3R1cmYtZXh0ZW50JyksXG4gIGJib3hQb2x5Z29uOiByZXF1aXJlKCd0dXJmLWJib3gtcG9seWdvbicpLFxuICBmZWF0dXJlY29sbGVjdGlvbjogcmVxdWlyZSgndHVyZi1mZWF0dXJlY29sbGVjdGlvbicpLFxuICBmaWx0ZXI6IHJlcXVpcmUoJ3R1cmYtZmlsdGVyJyksXG4gIGdyaWQ6IHJlcXVpcmUoJ3R1cmYtZ3JpZCcpLFxuICBpbnNpZGU6IHJlcXVpcmUoJ3R1cmYtaW5zaWRlJyksXG4gIGludGVyc2VjdDogcmVxdWlyZSgndHVyZi1pbnRlcnNlY3QnKSxcbiAgbGluZXN0cmluZzogcmVxdWlyZSgndHVyZi1saW5lc3RyaW5nJyksXG4gIG5lYXJlc3Q6IHJlcXVpcmUoJ3R1cmYtbmVhcmVzdCcpLFxuICBwbGFuZXBvaW50OiByZXF1aXJlKCd0dXJmLXBsYW5lcG9pbnQnKSxcbiAgcG9pbnQ6IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKSxcbiAgcG9seWdvbjogcmVxdWlyZSgndHVyZi1wb2x5Z29uJyksXG4gIHJhbmRvbTogcmVxdWlyZSgndHVyZi1yYW5kb20nKSxcbiAgcmVjbGFzczogcmVxdWlyZSgndHVyZi1yZWNsYXNzJyksXG4gIHJlbW92ZTogcmVxdWlyZSgndHVyZi1yZW1vdmUnKSxcbiAgdGluOiByZXF1aXJlKCd0dXJmLXRpbicpLFxuICB1bmlvbjogcmVxdWlyZSgndHVyZi11bmlvbicpLFxuICBiZWFyaW5nOiByZXF1aXJlKCd0dXJmLWJlYXJpbmcnKSxcbiAgZGVzdGluYXRpb246IHJlcXVpcmUoJ3R1cmYtZGVzdGluYXRpb24nKSxcbiAgaGV4OiByZXF1aXJlKCd0dXJmLWhleCcpLFxuICBraW5rczogcmVxdWlyZSgndHVyZi1raW5rcycpLFxuICBwb2ludE9uU3VyZmFjZTogcmVxdWlyZSgndHVyZi1wb2ludC1vbi1zdXJmYWNlJyksXG4gIGFyZWE6IHJlcXVpcmUoJ3R1cmYtYXJlYScpLFxuICBhbG9uZzogcmVxdWlyZSgndHVyZi1hbG9uZycpLFxuICBsaW5lRGlzdGFuY2U6IHJlcXVpcmUoJ3R1cmYtbGluZS1kaXN0YW5jZScpXG59O1xuIiwiXG4vKipcbiAqIGlzQXJyYXlcbiAqL1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogdG9TdHJpbmdcbiAqL1xuXG52YXIgc3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gYHZhbGBcbiAqIGlzIGFuIGFycmF5LlxuICpcbiAqIGV4YW1wbGU6XG4gKlxuICogICAgICAgIGlzQXJyYXkoW10pO1xuICogICAgICAgIC8vID4gdHJ1ZVxuICogICAgICAgIGlzQXJyYXkoYXJndW1lbnRzKTtcbiAqICAgICAgICAvLyA+IGZhbHNlXG4gKiAgICAgICAgaXNBcnJheSgnJyk7XG4gKiAgICAgICAgLy8gPiBmYWxzZVxuICpcbiAqIEBwYXJhbSB7bWl4ZWR9IHZhbFxuICogQHJldHVybiB7Ym9vbH1cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXkgfHwgZnVuY3Rpb24gKHZhbCkge1xuICByZXR1cm4gISEgdmFsICYmICdbb2JqZWN0IEFycmF5XScgPT0gc3RyLmNhbGwodmFsKTtcbn07XG4iLCJ2YXIgYXZlcmFnZSA9IHJlcXVpcmUoJ3R1cmYtYXZlcmFnZScpO1xudmFyIHN1bSA9IHJlcXVpcmUoJ3R1cmYtc3VtJyk7XG52YXIgbWVkaWFuID0gcmVxdWlyZSgndHVyZi1tZWRpYW4nKTtcbnZhciBtaW4gPSByZXF1aXJlKCd0dXJmLW1pbicpO1xudmFyIG1heCA9IHJlcXVpcmUoJ3R1cmYtbWF4Jyk7XG52YXIgZGV2aWF0aW9uID0gcmVxdWlyZSgndHVyZi1kZXZpYXRpb24nKTtcbnZhciB2YXJpYW5jZSA9IHJlcXVpcmUoJ3R1cmYtdmFyaWFuY2UnKTtcbnZhciBjb3VudCA9IHJlcXVpcmUoJ3R1cmYtY291bnQnKTtcbnZhciBvcGVyYXRpb25zID0ge307XG5vcGVyYXRpb25zLmF2ZXJhZ2UgPSBhdmVyYWdlO1xub3BlcmF0aW9ucy5zdW0gPSBzdW07XG5vcGVyYXRpb25zLm1lZGlhbiA9IG1lZGlhbjtcbm9wZXJhdGlvbnMubWluID0gbWluO1xub3BlcmF0aW9ucy5tYXggPSBtYXg7XG5vcGVyYXRpb25zLmRldmlhdGlvbiA9IGRldmlhdGlvbjtcbm9wZXJhdGlvbnMudmFyaWFuY2UgPSB2YXJpYW5jZTtcbm9wZXJhdGlvbnMuY291bnQgPSBjb3VudDtcblxuLyoqXG4qIENhbGN1bGF0ZXMgYSBzZXJpZXMgb2YgYWdncmVnYXRpb25zIGZvciBhIHNldCBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIHdpdGhpbiBhIHNldCBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXMuIFN1bSwgYXZlcmFnZSwgY291bnQsIG1pbiwgbWF4LCBhbmQgZGV2aWF0aW9uIGFyZSBzdXBwb3J0ZWQuXG4qXG4qIEBtb2R1bGUgdHVyZi9hZ2dyZWdhdGVcbiogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9seWdvbnMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXNcbiogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9pbnRzIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlc1xuKiBAcGFyYW0ge0FycmF5fSBhZ2dyZWdhdGlvbnMgYW4gYXJyYXkgb2YgYWdncmVnYXRpb24gb2JqZWN0c1xuKiBAcmV0dXJuIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXMgd2l0aCBwcm9wZXJ0aWVzIGxpc3RlZCBhcyBgb3V0RmllbGRgIHZhbHVlcyBpbiBgYWdncmVnYXRpb25zYFxuKiBAZXhhbXBsZVxuKiB2YXIgcG9seWdvbnMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiogICB0dXJmLnBvbHlnb24oW1tcbiogICAgIFsxLjY2OTkyMSwgNDguNjMyOTA4XSxcbiogICAgIFsxLjY2OTkyMSwgNDkuMzgyMzcyXSxcbiogICAgIFszLjYzNjQ3NCwgNDkuMzgyMzcyXSxcbiogICAgIFszLjYzNjQ3NCwgNDguNjMyOTA4XSxcbiogICAgIFsxLjY2OTkyMSwgNDguNjMyOTA4XV1cbiogICBdKSxcbiogICB0dXJmLnBvbHlnb24oW1tcbiogICAgIFsyLjIzMDIyNCwgNDcuODUwMDNdLFxuKiAgICAgWzIuMjMwMjI0LCA0OC42MTExMjFdLFxuKiAgICAgWzQuMzYxNTcyLCA0OC42MTExMjFdLFxuKiAgICAgWzQuMzYxNTcyLCA0Ny44NTAwM10sXG4qICAgICBbMi4yMzAyMjQsIDQ3Ljg1MDAzXV1cbiogICBdKVxuKiBdKTtcbiogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuKiAgIHR1cmYucG9pbnQoWzIuMDU0NDQzLDQ5LjEzODU5Nl0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiogICB0dXJmLnBvaW50KFszLjA2NTE4NSw0OC44NTAyNThdLCB7cG9wdWxhdGlvbjogNjAwfSksXG4qICAgdHVyZi5wb2ludChbMi4zMjkxMDEsNDguNzkyMzldLCB7cG9wdWxhdGlvbjogMTAwfSksXG4qICAgdHVyZi5wb2ludChbMi42MTQ3NDYsNDguMzM0MzQzXSwge3BvcHVsYXRpb246IDIwMH0pLFxuKiAgIHR1cmYucG9pbnQoWzMuNDE2NzQ4LDQ4LjA1NjA1M10sIHtwb3B1bGF0aW9uOiAzMDB9KV0pO1xuKiB2YXIgYWdncmVnYXRpb25zID0gW1xuKiAgIHtcbiogICAgIGFnZ3JlZ2F0aW9uOiAnc3VtJyxcbiogICAgIGluRmllbGQ6ICdwb3B1bGF0aW9uJyxcbiogICAgIG91dEZpZWxkOiAncG9wX3N1bSdcbiogICB9LFxuKiAgIHtcbiogICAgIGFnZ3JlZ2F0aW9uOiAnYXZlcmFnZScsXG4qICAgICBpbkZpZWxkOiAncG9wdWxhdGlvbicsXG4qICAgICBvdXRGaWVsZDogJ3BvcF9hdmcnXG4qICAgfSxcbiogICB7XG4qICAgICBhZ2dyZWdhdGlvbjogJ21lZGlhbicsXG4qICAgICBpbkZpZWxkOiAncG9wdWxhdGlvbicsXG4qICAgICBvdXRGaWVsZDogJ3BvcF9tZWRpYW4nXG4qICAgfSxcbiogICB7XG4qICAgICBhZ2dyZWdhdGlvbjogJ21pbicsXG4qICAgICBpbkZpZWxkOiAncG9wdWxhdGlvbicsXG4qICAgICBvdXRGaWVsZDogJ3BvcF9taW4nXG4qICAgfSxcbiogICB7XG4qICAgICBhZ2dyZWdhdGlvbjogJ21heCcsXG4qICAgICBpbkZpZWxkOiAncG9wdWxhdGlvbicsXG4qICAgICBvdXRGaWVsZDogJ3BvcF9tYXgnXG4qICAgfSxcbiogICB7XG4qICAgICBhZ2dyZWdhdGlvbjogJ2RldmlhdGlvbicsXG4qICAgICBpbkZpZWxkOiAncG9wdWxhdGlvbicsXG4qICAgICBvdXRGaWVsZDogJ3BvcF9kZXZpYXRpb24nXG4qICAgfSxcbiogICB7XG4qICAgICBhZ2dyZWdhdGlvbjogJ3ZhcmlhbmNlJyxcbiogICAgIGluRmllbGQ6ICdwb3B1bGF0aW9uJyxcbiogICAgIG91dEZpZWxkOiAncG9wX3ZhcmlhbmNlJ1xuKiAgIH0sXG4qICAge1xuKiAgICAgYWdncmVnYXRpb246ICdjb3VudCcsXG4qICAgICBpbkZpZWxkOiAnJyxcbiogICAgIG91dEZpZWxkOiAncG9pbnRfY291bnQnXG4qICAgfVxuKiBdO1xuKlxuKiB2YXIgYWdncmVnYXRlZCA9IHR1cmYuYWdncmVnYXRlKFxuKiAgIHBvbHlnb25zLCBwb2ludHMsIGFnZ3JlZ2F0aW9ucyk7XG4qXG4qIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFxuKiAgIHBvaW50cy5mZWF0dXJlcy5jb25jYXQoYWdncmVnYXRlZC5mZWF0dXJlcykpO1xuKlxuKiAvLz1yZXN1bHRcbiovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seWdvbnMsIHBvaW50cywgYWdncmVnYXRpb25zKXtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFnZ3JlZ2F0aW9ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBhZ2cgPSBhZ2dyZWdhdGlvbnNbaV0sXG4gICAgICBvcGVyYXRpb24gPSBhZ2cuYWdncmVnYXRpb24sXG4gICAgICB1bnJlY29nbml6ZWRFcnJvcjtcblxuICAgIGlmIChpc0FnZ3JlZ2F0aW9uT3BlcmF0aW9uKG9wZXJhdGlvbikpIHtcbiAgICAgIGlmIChvcGVyYXRpb24gPT09ICdjb3VudCcpIHtcbiAgICAgICAgcG9seWdvbnMgPSBvcGVyYXRpb25zW29wZXJhdGlvbl0ocG9seWdvbnMsIHBvaW50cywgYWdnLm91dEZpZWxkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBvbHlnb25zID0gb3BlcmF0aW9uc1tvcGVyYXRpb25dKHBvbHlnb25zLCBwb2ludHMsIGFnZy5pbkZpZWxkLCBhZ2cub3V0RmllbGQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiJysgb3BlcmF0aW9uICsnXCIgaXMgbm90IGEgcmVjb2duaXplZCBhZ2dyZWdhdGlvbiBvcGVyYXRpb24uJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBvbHlnb25zO1xufTtcblxuZnVuY3Rpb24gaXNBZ2dyZWdhdGlvbk9wZXJhdGlvbihvcGVyYXRpb24pIHtcbiAgcmV0dXJuIG9wZXJhdGlvbiA9PT0gJ2F2ZXJhZ2UnIHx8XG4gICAgb3BlcmF0aW9uID09PSAnc3VtJyB8fFxuICAgIG9wZXJhdGlvbiA9PT0gJ21lZGlhbicgfHxcbiAgICBvcGVyYXRpb24gPT09ICdtaW4nIHx8XG4gICAgb3BlcmF0aW9uID09PSAnbWF4JyB8fFxuICAgIG9wZXJhdGlvbiA9PT0gJ2RldmlhdGlvbicgfHxcbiAgICBvcGVyYXRpb24gPT09ICd2YXJpYW5jZScgfHxcbiAgICBvcGVyYXRpb24gPT09ICdjb3VudCc7XG59XG4iLCJ2YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5RkMsIHB0RkMsIGluRmllbGQsIG91dEZpZWxkLCBkb25lKXtcbiAgcG9seUZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocG9seSl7XG4gICAgaWYoIXBvbHkucHJvcGVydGllcykgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHB0RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgICBpZiAoaW5zaWRlKHB0LCBwb2x5KSkgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IGF2ZXJhZ2UodmFsdWVzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBvbHlGQztcbn1cblxuZnVuY3Rpb24gYXZlcmFnZSh2YWx1ZXMpIHtcbiAgdmFyIHN1bSA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3VtICs9IHZhbHVlc1tpXTtcbiAgfVxuICByZXR1cm4gc3VtIC8gdmFsdWVzLmxlbmd0aDtcbn1cbiIsIi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXZlbiVFMiU4MCU5M29kZF9ydWxlXG4vLyBtb2RpZmllZCBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vc3Vic3RhY2svcG9pbnQtaW4tcG9seWdvbi9ibG9iL21hc3Rlci9pbmRleC5qc1xuLy8gd2hpY2ggd2FzIG1vZGlmaWVkIGZyb20gaHR0cDovL3d3dy5lY3NlLnJwaS5lZHUvSG9tZXBhZ2VzL3dyZi9SZXNlYXJjaC9TaG9ydF9Ob3Rlcy9wbnBvbHkuaHRtbFxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50LCBwb2x5Z29uKSB7XG4gIHZhciBwb2x5cyA9IHBvbHlnb24uZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gIHZhciBwdCA9IFtwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSwgcG9pbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV1dO1xuICAvLyBub3JtYWxpemUgdG8gbXVsdGlwb2x5Z29uXG4gIGlmKHBvbHlnb24uZ2VvbWV0cnkudHlwZSA9PT0gJ1BvbHlnb24nKSBwb2x5cyA9IFtwb2x5c107XG5cbiAgdmFyIGluc2lkZVBvbHkgPSBmYWxzZTtcbiAgdmFyIGkgPSAwO1xuICB3aGlsZSAoaSA8IHBvbHlzLmxlbmd0aCAmJiAhaW5zaWRlUG9seSkge1xuICAgIC8vIGNoZWNrIGlmIGl0IGlzIGluIHRoZSBvdXRlciByaW5nIGZpcnN0XG4gICAgaWYoaW5SaW5nKHB0LCBwb2x5c1tpXVswXSkpIHtcbiAgICAgIHZhciBpbkhvbGUgPSBmYWxzZTtcbiAgICAgIHZhciBrID0gMTtcbiAgICAgIC8vIGNoZWNrIGZvciB0aGUgcG9pbnQgaW4gYW55IG9mIHRoZSBob2xlc1xuICAgICAgd2hpbGUoayA8IHBvbHlzW2ldLmxlbmd0aCAmJiAhaW5Ib2xlKSB7XG4gICAgICAgIGlmKGluUmluZyhwdCwgcG9seXNbaV1ba10pKSB7XG4gICAgICAgICAgaW5Ib2xlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBrKys7XG4gICAgICB9XG4gICAgICBpZighaW5Ib2xlKSBpbnNpZGVQb2x5ID0gdHJ1ZTtcbiAgICB9XG4gICAgaSsrO1xuICB9XG4gIHJldHVybiBpbnNpZGVQb2x5O1xufVxuXG4vLyBwdCBpcyBbeCx5XSBhbmQgcmluZyBpcyBbW3gseV0sIFt4LHldLC4uXVxuZnVuY3Rpb24gaW5SaW5nIChwdCwgcmluZykge1xuICB2YXIgaXNJbnNpZGUgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IDAsIGogPSByaW5nLmxlbmd0aCAtIDE7IGkgPCByaW5nLmxlbmd0aDsgaiA9IGkrKykge1xuICAgIHZhciB4aSA9IHJpbmdbaV1bMF0sIHlpID0gcmluZ1tpXVsxXTtcbiAgICB2YXIgeGogPSByaW5nW2pdWzBdLCB5aiA9IHJpbmdbal1bMV07XG4gICAgXG4gICAgdmFyIGludGVyc2VjdCA9ICgoeWkgPiBwdFsxXSkgIT0gKHlqID4gcHRbMV0pKVxuICAgICAgICAmJiAocHRbMF0gPCAoeGogLSB4aSkgKiAocHRbMV0gLSB5aSkgLyAoeWogLSB5aSkgKyB4aSk7XG4gICAgaWYgKGludGVyc2VjdCkgaXNJbnNpZGUgPSAhaXNJbnNpZGU7XG4gIH1cbiAgcmV0dXJuIGlzSW5zaWRlO1xufVxuXG4iLCJ2YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5RkMsIHB0RkMsIG91dEZpZWxkLCBkb25lKXtcbiAgcG9seUZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocG9seSl7XG4gICAgaWYoIXBvbHkucHJvcGVydGllcykgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHB0RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgICBpZiAoaW5zaWRlKHB0LCBwb2x5KSkge1xuICAgICAgICB2YWx1ZXMucHVzaCgxKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIHBvbHkucHJvcGVydGllc1tvdXRGaWVsZF0gPSB2YWx1ZXMubGVuZ3RoO1xuICB9KVxuXG4gIHJldHVybiBwb2x5RkM7XG59XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1hdmVyYWdlL25vZGVfbW9kdWxlcy90dXJmLWluc2lkZS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgc3MgPSByZXF1aXJlKCdzaW1wbGUtc3RhdGlzdGljcycpO1xudmFyIGluc2lkZSA9IHJlcXVpcmUoJ3R1cmYtaW5zaWRlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seUZDLCBwdEZDLCBpbkZpZWxkLCBvdXRGaWVsZCwgZG9uZSl7XG4gIHBvbHlGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHBvbHkpe1xuICAgIGlmKCFwb2x5LnByb3BlcnRpZXMpe1xuICAgICAgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgfVxuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBwdEZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocHQpe1xuICAgICAgaWYgKGluc2lkZShwdCwgcG9seSkpIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IHNzLnN0YW5kYXJkX2RldmlhdGlvbih2YWx1ZXMpO1xuICB9KVxuXG4gIHJldHVybiBwb2x5RkM7XG59XG4iLCIvKiBnbG9iYWwgbW9kdWxlICovXG4vLyAjIHNpbXBsZS1zdGF0aXN0aWNzXG4vL1xuLy8gQSBzaW1wbGUsIGxpdGVyYXRlIHN0YXRpc3RpY3Mgc3lzdGVtLiBUaGUgY29kZSBiZWxvdyB1c2VzIHRoZVxuLy8gW0phdmFzY3JpcHQgbW9kdWxlIHBhdHRlcm5dKGh0dHA6Ly93d3cuYWRlcXVhdGVseWdvb2QuY29tLzIwMTAvMy9KYXZhU2NyaXB0LU1vZHVsZS1QYXR0ZXJuLUluLURlcHRoKSxcbi8vIGV2ZW50dWFsbHkgYXNzaWduaW5nIGBzaW1wbGUtc3RhdGlzdGljc2AgdG8gYHNzYCBpbiBicm93c2VycyBvciB0aGVcbi8vIGBleHBvcnRzYCBvYmplY3QgZm9yIG5vZGUuanNcbihmdW5jdGlvbigpIHtcbiAgICB2YXIgc3MgPSB7fTtcblxuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBBc3NpZ24gdGhlIGBzc2Agb2JqZWN0IHRvIGV4cG9ydHMsIHNvIHRoYXQgeW91IGNhbiByZXF1aXJlXG4gICAgICAgIC8vIGl0IGluIFtub2RlLmpzXShodHRwOi8vbm9kZWpzLm9yZy8pXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpbiBhIGJyb3dzZXIsIHdlIGFzc2lnbiBgc3NgIHRvIHRoZSB3aW5kb3cgb2JqZWN0LFxuICAgICAgICAvLyBzbyB5b3UgY2FuIHNpbXBseSByZWZlciB0byBpdCBhcyBgc3NgLlxuICAgICAgICB0aGlzLnNzID0gc3M7XG4gICAgfVxuXG4gICAgLy8gIyBbTGluZWFyIFJlZ3Jlc3Npb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGluZWFyX3JlZ3Jlc3Npb24pXG4gICAgLy9cbiAgICAvLyBbU2ltcGxlIGxpbmVhciByZWdyZXNzaW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NpbXBsZV9saW5lYXJfcmVncmVzc2lvbilcbiAgICAvLyBpcyBhIHNpbXBsZSB3YXkgdG8gZmluZCBhIGZpdHRlZCBsaW5lXG4gICAgLy8gYmV0d2VlbiBhIHNldCBvZiBjb29yZGluYXRlcy5cbiAgICBmdW5jdGlvbiBsaW5lYXJfcmVncmVzc2lvbigpIHtcbiAgICAgICAgdmFyIGxpbnJlZyA9IHt9LFxuICAgICAgICAgICAgZGF0YSA9IFtdO1xuXG4gICAgICAgIC8vIEFzc2lnbiBkYXRhIHRvIHRoZSBtb2RlbC4gRGF0YSBpcyBhc3N1bWVkIHRvIGJlIGFuIGFycmF5LlxuICAgICAgICBsaW5yZWcuZGF0YSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICBkYXRhID0geC5zbGljZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGxpbnJlZztcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHNsb3BlIGFuZCB5LWludGVyY2VwdCBvZiB0aGUgcmVncmVzc2lvbiBsaW5lXG4gICAgICAgIC8vIGJ5IGNhbGN1bGF0aW5nIHRoZSBsZWFzdCBzdW0gb2Ygc3F1YXJlc1xuICAgICAgICBsaW5yZWcubWIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBtLCBiO1xuXG4gICAgICAgICAgICAvLyBTdG9yZSBkYXRhIGxlbmd0aCBpbiBhIGxvY2FsIHZhcmlhYmxlIHRvIHJlZHVjZVxuICAgICAgICAgICAgLy8gcmVwZWF0ZWQgb2JqZWN0IHByb3BlcnR5IGxvb2t1cHNcbiAgICAgICAgICAgIHZhciBkYXRhX2xlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXG4gICAgICAgICAgICAvL2lmIHRoZXJlJ3Mgb25seSBvbmUgcG9pbnQsIGFyYml0cmFyaWx5IGNob29zZSBhIHNsb3BlIG9mIDBcbiAgICAgICAgICAgIC8vYW5kIGEgeS1pbnRlcmNlcHQgb2Ygd2hhdGV2ZXIgdGhlIHkgb2YgdGhlIGluaXRpYWwgcG9pbnQgaXNcbiAgICAgICAgICAgIGlmIChkYXRhX2xlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIG0gPSAwO1xuICAgICAgICAgICAgICAgIGIgPSBkYXRhWzBdWzFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIG91ciBzdW1zIGFuZCBzY29wZSB0aGUgYG1gIGFuZCBgYmBcbiAgICAgICAgICAgICAgICAvLyB2YXJpYWJsZXMgdGhhdCBkZWZpbmUgdGhlIGxpbmUuXG4gICAgICAgICAgICAgICAgdmFyIHN1bV94ID0gMCwgc3VtX3kgPSAwLFxuICAgICAgICAgICAgICAgICAgICBzdW1feHggPSAwLCBzdW1feHkgPSAwO1xuXG4gICAgICAgICAgICAgICAgLy8gVXNlIGxvY2FsIHZhcmlhYmxlcyB0byBncmFiIHBvaW50IHZhbHVlc1xuICAgICAgICAgICAgICAgIC8vIHdpdGggbWluaW1hbCBvYmplY3QgcHJvcGVydHkgbG9va3Vwc1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCwgeCwgeTtcblxuICAgICAgICAgICAgICAgIC8vIEdhdGhlciB0aGUgc3VtIG9mIGFsbCB4IHZhbHVlcywgdGhlIHN1bSBvZiBhbGxcbiAgICAgICAgICAgICAgICAvLyB5IHZhbHVlcywgYW5kIHRoZSBzdW0gb2YgeF4yIGFuZCAoeCp5KSBmb3IgZWFjaFxuICAgICAgICAgICAgICAgIC8vIHZhbHVlLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSW4gbWF0aCBub3RhdGlvbiwgdGhlc2Ugd291bGQgYmUgU1NfeCwgU1NfeSwgU1NfeHgsIGFuZCBTU194eVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YV9sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwb2ludCA9IGRhdGFbaV07XG4gICAgICAgICAgICAgICAgICAgIHggPSBwb2ludFswXTtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHBvaW50WzFdO1xuXG4gICAgICAgICAgICAgICAgICAgIHN1bV94ICs9IHg7XG4gICAgICAgICAgICAgICAgICAgIHN1bV95ICs9IHk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3VtX3h4ICs9IHggKiB4O1xuICAgICAgICAgICAgICAgICAgICBzdW1feHkgKz0geCAqIHk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gYG1gIGlzIHRoZSBzbG9wZSBvZiB0aGUgcmVncmVzc2lvbiBsaW5lXG4gICAgICAgICAgICAgICAgbSA9ICgoZGF0YV9sZW5ndGggKiBzdW1feHkpIC0gKHN1bV94ICogc3VtX3kpKSAvXG4gICAgICAgICAgICAgICAgICAgICgoZGF0YV9sZW5ndGggKiBzdW1feHgpIC0gKHN1bV94ICogc3VtX3gpKTtcblxuICAgICAgICAgICAgICAgIC8vIGBiYCBpcyB0aGUgeS1pbnRlcmNlcHQgb2YgdGhlIGxpbmUuXG4gICAgICAgICAgICAgICAgYiA9IChzdW1feSAvIGRhdGFfbGVuZ3RoKSAtICgobSAqIHN1bV94KSAvIGRhdGFfbGVuZ3RoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmV0dXJuIGJvdGggdmFsdWVzIGFzIGFuIG9iamVjdC5cbiAgICAgICAgICAgIHJldHVybiB7IG06IG0sIGI6IGIgfTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBhIHNob3J0Y3V0IGZvciBzaW1wbHkgZ2V0dGluZyB0aGUgc2xvcGUgb2YgdGhlIHJlZ3Jlc3Npb24gbGluZVxuICAgICAgICBsaW5yZWcubSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpbnJlZy5tYigpLm07XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gYSBzaG9ydGN1dCBmb3Igc2ltcGx5IGdldHRpbmcgdGhlIHktaW50ZXJjZXB0IG9mIHRoZSByZWdyZXNzaW9uXG4gICAgICAgIC8vIGxpbmUuXG4gICAgICAgIGxpbnJlZy5iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbGlucmVnLm1iKCkuYjtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAjIyBGaXR0aW5nIFRoZSBSZWdyZXNzaW9uIExpbmVcbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgYC5kYXRhKClgIGFuZCByZXR1cm5zIHRoZVxuICAgICAgICAvLyBlcXVhdGlvbiBgeSA9IGYoeClgIHdoaWNoIGdpdmVzIHRoZSBwb3NpdGlvblxuICAgICAgICAvLyBvZiB0aGUgcmVncmVzc2lvbiBsaW5lIGF0IGVhY2ggcG9pbnQgaW4gYHhgLlxuICAgICAgICBsaW5yZWcubGluZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHNsb3BlLCBgbWAsIGFuZCB5LWludGVyY2VwdCwgYGJgLCBvZiB0aGUgbGluZS5cbiAgICAgICAgICAgIHZhciBtYiA9IGxpbnJlZy5tYigpLFxuICAgICAgICAgICAgICAgIG0gPSBtYi5tLFxuICAgICAgICAgICAgICAgIGIgPSBtYi5iO1xuXG4gICAgICAgICAgICAvLyBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGNvbXB1dGVzIGEgYHlgIHZhbHVlIGZvciBlYWNoXG4gICAgICAgICAgICAvLyB4IHZhbHVlIGl0IGlzIGdpdmVuLCBiYXNlZCBvbiB0aGUgdmFsdWVzIG9mIGBiYCBhbmQgYGFgXG4gICAgICAgICAgICAvLyB0aGF0IHdlIGp1c3QgY29tcHV0ZWQuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBiICsgKG0gKiB4KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGxpbnJlZztcbiAgICB9XG5cbiAgICAvLyAjIFtSIFNxdWFyZWRdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29lZmZpY2llbnRfb2ZfZGV0ZXJtaW5hdGlvbilcbiAgICAvL1xuICAgIC8vIFRoZSByLXNxdWFyZWQgdmFsdWUgb2YgZGF0YSBjb21wYXJlZCB3aXRoIGEgZnVuY3Rpb24gYGZgXG4gICAgLy8gaXMgdGhlIHN1bSBvZiB0aGUgc3F1YXJlZCBkaWZmZXJlbmNlcyBiZXR3ZWVuIHRoZSBwcmVkaWN0aW9uXG4gICAgLy8gYW5kIHRoZSBhY3R1YWwgdmFsdWUuXG4gICAgZnVuY3Rpb24gcl9zcXVhcmVkKGRhdGEsIGYpIHtcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoIDwgMikgcmV0dXJuIDE7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSB0aGUgYXZlcmFnZSB5IHZhbHVlIGZvciB0aGUgYWN0dWFsXG4gICAgICAgIC8vIGRhdGEgc2V0IGluIG9yZGVyIHRvIGNvbXB1dGUgdGhlXG4gICAgICAgIC8vIF90b3RhbCBzdW0gb2Ygc3F1YXJlc19cbiAgICAgICAgdmFyIHN1bSA9IDAsIGF2ZXJhZ2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3VtICs9IGRhdGFbaV1bMV07XG4gICAgICAgIH1cbiAgICAgICAgYXZlcmFnZSA9IHN1bSAvIGRhdGEubGVuZ3RoO1xuXG4gICAgICAgIC8vIENvbXB1dGUgdGhlIHRvdGFsIHN1bSBvZiBzcXVhcmVzIC0gdGhlXG4gICAgICAgIC8vIHNxdWFyZWQgZGlmZmVyZW5jZSBiZXR3ZWVuIGVhY2ggcG9pbnRcbiAgICAgICAgLy8gYW5kIHRoZSBhdmVyYWdlIG9mIGFsbCBwb2ludHMuXG4gICAgICAgIHZhciBzdW1fb2Zfc3F1YXJlcyA9IDA7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgc3VtX29mX3NxdWFyZXMgKz0gTWF0aC5wb3coYXZlcmFnZSAtIGRhdGFbal1bMV0sIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluYWxseSBlc3RpbWF0ZSB0aGUgZXJyb3I6IHRoZSBzcXVhcmVkXG4gICAgICAgIC8vIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgZXN0aW1hdGUgYW5kIHRoZSBhY3R1YWwgZGF0YVxuICAgICAgICAvLyB2YWx1ZSBhdCBlYWNoIHBvaW50LlxuICAgICAgICB2YXIgZXJyID0gMDtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkYXRhLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBlcnIgKz0gTWF0aC5wb3coZGF0YVtrXVsxXSAtIGYoZGF0YVtrXVswXSksIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXMgdGhlIGVycm9yIGdyb3dzIGxhcmdlciwgaXRzIHJhdGlvIHRvIHRoZVxuICAgICAgICAvLyBzdW0gb2Ygc3F1YXJlcyBpbmNyZWFzZXMgYW5kIHRoZSByIHNxdWFyZWRcbiAgICAgICAgLy8gdmFsdWUgZ3Jvd3MgbG93ZXIuXG4gICAgICAgIHJldHVybiAxIC0gKGVyciAvIHN1bV9vZl9zcXVhcmVzKTtcbiAgICB9XG5cblxuICAgIC8vICMgW0JheWVzaWFuIENsYXNzaWZpZXJdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTmFpdmVfQmF5ZXNfY2xhc3NpZmllcilcbiAgICAvL1xuICAgIC8vIFRoaXMgaXMgYSBuYcOvdmUgYmF5ZXNpYW4gY2xhc3NpZmllciB0aGF0IHRha2VzXG4gICAgLy8gc2luZ2x5LW5lc3RlZCBvYmplY3RzLlxuICAgIGZ1bmN0aW9uIGJheWVzaWFuKCkge1xuICAgICAgICAvLyBUaGUgYGJheWVzX21vZGVsYCBvYmplY3QgaXMgd2hhdCB3aWxsIGJlIGV4cG9zZWRcbiAgICAgICAgLy8gYnkgdGhpcyBjbG9zdXJlLCB3aXRoIGFsbCBvZiBpdHMgZXh0ZW5kZWQgbWV0aG9kcywgYW5kIHdpbGxcbiAgICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gYWxsIHNjb3BlIHZhcmlhYmxlcywgbGlrZSBgdG90YWxfY291bnRgLlxuICAgICAgICB2YXIgYmF5ZXNfbW9kZWwgPSB7fSxcbiAgICAgICAgICAgIC8vIFRoZSBudW1iZXIgb2YgaXRlbXMgdGhhdCBhcmUgY3VycmVudGx5XG4gICAgICAgICAgICAvLyBjbGFzc2lmaWVkIGluIHRoZSBtb2RlbFxuICAgICAgICAgICAgdG90YWxfY291bnQgPSAwLFxuICAgICAgICAgICAgLy8gRXZlcnkgaXRlbSBjbGFzc2lmaWVkIGluIHRoZSBtb2RlbFxuICAgICAgICAgICAgZGF0YSA9IHt9O1xuXG4gICAgICAgIC8vICMjIFRyYWluXG4gICAgICAgIC8vIFRyYWluIHRoZSBjbGFzc2lmaWVyIHdpdGggYSBuZXcgaXRlbSwgd2hpY2ggaGFzIGEgc2luZ2xlXG4gICAgICAgIC8vIGRpbWVuc2lvbiBvZiBKYXZhc2NyaXB0IGxpdGVyYWwga2V5cyBhbmQgdmFsdWVzLlxuICAgICAgICBiYXllc19tb2RlbC50cmFpbiA9IGZ1bmN0aW9uKGl0ZW0sIGNhdGVnb3J5KSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgZGF0YSBvYmplY3QgZG9lc24ndCBoYXZlIGFueSB2YWx1ZXNcbiAgICAgICAgICAgIC8vIGZvciB0aGlzIGNhdGVnb3J5LCBjcmVhdGUgYSBuZXcgb2JqZWN0IGZvciBpdC5cbiAgICAgICAgICAgIGlmICghZGF0YVtjYXRlZ29yeV0pIGRhdGFbY2F0ZWdvcnldID0ge307XG5cbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGtleSBpbiB0aGUgaXRlbS5cbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciB2ID0gaXRlbVtrXTtcbiAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBuZXN0ZWQgb2JqZWN0IGBkYXRhW2NhdGVnb3J5XVtrXVtpdGVtW2tdXWBcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGFuIG9iamVjdCBvZiBrZXlzIHRoYXQgZXF1YWwgMC5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtjYXRlZ29yeV1ba10gPT09IHVuZGVmaW5lZCkgZGF0YVtjYXRlZ29yeV1ba10gPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtjYXRlZ29yeV1ba11bdl0gPT09IHVuZGVmaW5lZCkgZGF0YVtjYXRlZ29yeV1ba11bdl0gPSAwO1xuXG4gICAgICAgICAgICAgICAgLy8gQW5kIGluY3JlbWVudCB0aGUga2V5IGZvciB0aGlzIGtleS92YWx1ZSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgICAgICBkYXRhW2NhdGVnb3J5XVtrXVtpdGVtW2tdXSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgaXRlbXMgY2xhc3NpZmllZFxuICAgICAgICAgICAgdG90YWxfY291bnQrKztcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAjIyBTY29yZVxuICAgICAgICAvLyBHZW5lcmF0ZSBhIHNjb3JlIG9mIGhvdyB3ZWxsIHRoaXMgaXRlbSBtYXRjaGVzIGFsbFxuICAgICAgICAvLyBwb3NzaWJsZSBjYXRlZ29yaWVzIGJhc2VkIG9uIGl0cyBhdHRyaWJ1dGVzXG4gICAgICAgIGJheWVzX21vZGVsLnNjb3JlID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBhcnJheSBvZiBvZGRzIHBlciBjYXRlZ29yeS5cbiAgICAgICAgICAgIHZhciBvZGRzID0ge30sIGNhdGVnb3J5O1xuICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2gga2V5IGluIHRoZSBpdGVtLFxuICAgICAgICAgICAgLy8gdGhlbiBpdGVyYXRlIHRocm91Z2ggZWFjaCBjYXRlZ29yeSB0aGF0IGhhcyBiZWVuIHVzZWRcbiAgICAgICAgICAgIC8vIGluIHByZXZpb3VzIGNhbGxzIHRvIGAudHJhaW4oKWBcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciB2ID0gaXRlbVtrXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNhdGVnb3J5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IG9iamVjdCBmb3Igc3RvcmluZyBrZXkgLSB2YWx1ZSBjb21iaW5hdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgY2F0ZWdvcnkuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvZGRzW2NhdGVnb3J5XSA9PT0gdW5kZWZpbmVkKSBvZGRzW2NhdGVnb3J5XSA9IHt9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXRlbSBkb2Vzbid0IGV2ZW4gaGF2ZSBhIHByb3BlcnR5LCBpdCBjb3VudHMgZm9yIG5vdGhpbmcsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBpZiBpdCBkb2VzIGhhdmUgdGhlIHByb3BlcnR5IHRoYXQgd2UncmUgbG9va2luZyBmb3IgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaXRlbSB0byBjYXRlZ29yaXplLCBpdCBjb3VudHMgYmFzZWQgb24gaG93IHBvcHVsYXIgaXQgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gdmVyc3VzIHRoZSB3aG9sZSBwb3B1bGF0aW9uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtjYXRlZ29yeV1ba10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9kZHNbY2F0ZWdvcnldW2sgKyAnXycgKyB2XSA9IChkYXRhW2NhdGVnb3J5XVtrXVt2XSB8fCAwKSAvIHRvdGFsX2NvdW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2Rkc1tjYXRlZ29yeV1bayArICdfJyArIHZdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IHVwIGEgbmV3IG9iamVjdCB0aGF0IHdpbGwgY29udGFpbiBzdW1zIG9mIHRoZXNlIG9kZHMgYnkgY2F0ZWdvcnlcbiAgICAgICAgICAgIHZhciBvZGRzX3N1bXMgPSB7fTtcblxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeSBpbiBvZGRzKSB7XG4gICAgICAgICAgICAgICAgLy8gVGFsbHkgYWxsIG9mIHRoZSBvZGRzIGZvciBlYWNoIGNhdGVnb3J5LWNvbWJpbmF0aW9uIHBhaXIgLVxuICAgICAgICAgICAgICAgIC8vIHRoZSBub24tZXhpc3RlbmNlIG9mIGEgY2F0ZWdvcnkgZG9lcyBub3QgYWRkIGFueXRoaW5nIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIHNjb3JlLlxuICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbWJpbmF0aW9uIGluIG9kZHNbY2F0ZWdvcnldKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvZGRzX3N1bXNbY2F0ZWdvcnldID09PSB1bmRlZmluZWQpIG9kZHNfc3Vtc1tjYXRlZ29yeV0gPSAwO1xuICAgICAgICAgICAgICAgICAgICBvZGRzX3N1bXNbY2F0ZWdvcnldICs9IG9kZHNbY2F0ZWdvcnldW2NvbWJpbmF0aW9uXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvZGRzX3N1bXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBjb21wbGV0ZWQgbW9kZWwuXG4gICAgICAgIHJldHVybiBiYXllc19tb2RlbDtcbiAgICB9XG5cbiAgICAvLyAjIHN1bVxuICAgIC8vXG4gICAgLy8gaXMgc2ltcGx5IHRoZSByZXN1bHQgb2YgYWRkaW5nIGFsbCBudW1iZXJzXG4gICAgLy8gdG9nZXRoZXIsIHN0YXJ0aW5nIGZyb20gemVyby5cbiAgICAvL1xuICAgIC8vIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gICAgZnVuY3Rpb24gc3VtKHgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YWx1ZSArPSB4W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyAjIG1lYW5cbiAgICAvL1xuICAgIC8vIGlzIHRoZSBzdW0gb3ZlciB0aGUgbnVtYmVyIG9mIHZhbHVlc1xuICAgIC8vXG4gICAgLy8gVGhpcyBydW5zIG9uIGBPKG4pYCwgbGluZWFyIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgYXJyYXlcbiAgICBmdW5jdGlvbiBtZWFuKHgpIHtcbiAgICAgICAgLy8gVGhlIG1lYW4gb2Ygbm8gbnVtYmVycyBpcyBudWxsXG4gICAgICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHN1bSh4KSAvIHgubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vICMgZ2VvbWV0cmljIG1lYW5cbiAgICAvL1xuICAgIC8vIGEgbWVhbiBmdW5jdGlvbiB0aGF0IGlzIG1vcmUgdXNlZnVsIGZvciBudW1iZXJzIGluIGRpZmZlcmVudFxuICAgIC8vIHJhbmdlcy5cbiAgICAvL1xuICAgIC8vIHRoaXMgaXMgdGhlIG50aCByb290IG9mIHRoZSBpbnB1dCBudW1iZXJzIG11bHRpcGxpZWQgYnkgZWFjaCBvdGhlclxuICAgIC8vXG4gICAgLy8gVGhpcyBydW5zIG9uIGBPKG4pYCwgbGluZWFyIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgYXJyYXlcbiAgICBmdW5jdGlvbiBnZW9tZXRyaWNfbWVhbih4KSB7XG4gICAgICAgIC8vIFRoZSBtZWFuIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIC8vIHRoZSBzdGFydGluZyB2YWx1ZS5cbiAgICAgICAgdmFyIHZhbHVlID0gMTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIHRoZSBnZW9tZXRyaWMgbWVhbiBpcyBvbmx5IHZhbGlkIGZvciBwb3NpdGl2ZSBudW1iZXJzXG4gICAgICAgICAgICBpZiAoeFtpXSA8PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgLy8gcmVwZWF0ZWRseSBtdWx0aXBseSB0aGUgdmFsdWUgYnkgZWFjaCBudW1iZXJcbiAgICAgICAgICAgIHZhbHVlICo9IHhbaV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gTWF0aC5wb3codmFsdWUsIDEgLyB4Lmxlbmd0aCk7XG4gICAgfVxuXG5cbiAgICAvLyAjIGhhcm1vbmljIG1lYW5cbiAgICAvL1xuICAgIC8vIGEgbWVhbiBmdW5jdGlvbiB0eXBpY2FsbHkgdXNlZCB0byBmaW5kIHRoZSBhdmVyYWdlIG9mIHJhdGVzXG4gICAgLy9cbiAgICAvLyB0aGlzIGlzIHRoZSByZWNpcHJvY2FsIG9mIHRoZSBhcml0aG1ldGljIG1lYW4gb2YgdGhlIHJlY2lwcm9jYWxzXG4gICAgLy8gb2YgdGhlIGlucHV0IG51bWJlcnNcbiAgICAvL1xuICAgIC8vIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gICAgZnVuY3Rpb24gaGFybW9uaWNfbWVhbih4KSB7XG4gICAgICAgIC8vIFRoZSBtZWFuIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciByZWNpcHJvY2FsX3N1bSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyB0aGUgaGFybW9uaWMgbWVhbiBpcyBvbmx5IHZhbGlkIGZvciBwb3NpdGl2ZSBudW1iZXJzXG4gICAgICAgICAgICBpZiAoeFtpXSA8PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgcmVjaXByb2NhbF9zdW0gKz0gMSAvIHhbaV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaXZpZGUgbiBieSB0aGUgdGhlIHJlY2lwcm9jYWwgc3VtXG4gICAgICAgIHJldHVybiB4Lmxlbmd0aCAvIHJlY2lwcm9jYWxfc3VtO1xuICAgIH1cblxuXG4gICAgLy8gIyBtaW5cbiAgICAvL1xuICAgIC8vIFRoaXMgaXMgc2ltcGx5IHRoZSBtaW5pbXVtIG51bWJlciBpbiB0aGUgc2V0LlxuICAgIC8vXG4gICAgLy8gVGhpcyBydW5zIG9uIGBPKG4pYCwgbGluZWFyIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgYXJyYXlcbiAgICBmdW5jdGlvbiBtaW4oeCkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gT24gdGhlIGZpcnN0IGl0ZXJhdGlvbiBvZiB0aGlzIGxvb3AsIG1pbiBpc1xuICAgICAgICAgICAgLy8gdW5kZWZpbmVkIGFuZCBpcyB0aHVzIG1hZGUgdGhlIG1pbmltdW0gZWxlbWVudCBpbiB0aGUgYXJyYXlcbiAgICAgICAgICAgIGlmICh4W2ldIDwgdmFsdWUgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgdmFsdWUgPSB4W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyAjIG1heFxuICAgIC8vXG4gICAgLy8gVGhpcyBpcyBzaW1wbHkgdGhlIG1heGltdW0gbnVtYmVyIGluIHRoZSBzZXQuXG4gICAgLy9cbiAgICAvLyBUaGlzIHJ1bnMgb24gYE8obilgLCBsaW5lYXIgdGltZSBpbiByZXNwZWN0IHRvIHRoZSBhcnJheVxuICAgIGZ1bmN0aW9uIG1heCh4KSB7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBPbiB0aGUgZmlyc3QgaXRlcmF0aW9uIG9mIHRoaXMgbG9vcCwgbWF4IGlzXG4gICAgICAgICAgICAvLyB1bmRlZmluZWQgYW5kIGlzIHRodXMgbWFkZSB0aGUgbWF4aW11bSBlbGVtZW50IGluIHRoZSBhcnJheVxuICAgICAgICAgICAgaWYgKHhbaV0gPiB2YWx1ZSB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB2YWx1ZSA9IHhbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vICMgW3ZhcmlhbmNlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1ZhcmlhbmNlKVxuICAgIC8vXG4gICAgLy8gaXMgdGhlIHN1bSBvZiBzcXVhcmVkIGRldmlhdGlvbnMgZnJvbSB0aGUgbWVhblxuICAgIC8vXG4gICAgLy8gZGVwZW5kcyBvbiBgbWVhbigpYFxuICAgIGZ1bmN0aW9uIHZhcmlhbmNlKHgpIHtcbiAgICAgICAgLy8gVGhlIHZhcmlhbmNlIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciBtZWFuX3ZhbHVlID0gbWVhbih4KSxcbiAgICAgICAgICAgIGRldmlhdGlvbnMgPSBbXTtcblxuICAgICAgICAvLyBNYWtlIGEgbGlzdCBvZiBzcXVhcmVkIGRldmlhdGlvbnMgZnJvbSB0aGUgbWVhbi5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkZXZpYXRpb25zLnB1c2goTWF0aC5wb3coeFtpXSAtIG1lYW5fdmFsdWUsIDIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmQgdGhlIG1lYW4gdmFsdWUgb2YgdGhhdCBsaXN0XG4gICAgICAgIHJldHVybiBtZWFuKGRldmlhdGlvbnMpO1xuICAgIH1cblxuICAgIC8vICMgW3N0YW5kYXJkIGRldmlhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGFuZGFyZF9kZXZpYXRpb24pXG4gICAgLy9cbiAgICAvLyBpcyBqdXN0IHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgdmFyaWFuY2UuXG4gICAgLy9cbiAgICAvLyBkZXBlbmRzIG9uIGB2YXJpYW5jZSgpYFxuICAgIGZ1bmN0aW9uIHN0YW5kYXJkX2RldmlhdGlvbih4KSB7XG4gICAgICAgIC8vIFRoZSBzdGFuZGFyZCBkZXZpYXRpb24gb2Ygbm8gbnVtYmVycyBpcyBudWxsXG4gICAgICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh2YXJpYW5jZSh4KSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIHN1bSBvZiBkZXZpYXRpb25zIHRvIHRoZSBOdGggcG93ZXIuXG4gICAgLy8gV2hlbiBuPTIgaXQncyB0aGUgc3VtIG9mIHNxdWFyZWQgZGV2aWF0aW9ucy5cbiAgICAvLyBXaGVuIG49MyBpdCdzIHRoZSBzdW0gb2YgY3ViZWQgZGV2aWF0aW9ucy5cbiAgICAvL1xuICAgIC8vIGRlcGVuZHMgb24gYG1lYW4oKWBcbiAgICBmdW5jdGlvbiBzdW1fbnRoX3Bvd2VyX2RldmlhdGlvbnMoeCwgbikge1xuICAgICAgICB2YXIgbWVhbl92YWx1ZSA9IG1lYW4oeCksXG4gICAgICAgICAgICBzdW0gPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3VtICs9IE1hdGgucG93KHhbaV0gLSBtZWFuX3ZhbHVlLCBuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdW07XG4gICAgfVxuXG4gICAgLy8gIyBbdmFyaWFuY2VdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVmFyaWFuY2UpXG4gICAgLy9cbiAgICAvLyBpcyB0aGUgc3VtIG9mIHNxdWFyZWQgZGV2aWF0aW9ucyBmcm9tIHRoZSBtZWFuXG4gICAgLy9cbiAgICAvLyBkZXBlbmRzIG9uIGBzdW1fbnRoX3Bvd2VyX2RldmlhdGlvbnNgXG4gICAgZnVuY3Rpb24gc2FtcGxlX3ZhcmlhbmNlKHgpIHtcbiAgICAgICAgLy8gVGhlIHZhcmlhbmNlIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPD0gMSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIHN1bV9zcXVhcmVkX2RldmlhdGlvbnNfdmFsdWUgPSBzdW1fbnRoX3Bvd2VyX2RldmlhdGlvbnMoeCwgMik7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgbWVhbiB2YWx1ZSBvZiB0aGF0IGxpc3RcbiAgICAgICAgcmV0dXJuIHN1bV9zcXVhcmVkX2RldmlhdGlvbnNfdmFsdWUgLyAoeC5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICAvLyAjIFtzdGFuZGFyZCBkZXZpYXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3RhbmRhcmRfZGV2aWF0aW9uKVxuICAgIC8vXG4gICAgLy8gaXMganVzdCB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIHZhcmlhbmNlLlxuICAgIC8vXG4gICAgLy8gZGVwZW5kcyBvbiBgc2FtcGxlX3ZhcmlhbmNlKClgXG4gICAgZnVuY3Rpb24gc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbih4KSB7XG4gICAgICAgIC8vIFRoZSBzdGFuZGFyZCBkZXZpYXRpb24gb2Ygbm8gbnVtYmVycyBpcyBudWxsXG4gICAgICAgIGlmICh4Lmxlbmd0aCA8PSAxKSByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHNhbXBsZV92YXJpYW5jZSh4KSk7XG4gICAgfVxuXG4gICAgLy8gIyBbY292YXJpYW5jZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db3ZhcmlhbmNlKVxuICAgIC8vXG4gICAgLy8gc2FtcGxlIGNvdmFyaWFuY2Ugb2YgdHdvIGRhdGFzZXRzOlxuICAgIC8vIGhvdyBtdWNoIGRvIHRoZSB0d28gZGF0YXNldHMgbW92ZSB0b2dldGhlcj9cbiAgICAvLyB4IGFuZCB5IGFyZSB0d28gZGF0YXNldHMsIHJlcHJlc2VudGVkIGFzIGFycmF5cyBvZiBudW1iZXJzLlxuICAgIC8vXG4gICAgLy8gZGVwZW5kcyBvbiBgbWVhbigpYFxuICAgIGZ1bmN0aW9uIHNhbXBsZV9jb3ZhcmlhbmNlKHgsIHkpIHtcblxuICAgICAgICAvLyBUaGUgdHdvIGRhdGFzZXRzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGggd2hpY2ggbXVzdCBiZSBtb3JlIHRoYW4gMVxuICAgICAgICBpZiAoeC5sZW5ndGggPD0gMSB8fCB4Lmxlbmd0aCAhPSB5Lmxlbmd0aCl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRldGVybWluZSB0aGUgbWVhbiBvZiBlYWNoIGRhdGFzZXQgc28gdGhhdCB3ZSBjYW4ganVkZ2UgZWFjaFxuICAgICAgICAvLyB2YWx1ZSBvZiB0aGUgZGF0YXNldCBmYWlybHkgYXMgdGhlIGRpZmZlcmVuY2UgZnJvbSB0aGUgbWVhbi4gdGhpc1xuICAgICAgICAvLyB3YXksIGlmIG9uZSBkYXRhc2V0IGlzIFsxLCAyLCAzXSBhbmQgWzIsIDMsIDRdLCB0aGVpciBjb3ZhcmlhbmNlXG4gICAgICAgIC8vIGRvZXMgbm90IHN1ZmZlciBiZWNhdXNlIG9mIHRoZSBkaWZmZXJlbmNlIGluIGFic29sdXRlIHZhbHVlc1xuICAgICAgICB2YXIgeG1lYW4gPSBtZWFuKHgpLFxuICAgICAgICAgICAgeW1lYW4gPSBtZWFuKHkpLFxuICAgICAgICAgICAgc3VtID0gMDtcblxuICAgICAgICAvLyBmb3IgZWFjaCBwYWlyIG9mIHZhbHVlcywgdGhlIGNvdmFyaWFuY2UgaW5jcmVhc2VzIHdoZW4gdGhlaXJcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBmcm9tIHRoZSBtZWFuIGlzIGFzc29jaWF0ZWQgLSBpZiBib3RoIGFyZSB3ZWxsIGFib3ZlXG4gICAgICAgIC8vIG9yIGlmIGJvdGggYXJlIHdlbGwgYmVsb3dcbiAgICAgICAgLy8gdGhlIG1lYW4sIHRoZSBjb3ZhcmlhbmNlIGluY3JlYXNlcyBzaWduaWZpY2FudGx5LlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgc3VtICs9ICh4W2ldIC0geG1lYW4pICogKHlbaV0gLSB5bWVhbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGUgY292YXJpYW5jZSBpcyB3ZWlnaHRlZCBieSB0aGUgbGVuZ3RoIG9mIHRoZSBkYXRhc2V0cy5cbiAgICAgICAgcmV0dXJuIHN1bSAvICh4Lmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIC8vICMgW2NvcnJlbGF0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvcnJlbGF0aW9uX2FuZF9kZXBlbmRlbmNlKVxuICAgIC8vXG4gICAgLy8gR2V0cyBhIG1lYXN1cmUgb2YgaG93IGNvcnJlbGF0ZWQgdHdvIGRhdGFzZXRzIGFyZSwgYmV0d2VlbiAtMSBhbmQgMVxuICAgIC8vXG4gICAgLy8gZGVwZW5kcyBvbiBgc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbigpYCBhbmQgYHNhbXBsZV9jb3ZhcmlhbmNlKClgXG4gICAgZnVuY3Rpb24gc2FtcGxlX2NvcnJlbGF0aW9uKHgsIHkpIHtcbiAgICAgICAgdmFyIGNvdiA9IHNhbXBsZV9jb3ZhcmlhbmNlKHgsIHkpLFxuICAgICAgICAgICAgeHN0ZCA9IHNhbXBsZV9zdGFuZGFyZF9kZXZpYXRpb24oeCksXG4gICAgICAgICAgICB5c3RkID0gc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbih5KTtcblxuICAgICAgICBpZiAoY292ID09PSBudWxsIHx8IHhzdGQgPT09IG51bGwgfHwgeXN0ZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY292IC8geHN0ZCAvIHlzdGQ7XG4gICAgfVxuXG4gICAgLy8gIyBbbWVkaWFuXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01lZGlhbilcbiAgICAvL1xuICAgIC8vIFRoZSBtaWRkbGUgbnVtYmVyIG9mIGEgbGlzdC4gVGhpcyBpcyBvZnRlbiBhIGdvb2QgaW5kaWNhdG9yIG9mICd0aGUgbWlkZGxlJ1xuICAgIC8vIHdoZW4gdGhlcmUgYXJlIG91dGxpZXJzIHRoYXQgc2tldyB0aGUgYG1lYW4oKWAgdmFsdWUuXG4gICAgZnVuY3Rpb24gbWVkaWFuKHgpIHtcbiAgICAgICAgLy8gVGhlIG1lZGlhbiBvZiBhbiBlbXB0eSBsaXN0IGlzIG51bGxcbiAgICAgICAgaWYgKHgubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAvLyBTb3J0aW5nIHRoZSBhcnJheSBtYWtlcyBpdCBlYXN5IHRvIGZpbmQgdGhlIGNlbnRlciwgYnV0XG4gICAgICAgIC8vIHVzZSBgLnNsaWNlKClgIHRvIGVuc3VyZSB0aGUgb3JpZ2luYWwgYXJyYXkgYHhgIGlzIG5vdCBtb2RpZmllZFxuICAgICAgICB2YXIgc29ydGVkID0geC5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgLSBiOyB9KTtcblxuICAgICAgICAvLyBJZiB0aGUgbGVuZ3RoIG9mIHRoZSBsaXN0IGlzIG9kZCwgaXQncyB0aGUgY2VudHJhbCBudW1iZXJcbiAgICAgICAgaWYgKHNvcnRlZC5sZW5ndGggJSAyID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gc29ydGVkWyhzb3J0ZWQubGVuZ3RoIC0gMSkgLyAyXTtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgbWVkaWFuIGlzIHRoZSBhdmVyYWdlIG9mIHRoZSB0d28gbnVtYmVyc1xuICAgICAgICAvLyBhdCB0aGUgY2VudGVyIG9mIHRoZSBsaXN0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYSA9IHNvcnRlZFsoc29ydGVkLmxlbmd0aCAvIDIpIC0gMV07XG4gICAgICAgICAgICB2YXIgYiA9IHNvcnRlZFsoc29ydGVkLmxlbmd0aCAvIDIpXTtcbiAgICAgICAgICAgIHJldHVybiAoYSArIGIpIC8gMjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vICMgW21vZGVdKGh0dHA6Ly9iaXQubHkvVzVLNFl0KVxuICAgIC8vXG4gICAgLy8gVGhlIG1vZGUgaXMgdGhlIG51bWJlciB0aGF0IGFwcGVhcnMgaW4gYSBsaXN0IHRoZSBoaWdoZXN0IG51bWJlciBvZiB0aW1lcy5cbiAgICAvLyBUaGVyZSBjYW4gYmUgbXVsdGlwbGUgbW9kZXMgaW4gYSBsaXN0OiBpbiB0aGUgZXZlbnQgb2YgYSB0aWUsIHRoaXNcbiAgICAvLyBhbGdvcml0aG0gd2lsbCByZXR1cm4gdGhlIG1vc3QgcmVjZW50bHkgc2VlbiBtb2RlLlxuICAgIC8vXG4gICAgLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBpbnNwaXJlZCBieSBbc2NpZW5jZS5qc10oaHR0cHM6Ly9naXRodWIuY29tL2phc29uZGF2aWVzL3NjaWVuY2UuanMvYmxvYi9tYXN0ZXIvc3JjL3N0YXRzL21vZGUuanMpXG4gICAgLy9cbiAgICAvLyBUaGlzIHJ1bnMgb24gYE8obilgLCBsaW5lYXIgdGltZSBpbiByZXNwZWN0IHRvIHRoZSBhcnJheVxuICAgIGZ1bmN0aW9uIG1vZGUoeCkge1xuXG4gICAgICAgIC8vIEhhbmRsZSBlZGdlIGNhc2VzOlxuICAgICAgICAvLyBUaGUgbWVkaWFuIG9mIGFuIGVtcHR5IGxpc3QgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICAgICAgICBlbHNlIGlmICh4Lmxlbmd0aCA9PT0gMSkgcmV0dXJuIHhbMF07XG5cbiAgICAgICAgLy8gU29ydGluZyB0aGUgYXJyYXkgbGV0cyB1cyBpdGVyYXRlIHRocm91Z2ggaXQgYmVsb3cgYW5kIGJlIHN1cmVcbiAgICAgICAgLy8gdGhhdCBldmVyeSB0aW1lIHdlIHNlZSBhIG5ldyBudW1iZXIgaXQncyBuZXcgYW5kIHdlJ2xsIG5ldmVyXG4gICAgICAgIC8vIHNlZSB0aGUgc2FtZSBudW1iZXIgdHdpY2VcbiAgICAgICAgdmFyIHNvcnRlZCA9IHguc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG5cbiAgICAgICAgLy8gVGhpcyBhc3N1bWVzIGl0IGlzIGRlYWxpbmcgd2l0aCBhbiBhcnJheSBvZiBzaXplID4gMSwgc2luY2Ugc2l6ZVxuICAgICAgICAvLyAwIGFuZCAxIGFyZSBoYW5kbGVkIGltbWVkaWF0ZWx5LiBIZW5jZSBpdCBzdGFydHMgYXQgaW5kZXggMSBpbiB0aGVcbiAgICAgICAgLy8gYXJyYXkuXG4gICAgICAgIHZhciBsYXN0ID0gc29ydGVkWzBdLFxuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIG1vZGUgYXMgd2UgZmluZCBuZXcgbW9kZXNcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgLy8gc3RvcmUgaG93IG1hbnkgdGltZXMgd2UndmUgc2VlbiB0aGUgbW9kZVxuICAgICAgICAgICAgbWF4X3NlZW4gPSAwLFxuICAgICAgICAgICAgLy8gaG93IG1hbnkgdGltZXMgdGhlIGN1cnJlbnQgY2FuZGlkYXRlIGZvciB0aGUgbW9kZVxuICAgICAgICAgICAgLy8gaGFzIGJlZW4gc2VlblxuICAgICAgICAgICAgc2Vlbl90aGlzID0gMTtcblxuICAgICAgICAvLyBlbmQgYXQgc29ydGVkLmxlbmd0aCArIDEgdG8gZml4IHRoZSBjYXNlIGluIHdoaWNoIHRoZSBtb2RlIGlzXG4gICAgICAgIC8vIHRoZSBoaWdoZXN0IG51bWJlciB0aGF0IG9jY3VycyBpbiB0aGUgc2VxdWVuY2UuIHRoZSBsYXN0IGl0ZXJhdGlvblxuICAgICAgICAvLyBjb21wYXJlcyBzb3J0ZWRbaV0sIHdoaWNoIGlzIHVuZGVmaW5lZCwgdG8gdGhlIGhpZ2hlc3QgbnVtYmVyXG4gICAgICAgIC8vIGluIHRoZSBzZXJpZXNcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzb3J0ZWQubGVuZ3RoICsgMTsgaSsrKSB7XG4gICAgICAgICAgICAvLyB3ZSdyZSBzZWVpbmcgYSBuZXcgbnVtYmVyIHBhc3MgYnlcbiAgICAgICAgICAgIGlmIChzb3J0ZWRbaV0gIT09IGxhc3QpIHtcbiAgICAgICAgICAgICAgICAvLyB0aGUgbGFzdCBudW1iZXIgaXMgdGhlIG5ldyBtb2RlIHNpbmNlIHdlIHNhdyBpdCBtb3JlXG4gICAgICAgICAgICAgICAgLy8gb2Z0ZW4gdGhhbiB0aGUgb2xkIG9uZVxuICAgICAgICAgICAgICAgIGlmIChzZWVuX3RoaXMgPiBtYXhfc2Vlbikge1xuICAgICAgICAgICAgICAgICAgICBtYXhfc2VlbiA9IHNlZW5fdGhpcztcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsYXN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWVuX3RoaXMgPSAxO1xuICAgICAgICAgICAgICAgIGxhc3QgPSBzb3J0ZWRbaV07XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzbid0IGEgbmV3IG51bWJlciwgaXQncyBvbmUgbW9yZSBvY2N1cnJlbmNlIG9mXG4gICAgICAgICAgICAvLyB0aGUgcG90ZW50aWFsIG1vZGVcbiAgICAgICAgICAgIH0gZWxzZSB7IHNlZW5fdGhpcysrOyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vICMgW3QtdGVzdF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdHVkZW50J3NfdC10ZXN0KVxuICAgIC8vXG4gICAgLy8gVGhpcyBpcyB0byBjb21wdXRlIGEgb25lLXNhbXBsZSB0LXRlc3QsIGNvbXBhcmluZyB0aGUgbWVhblxuICAgIC8vIG9mIGEgc2FtcGxlIHRvIGEga25vd24gdmFsdWUsIHguXG4gICAgLy9cbiAgICAvLyBpbiB0aGlzIGNhc2UsIHdlJ3JlIHRyeWluZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGVcbiAgICAvLyBwb3B1bGF0aW9uIG1lYW4gaXMgZXF1YWwgdG8gdGhlIHZhbHVlIHRoYXQgd2Uga25vdywgd2hpY2ggaXMgYHhgXG4gICAgLy8gaGVyZS4gdXN1YWxseSB0aGUgcmVzdWx0cyBoZXJlIGFyZSB1c2VkIHRvIGxvb2sgdXAgYVxuICAgIC8vIFtwLXZhbHVlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1AtdmFsdWUpLCB3aGljaCwgZm9yXG4gICAgLy8gYSBjZXJ0YWluIGxldmVsIG9mIHNpZ25pZmljYW5jZSwgd2lsbCBsZXQgeW91IGRldGVybWluZSB0aGF0IHRoZVxuICAgIC8vIG51bGwgaHlwb3RoZXNpcyBjYW4gb3IgY2Fubm90IGJlIHJlamVjdGVkLlxuICAgIC8vXG4gICAgLy8gRGVwZW5kcyBvbiBgc3RhbmRhcmRfZGV2aWF0aW9uKClgIGFuZCBgbWVhbigpYFxuICAgIGZ1bmN0aW9uIHRfdGVzdChzYW1wbGUsIHgpIHtcbiAgICAgICAgLy8gVGhlIG1lYW4gb2YgdGhlIHNhbXBsZVxuICAgICAgICB2YXIgc2FtcGxlX21lYW4gPSBtZWFuKHNhbXBsZSk7XG5cbiAgICAgICAgLy8gVGhlIHN0YW5kYXJkIGRldmlhdGlvbiBvZiB0aGUgc2FtcGxlXG4gICAgICAgIHZhciBzZCA9IHN0YW5kYXJkX2RldmlhdGlvbihzYW1wbGUpO1xuXG4gICAgICAgIC8vIFNxdWFyZSByb290IHRoZSBsZW5ndGggb2YgdGhlIHNhbXBsZVxuICAgICAgICB2YXIgcm9vdE4gPSBNYXRoLnNxcnQoc2FtcGxlLmxlbmd0aCk7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSB0aGUga25vd24gdmFsdWUgYWdhaW5zdCB0aGUgc2FtcGxlLFxuICAgICAgICAvLyByZXR1cm5pbmcgdGhlIHQgdmFsdWVcbiAgICAgICAgcmV0dXJuIChzYW1wbGVfbWVhbiAtIHgpIC8gKHNkIC8gcm9vdE4pO1xuICAgIH1cblxuICAgIC8vICMgWzItc2FtcGxlIHQtdGVzdF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdHVkZW50J3NfdC10ZXN0KVxuICAgIC8vXG4gICAgLy8gVGhpcyBpcyB0byBjb21wdXRlIHR3byBzYW1wbGUgdC10ZXN0LlxuICAgIC8vIFRlc3RzIHdoZXRoZXIgXCJtZWFuKFgpLW1lYW4oWSkgPSBkaWZmZXJlbmNlXCIsIChcbiAgICAvLyBpbiB0aGUgbW9zdCBjb21tb24gY2FzZSwgd2Ugb2Z0ZW4gaGF2ZSBgZGlmZmVyZW5jZSA9PSAwYCB0byB0ZXN0IGlmIHR3byBzYW1wbGVzXG4gICAgLy8gYXJlIGxpa2VseSB0byBiZSB0YWtlbiBmcm9tIHBvcHVsYXRpb25zIHdpdGggdGhlIHNhbWUgbWVhbiB2YWx1ZSkgd2l0aFxuICAgIC8vIG5vIHByaW9yIGtub3dsZWRnZSBvbiBzdGFuZGFyZCBkZXZpYXRpb25zIG9mIGJvdGggc2FtcGxlc1xuICAgIC8vIG90aGVyIHRoYW4gdGhlIGZhY3QgdGhhdCB0aGV5IGhhdmUgdGhlIHNhbWUgc3RhbmRhcmQgZGV2aWF0aW9uLlxuICAgIC8vXG4gICAgLy8gVXN1YWxseSB0aGUgcmVzdWx0cyBoZXJlIGFyZSB1c2VkIHRvIGxvb2sgdXAgYVxuICAgIC8vIFtwLXZhbHVlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1AtdmFsdWUpLCB3aGljaCwgZm9yXG4gICAgLy8gYSBjZXJ0YWluIGxldmVsIG9mIHNpZ25pZmljYW5jZSwgd2lsbCBsZXQgeW91IGRldGVybWluZSB0aGF0IHRoZVxuICAgIC8vIG51bGwgaHlwb3RoZXNpcyBjYW4gb3IgY2Fubm90IGJlIHJlamVjdGVkLlxuICAgIC8vXG4gICAgLy8gYGRpZmZgIGNhbiBiZSBvbWl0dGVkIGlmIGl0IGVxdWFscyAwLlxuICAgIC8vXG4gICAgLy8gW1RoaXMgaXMgdXNlZCB0byBjb25maXJtIG9yIGRlbnldKGh0dHA6Ly93d3cubW9uYXJjaGxhYi5vcmcvTGFiL1Jlc2VhcmNoL1N0YXRzLzJTYW1wbGVULmFzcHgpXG4gICAgLy8gYSBudWxsIGh5cG90aGVzaXMgdGhhdCB0aGUgdHdvIHBvcHVsYXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNhbXBsZWQgaW50b1xuICAgIC8vIGBzYW1wbGVfeGAgYW5kIGBzYW1wbGVfeWAgYXJlIGVxdWFsIHRvIGVhY2ggb3RoZXIuXG4gICAgLy9cbiAgICAvLyBEZXBlbmRzIG9uIGBzYW1wbGVfdmFyaWFuY2UoKWAgYW5kIGBtZWFuKClgXG4gICAgZnVuY3Rpb24gdF90ZXN0X3R3b19zYW1wbGUoc2FtcGxlX3gsIHNhbXBsZV95LCBkaWZmZXJlbmNlKSB7XG4gICAgICAgIHZhciBuID0gc2FtcGxlX3gubGVuZ3RoLFxuICAgICAgICAgICAgbSA9IHNhbXBsZV95Lmxlbmd0aDtcblxuICAgICAgICAvLyBJZiBlaXRoZXIgc2FtcGxlIGRvZXNuJ3QgYWN0dWFsbHkgaGF2ZSBhbnkgdmFsdWVzLCB3ZSBjYW4ndFxuICAgICAgICAvLyBjb21wdXRlIHRoaXMgYXQgYWxsLCBzbyB3ZSByZXR1cm4gYG51bGxgLlxuICAgICAgICBpZiAoIW4gfHwgIW0pIHJldHVybiBudWxsIDtcblxuICAgICAgICAvLyBkZWZhdWx0IGRpZmZlcmVuY2UgKG11KSBpcyB6ZXJvXG4gICAgICAgIGlmICghZGlmZmVyZW5jZSkgZGlmZmVyZW5jZSA9IDA7XG5cbiAgICAgICAgdmFyIG1lYW5YID0gbWVhbihzYW1wbGVfeCksXG4gICAgICAgICAgICBtZWFuWSA9IG1lYW4oc2FtcGxlX3kpO1xuXG4gICAgICAgIHZhciB3ZWlnaHRlZFZhcmlhbmNlID0gKChuIC0gMSkgKiBzYW1wbGVfdmFyaWFuY2Uoc2FtcGxlX3gpICtcbiAgICAgICAgICAgIChtIC0gMSkgKiBzYW1wbGVfdmFyaWFuY2Uoc2FtcGxlX3kpKSAvIChuICsgbSAtIDIpO1xuXG4gICAgICAgIHJldHVybiAobWVhblggLSBtZWFuWSAtIGRpZmZlcmVuY2UpIC9cbiAgICAgICAgICAgIE1hdGguc3FydCh3ZWlnaHRlZFZhcmlhbmNlICogKDEgLyBuICsgMSAvIG0pKTtcbiAgICB9XG5cbiAgICAvLyAjIGNodW5rXG4gICAgLy9cbiAgICAvLyBTcGxpdCBhbiBhcnJheSBpbnRvIGNodW5rcyBvZiBhIHNwZWNpZmllZCBzaXplLiBUaGlzIGZ1bmN0aW9uXG4gICAgLy8gaGFzIHRoZSBzYW1lIGJlaGF2aW9yIGFzIFtQSFAncyBhcnJheV9jaHVua10oaHR0cDovL3BocC5uZXQvbWFudWFsL2VuL2Z1bmN0aW9uLmFycmF5LWNodW5rLnBocClcbiAgICAvLyBmdW5jdGlvbiwgYW5kIHRodXMgd2lsbCBpbnNlcnQgc21hbGxlci1zaXplZCBjaHVua3MgYXQgdGhlIGVuZCBpZlxuICAgIC8vIHRoZSBpbnB1dCBzaXplIGlzIG5vdCBkaXZpc2libGUgYnkgdGhlIGNodW5rIHNpemUuXG4gICAgLy9cbiAgICAvLyBgc2FtcGxlYCBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheSwgYW5kIGBjaHVua1NpemVgIGEgbnVtYmVyLlxuICAgIC8vIFRoZSBgc2FtcGxlYCBhcnJheSBjYW4gY29udGFpbiBhbnkga2luZCBvZiBkYXRhLlxuICAgIGZ1bmN0aW9uIGNodW5rKHNhbXBsZSwgY2h1bmtTaXplKSB7XG5cbiAgICAgICAgLy8gYSBsaXN0IG9mIHJlc3VsdCBjaHVua3MsIGFzIGFycmF5cyBpbiBhbiBhcnJheVxuICAgICAgICB2YXIgb3V0cHV0ID0gW107XG5cbiAgICAgICAgLy8gYGNodW5rU2l6ZWAgbXVzdCBiZSB6ZXJvIG9yIGhpZ2hlciAtIG90aGVyd2lzZSB0aGUgbG9vcCBiZWxvdyxcbiAgICAgICAgLy8gaW4gd2hpY2ggd2UgY2FsbCBgc3RhcnQgKz0gY2h1bmtTaXplYCwgd2lsbCBsb29wIGluZmluaXRlbHkuXG4gICAgICAgIC8vIFNvLCB3ZSdsbCBkZXRlY3QgYW5kIHJldHVybiBudWxsIGluIHRoYXQgY2FzZSB0byBpbmRpY2F0ZVxuICAgICAgICAvLyBpbnZhbGlkIGlucHV0LlxuICAgICAgICBpZiAoY2h1bmtTaXplIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYHN0YXJ0YCBpcyB0aGUgaW5kZXggYXQgd2hpY2ggYC5zbGljZWAgd2lsbCBzdGFydCBzZWxlY3RpbmdcbiAgICAgICAgLy8gbmV3IGFycmF5IGVsZW1lbnRzXG4gICAgICAgIGZvciAodmFyIHN0YXJ0ID0gMDsgc3RhcnQgPCBzYW1wbGUubGVuZ3RoOyBzdGFydCArPSBjaHVua1NpemUpIHtcblxuICAgICAgICAgICAgLy8gZm9yIGVhY2ggY2h1bmssIHNsaWNlIHRoYXQgcGFydCBvZiB0aGUgYXJyYXkgYW5kIGFkZCBpdFxuICAgICAgICAgICAgLy8gdG8gdGhlIG91dHB1dC4gVGhlIGAuc2xpY2VgIGZ1bmN0aW9uIGRvZXMgbm90IGNoYW5nZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIGFycmF5LlxuICAgICAgICAgICAgb3V0cHV0LnB1c2goc2FtcGxlLnNsaWNlKHN0YXJ0LCBzdGFydCArIGNodW5rU2l6ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgLy8gIyBzaHVmZmxlX2luX3BsYWNlXG4gICAgLy9cbiAgICAvLyBBIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXIlRTIlODAlOTNZYXRlc19zaHVmZmxlKVxuICAgIC8vIGluLXBsYWNlIC0gd2hpY2ggbWVhbnMgdGhhdCBpdCB3aWxsIGNoYW5nZSB0aGUgb3JkZXIgb2YgdGhlIG9yaWdpbmFsXG4gICAgLy8gYXJyYXkgYnkgcmVmZXJlbmNlLlxuICAgIGZ1bmN0aW9uIHNodWZmbGVfaW5fcGxhY2Uoc2FtcGxlLCByYW5kb21Tb3VyY2UpIHtcblxuICAgICAgICAvLyBhIGN1c3RvbSByYW5kb20gbnVtYmVyIHNvdXJjZSBjYW4gYmUgcHJvdmlkZWQgaWYgeW91IHdhbnQgdG8gdXNlXG4gICAgICAgIC8vIGEgZml4ZWQgc2VlZCBvciBhbm90aGVyIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yLCBsaWtlXG4gICAgICAgIC8vIFtyYW5kb20tanNdKGh0dHBzOi8vd3d3Lm5wbWpzLm9yZy9wYWNrYWdlL3JhbmRvbS1qcylcbiAgICAgICAgcmFuZG9tU291cmNlID0gcmFuZG9tU291cmNlIHx8IE1hdGgucmFuZG9tO1xuXG4gICAgICAgIC8vIHN0b3JlIHRoZSBjdXJyZW50IGxlbmd0aCBvZiB0aGUgc2FtcGxlIHRvIGRldGVybWluZVxuICAgICAgICAvLyB3aGVuIG5vIGVsZW1lbnRzIHJlbWFpbiB0byBzaHVmZmxlLlxuICAgICAgICB2YXIgbGVuZ3RoID0gc2FtcGxlLmxlbmd0aDtcblxuICAgICAgICAvLyB0ZW1wb3JhcnkgaXMgdXNlZCB0byBob2xkIGFuIGl0ZW0gd2hlbiBpdCBpcyBiZWluZ1xuICAgICAgICAvLyBzd2FwcGVkIGJldHdlZW4gaW5kaWNlcy5cbiAgICAgICAgdmFyIHRlbXBvcmFyeTtcblxuICAgICAgICAvLyBUaGUgaW5kZXggdG8gc3dhcCBhdCBlYWNoIHN0YWdlLlxuICAgICAgICB2YXIgaW5kZXg7XG5cbiAgICAgICAgLy8gV2hpbGUgdGhlcmUgYXJlIHN0aWxsIGl0ZW1zIHRvIHNodWZmbGVcbiAgICAgICAgd2hpbGUgKGxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGNob3NlIGEgcmFuZG9tIGluZGV4IHdpdGhpbiB0aGUgc3Vic2V0IG9mIHRoZSBhcnJheVxuICAgICAgICAgICAgLy8gdGhhdCBpcyBub3QgeWV0IHNodWZmbGVkXG4gICAgICAgICAgICBpbmRleCA9IE1hdGguZmxvb3IocmFuZG9tU291cmNlKCkgKiBsZW5ndGgtLSk7XG5cbiAgICAgICAgICAgIC8vIHN0b3JlIHRoZSB2YWx1ZSB0aGF0IHdlJ2xsIG1vdmUgdGVtcG9yYXJpbHlcbiAgICAgICAgICAgIHRlbXBvcmFyeSA9IHNhbXBsZVtsZW5ndGhdO1xuXG4gICAgICAgICAgICAvLyBzd2FwIHRoZSB2YWx1ZSBhdCBgc2FtcGxlW2xlbmd0aF1gIHdpdGggYHNhbXBsZVtpbmRleF1gXG4gICAgICAgICAgICBzYW1wbGVbbGVuZ3RoXSA9IHNhbXBsZVtpbmRleF07XG4gICAgICAgICAgICBzYW1wbGVbaW5kZXhdID0gdGVtcG9yYXJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNhbXBsZTtcbiAgICB9XG5cbiAgICAvLyAjIHNodWZmbGVcbiAgICAvL1xuICAgIC8vIEEgW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlciVFMiU4MCU5M1lhdGVzX3NodWZmbGUpXG4gICAgLy8gaXMgYSBmYXN0IHdheSB0byBjcmVhdGUgYSByYW5kb20gcGVybXV0YXRpb24gb2YgYSBmaW5pdGUgc2V0LlxuICAgIGZ1bmN0aW9uIHNodWZmbGUoc2FtcGxlLCByYW5kb21Tb3VyY2UpIHtcbiAgICAgICAgLy8gc2xpY2UgdGhlIG9yaWdpbmFsIGFycmF5IHNvIHRoYXQgaXQgaXMgbm90IG1vZGlmaWVkXG4gICAgICAgIHNhbXBsZSA9IHNhbXBsZS5zbGljZSgpO1xuXG4gICAgICAgIC8vIGFuZCB0aGVuIHNodWZmbGUgdGhhdCBzaGFsbG93LWNvcGllZCBhcnJheSwgaW4gcGxhY2VcbiAgICAgICAgcmV0dXJuIHNodWZmbGVfaW5fcGxhY2Uoc2FtcGxlLnNsaWNlKCksIHJhbmRvbVNvdXJjZSk7XG4gICAgfVxuXG4gICAgLy8gIyBzYW1wbGVcbiAgICAvL1xuICAgIC8vIENyZWF0ZSBhIFtzaW1wbGUgcmFuZG9tIHNhbXBsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaW1wbGVfcmFuZG9tX3NhbXBsZSlcbiAgICAvLyBmcm9tIGEgZ2l2ZW4gYXJyYXkgb2YgYG5gIGVsZW1lbnRzLlxuICAgIGZ1bmN0aW9uIHNhbXBsZShhcnJheSwgbiwgcmFuZG9tU291cmNlKSB7XG4gICAgICAgIC8vIHNodWZmbGUgdGhlIG9yaWdpbmFsIGFycmF5IHVzaW5nIGEgZmlzaGVyLXlhdGVzIHNodWZmbGVcbiAgICAgICAgdmFyIHNodWZmbGVkID0gc2h1ZmZsZShhcnJheSwgcmFuZG9tU291cmNlKTtcblxuICAgICAgICAvLyBhbmQgdGhlbiByZXR1cm4gYSBzdWJzZXQgb2YgaXQgLSB0aGUgZmlyc3QgYG5gIGVsZW1lbnRzLlxuICAgICAgICByZXR1cm4gc2h1ZmZsZWQuc2xpY2UoMCwgbik7XG4gICAgfVxuXG4gICAgLy8gIyBxdWFudGlsZVxuICAgIC8vXG4gICAgLy8gVGhpcyBpcyBhIHBvcHVsYXRpb24gcXVhbnRpbGUsIHNpbmNlIHdlIGFzc3VtZSB0byBrbm93IHRoZSBlbnRpcmVcbiAgICAvLyBkYXRhc2V0IGluIHRoaXMgbGlicmFyeS4gVGh1cyBJJ20gdHJ5aW5nIHRvIGZvbGxvdyB0aGVcbiAgICAvLyBbUXVhbnRpbGVzIG9mIGEgUG9wdWxhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWFudGlsZSNRdWFudGlsZXNfb2ZfYV9wb3B1bGF0aW9uKVxuICAgIC8vIGFsZ29yaXRobSBmcm9tIHdpa2lwZWRpYS5cbiAgICAvL1xuICAgIC8vIFNhbXBsZSBpcyBhIG9uZS1kaW1lbnNpb25hbCBhcnJheSBvZiBudW1iZXJzLFxuICAgIC8vIGFuZCBwIGlzIGVpdGhlciBhIGRlY2ltYWwgbnVtYmVyIGZyb20gMCB0byAxIG9yIGFuIGFycmF5IG9mIGRlY2ltYWxcbiAgICAvLyBudW1iZXJzIGZyb20gMCB0byAxLlxuICAgIC8vIEluIHRlcm1zIG9mIGEgay9xIHF1YW50aWxlLCBwID0gay9xIC0gaXQncyBqdXN0IGRlYWxpbmcgd2l0aCBmcmFjdGlvbnMgb3IgZGVhbGluZ1xuICAgIC8vIHdpdGggZGVjaW1hbCB2YWx1ZXMuXG4gICAgLy8gV2hlbiBwIGlzIGFuIGFycmF5LCB0aGUgcmVzdWx0IG9mIHRoZSBmdW5jdGlvbiBpcyBhbHNvIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGFwcHJvcHJpYXRlXG4gICAgLy8gcXVhbnRpbGVzIGluIGlucHV0IG9yZGVyXG4gICAgZnVuY3Rpb24gcXVhbnRpbGUoc2FtcGxlLCBwKSB7XG5cbiAgICAgICAgLy8gV2UgY2FuJ3QgZGVyaXZlIHF1YW50aWxlcyBmcm9tIGFuIGVtcHR5IGxpc3RcbiAgICAgICAgaWYgKHNhbXBsZS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIC8vIFNvcnQgYSBjb3B5IG9mIHRoZSBhcnJheS4gV2UnbGwgbmVlZCBhIHNvcnRlZCBhcnJheSB0byBpbmRleFxuICAgICAgICAvLyB0aGUgdmFsdWVzIGluIHNvcnRlZCBvcmRlci5cbiAgICAgICAgdmFyIHNvcnRlZCA9IHNhbXBsZS5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgLSBiOyB9KTtcblxuICAgICAgICBpZiAocC5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc3VsdCBhcnJheVxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIC8vIEZvciBlYWNoIHJlcXVlc3RlZCBxdWFudGlsZVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHF1YW50aWxlX3NvcnRlZChzb3J0ZWQsIHBbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcXVhbnRpbGVfc29ydGVkKHNvcnRlZCwgcCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIHF1YW50aWxlXG4gICAgLy9cbiAgICAvLyBUaGlzIGlzIHRoZSBpbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiBxdWFudGlsZXM6IHdoZW4geW91IGtub3dcbiAgICAvLyB0aGF0IHRoZSBvcmRlciBpcyBzb3J0ZWQsIHlvdSBkb24ndCBuZWVkIHRvIHJlLXNvcnQgaXQsIGFuZCB0aGUgY29tcHV0YXRpb25zXG4gICAgLy8gYXJlIG11Y2ggZmFzdGVyLlxuICAgIGZ1bmN0aW9uIHF1YW50aWxlX3NvcnRlZChzYW1wbGUsIHApIHtcbiAgICAgICAgdmFyIGlkeCA9IChzYW1wbGUubGVuZ3RoKSAqIHA7XG4gICAgICAgIGlmIChwIDwgMCB8fCBwID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAocCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gSWYgcCBpcyAxLCBkaXJlY3RseSByZXR1cm4gdGhlIGxhc3QgZWxlbWVudFxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZVtzYW1wbGUubGVuZ3RoIC0gMV07XG4gICAgICAgIH0gZWxzZSBpZiAocCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gSWYgcCBpcyAwLCBkaXJlY3RseSByZXR1cm4gdGhlIGZpcnN0IGVsZW1lbnRcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVbMF07XG4gICAgICAgIH0gZWxzZSBpZiAoaWR4ICUgMSAhPT0gMCkge1xuICAgICAgICAgICAgLy8gSWYgcCBpcyBub3QgaW50ZWdlciwgcmV0dXJuIHRoZSBuZXh0IGVsZW1lbnQgaW4gYXJyYXlcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVbTWF0aC5jZWlsKGlkeCkgLSAxXTtcbiAgICAgICAgfSBlbHNlIGlmIChzYW1wbGUubGVuZ3RoICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGxpc3QgaGFzIGV2ZW4tbGVuZ3RoLCB3ZSdsbCB0YWtlIHRoZSBhdmVyYWdlIG9mIHRoaXMgbnVtYmVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlIG5leHQgdmFsdWUsIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgcmV0dXJuIChzYW1wbGVbaWR4IC0gMV0gKyBzYW1wbGVbaWR4XSkgLyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgaW4gdGhlIHNpbXBsZSBjYXNlIG9mIGFuIGludGVnZXIgdmFsdWVcbiAgICAgICAgICAgIC8vIHdpdGggYW4gb2RkLWxlbmd0aCBsaXN0LCByZXR1cm4gdGhlIHNhbXBsZSB2YWx1ZSBhdCB0aGUgaW5kZXguXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlW2lkeF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIFtJbnRlcnF1YXJ0aWxlIHJhbmdlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0ludGVycXVhcnRpbGVfcmFuZ2UpXG4gICAgLy9cbiAgICAvLyBBIG1lYXN1cmUgb2Ygc3RhdGlzdGljYWwgZGlzcGVyc2lvbiwgb3IgaG93IHNjYXR0ZXJlZCwgc3ByZWFkLCBvclxuICAgIC8vIGNvbmNlbnRyYXRlZCBhIGRpc3RyaWJ1dGlvbiBpcy4gSXQncyBjb21wdXRlZCBhcyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuXG4gICAgLy8gdGhlIHRoaXJkIHF1YXJ0aWxlIGFuZCBmaXJzdCBxdWFydGlsZS5cbiAgICBmdW5jdGlvbiBpcXIoc2FtcGxlKSB7XG4gICAgICAgIC8vIFdlIGNhbid0IGRlcml2ZSBxdWFudGlsZXMgZnJvbSBhbiBlbXB0eSBsaXN0XG4gICAgICAgIGlmIChzYW1wbGUubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAvLyBJbnRlcnF1YXJ0aWxlIHJhbmdlIGlzIHRoZSBzcGFuIGJldHdlZW4gdGhlIHVwcGVyIHF1YXJ0aWxlLFxuICAgICAgICAvLyBhdCBgMC43NWAsIGFuZCBsb3dlciBxdWFydGlsZSwgYDAuMjVgXG4gICAgICAgIHJldHVybiBxdWFudGlsZShzYW1wbGUsIDAuNzUpIC0gcXVhbnRpbGUoc2FtcGxlLCAwLjI1KTtcbiAgICB9XG5cbiAgICAvLyAjIFtNZWRpYW4gQWJzb2x1dGUgRGV2aWF0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01lZGlhbl9hYnNvbHV0ZV9kZXZpYXRpb24pXG4gICAgLy9cbiAgICAvLyBUaGUgTWVkaWFuIEFic29sdXRlIERldmlhdGlvbiAoTUFEKSBpcyBhIHJvYnVzdCBtZWFzdXJlIG9mIHN0YXRpc3RpY2FsXG4gICAgLy8gZGlzcGVyc2lvbi4gSXQgaXMgbW9yZSByZXNpbGllbnQgdG8gb3V0bGllcnMgdGhhbiB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uLlxuICAgIGZ1bmN0aW9uIG1hZCh4KSB7XG4gICAgICAgIC8vIFRoZSBtYWQgb2Ygbm90aGluZyBpcyBudWxsXG4gICAgICAgIGlmICgheCB8fCB4Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIG1lZGlhbl92YWx1ZSA9IG1lZGlhbih4KSxcbiAgICAgICAgICAgIG1lZGlhbl9hYnNvbHV0ZV9kZXZpYXRpb25zID0gW107XG5cbiAgICAgICAgLy8gTWFrZSBhIGxpc3Qgb2YgYWJzb2x1dGUgZGV2aWF0aW9ucyBmcm9tIHRoZSBtZWRpYW5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtZWRpYW5fYWJzb2x1dGVfZGV2aWF0aW9ucy5wdXNoKE1hdGguYWJzKHhbaV0gLSBtZWRpYW5fdmFsdWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmQgdGhlIG1lZGlhbiB2YWx1ZSBvZiB0aGF0IGxpc3RcbiAgICAgICAgcmV0dXJuIG1lZGlhbihtZWRpYW5fYWJzb2x1dGVfZGV2aWF0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gIyMgQ29tcHV0ZSBNYXRyaWNlcyBmb3IgSmVua3NcbiAgICAvL1xuICAgIC8vIENvbXB1dGUgdGhlIG1hdHJpY2VzIHJlcXVpcmVkIGZvciBKZW5rcyBicmVha3MuIFRoZXNlIG1hdHJpY2VzXG4gICAgLy8gY2FuIGJlIHVzZWQgZm9yIGFueSBjbGFzc2luZyBvZiBkYXRhIHdpdGggYGNsYXNzZXMgPD0gbl9jbGFzc2VzYFxuICAgIGZ1bmN0aW9uIGplbmtzTWF0cmljZXMoZGF0YSwgbl9jbGFzc2VzKSB7XG5cbiAgICAgICAgLy8gaW4gdGhlIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uLCB0aGVzZSBtYXRyaWNlcyBhcmUgcmVmZXJyZWQgdG9cbiAgICAgICAgLy8gYXMgYExDYCBhbmQgYE9QYFxuICAgICAgICAvL1xuICAgICAgICAvLyAqIGxvd2VyX2NsYXNzX2xpbWl0cyAoTEMpOiBvcHRpbWFsIGxvd2VyIGNsYXNzIGxpbWl0c1xuICAgICAgICAvLyAqIHZhcmlhbmNlX2NvbWJpbmF0aW9ucyAoT1ApOiBvcHRpbWFsIHZhcmlhbmNlIGNvbWJpbmF0aW9ucyBmb3IgYWxsIGNsYXNzZXNcbiAgICAgICAgdmFyIGxvd2VyX2NsYXNzX2xpbWl0cyA9IFtdLFxuICAgICAgICAgICAgdmFyaWFuY2VfY29tYmluYXRpb25zID0gW10sXG4gICAgICAgICAgICAvLyBsb29wIGNvdW50ZXJzXG4gICAgICAgICAgICBpLCBqLFxuICAgICAgICAgICAgLy8gdGhlIHZhcmlhbmNlLCBhcyBjb21wdXRlZCBhdCBlYWNoIHN0ZXAgaW4gdGhlIGNhbGN1bGF0aW9uXG4gICAgICAgICAgICB2YXJpYW5jZSA9IDA7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhbmQgZmlsbCBlYWNoIG1hdHJpeCB3aXRoIHplcm9lc1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGggKyAxOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0bXAxID0gW10sIHRtcDIgPSBbXTtcbiAgICAgICAgICAgIC8vIGRlc3BpdGUgdGhlc2UgYXJyYXlzIGhhdmluZyB0aGUgc2FtZSB2YWx1ZXMsIHdlIG5lZWRcbiAgICAgICAgICAgIC8vIHRvIGtlZXAgdGhlbSBzZXBhcmF0ZSBzbyB0aGF0IGNoYW5naW5nIG9uZSBkb2VzIG5vdCBjaGFuZ2VcbiAgICAgICAgICAgIC8vIHRoZSBvdGhlclxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IG5fY2xhc3NlcyArIDE7IGorKykge1xuICAgICAgICAgICAgICAgIHRtcDEucHVzaCgwKTtcbiAgICAgICAgICAgICAgICB0bXAyLnB1c2goMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb3dlcl9jbGFzc19saW1pdHMucHVzaCh0bXAxKTtcbiAgICAgICAgICAgIHZhcmlhbmNlX2NvbWJpbmF0aW9ucy5wdXNoKHRtcDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMTsgaSA8IG5fY2xhc3NlcyArIDE7IGkrKykge1xuICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzWzFdW2ldID0gMTtcbiAgICAgICAgICAgIHZhcmlhbmNlX2NvbWJpbmF0aW9uc1sxXVtpXSA9IDA7XG4gICAgICAgICAgICAvLyBpbiB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb24sIDk5OTk5OTkgaXMgdXNlZCBidXRcbiAgICAgICAgICAgIC8vIHNpbmNlIEphdmFzY3JpcHQgaGFzIGBJbmZpbml0eWAsIHdlIHVzZSB0aGF0LlxuICAgICAgICAgICAgZm9yIChqID0gMjsgaiA8IGRhdGEubGVuZ3RoICsgMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyaWFuY2VfY29tYmluYXRpb25zW2pdW2ldID0gSW5maW5pdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBsID0gMjsgbCA8IGRhdGEubGVuZ3RoICsgMTsgbCsrKSB7XG5cbiAgICAgICAgICAgIC8vIGBTWmAgb3JpZ2luYWxseS4gdGhpcyBpcyB0aGUgc3VtIG9mIHRoZSB2YWx1ZXMgc2VlbiB0aHVzXG4gICAgICAgICAgICAvLyBmYXIgd2hlbiBjYWxjdWxhdGluZyB2YXJpYW5jZS5cbiAgICAgICAgICAgIHZhciBzdW0gPSAwLFxuICAgICAgICAgICAgICAgIC8vIGBaU1FgIG9yaWdpbmFsbHkuIHRoZSBzdW0gb2Ygc3F1YXJlcyBvZiB2YWx1ZXMgc2VlblxuICAgICAgICAgICAgICAgIC8vIHRodXMgZmFyXG4gICAgICAgICAgICAgICAgc3VtX3NxdWFyZXMgPSAwLFxuICAgICAgICAgICAgICAgIC8vIGBXVGAgb3JpZ2luYWxseS4gVGhpcyBpcyB0aGUgbnVtYmVyIG9mXG4gICAgICAgICAgICAgICAgdyA9IDAsXG4gICAgICAgICAgICAgICAgLy8gYElWYCBvcmlnaW5hbGx5XG4gICAgICAgICAgICAgICAgaTQgPSAwO1xuXG4gICAgICAgICAgICAvLyBpbiBzZXZlcmFsIGluc3RhbmNlcywgeW91IGNvdWxkIHNheSBgTWF0aC5wb3coeCwgMilgXG4gICAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGB4ICogeGAsIGJ1dCB0aGlzIGlzIHNsb3dlciBpbiBzb21lIGJyb3dzZXJzXG4gICAgICAgICAgICAvLyBpbnRyb2R1Y2VzIGFuIHVubmVjZXNzYXJ5IGNvbmNlcHQuXG4gICAgICAgICAgICBmb3IgKHZhciBtID0gMTsgbSA8IGwgKyAxOyBtKyspIHtcblxuICAgICAgICAgICAgICAgIC8vIGBJSUlgIG9yaWdpbmFsbHlcbiAgICAgICAgICAgICAgICB2YXIgbG93ZXJfY2xhc3NfbGltaXQgPSBsIC0gbSArIDEsXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IGRhdGFbbG93ZXJfY2xhc3NfbGltaXQgLSAxXTtcblxuICAgICAgICAgICAgICAgIC8vIGhlcmUgd2UncmUgZXN0aW1hdGluZyB2YXJpYW5jZSBmb3IgZWFjaCBwb3RlbnRpYWwgY2xhc3NpbmdcbiAgICAgICAgICAgICAgICAvLyBvZiB0aGUgZGF0YSwgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZiBjbGFzc2VzLiBgd2BcbiAgICAgICAgICAgICAgICAvLyBpcyB0aGUgbnVtYmVyIG9mIGRhdGEgcG9pbnRzIGNvbnNpZGVyZWQgc28gZmFyLlxuICAgICAgICAgICAgICAgIHcrKztcblxuICAgICAgICAgICAgICAgIC8vIGluY3JlYXNlIHRoZSBjdXJyZW50IHN1bSBhbmQgc3VtLW9mLXNxdWFyZXNcbiAgICAgICAgICAgICAgICBzdW0gKz0gdmFsO1xuICAgICAgICAgICAgICAgIHN1bV9zcXVhcmVzICs9IHZhbCAqIHZhbDtcblxuICAgICAgICAgICAgICAgIC8vIHRoZSB2YXJpYW5jZSBhdCB0aGlzIHBvaW50IGluIHRoZSBzZXF1ZW5jZSBpcyB0aGUgZGlmZmVyZW5jZVxuICAgICAgICAgICAgICAgIC8vIGJldHdlZW4gdGhlIHN1bSBvZiBzcXVhcmVzIGFuZCB0aGUgdG90YWwgeCAyLCBvdmVyIHRoZSBudW1iZXJcbiAgICAgICAgICAgICAgICAvLyBvZiBzYW1wbGVzLlxuICAgICAgICAgICAgICAgIHZhcmlhbmNlID0gc3VtX3NxdWFyZXMgLSAoc3VtICogc3VtKSAvIHc7XG5cbiAgICAgICAgICAgICAgICBpNCA9IGxvd2VyX2NsYXNzX2xpbWl0IC0gMTtcblxuICAgICAgICAgICAgICAgIGlmIChpNCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAyOyBqIDwgbl9jbGFzc2VzICsgMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBhZGRpbmcgdGhpcyBlbGVtZW50IHRvIGFuIGV4aXN0aW5nIGNsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aWxsIGluY3JlYXNlIGl0cyB2YXJpYW5jZSBiZXlvbmQgdGhlIGxpbWl0LCBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNsYXNzIGF0IHRoaXMgcG9pbnQsIHNldHRpbmcgdGhlIGBsb3dlcl9jbGFzc19saW1pdGBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFuY2VfY29tYmluYXRpb25zW2xdW2pdID49XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZhcmlhbmNlICsgdmFyaWFuY2VfY29tYmluYXRpb25zW2k0XVtqIC0gMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzW2xdW2pdID0gbG93ZXJfY2xhc3NfbGltaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFuY2VfY29tYmluYXRpb25zW2xdW2pdID0gdmFyaWFuY2UgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW5jZV9jb21iaW5hdGlvbnNbaTRdW2ogLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzW2xdWzFdID0gMTtcbiAgICAgICAgICAgIHZhcmlhbmNlX2NvbWJpbmF0aW9uc1tsXVsxXSA9IHZhcmlhbmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSB0d28gbWF0cmljZXMuIGZvciBqdXN0IHByb3ZpZGluZyBicmVha3MsIG9ubHlcbiAgICAgICAgLy8gYGxvd2VyX2NsYXNzX2xpbWl0c2AgaXMgbmVlZGVkLCBidXQgdmFyaWFuY2VzIGNhbiBiZSB1c2VmdWwgdG9cbiAgICAgICAgLy8gZXZhbHVhdGUgZ29vZG5lc3Mgb2YgZml0LlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzOiBsb3dlcl9jbGFzc19saW1pdHMsXG4gICAgICAgICAgICB2YXJpYW5jZV9jb21iaW5hdGlvbnM6IHZhcmlhbmNlX2NvbWJpbmF0aW9uc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vICMjIFB1bGwgQnJlYWtzIFZhbHVlcyBmb3IgSmVua3NcbiAgICAvL1xuICAgIC8vIHRoZSBzZWNvbmQgcGFydCBvZiB0aGUgamVua3MgcmVjaXBlOiB0YWtlIHRoZSBjYWxjdWxhdGVkIG1hdHJpY2VzXG4gICAgLy8gYW5kIGRlcml2ZSBhbiBhcnJheSBvZiBuIGJyZWFrcy5cbiAgICBmdW5jdGlvbiBqZW5rc0JyZWFrcyhkYXRhLCBsb3dlcl9jbGFzc19saW1pdHMsIG5fY2xhc3Nlcykge1xuXG4gICAgICAgIHZhciBrID0gZGF0YS5sZW5ndGggLSAxLFxuICAgICAgICAgICAga2NsYXNzID0gW10sXG4gICAgICAgICAgICBjb3VudE51bSA9IG5fY2xhc3NlcztcblxuICAgICAgICAvLyB0aGUgY2FsY3VsYXRpb24gb2YgY2xhc3NlcyB3aWxsIG5ldmVyIGluY2x1ZGUgdGhlIHVwcGVyIGFuZFxuICAgICAgICAvLyBsb3dlciBib3VuZHMsIHNvIHdlIG5lZWQgdG8gZXhwbGljaXRseSBzZXQgdGhlbVxuICAgICAgICBrY2xhc3Nbbl9jbGFzc2VzXSA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAga2NsYXNzWzBdID0gZGF0YVswXTtcblxuICAgICAgICAvLyB0aGUgbG93ZXJfY2xhc3NfbGltaXRzIG1hdHJpeCBpcyB1c2VkIGFzIGluZGljZXMgaW50byBpdHNlbGZcbiAgICAgICAgLy8gaGVyZTogdGhlIGBrYCB2YXJpYWJsZSBpcyByZXVzZWQgaW4gZWFjaCBpdGVyYXRpb24uXG4gICAgICAgIHdoaWxlIChjb3VudE51bSA+IDEpIHtcbiAgICAgICAgICAgIGtjbGFzc1tjb3VudE51bSAtIDFdID0gZGF0YVtsb3dlcl9jbGFzc19saW1pdHNba11bY291bnROdW1dIC0gMl07XG4gICAgICAgICAgICBrID0gbG93ZXJfY2xhc3NfbGltaXRzW2tdW2NvdW50TnVtXSAtIDE7XG4gICAgICAgICAgICBjb3VudE51bS0tO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGtjbGFzcztcbiAgICB9XG5cbiAgICAvLyAjIFtKZW5rcyBuYXR1cmFsIGJyZWFrcyBvcHRpbWl6YXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSmVua3NfbmF0dXJhbF9icmVha3Nfb3B0aW1pemF0aW9uKVxuICAgIC8vXG4gICAgLy8gSW1wbGVtZW50YXRpb25zOiBbMV0oaHR0cDovL2RhbmllbGpsZXdpcy5vcmcvZmlsZXMvMjAxMC8wNi9KZW5rcy5wZGYpIChweXRob24pLFxuICAgIC8vIFsyXShodHRwczovL2dpdGh1Yi5jb20vdnZvb3Z2L2RqZW8tamVua3MvYmxvYi9tYXN0ZXIvbWFpbi5qcykgKGJ1Z2d5KSxcbiAgICAvLyBbM10oaHR0cHM6Ly9naXRodWIuY29tL3NpbW9nZW8vZ2Vvc3RhdHMvYmxvYi9tYXN0ZXIvbGliL2dlb3N0YXRzLmpzI0w0MDcpICh3b3JrcylcbiAgICAvL1xuICAgIC8vIERlcGVuZHMgb24gYGplbmtzQnJlYWtzKClgIGFuZCBgamVua3NNYXRyaWNlcygpYFxuICAgIGZ1bmN0aW9uIGplbmtzKGRhdGEsIG5fY2xhc3Nlcykge1xuXG4gICAgICAgIGlmIChuX2NsYXNzZXMgPiBkYXRhLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgLy8gc29ydCBkYXRhIGluIG51bWVyaWNhbCBvcmRlciwgc2luY2UgdGhpcyBpcyBleHBlY3RlZFxuICAgICAgICAvLyBieSB0aGUgbWF0cmljZXMgZnVuY3Rpb25cbiAgICAgICAgZGF0YSA9IGRhdGEuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG5cbiAgICAgICAgLy8gZ2V0IG91ciBiYXNpYyBtYXRyaWNlc1xuICAgICAgICB2YXIgbWF0cmljZXMgPSBqZW5rc01hdHJpY2VzKGRhdGEsIG5fY2xhc3NlcyksXG4gICAgICAgICAgICAvLyB3ZSBvbmx5IG5lZWQgbG93ZXIgY2xhc3MgbGltaXRzIGhlcmVcbiAgICAgICAgICAgIGxvd2VyX2NsYXNzX2xpbWl0cyA9IG1hdHJpY2VzLmxvd2VyX2NsYXNzX2xpbWl0cztcblxuICAgICAgICAvLyBleHRyYWN0IG5fY2xhc3NlcyBvdXQgb2YgdGhlIGNvbXB1dGVkIG1hdHJpY2VzXG4gICAgICAgIHJldHVybiBqZW5rc0JyZWFrcyhkYXRhLCBsb3dlcl9jbGFzc19saW1pdHMsIG5fY2xhc3Nlcyk7XG5cbiAgICB9XG5cbiAgICAvLyAjIFtTa2V3bmVzc10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Ta2V3bmVzcylcbiAgICAvL1xuICAgIC8vIEEgbWVhc3VyZSBvZiB0aGUgZXh0ZW50IHRvIHdoaWNoIGEgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIG9mIGFcbiAgICAvLyByZWFsLXZhbHVlZCByYW5kb20gdmFyaWFibGUgXCJsZWFuc1wiIHRvIG9uZSBzaWRlIG9mIHRoZSBtZWFuLlxuICAgIC8vIFRoZSBza2V3bmVzcyB2YWx1ZSBjYW4gYmUgcG9zaXRpdmUgb3IgbmVnYXRpdmUsIG9yIGV2ZW4gdW5kZWZpbmVkLlxuICAgIC8vXG4gICAgLy8gSW1wbGVtZW50YXRpb24gaXMgYmFzZWQgb24gdGhlIGFkanVzdGVkIEZpc2hlci1QZWFyc29uIHN0YW5kYXJkaXplZFxuICAgIC8vIG1vbWVudCBjb2VmZmljaWVudCwgd2hpY2ggaXMgdGhlIHZlcnNpb24gZm91bmQgaW4gRXhjZWwgYW5kIHNldmVyYWxcbiAgICAvLyBzdGF0aXN0aWNhbCBwYWNrYWdlcyBpbmNsdWRpbmcgTWluaXRhYiwgU0FTIGFuZCBTUFNTLlxuICAgIC8vXG4gICAgLy8gRGVwZW5kcyBvbiBgc3VtX250aF9wb3dlcl9kZXZpYXRpb25zKClgIGFuZCBgc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbmBcbiAgICBmdW5jdGlvbiBzYW1wbGVfc2tld25lc3MoeCkge1xuICAgICAgICAvLyBUaGUgc2tld25lc3Mgb2YgbGVzcyB0aGFuIHRocmVlIGFyZ3VtZW50cyBpcyBudWxsXG4gICAgICAgIGlmICh4Lmxlbmd0aCA8IDMpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciBuID0geC5sZW5ndGgsXG4gICAgICAgICAgICBjdWJlZF9zID0gTWF0aC5wb3coc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbih4KSwgMyksXG4gICAgICAgICAgICBzdW1fY3ViZWRfZGV2aWF0aW9ucyA9IHN1bV9udGhfcG93ZXJfZGV2aWF0aW9ucyh4LCAzKTtcblxuICAgICAgICByZXR1cm4gbiAqIHN1bV9jdWJlZF9kZXZpYXRpb25zIC8gKChuIC0gMSkgKiAobiAtIDIpICogY3ViZWRfcyk7XG4gICAgfVxuXG4gICAgLy8gIyBTdGFuZGFyZCBOb3JtYWwgVGFibGVcbiAgICAvLyBBIHN0YW5kYXJkIG5vcm1hbCB0YWJsZSwgYWxzbyBjYWxsZWQgdGhlIHVuaXQgbm9ybWFsIHRhYmxlIG9yIFogdGFibGUsXG4gICAgLy8gaXMgYSBtYXRoZW1hdGljYWwgdGFibGUgZm9yIHRoZSB2YWx1ZXMgb2YgzqYgKHBoaSksIHdoaWNoIGFyZSB0aGUgdmFsdWVzIG9mXG4gICAgLy8gdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIGZ1bmN0aW9uIG9mIHRoZSBub3JtYWwgZGlzdHJpYnV0aW9uLlxuICAgIC8vIEl0IGlzIHVzZWQgdG8gZmluZCB0aGUgcHJvYmFiaWxpdHkgdGhhdCBhIHN0YXRpc3RpYyBpcyBvYnNlcnZlZCBiZWxvdyxcbiAgICAvLyBhYm92ZSwgb3IgYmV0d2VlbiB2YWx1ZXMgb24gdGhlIHN0YW5kYXJkIG5vcm1hbCBkaXN0cmlidXRpb24sIGFuZCBieVxuICAgIC8vIGV4dGVuc2lvbiwgYW55IG5vcm1hbCBkaXN0cmlidXRpb24uXG4gICAgLy9cbiAgICAvLyBUaGUgcHJvYmFiaWxpdGllcyBhcmUgdGFrZW4gZnJvbSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0YW5kYXJkX25vcm1hbF90YWJsZVxuICAgIC8vIFRoZSB0YWJsZSB1c2VkIGlzIHRoZSBjdW11bGF0aXZlLCBhbmQgbm90IGN1bXVsYXRpdmUgZnJvbSAwIHRvIG1lYW5cbiAgICAvLyAoZXZlbiB0aG91Z2ggdGhlIGxhdHRlciBoYXMgNSBkaWdpdHMgcHJlY2lzaW9uLCBpbnN0ZWFkIG9mIDQpLlxuICAgIHZhciBzdGFuZGFyZF9ub3JtYWxfdGFibGUgPSBbXG4gICAgICAgIC8qICB6ICAgICAgMC4wMCAgICAwLjAxICAgIDAuMDIgICAgMC4wMyAgICAwLjA0ICAgIDAuMDUgICAgMC4wNiAgICAwLjA3ICAgIDAuMDggICAgMC4wOSAqL1xuICAgICAgICAvKiAwLjAgKi9cbiAgICAgICAgMC41MDAwLCAwLjUwNDAsIDAuNTA4MCwgMC41MTIwLCAwLjUxNjAsIDAuNTE5OSwgMC41MjM5LCAwLjUyNzksIDAuNTMxOSwgMC41MzU5LFxuICAgICAgICAvKiAwLjEgKi9cbiAgICAgICAgMC41Mzk4LCAwLjU0MzgsIDAuNTQ3OCwgMC41NTE3LCAwLjU1NTcsIDAuNTU5NiwgMC41NjM2LCAwLjU2NzUsIDAuNTcxNCwgMC41NzUzLFxuICAgICAgICAvKiAwLjIgKi9cbiAgICAgICAgMC41NzkzLCAwLjU4MzIsIDAuNTg3MSwgMC41OTEwLCAwLjU5NDgsIDAuNTk4NywgMC42MDI2LCAwLjYwNjQsIDAuNjEwMywgMC42MTQxLFxuICAgICAgICAvKiAwLjMgKi9cbiAgICAgICAgMC42MTc5LCAwLjYyMTcsIDAuNjI1NSwgMC42MjkzLCAwLjYzMzEsIDAuNjM2OCwgMC42NDA2LCAwLjY0NDMsIDAuNjQ4MCwgMC42NTE3LFxuICAgICAgICAvKiAwLjQgKi9cbiAgICAgICAgMC42NTU0LCAwLjY1OTEsIDAuNjYyOCwgMC42NjY0LCAwLjY3MDAsIDAuNjczNiwgMC42NzcyLCAwLjY4MDgsIDAuNjg0NCwgMC42ODc5LFxuICAgICAgICAvKiAwLjUgKi9cbiAgICAgICAgMC42OTE1LCAwLjY5NTAsIDAuNjk4NSwgMC43MDE5LCAwLjcwNTQsIDAuNzA4OCwgMC43MTIzLCAwLjcxNTcsIDAuNzE5MCwgMC43MjI0LFxuICAgICAgICAvKiAwLjYgKi9cbiAgICAgICAgMC43MjU3LCAwLjcyOTEsIDAuNzMyNCwgMC43MzU3LCAwLjczODksIDAuNzQyMiwgMC43NDU0LCAwLjc0ODYsIDAuNzUxNywgMC43NTQ5LFxuICAgICAgICAvKiAwLjcgKi9cbiAgICAgICAgMC43NTgwLCAwLjc2MTEsIDAuNzY0MiwgMC43NjczLCAwLjc3MDQsIDAuNzczNCwgMC43NzY0LCAwLjc3OTQsIDAuNzgyMywgMC43ODUyLFxuICAgICAgICAvKiAwLjggKi9cbiAgICAgICAgMC43ODgxLCAwLjc5MTAsIDAuNzkzOSwgMC43OTY3LCAwLjc5OTUsIDAuODAyMywgMC44MDUxLCAwLjgwNzgsIDAuODEwNiwgMC44MTMzLFxuICAgICAgICAvKiAwLjkgKi9cbiAgICAgICAgMC44MTU5LCAwLjgxODYsIDAuODIxMiwgMC44MjM4LCAwLjgyNjQsIDAuODI4OSwgMC44MzE1LCAwLjgzNDAsIDAuODM2NSwgMC44Mzg5LFxuICAgICAgICAvKiAxLjAgKi9cbiAgICAgICAgMC44NDEzLCAwLjg0MzgsIDAuODQ2MSwgMC44NDg1LCAwLjg1MDgsIDAuODUzMSwgMC44NTU0LCAwLjg1NzcsIDAuODU5OSwgMC44NjIxLFxuICAgICAgICAvKiAxLjEgKi9cbiAgICAgICAgMC44NjQzLCAwLjg2NjUsIDAuODY4NiwgMC44NzA4LCAwLjg3MjksIDAuODc0OSwgMC44NzcwLCAwLjg3OTAsIDAuODgxMCwgMC44ODMwLFxuICAgICAgICAvKiAxLjIgKi9cbiAgICAgICAgMC44ODQ5LCAwLjg4NjksIDAuODg4OCwgMC44OTA3LCAwLjg5MjUsIDAuODk0NCwgMC44OTYyLCAwLjg5ODAsIDAuODk5NywgMC45MDE1LFxuICAgICAgICAvKiAxLjMgKi9cbiAgICAgICAgMC45MDMyLCAwLjkwNDksIDAuOTA2NiwgMC45MDgyLCAwLjkwOTksIDAuOTExNSwgMC45MTMxLCAwLjkxNDcsIDAuOTE2MiwgMC45MTc3LFxuICAgICAgICAvKiAxLjQgKi9cbiAgICAgICAgMC45MTkyLCAwLjkyMDcsIDAuOTIyMiwgMC45MjM2LCAwLjkyNTEsIDAuOTI2NSwgMC45Mjc5LCAwLjkyOTIsIDAuOTMwNiwgMC45MzE5LFxuICAgICAgICAvKiAxLjUgKi9cbiAgICAgICAgMC45MzMyLCAwLjkzNDUsIDAuOTM1NywgMC45MzcwLCAwLjkzODIsIDAuOTM5NCwgMC45NDA2LCAwLjk0MTgsIDAuOTQyOSwgMC45NDQxLFxuICAgICAgICAvKiAxLjYgKi9cbiAgICAgICAgMC45NDUyLCAwLjk0NjMsIDAuOTQ3NCwgMC45NDg0LCAwLjk0OTUsIDAuOTUwNSwgMC45NTE1LCAwLjk1MjUsIDAuOTUzNSwgMC45NTQ1LFxuICAgICAgICAvKiAxLjcgKi9cbiAgICAgICAgMC45NTU0LCAwLjk1NjQsIDAuOTU3MywgMC45NTgyLCAwLjk1OTEsIDAuOTU5OSwgMC45NjA4LCAwLjk2MTYsIDAuOTYyNSwgMC45NjMzLFxuICAgICAgICAvKiAxLjggKi9cbiAgICAgICAgMC45NjQxLCAwLjk2NDksIDAuOTY1NiwgMC45NjY0LCAwLjk2NzEsIDAuOTY3OCwgMC45Njg2LCAwLjk2OTMsIDAuOTY5OSwgMC45NzA2LFxuICAgICAgICAvKiAxLjkgKi9cbiAgICAgICAgMC45NzEzLCAwLjk3MTksIDAuOTcyNiwgMC45NzMyLCAwLjk3MzgsIDAuOTc0NCwgMC45NzUwLCAwLjk3NTYsIDAuOTc2MSwgMC45NzY3LFxuICAgICAgICAvKiAyLjAgKi9cbiAgICAgICAgMC45NzcyLCAwLjk3NzgsIDAuOTc4MywgMC45Nzg4LCAwLjk3OTMsIDAuOTc5OCwgMC45ODAzLCAwLjk4MDgsIDAuOTgxMiwgMC45ODE3LFxuICAgICAgICAvKiAyLjEgKi9cbiAgICAgICAgMC45ODIxLCAwLjk4MjYsIDAuOTgzMCwgMC45ODM0LCAwLjk4MzgsIDAuOTg0MiwgMC45ODQ2LCAwLjk4NTAsIDAuOTg1NCwgMC45ODU3LFxuICAgICAgICAvKiAyLjIgKi9cbiAgICAgICAgMC45ODYxLCAwLjk4NjQsIDAuOTg2OCwgMC45ODcxLCAwLjk4NzUsIDAuOTg3OCwgMC45ODgxLCAwLjk4ODQsIDAuOTg4NywgMC45ODkwLFxuICAgICAgICAvKiAyLjMgKi9cbiAgICAgICAgMC45ODkzLCAwLjk4OTYsIDAuOTg5OCwgMC45OTAxLCAwLjk5MDQsIDAuOTkwNiwgMC45OTA5LCAwLjk5MTEsIDAuOTkxMywgMC45OTE2LFxuICAgICAgICAvKiAyLjQgKi9cbiAgICAgICAgMC45OTE4LCAwLjk5MjAsIDAuOTkyMiwgMC45OTI1LCAwLjk5MjcsIDAuOTkyOSwgMC45OTMxLCAwLjk5MzIsIDAuOTkzNCwgMC45OTM2LFxuICAgICAgICAvKiAyLjUgKi9cbiAgICAgICAgMC45OTM4LCAwLjk5NDAsIDAuOTk0MSwgMC45OTQzLCAwLjk5NDUsIDAuOTk0NiwgMC45OTQ4LCAwLjk5NDksIDAuOTk1MSwgMC45OTUyLFxuICAgICAgICAvKiAyLjYgKi9cbiAgICAgICAgMC45OTUzLCAwLjk5NTUsIDAuOTk1NiwgMC45OTU3LCAwLjk5NTksIDAuOTk2MCwgMC45OTYxLCAwLjk5NjIsIDAuOTk2MywgMC45OTY0LFxuICAgICAgICAvKiAyLjcgKi9cbiAgICAgICAgMC45OTY1LCAwLjk5NjYsIDAuOTk2NywgMC45OTY4LCAwLjk5NjksIDAuOTk3MCwgMC45OTcxLCAwLjk5NzIsIDAuOTk3MywgMC45OTc0LFxuICAgICAgICAvKiAyLjggKi9cbiAgICAgICAgMC45OTc0LCAwLjk5NzUsIDAuOTk3NiwgMC45OTc3LCAwLjk5NzcsIDAuOTk3OCwgMC45OTc5LCAwLjk5NzksIDAuOTk4MCwgMC45OTgxLFxuICAgICAgICAvKiAyLjkgKi9cbiAgICAgICAgMC45OTgxLCAwLjk5ODIsIDAuOTk4MiwgMC45OTgzLCAwLjk5ODQsIDAuOTk4NCwgMC45OTg1LCAwLjk5ODUsIDAuOTk4NiwgMC45OTg2LFxuICAgICAgICAvKiAzLjAgKi9cbiAgICAgICAgMC45OTg3LCAwLjk5ODcsIDAuOTk4NywgMC45OTg4LCAwLjk5ODgsIDAuOTk4OSwgMC45OTg5LCAwLjk5ODksIDAuOTk5MCwgMC45OTkwXG4gICAgXTtcblxuICAgIC8vICMgW0N1bXVsYXRpdmUgU3RhbmRhcmQgTm9ybWFsIFByb2JhYmlsaXR5XShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0YW5kYXJkX25vcm1hbF90YWJsZSlcbiAgICAvL1xuICAgIC8vIFNpbmNlIHByb2JhYmlsaXR5IHRhYmxlcyBjYW5ub3QgYmVcbiAgICAvLyBwcmludGVkIGZvciBldmVyeSBub3JtYWwgZGlzdHJpYnV0aW9uLCBhcyB0aGVyZSBhcmUgYW4gaW5maW5pdGUgdmFyaWV0eVxuICAgIC8vIG9mIG5vcm1hbCBkaXN0cmlidXRpb25zLCBpdCBpcyBjb21tb24gcHJhY3RpY2UgdG8gY29udmVydCBhIG5vcm1hbCB0byBhXG4gICAgLy8gc3RhbmRhcmQgbm9ybWFsIGFuZCB0aGVuIHVzZSB0aGUgc3RhbmRhcmQgbm9ybWFsIHRhYmxlIHRvIGZpbmQgcHJvYmFiaWxpdGllc1xuICAgIGZ1bmN0aW9uIGN1bXVsYXRpdmVfc3RkX25vcm1hbF9wcm9iYWJpbGl0eSh6KSB7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGlzIHZhbHVlLlxuICAgICAgICB2YXIgYWJzWiA9IE1hdGguYWJzKHopLFxuICAgICAgICAgICAgLy8gRWFjaCByb3cgYmVnaW5zIHdpdGggYSBkaWZmZXJlbnRcbiAgICAgICAgICAgIC8vIHNpZ25pZmljYW50IGRpZ2l0OiAwLjUsIDAuNiwgMC43LCBhbmQgc28gb24uIFNvIHRoZSByb3cgaXMgc2ltcGx5XG4gICAgICAgICAgICAvLyB0aGlzIHZhbHVlJ3Mgc2lnbmlmaWNhbnQgZGlnaXQ6IDAuNTY3IHdpbGwgYmUgaW4gcm93IDAsIHNvIHJvdz0wLFxuICAgICAgICAgICAgLy8gMC42NDMgd2lsbCBiZSBpbiByb3cgMSwgc28gcm93PTEwLlxuICAgICAgICAgICAgcm93ID0gTWF0aC5mbG9vcihhYnNaICogMTApLFxuICAgICAgICAgICAgY29sdW1uID0gMTAgKiAoTWF0aC5mbG9vcihhYnNaICogMTAwKSAvIDEwIC0gTWF0aC5mbG9vcihhYnNaICogMTAwIC8gMTApKSxcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5taW4oKHJvdyAqIDEwKSArIGNvbHVtbiwgc3RhbmRhcmRfbm9ybWFsX3RhYmxlLmxlbmd0aCAtIDEpO1xuXG4gICAgICAgIC8vIFRoZSBpbmRleCB3ZSBjYWxjdWxhdGUgbXVzdCBiZSBpbiB0aGUgdGFibGUgYXMgYSBwb3NpdGl2ZSB2YWx1ZSxcbiAgICAgICAgLy8gYnV0IHdlIHN0aWxsIHBheSBhdHRlbnRpb24gdG8gd2hldGhlciB0aGUgaW5wdXQgaXMgcG9zaXRpdmVcbiAgICAgICAgLy8gb3IgbmVnYXRpdmUsIGFuZCBmbGlwIHRoZSBvdXRwdXQgdmFsdWUgYXMgYSBsYXN0IHN0ZXAuXG4gICAgICAgIGlmICh6ID49IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZF9ub3JtYWxfdGFibGVbaW5kZXhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZHVlIHRvIGZsb2F0aW5nLXBvaW50IGFyaXRobWV0aWMsIHZhbHVlcyBpbiB0aGUgdGFibGUgd2l0aFxuICAgICAgICAgICAgLy8gNCBzaWduaWZpY2FudCBmaWd1cmVzIGNhbiBuZXZlcnRoZWxlc3MgZW5kIHVwIGFzIHJlcGVhdGluZ1xuICAgICAgICAgICAgLy8gZnJhY3Rpb25zIHdoZW4gdGhleSdyZSBjb21wdXRlZCBoZXJlLlxuICAgICAgICAgICAgcmV0dXJuICsoMSAtIHN0YW5kYXJkX25vcm1hbF90YWJsZVtpbmRleF0pLnRvRml4ZWQoNCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIFtaLVNjb3JlLCBvciBTdGFuZGFyZCBTY29yZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGFuZGFyZF9zY29yZSlcbiAgICAvL1xuICAgIC8vIFRoZSBzdGFuZGFyZCBzY29yZSBpcyB0aGUgbnVtYmVyIG9mIHN0YW5kYXJkIGRldmlhdGlvbnMgYW4gb2JzZXJ2YXRpb25cbiAgICAvLyBvciBkYXR1bSBpcyBhYm92ZSBvciBiZWxvdyB0aGUgbWVhbi4gVGh1cywgYSBwb3NpdGl2ZSBzdGFuZGFyZCBzY29yZVxuICAgIC8vIHJlcHJlc2VudHMgYSBkYXR1bSBhYm92ZSB0aGUgbWVhbiwgd2hpbGUgYSBuZWdhdGl2ZSBzdGFuZGFyZCBzY29yZVxuICAgIC8vIHJlcHJlc2VudHMgYSBkYXR1bSBiZWxvdyB0aGUgbWVhbi4gSXQgaXMgYSBkaW1lbnNpb25sZXNzIHF1YW50aXR5XG4gICAgLy8gb2J0YWluZWQgYnkgc3VidHJhY3RpbmcgdGhlIHBvcHVsYXRpb24gbWVhbiBmcm9tIGFuIGluZGl2aWR1YWwgcmF3XG4gICAgLy8gc2NvcmUgYW5kIHRoZW4gZGl2aWRpbmcgdGhlIGRpZmZlcmVuY2UgYnkgdGhlIHBvcHVsYXRpb24gc3RhbmRhcmRcbiAgICAvLyBkZXZpYXRpb24uXG4gICAgLy9cbiAgICAvLyBUaGUgei1zY29yZSBpcyBvbmx5IGRlZmluZWQgaWYgb25lIGtub3dzIHRoZSBwb3B1bGF0aW9uIHBhcmFtZXRlcnM7XG4gICAgLy8gaWYgb25lIG9ubHkgaGFzIGEgc2FtcGxlIHNldCwgdGhlbiB0aGUgYW5hbG9nb3VzIGNvbXB1dGF0aW9uIHdpdGhcbiAgICAvLyBzYW1wbGUgbWVhbiBhbmQgc2FtcGxlIHN0YW5kYXJkIGRldmlhdGlvbiB5aWVsZHMgdGhlXG4gICAgLy8gU3R1ZGVudCdzIHQtc3RhdGlzdGljLlxuICAgIGZ1bmN0aW9uIHpfc2NvcmUoeCwgbWVhbiwgc3RhbmRhcmRfZGV2aWF0aW9uKSB7XG4gICAgICAgIHJldHVybiAoeCAtIG1lYW4pIC8gc3RhbmRhcmRfZGV2aWF0aW9uO1xuICAgIH1cblxuICAgIC8vIFdlIHVzZSBgzrVgLCBlcHNpbG9uLCBhcyBhIHN0b3BwaW5nIGNyaXRlcmlvbiB3aGVuIHdlIHdhbnQgdG8gaXRlcmF0ZVxuICAgIC8vIHVudGlsIHdlJ3JlIFwiY2xvc2UgZW5vdWdoXCIuXG4gICAgdmFyIGVwc2lsb24gPSAwLjAwMDE7XG5cbiAgICAvLyAjIFtGYWN0b3JpYWxdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0ZhY3RvcmlhbClcbiAgICAvL1xuICAgIC8vIEEgZmFjdG9yaWFsLCB1c3VhbGx5IHdyaXR0ZW4gbiEsIGlzIHRoZSBwcm9kdWN0IG9mIGFsbCBwb3NpdGl2ZVxuICAgIC8vIGludGVnZXJzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBuLiBPZnRlbiBmYWN0b3JpYWwgaXMgaW1wbGVtZW50ZWRcbiAgICAvLyByZWN1cnNpdmVseSwgYnV0IHRoaXMgaXRlcmF0aXZlIGFwcHJvYWNoIGlzIHNpZ25pZmljYW50bHkgZmFzdGVyXG4gICAgLy8gYW5kIHNpbXBsZXIuXG4gICAgZnVuY3Rpb24gZmFjdG9yaWFsKG4pIHtcblxuICAgICAgICAvLyBmYWN0b3JpYWwgaXMgbWF0aGVtYXRpY2FsbHkgdW5kZWZpbmVkIGZvciBuZWdhdGl2ZSBudW1iZXJzXG4gICAgICAgIGlmIChuIDwgMCApIHsgcmV0dXJuIG51bGw7IH1cblxuICAgICAgICAvLyB0eXBpY2FsbHkgeW91J2xsIGV4cGFuZCB0aGUgZmFjdG9yaWFsIGZ1bmN0aW9uIGdvaW5nIGRvd24sIGxpa2VcbiAgICAgICAgLy8gNSEgPSA1ICogNCAqIDMgKiAyICogMS4gVGhpcyBpcyBnb2luZyBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLFxuICAgICAgICAvLyBjb3VudGluZyBmcm9tIDIgdXAgdG8gdGhlIG51bWJlciBpbiBxdWVzdGlvbiwgYW5kIHNpbmNlIGFueXRoaW5nXG4gICAgICAgIC8vIG11bHRpcGxpZWQgYnkgMSBpcyBpdHNlbGYsIHRoZSBsb29wIG9ubHkgbmVlZHMgdG8gc3RhcnQgYXQgMi5cbiAgICAgICAgdmFyIGFjY3VtdWxhdG9yID0gMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgICAgICAvLyBmb3IgZWFjaCBudW1iZXIgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgbnVtYmVyIGBuYCwgbXVsdGlwbHlcbiAgICAgICAgICAgIC8vIHRoZSBhY2N1bXVsYXRvciBteSB0aGF0IG51bWJlci5cbiAgICAgICAgICAgIGFjY3VtdWxhdG9yICo9IGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8vICMgQmVybm91bGxpIERpc3RyaWJ1dGlvblxuICAgIC8vXG4gICAgLy8gVGhlIFtCZXJub3VsbGkgZGlzdHJpYnV0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jlcm5vdWxsaV9kaXN0cmlidXRpb24pXG4gICAgLy8gaXMgdGhlIHByb2JhYmlsaXR5IGRpc2NyZXRlXG4gICAgLy8gZGlzdHJpYnV0aW9uIG9mIGEgcmFuZG9tIHZhcmlhYmxlIHdoaWNoIHRha2VzIHZhbHVlIDEgd2l0aCBzdWNjZXNzXG4gICAgLy8gcHJvYmFiaWxpdHkgYHBgIGFuZCB2YWx1ZSAwIHdpdGggZmFpbHVyZVxuICAgIC8vIHByb2JhYmlsaXR5IGBxYCA9IDEgLSBgcGAuIEl0IGNhbiBiZSB1c2VkLCBmb3IgZXhhbXBsZSwgdG8gcmVwcmVzZW50IHRoZVxuICAgIC8vIHRvc3Mgb2YgYSBjb2luLCB3aGVyZSBcIjFcIiBpcyBkZWZpbmVkIHRvIG1lYW4gXCJoZWFkc1wiIGFuZCBcIjBcIiBpcyBkZWZpbmVkXG4gICAgLy8gdG8gbWVhbiBcInRhaWxzXCIgKG9yIHZpY2UgdmVyc2EpLiBJdCBpc1xuICAgIC8vIGEgc3BlY2lhbCBjYXNlIG9mIGEgQmlub21pYWwgRGlzdHJpYnV0aW9uXG4gICAgLy8gd2hlcmUgYG5gID0gMS5cbiAgICBmdW5jdGlvbiBiZXJub3VsbGlfZGlzdHJpYnV0aW9uKHApIHtcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBgcGAgaXMgYSB2YWxpZCBwcm9iYWJpbGl0eSAoMCDiiaQgcCDiiaQgMSlcbiAgICAgICAgaWYgKHAgPCAwIHx8IHAgPiAxICkgeyByZXR1cm4gbnVsbDsgfVxuXG4gICAgICAgIHJldHVybiBiaW5vbWlhbF9kaXN0cmlidXRpb24oMSwgcCk7XG4gICAgfVxuXG4gICAgLy8gIyBCaW5vbWlhbCBEaXN0cmlidXRpb25cbiAgICAvL1xuICAgIC8vIFRoZSBbQmlub21pYWwgRGlzdHJpYnV0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jpbm9taWFsX2Rpc3RyaWJ1dGlvbikgaXMgdGhlIGRpc2NyZXRlIHByb2JhYmlsaXR5XG4gICAgLy8gZGlzdHJpYnV0aW9uIG9mIHRoZSBudW1iZXIgb2Ygc3VjY2Vzc2VzIGluIGEgc2VxdWVuY2Ugb2YgbiBpbmRlcGVuZGVudCB5ZXMvbm8gZXhwZXJpbWVudHMsIGVhY2ggb2Ygd2hpY2ggeWllbGRzXG4gICAgLy8gc3VjY2VzcyB3aXRoIHByb2JhYmlsaXR5IGBwcm9iYWJpbGl0eWAuIFN1Y2ggYSBzdWNjZXNzL2ZhaWx1cmUgZXhwZXJpbWVudCBpcyBhbHNvIGNhbGxlZCBhIEJlcm5vdWxsaSBleHBlcmltZW50IG9yXG4gICAgLy8gQmVybm91bGxpIHRyaWFsOyB3aGVuIHRyaWFscyA9IDEsIHRoZSBCaW5vbWlhbCBEaXN0cmlidXRpb24gaXMgYSBCZXJub3VsbGkgRGlzdHJpYnV0aW9uLlxuICAgIGZ1bmN0aW9uIGJpbm9taWFsX2Rpc3RyaWJ1dGlvbih0cmlhbHMsIHByb2JhYmlsaXR5KSB7XG4gICAgICAgIC8vIENoZWNrIHRoYXQgYHBgIGlzIGEgdmFsaWQgcHJvYmFiaWxpdHkgKDAg4omkIHAg4omkIDEpLFxuICAgICAgICAvLyB0aGF0IGBuYCBpcyBhbiBpbnRlZ2VyLCBzdHJpY3RseSBwb3NpdGl2ZS5cbiAgICAgICAgaWYgKHByb2JhYmlsaXR5IDwgMCB8fCBwcm9iYWJpbGl0eSA+IDEgfHxcbiAgICAgICAgICAgIHRyaWFscyA8PSAwIHx8IHRyaWFscyAlIDEgIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYSBbcHJvYmFiaWxpdHkgbWFzcyBmdW5jdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUHJvYmFiaWxpdHlfbWFzc19mdW5jdGlvbilcbiAgICAgICAgZnVuY3Rpb24gcHJvYmFiaWxpdHlfbWFzcyh4LCB0cmlhbHMsIHByb2JhYmlsaXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yaWFsKHRyaWFscykgL1xuICAgICAgICAgICAgICAgIChmYWN0b3JpYWwoeCkgKiBmYWN0b3JpYWwodHJpYWxzIC0geCkpICpcbiAgICAgICAgICAgICAgICAoTWF0aC5wb3cocHJvYmFiaWxpdHksIHgpICogTWF0aC5wb3coMSAtIHByb2JhYmlsaXR5LCB0cmlhbHMgLSB4KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBpbml0aWFsaXplIGB4YCwgdGhlIHJhbmRvbSB2YXJpYWJsZSwgYW5kIGBhY2N1bXVsYXRvcmAsIGFuIGFjY3VtdWxhdG9yXG4gICAgICAgIC8vIGZvciB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gZnVuY3Rpb24gdG8gMC4gYGRpc3RyaWJ1dGlvbl9mdW5jdGlvbnNgXG4gICAgICAgIC8vIGlzIHRoZSBvYmplY3Qgd2UnbGwgcmV0dXJuIHdpdGggdGhlIGBwcm9iYWJpbGl0eV9vZl94YCBhbmQgdGhlXG4gICAgICAgIC8vIGBjdW11bGF0aXZlX3Byb2JhYmlsaXR5X29mX3hgLCBhcyB3ZWxsIGFzIHRoZSBjYWxjdWxhdGVkIG1lYW4gJlxuICAgICAgICAvLyB2YXJpYW5jZS4gV2UgaXRlcmF0ZSB1bnRpbCB0aGUgYGN1bXVsYXRpdmVfcHJvYmFiaWxpdHlfb2ZfeGAgaXNcbiAgICAgICAgLy8gd2l0aGluIGBlcHNpbG9uYCBvZiAxLjAuXG4gICAgICAgIHZhciB4ID0gMCxcbiAgICAgICAgICAgIGN1bXVsYXRpdmVfcHJvYmFiaWxpdHkgPSAwLFxuICAgICAgICAgICAgY2VsbHMgPSB7fTtcblxuICAgICAgICAvLyBUaGlzIGFsZ29yaXRobSBpdGVyYXRlcyB0aHJvdWdoIGVhY2ggcG90ZW50aWFsIG91dGNvbWUsXG4gICAgICAgIC8vIHVudGlsIHRoZSBgY3VtdWxhdGl2ZV9wcm9iYWJpbGl0eWAgaXMgdmVyeSBjbG9zZSB0byAxLCBhdFxuICAgICAgICAvLyB3aGljaCBwb2ludCB3ZSd2ZSBkZWZpbmVkIHRoZSB2YXN0IG1ham9yaXR5IG9mIG91dGNvbWVzXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGNlbGxzW3hdID0gcHJvYmFiaWxpdHlfbWFzcyh4LCB0cmlhbHMsIHByb2JhYmlsaXR5KTtcbiAgICAgICAgICAgIGN1bXVsYXRpdmVfcHJvYmFiaWxpdHkgKz0gY2VsbHNbeF07XG4gICAgICAgICAgICB4Kys7XG4gICAgICAgIC8vIHdoZW4gdGhlIGN1bXVsYXRpdmVfcHJvYmFiaWxpdHkgaXMgbmVhcmx5IDEsIHdlJ3ZlIGNhbGN1bGF0ZWRcbiAgICAgICAgLy8gdGhlIHVzZWZ1bCByYW5nZSBvZiB0aGlzIGRpc3RyaWJ1dGlvblxuICAgICAgICB9IHdoaWxlIChjdW11bGF0aXZlX3Byb2JhYmlsaXR5IDwgMSAtIGVwc2lsb24pO1xuXG4gICAgICAgIHJldHVybiBjZWxscztcbiAgICB9XG5cbiAgICAvLyAjIFBvaXNzb24gRGlzdHJpYnV0aW9uXG4gICAgLy9cbiAgICAvLyBUaGUgW1BvaXNzb24gRGlzdHJpYnV0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BvaXNzb25fZGlzdHJpYnV0aW9uKVxuICAgIC8vIGlzIGEgZGlzY3JldGUgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIHRoYXQgZXhwcmVzc2VzIHRoZSBwcm9iYWJpbGl0eVxuICAgIC8vIG9mIGEgZ2l2ZW4gbnVtYmVyIG9mIGV2ZW50cyBvY2N1cnJpbmcgaW4gYSBmaXhlZCBpbnRlcnZhbCBvZiB0aW1lXG4gICAgLy8gYW5kL29yIHNwYWNlIGlmIHRoZXNlIGV2ZW50cyBvY2N1ciB3aXRoIGEga25vd24gYXZlcmFnZSByYXRlIGFuZFxuICAgIC8vIGluZGVwZW5kZW50bHkgb2YgdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgZXZlbnQuXG4gICAgLy9cbiAgICAvLyBUaGUgUG9pc3NvbiBEaXN0cmlidXRpb24gaXMgY2hhcmFjdGVyaXplZCBieSB0aGUgc3RyaWN0bHkgcG9zaXRpdmVcbiAgICAvLyBtZWFuIGFycml2YWwgb3Igb2NjdXJyZW5jZSByYXRlLCBgzrtgLlxuICAgIGZ1bmN0aW9uIHBvaXNzb25fZGlzdHJpYnV0aW9uKGxhbWJkYSkge1xuICAgICAgICAvLyBDaGVjayB0aGF0IGxhbWJkYSBpcyBzdHJpY3RseSBwb3NpdGl2ZVxuICAgICAgICBpZiAobGFtYmRhIDw9IDApIHsgcmV0dXJuIG51bGw7IH1cblxuICAgICAgICAvLyBvdXIgY3VycmVudCBwbGFjZSBpbiB0aGUgZGlzdHJpYnV0aW9uXG4gICAgICAgIHZhciB4ID0gMCxcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBjdXJyZW50IGN1bXVsYXRpdmUgcHJvYmFiaWxpdHksIGluXG4gICAgICAgICAgICAvLyBvcmRlciB0byBrbm93IHdoZW4gdG8gc3RvcCBjYWxjdWxhdGluZyBjaGFuY2VzLlxuICAgICAgICAgICAgY3VtdWxhdGl2ZV9wcm9iYWJpbGl0eSA9IDAsXG4gICAgICAgICAgICAvLyB0aGUgY2FsY3VsYXRlZCBjZWxscyB0byBiZSByZXR1cm5lZFxuICAgICAgICAgICAgY2VsbHMgPSB7fTtcblxuICAgICAgICAvLyBhIFtwcm9iYWJpbGl0eSBtYXNzIGZ1bmN0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qcm9iYWJpbGl0eV9tYXNzX2Z1bmN0aW9uKVxuICAgICAgICBmdW5jdGlvbiBwcm9iYWJpbGl0eV9tYXNzKHgsIGxhbWJkYSkge1xuICAgICAgICAgICAgcmV0dXJuIChNYXRoLnBvdyhNYXRoLkUsIC1sYW1iZGEpICogTWF0aC5wb3cobGFtYmRhLCB4KSkgL1xuICAgICAgICAgICAgICAgIGZhY3RvcmlhbCh4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoaXMgYWxnb3JpdGhtIGl0ZXJhdGVzIHRocm91Z2ggZWFjaCBwb3RlbnRpYWwgb3V0Y29tZSxcbiAgICAgICAgLy8gdW50aWwgdGhlIGBjdW11bGF0aXZlX3Byb2JhYmlsaXR5YCBpcyB2ZXJ5IGNsb3NlIHRvIDEsIGF0XG4gICAgICAgIC8vIHdoaWNoIHBvaW50IHdlJ3ZlIGRlZmluZWQgdGhlIHZhc3QgbWFqb3JpdHkgb2Ygb3V0Y29tZXNcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY2VsbHNbeF0gPSBwcm9iYWJpbGl0eV9tYXNzKHgsIGxhbWJkYSk7XG4gICAgICAgICAgICBjdW11bGF0aXZlX3Byb2JhYmlsaXR5ICs9IGNlbGxzW3hdO1xuICAgICAgICAgICAgeCsrO1xuICAgICAgICAvLyB3aGVuIHRoZSBjdW11bGF0aXZlX3Byb2JhYmlsaXR5IGlzIG5lYXJseSAxLCB3ZSd2ZSBjYWxjdWxhdGVkXG4gICAgICAgIC8vIHRoZSB1c2VmdWwgcmFuZ2Ugb2YgdGhpcyBkaXN0cmlidXRpb25cbiAgICAgICAgfSB3aGlsZSAoY3VtdWxhdGl2ZV9wcm9iYWJpbGl0eSA8IDEgLSBlcHNpbG9uKTtcblxuICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgfVxuXG4gICAgLy8gIyBQZXJjZW50YWdlIFBvaW50cyBvZiB0aGUgz4cyIChDaGktU3F1YXJlZCkgRGlzdHJpYnV0aW9uXG4gICAgLy8gVGhlIFvPhzIgKENoaS1TcXVhcmVkKSBEaXN0cmlidXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2hpLXNxdWFyZWRfZGlzdHJpYnV0aW9uKSBpcyB1c2VkIGluIHRoZSBjb21tb25cbiAgICAvLyBjaGktc3F1YXJlZCB0ZXN0cyBmb3IgZ29vZG5lc3Mgb2YgZml0IG9mIGFuIG9ic2VydmVkIGRpc3RyaWJ1dGlvbiB0byBhIHRoZW9yZXRpY2FsIG9uZSwgdGhlIGluZGVwZW5kZW5jZSBvZiB0d29cbiAgICAvLyBjcml0ZXJpYSBvZiBjbGFzc2lmaWNhdGlvbiBvZiBxdWFsaXRhdGl2ZSBkYXRhLCBhbmQgaW4gY29uZmlkZW5jZSBpbnRlcnZhbCBlc3RpbWF0aW9uIGZvciBhIHBvcHVsYXRpb24gc3RhbmRhcmRcbiAgICAvLyBkZXZpYXRpb24gb2YgYSBub3JtYWwgZGlzdHJpYnV0aW9uIGZyb20gYSBzYW1wbGUgc3RhbmRhcmQgZGV2aWF0aW9uLlxuICAgIC8vXG4gICAgLy8gVmFsdWVzIGZyb20gQXBwZW5kaXggMSwgVGFibGUgSUlJIG9mIFdpbGxpYW0gVy4gSGluZXMgJiBEb3VnbGFzIEMuIE1vbnRnb21lcnksIFwiUHJvYmFiaWxpdHkgYW5kIFN0YXRpc3RpY3MgaW5cbiAgICAvLyBFbmdpbmVlcmluZyBhbmQgTWFuYWdlbWVudCBTY2llbmNlXCIsIFdpbGV5ICgxOTgwKS5cbiAgICB2YXIgY2hpX3NxdWFyZWRfZGlzdHJpYnV0aW9uX3RhYmxlID0ge1xuICAgICAgICAxOiB7IDAuOTk1OiAgMC4wMCwgMC45OTogIDAuMDAsIDAuOTc1OiAgMC4wMCwgMC45NTogIDAuMDAsIDAuOTogIDAuMDIsIDAuNTogIDAuNDUsIDAuMTogIDIuNzEsIDAuMDU6ICAzLjg0LCAwLjAyNTogIDUuMDIsIDAuMDE6ICA2LjYzLCAwLjAwNTogIDcuODggfSxcbiAgICAgICAgMjogeyAwLjk5NTogIDAuMDEsIDAuOTk6ICAwLjAyLCAwLjk3NTogIDAuMDUsIDAuOTU6ICAwLjEwLCAwLjk6ICAwLjIxLCAwLjU6ICAxLjM5LCAwLjE6ICA0LjYxLCAwLjA1OiAgNS45OSwgMC4wMjU6ICA3LjM4LCAwLjAxOiAgOS4yMSwgMC4wMDU6IDEwLjYwIH0sXG4gICAgICAgIDM6IHsgMC45OTU6ICAwLjA3LCAwLjk5OiAgMC4xMSwgMC45NzU6ICAwLjIyLCAwLjk1OiAgMC4zNSwgMC45OiAgMC41OCwgMC41OiAgMi4zNywgMC4xOiAgNi4yNSwgMC4wNTogIDcuODEsIDAuMDI1OiAgOS4zNSwgMC4wMTogMTEuMzQsIDAuMDA1OiAxMi44NCB9LFxuICAgICAgICA0OiB7IDAuOTk1OiAgMC4yMSwgMC45OTogIDAuMzAsIDAuOTc1OiAgMC40OCwgMC45NTogIDAuNzEsIDAuOTogIDEuMDYsIDAuNTogIDMuMzYsIDAuMTogIDcuNzgsIDAuMDU6ICA5LjQ5LCAwLjAyNTogMTEuMTQsIDAuMDE6IDEzLjI4LCAwLjAwNTogMTQuODYgfSxcbiAgICAgICAgNTogeyAwLjk5NTogIDAuNDEsIDAuOTk6ICAwLjU1LCAwLjk3NTogIDAuODMsIDAuOTU6ICAxLjE1LCAwLjk6ICAxLjYxLCAwLjU6ICA0LjM1LCAwLjE6ICA5LjI0LCAwLjA1OiAxMS4wNywgMC4wMjU6IDEyLjgzLCAwLjAxOiAxNS4wOSwgMC4wMDU6IDE2Ljc1IH0sXG4gICAgICAgIDY6IHsgMC45OTU6ICAwLjY4LCAwLjk5OiAgMC44NywgMC45NzU6ICAxLjI0LCAwLjk1OiAgMS42NCwgMC45OiAgMi4yMCwgMC41OiAgNS4zNSwgMC4xOiAxMC42NSwgMC4wNTogMTIuNTksIDAuMDI1OiAxNC40NSwgMC4wMTogMTYuODEsIDAuMDA1OiAxOC41NSB9LFxuICAgICAgICA3OiB7IDAuOTk1OiAgMC45OSwgMC45OTogIDEuMjUsIDAuOTc1OiAgMS42OSwgMC45NTogIDIuMTcsIDAuOTogIDIuODMsIDAuNTogIDYuMzUsIDAuMTogMTIuMDIsIDAuMDU6IDE0LjA3LCAwLjAyNTogMTYuMDEsIDAuMDE6IDE4LjQ4LCAwLjAwNTogMjAuMjggfSxcbiAgICAgICAgODogeyAwLjk5NTogIDEuMzQsIDAuOTk6ICAxLjY1LCAwLjk3NTogIDIuMTgsIDAuOTU6ICAyLjczLCAwLjk6ICAzLjQ5LCAwLjU6ICA3LjM0LCAwLjE6IDEzLjM2LCAwLjA1OiAxNS41MSwgMC4wMjU6IDE3LjUzLCAwLjAxOiAyMC4wOSwgMC4wMDU6IDIxLjk2IH0sXG4gICAgICAgIDk6IHsgMC45OTU6ICAxLjczLCAwLjk5OiAgMi4wOSwgMC45NzU6ICAyLjcwLCAwLjk1OiAgMy4zMywgMC45OiAgNC4xNywgMC41OiAgOC4zNCwgMC4xOiAxNC42OCwgMC4wNTogMTYuOTIsIDAuMDI1OiAxOS4wMiwgMC4wMTogMjEuNjcsIDAuMDA1OiAyMy41OSB9LFxuICAgICAgICAxMDogeyAwLjk5NTogIDIuMTYsIDAuOTk6ICAyLjU2LCAwLjk3NTogIDMuMjUsIDAuOTU6ICAzLjk0LCAwLjk6ICA0Ljg3LCAwLjU6ICA5LjM0LCAwLjE6IDE1Ljk5LCAwLjA1OiAxOC4zMSwgMC4wMjU6IDIwLjQ4LCAwLjAxOiAyMy4yMSwgMC4wMDU6IDI1LjE5IH0sXG4gICAgICAgIDExOiB7IDAuOTk1OiAgMi42MCwgMC45OTogIDMuMDUsIDAuOTc1OiAgMy44MiwgMC45NTogIDQuNTcsIDAuOTogIDUuNTgsIDAuNTogMTAuMzQsIDAuMTogMTcuMjgsIDAuMDU6IDE5LjY4LCAwLjAyNTogMjEuOTIsIDAuMDE6IDI0LjcyLCAwLjAwNTogMjYuNzYgfSxcbiAgICAgICAgMTI6IHsgMC45OTU6ICAzLjA3LCAwLjk5OiAgMy41NywgMC45NzU6ICA0LjQwLCAwLjk1OiAgNS4yMywgMC45OiAgNi4zMCwgMC41OiAxMS4zNCwgMC4xOiAxOC41NSwgMC4wNTogMjEuMDMsIDAuMDI1OiAyMy4zNCwgMC4wMTogMjYuMjIsIDAuMDA1OiAyOC4zMCB9LFxuICAgICAgICAxMzogeyAwLjk5NTogIDMuNTcsIDAuOTk6ICA0LjExLCAwLjk3NTogIDUuMDEsIDAuOTU6ICA1Ljg5LCAwLjk6ICA3LjA0LCAwLjU6IDEyLjM0LCAwLjE6IDE5LjgxLCAwLjA1OiAyMi4zNiwgMC4wMjU6IDI0Ljc0LCAwLjAxOiAyNy42OSwgMC4wMDU6IDI5LjgyIH0sXG4gICAgICAgIDE0OiB7IDAuOTk1OiAgNC4wNywgMC45OTogIDQuNjYsIDAuOTc1OiAgNS42MywgMC45NTogIDYuNTcsIDAuOTogIDcuNzksIDAuNTogMTMuMzQsIDAuMTogMjEuMDYsIDAuMDU6IDIzLjY4LCAwLjAyNTogMjYuMTIsIDAuMDE6IDI5LjE0LCAwLjAwNTogMzEuMzIgfSxcbiAgICAgICAgMTU6IHsgMC45OTU6ICA0LjYwLCAwLjk5OiAgNS4yMywgMC45NzU6ICA2LjI3LCAwLjk1OiAgNy4yNiwgMC45OiAgOC41NSwgMC41OiAxNC4zNCwgMC4xOiAyMi4zMSwgMC4wNTogMjUuMDAsIDAuMDI1OiAyNy40OSwgMC4wMTogMzAuNTgsIDAuMDA1OiAzMi44MCB9LFxuICAgICAgICAxNjogeyAwLjk5NTogIDUuMTQsIDAuOTk6ICA1LjgxLCAwLjk3NTogIDYuOTEsIDAuOTU6ICA3Ljk2LCAwLjk6ICA5LjMxLCAwLjU6IDE1LjM0LCAwLjE6IDIzLjU0LCAwLjA1OiAyNi4zMCwgMC4wMjU6IDI4Ljg1LCAwLjAxOiAzMi4wMCwgMC4wMDU6IDM0LjI3IH0sXG4gICAgICAgIDE3OiB7IDAuOTk1OiAgNS43MCwgMC45OTogIDYuNDEsIDAuOTc1OiAgNy41NiwgMC45NTogIDguNjcsIDAuOTogMTAuMDksIDAuNTogMTYuMzQsIDAuMTogMjQuNzcsIDAuMDU6IDI3LjU5LCAwLjAyNTogMzAuMTksIDAuMDE6IDMzLjQxLCAwLjAwNTogMzUuNzIgfSxcbiAgICAgICAgMTg6IHsgMC45OTU6ICA2LjI2LCAwLjk5OiAgNy4wMSwgMC45NzU6ICA4LjIzLCAwLjk1OiAgOS4zOSwgMC45OiAxMC44NywgMC41OiAxNy4zNCwgMC4xOiAyNS45OSwgMC4wNTogMjguODcsIDAuMDI1OiAzMS41MywgMC4wMTogMzQuODEsIDAuMDA1OiAzNy4xNiB9LFxuICAgICAgICAxOTogeyAwLjk5NTogIDYuODQsIDAuOTk6ICA3LjYzLCAwLjk3NTogIDguOTEsIDAuOTU6IDEwLjEyLCAwLjk6IDExLjY1LCAwLjU6IDE4LjM0LCAwLjE6IDI3LjIwLCAwLjA1OiAzMC4xNCwgMC4wMjU6IDMyLjg1LCAwLjAxOiAzNi4xOSwgMC4wMDU6IDM4LjU4IH0sXG4gICAgICAgIDIwOiB7IDAuOTk1OiAgNy40MywgMC45OTogIDguMjYsIDAuOTc1OiAgOS41OSwgMC45NTogMTAuODUsIDAuOTogMTIuNDQsIDAuNTogMTkuMzQsIDAuMTogMjguNDEsIDAuMDU6IDMxLjQxLCAwLjAyNTogMzQuMTcsIDAuMDE6IDM3LjU3LCAwLjAwNTogNDAuMDAgfSxcbiAgICAgICAgMjE6IHsgMC45OTU6ICA4LjAzLCAwLjk5OiAgOC45MCwgMC45NzU6IDEwLjI4LCAwLjk1OiAxMS41OSwgMC45OiAxMy4yNCwgMC41OiAyMC4zNCwgMC4xOiAyOS42MiwgMC4wNTogMzIuNjcsIDAuMDI1OiAzNS40OCwgMC4wMTogMzguOTMsIDAuMDA1OiA0MS40MCB9LFxuICAgICAgICAyMjogeyAwLjk5NTogIDguNjQsIDAuOTk6ICA5LjU0LCAwLjk3NTogMTAuOTgsIDAuOTU6IDEyLjM0LCAwLjk6IDE0LjA0LCAwLjU6IDIxLjM0LCAwLjE6IDMwLjgxLCAwLjA1OiAzMy45MiwgMC4wMjU6IDM2Ljc4LCAwLjAxOiA0MC4yOSwgMC4wMDU6IDQyLjgwIH0sXG4gICAgICAgIDIzOiB7IDAuOTk1OiAgOS4yNiwgMC45OTogMTAuMjAsIDAuOTc1OiAxMS42OSwgMC45NTogMTMuMDksIDAuOTogMTQuODUsIDAuNTogMjIuMzQsIDAuMTogMzIuMDEsIDAuMDU6IDM1LjE3LCAwLjAyNTogMzguMDgsIDAuMDE6IDQxLjY0LCAwLjAwNTogNDQuMTggfSxcbiAgICAgICAgMjQ6IHsgMC45OTU6ICA5Ljg5LCAwLjk5OiAxMC44NiwgMC45NzU6IDEyLjQwLCAwLjk1OiAxMy44NSwgMC45OiAxNS42NiwgMC41OiAyMy4zNCwgMC4xOiAzMy4yMCwgMC4wNTogMzYuNDIsIDAuMDI1OiAzOS4zNiwgMC4wMTogNDIuOTgsIDAuMDA1OiA0NS41NiB9LFxuICAgICAgICAyNTogeyAwLjk5NTogMTAuNTIsIDAuOTk6IDExLjUyLCAwLjk3NTogMTMuMTIsIDAuOTU6IDE0LjYxLCAwLjk6IDE2LjQ3LCAwLjU6IDI0LjM0LCAwLjE6IDM0LjI4LCAwLjA1OiAzNy42NSwgMC4wMjU6IDQwLjY1LCAwLjAxOiA0NC4zMSwgMC4wMDU6IDQ2LjkzIH0sXG4gICAgICAgIDI2OiB7IDAuOTk1OiAxMS4xNiwgMC45OTogMTIuMjAsIDAuOTc1OiAxMy44NCwgMC45NTogMTUuMzgsIDAuOTogMTcuMjksIDAuNTogMjUuMzQsIDAuMTogMzUuNTYsIDAuMDU6IDM4Ljg5LCAwLjAyNTogNDEuOTIsIDAuMDE6IDQ1LjY0LCAwLjAwNTogNDguMjkgfSxcbiAgICAgICAgMjc6IHsgMC45OTU6IDExLjgxLCAwLjk5OiAxMi44OCwgMC45NzU6IDE0LjU3LCAwLjk1OiAxNi4xNSwgMC45OiAxOC4xMSwgMC41OiAyNi4zNCwgMC4xOiAzNi43NCwgMC4wNTogNDAuMTEsIDAuMDI1OiA0My4xOSwgMC4wMTogNDYuOTYsIDAuMDA1OiA0OS42NSB9LFxuICAgICAgICAyODogeyAwLjk5NTogMTIuNDYsIDAuOTk6IDEzLjU3LCAwLjk3NTogMTUuMzEsIDAuOTU6IDE2LjkzLCAwLjk6IDE4Ljk0LCAwLjU6IDI3LjM0LCAwLjE6IDM3LjkyLCAwLjA1OiA0MS4zNCwgMC4wMjU6IDQ0LjQ2LCAwLjAxOiA0OC4yOCwgMC4wMDU6IDUwLjk5IH0sXG4gICAgICAgIDI5OiB7IDAuOTk1OiAxMy4xMiwgMC45OTogMTQuMjYsIDAuOTc1OiAxNi4wNSwgMC45NTogMTcuNzEsIDAuOTogMTkuNzcsIDAuNTogMjguMzQsIDAuMTogMzkuMDksIDAuMDU6IDQyLjU2LCAwLjAyNTogNDUuNzIsIDAuMDE6IDQ5LjU5LCAwLjAwNTogNTIuMzQgfSxcbiAgICAgICAgMzA6IHsgMC45OTU6IDEzLjc5LCAwLjk5OiAxNC45NSwgMC45NzU6IDE2Ljc5LCAwLjk1OiAxOC40OSwgMC45OiAyMC42MCwgMC41OiAyOS4zNCwgMC4xOiA0MC4yNiwgMC4wNTogNDMuNzcsIDAuMDI1OiA0Ni45OCwgMC4wMTogNTAuODksIDAuMDA1OiA1My42NyB9LFxuICAgICAgICA0MDogeyAwLjk5NTogMjAuNzEsIDAuOTk6IDIyLjE2LCAwLjk3NTogMjQuNDMsIDAuOTU6IDI2LjUxLCAwLjk6IDI5LjA1LCAwLjU6IDM5LjM0LCAwLjE6IDUxLjgxLCAwLjA1OiA1NS43NiwgMC4wMjU6IDU5LjM0LCAwLjAxOiA2My42OSwgMC4wMDU6IDY2Ljc3IH0sXG4gICAgICAgIDUwOiB7IDAuOTk1OiAyNy45OSwgMC45OTogMjkuNzEsIDAuOTc1OiAzMi4zNiwgMC45NTogMzQuNzYsIDAuOTogMzcuNjksIDAuNTogNDkuMzMsIDAuMTogNjMuMTcsIDAuMDU6IDY3LjUwLCAwLjAyNTogNzEuNDIsIDAuMDE6IDc2LjE1LCAwLjAwNTogNzkuNDkgfSxcbiAgICAgICAgNjA6IHsgMC45OTU6IDM1LjUzLCAwLjk5OiAzNy40OCwgMC45NzU6IDQwLjQ4LCAwLjk1OiA0My4xOSwgMC45OiA0Ni40NiwgMC41OiA1OS4zMywgMC4xOiA3NC40MCwgMC4wNTogNzkuMDgsIDAuMDI1OiA4My4zMCwgMC4wMTogODguMzgsIDAuMDA1OiA5MS45NSB9LFxuICAgICAgICA3MDogeyAwLjk5NTogNDMuMjgsIDAuOTk6IDQ1LjQ0LCAwLjk3NTogNDguNzYsIDAuOTU6IDUxLjc0LCAwLjk6IDU1LjMzLCAwLjU6IDY5LjMzLCAwLjE6IDg1LjUzLCAwLjA1OiA5MC41MywgMC4wMjU6IDk1LjAyLCAwLjAxOiAxMDAuNDIsIDAuMDA1OiAxMDQuMjIgfSxcbiAgICAgICAgODA6IHsgMC45OTU6IDUxLjE3LCAwLjk5OiA1My41NCwgMC45NzU6IDU3LjE1LCAwLjk1OiA2MC4zOSwgMC45OiA2NC4yOCwgMC41OiA3OS4zMywgMC4xOiA5Ni41OCwgMC4wNTogMTAxLjg4LCAwLjAyNTogMTA2LjYzLCAwLjAxOiAxMTIuMzMsIDAuMDA1OiAxMTYuMzIgfSxcbiAgICAgICAgOTA6IHsgMC45OTU6IDU5LjIwLCAwLjk5OiA2MS43NSwgMC45NzU6IDY1LjY1LCAwLjk1OiA2OS4xMywgMC45OiA3My4yOSwgMC41OiA4OS4zMywgMC4xOiAxMDcuNTcsIDAuMDU6IDExMy4xNCwgMC4wMjU6IDExOC4xNCwgMC4wMTogMTI0LjEyLCAwLjAwNTogMTI4LjMwIH0sXG4gICAgICAgIDEwMDogeyAwLjk5NTogNjcuMzMsIDAuOTk6IDcwLjA2LCAwLjk3NTogNzQuMjIsIDAuOTU6IDc3LjkzLCAwLjk6IDgyLjM2LCAwLjU6IDk5LjMzLCAwLjE6IDExOC41MCwgMC4wNTogMTI0LjM0LCAwLjAyNTogMTI5LjU2LCAwLjAxOiAxMzUuODEsIDAuMDA1OiAxNDAuMTcgfVxuICAgIH07XG5cbiAgICAvLyAjIM+HMiAoQ2hpLVNxdWFyZWQpIEdvb2RuZXNzLW9mLUZpdCBUZXN0XG4gICAgLy9cbiAgICAvLyBUaGUgW8+HMiAoQ2hpLVNxdWFyZWQpIEdvb2RuZXNzLW9mLUZpdCBUZXN0XShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dvb2RuZXNzX29mX2ZpdCNQZWFyc29uLjI3c19jaGktc3F1YXJlZF90ZXN0KVxuICAgIC8vIHVzZXMgYSBtZWFzdXJlIG9mIGdvb2RuZXNzIG9mIGZpdCB3aGljaCBpcyB0aGUgc3VtIG9mIGRpZmZlcmVuY2VzIGJldHdlZW4gb2JzZXJ2ZWQgYW5kIGV4cGVjdGVkIG91dGNvbWUgZnJlcXVlbmNpZXNcbiAgICAvLyAodGhhdCBpcywgY291bnRzIG9mIG9ic2VydmF0aW9ucyksIGVhY2ggc3F1YXJlZCBhbmQgZGl2aWRlZCBieSB0aGUgbnVtYmVyIG9mIG9ic2VydmF0aW9ucyBleHBlY3RlZCBnaXZlbiB0aGVcbiAgICAvLyBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLiBUaGUgcmVzdWx0aW5nIM+HMiBzdGF0aXN0aWMsIGBjaGlfc3F1YXJlZGAsIGNhbiBiZSBjb21wYXJlZCB0byB0aGUgY2hpLXNxdWFyZWQgZGlzdHJpYnV0aW9uXG4gICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBnb29kbmVzcyBvZiBmaXQuIEluIG9yZGVyIHRvIGRldGVybWluZSB0aGUgZGVncmVlcyBvZiBmcmVlZG9tIG9mIHRoZSBjaGktc3F1YXJlZCBkaXN0cmlidXRpb24sIG9uZVxuICAgIC8vIHRha2VzIHRoZSB0b3RhbCBudW1iZXIgb2Ygb2JzZXJ2ZWQgZnJlcXVlbmNpZXMgYW5kIHN1YnRyYWN0cyB0aGUgbnVtYmVyIG9mIGVzdGltYXRlZCBwYXJhbWV0ZXJzLiBUaGUgdGVzdCBzdGF0aXN0aWNcbiAgICAvLyBmb2xsb3dzLCBhcHByb3hpbWF0ZWx5LCBhIGNoaS1zcXVhcmUgZGlzdHJpYnV0aW9uIHdpdGggKGsg4oiSIGMpIGRlZ3JlZXMgb2YgZnJlZWRvbSB3aGVyZSBga2AgaXMgdGhlIG51bWJlciBvZiBub24tZW1wdHlcbiAgICAvLyBjZWxscyBhbmQgYGNgIGlzIHRoZSBudW1iZXIgb2YgZXN0aW1hdGVkIHBhcmFtZXRlcnMgZm9yIHRoZSBkaXN0cmlidXRpb24uXG4gICAgZnVuY3Rpb24gY2hpX3NxdWFyZWRfZ29vZG5lc3Nfb2ZfZml0KGRhdGEsIGRpc3RyaWJ1dGlvbl90eXBlLCBzaWduaWZpY2FuY2UpIHtcbiAgICAgICAgLy8gRXN0aW1hdGUgZnJvbSB0aGUgc2FtcGxlIGRhdGEsIGEgd2VpZ2h0ZWQgbWVhbi5cbiAgICAgICAgdmFyIGlucHV0X21lYW4gPSBtZWFuKGRhdGEpLFxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlZCB2YWx1ZSBvZiB0aGUgz4cyIHN0YXRpc3RpYy5cbiAgICAgICAgICAgIGNoaV9zcXVhcmVkID0gMCxcbiAgICAgICAgICAgIC8vIERlZ3JlZXMgb2YgZnJlZWRvbSwgY2FsY3VsYXRlZCBhcyAobnVtYmVyIG9mIGNsYXNzIGludGVydmFscyAtXG4gICAgICAgICAgICAvLyBudW1iZXIgb2YgaHlwb3RoZXNpemVkIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJzIGVzdGltYXRlZCAtIDEpXG4gICAgICAgICAgICBkZWdyZWVzX29mX2ZyZWVkb20sXG4gICAgICAgICAgICAvLyBOdW1iZXIgb2YgaHlwb3RoZXNpemVkIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJzIGVzdGltYXRlZCwgZXhwZWN0ZWQgdG8gYmUgc3VwcGxpZWQgaW4gdGhlIGRpc3RyaWJ1dGlvbiB0ZXN0LlxuICAgICAgICAgICAgLy8gTG9zZSBvbmUgZGVncmVlIG9mIGZyZWVkb20gZm9yIGVzdGltYXRpbmcgYGxhbWJkYWAgZnJvbSB0aGUgc2FtcGxlIGRhdGEuXG4gICAgICAgICAgICBjID0gMSxcbiAgICAgICAgICAgIC8vIFRoZSBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgdGhlIGh5cG90aGVzaXplZCBkaXN0cmlidXRpb24uXG4gICAgICAgICAgICBoeXBvdGhlc2l6ZWRfZGlzdHJpYnV0aW9uID0gZGlzdHJpYnV0aW9uX3R5cGUoaW5wdXRfbWVhbiksXG4gICAgICAgICAgICBvYnNlcnZlZF9mcmVxdWVuY2llcyA9IFtdLFxuICAgICAgICAgICAgZXhwZWN0ZWRfZnJlcXVlbmNpZXMgPSBbXSxcbiAgICAgICAgICAgIGs7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGFycmF5IGhvbGRpbmcgYSBoaXN0b2dyYW0gZnJvbSB0aGUgc2FtcGxlIGRhdGEsIG9mXG4gICAgICAgIC8vIHRoZSBmb3JtIGB7IHZhbHVlOiBudW1iZXJPZk9jdXJyZW5jZXMgfWBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZWRfZnJlcXVlbmNpZXNbZGF0YVtpXV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2RhdGFbaV1dID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2RhdGFbaV1dKys7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgaGlzdG9ncmFtIHdlIGNyZWF0ZWQgbWlnaHQgYmUgc3BhcnNlIC0gdGhlcmUgbWlnaHQgYmUgZ2Fwc1xuICAgICAgICAvLyBiZXR3ZWVuIHZhbHVlcy4gU28gd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSBoaXN0b2dyYW0sIG1ha2luZ1xuICAgICAgICAvLyBzdXJlIHRoYXQgaW5zdGVhZCBvZiB1bmRlZmluZWQsIGdhcHMgaGF2ZSAwIHZhbHVlcy5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG9ic2VydmVkX2ZyZXF1ZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZWRfZnJlcXVlbmNpZXNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBhcnJheSBob2xkaW5nIGEgaGlzdG9ncmFtIG9mIGV4cGVjdGVkIGRhdGEgZ2l2ZW4gdGhlXG4gICAgICAgIC8vIHNhbXBsZSBzaXplIGFuZCBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgICAgICBmb3IgKGsgaW4gaHlwb3RoZXNpemVkX2Rpc3RyaWJ1dGlvbikge1xuICAgICAgICAgICAgaWYgKGsgaW4gb2JzZXJ2ZWRfZnJlcXVlbmNpZXMpIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZF9mcmVxdWVuY2llc1trXSA9IGh5cG90aGVzaXplZF9kaXN0cmlidXRpb25ba10gKiBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdvcmtpbmcgYmFja3dhcmQgdGhyb3VnaCB0aGUgZXhwZWN0ZWQgZnJlcXVlbmNpZXMsIGNvbGxhcHNlIGNsYXNzZXNcbiAgICAgICAgLy8gaWYgbGVzcyB0aGFuIHRocmVlIG9ic2VydmF0aW9ucyBhcmUgZXhwZWN0ZWQgZm9yIGEgY2xhc3MuXG4gICAgICAgIC8vIFRoaXMgdHJhbnNmb3JtYXRpb24gaXMgYXBwbGllZCB0byB0aGUgb2JzZXJ2ZWQgZnJlcXVlbmNpZXMgYXMgd2VsbC5cbiAgICAgICAgZm9yIChrID0gZXhwZWN0ZWRfZnJlcXVlbmNpZXMubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0pIHtcbiAgICAgICAgICAgIGlmIChleHBlY3RlZF9mcmVxdWVuY2llc1trXSA8IDMpIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZF9mcmVxdWVuY2llc1trIC0gMV0gKz0gZXhwZWN0ZWRfZnJlcXVlbmNpZXNba107XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRfZnJlcXVlbmNpZXMucG9wKCk7XG5cbiAgICAgICAgICAgICAgICBvYnNlcnZlZF9mcmVxdWVuY2llc1trIC0gMV0gKz0gb2JzZXJ2ZWRfZnJlcXVlbmNpZXNba107XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZWRfZnJlcXVlbmNpZXMucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHNxdWFyZWQgZGlmZmVyZW5jZXMgYmV0d2VlbiBvYnNlcnZlZCAmIGV4cGVjdGVkXG4gICAgICAgIC8vIGZyZXF1ZW5jaWVzLCBhY2N1bXVsYXRpbmcgdGhlIGBjaGlfc3F1YXJlZGAgc3RhdGlzdGljLlxuICAgICAgICBmb3IgKGsgPSAwOyBrIDwgb2JzZXJ2ZWRfZnJlcXVlbmNpZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGNoaV9zcXVhcmVkICs9IE1hdGgucG93KFxuICAgICAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2tdIC0gZXhwZWN0ZWRfZnJlcXVlbmNpZXNba10sIDIpIC9cbiAgICAgICAgICAgICAgICBleHBlY3RlZF9mcmVxdWVuY2llc1trXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBkZWdyZWVzIG9mIGZyZWVkb20gZm9yIHRoaXMgdGVzdCBhbmQgbG9vayBpdCB1cCBpbiB0aGVcbiAgICAgICAgLy8gYGNoaV9zcXVhcmVkX2Rpc3RyaWJ1dGlvbl90YWJsZWAgaW4gb3JkZXIgdG9cbiAgICAgICAgLy8gYWNjZXB0IG9yIHJlamVjdCB0aGUgZ29vZG5lc3Mtb2YtZml0IG9mIHRoZSBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgICAgICBkZWdyZWVzX29mX2ZyZWVkb20gPSBvYnNlcnZlZF9mcmVxdWVuY2llcy5sZW5ndGggLSBjIC0gMTtcbiAgICAgICAgcmV0dXJuIGNoaV9zcXVhcmVkX2Rpc3RyaWJ1dGlvbl90YWJsZVtkZWdyZWVzX29mX2ZyZWVkb21dW3NpZ25pZmljYW5jZV0gPCBjaGlfc3F1YXJlZDtcbiAgICB9XG5cbiAgICAvLyAjIE1peGluXG4gICAgLy9cbiAgICAvLyBNaXhpbiBzaW1wbGVfc3RhdGlzdGljcyB0byBhIHNpbmdsZSBBcnJheSBpbnN0YW5jZSBpZiBwcm92aWRlZFxuICAgIC8vIG9yIHRoZSBBcnJheSBuYXRpdmUgb2JqZWN0IGlmIG5vdC4gVGhpcyBpcyBhbiBvcHRpb25hbFxuICAgIC8vIGZlYXR1cmUgdGhhdCBsZXRzIHlvdSB0cmVhdCBzaW1wbGVfc3RhdGlzdGljcyBhcyBhIG5hdGl2ZSBmZWF0dXJlXG4gICAgLy8gb2YgSmF2YXNjcmlwdC5cbiAgICBmdW5jdGlvbiBtaXhpbihhcnJheSkge1xuICAgICAgICB2YXIgc3VwcG9ydCA9ICEhKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyk7XG4gICAgICAgIGlmICghc3VwcG9ydCkgdGhyb3cgbmV3IEVycm9yKCd3aXRob3V0IGRlZmluZVByb3BlcnR5LCBzaW1wbGUtc3RhdGlzdGljcyBjYW5ub3QgYmUgbWl4ZWQgaW4nKTtcblxuICAgICAgICAvLyBvbmx5IG1ldGhvZHMgd2hpY2ggd29yayBvbiBiYXNpYyBhcnJheXMgaW4gYSBzaW5nbGUgc3RlcFxuICAgICAgICAvLyBhcmUgc3VwcG9ydGVkXG4gICAgICAgIHZhciBhcnJheU1ldGhvZHMgPSBbJ21lZGlhbicsICdzdGFuZGFyZF9kZXZpYXRpb24nLCAnc3VtJyxcbiAgICAgICAgICAgICdzYW1wbGVfc2tld25lc3MnLFxuICAgICAgICAgICAgJ21lYW4nLCAnbWluJywgJ21heCcsICdxdWFudGlsZScsICdnZW9tZXRyaWNfbWVhbicsXG4gICAgICAgICAgICAnaGFybW9uaWNfbWVhbiddO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhIGNsb3N1cmUgd2l0aCBhIG1ldGhvZCBuYW1lIHNvIHRoYXQgYSByZWZlcmVuY2VcbiAgICAgICAgLy8gbGlrZSBgYXJyYXlNZXRob2RzW2ldYCBkb2Vzbid0IGZvbGxvdyB0aGUgbG9vcCBpbmNyZW1lbnRcbiAgICAgICAgZnVuY3Rpb24gd3JhcChtZXRob2QpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBjYXN0IGFueSBhcmd1bWVudHMgaW50byBhbiBhcnJheSwgc2luY2UgdGhleSdyZVxuICAgICAgICAgICAgICAgIC8vIG5hdGl2ZWx5IG9iamVjdHNcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhlIGZpcnN0IGFyZ3VtZW50IHRoZSBhcnJheSBpdHNlbGZcbiAgICAgICAgICAgICAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIHNzIG1ldGhvZFxuICAgICAgICAgICAgICAgIHJldHVybiBzc1ttZXRob2RdLmFwcGx5KHNzLCBhcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZWxlY3Qgb2JqZWN0IHRvIGV4dGVuZFxuICAgICAgICB2YXIgZXh0ZW5kaW5nO1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHNoYWxsb3cgY29weSBvZiB0aGUgYXJyYXkgc28gdGhhdCBvdXIgaW50ZXJuYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbnMgZG8gbm90IGNoYW5nZSBpdCBieSByZWZlcmVuY2VcbiAgICAgICAgICAgIGV4dGVuZGluZyA9IGFycmF5LnNsaWNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRlbmRpbmcgPSBBcnJheS5wcm90b3R5cGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmb3IgZWFjaCBhcnJheSBmdW5jdGlvbiwgZGVmaW5lIGEgZnVuY3Rpb24gdGhhdCBnZXRzXG4gICAgICAgIC8vIHRoZSBhcnJheSBhcyB0aGUgZmlyc3QgYXJndW1lbnQuXG4gICAgICAgIC8vIFdlIHVzZSBbZGVmaW5lUHJvcGVydHldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2RlZmluZVByb3BlcnR5KVxuICAgICAgICAvLyBiZWNhdXNlIGl0IGFsbG93cyB0aGVzZSBwcm9wZXJ0aWVzIHRvIGJlIG5vbi1lbnVtZXJhYmxlOlxuICAgICAgICAvLyBgZm9yICh2YXIgaW4geClgIGxvb3BzIHdpbGwgbm90IHJ1biBpbnRvIHByb2JsZW1zIHdpdGggdGhpc1xuICAgICAgICAvLyBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHRlbmRpbmcsIGFycmF5TWV0aG9kc1tpXSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB3cmFwKGFycmF5TWV0aG9kc1tpXSksXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHRlbmRpbmc7XG4gICAgfVxuXG4gICAgc3MubGluZWFyX3JlZ3Jlc3Npb24gPSBsaW5lYXJfcmVncmVzc2lvbjtcbiAgICBzcy5zdGFuZGFyZF9kZXZpYXRpb24gPSBzdGFuZGFyZF9kZXZpYXRpb247XG4gICAgc3Mucl9zcXVhcmVkID0gcl9zcXVhcmVkO1xuICAgIHNzLm1lZGlhbiA9IG1lZGlhbjtcbiAgICBzcy5tZWFuID0gbWVhbjtcbiAgICBzcy5tb2RlID0gbW9kZTtcbiAgICBzcy5taW4gPSBtaW47XG4gICAgc3MubWF4ID0gbWF4O1xuICAgIHNzLnN1bSA9IHN1bTtcbiAgICBzcy5xdWFudGlsZSA9IHF1YW50aWxlO1xuICAgIHNzLnF1YW50aWxlX3NvcnRlZCA9IHF1YW50aWxlX3NvcnRlZDtcbiAgICBzcy5pcXIgPSBpcXI7XG4gICAgc3MubWFkID0gbWFkO1xuXG4gICAgc3MuY2h1bmsgPSBjaHVuaztcbiAgICBzcy5zaHVmZmxlID0gc2h1ZmZsZTtcbiAgICBzcy5zaHVmZmxlX2luX3BsYWNlID0gc2h1ZmZsZV9pbl9wbGFjZTtcblxuICAgIHNzLnNhbXBsZSA9IHNhbXBsZTtcblxuICAgIHNzLnNhbXBsZV9jb3ZhcmlhbmNlID0gc2FtcGxlX2NvdmFyaWFuY2U7XG4gICAgc3Muc2FtcGxlX2NvcnJlbGF0aW9uID0gc2FtcGxlX2NvcnJlbGF0aW9uO1xuICAgIHNzLnNhbXBsZV92YXJpYW5jZSA9IHNhbXBsZV92YXJpYW5jZTtcbiAgICBzcy5zYW1wbGVfc3RhbmRhcmRfZGV2aWF0aW9uID0gc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbjtcbiAgICBzcy5zYW1wbGVfc2tld25lc3MgPSBzYW1wbGVfc2tld25lc3M7XG5cbiAgICBzcy5nZW9tZXRyaWNfbWVhbiA9IGdlb21ldHJpY19tZWFuO1xuICAgIHNzLmhhcm1vbmljX21lYW4gPSBoYXJtb25pY19tZWFuO1xuICAgIHNzLnZhcmlhbmNlID0gdmFyaWFuY2U7XG4gICAgc3MudF90ZXN0ID0gdF90ZXN0O1xuICAgIHNzLnRfdGVzdF90d29fc2FtcGxlID0gdF90ZXN0X3R3b19zYW1wbGU7XG5cbiAgICAvLyBqZW5rc1xuICAgIHNzLmplbmtzTWF0cmljZXMgPSBqZW5rc01hdHJpY2VzO1xuICAgIHNzLmplbmtzQnJlYWtzID0gamVua3NCcmVha3M7XG4gICAgc3MuamVua3MgPSBqZW5rcztcblxuICAgIHNzLmJheWVzaWFuID0gYmF5ZXNpYW47XG5cbiAgICAvLyBEaXN0cmlidXRpb24tcmVsYXRlZCBtZXRob2RzXG4gICAgc3MuZXBzaWxvbiA9IGVwc2lsb247IC8vIFdlIG1ha2UgzrUgYXZhaWxhYmxlIHRvIHRoZSB0ZXN0IHN1aXRlLlxuICAgIHNzLmZhY3RvcmlhbCA9IGZhY3RvcmlhbDtcbiAgICBzcy5iZXJub3VsbGlfZGlzdHJpYnV0aW9uID0gYmVybm91bGxpX2Rpc3RyaWJ1dGlvbjtcbiAgICBzcy5iaW5vbWlhbF9kaXN0cmlidXRpb24gPSBiaW5vbWlhbF9kaXN0cmlidXRpb247XG4gICAgc3MucG9pc3Nvbl9kaXN0cmlidXRpb24gPSBwb2lzc29uX2Rpc3RyaWJ1dGlvbjtcbiAgICBzcy5jaGlfc3F1YXJlZF9nb29kbmVzc19vZl9maXQgPSBjaGlfc3F1YXJlZF9nb29kbmVzc19vZl9maXQ7XG5cbiAgICAvLyBOb3JtYWwgZGlzdHJpYnV0aW9uXG4gICAgc3Muel9zY29yZSA9IHpfc2NvcmU7XG4gICAgc3MuY3VtdWxhdGl2ZV9zdGRfbm9ybWFsX3Byb2JhYmlsaXR5ID0gY3VtdWxhdGl2ZV9zdGRfbm9ybWFsX3Byb2JhYmlsaXR5O1xuICAgIHNzLnN0YW5kYXJkX25vcm1hbF90YWJsZSA9IHN0YW5kYXJkX25vcm1hbF90YWJsZTtcblxuICAgIC8vIEFsaWFzIHRoaXMgaW50byBpdHMgY29tbW9uIG5hbWVcbiAgICBzcy5hdmVyYWdlID0gbWVhbjtcbiAgICBzcy5pbnRlcnF1YXJ0aWxlX3JhbmdlID0gaXFyO1xuICAgIHNzLm1peGluID0gbWl4aW47XG4gICAgc3MubWVkaWFuX2Fic29sdXRlX2RldmlhdGlvbiA9IG1hZDtcblxufSkodGhpcyk7XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1jb3VudC9ub2RlX21vZHVsZXMvdHVyZi1pbnNpZGUvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwidmFyIHNzID0gcmVxdWlyZSgnc2ltcGxlLXN0YXRpc3RpY3MnKTtcbnZhciBpbnNpZGUgPSByZXF1aXJlKCd0dXJmLWluc2lkZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvbHlGQywgcHRGQywgaW5GaWVsZCwgb3V0RmllbGQsIGRvbmUpe1xuICBwb2x5RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwb2x5KXtcbiAgICBpZighcG9seS5wcm9wZXJ0aWVzKXtcbiAgICAgIHBvbHkucHJvcGVydGllcyA9IHt9O1xuICAgIH1cbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgcHRGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHB0KXtcbiAgICAgIGlmIChpbnNpZGUocHQsIHBvbHkpKSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKHB0LnByb3BlcnRpZXNbaW5GaWVsZF0pO1xuICAgICAgfVxuICAgIH0pXG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IHNzLm1heCh2YWx1ZXMpO1xuICB9KVxuXG4gIHJldHVybiBwb2x5RkM7XG59XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1kZXZpYXRpb24vbm9kZV9tb2R1bGVzL3NpbXBsZS1zdGF0aXN0aWNzL3NyYy9zaW1wbGVfc3RhdGlzdGljcy5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1kZXZpYXRpb24vbm9kZV9tb2R1bGVzL3R1cmYtaW5zaWRlL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsInZhciBzcyA9IHJlcXVpcmUoJ3NpbXBsZS1zdGF0aXN0aWNzJyk7XG52YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5RkMsIHB0RkMsIGluRmllbGQsIG91dEZpZWxkLCBkb25lKXtcbiAgcG9seUZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocG9seSl7XG4gICAgaWYoIXBvbHkucHJvcGVydGllcyl7XG4gICAgICBwb2x5LnByb3BlcnRpZXMgPSB7fTtcbiAgICB9XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHB0RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgICBpZiAoaW5zaWRlKHB0LCBwb2x5KSkge1xuICAgICAgICB2YWx1ZXMucHVzaChwdC5wcm9wZXJ0aWVzW2luRmllbGRdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwb2x5LnByb3BlcnRpZXNbb3V0RmllbGRdID0gc3MubWVkaWFuKHZhbHVlcyk7XG4gIH0pO1xuXG4gIHJldHVybiBwb2x5RkM7XG59XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1tYXgvbm9kZV9tb2R1bGVzL3NpbXBsZS1zdGF0aXN0aWNzL3NyYy9zaW1wbGVfc3RhdGlzdGljcy5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1tYXgvbm9kZV9tb2R1bGVzL3R1cmYtaW5zaWRlL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsInZhciBzcyA9IHJlcXVpcmUoJ3NpbXBsZS1zdGF0aXN0aWNzJyk7XG52YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5RkMsIHB0RkMsIGluRmllbGQsIG91dEZpZWxkLCBkb25lKXtcbiAgcG9seUZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocG9seSl7XG4gICAgaWYoIXBvbHkucHJvcGVydGllcyl7XG4gICAgICBwb2x5LnByb3BlcnRpZXMgPSB7fTtcbiAgICB9XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHB0RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgICBpZiAoaW5zaWRlKHB0LCBwb2x5KSkge1xuICAgICAgICB2YWx1ZXMucHVzaChwdC5wcm9wZXJ0aWVzW2luRmllbGRdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwb2x5LnByb3BlcnRpZXNbb3V0RmllbGRdID0gc3MubWluKHZhbHVlcyk7XG4gIH0pXG5cbiAgcmV0dXJuIHBvbHlGQztcbn1cbiIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYWdncmVnYXRlL25vZGVfbW9kdWxlcy90dXJmLW1lZGlhbi9ub2RlX21vZHVsZXMvc2ltcGxlLXN0YXRpc3RpY3Mvc3JjL3NpbXBsZV9zdGF0aXN0aWNzLmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsInZhciBzcyA9IHJlcXVpcmUoJ3NpbXBsZS1zdGF0aXN0aWNzJyk7XG52YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5RkMsIHB0RkMsIGluRmllbGQsIG91dEZpZWxkLCBkb25lKXtcbiAgcG9seUZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocG9seSl7XG4gICAgaWYoIXBvbHkucHJvcGVydGllcyl7XG4gICAgICBwb2x5LnByb3BlcnRpZXMgPSB7fTtcbiAgICB9XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHB0RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgICBpZiAoaW5zaWRlKHB0LCBwb2x5KSkge1xuICAgICAgICB2YWx1ZXMucHVzaChwdC5wcm9wZXJ0aWVzW2luRmllbGRdKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIHBvbHkucHJvcGVydGllc1tvdXRGaWVsZF0gPSBzcy5zdW0odmFsdWVzKTtcbiAgfSlcblxuICByZXR1cm4gcG9seUZDO1xufVxuIiwiLyogZ2xvYmFsIG1vZHVsZSAqL1xuLy8gIyBzaW1wbGUtc3RhdGlzdGljc1xuLy9cbi8vIEEgc2ltcGxlLCBsaXRlcmF0ZSBzdGF0aXN0aWNzIHN5c3RlbS4gVGhlIGNvZGUgYmVsb3cgdXNlcyB0aGVcbi8vIFtKYXZhc2NyaXB0IG1vZHVsZSBwYXR0ZXJuXShodHRwOi8vd3d3LmFkZXF1YXRlbHlnb29kLmNvbS8yMDEwLzMvSmF2YVNjcmlwdC1Nb2R1bGUtUGF0dGVybi1Jbi1EZXB0aCksXG4vLyBldmVudHVhbGx5IGFzc2lnbmluZyBgc2ltcGxlLXN0YXRpc3RpY3NgIHRvIGBzc2AgaW4gYnJvd3NlcnMgb3IgdGhlXG4vLyBgZXhwb3J0c2Agb2JqZWN0IGZvciBub2RlLmpzXG4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNzID0ge307XG5cbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gQXNzaWduIHRoZSBgc3NgIG9iamVjdCB0byBleHBvcnRzLCBzbyB0aGF0IHlvdSBjYW4gcmVxdWlyZVxuICAgICAgICAvLyBpdCBpbiBbbm9kZS5qc10oaHR0cDovL25vZGVqcy5vcmcvKVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHNzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgaW4gYSBicm93c2VyLCB3ZSBhc3NpZ24gYHNzYCB0byB0aGUgd2luZG93IG9iamVjdCxcbiAgICAgICAgLy8gc28geW91IGNhbiBzaW1wbHkgcmVmZXIgdG8gaXQgYXMgYHNzYC5cbiAgICAgICAgdGhpcy5zcyA9IHNzO1xuICAgIH1cblxuICAgIC8vICMgW0xpbmVhciBSZWdyZXNzaW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpbmVhcl9yZWdyZXNzaW9uKVxuICAgIC8vXG4gICAgLy8gW1NpbXBsZSBsaW5lYXIgcmVncmVzc2lvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaW1wbGVfbGluZWFyX3JlZ3Jlc3Npb24pXG4gICAgLy8gaXMgYSBzaW1wbGUgd2F5IHRvIGZpbmQgYSBmaXR0ZWQgbGluZVxuICAgIC8vIGJldHdlZW4gYSBzZXQgb2YgY29vcmRpbmF0ZXMuXG4gICAgZnVuY3Rpb24gbGluZWFyX3JlZ3Jlc3Npb24oKSB7XG4gICAgICAgIHZhciBsaW5yZWcgPSB7fSxcbiAgICAgICAgICAgIGRhdGEgPSBbXTtcblxuICAgICAgICAvLyBBc3NpZ24gZGF0YSB0byB0aGUgbW9kZWwuIERhdGEgaXMgYXNzdW1lZCB0byBiZSBhbiBhcnJheS5cbiAgICAgICAgbGlucmVnLmRhdGEgPSBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgZGF0YSA9IHguc2xpY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBsaW5yZWc7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBzbG9wZSBhbmQgeS1pbnRlcmNlcHQgb2YgdGhlIHJlZ3Jlc3Npb24gbGluZVxuICAgICAgICAvLyBieSBjYWxjdWxhdGluZyB0aGUgbGVhc3Qgc3VtIG9mIHNxdWFyZXNcbiAgICAgICAgbGlucmVnLm1iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbSwgYjtcblxuICAgICAgICAgICAgLy8gU3RvcmUgZGF0YSBsZW5ndGggaW4gYSBsb2NhbCB2YXJpYWJsZSB0byByZWR1Y2VcbiAgICAgICAgICAgIC8vIHJlcGVhdGVkIG9iamVjdCBwcm9wZXJ0eSBsb29rdXBzXG4gICAgICAgICAgICB2YXIgZGF0YV9sZW5ndGggPSBkYXRhLmxlbmd0aDtcblxuICAgICAgICAgICAgLy9pZiB0aGVyZSdzIG9ubHkgb25lIHBvaW50LCBhcmJpdHJhcmlseSBjaG9vc2UgYSBzbG9wZSBvZiAwXG4gICAgICAgICAgICAvL2FuZCBhIHktaW50ZXJjZXB0IG9mIHdoYXRldmVyIHRoZSB5IG9mIHRoZSBpbml0aWFsIHBvaW50IGlzXG4gICAgICAgICAgICBpZiAoZGF0YV9sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBtID0gMDtcbiAgICAgICAgICAgICAgICBiID0gZGF0YVswXVsxXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvdXIgc3VtcyBhbmQgc2NvcGUgdGhlIGBtYCBhbmQgYGJgXG4gICAgICAgICAgICAgICAgLy8gdmFyaWFibGVzIHRoYXQgZGVmaW5lIHRoZSBsaW5lLlxuICAgICAgICAgICAgICAgIHZhciBzdW1feCA9IDAsIHN1bV95ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgc3VtX3h4ID0gMCwgc3VtX3h5ID0gMDtcblxuICAgICAgICAgICAgICAgIC8vIFVzZSBsb2NhbCB2YXJpYWJsZXMgdG8gZ3JhYiBwb2ludCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAvLyB3aXRoIG1pbmltYWwgb2JqZWN0IHByb3BlcnR5IGxvb2t1cHNcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQsIHgsIHk7XG5cbiAgICAgICAgICAgICAgICAvLyBHYXRoZXIgdGhlIHN1bSBvZiBhbGwgeCB2YWx1ZXMsIHRoZSBzdW0gb2YgYWxsXG4gICAgICAgICAgICAgICAgLy8geSB2YWx1ZXMsIGFuZCB0aGUgc3VtIG9mIHheMiBhbmQgKHgqeSkgZm9yIGVhY2hcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZS5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIEluIG1hdGggbm90YXRpb24sIHRoZXNlIHdvdWxkIGJlIFNTX3gsIFNTX3ksIFNTX3h4LCBhbmQgU1NfeHlcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFfbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSBkYXRhW2ldO1xuICAgICAgICAgICAgICAgICAgICB4ID0gcG9pbnRbMF07XG4gICAgICAgICAgICAgICAgICAgIHkgPSBwb2ludFsxXTtcblxuICAgICAgICAgICAgICAgICAgICBzdW1feCArPSB4O1xuICAgICAgICAgICAgICAgICAgICBzdW1feSArPSB5O1xuXG4gICAgICAgICAgICAgICAgICAgIHN1bV94eCArPSB4ICogeDtcbiAgICAgICAgICAgICAgICAgICAgc3VtX3h5ICs9IHggKiB5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGBtYCBpcyB0aGUgc2xvcGUgb2YgdGhlIHJlZ3Jlc3Npb24gbGluZVxuICAgICAgICAgICAgICAgIG0gPSAoKGRhdGFfbGVuZ3RoICogc3VtX3h5KSAtIChzdW1feCAqIHN1bV95KSkgL1xuICAgICAgICAgICAgICAgICAgICAoKGRhdGFfbGVuZ3RoICogc3VtX3h4KSAtIChzdW1feCAqIHN1bV94KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBgYmAgaXMgdGhlIHktaW50ZXJjZXB0IG9mIHRoZSBsaW5lLlxuICAgICAgICAgICAgICAgIGIgPSAoc3VtX3kgLyBkYXRhX2xlbmd0aCkgLSAoKG0gKiBzdW1feCkgLyBkYXRhX2xlbmd0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJldHVybiBib3RoIHZhbHVlcyBhcyBhbiBvYmplY3QuXG4gICAgICAgICAgICByZXR1cm4geyBtOiBtLCBiOiBiIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gYSBzaG9ydGN1dCBmb3Igc2ltcGx5IGdldHRpbmcgdGhlIHNsb3BlIG9mIHRoZSByZWdyZXNzaW9uIGxpbmVcbiAgICAgICAgbGlucmVnLm0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBsaW5yZWcubWIoKS5tO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGEgc2hvcnRjdXQgZm9yIHNpbXBseSBnZXR0aW5nIHRoZSB5LWludGVyY2VwdCBvZiB0aGUgcmVncmVzc2lvblxuICAgICAgICAvLyBsaW5lLlxuICAgICAgICBsaW5yZWcuYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpbnJlZy5tYigpLmI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gIyMgRml0dGluZyBUaGUgUmVncmVzc2lvbiBMaW5lXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgaXMgY2FsbGVkIGFmdGVyIGAuZGF0YSgpYCBhbmQgcmV0dXJucyB0aGVcbiAgICAgICAgLy8gZXF1YXRpb24gYHkgPSBmKHgpYCB3aGljaCBnaXZlcyB0aGUgcG9zaXRpb25cbiAgICAgICAgLy8gb2YgdGhlIHJlZ3Jlc3Npb24gbGluZSBhdCBlYWNoIHBvaW50IGluIGB4YC5cbiAgICAgICAgbGlucmVnLmxpbmUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBzbG9wZSwgYG1gLCBhbmQgeS1pbnRlcmNlcHQsIGBiYCwgb2YgdGhlIGxpbmUuXG4gICAgICAgICAgICB2YXIgbWIgPSBsaW5yZWcubWIoKSxcbiAgICAgICAgICAgICAgICBtID0gbWIubSxcbiAgICAgICAgICAgICAgICBiID0gbWIuYjtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBjb21wdXRlcyBhIGB5YCB2YWx1ZSBmb3IgZWFjaFxuICAgICAgICAgICAgLy8geCB2YWx1ZSBpdCBpcyBnaXZlbiwgYmFzZWQgb24gdGhlIHZhbHVlcyBvZiBgYmAgYW5kIGBhYFxuICAgICAgICAgICAgLy8gdGhhdCB3ZSBqdXN0IGNvbXB1dGVkLlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYiArIChtICogeCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBsaW5yZWc7XG4gICAgfVxuXG4gICAgLy8gIyBbUiBTcXVhcmVkXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvZWZmaWNpZW50X29mX2RldGVybWluYXRpb24pXG4gICAgLy9cbiAgICAvLyBUaGUgci1zcXVhcmVkIHZhbHVlIG9mIGRhdGEgY29tcGFyZWQgd2l0aCBhIGZ1bmN0aW9uIGBmYFxuICAgIC8vIGlzIHRoZSBzdW0gb2YgdGhlIHNxdWFyZWQgZGlmZmVyZW5jZXMgYmV0d2VlbiB0aGUgcHJlZGljdGlvblxuICAgIC8vIGFuZCB0aGUgYWN0dWFsIHZhbHVlLlxuICAgIGZ1bmN0aW9uIHJfc3F1YXJlZChkYXRhLCBmKSB7XG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA8IDIpIHJldHVybiAxO1xuXG4gICAgICAgIC8vIENvbXB1dGUgdGhlIGF2ZXJhZ2UgeSB2YWx1ZSBmb3IgdGhlIGFjdHVhbFxuICAgICAgICAvLyBkYXRhIHNldCBpbiBvcmRlciB0byBjb21wdXRlIHRoZVxuICAgICAgICAvLyBfdG90YWwgc3VtIG9mIHNxdWFyZXNfXG4gICAgICAgIHZhciBzdW0gPSAwLCBhdmVyYWdlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN1bSArPSBkYXRhW2ldWzFdO1xuICAgICAgICB9XG4gICAgICAgIGF2ZXJhZ2UgPSBzdW0gLyBkYXRhLmxlbmd0aDtcblxuICAgICAgICAvLyBDb21wdXRlIHRoZSB0b3RhbCBzdW0gb2Ygc3F1YXJlcyAtIHRoZVxuICAgICAgICAvLyBzcXVhcmVkIGRpZmZlcmVuY2UgYmV0d2VlbiBlYWNoIHBvaW50XG4gICAgICAgIC8vIGFuZCB0aGUgYXZlcmFnZSBvZiBhbGwgcG9pbnRzLlxuICAgICAgICB2YXIgc3VtX29mX3NxdWFyZXMgPSAwO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHN1bV9vZl9zcXVhcmVzICs9IE1hdGgucG93KGF2ZXJhZ2UgLSBkYXRhW2pdWzFdLCAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmFsbHkgZXN0aW1hdGUgdGhlIGVycm9yOiB0aGUgc3F1YXJlZFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGVzdGltYXRlIGFuZCB0aGUgYWN0dWFsIGRhdGFcbiAgICAgICAgLy8gdmFsdWUgYXQgZWFjaCBwb2ludC5cbiAgICAgICAgdmFyIGVyciA9IDA7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZGF0YS5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgZXJyICs9IE1hdGgucG93KGRhdGFba11bMV0gLSBmKGRhdGFba11bMF0pLCAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFzIHRoZSBlcnJvciBncm93cyBsYXJnZXIsIGl0cyByYXRpbyB0byB0aGVcbiAgICAgICAgLy8gc3VtIG9mIHNxdWFyZXMgaW5jcmVhc2VzIGFuZCB0aGUgciBzcXVhcmVkXG4gICAgICAgIC8vIHZhbHVlIGdyb3dzIGxvd2VyLlxuICAgICAgICByZXR1cm4gMSAtIChlcnIgLyBzdW1fb2Zfc3F1YXJlcyk7XG4gICAgfVxuXG5cbiAgICAvLyAjIFtCYXllc2lhbiBDbGFzc2lmaWVyXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL05haXZlX0JheWVzX2NsYXNzaWZpZXIpXG4gICAgLy9cbiAgICAvLyBUaGlzIGlzIGEgbmHDr3ZlIGJheWVzaWFuIGNsYXNzaWZpZXIgdGhhdCB0YWtlc1xuICAgIC8vIHNpbmdseS1uZXN0ZWQgb2JqZWN0cy5cbiAgICBmdW5jdGlvbiBiYXllc2lhbigpIHtcbiAgICAgICAgLy8gVGhlIGBiYXllc19tb2RlbGAgb2JqZWN0IGlzIHdoYXQgd2lsbCBiZSBleHBvc2VkXG4gICAgICAgIC8vIGJ5IHRoaXMgY2xvc3VyZSwgd2l0aCBhbGwgb2YgaXRzIGV4dGVuZGVkIG1ldGhvZHMsIGFuZCB3aWxsXG4gICAgICAgIC8vIGhhdmUgYWNjZXNzIHRvIGFsbCBzY29wZSB2YXJpYWJsZXMsIGxpa2UgYHRvdGFsX2NvdW50YC5cbiAgICAgICAgdmFyIGJheWVzX21vZGVsID0ge30sXG4gICAgICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRoYXQgYXJlIGN1cnJlbnRseVxuICAgICAgICAgICAgLy8gY2xhc3NpZmllZCBpbiB0aGUgbW9kZWxcbiAgICAgICAgICAgIHRvdGFsX2NvdW50ID0gMCxcbiAgICAgICAgICAgIC8vIEV2ZXJ5IGl0ZW0gY2xhc3NpZmllZCBpbiB0aGUgbW9kZWxcbiAgICAgICAgICAgIGRhdGEgPSB7fTtcblxuICAgICAgICAvLyAjIyBUcmFpblxuICAgICAgICAvLyBUcmFpbiB0aGUgY2xhc3NpZmllciB3aXRoIGEgbmV3IGl0ZW0sIHdoaWNoIGhhcyBhIHNpbmdsZVxuICAgICAgICAvLyBkaW1lbnNpb24gb2YgSmF2YXNjcmlwdCBsaXRlcmFsIGtleXMgYW5kIHZhbHVlcy5cbiAgICAgICAgYmF5ZXNfbW9kZWwudHJhaW4gPSBmdW5jdGlvbihpdGVtLCBjYXRlZ29yeSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGEgb2JqZWN0IGRvZXNuJ3QgaGF2ZSBhbnkgdmFsdWVzXG4gICAgICAgICAgICAvLyBmb3IgdGhpcyBjYXRlZ29yeSwgY3JlYXRlIGEgbmV3IG9iamVjdCBmb3IgaXQuXG4gICAgICAgICAgICBpZiAoIWRhdGFbY2F0ZWdvcnldKSBkYXRhW2NhdGVnb3J5XSA9IHt9O1xuXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBrZXkgaW4gdGhlIGl0ZW0uXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGl0ZW1ba107XG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgbmVzdGVkIG9iamVjdCBgZGF0YVtjYXRlZ29yeV1ba11baXRlbVtrXV1gXG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhbiBvYmplY3Qgb2Yga2V5cyB0aGF0IGVxdWFsIDAuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbY2F0ZWdvcnldW2tdID09PSB1bmRlZmluZWQpIGRhdGFbY2F0ZWdvcnldW2tdID0ge307XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbY2F0ZWdvcnldW2tdW3ZdID09PSB1bmRlZmluZWQpIGRhdGFbY2F0ZWdvcnldW2tdW3ZdID0gMDtcblxuICAgICAgICAgICAgICAgIC8vIEFuZCBpbmNyZW1lbnQgdGhlIGtleSBmb3IgdGhpcyBrZXkvdmFsdWUgY29tYmluYXRpb24uXG4gICAgICAgICAgICAgICAgZGF0YVtjYXRlZ29yeV1ba11baXRlbVtrXV0rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGl0ZW1zIGNsYXNzaWZpZWRcbiAgICAgICAgICAgIHRvdGFsX2NvdW50Kys7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gIyMgU2NvcmVcbiAgICAgICAgLy8gR2VuZXJhdGUgYSBzY29yZSBvZiBob3cgd2VsbCB0aGlzIGl0ZW0gbWF0Y2hlcyBhbGxcbiAgICAgICAgLy8gcG9zc2libGUgY2F0ZWdvcmllcyBiYXNlZCBvbiBpdHMgYXR0cmlidXRlc1xuICAgICAgICBiYXllc19tb2RlbC5zY29yZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgYW4gZW1wdHkgYXJyYXkgb2Ygb2RkcyBwZXIgY2F0ZWdvcnkuXG4gICAgICAgICAgICB2YXIgb2RkcyA9IHt9LCBjYXRlZ29yeTtcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGtleSBpbiB0aGUgaXRlbSxcbiAgICAgICAgICAgIC8vIHRoZW4gaXRlcmF0ZSB0aHJvdWdoIGVhY2ggY2F0ZWdvcnkgdGhhdCBoYXMgYmVlbiB1c2VkXG4gICAgICAgICAgICAvLyBpbiBwcmV2aW91cyBjYWxscyB0byBgLnRyYWluKClgXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGl0ZW1ba107XG4gICAgICAgICAgICAgICAgZm9yIChjYXRlZ29yeSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbiBlbXB0eSBvYmplY3QgZm9yIHN0b3Jpbmcga2V5IC0gdmFsdWUgY29tYmluYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIGNhdGVnb3J5LlxuICAgICAgICAgICAgICAgICAgICBpZiAob2Rkc1tjYXRlZ29yeV0gPT09IHVuZGVmaW5lZCkgb2Rkc1tjYXRlZ29yeV0gPSB7fTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGl0ZW0gZG9lc24ndCBldmVuIGhhdmUgYSBwcm9wZXJ0eSwgaXQgY291bnRzIGZvciBub3RoaW5nLFxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgaWYgaXQgZG9lcyBoYXZlIHRoZSBwcm9wZXJ0eSB0aGF0IHdlJ3JlIGxvb2tpbmcgZm9yIGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGl0ZW0gdG8gY2F0ZWdvcml6ZSwgaXQgY291bnRzIGJhc2VkIG9uIGhvdyBwb3B1bGFyIGl0IGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHZlcnN1cyB0aGUgd2hvbGUgcG9wdWxhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbY2F0ZWdvcnldW2tdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZGRzW2NhdGVnb3J5XVtrICsgJ18nICsgdl0gPSAoZGF0YVtjYXRlZ29yeV1ba11bdl0gfHwgMCkgLyB0b3RhbF9jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9kZHNbY2F0ZWdvcnldW2sgKyAnXycgKyB2XSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldCB1cCBhIG5ldyBvYmplY3QgdGhhdCB3aWxsIGNvbnRhaW4gc3VtcyBvZiB0aGVzZSBvZGRzIGJ5IGNhdGVnb3J5XG4gICAgICAgICAgICB2YXIgb2Rkc19zdW1zID0ge307XG5cbiAgICAgICAgICAgIGZvciAoY2F0ZWdvcnkgaW4gb2Rkcykge1xuICAgICAgICAgICAgICAgIC8vIFRhbGx5IGFsbCBvZiB0aGUgb2RkcyBmb3IgZWFjaCBjYXRlZ29yeS1jb21iaW5hdGlvbiBwYWlyIC1cbiAgICAgICAgICAgICAgICAvLyB0aGUgbm9uLWV4aXN0ZW5jZSBvZiBhIGNhdGVnb3J5IGRvZXMgbm90IGFkZCBhbnl0aGluZyB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBzY29yZS5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb21iaW5hdGlvbiBpbiBvZGRzW2NhdGVnb3J5XSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2Rkc19zdW1zW2NhdGVnb3J5XSA9PT0gdW5kZWZpbmVkKSBvZGRzX3N1bXNbY2F0ZWdvcnldID0gMDtcbiAgICAgICAgICAgICAgICAgICAgb2Rkc19zdW1zW2NhdGVnb3J5XSArPSBvZGRzW2NhdGVnb3J5XVtjb21iaW5hdGlvbl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb2Rkc19zdW1zO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgY29tcGxldGVkIG1vZGVsLlxuICAgICAgICByZXR1cm4gYmF5ZXNfbW9kZWw7XG4gICAgfVxuXG4gICAgLy8gIyBzdW1cbiAgICAvL1xuICAgIC8vIGlzIHNpbXBseSB0aGUgcmVzdWx0IG9mIGFkZGluZyBhbGwgbnVtYmVyc1xuICAgIC8vIHRvZ2V0aGVyLCBzdGFydGluZyBmcm9tIHplcm8uXG4gICAgLy9cbiAgICAvLyBUaGlzIHJ1bnMgb24gYE8obilgLCBsaW5lYXIgdGltZSBpbiByZXNwZWN0IHRvIHRoZSBhcnJheVxuICAgIGZ1bmN0aW9uIHN1bSh4KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFsdWUgKz0geFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLy8gIyBtZWFuXG4gICAgLy9cbiAgICAvLyBpcyB0aGUgc3VtIG92ZXIgdGhlIG51bWJlciBvZiB2YWx1ZXNcbiAgICAvL1xuICAgIC8vIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gICAgZnVuY3Rpb24gbWVhbih4KSB7XG4gICAgICAgIC8vIFRoZSBtZWFuIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIHJldHVybiBzdW0oeCkgLyB4Lmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyAjIGdlb21ldHJpYyBtZWFuXG4gICAgLy9cbiAgICAvLyBhIG1lYW4gZnVuY3Rpb24gdGhhdCBpcyBtb3JlIHVzZWZ1bCBmb3IgbnVtYmVycyBpbiBkaWZmZXJlbnRcbiAgICAvLyByYW5nZXMuXG4gICAgLy9cbiAgICAvLyB0aGlzIGlzIHRoZSBudGggcm9vdCBvZiB0aGUgaW5wdXQgbnVtYmVycyBtdWx0aXBsaWVkIGJ5IGVhY2ggb3RoZXJcbiAgICAvL1xuICAgIC8vIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gICAgZnVuY3Rpb24gZ2VvbWV0cmljX21lYW4oeCkge1xuICAgICAgICAvLyBUaGUgbWVhbiBvZiBubyBudW1iZXJzIGlzIG51bGxcbiAgICAgICAgaWYgKHgubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAvLyB0aGUgc3RhcnRpbmcgdmFsdWUuXG4gICAgICAgIHZhciB2YWx1ZSA9IDE7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyB0aGUgZ2VvbWV0cmljIG1lYW4gaXMgb25seSB2YWxpZCBmb3IgcG9zaXRpdmUgbnVtYmVyc1xuICAgICAgICAgICAgaWYgKHhbaV0gPD0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIC8vIHJlcGVhdGVkbHkgbXVsdGlwbHkgdGhlIHZhbHVlIGJ5IGVhY2ggbnVtYmVyXG4gICAgICAgICAgICB2YWx1ZSAqPSB4W2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE1hdGgucG93KHZhbHVlLCAxIC8geC5sZW5ndGgpO1xuICAgIH1cblxuXG4gICAgLy8gIyBoYXJtb25pYyBtZWFuXG4gICAgLy9cbiAgICAvLyBhIG1lYW4gZnVuY3Rpb24gdHlwaWNhbGx5IHVzZWQgdG8gZmluZCB0aGUgYXZlcmFnZSBvZiByYXRlc1xuICAgIC8vXG4gICAgLy8gdGhpcyBpcyB0aGUgcmVjaXByb2NhbCBvZiB0aGUgYXJpdGhtZXRpYyBtZWFuIG9mIHRoZSByZWNpcHJvY2Fsc1xuICAgIC8vIG9mIHRoZSBpbnB1dCBudW1iZXJzXG4gICAgLy9cbiAgICAvLyBUaGlzIHJ1bnMgb24gYE8obilgLCBsaW5lYXIgdGltZSBpbiByZXNwZWN0IHRvIHRoZSBhcnJheVxuICAgIGZ1bmN0aW9uIGhhcm1vbmljX21lYW4oeCkge1xuICAgICAgICAvLyBUaGUgbWVhbiBvZiBubyBudW1iZXJzIGlzIG51bGxcbiAgICAgICAgaWYgKHgubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICB2YXIgcmVjaXByb2NhbF9zdW0gPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gdGhlIGhhcm1vbmljIG1lYW4gaXMgb25seSB2YWxpZCBmb3IgcG9zaXRpdmUgbnVtYmVyc1xuICAgICAgICAgICAgaWYgKHhbaV0gPD0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIHJlY2lwcm9jYWxfc3VtICs9IDEgLyB4W2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGl2aWRlIG4gYnkgdGhlIHRoZSByZWNpcHJvY2FsIHN1bVxuICAgICAgICByZXR1cm4geC5sZW5ndGggLyByZWNpcHJvY2FsX3N1bTtcbiAgICB9XG5cblxuICAgIC8vICMgbWluXG4gICAgLy9cbiAgICAvLyBUaGlzIGlzIHNpbXBseSB0aGUgbWluaW11bSBudW1iZXIgaW4gdGhlIHNldC5cbiAgICAvL1xuICAgIC8vIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gICAgZnVuY3Rpb24gbWluKHgpIHtcbiAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24gb2YgdGhpcyBsb29wLCBtaW4gaXNcbiAgICAgICAgICAgIC8vIHVuZGVmaW5lZCBhbmQgaXMgdGh1cyBtYWRlIHRoZSBtaW5pbXVtIGVsZW1lbnQgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICBpZiAoeFtpXSA8IHZhbHVlIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHZhbHVlID0geFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLy8gIyBtYXhcbiAgICAvL1xuICAgIC8vIFRoaXMgaXMgc2ltcGx5IHRoZSBtYXhpbXVtIG51bWJlciBpbiB0aGUgc2V0LlxuICAgIC8vXG4gICAgLy8gVGhpcyBydW5zIG9uIGBPKG4pYCwgbGluZWFyIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgYXJyYXlcbiAgICBmdW5jdGlvbiBtYXgoeCkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gT24gdGhlIGZpcnN0IGl0ZXJhdGlvbiBvZiB0aGlzIGxvb3AsIG1heCBpc1xuICAgICAgICAgICAgLy8gdW5kZWZpbmVkIGFuZCBpcyB0aHVzIG1hZGUgdGhlIG1heGltdW0gZWxlbWVudCBpbiB0aGUgYXJyYXlcbiAgICAgICAgICAgIGlmICh4W2ldID4gdmFsdWUgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgdmFsdWUgPSB4W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyAjIFt2YXJpYW5jZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9WYXJpYW5jZSlcbiAgICAvL1xuICAgIC8vIGlzIHRoZSBzdW0gb2Ygc3F1YXJlZCBkZXZpYXRpb25zIGZyb20gdGhlIG1lYW5cbiAgICAvL1xuICAgIC8vIGRlcGVuZHMgb24gYG1lYW4oKWBcbiAgICBmdW5jdGlvbiB2YXJpYW5jZSh4KSB7XG4gICAgICAgIC8vIFRoZSB2YXJpYW5jZSBvZiBubyBudW1iZXJzIGlzIG51bGxcbiAgICAgICAgaWYgKHgubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICB2YXIgbWVhbl92YWx1ZSA9IG1lYW4oeCksXG4gICAgICAgICAgICBkZXZpYXRpb25zID0gW107XG5cbiAgICAgICAgLy8gTWFrZSBhIGxpc3Qgb2Ygc3F1YXJlZCBkZXZpYXRpb25zIGZyb20gdGhlIG1lYW4uXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGV2aWF0aW9ucy5wdXNoKE1hdGgucG93KHhbaV0gLSBtZWFuX3ZhbHVlLCAyKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaW5kIHRoZSBtZWFuIHZhbHVlIG9mIHRoYXQgbGlzdFxuICAgICAgICByZXR1cm4gbWVhbihkZXZpYXRpb25zKTtcbiAgICB9XG5cbiAgICAvLyAjIFtzdGFuZGFyZCBkZXZpYXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3RhbmRhcmRfZGV2aWF0aW9uKVxuICAgIC8vXG4gICAgLy8gaXMganVzdCB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIHZhcmlhbmNlLlxuICAgIC8vXG4gICAgLy8gZGVwZW5kcyBvbiBgdmFyaWFuY2UoKWBcbiAgICBmdW5jdGlvbiBzdGFuZGFyZF9kZXZpYXRpb24oeCkge1xuICAgICAgICAvLyBUaGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodmFyaWFuY2UoeCkpO1xuICAgIH1cblxuICAgIC8vIFRoZSBzdW0gb2YgZGV2aWF0aW9ucyB0byB0aGUgTnRoIHBvd2VyLlxuICAgIC8vIFdoZW4gbj0yIGl0J3MgdGhlIHN1bSBvZiBzcXVhcmVkIGRldmlhdGlvbnMuXG4gICAgLy8gV2hlbiBuPTMgaXQncyB0aGUgc3VtIG9mIGN1YmVkIGRldmlhdGlvbnMuXG4gICAgLy9cbiAgICAvLyBkZXBlbmRzIG9uIGBtZWFuKClgXG4gICAgZnVuY3Rpb24gc3VtX250aF9wb3dlcl9kZXZpYXRpb25zKHgsIG4pIHtcbiAgICAgICAgdmFyIG1lYW5fdmFsdWUgPSBtZWFuKHgpLFxuICAgICAgICAgICAgc3VtID0gMDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN1bSArPSBNYXRoLnBvdyh4W2ldIC0gbWVhbl92YWx1ZSwgbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VtO1xuICAgIH1cblxuICAgIC8vICMgW3ZhcmlhbmNlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1ZhcmlhbmNlKVxuICAgIC8vXG4gICAgLy8gaXMgdGhlIHN1bSBvZiBzcXVhcmVkIGRldmlhdGlvbnMgZnJvbSB0aGUgbWVhblxuICAgIC8vXG4gICAgLy8gZGVwZW5kcyBvbiBgc3VtX250aF9wb3dlcl9kZXZpYXRpb25zYFxuICAgIGZ1bmN0aW9uIHNhbXBsZV92YXJpYW5jZSh4KSB7XG4gICAgICAgIC8vIFRoZSB2YXJpYW5jZSBvZiBubyBudW1iZXJzIGlzIG51bGxcbiAgICAgICAgaWYgKHgubGVuZ3RoIDw9IDEpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciBzdW1fc3F1YXJlZF9kZXZpYXRpb25zX3ZhbHVlID0gc3VtX250aF9wb3dlcl9kZXZpYXRpb25zKHgsIDIpO1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIG1lYW4gdmFsdWUgb2YgdGhhdCBsaXN0XG4gICAgICAgIHJldHVybiBzdW1fc3F1YXJlZF9kZXZpYXRpb25zX3ZhbHVlIC8gKHgubGVuZ3RoIC0gMSk7XG4gICAgfVxuXG4gICAgLy8gIyBbc3RhbmRhcmQgZGV2aWF0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0YW5kYXJkX2RldmlhdGlvbilcbiAgICAvL1xuICAgIC8vIGlzIGp1c3QgdGhlIHNxdWFyZSByb290IG9mIHRoZSB2YXJpYW5jZS5cbiAgICAvL1xuICAgIC8vIGRlcGVuZHMgb24gYHNhbXBsZV92YXJpYW5jZSgpYFxuICAgIGZ1bmN0aW9uIHNhbXBsZV9zdGFuZGFyZF9kZXZpYXRpb24oeCkge1xuICAgICAgICAvLyBUaGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgICAgICBpZiAoeC5sZW5ndGggPD0gMSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChzYW1wbGVfdmFyaWFuY2UoeCkpO1xuICAgIH1cblxuICAgIC8vICMgW2NvdmFyaWFuY2VdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ292YXJpYW5jZSlcbiAgICAvL1xuICAgIC8vIHNhbXBsZSBjb3ZhcmlhbmNlIG9mIHR3byBkYXRhc2V0czpcbiAgICAvLyBob3cgbXVjaCBkbyB0aGUgdHdvIGRhdGFzZXRzIG1vdmUgdG9nZXRoZXI/XG4gICAgLy8geCBhbmQgeSBhcmUgdHdvIGRhdGFzZXRzLCByZXByZXNlbnRlZCBhcyBhcnJheXMgb2YgbnVtYmVycy5cbiAgICAvL1xuICAgIC8vIGRlcGVuZHMgb24gYG1lYW4oKWBcbiAgICBmdW5jdGlvbiBzYW1wbGVfY292YXJpYW5jZSh4LCB5KSB7XG5cbiAgICAgICAgLy8gVGhlIHR3byBkYXRhc2V0cyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoIHdoaWNoIG11c3QgYmUgbW9yZSB0aGFuIDFcbiAgICAgICAgaWYgKHgubGVuZ3RoIDw9IDEgfHwgeC5sZW5ndGggIT0geS5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIG1lYW4gb2YgZWFjaCBkYXRhc2V0IHNvIHRoYXQgd2UgY2FuIGp1ZGdlIGVhY2hcbiAgICAgICAgLy8gdmFsdWUgb2YgdGhlIGRhdGFzZXQgZmFpcmx5IGFzIHRoZSBkaWZmZXJlbmNlIGZyb20gdGhlIG1lYW4uIHRoaXNcbiAgICAgICAgLy8gd2F5LCBpZiBvbmUgZGF0YXNldCBpcyBbMSwgMiwgM10gYW5kIFsyLCAzLCA0XSwgdGhlaXIgY292YXJpYW5jZVxuICAgICAgICAvLyBkb2VzIG5vdCBzdWZmZXIgYmVjYXVzZSBvZiB0aGUgZGlmZmVyZW5jZSBpbiBhYnNvbHV0ZSB2YWx1ZXNcbiAgICAgICAgdmFyIHhtZWFuID0gbWVhbih4KSxcbiAgICAgICAgICAgIHltZWFuID0gbWVhbih5KSxcbiAgICAgICAgICAgIHN1bSA9IDA7XG5cbiAgICAgICAgLy8gZm9yIGVhY2ggcGFpciBvZiB2YWx1ZXMsIHRoZSBjb3ZhcmlhbmNlIGluY3JlYXNlcyB3aGVuIHRoZWlyXG4gICAgICAgIC8vIGRpZmZlcmVuY2UgZnJvbSB0aGUgbWVhbiBpcyBhc3NvY2lhdGVkIC0gaWYgYm90aCBhcmUgd2VsbCBhYm92ZVxuICAgICAgICAvLyBvciBpZiBib3RoIGFyZSB3ZWxsIGJlbG93XG4gICAgICAgIC8vIHRoZSBtZWFuLCB0aGUgY292YXJpYW5jZSBpbmNyZWFzZXMgc2lnbmlmaWNhbnRseS5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHN1bSArPSAoeFtpXSAtIHhtZWFuKSAqICh5W2ldIC0geW1lYW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlIGNvdmFyaWFuY2UgaXMgd2VpZ2h0ZWQgYnkgdGhlIGxlbmd0aCBvZiB0aGUgZGF0YXNldHMuXG4gICAgICAgIHJldHVybiBzdW0gLyAoeC5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICAvLyAjIFtjb3JyZWxhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db3JyZWxhdGlvbl9hbmRfZGVwZW5kZW5jZSlcbiAgICAvL1xuICAgIC8vIEdldHMgYSBtZWFzdXJlIG9mIGhvdyBjb3JyZWxhdGVkIHR3byBkYXRhc2V0cyBhcmUsIGJldHdlZW4gLTEgYW5kIDFcbiAgICAvL1xuICAgIC8vIGRlcGVuZHMgb24gYHNhbXBsZV9zdGFuZGFyZF9kZXZpYXRpb24oKWAgYW5kIGBzYW1wbGVfY292YXJpYW5jZSgpYFxuICAgIGZ1bmN0aW9uIHNhbXBsZV9jb3JyZWxhdGlvbih4LCB5KSB7XG4gICAgICAgIHZhciBjb3YgPSBzYW1wbGVfY292YXJpYW5jZSh4LCB5KSxcbiAgICAgICAgICAgIHhzdGQgPSBzYW1wbGVfc3RhbmRhcmRfZGV2aWF0aW9uKHgpLFxuICAgICAgICAgICAgeXN0ZCA9IHNhbXBsZV9zdGFuZGFyZF9kZXZpYXRpb24oeSk7XG5cbiAgICAgICAgaWYgKGNvdiA9PT0gbnVsbCB8fCB4c3RkID09PSBudWxsIHx8IHlzdGQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvdiAvIHhzdGQgLyB5c3RkO1xuICAgIH1cblxuICAgIC8vICMgW21lZGlhbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NZWRpYW4pXG4gICAgLy9cbiAgICAvLyBUaGUgbWlkZGxlIG51bWJlciBvZiBhIGxpc3QuIFRoaXMgaXMgb2Z0ZW4gYSBnb29kIGluZGljYXRvciBvZiAndGhlIG1pZGRsZSdcbiAgICAvLyB3aGVuIHRoZXJlIGFyZSBvdXRsaWVycyB0aGF0IHNrZXcgdGhlIGBtZWFuKClgIHZhbHVlLlxuICAgIGZ1bmN0aW9uIG1lZGlhbih4KSB7XG4gICAgICAgIC8vIFRoZSBtZWRpYW4gb2YgYW4gZW1wdHkgbGlzdCBpcyBudWxsXG4gICAgICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgLy8gU29ydGluZyB0aGUgYXJyYXkgbWFrZXMgaXQgZWFzeSB0byBmaW5kIHRoZSBjZW50ZXIsIGJ1dFxuICAgICAgICAvLyB1c2UgYC5zbGljZSgpYCB0byBlbnN1cmUgdGhlIG9yaWdpbmFsIGFycmF5IGB4YCBpcyBub3QgbW9kaWZpZWRcbiAgICAgICAgdmFyIHNvcnRlZCA9IHguc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG5cbiAgICAgICAgLy8gSWYgdGhlIGxlbmd0aCBvZiB0aGUgbGlzdCBpcyBvZGQsIGl0J3MgdGhlIGNlbnRyYWwgbnVtYmVyXG4gICAgICAgIGlmIChzb3J0ZWQubGVuZ3RoICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHNvcnRlZFsoc29ydGVkLmxlbmd0aCAtIDEpIC8gMl07XG4gICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIG1lZGlhbiBpcyB0aGUgYXZlcmFnZSBvZiB0aGUgdHdvIG51bWJlcnNcbiAgICAgICAgLy8gYXQgdGhlIGNlbnRlciBvZiB0aGUgbGlzdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGEgPSBzb3J0ZWRbKHNvcnRlZC5sZW5ndGggLyAyKSAtIDFdO1xuICAgICAgICAgICAgdmFyIGIgPSBzb3J0ZWRbKHNvcnRlZC5sZW5ndGggLyAyKV07XG4gICAgICAgICAgICByZXR1cm4gKGEgKyBiKSAvIDI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIFttb2RlXShodHRwOi8vYml0Lmx5L1c1SzRZdClcbiAgICAvL1xuICAgIC8vIFRoZSBtb2RlIGlzIHRoZSBudW1iZXIgdGhhdCBhcHBlYXJzIGluIGEgbGlzdCB0aGUgaGlnaGVzdCBudW1iZXIgb2YgdGltZXMuXG4gICAgLy8gVGhlcmUgY2FuIGJlIG11bHRpcGxlIG1vZGVzIGluIGEgbGlzdDogaW4gdGhlIGV2ZW50IG9mIGEgdGllLCB0aGlzXG4gICAgLy8gYWxnb3JpdGhtIHdpbGwgcmV0dXJuIHRoZSBtb3N0IHJlY2VudGx5IHNlZW4gbW9kZS5cbiAgICAvL1xuICAgIC8vIFRoaXMgaW1wbGVtZW50YXRpb24gaXMgaW5zcGlyZWQgYnkgW3NjaWVuY2UuanNdKGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNvbmRhdmllcy9zY2llbmNlLmpzL2Jsb2IvbWFzdGVyL3NyYy9zdGF0cy9tb2RlLmpzKVxuICAgIC8vXG4gICAgLy8gVGhpcyBydW5zIG9uIGBPKG4pYCwgbGluZWFyIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgYXJyYXlcbiAgICBmdW5jdGlvbiBtb2RlKHgpIHtcblxuICAgICAgICAvLyBIYW5kbGUgZWRnZSBjYXNlczpcbiAgICAgICAgLy8gVGhlIG1lZGlhbiBvZiBhbiBlbXB0eSBsaXN0IGlzIG51bGxcbiAgICAgICAgaWYgKHgubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICAgICAgZWxzZSBpZiAoeC5sZW5ndGggPT09IDEpIHJldHVybiB4WzBdO1xuXG4gICAgICAgIC8vIFNvcnRpbmcgdGhlIGFycmF5IGxldHMgdXMgaXRlcmF0ZSB0aHJvdWdoIGl0IGJlbG93IGFuZCBiZSBzdXJlXG4gICAgICAgIC8vIHRoYXQgZXZlcnkgdGltZSB3ZSBzZWUgYSBuZXcgbnVtYmVyIGl0J3MgbmV3IGFuZCB3ZSdsbCBuZXZlclxuICAgICAgICAvLyBzZWUgdGhlIHNhbWUgbnVtYmVyIHR3aWNlXG4gICAgICAgIHZhciBzb3J0ZWQgPSB4LnNsaWNlKCkuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSAtIGI7IH0pO1xuXG4gICAgICAgIC8vIFRoaXMgYXNzdW1lcyBpdCBpcyBkZWFsaW5nIHdpdGggYW4gYXJyYXkgb2Ygc2l6ZSA+IDEsIHNpbmNlIHNpemVcbiAgICAgICAgLy8gMCBhbmQgMSBhcmUgaGFuZGxlZCBpbW1lZGlhdGVseS4gSGVuY2UgaXQgc3RhcnRzIGF0IGluZGV4IDEgaW4gdGhlXG4gICAgICAgIC8vIGFycmF5LlxuICAgICAgICB2YXIgbGFzdCA9IHNvcnRlZFswXSxcbiAgICAgICAgICAgIC8vIHN0b3JlIHRoZSBtb2RlIGFzIHdlIGZpbmQgbmV3IG1vZGVzXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIC8vIHN0b3JlIGhvdyBtYW55IHRpbWVzIHdlJ3ZlIHNlZW4gdGhlIG1vZGVcbiAgICAgICAgICAgIG1heF9zZWVuID0gMCxcbiAgICAgICAgICAgIC8vIGhvdyBtYW55IHRpbWVzIHRoZSBjdXJyZW50IGNhbmRpZGF0ZSBmb3IgdGhlIG1vZGVcbiAgICAgICAgICAgIC8vIGhhcyBiZWVuIHNlZW5cbiAgICAgICAgICAgIHNlZW5fdGhpcyA9IDE7XG5cbiAgICAgICAgLy8gZW5kIGF0IHNvcnRlZC5sZW5ndGggKyAxIHRvIGZpeCB0aGUgY2FzZSBpbiB3aGljaCB0aGUgbW9kZSBpc1xuICAgICAgICAvLyB0aGUgaGlnaGVzdCBudW1iZXIgdGhhdCBvY2N1cnMgaW4gdGhlIHNlcXVlbmNlLiB0aGUgbGFzdCBpdGVyYXRpb25cbiAgICAgICAgLy8gY29tcGFyZXMgc29ydGVkW2ldLCB3aGljaCBpcyB1bmRlZmluZWQsIHRvIHRoZSBoaWdoZXN0IG51bWJlclxuICAgICAgICAvLyBpbiB0aGUgc2VyaWVzXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc29ydGVkLmxlbmd0aCArIDE7IGkrKykge1xuICAgICAgICAgICAgLy8gd2UncmUgc2VlaW5nIGEgbmV3IG51bWJlciBwYXNzIGJ5XG4gICAgICAgICAgICBpZiAoc29ydGVkW2ldICE9PSBsYXN0KSB7XG4gICAgICAgICAgICAgICAgLy8gdGhlIGxhc3QgbnVtYmVyIGlzIHRoZSBuZXcgbW9kZSBzaW5jZSB3ZSBzYXcgaXQgbW9yZVxuICAgICAgICAgICAgICAgIC8vIG9mdGVuIHRoYW4gdGhlIG9sZCBvbmVcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbl90aGlzID4gbWF4X3NlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4X3NlZW4gPSBzZWVuX3RoaXM7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbGFzdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Vlbl90aGlzID0gMTtcbiAgICAgICAgICAgICAgICBsYXN0ID0gc29ydGVkW2ldO1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBpc24ndCBhIG5ldyBudW1iZXIsIGl0J3Mgb25lIG1vcmUgb2NjdXJyZW5jZSBvZlxuICAgICAgICAgICAgLy8gdGhlIHBvdGVudGlhbCBtb2RlXG4gICAgICAgICAgICB9IGVsc2UgeyBzZWVuX3RoaXMrKzsgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyAjIFt0LXRlc3RdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3R1ZGVudCdzX3QtdGVzdClcbiAgICAvL1xuICAgIC8vIFRoaXMgaXMgdG8gY29tcHV0ZSBhIG9uZS1zYW1wbGUgdC10ZXN0LCBjb21wYXJpbmcgdGhlIG1lYW5cbiAgICAvLyBvZiBhIHNhbXBsZSB0byBhIGtub3duIHZhbHVlLCB4LlxuICAgIC8vXG4gICAgLy8gaW4gdGhpcyBjYXNlLCB3ZSdyZSB0cnlpbmcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlXG4gICAgLy8gcG9wdWxhdGlvbiBtZWFuIGlzIGVxdWFsIHRvIHRoZSB2YWx1ZSB0aGF0IHdlIGtub3csIHdoaWNoIGlzIGB4YFxuICAgIC8vIGhlcmUuIHVzdWFsbHkgdGhlIHJlc3VsdHMgaGVyZSBhcmUgdXNlZCB0byBsb29rIHVwIGFcbiAgICAvLyBbcC12YWx1ZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QLXZhbHVlKSwgd2hpY2gsIGZvclxuICAgIC8vIGEgY2VydGFpbiBsZXZlbCBvZiBzaWduaWZpY2FuY2UsIHdpbGwgbGV0IHlvdSBkZXRlcm1pbmUgdGhhdCB0aGVcbiAgICAvLyBudWxsIGh5cG90aGVzaXMgY2FuIG9yIGNhbm5vdCBiZSByZWplY3RlZC5cbiAgICAvL1xuICAgIC8vIERlcGVuZHMgb24gYHN0YW5kYXJkX2RldmlhdGlvbigpYCBhbmQgYG1lYW4oKWBcbiAgICBmdW5jdGlvbiB0X3Rlc3Qoc2FtcGxlLCB4KSB7XG4gICAgICAgIC8vIFRoZSBtZWFuIG9mIHRoZSBzYW1wbGVcbiAgICAgICAgdmFyIHNhbXBsZV9tZWFuID0gbWVhbihzYW1wbGUpO1xuXG4gICAgICAgIC8vIFRoZSBzdGFuZGFyZCBkZXZpYXRpb24gb2YgdGhlIHNhbXBsZVxuICAgICAgICB2YXIgc2QgPSBzdGFuZGFyZF9kZXZpYXRpb24oc2FtcGxlKTtcblxuICAgICAgICAvLyBTcXVhcmUgcm9vdCB0aGUgbGVuZ3RoIG9mIHRoZSBzYW1wbGVcbiAgICAgICAgdmFyIHJvb3ROID0gTWF0aC5zcXJ0KHNhbXBsZS5sZW5ndGgpO1xuXG4gICAgICAgIC8vIENvbXB1dGUgdGhlIGtub3duIHZhbHVlIGFnYWluc3QgdGhlIHNhbXBsZSxcbiAgICAgICAgLy8gcmV0dXJuaW5nIHRoZSB0IHZhbHVlXG4gICAgICAgIHJldHVybiAoc2FtcGxlX21lYW4gLSB4KSAvIChzZCAvIHJvb3ROKTtcbiAgICB9XG5cbiAgICAvLyAjIFsyLXNhbXBsZSB0LXRlc3RdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3R1ZGVudCdzX3QtdGVzdClcbiAgICAvL1xuICAgIC8vIFRoaXMgaXMgdG8gY29tcHV0ZSB0d28gc2FtcGxlIHQtdGVzdC5cbiAgICAvLyBUZXN0cyB3aGV0aGVyIFwibWVhbihYKS1tZWFuKFkpID0gZGlmZmVyZW5jZVwiLCAoXG4gICAgLy8gaW4gdGhlIG1vc3QgY29tbW9uIGNhc2UsIHdlIG9mdGVuIGhhdmUgYGRpZmZlcmVuY2UgPT0gMGAgdG8gdGVzdCBpZiB0d28gc2FtcGxlc1xuICAgIC8vIGFyZSBsaWtlbHkgdG8gYmUgdGFrZW4gZnJvbSBwb3B1bGF0aW9ucyB3aXRoIHRoZSBzYW1lIG1lYW4gdmFsdWUpIHdpdGhcbiAgICAvLyBubyBwcmlvciBrbm93bGVkZ2Ugb24gc3RhbmRhcmQgZGV2aWF0aW9ucyBvZiBib3RoIHNhbXBsZXNcbiAgICAvLyBvdGhlciB0aGFuIHRoZSBmYWN0IHRoYXQgdGhleSBoYXZlIHRoZSBzYW1lIHN0YW5kYXJkIGRldmlhdGlvbi5cbiAgICAvL1xuICAgIC8vIFVzdWFsbHkgdGhlIHJlc3VsdHMgaGVyZSBhcmUgdXNlZCB0byBsb29rIHVwIGFcbiAgICAvLyBbcC12YWx1ZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QLXZhbHVlKSwgd2hpY2gsIGZvclxuICAgIC8vIGEgY2VydGFpbiBsZXZlbCBvZiBzaWduaWZpY2FuY2UsIHdpbGwgbGV0IHlvdSBkZXRlcm1pbmUgdGhhdCB0aGVcbiAgICAvLyBudWxsIGh5cG90aGVzaXMgY2FuIG9yIGNhbm5vdCBiZSByZWplY3RlZC5cbiAgICAvL1xuICAgIC8vIGBkaWZmYCBjYW4gYmUgb21pdHRlZCBpZiBpdCBlcXVhbHMgMC5cbiAgICAvL1xuICAgIC8vIFtUaGlzIGlzIHVzZWQgdG8gY29uZmlybSBvciBkZW55XShodHRwOi8vd3d3Lm1vbmFyY2hsYWIub3JnL0xhYi9SZXNlYXJjaC9TdGF0cy8yU2FtcGxlVC5hc3B4KVxuICAgIC8vIGEgbnVsbCBoeXBvdGhlc2lzIHRoYXQgdGhlIHR3byBwb3B1bGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzYW1wbGVkIGludG9cbiAgICAvLyBgc2FtcGxlX3hgIGFuZCBgc2FtcGxlX3lgIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLlxuICAgIC8vXG4gICAgLy8gRGVwZW5kcyBvbiBgc2FtcGxlX3ZhcmlhbmNlKClgIGFuZCBgbWVhbigpYFxuICAgIGZ1bmN0aW9uIHRfdGVzdF90d29fc2FtcGxlKHNhbXBsZV94LCBzYW1wbGVfeSwgZGlmZmVyZW5jZSkge1xuICAgICAgICB2YXIgbiA9IHNhbXBsZV94Lmxlbmd0aCxcbiAgICAgICAgICAgIG0gPSBzYW1wbGVfeS5sZW5ndGg7XG5cbiAgICAgICAgLy8gSWYgZWl0aGVyIHNhbXBsZSBkb2Vzbid0IGFjdHVhbGx5IGhhdmUgYW55IHZhbHVlcywgd2UgY2FuJ3RcbiAgICAgICAgLy8gY29tcHV0ZSB0aGlzIGF0IGFsbCwgc28gd2UgcmV0dXJuIGBudWxsYC5cbiAgICAgICAgaWYgKCFuIHx8ICFtKSByZXR1cm4gbnVsbCA7XG5cbiAgICAgICAgLy8gZGVmYXVsdCBkaWZmZXJlbmNlIChtdSkgaXMgemVyb1xuICAgICAgICBpZiAoIWRpZmZlcmVuY2UpIGRpZmZlcmVuY2UgPSAwO1xuXG4gICAgICAgIHZhciBtZWFuWCA9IG1lYW4oc2FtcGxlX3gpLFxuICAgICAgICAgICAgbWVhblkgPSBtZWFuKHNhbXBsZV95KTtcblxuICAgICAgICB2YXIgd2VpZ2h0ZWRWYXJpYW5jZSA9ICgobiAtIDEpICogc2FtcGxlX3ZhcmlhbmNlKHNhbXBsZV94KSArXG4gICAgICAgICAgICAobSAtIDEpICogc2FtcGxlX3ZhcmlhbmNlKHNhbXBsZV95KSkgLyAobiArIG0gLSAyKTtcblxuICAgICAgICByZXR1cm4gKG1lYW5YIC0gbWVhblkgLSBkaWZmZXJlbmNlKSAvXG4gICAgICAgICAgICBNYXRoLnNxcnQod2VpZ2h0ZWRWYXJpYW5jZSAqICgxIC8gbiArIDEgLyBtKSk7XG4gICAgfVxuXG4gICAgLy8gIyBxdWFudGlsZVxuICAgIC8vXG4gICAgLy8gVGhpcyBpcyBhIHBvcHVsYXRpb24gcXVhbnRpbGUsIHNpbmNlIHdlIGFzc3VtZSB0byBrbm93IHRoZSBlbnRpcmVcbiAgICAvLyBkYXRhc2V0IGluIHRoaXMgbGlicmFyeS4gVGh1cyBJJ20gdHJ5aW5nIHRvIGZvbGxvdyB0aGVcbiAgICAvLyBbUXVhbnRpbGVzIG9mIGEgUG9wdWxhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWFudGlsZSNRdWFudGlsZXNfb2ZfYV9wb3B1bGF0aW9uKVxuICAgIC8vIGFsZ29yaXRobSBmcm9tIHdpa2lwZWRpYS5cbiAgICAvL1xuICAgIC8vIFNhbXBsZSBpcyBhIG9uZS1kaW1lbnNpb25hbCBhcnJheSBvZiBudW1iZXJzLFxuICAgIC8vIGFuZCBwIGlzIGVpdGhlciBhIGRlY2ltYWwgbnVtYmVyIGZyb20gMCB0byAxIG9yIGFuIGFycmF5IG9mIGRlY2ltYWxcbiAgICAvLyBudW1iZXJzIGZyb20gMCB0byAxLlxuICAgIC8vIEluIHRlcm1zIG9mIGEgay9xIHF1YW50aWxlLCBwID0gay9xIC0gaXQncyBqdXN0IGRlYWxpbmcgd2l0aCBmcmFjdGlvbnMgb3IgZGVhbGluZ1xuICAgIC8vIHdpdGggZGVjaW1hbCB2YWx1ZXMuXG4gICAgLy8gV2hlbiBwIGlzIGFuIGFycmF5LCB0aGUgcmVzdWx0IG9mIHRoZSBmdW5jdGlvbiBpcyBhbHNvIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGFwcHJvcHJpYXRlXG4gICAgLy8gcXVhbnRpbGVzIGluIGlucHV0IG9yZGVyXG4gICAgZnVuY3Rpb24gcXVhbnRpbGUoc2FtcGxlLCBwKSB7XG5cbiAgICAgICAgLy8gV2UgY2FuJ3QgZGVyaXZlIHF1YW50aWxlcyBmcm9tIGFuIGVtcHR5IGxpc3RcbiAgICAgICAgaWYgKHNhbXBsZS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIC8vIFNvcnQgYSBjb3B5IG9mIHRoZSBhcnJheS4gV2UnbGwgbmVlZCBhIHNvcnRlZCBhcnJheSB0byBpbmRleFxuICAgICAgICAvLyB0aGUgdmFsdWVzIGluIHNvcnRlZCBvcmRlci5cbiAgICAgICAgdmFyIHNvcnRlZCA9IHNhbXBsZS5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgLSBiOyB9KTtcblxuICAgICAgICBpZiAocC5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc3VsdCBhcnJheVxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIC8vIEZvciBlYWNoIHJlcXVlc3RlZCBxdWFudGlsZVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHF1YW50aWxlX3NvcnRlZChzb3J0ZWQsIHBbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcXVhbnRpbGVfc29ydGVkKHNvcnRlZCwgcCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIHF1YW50aWxlXG4gICAgLy9cbiAgICAvLyBUaGlzIGlzIHRoZSBpbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiBxdWFudGlsZXM6IHdoZW4geW91IGtub3dcbiAgICAvLyB0aGF0IHRoZSBvcmRlciBpcyBzb3J0ZWQsIHlvdSBkb24ndCBuZWVkIHRvIHJlLXNvcnQgaXQsIGFuZCB0aGUgY29tcHV0YXRpb25zXG4gICAgLy8gYXJlIG11Y2ggZmFzdGVyLlxuICAgIGZ1bmN0aW9uIHF1YW50aWxlX3NvcnRlZChzYW1wbGUsIHApIHtcbiAgICAgICAgdmFyIGlkeCA9IChzYW1wbGUubGVuZ3RoKSAqIHA7XG4gICAgICAgIGlmIChwIDwgMCB8fCBwID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAocCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gSWYgcCBpcyAxLCBkaXJlY3RseSByZXR1cm4gdGhlIGxhc3QgZWxlbWVudFxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZVtzYW1wbGUubGVuZ3RoIC0gMV07XG4gICAgICAgIH0gZWxzZSBpZiAocCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gSWYgcCBpcyAwLCBkaXJlY3RseSByZXR1cm4gdGhlIGZpcnN0IGVsZW1lbnRcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVbMF07XG4gICAgICAgIH0gZWxzZSBpZiAoaWR4ICUgMSAhPT0gMCkge1xuICAgICAgICAgICAgLy8gSWYgcCBpcyBub3QgaW50ZWdlciwgcmV0dXJuIHRoZSBuZXh0IGVsZW1lbnQgaW4gYXJyYXlcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVbTWF0aC5jZWlsKGlkeCkgLSAxXTtcbiAgICAgICAgfSBlbHNlIGlmIChzYW1wbGUubGVuZ3RoICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGxpc3QgaGFzIGV2ZW4tbGVuZ3RoLCB3ZSdsbCB0YWtlIHRoZSBhdmVyYWdlIG9mIHRoaXMgbnVtYmVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlIG5leHQgdmFsdWUsIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgcmV0dXJuIChzYW1wbGVbaWR4IC0gMV0gKyBzYW1wbGVbaWR4XSkgLyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgaW4gdGhlIHNpbXBsZSBjYXNlIG9mIGFuIGludGVnZXIgdmFsdWVcbiAgICAgICAgICAgIC8vIHdpdGggYW4gb2RkLWxlbmd0aCBsaXN0LCByZXR1cm4gdGhlIHNhbXBsZSB2YWx1ZSBhdCB0aGUgaW5kZXguXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlW2lkeF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIFtJbnRlcnF1YXJ0aWxlIHJhbmdlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0ludGVycXVhcnRpbGVfcmFuZ2UpXG4gICAgLy9cbiAgICAvLyBBIG1lYXN1cmUgb2Ygc3RhdGlzdGljYWwgZGlzcGVyc2lvbiwgb3IgaG93IHNjYXR0ZXJlZCwgc3ByZWFkLCBvclxuICAgIC8vIGNvbmNlbnRyYXRlZCBhIGRpc3RyaWJ1dGlvbiBpcy4gSXQncyBjb21wdXRlZCBhcyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuXG4gICAgLy8gdGhlIHRoaXJkIHF1YXJ0aWxlIGFuZCBmaXJzdCBxdWFydGlsZS5cbiAgICBmdW5jdGlvbiBpcXIoc2FtcGxlKSB7XG4gICAgICAgIC8vIFdlIGNhbid0IGRlcml2ZSBxdWFudGlsZXMgZnJvbSBhbiBlbXB0eSBsaXN0XG4gICAgICAgIGlmIChzYW1wbGUubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAvLyBJbnRlcnF1YXJ0aWxlIHJhbmdlIGlzIHRoZSBzcGFuIGJldHdlZW4gdGhlIHVwcGVyIHF1YXJ0aWxlLFxuICAgICAgICAvLyBhdCBgMC43NWAsIGFuZCBsb3dlciBxdWFydGlsZSwgYDAuMjVgXG4gICAgICAgIHJldHVybiBxdWFudGlsZShzYW1wbGUsIDAuNzUpIC0gcXVhbnRpbGUoc2FtcGxlLCAwLjI1KTtcbiAgICB9XG5cbiAgICAvLyAjIFtNZWRpYW4gQWJzb2x1dGUgRGV2aWF0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01lZGlhbl9hYnNvbHV0ZV9kZXZpYXRpb24pXG4gICAgLy9cbiAgICAvLyBUaGUgTWVkaWFuIEFic29sdXRlIERldmlhdGlvbiAoTUFEKSBpcyBhIHJvYnVzdCBtZWFzdXJlIG9mIHN0YXRpc3RpY2FsXG4gICAgLy8gZGlzcGVyc2lvbi4gSXQgaXMgbW9yZSByZXNpbGllbnQgdG8gb3V0bGllcnMgdGhhbiB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uLlxuICAgIGZ1bmN0aW9uIG1hZCh4KSB7XG4gICAgICAgIC8vIFRoZSBtYWQgb2Ygbm90aGluZyBpcyBudWxsXG4gICAgICAgIGlmICgheCB8fCB4Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIG1lZGlhbl92YWx1ZSA9IG1lZGlhbih4KSxcbiAgICAgICAgICAgIG1lZGlhbl9hYnNvbHV0ZV9kZXZpYXRpb25zID0gW107XG5cbiAgICAgICAgLy8gTWFrZSBhIGxpc3Qgb2YgYWJzb2x1dGUgZGV2aWF0aW9ucyBmcm9tIHRoZSBtZWRpYW5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtZWRpYW5fYWJzb2x1dGVfZGV2aWF0aW9ucy5wdXNoKE1hdGguYWJzKHhbaV0gLSBtZWRpYW5fdmFsdWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmQgdGhlIG1lZGlhbiB2YWx1ZSBvZiB0aGF0IGxpc3RcbiAgICAgICAgcmV0dXJuIG1lZGlhbihtZWRpYW5fYWJzb2x1dGVfZGV2aWF0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gIyMgQ29tcHV0ZSBNYXRyaWNlcyBmb3IgSmVua3NcbiAgICAvL1xuICAgIC8vIENvbXB1dGUgdGhlIG1hdHJpY2VzIHJlcXVpcmVkIGZvciBKZW5rcyBicmVha3MuIFRoZXNlIG1hdHJpY2VzXG4gICAgLy8gY2FuIGJlIHVzZWQgZm9yIGFueSBjbGFzc2luZyBvZiBkYXRhIHdpdGggYGNsYXNzZXMgPD0gbl9jbGFzc2VzYFxuICAgIGZ1bmN0aW9uIGplbmtzTWF0cmljZXMoZGF0YSwgbl9jbGFzc2VzKSB7XG5cbiAgICAgICAgLy8gaW4gdGhlIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uLCB0aGVzZSBtYXRyaWNlcyBhcmUgcmVmZXJyZWQgdG9cbiAgICAgICAgLy8gYXMgYExDYCBhbmQgYE9QYFxuICAgICAgICAvL1xuICAgICAgICAvLyAqIGxvd2VyX2NsYXNzX2xpbWl0cyAoTEMpOiBvcHRpbWFsIGxvd2VyIGNsYXNzIGxpbWl0c1xuICAgICAgICAvLyAqIHZhcmlhbmNlX2NvbWJpbmF0aW9ucyAoT1ApOiBvcHRpbWFsIHZhcmlhbmNlIGNvbWJpbmF0aW9ucyBmb3IgYWxsIGNsYXNzZXNcbiAgICAgICAgdmFyIGxvd2VyX2NsYXNzX2xpbWl0cyA9IFtdLFxuICAgICAgICAgICAgdmFyaWFuY2VfY29tYmluYXRpb25zID0gW10sXG4gICAgICAgICAgICAvLyBsb29wIGNvdW50ZXJzXG4gICAgICAgICAgICBpLCBqLFxuICAgICAgICAgICAgLy8gdGhlIHZhcmlhbmNlLCBhcyBjb21wdXRlZCBhdCBlYWNoIHN0ZXAgaW4gdGhlIGNhbGN1bGF0aW9uXG4gICAgICAgICAgICB2YXJpYW5jZSA9IDA7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhbmQgZmlsbCBlYWNoIG1hdHJpeCB3aXRoIHplcm9lc1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGggKyAxOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0bXAxID0gW10sIHRtcDIgPSBbXTtcbiAgICAgICAgICAgIC8vIGRlc3BpdGUgdGhlc2UgYXJyYXlzIGhhdmluZyB0aGUgc2FtZSB2YWx1ZXMsIHdlIG5lZWRcbiAgICAgICAgICAgIC8vIHRvIGtlZXAgdGhlbSBzZXBhcmF0ZSBzbyB0aGF0IGNoYW5naW5nIG9uZSBkb2VzIG5vdCBjaGFuZ2VcbiAgICAgICAgICAgIC8vIHRoZSBvdGhlclxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IG5fY2xhc3NlcyArIDE7IGorKykge1xuICAgICAgICAgICAgICAgIHRtcDEucHVzaCgwKTtcbiAgICAgICAgICAgICAgICB0bXAyLnB1c2goMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb3dlcl9jbGFzc19saW1pdHMucHVzaCh0bXAxKTtcbiAgICAgICAgICAgIHZhcmlhbmNlX2NvbWJpbmF0aW9ucy5wdXNoKHRtcDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMTsgaSA8IG5fY2xhc3NlcyArIDE7IGkrKykge1xuICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzWzFdW2ldID0gMTtcbiAgICAgICAgICAgIHZhcmlhbmNlX2NvbWJpbmF0aW9uc1sxXVtpXSA9IDA7XG4gICAgICAgICAgICAvLyBpbiB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb24sIDk5OTk5OTkgaXMgdXNlZCBidXRcbiAgICAgICAgICAgIC8vIHNpbmNlIEphdmFzY3JpcHQgaGFzIGBJbmZpbml0eWAsIHdlIHVzZSB0aGF0LlxuICAgICAgICAgICAgZm9yIChqID0gMjsgaiA8IGRhdGEubGVuZ3RoICsgMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyaWFuY2VfY29tYmluYXRpb25zW2pdW2ldID0gSW5maW5pdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBsID0gMjsgbCA8IGRhdGEubGVuZ3RoICsgMTsgbCsrKSB7XG5cbiAgICAgICAgICAgIC8vIGBTWmAgb3JpZ2luYWxseS4gdGhpcyBpcyB0aGUgc3VtIG9mIHRoZSB2YWx1ZXMgc2VlbiB0aHVzXG4gICAgICAgICAgICAvLyBmYXIgd2hlbiBjYWxjdWxhdGluZyB2YXJpYW5jZS5cbiAgICAgICAgICAgIHZhciBzdW0gPSAwLFxuICAgICAgICAgICAgICAgIC8vIGBaU1FgIG9yaWdpbmFsbHkuIHRoZSBzdW0gb2Ygc3F1YXJlcyBvZiB2YWx1ZXMgc2VlblxuICAgICAgICAgICAgICAgIC8vIHRodXMgZmFyXG4gICAgICAgICAgICAgICAgc3VtX3NxdWFyZXMgPSAwLFxuICAgICAgICAgICAgICAgIC8vIGBXVGAgb3JpZ2luYWxseS4gVGhpcyBpcyB0aGUgbnVtYmVyIG9mXG4gICAgICAgICAgICAgICAgdyA9IDAsXG4gICAgICAgICAgICAgICAgLy8gYElWYCBvcmlnaW5hbGx5XG4gICAgICAgICAgICAgICAgaTQgPSAwO1xuXG4gICAgICAgICAgICAvLyBpbiBzZXZlcmFsIGluc3RhbmNlcywgeW91IGNvdWxkIHNheSBgTWF0aC5wb3coeCwgMilgXG4gICAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGB4ICogeGAsIGJ1dCB0aGlzIGlzIHNsb3dlciBpbiBzb21lIGJyb3dzZXJzXG4gICAgICAgICAgICAvLyBpbnRyb2R1Y2VzIGFuIHVubmVjZXNzYXJ5IGNvbmNlcHQuXG4gICAgICAgICAgICBmb3IgKHZhciBtID0gMTsgbSA8IGwgKyAxOyBtKyspIHtcblxuICAgICAgICAgICAgICAgIC8vIGBJSUlgIG9yaWdpbmFsbHlcbiAgICAgICAgICAgICAgICB2YXIgbG93ZXJfY2xhc3NfbGltaXQgPSBsIC0gbSArIDEsXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IGRhdGFbbG93ZXJfY2xhc3NfbGltaXQgLSAxXTtcblxuICAgICAgICAgICAgICAgIC8vIGhlcmUgd2UncmUgZXN0aW1hdGluZyB2YXJpYW5jZSBmb3IgZWFjaCBwb3RlbnRpYWwgY2xhc3NpbmdcbiAgICAgICAgICAgICAgICAvLyBvZiB0aGUgZGF0YSwgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZiBjbGFzc2VzLiBgd2BcbiAgICAgICAgICAgICAgICAvLyBpcyB0aGUgbnVtYmVyIG9mIGRhdGEgcG9pbnRzIGNvbnNpZGVyZWQgc28gZmFyLlxuICAgICAgICAgICAgICAgIHcrKztcblxuICAgICAgICAgICAgICAgIC8vIGluY3JlYXNlIHRoZSBjdXJyZW50IHN1bSBhbmQgc3VtLW9mLXNxdWFyZXNcbiAgICAgICAgICAgICAgICBzdW0gKz0gdmFsO1xuICAgICAgICAgICAgICAgIHN1bV9zcXVhcmVzICs9IHZhbCAqIHZhbDtcblxuICAgICAgICAgICAgICAgIC8vIHRoZSB2YXJpYW5jZSBhdCB0aGlzIHBvaW50IGluIHRoZSBzZXF1ZW5jZSBpcyB0aGUgZGlmZmVyZW5jZVxuICAgICAgICAgICAgICAgIC8vIGJldHdlZW4gdGhlIHN1bSBvZiBzcXVhcmVzIGFuZCB0aGUgdG90YWwgeCAyLCBvdmVyIHRoZSBudW1iZXJcbiAgICAgICAgICAgICAgICAvLyBvZiBzYW1wbGVzLlxuICAgICAgICAgICAgICAgIHZhcmlhbmNlID0gc3VtX3NxdWFyZXMgLSAoc3VtICogc3VtKSAvIHc7XG5cbiAgICAgICAgICAgICAgICBpNCA9IGxvd2VyX2NsYXNzX2xpbWl0IC0gMTtcblxuICAgICAgICAgICAgICAgIGlmIChpNCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAyOyBqIDwgbl9jbGFzc2VzICsgMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBhZGRpbmcgdGhpcyBlbGVtZW50IHRvIGFuIGV4aXN0aW5nIGNsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aWxsIGluY3JlYXNlIGl0cyB2YXJpYW5jZSBiZXlvbmQgdGhlIGxpbWl0LCBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNsYXNzIGF0IHRoaXMgcG9pbnQsIHNldHRpbmcgdGhlIGBsb3dlcl9jbGFzc19saW1pdGBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFuY2VfY29tYmluYXRpb25zW2xdW2pdID49XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZhcmlhbmNlICsgdmFyaWFuY2VfY29tYmluYXRpb25zW2k0XVtqIC0gMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzW2xdW2pdID0gbG93ZXJfY2xhc3NfbGltaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFuY2VfY29tYmluYXRpb25zW2xdW2pdID0gdmFyaWFuY2UgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW5jZV9jb21iaW5hdGlvbnNbaTRdW2ogLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzW2xdWzFdID0gMTtcbiAgICAgICAgICAgIHZhcmlhbmNlX2NvbWJpbmF0aW9uc1tsXVsxXSA9IHZhcmlhbmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSB0d28gbWF0cmljZXMuIGZvciBqdXN0IHByb3ZpZGluZyBicmVha3MsIG9ubHlcbiAgICAgICAgLy8gYGxvd2VyX2NsYXNzX2xpbWl0c2AgaXMgbmVlZGVkLCBidXQgdmFyaWFuY2VzIGNhbiBiZSB1c2VmdWwgdG9cbiAgICAgICAgLy8gZXZhbHVhdGUgZ29vZG5lc3Mgb2YgZml0LlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbG93ZXJfY2xhc3NfbGltaXRzOiBsb3dlcl9jbGFzc19saW1pdHMsXG4gICAgICAgICAgICB2YXJpYW5jZV9jb21iaW5hdGlvbnM6IHZhcmlhbmNlX2NvbWJpbmF0aW9uc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vICMjIFB1bGwgQnJlYWtzIFZhbHVlcyBmb3IgSmVua3NcbiAgICAvL1xuICAgIC8vIHRoZSBzZWNvbmQgcGFydCBvZiB0aGUgamVua3MgcmVjaXBlOiB0YWtlIHRoZSBjYWxjdWxhdGVkIG1hdHJpY2VzXG4gICAgLy8gYW5kIGRlcml2ZSBhbiBhcnJheSBvZiBuIGJyZWFrcy5cbiAgICBmdW5jdGlvbiBqZW5rc0JyZWFrcyhkYXRhLCBsb3dlcl9jbGFzc19saW1pdHMsIG5fY2xhc3Nlcykge1xuXG4gICAgICAgIHZhciBrID0gZGF0YS5sZW5ndGggLSAxLFxuICAgICAgICAgICAga2NsYXNzID0gW10sXG4gICAgICAgICAgICBjb3VudE51bSA9IG5fY2xhc3NlcztcblxuICAgICAgICAvLyB0aGUgY2FsY3VsYXRpb24gb2YgY2xhc3NlcyB3aWxsIG5ldmVyIGluY2x1ZGUgdGhlIHVwcGVyIGFuZFxuICAgICAgICAvLyBsb3dlciBib3VuZHMsIHNvIHdlIG5lZWQgdG8gZXhwbGljaXRseSBzZXQgdGhlbVxuICAgICAgICBrY2xhc3Nbbl9jbGFzc2VzXSA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXTtcbiAgICAgICAga2NsYXNzWzBdID0gZGF0YVswXTtcblxuICAgICAgICAvLyB0aGUgbG93ZXJfY2xhc3NfbGltaXRzIG1hdHJpeCBpcyB1c2VkIGFzIGluZGljZXMgaW50byBpdHNlbGZcbiAgICAgICAgLy8gaGVyZTogdGhlIGBrYCB2YXJpYWJsZSBpcyByZXVzZWQgaW4gZWFjaCBpdGVyYXRpb24uXG4gICAgICAgIHdoaWxlIChjb3VudE51bSA+IDEpIHtcbiAgICAgICAgICAgIGtjbGFzc1tjb3VudE51bSAtIDFdID0gZGF0YVtsb3dlcl9jbGFzc19saW1pdHNba11bY291bnROdW1dIC0gMl07XG4gICAgICAgICAgICBrID0gbG93ZXJfY2xhc3NfbGltaXRzW2tdW2NvdW50TnVtXSAtIDE7XG4gICAgICAgICAgICBjb3VudE51bS0tO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGtjbGFzcztcbiAgICB9XG5cbiAgICAvLyAjIFtKZW5rcyBuYXR1cmFsIGJyZWFrcyBvcHRpbWl6YXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSmVua3NfbmF0dXJhbF9icmVha3Nfb3B0aW1pemF0aW9uKVxuICAgIC8vXG4gICAgLy8gSW1wbGVtZW50YXRpb25zOiBbMV0oaHR0cDovL2RhbmllbGpsZXdpcy5vcmcvZmlsZXMvMjAxMC8wNi9KZW5rcy5wZGYpIChweXRob24pLFxuICAgIC8vIFsyXShodHRwczovL2dpdGh1Yi5jb20vdnZvb3Z2L2RqZW8tamVua3MvYmxvYi9tYXN0ZXIvbWFpbi5qcykgKGJ1Z2d5KSxcbiAgICAvLyBbM10oaHR0cHM6Ly9naXRodWIuY29tL3NpbW9nZW8vZ2Vvc3RhdHMvYmxvYi9tYXN0ZXIvbGliL2dlb3N0YXRzLmpzI0w0MDcpICh3b3JrcylcbiAgICAvL1xuICAgIC8vIERlcGVuZHMgb24gYGplbmtzQnJlYWtzKClgIGFuZCBgamVua3NNYXRyaWNlcygpYFxuICAgIGZ1bmN0aW9uIGplbmtzKGRhdGEsIG5fY2xhc3Nlcykge1xuXG4gICAgICAgIGlmIChuX2NsYXNzZXMgPiBkYXRhLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgLy8gc29ydCBkYXRhIGluIG51bWVyaWNhbCBvcmRlciwgc2luY2UgdGhpcyBpcyBleHBlY3RlZFxuICAgICAgICAvLyBieSB0aGUgbWF0cmljZXMgZnVuY3Rpb25cbiAgICAgICAgZGF0YSA9IGRhdGEuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG5cbiAgICAgICAgLy8gZ2V0IG91ciBiYXNpYyBtYXRyaWNlc1xuICAgICAgICB2YXIgbWF0cmljZXMgPSBqZW5rc01hdHJpY2VzKGRhdGEsIG5fY2xhc3NlcyksXG4gICAgICAgICAgICAvLyB3ZSBvbmx5IG5lZWQgbG93ZXIgY2xhc3MgbGltaXRzIGhlcmVcbiAgICAgICAgICAgIGxvd2VyX2NsYXNzX2xpbWl0cyA9IG1hdHJpY2VzLmxvd2VyX2NsYXNzX2xpbWl0cztcblxuICAgICAgICAvLyBleHRyYWN0IG5fY2xhc3NlcyBvdXQgb2YgdGhlIGNvbXB1dGVkIG1hdHJpY2VzXG4gICAgICAgIHJldHVybiBqZW5rc0JyZWFrcyhkYXRhLCBsb3dlcl9jbGFzc19saW1pdHMsIG5fY2xhc3Nlcyk7XG5cbiAgICB9XG5cbiAgICAvLyAjIFtTa2V3bmVzc10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Ta2V3bmVzcylcbiAgICAvL1xuICAgIC8vIEEgbWVhc3VyZSBvZiB0aGUgZXh0ZW50IHRvIHdoaWNoIGEgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIG9mIGFcbiAgICAvLyByZWFsLXZhbHVlZCByYW5kb20gdmFyaWFibGUgXCJsZWFuc1wiIHRvIG9uZSBzaWRlIG9mIHRoZSBtZWFuLlxuICAgIC8vIFRoZSBza2V3bmVzcyB2YWx1ZSBjYW4gYmUgcG9zaXRpdmUgb3IgbmVnYXRpdmUsIG9yIGV2ZW4gdW5kZWZpbmVkLlxuICAgIC8vXG4gICAgLy8gSW1wbGVtZW50YXRpb24gaXMgYmFzZWQgb24gdGhlIGFkanVzdGVkIEZpc2hlci1QZWFyc29uIHN0YW5kYXJkaXplZFxuICAgIC8vIG1vbWVudCBjb2VmZmljaWVudCwgd2hpY2ggaXMgdGhlIHZlcnNpb24gZm91bmQgaW4gRXhjZWwgYW5kIHNldmVyYWxcbiAgICAvLyBzdGF0aXN0aWNhbCBwYWNrYWdlcyBpbmNsdWRpbmcgTWluaXRhYiwgU0FTIGFuZCBTUFNTLlxuICAgIC8vXG4gICAgLy8gRGVwZW5kcyBvbiBgc3VtX250aF9wb3dlcl9kZXZpYXRpb25zKClgIGFuZCBgc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbmBcbiAgICBmdW5jdGlvbiBzYW1wbGVfc2tld25lc3MoeCkge1xuICAgICAgICAvLyBUaGUgc2tld25lc3Mgb2YgbGVzcyB0aGFuIHRocmVlIGFyZ3VtZW50cyBpcyBudWxsXG4gICAgICAgIGlmICh4Lmxlbmd0aCA8IDMpIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciBuID0geC5sZW5ndGgsXG4gICAgICAgICAgICBjdWJlZF9zID0gTWF0aC5wb3coc2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbih4KSwgMyksXG4gICAgICAgICAgICBzdW1fY3ViZWRfZGV2aWF0aW9ucyA9IHN1bV9udGhfcG93ZXJfZGV2aWF0aW9ucyh4LCAzKTtcblxuICAgICAgICByZXR1cm4gbiAqIHN1bV9jdWJlZF9kZXZpYXRpb25zIC8gKChuIC0gMSkgKiAobiAtIDIpICogY3ViZWRfcyk7XG4gICAgfVxuXG4gICAgLy8gIyBTdGFuZGFyZCBOb3JtYWwgVGFibGVcbiAgICAvLyBBIHN0YW5kYXJkIG5vcm1hbCB0YWJsZSwgYWxzbyBjYWxsZWQgdGhlIHVuaXQgbm9ybWFsIHRhYmxlIG9yIFogdGFibGUsXG4gICAgLy8gaXMgYSBtYXRoZW1hdGljYWwgdGFibGUgZm9yIHRoZSB2YWx1ZXMgb2YgzqYgKHBoaSksIHdoaWNoIGFyZSB0aGUgdmFsdWVzIG9mXG4gICAgLy8gdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIGZ1bmN0aW9uIG9mIHRoZSBub3JtYWwgZGlzdHJpYnV0aW9uLlxuICAgIC8vIEl0IGlzIHVzZWQgdG8gZmluZCB0aGUgcHJvYmFiaWxpdHkgdGhhdCBhIHN0YXRpc3RpYyBpcyBvYnNlcnZlZCBiZWxvdyxcbiAgICAvLyBhYm92ZSwgb3IgYmV0d2VlbiB2YWx1ZXMgb24gdGhlIHN0YW5kYXJkIG5vcm1hbCBkaXN0cmlidXRpb24sIGFuZCBieVxuICAgIC8vIGV4dGVuc2lvbiwgYW55IG5vcm1hbCBkaXN0cmlidXRpb24uXG4gICAgLy9cbiAgICAvLyBUaGUgcHJvYmFiaWxpdGllcyBhcmUgdGFrZW4gZnJvbSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0YW5kYXJkX25vcm1hbF90YWJsZVxuICAgIC8vIFRoZSB0YWJsZSB1c2VkIGlzIHRoZSBjdW11bGF0aXZlLCBhbmQgbm90IGN1bXVsYXRpdmUgZnJvbSAwIHRvIG1lYW5cbiAgICAvLyAoZXZlbiB0aG91Z2ggdGhlIGxhdHRlciBoYXMgNSBkaWdpdHMgcHJlY2lzaW9uLCBpbnN0ZWFkIG9mIDQpLlxuICAgIHZhciBzdGFuZGFyZF9ub3JtYWxfdGFibGUgPSBbXG4gICAgICAgIC8qICB6ICAgICAgMC4wMCAgICAwLjAxICAgIDAuMDIgICAgMC4wMyAgICAwLjA0ICAgIDAuMDUgICAgMC4wNiAgICAwLjA3ICAgIDAuMDggICAgMC4wOSAqL1xuICAgICAgICAvKiAwLjAgKi9cbiAgICAgICAgMC41MDAwLCAwLjUwNDAsIDAuNTA4MCwgMC41MTIwLCAwLjUxNjAsIDAuNTE5OSwgMC41MjM5LCAwLjUyNzksIDAuNTMxOSwgMC41MzU5LFxuICAgICAgICAvKiAwLjEgKi9cbiAgICAgICAgMC41Mzk4LCAwLjU0MzgsIDAuNTQ3OCwgMC41NTE3LCAwLjU1NTcsIDAuNTU5NiwgMC41NjM2LCAwLjU2NzUsIDAuNTcxNCwgMC41NzUzLFxuICAgICAgICAvKiAwLjIgKi9cbiAgICAgICAgMC41NzkzLCAwLjU4MzIsIDAuNTg3MSwgMC41OTEwLCAwLjU5NDgsIDAuNTk4NywgMC42MDI2LCAwLjYwNjQsIDAuNjEwMywgMC42MTQxLFxuICAgICAgICAvKiAwLjMgKi9cbiAgICAgICAgMC42MTc5LCAwLjYyMTcsIDAuNjI1NSwgMC42MjkzLCAwLjYzMzEsIDAuNjM2OCwgMC42NDA2LCAwLjY0NDMsIDAuNjQ4MCwgMC42NTE3LFxuICAgICAgICAvKiAwLjQgKi9cbiAgICAgICAgMC42NTU0LCAwLjY1OTEsIDAuNjYyOCwgMC42NjY0LCAwLjY3MDAsIDAuNjczNiwgMC42NzcyLCAwLjY4MDgsIDAuNjg0NCwgMC42ODc5LFxuICAgICAgICAvKiAwLjUgKi9cbiAgICAgICAgMC42OTE1LCAwLjY5NTAsIDAuNjk4NSwgMC43MDE5LCAwLjcwNTQsIDAuNzA4OCwgMC43MTIzLCAwLjcxNTcsIDAuNzE5MCwgMC43MjI0LFxuICAgICAgICAvKiAwLjYgKi9cbiAgICAgICAgMC43MjU3LCAwLjcyOTEsIDAuNzMyNCwgMC43MzU3LCAwLjczODksIDAuNzQyMiwgMC43NDU0LCAwLjc0ODYsIDAuNzUxNywgMC43NTQ5LFxuICAgICAgICAvKiAwLjcgKi9cbiAgICAgICAgMC43NTgwLCAwLjc2MTEsIDAuNzY0MiwgMC43NjczLCAwLjc3MDQsIDAuNzczNCwgMC43NzY0LCAwLjc3OTQsIDAuNzgyMywgMC43ODUyLFxuICAgICAgICAvKiAwLjggKi9cbiAgICAgICAgMC43ODgxLCAwLjc5MTAsIDAuNzkzOSwgMC43OTY3LCAwLjc5OTUsIDAuODAyMywgMC44MDUxLCAwLjgwNzgsIDAuODEwNiwgMC44MTMzLFxuICAgICAgICAvKiAwLjkgKi9cbiAgICAgICAgMC44MTU5LCAwLjgxODYsIDAuODIxMiwgMC44MjM4LCAwLjgyNjQsIDAuODI4OSwgMC44MzE1LCAwLjgzNDAsIDAuODM2NSwgMC44Mzg5LFxuICAgICAgICAvKiAxLjAgKi9cbiAgICAgICAgMC44NDEzLCAwLjg0MzgsIDAuODQ2MSwgMC44NDg1LCAwLjg1MDgsIDAuODUzMSwgMC44NTU0LCAwLjg1NzcsIDAuODU5OSwgMC44NjIxLFxuICAgICAgICAvKiAxLjEgKi9cbiAgICAgICAgMC44NjQzLCAwLjg2NjUsIDAuODY4NiwgMC44NzA4LCAwLjg3MjksIDAuODc0OSwgMC44NzcwLCAwLjg3OTAsIDAuODgxMCwgMC44ODMwLFxuICAgICAgICAvKiAxLjIgKi9cbiAgICAgICAgMC44ODQ5LCAwLjg4NjksIDAuODg4OCwgMC44OTA3LCAwLjg5MjUsIDAuODk0NCwgMC44OTYyLCAwLjg5ODAsIDAuODk5NywgMC45MDE1LFxuICAgICAgICAvKiAxLjMgKi9cbiAgICAgICAgMC45MDMyLCAwLjkwNDksIDAuOTA2NiwgMC45MDgyLCAwLjkwOTksIDAuOTExNSwgMC45MTMxLCAwLjkxNDcsIDAuOTE2MiwgMC45MTc3LFxuICAgICAgICAvKiAxLjQgKi9cbiAgICAgICAgMC45MTkyLCAwLjkyMDcsIDAuOTIyMiwgMC45MjM2LCAwLjkyNTEsIDAuOTI2NSwgMC45Mjc5LCAwLjkyOTIsIDAuOTMwNiwgMC45MzE5LFxuICAgICAgICAvKiAxLjUgKi9cbiAgICAgICAgMC45MzMyLCAwLjkzNDUsIDAuOTM1NywgMC45MzcwLCAwLjkzODIsIDAuOTM5NCwgMC45NDA2LCAwLjk0MTgsIDAuOTQyOSwgMC45NDQxLFxuICAgICAgICAvKiAxLjYgKi9cbiAgICAgICAgMC45NDUyLCAwLjk0NjMsIDAuOTQ3NCwgMC45NDg0LCAwLjk0OTUsIDAuOTUwNSwgMC45NTE1LCAwLjk1MjUsIDAuOTUzNSwgMC45NTQ1LFxuICAgICAgICAvKiAxLjcgKi9cbiAgICAgICAgMC45NTU0LCAwLjk1NjQsIDAuOTU3MywgMC45NTgyLCAwLjk1OTEsIDAuOTU5OSwgMC45NjA4LCAwLjk2MTYsIDAuOTYyNSwgMC45NjMzLFxuICAgICAgICAvKiAxLjggKi9cbiAgICAgICAgMC45NjQxLCAwLjk2NDksIDAuOTY1NiwgMC45NjY0LCAwLjk2NzEsIDAuOTY3OCwgMC45Njg2LCAwLjk2OTMsIDAuOTY5OSwgMC45NzA2LFxuICAgICAgICAvKiAxLjkgKi9cbiAgICAgICAgMC45NzEzLCAwLjk3MTksIDAuOTcyNiwgMC45NzMyLCAwLjk3MzgsIDAuOTc0NCwgMC45NzUwLCAwLjk3NTYsIDAuOTc2MSwgMC45NzY3LFxuICAgICAgICAvKiAyLjAgKi9cbiAgICAgICAgMC45NzcyLCAwLjk3NzgsIDAuOTc4MywgMC45Nzg4LCAwLjk3OTMsIDAuOTc5OCwgMC45ODAzLCAwLjk4MDgsIDAuOTgxMiwgMC45ODE3LFxuICAgICAgICAvKiAyLjEgKi9cbiAgICAgICAgMC45ODIxLCAwLjk4MjYsIDAuOTgzMCwgMC45ODM0LCAwLjk4MzgsIDAuOTg0MiwgMC45ODQ2LCAwLjk4NTAsIDAuOTg1NCwgMC45ODU3LFxuICAgICAgICAvKiAyLjIgKi9cbiAgICAgICAgMC45ODYxLCAwLjk4NjQsIDAuOTg2OCwgMC45ODcxLCAwLjk4NzUsIDAuOTg3OCwgMC45ODgxLCAwLjk4ODQsIDAuOTg4NywgMC45ODkwLFxuICAgICAgICAvKiAyLjMgKi9cbiAgICAgICAgMC45ODkzLCAwLjk4OTYsIDAuOTg5OCwgMC45OTAxLCAwLjk5MDQsIDAuOTkwNiwgMC45OTA5LCAwLjk5MTEsIDAuOTkxMywgMC45OTE2LFxuICAgICAgICAvKiAyLjQgKi9cbiAgICAgICAgMC45OTE4LCAwLjk5MjAsIDAuOTkyMiwgMC45OTI1LCAwLjk5MjcsIDAuOTkyOSwgMC45OTMxLCAwLjk5MzIsIDAuOTkzNCwgMC45OTM2LFxuICAgICAgICAvKiAyLjUgKi9cbiAgICAgICAgMC45OTM4LCAwLjk5NDAsIDAuOTk0MSwgMC45OTQzLCAwLjk5NDUsIDAuOTk0NiwgMC45OTQ4LCAwLjk5NDksIDAuOTk1MSwgMC45OTUyLFxuICAgICAgICAvKiAyLjYgKi9cbiAgICAgICAgMC45OTUzLCAwLjk5NTUsIDAuOTk1NiwgMC45OTU3LCAwLjk5NTksIDAuOTk2MCwgMC45OTYxLCAwLjk5NjIsIDAuOTk2MywgMC45OTY0LFxuICAgICAgICAvKiAyLjcgKi9cbiAgICAgICAgMC45OTY1LCAwLjk5NjYsIDAuOTk2NywgMC45OTY4LCAwLjk5NjksIDAuOTk3MCwgMC45OTcxLCAwLjk5NzIsIDAuOTk3MywgMC45OTc0LFxuICAgICAgICAvKiAyLjggKi9cbiAgICAgICAgMC45OTc0LCAwLjk5NzUsIDAuOTk3NiwgMC45OTc3LCAwLjk5NzcsIDAuOTk3OCwgMC45OTc5LCAwLjk5NzksIDAuOTk4MCwgMC45OTgxLFxuICAgICAgICAvKiAyLjkgKi9cbiAgICAgICAgMC45OTgxLCAwLjk5ODIsIDAuOTk4MiwgMC45OTgzLCAwLjk5ODQsIDAuOTk4NCwgMC45OTg1LCAwLjk5ODUsIDAuOTk4NiwgMC45OTg2LFxuICAgICAgICAvKiAzLjAgKi9cbiAgICAgICAgMC45OTg3LCAwLjk5ODcsIDAuOTk4NywgMC45OTg4LCAwLjk5ODgsIDAuOTk4OSwgMC45OTg5LCAwLjk5ODksIDAuOTk5MCwgMC45OTkwXG4gICAgXTtcblxuICAgIC8vICMgW0N1bXVsYXRpdmUgU3RhbmRhcmQgTm9ybWFsIFByb2JhYmlsaXR5XShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0YW5kYXJkX25vcm1hbF90YWJsZSlcbiAgICAvL1xuICAgIC8vIFNpbmNlIHByb2JhYmlsaXR5IHRhYmxlcyBjYW5ub3QgYmVcbiAgICAvLyBwcmludGVkIGZvciBldmVyeSBub3JtYWwgZGlzdHJpYnV0aW9uLCBhcyB0aGVyZSBhcmUgYW4gaW5maW5pdGUgdmFyaWV0eVxuICAgIC8vIG9mIG5vcm1hbCBkaXN0cmlidXRpb25zLCBpdCBpcyBjb21tb24gcHJhY3RpY2UgdG8gY29udmVydCBhIG5vcm1hbCB0byBhXG4gICAgLy8gc3RhbmRhcmQgbm9ybWFsIGFuZCB0aGVuIHVzZSB0aGUgc3RhbmRhcmQgbm9ybWFsIHRhYmxlIHRvIGZpbmQgcHJvYmFiaWxpdGllc1xuICAgIGZ1bmN0aW9uIGN1bXVsYXRpdmVfc3RkX25vcm1hbF9wcm9iYWJpbGl0eSh6KSB7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGlzIHZhbHVlLlxuICAgICAgICB2YXIgYWJzWiA9IE1hdGguYWJzKHopLFxuICAgICAgICAgICAgLy8gRWFjaCByb3cgYmVnaW5zIHdpdGggYSBkaWZmZXJlbnRcbiAgICAgICAgICAgIC8vIHNpZ25pZmljYW50IGRpZ2l0OiAwLjUsIDAuNiwgMC43LCBhbmQgc28gb24uIFNvIHRoZSByb3cgaXMgc2ltcGx5XG4gICAgICAgICAgICAvLyB0aGlzIHZhbHVlJ3Mgc2lnbmlmaWNhbnQgZGlnaXQ6IDAuNTY3IHdpbGwgYmUgaW4gcm93IDAsIHNvIHJvdz0wLFxuICAgICAgICAgICAgLy8gMC42NDMgd2lsbCBiZSBpbiByb3cgMSwgc28gcm93PTEwLlxuICAgICAgICAgICAgcm93ID0gTWF0aC5mbG9vcihhYnNaICogMTApLFxuICAgICAgICAgICAgY29sdW1uID0gMTAgKiAoTWF0aC5mbG9vcihhYnNaICogMTAwKSAvIDEwIC0gTWF0aC5mbG9vcihhYnNaICogMTAwIC8gMTApKSxcbiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5taW4oKHJvdyAqIDEwKSArIGNvbHVtbiwgc3RhbmRhcmRfbm9ybWFsX3RhYmxlLmxlbmd0aCAtIDEpO1xuXG4gICAgICAgIC8vIFRoZSBpbmRleCB3ZSBjYWxjdWxhdGUgbXVzdCBiZSBpbiB0aGUgdGFibGUgYXMgYSBwb3NpdGl2ZSB2YWx1ZSxcbiAgICAgICAgLy8gYnV0IHdlIHN0aWxsIHBheSBhdHRlbnRpb24gdG8gd2hldGhlciB0aGUgaW5wdXQgaXMgcG9zaXRpdmVcbiAgICAgICAgLy8gb3IgbmVnYXRpdmUsIGFuZCBmbGlwIHRoZSBvdXRwdXQgdmFsdWUgYXMgYSBsYXN0IHN0ZXAuXG4gICAgICAgIGlmICh6ID49IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZF9ub3JtYWxfdGFibGVbaW5kZXhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZHVlIHRvIGZsb2F0aW5nLXBvaW50IGFyaXRobWV0aWMsIHZhbHVlcyBpbiB0aGUgdGFibGUgd2l0aFxuICAgICAgICAgICAgLy8gNCBzaWduaWZpY2FudCBmaWd1cmVzIGNhbiBuZXZlcnRoZWxlc3MgZW5kIHVwIGFzIHJlcGVhdGluZ1xuICAgICAgICAgICAgLy8gZnJhY3Rpb25zIHdoZW4gdGhleSdyZSBjb21wdXRlZCBoZXJlLlxuICAgICAgICAgICAgcmV0dXJuICsoMSAtIHN0YW5kYXJkX25vcm1hbF90YWJsZVtpbmRleF0pLnRvRml4ZWQoNCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAjIFtaLVNjb3JlLCBvciBTdGFuZGFyZCBTY29yZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGFuZGFyZF9zY29yZSlcbiAgICAvL1xuICAgIC8vIFRoZSBzdGFuZGFyZCBzY29yZSBpcyB0aGUgbnVtYmVyIG9mIHN0YW5kYXJkIGRldmlhdGlvbnMgYW4gb2JzZXJ2YXRpb25cbiAgICAvLyBvciBkYXR1bSBpcyBhYm92ZSBvciBiZWxvdyB0aGUgbWVhbi4gVGh1cywgYSBwb3NpdGl2ZSBzdGFuZGFyZCBzY29yZVxuICAgIC8vIHJlcHJlc2VudHMgYSBkYXR1bSBhYm92ZSB0aGUgbWVhbiwgd2hpbGUgYSBuZWdhdGl2ZSBzdGFuZGFyZCBzY29yZVxuICAgIC8vIHJlcHJlc2VudHMgYSBkYXR1bSBiZWxvdyB0aGUgbWVhbi4gSXQgaXMgYSBkaW1lbnNpb25sZXNzIHF1YW50aXR5XG4gICAgLy8gb2J0YWluZWQgYnkgc3VidHJhY3RpbmcgdGhlIHBvcHVsYXRpb24gbWVhbiBmcm9tIGFuIGluZGl2aWR1YWwgcmF3XG4gICAgLy8gc2NvcmUgYW5kIHRoZW4gZGl2aWRpbmcgdGhlIGRpZmZlcmVuY2UgYnkgdGhlIHBvcHVsYXRpb24gc3RhbmRhcmRcbiAgICAvLyBkZXZpYXRpb24uXG4gICAgLy9cbiAgICAvLyBUaGUgei1zY29yZSBpcyBvbmx5IGRlZmluZWQgaWYgb25lIGtub3dzIHRoZSBwb3B1bGF0aW9uIHBhcmFtZXRlcnM7XG4gICAgLy8gaWYgb25lIG9ubHkgaGFzIGEgc2FtcGxlIHNldCwgdGhlbiB0aGUgYW5hbG9nb3VzIGNvbXB1dGF0aW9uIHdpdGhcbiAgICAvLyBzYW1wbGUgbWVhbiBhbmQgc2FtcGxlIHN0YW5kYXJkIGRldmlhdGlvbiB5aWVsZHMgdGhlXG4gICAgLy8gU3R1ZGVudCdzIHQtc3RhdGlzdGljLlxuICAgIGZ1bmN0aW9uIHpfc2NvcmUoeCwgbWVhbiwgc3RhbmRhcmRfZGV2aWF0aW9uKSB7XG4gICAgICAgIHJldHVybiAoeCAtIG1lYW4pIC8gc3RhbmRhcmRfZGV2aWF0aW9uO1xuICAgIH1cblxuICAgIC8vIFdlIHVzZSBgzrVgLCBlcHNpbG9uLCBhcyBhIHN0b3BwaW5nIGNyaXRlcmlvbiB3aGVuIHdlIHdhbnQgdG8gaXRlcmF0ZVxuICAgIC8vIHVudGlsIHdlJ3JlIFwiY2xvc2UgZW5vdWdoXCIuXG4gICAgdmFyIGVwc2lsb24gPSAwLjAwMDE7XG5cbiAgICAvLyAjIFtGYWN0b3JpYWxdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0ZhY3RvcmlhbClcbiAgICAvL1xuICAgIC8vIEEgZmFjdG9yaWFsLCB1c3VhbGx5IHdyaXR0ZW4gbiEsIGlzIHRoZSBwcm9kdWN0IG9mIGFsbCBwb3NpdGl2ZVxuICAgIC8vIGludGVnZXJzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBuLiBPZnRlbiBmYWN0b3JpYWwgaXMgaW1wbGVtZW50ZWRcbiAgICAvLyByZWN1cnNpdmVseSwgYnV0IHRoaXMgaXRlcmF0aXZlIGFwcHJvYWNoIGlzIHNpZ25pZmljYW50bHkgZmFzdGVyXG4gICAgLy8gYW5kIHNpbXBsZXIuXG4gICAgZnVuY3Rpb24gZmFjdG9yaWFsKG4pIHtcblxuICAgICAgICAvLyBmYWN0b3JpYWwgaXMgbWF0aGVtYXRpY2FsbHkgdW5kZWZpbmVkIGZvciBuZWdhdGl2ZSBudW1iZXJzXG4gICAgICAgIGlmIChuIDwgMCApIHsgcmV0dXJuIG51bGw7IH1cblxuICAgICAgICAvLyB0eXBpY2FsbHkgeW91J2xsIGV4cGFuZCB0aGUgZmFjdG9yaWFsIGZ1bmN0aW9uIGdvaW5nIGRvd24sIGxpa2VcbiAgICAgICAgLy8gNSEgPSA1ICogNCAqIDMgKiAyICogMS4gVGhpcyBpcyBnb2luZyBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLFxuICAgICAgICAvLyBjb3VudGluZyBmcm9tIDIgdXAgdG8gdGhlIG51bWJlciBpbiBxdWVzdGlvbiwgYW5kIHNpbmNlIGFueXRoaW5nXG4gICAgICAgIC8vIG11bHRpcGxpZWQgYnkgMSBpcyBpdHNlbGYsIHRoZSBsb29wIG9ubHkgbmVlZHMgdG8gc3RhcnQgYXQgMi5cbiAgICAgICAgdmFyIGFjY3VtdWxhdG9yID0gMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgICAgICAvLyBmb3IgZWFjaCBudW1iZXIgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgbnVtYmVyIGBuYCwgbXVsdGlwbHlcbiAgICAgICAgICAgIC8vIHRoZSBhY2N1bXVsYXRvciBteSB0aGF0IG51bWJlci5cbiAgICAgICAgICAgIGFjY3VtdWxhdG9yICo9IGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8vICMgQmVybm91bGxpIERpc3RyaWJ1dGlvblxuICAgIC8vXG4gICAgLy8gVGhlIFtCZXJub3VsbGkgZGlzdHJpYnV0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jlcm5vdWxsaV9kaXN0cmlidXRpb24pXG4gICAgLy8gaXMgdGhlIHByb2JhYmlsaXR5IGRpc2NyZXRlXG4gICAgLy8gZGlzdHJpYnV0aW9uIG9mIGEgcmFuZG9tIHZhcmlhYmxlIHdoaWNoIHRha2VzIHZhbHVlIDEgd2l0aCBzdWNjZXNzXG4gICAgLy8gcHJvYmFiaWxpdHkgYHBgIGFuZCB2YWx1ZSAwIHdpdGggZmFpbHVyZVxuICAgIC8vIHByb2JhYmlsaXR5IGBxYCA9IDEgLSBgcGAuIEl0IGNhbiBiZSB1c2VkLCBmb3IgZXhhbXBsZSwgdG8gcmVwcmVzZW50IHRoZVxuICAgIC8vIHRvc3Mgb2YgYSBjb2luLCB3aGVyZSBcIjFcIiBpcyBkZWZpbmVkIHRvIG1lYW4gXCJoZWFkc1wiIGFuZCBcIjBcIiBpcyBkZWZpbmVkXG4gICAgLy8gdG8gbWVhbiBcInRhaWxzXCIgKG9yIHZpY2UgdmVyc2EpLiBJdCBpc1xuICAgIC8vIGEgc3BlY2lhbCBjYXNlIG9mIGEgQmlub21pYWwgRGlzdHJpYnV0aW9uXG4gICAgLy8gd2hlcmUgYG5gID0gMS5cbiAgICBmdW5jdGlvbiBiZXJub3VsbGlfZGlzdHJpYnV0aW9uKHApIHtcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBgcGAgaXMgYSB2YWxpZCBwcm9iYWJpbGl0eSAoMCDiiaQgcCDiiaQgMSlcbiAgICAgICAgaWYgKHAgPCAwIHx8IHAgPiAxICkgeyByZXR1cm4gbnVsbDsgfVxuXG4gICAgICAgIHJldHVybiBiaW5vbWlhbF9kaXN0cmlidXRpb24oMSwgcCk7XG4gICAgfVxuXG4gICAgLy8gIyBCaW5vbWlhbCBEaXN0cmlidXRpb25cbiAgICAvL1xuICAgIC8vIFRoZSBbQmlub21pYWwgRGlzdHJpYnV0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jpbm9taWFsX2Rpc3RyaWJ1dGlvbikgaXMgdGhlIGRpc2NyZXRlIHByb2JhYmlsaXR5XG4gICAgLy8gZGlzdHJpYnV0aW9uIG9mIHRoZSBudW1iZXIgb2Ygc3VjY2Vzc2VzIGluIGEgc2VxdWVuY2Ugb2YgbiBpbmRlcGVuZGVudCB5ZXMvbm8gZXhwZXJpbWVudHMsIGVhY2ggb2Ygd2hpY2ggeWllbGRzXG4gICAgLy8gc3VjY2VzcyB3aXRoIHByb2JhYmlsaXR5IGBwcm9iYWJpbGl0eWAuIFN1Y2ggYSBzdWNjZXNzL2ZhaWx1cmUgZXhwZXJpbWVudCBpcyBhbHNvIGNhbGxlZCBhIEJlcm5vdWxsaSBleHBlcmltZW50IG9yXG4gICAgLy8gQmVybm91bGxpIHRyaWFsOyB3aGVuIHRyaWFscyA9IDEsIHRoZSBCaW5vbWlhbCBEaXN0cmlidXRpb24gaXMgYSBCZXJub3VsbGkgRGlzdHJpYnV0aW9uLlxuICAgIGZ1bmN0aW9uIGJpbm9taWFsX2Rpc3RyaWJ1dGlvbih0cmlhbHMsIHByb2JhYmlsaXR5KSB7XG4gICAgICAgIC8vIENoZWNrIHRoYXQgYHBgIGlzIGEgdmFsaWQgcHJvYmFiaWxpdHkgKDAg4omkIHAg4omkIDEpLFxuICAgICAgICAvLyB0aGF0IGBuYCBpcyBhbiBpbnRlZ2VyLCBzdHJpY3RseSBwb3NpdGl2ZS5cbiAgICAgICAgaWYgKHByb2JhYmlsaXR5IDwgMCB8fCBwcm9iYWJpbGl0eSA+IDEgfHxcbiAgICAgICAgICAgIHRyaWFscyA8PSAwIHx8IHRyaWFscyAlIDEgIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYSBbcHJvYmFiaWxpdHkgbWFzcyBmdW5jdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUHJvYmFiaWxpdHlfbWFzc19mdW5jdGlvbilcbiAgICAgICAgZnVuY3Rpb24gcHJvYmFiaWxpdHlfbWFzcyh4LCB0cmlhbHMsIHByb2JhYmlsaXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yaWFsKHRyaWFscykgL1xuICAgICAgICAgICAgICAgIChmYWN0b3JpYWwoeCkgKiBmYWN0b3JpYWwodHJpYWxzIC0geCkpICpcbiAgICAgICAgICAgICAgICAoTWF0aC5wb3cocHJvYmFiaWxpdHksIHgpICogTWF0aC5wb3coMSAtIHByb2JhYmlsaXR5LCB0cmlhbHMgLSB4KSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBpbml0aWFsaXplIGB4YCwgdGhlIHJhbmRvbSB2YXJpYWJsZSwgYW5kIGBhY2N1bXVsYXRvcmAsIGFuIGFjY3VtdWxhdG9yXG4gICAgICAgIC8vIGZvciB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gZnVuY3Rpb24gdG8gMC4gYGRpc3RyaWJ1dGlvbl9mdW5jdGlvbnNgXG4gICAgICAgIC8vIGlzIHRoZSBvYmplY3Qgd2UnbGwgcmV0dXJuIHdpdGggdGhlIGBwcm9iYWJpbGl0eV9vZl94YCBhbmQgdGhlXG4gICAgICAgIC8vIGBjdW11bGF0aXZlX3Byb2JhYmlsaXR5X29mX3hgLCBhcyB3ZWxsIGFzIHRoZSBjYWxjdWxhdGVkIG1lYW4gJlxuICAgICAgICAvLyB2YXJpYW5jZS4gV2UgaXRlcmF0ZSB1bnRpbCB0aGUgYGN1bXVsYXRpdmVfcHJvYmFiaWxpdHlfb2ZfeGAgaXNcbiAgICAgICAgLy8gd2l0aGluIGBlcHNpbG9uYCBvZiAxLjAuXG4gICAgICAgIHZhciB4ID0gMCxcbiAgICAgICAgICAgIGN1bXVsYXRpdmVfcHJvYmFiaWxpdHkgPSAwLFxuICAgICAgICAgICAgY2VsbHMgPSB7fTtcblxuICAgICAgICAvLyBUaGlzIGFsZ29yaXRobSBpdGVyYXRlcyB0aHJvdWdoIGVhY2ggcG90ZW50aWFsIG91dGNvbWUsXG4gICAgICAgIC8vIHVudGlsIHRoZSBgY3VtdWxhdGl2ZV9wcm9iYWJpbGl0eWAgaXMgdmVyeSBjbG9zZSB0byAxLCBhdFxuICAgICAgICAvLyB3aGljaCBwb2ludCB3ZSd2ZSBkZWZpbmVkIHRoZSB2YXN0IG1ham9yaXR5IG9mIG91dGNvbWVzXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGNlbGxzW3hdID0gcHJvYmFiaWxpdHlfbWFzcyh4LCB0cmlhbHMsIHByb2JhYmlsaXR5KTtcbiAgICAgICAgICAgIGN1bXVsYXRpdmVfcHJvYmFiaWxpdHkgKz0gY2VsbHNbeF07XG4gICAgICAgICAgICB4Kys7XG4gICAgICAgIC8vIHdoZW4gdGhlIGN1bXVsYXRpdmVfcHJvYmFiaWxpdHkgaXMgbmVhcmx5IDEsIHdlJ3ZlIGNhbGN1bGF0ZWRcbiAgICAgICAgLy8gdGhlIHVzZWZ1bCByYW5nZSBvZiB0aGlzIGRpc3RyaWJ1dGlvblxuICAgICAgICB9IHdoaWxlIChjdW11bGF0aXZlX3Byb2JhYmlsaXR5IDwgMSAtIGVwc2lsb24pO1xuXG4gICAgICAgIHJldHVybiBjZWxscztcbiAgICB9XG5cbiAgICAvLyAjIFBvaXNzb24gRGlzdHJpYnV0aW9uXG4gICAgLy9cbiAgICAvLyBUaGUgW1BvaXNzb24gRGlzdHJpYnV0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BvaXNzb25fZGlzdHJpYnV0aW9uKVxuICAgIC8vIGlzIGEgZGlzY3JldGUgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIHRoYXQgZXhwcmVzc2VzIHRoZSBwcm9iYWJpbGl0eVxuICAgIC8vIG9mIGEgZ2l2ZW4gbnVtYmVyIG9mIGV2ZW50cyBvY2N1cnJpbmcgaW4gYSBmaXhlZCBpbnRlcnZhbCBvZiB0aW1lXG4gICAgLy8gYW5kL29yIHNwYWNlIGlmIHRoZXNlIGV2ZW50cyBvY2N1ciB3aXRoIGEga25vd24gYXZlcmFnZSByYXRlIGFuZFxuICAgIC8vIGluZGVwZW5kZW50bHkgb2YgdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgZXZlbnQuXG4gICAgLy9cbiAgICAvLyBUaGUgUG9pc3NvbiBEaXN0cmlidXRpb24gaXMgY2hhcmFjdGVyaXplZCBieSB0aGUgc3RyaWN0bHkgcG9zaXRpdmVcbiAgICAvLyBtZWFuIGFycml2YWwgb3Igb2NjdXJyZW5jZSByYXRlLCBgzrtgLlxuICAgIGZ1bmN0aW9uIHBvaXNzb25fZGlzdHJpYnV0aW9uKGxhbWJkYSkge1xuICAgICAgICAvLyBDaGVjayB0aGF0IGxhbWJkYSBpcyBzdHJpY3RseSBwb3NpdGl2ZVxuICAgICAgICBpZiAobGFtYmRhIDw9IDApIHsgcmV0dXJuIG51bGw7IH1cblxuICAgICAgICAvLyBvdXIgY3VycmVudCBwbGFjZSBpbiB0aGUgZGlzdHJpYnV0aW9uXG4gICAgICAgIHZhciB4ID0gMCxcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBjdXJyZW50IGN1bXVsYXRpdmUgcHJvYmFiaWxpdHksIGluXG4gICAgICAgICAgICAvLyBvcmRlciB0byBrbm93IHdoZW4gdG8gc3RvcCBjYWxjdWxhdGluZyBjaGFuY2VzLlxuICAgICAgICAgICAgY3VtdWxhdGl2ZV9wcm9iYWJpbGl0eSA9IDAsXG4gICAgICAgICAgICAvLyB0aGUgY2FsY3VsYXRlZCBjZWxscyB0byBiZSByZXR1cm5lZFxuICAgICAgICAgICAgY2VsbHMgPSB7fTtcblxuICAgICAgICAvLyBhIFtwcm9iYWJpbGl0eSBtYXNzIGZ1bmN0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qcm9iYWJpbGl0eV9tYXNzX2Z1bmN0aW9uKVxuICAgICAgICBmdW5jdGlvbiBwcm9iYWJpbGl0eV9tYXNzKHgsIGxhbWJkYSkge1xuICAgICAgICAgICAgcmV0dXJuIChNYXRoLnBvdyhNYXRoLkUsIC1sYW1iZGEpICogTWF0aC5wb3cobGFtYmRhLCB4KSkgL1xuICAgICAgICAgICAgICAgIGZhY3RvcmlhbCh4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoaXMgYWxnb3JpdGhtIGl0ZXJhdGVzIHRocm91Z2ggZWFjaCBwb3RlbnRpYWwgb3V0Y29tZSxcbiAgICAgICAgLy8gdW50aWwgdGhlIGBjdW11bGF0aXZlX3Byb2JhYmlsaXR5YCBpcyB2ZXJ5IGNsb3NlIHRvIDEsIGF0XG4gICAgICAgIC8vIHdoaWNoIHBvaW50IHdlJ3ZlIGRlZmluZWQgdGhlIHZhc3QgbWFqb3JpdHkgb2Ygb3V0Y29tZXNcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY2VsbHNbeF0gPSBwcm9iYWJpbGl0eV9tYXNzKHgsIGxhbWJkYSk7XG4gICAgICAgICAgICBjdW11bGF0aXZlX3Byb2JhYmlsaXR5ICs9IGNlbGxzW3hdO1xuICAgICAgICAgICAgeCsrO1xuICAgICAgICAvLyB3aGVuIHRoZSBjdW11bGF0aXZlX3Byb2JhYmlsaXR5IGlzIG5lYXJseSAxLCB3ZSd2ZSBjYWxjdWxhdGVkXG4gICAgICAgIC8vIHRoZSB1c2VmdWwgcmFuZ2Ugb2YgdGhpcyBkaXN0cmlidXRpb25cbiAgICAgICAgfSB3aGlsZSAoY3VtdWxhdGl2ZV9wcm9iYWJpbGl0eSA8IDEgLSBlcHNpbG9uKTtcblxuICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgfVxuXG4gICAgLy8gIyBQZXJjZW50YWdlIFBvaW50cyBvZiB0aGUgz4cyIChDaGktU3F1YXJlZCkgRGlzdHJpYnV0aW9uXG4gICAgLy8gVGhlIFvPhzIgKENoaS1TcXVhcmVkKSBEaXN0cmlidXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2hpLXNxdWFyZWRfZGlzdHJpYnV0aW9uKSBpcyB1c2VkIGluIHRoZSBjb21tb25cbiAgICAvLyBjaGktc3F1YXJlZCB0ZXN0cyBmb3IgZ29vZG5lc3Mgb2YgZml0IG9mIGFuIG9ic2VydmVkIGRpc3RyaWJ1dGlvbiB0byBhIHRoZW9yZXRpY2FsIG9uZSwgdGhlIGluZGVwZW5kZW5jZSBvZiB0d29cbiAgICAvLyBjcml0ZXJpYSBvZiBjbGFzc2lmaWNhdGlvbiBvZiBxdWFsaXRhdGl2ZSBkYXRhLCBhbmQgaW4gY29uZmlkZW5jZSBpbnRlcnZhbCBlc3RpbWF0aW9uIGZvciBhIHBvcHVsYXRpb24gc3RhbmRhcmRcbiAgICAvLyBkZXZpYXRpb24gb2YgYSBub3JtYWwgZGlzdHJpYnV0aW9uIGZyb20gYSBzYW1wbGUgc3RhbmRhcmQgZGV2aWF0aW9uLlxuICAgIC8vXG4gICAgLy8gVmFsdWVzIGZyb20gQXBwZW5kaXggMSwgVGFibGUgSUlJIG9mIFdpbGxpYW0gVy4gSGluZXMgJiBEb3VnbGFzIEMuIE1vbnRnb21lcnksIFwiUHJvYmFiaWxpdHkgYW5kIFN0YXRpc3RpY3MgaW5cbiAgICAvLyBFbmdpbmVlcmluZyBhbmQgTWFuYWdlbWVudCBTY2llbmNlXCIsIFdpbGV5ICgxOTgwKS5cbiAgICB2YXIgY2hpX3NxdWFyZWRfZGlzdHJpYnV0aW9uX3RhYmxlID0ge1xuICAgICAgICAxOiB7IDAuOTk1OiAgMC4wMCwgMC45OTogIDAuMDAsIDAuOTc1OiAgMC4wMCwgMC45NTogIDAuMDAsIDAuOTogIDAuMDIsIDAuNTogIDAuNDUsIDAuMTogIDIuNzEsIDAuMDU6ICAzLjg0LCAwLjAyNTogIDUuMDIsIDAuMDE6ICA2LjYzLCAwLjAwNTogIDcuODggfSxcbiAgICAgICAgMjogeyAwLjk5NTogIDAuMDEsIDAuOTk6ICAwLjAyLCAwLjk3NTogIDAuMDUsIDAuOTU6ICAwLjEwLCAwLjk6ICAwLjIxLCAwLjU6ICAxLjM5LCAwLjE6ICA0LjYxLCAwLjA1OiAgNS45OSwgMC4wMjU6ICA3LjM4LCAwLjAxOiAgOS4yMSwgMC4wMDU6IDEwLjYwIH0sXG4gICAgICAgIDM6IHsgMC45OTU6ICAwLjA3LCAwLjk5OiAgMC4xMSwgMC45NzU6ICAwLjIyLCAwLjk1OiAgMC4zNSwgMC45OiAgMC41OCwgMC41OiAgMi4zNywgMC4xOiAgNi4yNSwgMC4wNTogIDcuODEsIDAuMDI1OiAgOS4zNSwgMC4wMTogMTEuMzQsIDAuMDA1OiAxMi44NCB9LFxuICAgICAgICA0OiB7IDAuOTk1OiAgMC4yMSwgMC45OTogIDAuMzAsIDAuOTc1OiAgMC40OCwgMC45NTogIDAuNzEsIDAuOTogIDEuMDYsIDAuNTogIDMuMzYsIDAuMTogIDcuNzgsIDAuMDU6ICA5LjQ5LCAwLjAyNTogMTEuMTQsIDAuMDE6IDEzLjI4LCAwLjAwNTogMTQuODYgfSxcbiAgICAgICAgNTogeyAwLjk5NTogIDAuNDEsIDAuOTk6ICAwLjU1LCAwLjk3NTogIDAuODMsIDAuOTU6ICAxLjE1LCAwLjk6ICAxLjYxLCAwLjU6ICA0LjM1LCAwLjE6ICA5LjI0LCAwLjA1OiAxMS4wNywgMC4wMjU6IDEyLjgzLCAwLjAxOiAxNS4wOSwgMC4wMDU6IDE2Ljc1IH0sXG4gICAgICAgIDY6IHsgMC45OTU6ICAwLjY4LCAwLjk5OiAgMC44NywgMC45NzU6ICAxLjI0LCAwLjk1OiAgMS42NCwgMC45OiAgMi4yMCwgMC41OiAgNS4zNSwgMC4xOiAxMC42NSwgMC4wNTogMTIuNTksIDAuMDI1OiAxNC40NSwgMC4wMTogMTYuODEsIDAuMDA1OiAxOC41NSB9LFxuICAgICAgICA3OiB7IDAuOTk1OiAgMC45OSwgMC45OTogIDEuMjUsIDAuOTc1OiAgMS42OSwgMC45NTogIDIuMTcsIDAuOTogIDIuODMsIDAuNTogIDYuMzUsIDAuMTogMTIuMDIsIDAuMDU6IDE0LjA3LCAwLjAyNTogMTYuMDEsIDAuMDE6IDE4LjQ4LCAwLjAwNTogMjAuMjggfSxcbiAgICAgICAgODogeyAwLjk5NTogIDEuMzQsIDAuOTk6ICAxLjY1LCAwLjk3NTogIDIuMTgsIDAuOTU6ICAyLjczLCAwLjk6ICAzLjQ5LCAwLjU6ICA3LjM0LCAwLjE6IDEzLjM2LCAwLjA1OiAxNS41MSwgMC4wMjU6IDE3LjUzLCAwLjAxOiAyMC4wOSwgMC4wMDU6IDIxLjk2IH0sXG4gICAgICAgIDk6IHsgMC45OTU6ICAxLjczLCAwLjk5OiAgMi4wOSwgMC45NzU6ICAyLjcwLCAwLjk1OiAgMy4zMywgMC45OiAgNC4xNywgMC41OiAgOC4zNCwgMC4xOiAxNC42OCwgMC4wNTogMTYuOTIsIDAuMDI1OiAxOS4wMiwgMC4wMTogMjEuNjcsIDAuMDA1OiAyMy41OSB9LFxuICAgICAgICAxMDogeyAwLjk5NTogIDIuMTYsIDAuOTk6ICAyLjU2LCAwLjk3NTogIDMuMjUsIDAuOTU6ICAzLjk0LCAwLjk6ICA0Ljg3LCAwLjU6ICA5LjM0LCAwLjE6IDE1Ljk5LCAwLjA1OiAxOC4zMSwgMC4wMjU6IDIwLjQ4LCAwLjAxOiAyMy4yMSwgMC4wMDU6IDI1LjE5IH0sXG4gICAgICAgIDExOiB7IDAuOTk1OiAgMi42MCwgMC45OTogIDMuMDUsIDAuOTc1OiAgMy44MiwgMC45NTogIDQuNTcsIDAuOTogIDUuNTgsIDAuNTogMTAuMzQsIDAuMTogMTcuMjgsIDAuMDU6IDE5LjY4LCAwLjAyNTogMjEuOTIsIDAuMDE6IDI0LjcyLCAwLjAwNTogMjYuNzYgfSxcbiAgICAgICAgMTI6IHsgMC45OTU6ICAzLjA3LCAwLjk5OiAgMy41NywgMC45NzU6ICA0LjQwLCAwLjk1OiAgNS4yMywgMC45OiAgNi4zMCwgMC41OiAxMS4zNCwgMC4xOiAxOC41NSwgMC4wNTogMjEuMDMsIDAuMDI1OiAyMy4zNCwgMC4wMTogMjYuMjIsIDAuMDA1OiAyOC4zMCB9LFxuICAgICAgICAxMzogeyAwLjk5NTogIDMuNTcsIDAuOTk6ICA0LjExLCAwLjk3NTogIDUuMDEsIDAuOTU6ICA1Ljg5LCAwLjk6ICA3LjA0LCAwLjU6IDEyLjM0LCAwLjE6IDE5LjgxLCAwLjA1OiAyMi4zNiwgMC4wMjU6IDI0Ljc0LCAwLjAxOiAyNy42OSwgMC4wMDU6IDI5LjgyIH0sXG4gICAgICAgIDE0OiB7IDAuOTk1OiAgNC4wNywgMC45OTogIDQuNjYsIDAuOTc1OiAgNS42MywgMC45NTogIDYuNTcsIDAuOTogIDcuNzksIDAuNTogMTMuMzQsIDAuMTogMjEuMDYsIDAuMDU6IDIzLjY4LCAwLjAyNTogMjYuMTIsIDAuMDE6IDI5LjE0LCAwLjAwNTogMzEuMzIgfSxcbiAgICAgICAgMTU6IHsgMC45OTU6ICA0LjYwLCAwLjk5OiAgNS4yMywgMC45NzU6ICA2LjI3LCAwLjk1OiAgNy4yNiwgMC45OiAgOC41NSwgMC41OiAxNC4zNCwgMC4xOiAyMi4zMSwgMC4wNTogMjUuMDAsIDAuMDI1OiAyNy40OSwgMC4wMTogMzAuNTgsIDAuMDA1OiAzMi44MCB9LFxuICAgICAgICAxNjogeyAwLjk5NTogIDUuMTQsIDAuOTk6ICA1LjgxLCAwLjk3NTogIDYuOTEsIDAuOTU6ICA3Ljk2LCAwLjk6ICA5LjMxLCAwLjU6IDE1LjM0LCAwLjE6IDIzLjU0LCAwLjA1OiAyNi4zMCwgMC4wMjU6IDI4Ljg1LCAwLjAxOiAzMi4wMCwgMC4wMDU6IDM0LjI3IH0sXG4gICAgICAgIDE3OiB7IDAuOTk1OiAgNS43MCwgMC45OTogIDYuNDEsIDAuOTc1OiAgNy41NiwgMC45NTogIDguNjcsIDAuOTogMTAuMDksIDAuNTogMTYuMzQsIDAuMTogMjQuNzcsIDAuMDU6IDI3LjU5LCAwLjAyNTogMzAuMTksIDAuMDE6IDMzLjQxLCAwLjAwNTogMzUuNzIgfSxcbiAgICAgICAgMTg6IHsgMC45OTU6ICA2LjI2LCAwLjk5OiAgNy4wMSwgMC45NzU6ICA4LjIzLCAwLjk1OiAgOS4zOSwgMC45OiAxMC44NywgMC41OiAxNy4zNCwgMC4xOiAyNS45OSwgMC4wNTogMjguODcsIDAuMDI1OiAzMS41MywgMC4wMTogMzQuODEsIDAuMDA1OiAzNy4xNiB9LFxuICAgICAgICAxOTogeyAwLjk5NTogIDYuODQsIDAuOTk6ICA3LjYzLCAwLjk3NTogIDguOTEsIDAuOTU6IDEwLjEyLCAwLjk6IDExLjY1LCAwLjU6IDE4LjM0LCAwLjE6IDI3LjIwLCAwLjA1OiAzMC4xNCwgMC4wMjU6IDMyLjg1LCAwLjAxOiAzNi4xOSwgMC4wMDU6IDM4LjU4IH0sXG4gICAgICAgIDIwOiB7IDAuOTk1OiAgNy40MywgMC45OTogIDguMjYsIDAuOTc1OiAgOS41OSwgMC45NTogMTAuODUsIDAuOTogMTIuNDQsIDAuNTogMTkuMzQsIDAuMTogMjguNDEsIDAuMDU6IDMxLjQxLCAwLjAyNTogMzQuMTcsIDAuMDE6IDM3LjU3LCAwLjAwNTogNDAuMDAgfSxcbiAgICAgICAgMjE6IHsgMC45OTU6ICA4LjAzLCAwLjk5OiAgOC45MCwgMC45NzU6IDEwLjI4LCAwLjk1OiAxMS41OSwgMC45OiAxMy4yNCwgMC41OiAyMC4zNCwgMC4xOiAyOS42MiwgMC4wNTogMzIuNjcsIDAuMDI1OiAzNS40OCwgMC4wMTogMzguOTMsIDAuMDA1OiA0MS40MCB9LFxuICAgICAgICAyMjogeyAwLjk5NTogIDguNjQsIDAuOTk6ICA5LjU0LCAwLjk3NTogMTAuOTgsIDAuOTU6IDEyLjM0LCAwLjk6IDE0LjA0LCAwLjU6IDIxLjM0LCAwLjE6IDMwLjgxLCAwLjA1OiAzMy45MiwgMC4wMjU6IDM2Ljc4LCAwLjAxOiA0MC4yOSwgMC4wMDU6IDQyLjgwIH0sXG4gICAgICAgIDIzOiB7IDAuOTk1OiAgOS4yNiwgMC45OTogMTAuMjAsIDAuOTc1OiAxMS42OSwgMC45NTogMTMuMDksIDAuOTogMTQuODUsIDAuNTogMjIuMzQsIDAuMTogMzIuMDEsIDAuMDU6IDM1LjE3LCAwLjAyNTogMzguMDgsIDAuMDE6IDQxLjY0LCAwLjAwNTogNDQuMTggfSxcbiAgICAgICAgMjQ6IHsgMC45OTU6ICA5Ljg5LCAwLjk5OiAxMC44NiwgMC45NzU6IDEyLjQwLCAwLjk1OiAxMy44NSwgMC45OiAxNS42NiwgMC41OiAyMy4zNCwgMC4xOiAzMy4yMCwgMC4wNTogMzYuNDIsIDAuMDI1OiAzOS4zNiwgMC4wMTogNDIuOTgsIDAuMDA1OiA0NS41NiB9LFxuICAgICAgICAyNTogeyAwLjk5NTogMTAuNTIsIDAuOTk6IDExLjUyLCAwLjk3NTogMTMuMTIsIDAuOTU6IDE0LjYxLCAwLjk6IDE2LjQ3LCAwLjU6IDI0LjM0LCAwLjE6IDM0LjI4LCAwLjA1OiAzNy42NSwgMC4wMjU6IDQwLjY1LCAwLjAxOiA0NC4zMSwgMC4wMDU6IDQ2LjkzIH0sXG4gICAgICAgIDI2OiB7IDAuOTk1OiAxMS4xNiwgMC45OTogMTIuMjAsIDAuOTc1OiAxMy44NCwgMC45NTogMTUuMzgsIDAuOTogMTcuMjksIDAuNTogMjUuMzQsIDAuMTogMzUuNTYsIDAuMDU6IDM4Ljg5LCAwLjAyNTogNDEuOTIsIDAuMDE6IDQ1LjY0LCAwLjAwNTogNDguMjkgfSxcbiAgICAgICAgMjc6IHsgMC45OTU6IDExLjgxLCAwLjk5OiAxMi44OCwgMC45NzU6IDE0LjU3LCAwLjk1OiAxNi4xNSwgMC45OiAxOC4xMSwgMC41OiAyNi4zNCwgMC4xOiAzNi43NCwgMC4wNTogNDAuMTEsIDAuMDI1OiA0My4xOSwgMC4wMTogNDYuOTYsIDAuMDA1OiA0OS42NSB9LFxuICAgICAgICAyODogeyAwLjk5NTogMTIuNDYsIDAuOTk6IDEzLjU3LCAwLjk3NTogMTUuMzEsIDAuOTU6IDE2LjkzLCAwLjk6IDE4Ljk0LCAwLjU6IDI3LjM0LCAwLjE6IDM3LjkyLCAwLjA1OiA0MS4zNCwgMC4wMjU6IDQ0LjQ2LCAwLjAxOiA0OC4yOCwgMC4wMDU6IDUwLjk5IH0sXG4gICAgICAgIDI5OiB7IDAuOTk1OiAxMy4xMiwgMC45OTogMTQuMjYsIDAuOTc1OiAxNi4wNSwgMC45NTogMTcuNzEsIDAuOTogMTkuNzcsIDAuNTogMjguMzQsIDAuMTogMzkuMDksIDAuMDU6IDQyLjU2LCAwLjAyNTogNDUuNzIsIDAuMDE6IDQ5LjU5LCAwLjAwNTogNTIuMzQgfSxcbiAgICAgICAgMzA6IHsgMC45OTU6IDEzLjc5LCAwLjk5OiAxNC45NSwgMC45NzU6IDE2Ljc5LCAwLjk1OiAxOC40OSwgMC45OiAyMC42MCwgMC41OiAyOS4zNCwgMC4xOiA0MC4yNiwgMC4wNTogNDMuNzcsIDAuMDI1OiA0Ni45OCwgMC4wMTogNTAuODksIDAuMDA1OiA1My42NyB9LFxuICAgICAgICA0MDogeyAwLjk5NTogMjAuNzEsIDAuOTk6IDIyLjE2LCAwLjk3NTogMjQuNDMsIDAuOTU6IDI2LjUxLCAwLjk6IDI5LjA1LCAwLjU6IDM5LjM0LCAwLjE6IDUxLjgxLCAwLjA1OiA1NS43NiwgMC4wMjU6IDU5LjM0LCAwLjAxOiA2My42OSwgMC4wMDU6IDY2Ljc3IH0sXG4gICAgICAgIDUwOiB7IDAuOTk1OiAyNy45OSwgMC45OTogMjkuNzEsIDAuOTc1OiAzMi4zNiwgMC45NTogMzQuNzYsIDAuOTogMzcuNjksIDAuNTogNDkuMzMsIDAuMTogNjMuMTcsIDAuMDU6IDY3LjUwLCAwLjAyNTogNzEuNDIsIDAuMDE6IDc2LjE1LCAwLjAwNTogNzkuNDkgfSxcbiAgICAgICAgNjA6IHsgMC45OTU6IDM1LjUzLCAwLjk5OiAzNy40OCwgMC45NzU6IDQwLjQ4LCAwLjk1OiA0My4xOSwgMC45OiA0Ni40NiwgMC41OiA1OS4zMywgMC4xOiA3NC40MCwgMC4wNTogNzkuMDgsIDAuMDI1OiA4My4zMCwgMC4wMTogODguMzgsIDAuMDA1OiA5MS45NSB9LFxuICAgICAgICA3MDogeyAwLjk5NTogNDMuMjgsIDAuOTk6IDQ1LjQ0LCAwLjk3NTogNDguNzYsIDAuOTU6IDUxLjc0LCAwLjk6IDU1LjMzLCAwLjU6IDY5LjMzLCAwLjE6IDg1LjUzLCAwLjA1OiA5MC41MywgMC4wMjU6IDk1LjAyLCAwLjAxOiAxMDAuNDIsIDAuMDA1OiAxMDQuMjIgfSxcbiAgICAgICAgODA6IHsgMC45OTU6IDUxLjE3LCAwLjk5OiA1My41NCwgMC45NzU6IDU3LjE1LCAwLjk1OiA2MC4zOSwgMC45OiA2NC4yOCwgMC41OiA3OS4zMywgMC4xOiA5Ni41OCwgMC4wNTogMTAxLjg4LCAwLjAyNTogMTA2LjYzLCAwLjAxOiAxMTIuMzMsIDAuMDA1OiAxMTYuMzIgfSxcbiAgICAgICAgOTA6IHsgMC45OTU6IDU5LjIwLCAwLjk5OiA2MS43NSwgMC45NzU6IDY1LjY1LCAwLjk1OiA2OS4xMywgMC45OiA3My4yOSwgMC41OiA4OS4zMywgMC4xOiAxMDcuNTcsIDAuMDU6IDExMy4xNCwgMC4wMjU6IDExOC4xNCwgMC4wMTogMTI0LjEyLCAwLjAwNTogMTI4LjMwIH0sXG4gICAgICAgIDEwMDogeyAwLjk5NTogNjcuMzMsIDAuOTk6IDcwLjA2LCAwLjk3NTogNzQuMjIsIDAuOTU6IDc3LjkzLCAwLjk6IDgyLjM2LCAwLjU6IDk5LjMzLCAwLjE6IDExOC41MCwgMC4wNTogMTI0LjM0LCAwLjAyNTogMTI5LjU2LCAwLjAxOiAxMzUuODEsIDAuMDA1OiAxNDAuMTcgfVxuICAgIH07XG5cbiAgICAvLyAjIM+HMiAoQ2hpLVNxdWFyZWQpIEdvb2RuZXNzLW9mLUZpdCBUZXN0XG4gICAgLy9cbiAgICAvLyBUaGUgW8+HMiAoQ2hpLVNxdWFyZWQpIEdvb2RuZXNzLW9mLUZpdCBUZXN0XShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dvb2RuZXNzX29mX2ZpdCNQZWFyc29uLjI3c19jaGktc3F1YXJlZF90ZXN0KVxuICAgIC8vIHVzZXMgYSBtZWFzdXJlIG9mIGdvb2RuZXNzIG9mIGZpdCB3aGljaCBpcyB0aGUgc3VtIG9mIGRpZmZlcmVuY2VzIGJldHdlZW4gb2JzZXJ2ZWQgYW5kIGV4cGVjdGVkIG91dGNvbWUgZnJlcXVlbmNpZXNcbiAgICAvLyAodGhhdCBpcywgY291bnRzIG9mIG9ic2VydmF0aW9ucyksIGVhY2ggc3F1YXJlZCBhbmQgZGl2aWRlZCBieSB0aGUgbnVtYmVyIG9mIG9ic2VydmF0aW9ucyBleHBlY3RlZCBnaXZlbiB0aGVcbiAgICAvLyBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLiBUaGUgcmVzdWx0aW5nIM+HMiBzdGF0aXN0aWMsIGBjaGlfc3F1YXJlZGAsIGNhbiBiZSBjb21wYXJlZCB0byB0aGUgY2hpLXNxdWFyZWQgZGlzdHJpYnV0aW9uXG4gICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBnb29kbmVzcyBvZiBmaXQuIEluIG9yZGVyIHRvIGRldGVybWluZSB0aGUgZGVncmVlcyBvZiBmcmVlZG9tIG9mIHRoZSBjaGktc3F1YXJlZCBkaXN0cmlidXRpb24sIG9uZVxuICAgIC8vIHRha2VzIHRoZSB0b3RhbCBudW1iZXIgb2Ygb2JzZXJ2ZWQgZnJlcXVlbmNpZXMgYW5kIHN1YnRyYWN0cyB0aGUgbnVtYmVyIG9mIGVzdGltYXRlZCBwYXJhbWV0ZXJzLiBUaGUgdGVzdCBzdGF0aXN0aWNcbiAgICAvLyBmb2xsb3dzLCBhcHByb3hpbWF0ZWx5LCBhIGNoaS1zcXVhcmUgZGlzdHJpYnV0aW9uIHdpdGggKGsg4oiSIGMpIGRlZ3JlZXMgb2YgZnJlZWRvbSB3aGVyZSBga2AgaXMgdGhlIG51bWJlciBvZiBub24tZW1wdHlcbiAgICAvLyBjZWxscyBhbmQgYGNgIGlzIHRoZSBudW1iZXIgb2YgZXN0aW1hdGVkIHBhcmFtZXRlcnMgZm9yIHRoZSBkaXN0cmlidXRpb24uXG4gICAgZnVuY3Rpb24gY2hpX3NxdWFyZWRfZ29vZG5lc3Nfb2ZfZml0KGRhdGEsIGRpc3RyaWJ1dGlvbl90eXBlLCBzaWduaWZpY2FuY2UpIHtcbiAgICAgICAgLy8gRXN0aW1hdGUgZnJvbSB0aGUgc2FtcGxlIGRhdGEsIGEgd2VpZ2h0ZWQgbWVhbi5cbiAgICAgICAgdmFyIGlucHV0X21lYW4gPSBtZWFuKGRhdGEpLFxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlZCB2YWx1ZSBvZiB0aGUgz4cyIHN0YXRpc3RpYy5cbiAgICAgICAgICAgIGNoaV9zcXVhcmVkID0gMCxcbiAgICAgICAgICAgIC8vIERlZ3JlZXMgb2YgZnJlZWRvbSwgY2FsY3VsYXRlZCBhcyAobnVtYmVyIG9mIGNsYXNzIGludGVydmFscyAtXG4gICAgICAgICAgICAvLyBudW1iZXIgb2YgaHlwb3RoZXNpemVkIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJzIGVzdGltYXRlZCAtIDEpXG4gICAgICAgICAgICBkZWdyZWVzX29mX2ZyZWVkb20sXG4gICAgICAgICAgICAvLyBOdW1iZXIgb2YgaHlwb3RoZXNpemVkIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJzIGVzdGltYXRlZCwgZXhwZWN0ZWQgdG8gYmUgc3VwcGxpZWQgaW4gdGhlIGRpc3RyaWJ1dGlvbiB0ZXN0LlxuICAgICAgICAgICAgLy8gTG9zZSBvbmUgZGVncmVlIG9mIGZyZWVkb20gZm9yIGVzdGltYXRpbmcgYGxhbWJkYWAgZnJvbSB0aGUgc2FtcGxlIGRhdGEuXG4gICAgICAgICAgICBjID0gMSxcbiAgICAgICAgICAgIC8vIFRoZSBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgdGhlIGh5cG90aGVzaXplZCBkaXN0cmlidXRpb24uXG4gICAgICAgICAgICBoeXBvdGhlc2l6ZWRfZGlzdHJpYnV0aW9uID0gZGlzdHJpYnV0aW9uX3R5cGUoaW5wdXRfbWVhbiksXG4gICAgICAgICAgICBvYnNlcnZlZF9mcmVxdWVuY2llcyA9IFtdLFxuICAgICAgICAgICAgZXhwZWN0ZWRfZnJlcXVlbmNpZXMgPSBbXSxcbiAgICAgICAgICAgIGs7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGFycmF5IGhvbGRpbmcgYSBoaXN0b2dyYW0gZnJvbSB0aGUgc2FtcGxlIGRhdGEsIG9mXG4gICAgICAgIC8vIHRoZSBmb3JtIGB7IHZhbHVlOiBudW1iZXJPZk9jdXJyZW5jZXMgfWBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZWRfZnJlcXVlbmNpZXNbZGF0YVtpXV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2RhdGFbaV1dID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2RhdGFbaV1dKys7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgaGlzdG9ncmFtIHdlIGNyZWF0ZWQgbWlnaHQgYmUgc3BhcnNlIC0gdGhlcmUgbWlnaHQgYmUgZ2Fwc1xuICAgICAgICAvLyBiZXR3ZWVuIHZhbHVlcy4gU28gd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSBoaXN0b2dyYW0sIG1ha2luZ1xuICAgICAgICAvLyBzdXJlIHRoYXQgaW5zdGVhZCBvZiB1bmRlZmluZWQsIGdhcHMgaGF2ZSAwIHZhbHVlcy5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG9ic2VydmVkX2ZyZXF1ZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZWRfZnJlcXVlbmNpZXNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBhcnJheSBob2xkaW5nIGEgaGlzdG9ncmFtIG9mIGV4cGVjdGVkIGRhdGEgZ2l2ZW4gdGhlXG4gICAgICAgIC8vIHNhbXBsZSBzaXplIGFuZCBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgICAgICBmb3IgKGsgaW4gaHlwb3RoZXNpemVkX2Rpc3RyaWJ1dGlvbikge1xuICAgICAgICAgICAgaWYgKGsgaW4gb2JzZXJ2ZWRfZnJlcXVlbmNpZXMpIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZF9mcmVxdWVuY2llc1trXSA9IGh5cG90aGVzaXplZF9kaXN0cmlidXRpb25ba10gKiBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdvcmtpbmcgYmFja3dhcmQgdGhyb3VnaCB0aGUgZXhwZWN0ZWQgZnJlcXVlbmNpZXMsIGNvbGxhcHNlIGNsYXNzZXNcbiAgICAgICAgLy8gaWYgbGVzcyB0aGFuIHRocmVlIG9ic2VydmF0aW9ucyBhcmUgZXhwZWN0ZWQgZm9yIGEgY2xhc3MuXG4gICAgICAgIC8vIFRoaXMgdHJhbnNmb3JtYXRpb24gaXMgYXBwbGllZCB0byB0aGUgb2JzZXJ2ZWQgZnJlcXVlbmNpZXMgYXMgd2VsbC5cbiAgICAgICAgZm9yIChrID0gZXhwZWN0ZWRfZnJlcXVlbmNpZXMubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0pIHtcbiAgICAgICAgICAgIGlmIChleHBlY3RlZF9mcmVxdWVuY2llc1trXSA8IDMpIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZF9mcmVxdWVuY2llc1trIC0gMV0gKz0gZXhwZWN0ZWRfZnJlcXVlbmNpZXNba107XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWRfZnJlcXVlbmNpZXMucG9wKCk7XG5cbiAgICAgICAgICAgICAgICBvYnNlcnZlZF9mcmVxdWVuY2llc1trIC0gMV0gKz0gb2JzZXJ2ZWRfZnJlcXVlbmNpZXNba107XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZWRfZnJlcXVlbmNpZXMucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHNxdWFyZWQgZGlmZmVyZW5jZXMgYmV0d2VlbiBvYnNlcnZlZCAmIGV4cGVjdGVkXG4gICAgICAgIC8vIGZyZXF1ZW5jaWVzLCBhY2N1bXVsYXRpbmcgdGhlIGBjaGlfc3F1YXJlZGAgc3RhdGlzdGljLlxuICAgICAgICBmb3IgKGsgPSAwOyBrIDwgb2JzZXJ2ZWRfZnJlcXVlbmNpZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGNoaV9zcXVhcmVkICs9IE1hdGgucG93KFxuICAgICAgICAgICAgICAgIG9ic2VydmVkX2ZyZXF1ZW5jaWVzW2tdIC0gZXhwZWN0ZWRfZnJlcXVlbmNpZXNba10sIDIpIC9cbiAgICAgICAgICAgICAgICBleHBlY3RlZF9mcmVxdWVuY2llc1trXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBkZWdyZWVzIG9mIGZyZWVkb20gZm9yIHRoaXMgdGVzdCBhbmQgbG9vayBpdCB1cCBpbiB0aGVcbiAgICAgICAgLy8gYGNoaV9zcXVhcmVkX2Rpc3RyaWJ1dGlvbl90YWJsZWAgaW4gb3JkZXIgdG9cbiAgICAgICAgLy8gYWNjZXB0IG9yIHJlamVjdCB0aGUgZ29vZG5lc3Mtb2YtZml0IG9mIHRoZSBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgICAgICBkZWdyZWVzX29mX2ZyZWVkb20gPSBvYnNlcnZlZF9mcmVxdWVuY2llcy5sZW5ndGggLSBjIC0gMTtcbiAgICAgICAgcmV0dXJuIGNoaV9zcXVhcmVkX2Rpc3RyaWJ1dGlvbl90YWJsZVtkZWdyZWVzX29mX2ZyZWVkb21dW3NpZ25pZmljYW5jZV0gPCBjaGlfc3F1YXJlZDtcbiAgICB9XG5cbiAgICAvLyAjIE1peGluXG4gICAgLy9cbiAgICAvLyBNaXhpbiBzaW1wbGVfc3RhdGlzdGljcyB0byBhIHNpbmdsZSBBcnJheSBpbnN0YW5jZSBpZiBwcm92aWRlZFxuICAgIC8vIG9yIHRoZSBBcnJheSBuYXRpdmUgb2JqZWN0IGlmIG5vdC4gVGhpcyBpcyBhbiBvcHRpb25hbFxuICAgIC8vIGZlYXR1cmUgdGhhdCBsZXRzIHlvdSB0cmVhdCBzaW1wbGVfc3RhdGlzdGljcyBhcyBhIG5hdGl2ZSBmZWF0dXJlXG4gICAgLy8gb2YgSmF2YXNjcmlwdC5cbiAgICBmdW5jdGlvbiBtaXhpbihhcnJheSkge1xuICAgICAgICB2YXIgc3VwcG9ydCA9ICEhKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyk7XG4gICAgICAgIGlmICghc3VwcG9ydCkgdGhyb3cgbmV3IEVycm9yKCd3aXRob3V0IGRlZmluZVByb3BlcnR5LCBzaW1wbGUtc3RhdGlzdGljcyBjYW5ub3QgYmUgbWl4ZWQgaW4nKTtcblxuICAgICAgICAvLyBvbmx5IG1ldGhvZHMgd2hpY2ggd29yayBvbiBiYXNpYyBhcnJheXMgaW4gYSBzaW5nbGUgc3RlcFxuICAgICAgICAvLyBhcmUgc3VwcG9ydGVkXG4gICAgICAgIHZhciBhcnJheU1ldGhvZHMgPSBbJ21lZGlhbicsICdzdGFuZGFyZF9kZXZpYXRpb24nLCAnc3VtJyxcbiAgICAgICAgICAgICdzYW1wbGVfc2tld25lc3MnLFxuICAgICAgICAgICAgJ21lYW4nLCAnbWluJywgJ21heCcsICdxdWFudGlsZScsICdnZW9tZXRyaWNfbWVhbicsXG4gICAgICAgICAgICAnaGFybW9uaWNfbWVhbiddO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhIGNsb3N1cmUgd2l0aCBhIG1ldGhvZCBuYW1lIHNvIHRoYXQgYSByZWZlcmVuY2VcbiAgICAgICAgLy8gbGlrZSBgYXJyYXlNZXRob2RzW2ldYCBkb2Vzbid0IGZvbGxvdyB0aGUgbG9vcCBpbmNyZW1lbnRcbiAgICAgICAgZnVuY3Rpb24gd3JhcChtZXRob2QpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBjYXN0IGFueSBhcmd1bWVudHMgaW50byBhbiBhcnJheSwgc2luY2UgdGhleSdyZVxuICAgICAgICAgICAgICAgIC8vIG5hdGl2ZWx5IG9iamVjdHNcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhlIGZpcnN0IGFyZ3VtZW50IHRoZSBhcnJheSBpdHNlbGZcbiAgICAgICAgICAgICAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIHNzIG1ldGhvZFxuICAgICAgICAgICAgICAgIHJldHVybiBzc1ttZXRob2RdLmFwcGx5KHNzLCBhcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZWxlY3Qgb2JqZWN0IHRvIGV4dGVuZFxuICAgICAgICB2YXIgZXh0ZW5kaW5nO1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHNoYWxsb3cgY29weSBvZiB0aGUgYXJyYXkgc28gdGhhdCBvdXIgaW50ZXJuYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbnMgZG8gbm90IGNoYW5nZSBpdCBieSByZWZlcmVuY2VcbiAgICAgICAgICAgIGV4dGVuZGluZyA9IGFycmF5LnNsaWNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRlbmRpbmcgPSBBcnJheS5wcm90b3R5cGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmb3IgZWFjaCBhcnJheSBmdW5jdGlvbiwgZGVmaW5lIGEgZnVuY3Rpb24gdGhhdCBnZXRzXG4gICAgICAgIC8vIHRoZSBhcnJheSBhcyB0aGUgZmlyc3QgYXJndW1lbnQuXG4gICAgICAgIC8vIFdlIHVzZSBbZGVmaW5lUHJvcGVydHldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2RlZmluZVByb3BlcnR5KVxuICAgICAgICAvLyBiZWNhdXNlIGl0IGFsbG93cyB0aGVzZSBwcm9wZXJ0aWVzIHRvIGJlIG5vbi1lbnVtZXJhYmxlOlxuICAgICAgICAvLyBgZm9yICh2YXIgaW4geClgIGxvb3BzIHdpbGwgbm90IHJ1biBpbnRvIHByb2JsZW1zIHdpdGggdGhpc1xuICAgICAgICAvLyBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHRlbmRpbmcsIGFycmF5TWV0aG9kc1tpXSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB3cmFwKGFycmF5TWV0aG9kc1tpXSksXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHRlbmRpbmc7XG4gICAgfVxuXG4gICAgc3MubGluZWFyX3JlZ3Jlc3Npb24gPSBsaW5lYXJfcmVncmVzc2lvbjtcbiAgICBzcy5zdGFuZGFyZF9kZXZpYXRpb24gPSBzdGFuZGFyZF9kZXZpYXRpb247XG4gICAgc3Mucl9zcXVhcmVkID0gcl9zcXVhcmVkO1xuICAgIHNzLm1lZGlhbiA9IG1lZGlhbjtcbiAgICBzcy5tZWFuID0gbWVhbjtcbiAgICBzcy5tb2RlID0gbW9kZTtcbiAgICBzcy5taW4gPSBtaW47XG4gICAgc3MubWF4ID0gbWF4O1xuICAgIHNzLnN1bSA9IHN1bTtcbiAgICBzcy5xdWFudGlsZSA9IHF1YW50aWxlO1xuICAgIHNzLnF1YW50aWxlX3NvcnRlZCA9IHF1YW50aWxlX3NvcnRlZDtcbiAgICBzcy5pcXIgPSBpcXI7XG4gICAgc3MubWFkID0gbWFkO1xuXG4gICAgc3Muc2FtcGxlX2NvdmFyaWFuY2UgPSBzYW1wbGVfY292YXJpYW5jZTtcbiAgICBzcy5zYW1wbGVfY29ycmVsYXRpb24gPSBzYW1wbGVfY29ycmVsYXRpb247XG4gICAgc3Muc2FtcGxlX3ZhcmlhbmNlID0gc2FtcGxlX3ZhcmlhbmNlO1xuICAgIHNzLnNhbXBsZV9zdGFuZGFyZF9kZXZpYXRpb24gPSBzYW1wbGVfc3RhbmRhcmRfZGV2aWF0aW9uO1xuICAgIHNzLnNhbXBsZV9za2V3bmVzcyA9IHNhbXBsZV9za2V3bmVzcztcblxuICAgIHNzLmdlb21ldHJpY19tZWFuID0gZ2VvbWV0cmljX21lYW47XG4gICAgc3MuaGFybW9uaWNfbWVhbiA9IGhhcm1vbmljX21lYW47XG4gICAgc3MudmFyaWFuY2UgPSB2YXJpYW5jZTtcbiAgICBzcy50X3Rlc3QgPSB0X3Rlc3Q7XG4gICAgc3MudF90ZXN0X3R3b19zYW1wbGUgPSB0X3Rlc3RfdHdvX3NhbXBsZTtcblxuICAgIC8vIGplbmtzXG4gICAgc3MuamVua3NNYXRyaWNlcyA9IGplbmtzTWF0cmljZXM7XG4gICAgc3MuamVua3NCcmVha3MgPSBqZW5rc0JyZWFrcztcbiAgICBzcy5qZW5rcyA9IGplbmtzO1xuXG4gICAgc3MuYmF5ZXNpYW4gPSBiYXllc2lhbjtcblxuICAgIC8vIERpc3RyaWJ1dGlvbi1yZWxhdGVkIG1ldGhvZHNcbiAgICBzcy5lcHNpbG9uID0gZXBzaWxvbjsgLy8gV2UgbWFrZSDOtSBhdmFpbGFibGUgdG8gdGhlIHRlc3Qgc3VpdGUuXG4gICAgc3MuZmFjdG9yaWFsID0gZmFjdG9yaWFsO1xuICAgIHNzLmJlcm5vdWxsaV9kaXN0cmlidXRpb24gPSBiZXJub3VsbGlfZGlzdHJpYnV0aW9uO1xuICAgIHNzLmJpbm9taWFsX2Rpc3RyaWJ1dGlvbiA9IGJpbm9taWFsX2Rpc3RyaWJ1dGlvbjtcbiAgICBzcy5wb2lzc29uX2Rpc3RyaWJ1dGlvbiA9IHBvaXNzb25fZGlzdHJpYnV0aW9uO1xuICAgIHNzLmNoaV9zcXVhcmVkX2dvb2RuZXNzX29mX2ZpdCA9IGNoaV9zcXVhcmVkX2dvb2RuZXNzX29mX2ZpdDtcblxuICAgIC8vIE5vcm1hbCBkaXN0cmlidXRpb25cbiAgICBzcy56X3Njb3JlID0gel9zY29yZTtcbiAgICBzcy5jdW11bGF0aXZlX3N0ZF9ub3JtYWxfcHJvYmFiaWxpdHkgPSBjdW11bGF0aXZlX3N0ZF9ub3JtYWxfcHJvYmFiaWxpdHk7XG4gICAgc3Muc3RhbmRhcmRfbm9ybWFsX3RhYmxlID0gc3RhbmRhcmRfbm9ybWFsX3RhYmxlO1xuXG4gICAgLy8gQWxpYXMgdGhpcyBpbnRvIGl0cyBjb21tb24gbmFtZVxuICAgIHNzLmF2ZXJhZ2UgPSBtZWFuO1xuICAgIHNzLmludGVycXVhcnRpbGVfcmFuZ2UgPSBpcXI7XG4gICAgc3MubWl4aW4gPSBtaXhpbjtcbiAgICBzcy5tZWRpYW5fYWJzb2x1dGVfZGV2aWF0aW9uID0gbWFkO1xuXG59KSh0aGlzKTtcbiIsIi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXZlbiVFMiU4MCU5M29kZF9ydWxlXG4vLyBtb2RpZmllZCBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vc3Vic3RhY2svcG9pbnQtaW4tcG9seWdvbi9ibG9iL21hc3Rlci9pbmRleC5qc1xuLy8gd2hpY2ggd2FzIG1vZGlmaWVkIGZyb20gaHR0cDovL3d3dy5lY3NlLnJwaS5lZHUvSG9tZXBhZ2VzL3dyZi9SZXNlYXJjaC9TaG9ydF9Ob3Rlcy9wbnBvbHkuaHRtbFxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50LCBwb2x5Z29uKXtcbiAgdmFyIHggPSBwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1swXVxuICB2YXIgeSA9IHBvaW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdXG4gIHZhciB2cyA9IHBvbHlnb24uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1cblxuICB2YXIgaXNJbnNpZGUgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IDAsIGogPSB2cy5sZW5ndGggLSAxOyBpIDwgdnMubGVuZ3RoOyBqID0gaSsrKSB7XG4gICAgdmFyIHhpID0gdnNbaV1bMF0sIHlpID0gdnNbaV1bMV07XG4gICAgdmFyIHhqID0gdnNbal1bMF0sIHlqID0gdnNbal1bMV07XG4gICAgXG4gICAgdmFyIGludGVyc2VjdCA9ICgoeWkgPiB5KSAhPSAoeWogPiB5KSlcbiAgICAgICAgJiYgKHggPCAoeGogLSB4aSkgKiAoeSAtIHlpKSAvICh5aiAtIHlpKSArIHhpKTtcbiAgICBpZiAoaW50ZXJzZWN0KSBpc0luc2lkZSA9ICFpc0luc2lkZTtcbiAgfVxuICByZXR1cm4gaXNJbnNpZGVcbn1cblxuIiwidmFyIHNzID0gcmVxdWlyZSgnc2ltcGxlLXN0YXRpc3RpY3MnKTtcbnZhciBpbnNpZGUgPSByZXF1aXJlKCd0dXJmLWluc2lkZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwb2x5RkMsIHB0RkMsIGluRmllbGQsIG91dEZpZWxkLCBkb25lKSB7XG4gIHBvbHlGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHBvbHkpe1xuICAgIGlmKCFwb2x5LnByb3BlcnRpZXMpe1xuICAgICAgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgfVxuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBwdEZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocHQpe1xuICAgICAgaWYgKGluc2lkZShwdCwgcG9seSkpIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IHNzLnZhcmlhbmNlKHZhbHVlcyk7XG4gIH0pXG5cbiAgcmV0dXJuIHBvbHlGQztcbn0iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWFnZ3JlZ2F0ZS9ub2RlX21vZHVsZXMvdHVyZi1taW4vbm9kZV9tb2R1bGVzL3NpbXBsZS1zdGF0aXN0aWNzL3NyYy9zaW1wbGVfc3RhdGlzdGljcy5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgZGlzdGFuY2UgPSByZXF1aXJlKCd0dXJmLWRpc3RhbmNlJyk7XG52YXIgcG9pbnQgPSByZXF1aXJlKCd0dXJmLXBvaW50Jyk7XG52YXIgYmVhcmluZyA9IHJlcXVpcmUoJ3R1cmYtYmVhcmluZycpO1xudmFyIGRlc3RpbmF0aW9uID0gcmVxdWlyZSgndHVyZi1kZXN0aW5hdGlvbicpO1xuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIExpbmVTdHJpbmd9IGZlYXR1cmUgYW5kIHJldHVybnMgYSB7QGxpbmsgUG9pbnR9IGZlYXR1cmUgYXQgYSBzcGVjaWZpZWQgZGlzdGFuY2UgYWxvbmcgYSBsaW5lLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9hbG9uZ1xuICogQHBhcmFtIHtMaW5lU3RyaW5nfSBsaW5lIGEgTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAcGFyYW0ge051bWJlcn0gZGlzdGFuY2UgZGlzdGFuY2UgYWxvbmcgdGhlIGxpbmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdW5pdHM9bWlsZXNdIGNhbiBiZSBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVyc1xuICogQHJldHVybiB7UG9pbnR9IFBvaW50IGFsb25nIHRoZSBsaW5lIGF0IGBkaXN0YW5jZWAgZGlzdGFuY2VcbiAqIEBleGFtcGxlXG4gKiB2YXIgbGluZSA9IHR1cmYubGluZXN0cmluZyhbXG4gKiAgWy03Ny4wMzE2NjksIDM4Ljg3ODYwNV0sXG4gKiAgWy03Ny4wMjk2MDksIDM4Ljg4MTk0Nl0sXG4gKiAgWy03Ny4wMjAzMzksIDM4Ljg4NDA4NF0sXG4gKiAgWy03Ny4wMjU2NjEsIDM4Ljg4NTgyMV0sXG4gKiAgWy03Ny4wMjE4ODQsIDM4Ljg4OTU2M10sXG4gKiAgWy03Ny4wMTk4MjQsIDM4Ljg5MjM2OF1cbiAqIF0pO1xuICpcbiAqIHZhciBhbG9uZyA9IHR1cmYuYWxvbmcobGluZSwgMSwgJ21pbGVzJyk7XG4gKlxuICogLy89YWxvbmdcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGluZSwgZGlzdCwgdW5pdHMpIHtcbiAgdmFyIGNvb3JkcztcbiAgaWYobGluZS50eXBlID09PSAnRmVhdHVyZScpIGNvb3JkcyA9IGxpbmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gIGVsc2UgaWYobGluZS50eXBlID09PSAnTGluZVN0cmluZycpIGNvb3JkcyA9IGxpbmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdpbnB1dCBtdXN0IGJlIGEgTGluZVN0cmluZyBGZWF0dXJlIG9yIEdlb21ldHJ5Jyk7XG5cbiAgdmFyIHRyYXZlbGxlZCA9IDA7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZGlzdCA+PSB0cmF2ZWxsZWQgJiYgaSA9PT0gY29vcmRzLmxlbmd0aCAtIDEpIGJyZWFrO1xuICAgIGVsc2UgaWYodHJhdmVsbGVkID49IGRpc3QpIHtcbiAgICAgIHZhciBvdmVyc2hvdCA9IGRpc3QgLSB0cmF2ZWxsZWQ7XG4gICAgICBpZighb3ZlcnNob3QpIHJldHVybiBwb2ludChjb29yZHNbaV0pO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBiZWFyaW5nKHBvaW50KGNvb3Jkc1tpXSksIHBvaW50KGNvb3Jkc1tpLTFdKSkgLSAxODA7XG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZWQgPSBkZXN0aW5hdGlvbihwb2ludChjb29yZHNbaV0pLCBvdmVyc2hvdCwgZGlyZWN0aW9uLCB1bml0cyk7XG4gICAgICAgIHJldHVybiBpbnRlcnBvbGF0ZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdHJhdmVsbGVkICs9IGRpc3RhbmNlKHBvaW50KGNvb3Jkc1tpXSksIHBvaW50KGNvb3Jkc1tpKzFdKSwgdW5pdHMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcG9pbnQoY29vcmRzW2Nvb3Jkcy5sZW5ndGggLSAxXSk7XG59XG4iLCIvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGF2ZXJzaW5lX2Zvcm11bGFcbi8vaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocG9pbnQxLCBwb2ludDIpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMxID0gcG9pbnQxLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgIHZhciBjb29yZGluYXRlczIgPSBwb2ludDIuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG5cbiAgICB2YXIgbG9uMSA9IHRvUmFkKGNvb3JkaW5hdGVzMVswXSk7XG4gICAgdmFyIGxvbjIgPSB0b1JhZChjb29yZGluYXRlczJbMF0pO1xuICAgIHZhciBsYXQxID0gdG9SYWQoY29vcmRpbmF0ZXMxWzFdKTtcbiAgICB2YXIgbGF0MiA9IHRvUmFkKGNvb3JkaW5hdGVzMlsxXSk7XG4gICAgdmFyIGEgPSBNYXRoLnNpbihsb24yIC0gbG9uMSkgKiBNYXRoLmNvcyhsYXQyKTtcbiAgICB2YXIgYiA9IE1hdGguY29zKGxhdDEpICogTWF0aC5zaW4obGF0MikgLVxuICAgICAgICBNYXRoLnNpbihsYXQxKSAqIE1hdGguY29zKGxhdDIpICogTWF0aC5jb3MobG9uMiAtIGxvbjEpO1xuXG4gICAgdmFyIGJlYXJpbmcgPSB0b0RlZyhNYXRoLmF0YW4yKGEsIGIpKTtcblxuICAgIHJldHVybiBiZWFyaW5nO1xufVxuXG5mdW5jdGlvbiB0b1JhZChkZWdyZWUpIHtcbiAgICByZXR1cm4gZGVncmVlICogTWF0aC5QSSAvIDE4MDtcbn1cblxuZnVuY3Rpb24gdG9EZWcocmFkaWFuKSB7XG4gICAgcmV0dXJuIHJhZGlhbiAqIDE4MCAvIE1hdGguUEk7XG59XG4iLCIvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGF2ZXJzaW5lX2Zvcm11bGFcbi8vaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXN0aW5hdGlvbiBwb2ludCBnaXZlbiBhIHtAbGluayBQb2ludH0gZmVhdHVyZTsgZGlzdGFuY2UgaW4gZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnM7IGFuZCBiZWFyaW5nIGluIGRlZ3JlZXMuIFRoaXMgdXNlcyB0aGUgW0hhdmVyc2luZSBmb3JtdWxhXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hhdmVyc2luZV9mb3JtdWxhKSB0byBhY2NvdW50IGZvciBnbG9iYWwgY3VydmF0dXJlLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9kZXN0aW5hdGlvblxuICogQHBhcmFtIHtQb2ludH0gc3RhcnQgYSBQb2ludCBmZWF0dXJlIGF0IHRoZSBzdGFydGluZyBwb2ludFxuICogQHBhcmFtIHtOdW1iZXJ9IGRpc3RhbmNlIGRpc3RhbmNlIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50XG4gKiBAcGFyYW0ge051bWJlcn0gYmVhcmluZyByYW5naW5nIGZyb20gLTE4MCB0byAxODBcbiAqIEBwYXJhbSB7U3RyaW5nfSB1bml0cyBtaWxlcywga2lsb21ldGVycywgZGVncmVlcywgb3IgcmFkaWFuc1xuICogQHJldHVybnMge1BvaW50fSBhIHtAbGluayBQb2ludH0gZmVhdHVyZSBhdCB0aGUgZGVzdGluYXRpb25cbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQxID0gdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSk7XG4gKiB2YXIgZGlzdGFuY2UgPSA1MDtcbiAqIHZhciBiZWFyaW5nID0gOTA7XG4gKiB2YXIgdW5pdHMgPSAnbWlsZXMnO1xuICpcbiAqIHZhciBkZXN0aW5hdGlvbiA9IHR1cmYuZGVzdGluYXRpb24ocG9pbnQxLCBkaXN0YW5jZSwgYmVhcmluZywgdW5pdHMpO1xuICogcG9pbnQxLnByb3BlcnRpZXNbJ21hcmtlci1jb2xvciddID0gJyNmMDAnO1xuICogZGVzdGluYXRpb24ucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnIzBmMCc7XG4gKlxuICogdmFyIHJlc3VsdCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW3BvaW50MSwgZGVzdGluYXRpb25dKTtcbiAqXG4gKiAvLz1yZXN1bHRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocG9pbnQxLCBkaXN0YW5jZSwgYmVhcmluZywgdW5pdHMpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMxID0gcG9pbnQxLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgIHZhciBsb25naXR1ZGUxID0gdG9SYWQoY29vcmRpbmF0ZXMxWzBdKTtcbiAgICB2YXIgbGF0aXR1ZGUxID0gdG9SYWQoY29vcmRpbmF0ZXMxWzFdKTtcbiAgICB2YXIgYmVhcmluZ19yYWQgPSB0b1JhZChiZWFyaW5nKTtcblxuICAgIHZhciBSID0gMDtcbiAgICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgY2FzZSAnbWlsZXMnOlxuICAgICAgICBSID0gMzk2MDtcbiAgICAgICAgYnJlYWtcbiAgICBjYXNlICdraWxvbWV0ZXJzJzpcbiAgICAgICAgUiA9IDYzNzM7XG4gICAgICAgIGJyZWFrXG4gICAgY2FzZSAnZGVncmVlcyc6XG4gICAgICAgIFIgPSA1Ny4yOTU3Nzk1O1xuICAgICAgICBicmVha1xuICAgIGNhc2UgJ3JhZGlhbnMnOlxuICAgICAgICBSID0gMTtcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB2YXIgbGF0aXR1ZGUyID0gTWF0aC5hc2luKE1hdGguc2luKGxhdGl0dWRlMSkgKiBNYXRoLmNvcyhkaXN0YW5jZSAvIFIpICtcbiAgICAgICAgTWF0aC5jb3MobGF0aXR1ZGUxKSAqIE1hdGguc2luKGRpc3RhbmNlIC8gUikgKiBNYXRoLmNvcyhiZWFyaW5nX3JhZCkpO1xuICAgIHZhciBsb25naXR1ZGUyID0gbG9uZ2l0dWRlMSArIE1hdGguYXRhbjIoTWF0aC5zaW4oYmVhcmluZ19yYWQpICogTWF0aC5zaW4oZGlzdGFuY2UgLyBSKSAqIE1hdGguY29zKGxhdGl0dWRlMSksXG4gICAgICAgIE1hdGguY29zKGRpc3RhbmNlIC8gUikgLSBNYXRoLnNpbihsYXRpdHVkZTEpICogTWF0aC5zaW4obGF0aXR1ZGUyKSk7XG5cbiAgICByZXR1cm4gcG9pbnQoW3RvRGVnKGxvbmdpdHVkZTIpLCB0b0RlZyhsYXRpdHVkZTIpXSk7XG59O1xuXG5mdW5jdGlvbiB0b1JhZChkZWdyZWUpIHtcbiAgICByZXR1cm4gZGVncmVlICogTWF0aC5QSSAvIDE4MDtcbn1cblxuZnVuY3Rpb24gdG9EZWcocmFkKSB7XG4gICAgcmV0dXJuIHJhZCAqIDE4MCAvIE1hdGguUEk7XG59XG4iLCIvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGF2ZXJzaW5lX2Zvcm11bGFcbi8vaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2ludDEsIHBvaW50MiwgdW5pdHMpe1xuICB2YXIgY29vcmRpbmF0ZXMxID0gcG9pbnQxLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICB2YXIgY29vcmRpbmF0ZXMyID0gcG9pbnQyLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuXG4gIHZhciBkTGF0ID0gdG9SYWQoY29vcmRpbmF0ZXMyWzFdIC0gY29vcmRpbmF0ZXMxWzFdKTtcbiAgdmFyIGRMb24gPSB0b1JhZChjb29yZGluYXRlczJbMF0gLSBjb29yZGluYXRlczFbMF0pO1xuICB2YXIgbGF0MSA9IHRvUmFkKGNvb3JkaW5hdGVzMVsxXSk7XG4gIHZhciBsYXQyID0gdG9SYWQoY29vcmRpbmF0ZXMyWzFdKTtcbiAgdmFyIGEgPSBNYXRoLnNpbihkTGF0LzIpICogTWF0aC5zaW4oZExhdC8yKSArXG4gICAgICAgICAgTWF0aC5zaW4oZExvbi8yKSAqIE1hdGguc2luKGRMb24vMikgKiBNYXRoLmNvcyhsYXQxKSAqIE1hdGguY29zKGxhdDIpO1xuICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpO1xuXG4gIHZhciBSID0gMDtcbiAgc3dpdGNoKHVuaXRzKXtcbiAgICBjYXNlICdtaWxlcyc6XG4gICAgICBSID0gMzk2MDtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAna2lsb21ldGVycyc6XG4gICAgICBSID0gNjM3MztcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnZGVncmVlcyc6XG4gICAgICBSID0gNTcuMjk1Nzc5NTtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAncmFkaWFucyc6XG4gICAgICBSID0gMTtcbiAgICAgIGJyZWFrXG4gIH1cbiAgdmFyIGRpc3RhbmNlID0gUiAqIGM7XG4gIHJldHVybiBkaXN0YW5jZTtcbn1cblxuZnVuY3Rpb24gdG9SYWQoZGVncmVlKXtcbiAgcmV0dXJuIGRlZ3JlZSAqIE1hdGguUEkgLyAxODA7XG59XG4iLCIvKipcbiAqIEdlbmVyYXRlcyBhIG5ldyB7QGxpbmsgUG9pbnR9IGZlYXR1cmUsIGdpdmVuIGNvb3JkaW5hdGVzXG4gKiBhbmQsIG9wdGlvbmFsbHksIHByb3BlcnRpZXMuXG4gKlxuICogQG1vZHVsZSB0dXJmL3BvaW50XG4gKiBAcGFyYW0ge251bWJlcn0gbG9uZ2l0dWRlIC0gcG9zaXRpb24gd2VzdCB0byBlYXN0IGluIGRlY2ltYWwgZGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IGxhdGl0dWRlIC0gcG9zaXRpb24gc291dGggdG8gbm9ydGggaW4gZGVjaW1hbCBkZWdyZWVzXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIGFuIG9wdGlvbmFsIG9iamVjdCB0aGF0IGlzIHVzZWQgYXMgdGhlIEZlYXR1cmUnc1xuICogcHJvcGVydGllc1xuICogQHJldHVybiB7UG9pbnR9IG91dHB1dFxuICogQGV4YW1wbGVcbiAqIHZhciBwdDEgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdKTtcbiAqIC8vPXB0MVxuICovXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzKSB7XG4gIGlmICghaXNBcnJheShjb29yZGluYXRlcykpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBhcnJheScpO1xuICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGF0IGxlYXN0IDIgbnVtYmVycyBsb25nJyk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJGZWF0dXJlXCIsXG4gICAgZ2VvbWV0cnk6IHtcbiAgICAgIHR5cGU6IFwiUG9pbnRcIixcbiAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sXG4gICAgcHJvcGVydGllczogcHJvcGVydGllcyB8fCB7fVxuICB9O1xufTtcbiIsInZhciBnZW9tZXRyeUFyZWEgPSByZXF1aXJlKCdnZW9qc29uLWFyZWEnKS5nZW9tZXRyeTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBHZW9KU09OfSBmZWF0dXJlIG9yIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2YgYW55IHR5cGUgYW5kIHJldHVybnMgdGhlIGFyZWEgb2YgdGhhdCBmZWF0dXJlXG4gKiBpbiBzcXVhcmUgbWV0ZXJzLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9hcmVhXG4gKiBAcGFyYW0ge0dlb0pTT059IGlucHV0IGEge0BsaW5rIEZlYXR1cmV9IG9yIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2YgYW55IHR5cGVcbiAqIEByZXR1cm4ge051bWJlcn0gYXJlYSBpbiBzcXVhcmUgbWV0ZXJzXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb25zID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4gKiAgIHR1cmYucG9seWdvbihbW1xuICogICAgIFstNjcuMDMxMDIxLCAxMC40NTgxMDJdLFxuICogICAgIFstNjcuMDMxMDIxLCAxMC41MzM3Ml0sXG4gKiAgICAgWy02Ni45MjkzOTcsIDEwLjUzMzcyXSxcbiAqICAgICBbLTY2LjkyOTM5NywgMTAuNDU4MTAyXSxcbiAqICAgICBbLTY3LjAzMTAyMSwgMTAuNDU4MTAyXVxuICogICBdXSksXG4gKiAgIHR1cmYucG9seWdvbihbW1xuICogICAgIFstNjYuOTE5Nzg0LCAxMC4zOTczMjVdLFxuICogICAgIFstNjYuOTE5Nzg0LCAxMC41MTM0NjddLFxuICogICAgIFstNjYuODA1MTE0LCAxMC41MTM0NjddLFxuICogICAgIFstNjYuODA1MTE0LCAxMC4zOTczMjVdLFxuICogICAgIFstNjYuOTE5Nzg0LCAxMC4zOTczMjVdXG4gKiAgIF1dKVxuICogXSk7XG4gKlxuICogdmFyIGFyZWEgPSB0dXJmLmFyZWEocG9seWdvbnMpO1xuICpcbiAqIC8vPWFyZWFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihfKSB7XG4gICAgaWYgKF8udHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgc3VtID0gMDsgaSA8IF8uZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChfLmZlYXR1cmVzW2ldLmdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgc3VtICs9IGdlb21ldHJ5QXJlYShfLmZlYXR1cmVzW2ldLmdlb21ldHJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VtO1xuICAgIH0gZWxzZSBpZiAoXy50eXBlID09PSAnRmVhdHVyZScpIHtcbiAgICAgICAgcmV0dXJuIGdlb21ldHJ5QXJlYShfLmdlb21ldHJ5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ2VvbWV0cnlBcmVhKF8pO1xuICAgIH1cbn07XG4iLCJ2YXIgd2dzODQgPSByZXF1aXJlKCd3Z3M4NCcpO1xuXG5tb2R1bGUuZXhwb3J0cy5nZW9tZXRyeSA9IGdlb21ldHJ5O1xubW9kdWxlLmV4cG9ydHMucmluZyA9IHJpbmdBcmVhO1xuXG5mdW5jdGlvbiBnZW9tZXRyeShfKSB7XG4gICAgdmFyIGFyZWEgPSAwLCBpO1xuICAgIHN3aXRjaCAoXy50eXBlKSB7XG4gICAgICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgICAgICAgICAgcmV0dXJuIHBvbHlnb25BcmVhKF8uY29vcmRpbmF0ZXMpO1xuICAgICAgICBjYXNlICdNdWx0aVBvbHlnb24nOlxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IF8uY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcmVhICs9IHBvbHlnb25BcmVhKF8uY29vcmRpbmF0ZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFyZWE7XG4gICAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgY2FzZSAnTXVsdGlQb2ludCc6XG4gICAgICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgICAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGNhc2UgJ0dlb21ldHJ5Q29sbGVjdGlvbic6XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgXy5nZW9tZXRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJlYSArPSBnZW9tZXRyeShfLmdlb21ldHJpZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFyZWE7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwb2x5Z29uQXJlYShjb29yZHMpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgaWYgKGNvb3JkcyAmJiBjb29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhcmVhICs9IE1hdGguYWJzKHJpbmdBcmVhKGNvb3Jkc1swXSkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhyaW5nQXJlYShjb29yZHNbaV0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIGFwcHJveGltYXRlIGFyZWEgb2YgdGhlIHBvbHlnb24gd2VyZSBpdCBwcm9qZWN0ZWQgb250b1xuICogICAgIHRoZSBlYXJ0aC4gIE5vdGUgdGhhdCB0aGlzIGFyZWEgd2lsbCBiZSBwb3NpdGl2ZSBpZiByaW5nIGlzIG9yaWVudGVkXG4gKiAgICAgY2xvY2t3aXNlLCBvdGhlcndpc2UgaXQgd2lsbCBiZSBuZWdhdGl2ZS5cbiAqXG4gKiBSZWZlcmVuY2U6XG4gKiBSb2JlcnQuIEcuIENoYW1iZXJsYWluIGFuZCBXaWxsaWFtIEguIER1cXVldHRlLCBcIlNvbWUgQWxnb3JpdGhtcyBmb3JcbiAqICAgICBQb2x5Z29ucyBvbiBhIFNwaGVyZVwiLCBKUEwgUHVibGljYXRpb24gMDctMDMsIEpldCBQcm9wdWxzaW9uXG4gKiAgICAgTGFib3JhdG9yeSwgUGFzYWRlbmEsIENBLCBKdW5lIDIwMDcgaHR0cDovL3Rycy1uZXcuanBsLm5hc2EuZ292L2RzcGFjZS9oYW5kbGUvMjAxNC80MDQwOVxuICpcbiAqIFJldHVybnM6XG4gKiB7ZmxvYXR9IFRoZSBhcHByb3hpbWF0ZSBzaWduZWQgZ2VvZGVzaWMgYXJlYSBvZiB0aGUgcG9seWdvbiBpbiBzcXVhcmVcbiAqICAgICBtZXRlcnMuXG4gKi9cblxuZnVuY3Rpb24gcmluZ0FyZWEoY29vcmRzKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuXG4gICAgaWYgKGNvb3Jkcy5sZW5ndGggPiAyKSB7XG4gICAgICAgIHZhciBwMSwgcDI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgcDEgPSBjb29yZHNbaV07XG4gICAgICAgICAgICBwMiA9IGNvb3Jkc1tpICsgMV07XG4gICAgICAgICAgICBhcmVhICs9IHJhZChwMlswXSAtIHAxWzBdKSAqICgyICsgTWF0aC5zaW4ocmFkKHAxWzFdKSkgKyBNYXRoLnNpbihyYWQocDJbMV0pKSk7XG4gICAgICAgIH1cblxuICAgICAgICBhcmVhID0gYXJlYSAqIHdnczg0LlJBRElVUyAqIHdnczg0LlJBRElVUyAvIDI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZWE7XG59XG5cbmZ1bmN0aW9uIHJhZChfKSB7XG4gICAgcmV0dXJuIF8gKiBNYXRoLlBJIC8gMTgwO1xufVxuIiwibW9kdWxlLmV4cG9ydHMuUkFESVVTID0gNjM3ODEzNztcbm1vZHVsZS5leHBvcnRzLkZMQVRURU5JTkcgPSAxLzI5OC4yNTcyMjM1NjM7XG5tb2R1bGUuZXhwb3J0cy5QT0xBUl9SQURJVVMgPSA2MzU2NzUyLjMxNDI7XG4iLCJ2YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhdmVyYWdlIHZhbHVlIG9mIGEgZmllbGQgZm9yIGEgc2V0IG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXMgd2l0aGluIGEgc2V0IG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcy5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvYXZlcmFnZVxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9seWdvbnMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXNcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHBvaW50cyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCB0aGUgZmllbGQgaW4gdGhlIGBwb2ludHNgIGZlYXR1cmVzIGZyb20gd2hpY2ggdG8gcHVsbCB2YWx1ZXMgdG8gYXZlcmFnZVxuICogQHBhcmFtIHtzdHJpbmd9IG91dHB1dEZpZWxkIHRoZSBmaWVsZCBpbiB0aGUgYHBvbHlnb25zYCBGZWF0dXJlQ29sbGVjdGlvbiB0byBwdXQgcmVzdWx0cyBvZiB0aGUgYXZlcmFnZXNcbiAqIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyB3aXRoIHRoZSB2YWx1ZSBvZiBgb3V0RmllbGRgIHNldCB0byB0aGUgY2FsY3VsYXRlZCBhdmVyYWdlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb25zID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4gKiAgdHVyZi5wb2x5Z29uKFtbXG4gKiAgICBbMTAuNjY2MzUxLCA1OS44OTA2NTldLFxuICogICAgWzEwLjY2NjM1MSwgNTkuOTM2Nzg0XSxcbiAqICAgIFsxMC43NjI0ODEsIDU5LjkzNjc4NF0sXG4gKiAgICBbMTAuNzYyNDgxLCA1OS44OTA2NTldLFxuICogICAgWzEwLjY2NjM1MSwgNTkuODkwNjU5XVxuICogIF1dKSxcbiAqICB0dXJmLnBvbHlnb24oW1tcbiAqICAgIFsxMC43NjQ1NDEsIDU5Ljg4OTI4MV0sXG4gKiAgICBbMTAuNzY0NTQxLCA1OS45MzcxMjhdLFxuICogICAgWzEwLjg2NjE2NSwgNTkuOTM3MTI4XSxcbiAqICAgIFsxMC44NjYxNjUsIDU5Ljg4OTI4MV0sXG4gKiAgICBbMTAuNzY0NTQxLCA1OS44ODkyODFdXG4gKiAgXV0pXG4gKiBdKTtcbiAqIHZhciBwb2ludHMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiAqICB0dXJmLnBvaW50KFsxMC43MjQwMjksIDU5LjkyNjgwN10sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiAqICB0dXJmLnBvaW50KFsxMC43MTU3ODksIDU5LjkwNDc3OF0sIHtwb3B1bGF0aW9uOiA2MDB9KSxcbiAqICB0dXJmLnBvaW50KFsxMC43NDYwMDIsIDU5LjkwODU2Nl0sIHtwb3B1bGF0aW9uOiAxMDB9KSxcbiAqICB0dXJmLnBvaW50KFsxMC44MDY0MjcsIDU5LjkwODkxMF0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiAqICB0dXJmLnBvaW50KFsxMC43OTU0NCwgNTkuOTMxNjI0XSwge3BvcHVsYXRpb246IDMwMH0pXG4gKiBdKTtcbiAqXG4gKiB2YXIgYXZlcmFnZWQgPSB0dXJmLmF2ZXJhZ2UoXG4gKiAgcG9seWdvbnMsIHBvaW50cywgJ3BvcHVsYXRpb24nLCAncG9wX2F2ZycpO1xuICpcbiAqIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFxuICogIHBvaW50cy5mZWF0dXJlcy5jb25jYXQoYXZlcmFnZWQuZmVhdHVyZXMpKTtcbiAqXG4gKiAvLz1yZXN1bHRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5RkMsIHB0RkMsIGluRmllbGQsIG91dEZpZWxkLCBkb25lKXtcbiAgcG9seUZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocG9seSl7XG4gICAgaWYoIXBvbHkucHJvcGVydGllcykgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHB0RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgICBpZiAoaW5zaWRlKHB0LCBwb2x5KSkgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IGF2ZXJhZ2UodmFsdWVzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBvbHlGQztcbn1cblxuZnVuY3Rpb24gYXZlcmFnZSh2YWx1ZXMpIHtcbiAgdmFyIHN1bSA9IDA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3VtICs9IHZhbHVlc1tpXTtcbiAgfVxuICByZXR1cm4gc3VtIC8gdmFsdWVzLmxlbmd0aDtcbn1cbiIsInZhciBwb2x5Z29uID0gcmVxdWlyZSgndHVyZi1wb2x5Z29uJyk7XG5cbi8qKlxuKiBUYWtlcyBhIGJib3ggYW5kIHJldHVybnMgdGhlIGVxdWl2YWxlbnQge0BsaW5rIFBvbHlnb259IGZlYXR1cmUuXG4qXG4qIEBtb2R1bGUgdHVyZi9iYm94LXBvbHlnb25cbiogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBiYm94IGFuIEFycmF5IG9mIGJvdW5kaW5nIGJveCBjb29yZGluYXRlcyBpbiB0aGUgZm9ybTogYGBgW3hMb3csIHlMb3csIHhIaWdoLCB5SGlnaF1gYGBcbiogQHJldHVybiB7UG9seWdvbn0gYSBQb2x5Z29uIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBib3VuZGluZyBib3hcbiogQGV4YW1wbGVcbiogdmFyIGJib3ggPSBbMCwgMCwgMTAsIDEwXTtcbipcbiogdmFyIHBvbHkgPSB0dXJmLmJib3hQb2x5Z29uKGJib3gpO1xuKlxuKiAvLz1wb2x5XG4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGJib3gpe1xuICB2YXIgbG93TGVmdCA9IFtiYm94WzBdLCBiYm94WzFdXTtcbiAgdmFyIHRvcExlZnQgPSBbYmJveFswXSwgYmJveFszXV07XG4gIHZhciB0b3BSaWdodCA9IFtiYm94WzJdLCBiYm94WzNdXTtcbiAgdmFyIGxvd1JpZ2h0ID0gW2Jib3hbMl0sIGJib3hbMV1dO1xuXG4gIHZhciBwb2x5ID0gcG9seWdvbihbW1xuICAgIGxvd0xlZnQsXG4gICAgbG93UmlnaHQsXG4gICAgdG9wUmlnaHQsXG4gICAgdG9wTGVmdCxcbiAgICBsb3dMZWZ0XG4gIF1dKTtcbiAgcmV0dXJuIHBvbHk7XG59XG4iLCIvKipcbiAqIEdlbmVyYXRlcyBhIG5ldyBHZW9KU09OIFBvbHlnb24gZmVhdHVyZSwgZ2l2ZW4gYW4gYXJyYXkgb2YgY29vcmRpbmF0ZXNcbiAqIGFuZCBsaXN0IG9mIHByb3BlcnRpZXMuXG4gKlxuICogQG1vZHVsZSB0dXJmL3BvbHlnb25cbiAqIEBwYXJhbSB7bnVtYmVyW11bXX0gcmluZ3MgLSBhbiBhcnJheSBvZiBMaW5lYXJSaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgLSBhbiBvcHRpb25hbCBwcm9wZXJ0aWVzIG9iamVjdFxuICogQHJldHVybiB7R2VvSlNPTlBvbHlnb259IG91dHB1dFxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5MSA9IHR1cmYucG9seWdvbihbW1syMC4wLDAuMF0sWzEwMS4wLDAuMF0sWzEwMS4wLDEuMF0sWzEwMC4wLDEuMF0sWzEwMC4wLDAuMF1dXSlcbiAqIHZhciBwb2x5MiA9IHR1cmYucG9seWdvbihbW1syMC4wLDAuMF0sWzEwMS4wLDAuMF0sWzEwMS4wLDEuMF0sWzEwMC4wLDEuMF0sWzEwMC4wLDAuMF1dXSxcbiAqICAge25hbWU6ICdsaW5lIDEnLCBkaXN0YW5jZTogMTQ1fSlcbiAqIGNvbnNvbGUubG9nKHBvbHkxKVxuICogY29uc29sZS5sb2cocG9seTIpXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMpe1xuICBpZihjb29yZGluYXRlcyA9PT0gbnVsbCkgcmV0dXJuIG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gIHZhciBwb2x5Z29uID0geyBcbiAgICBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gICAgXCJnZW9tZXRyeVwiOiB7XG4gICAgICBcInR5cGVcIjogXCJQb2x5Z29uXCIsXG4gICAgICBcImNvb3JkaW5hdGVzXCI6IGNvb3JkaW5hdGVzXG4gICAgfSxcbiAgICBcInByb3BlcnRpZXNcIjogcHJvcGVydGllc1xuICB9O1xuXG4gIGlmKCFwb2x5Z29uLnByb3BlcnRpZXMpe1xuICAgIHBvbHlnb24ucHJvcGVydGllcyA9IHt9O1xuICB9XG4gIFxuICByZXR1cm4gcG9seWdvbjtcbn1cbiIsIi8vaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IYXZlcnNpbmVfZm9ybXVsYVxuLy9odHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL2xhdGxvbmcuaHRtbFxuXG4vKipcbiAqIFRha2VzIHR3byB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIGFuZCBmaW5kcyB0aGUgYmVhcmluZyBiZXR3ZWVuIHRoZW0uXG4gKlxuICogQG1vZHVsZSB0dXJmL2JlYXJpbmdcbiAqIEBwYXJhbSB7UG9pbnR9IHN0YXJ0IHN0YXJ0aW5nIFBvaW50XG4gKiBAcGFyYW0ge1BvaW50fSBlbmQgZW5kaW5nIFBvaW50XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBiZWFyaW5nIGluIGRlY2ltYWwgZGVncmVlc1xuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludDEgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdKTtcbiAqIHBvaW50MS5wcm9wZXJ0aWVzWydtYXJrZXItY29sb3InXSA9ICcjZjAwJztcbiAqIHZhciBwb2ludDIgPSB0dXJmLnBvaW50KFstNzUuNTM0LCAzOS4xMjNdKTtcbiAqIHBvaW50Mi5wcm9wZXJ0aWVzWydtYXJrZXItY29sb3InXSA9ICcjMGYwJztcbiAqXG4gKiB2YXIgcG9pbnRzID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbcG9pbnQxLCBwb2ludDJdKTtcbiAqXG4gKiAvLz1wb2ludHNcbiAqXG4gKiB2YXIgYmVhcmluZyA9IHR1cmYuYmVhcmluZyhwb2ludDEsIHBvaW50Mik7XG4gKlxuICogLy89YmVhcmluZ1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwb2ludDEsIHBvaW50Mikge1xuICAgIHZhciBjb29yZGluYXRlczEgPSBwb2ludDEuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgdmFyIGNvb3JkaW5hdGVzMiA9IHBvaW50Mi5nZW9tZXRyeS5jb29yZGluYXRlcztcblxuICAgIHZhciBsb24xID0gdG9SYWQoY29vcmRpbmF0ZXMxWzBdKTtcbiAgICB2YXIgbG9uMiA9IHRvUmFkKGNvb3JkaW5hdGVzMlswXSk7XG4gICAgdmFyIGxhdDEgPSB0b1JhZChjb29yZGluYXRlczFbMV0pO1xuICAgIHZhciBsYXQyID0gdG9SYWQoY29vcmRpbmF0ZXMyWzFdKTtcbiAgICB2YXIgYSA9IE1hdGguc2luKGxvbjIgLSBsb24xKSAqIE1hdGguY29zKGxhdDIpO1xuICAgIHZhciBiID0gTWF0aC5jb3MobGF0MSkgKiBNYXRoLnNpbihsYXQyKSAtXG4gICAgICAgIE1hdGguc2luKGxhdDEpICogTWF0aC5jb3MobGF0MikgKiBNYXRoLmNvcyhsb24yIC0gbG9uMSk7XG5cbiAgICB2YXIgYmVhcmluZyA9IHRvRGVnKE1hdGguYXRhbjIoYSwgYikpO1xuXG4gICAgcmV0dXJuIGJlYXJpbmc7XG59O1xuXG5mdW5jdGlvbiB0b1JhZChkZWdyZWUpIHtcbiAgICByZXR1cm4gZGVncmVlICogTWF0aC5QSSAvIDE4MDtcbn1cblxuZnVuY3Rpb24gdG9EZWcocmFkaWFuKSB7XG4gICAgcmV0dXJuIHJhZGlhbiAqIDE4MCAvIE1hdGguUEk7XG59XG4iLCJ2YXIgbGluZXN0cmluZyA9IHJlcXVpcmUoJ3R1cmYtbGluZXN0cmluZycpO1xudmFyIFNwbGluZSA9IHJlcXVpcmUoJy4vc3BsaW5lLmpzJyk7XG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgTGluZVN0cmluZ30gZmVhdHVyZSBhbmQgcmV0dXJucyBhIGN1cnZlZCB2ZXJzaW9uIG9mIHRoZSBsaW5lXG4gKiBieSBhcHBseWluZyBhIFtCZXppZXIgc3BsaW5lXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0IlQzMlQTl6aWVyX3NwbGluZSlcbiAqIGFsZ29yaXRobS5cbiAqXG4gKiBUaGUgYmV6aWVyIHNwbGluZSBpbXBsZW1lbnRhdGlvbiBpcyBieSBbTGVzemVrIFJ5Ymlja2ldKGh0dHA6Ly9sZXN6ZWsucnliaWNraS5jYy8pLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9iZXppZXJcbiAqIEBwYXJhbSB7TGluZVN0cmluZ30gbGluZSB0aGUgaW5wdXQgTGluZVN0cmluZ1xuICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uPTEwMDAwXSB0aW1lIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHBvaW50c1xuICogQHBhcmFtIHtudW1iZXJ9IFtzaGFycG5lc3M9MC44NV0gYSBtZWFzdXJlIG9mIGhvdyBjdXJ2eSB0aGUgcGF0aCBzaG91bGQgYmUgYmV0d2VlbiBzcGxpbmVzXG4gKiBAcmV0dXJucyB7TGluZVN0cmluZ30gY3VydmVkIGxpbmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgbGluZSA9IHR1cmYubGluZXN0cmluZyhbXG4gKiAgIFstNzYuMDkxMzA4LCAxOC40Mjc1MDFdLFxuICogICBbLTc2LjY5NTU1NiwgMTguNzI5NTAxXSxcbiAqICAgWy03Ni41NTI3MzQsIDE5LjQwNDQzXSxcbiAqICAgWy03NC42MTkxNCwgMTkuMTM0Nzg5XSxcbiAqICAgWy03My42NTIzNDMsIDIwLjA3NjU3XSxcbiAqICAgWy03My4xNTc5NTgsIDIwLjIxMDY1Nl1dLCB7XG4gKiAgICAgIHN0cm9rZTogJyNmMDAnXG4gKiAgIH0pO1xuICpcbiAqIHZhciBjdXJ2ZWQgPSB0dXJmLmJlemllcihsaW5lKTtcbiAqIGN1cnZlZC5wcm9wZXJ0aWVzID0geyBzdHJva2U6ICcjMGYwJyB9O1xuICpcbiAqIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtsaW5lLCBjdXJ2ZWRdKTtcbiAqXG4gKiAvLz1yZXN1bHRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaW5lLCByZXNvbHV0aW9uLCBzaGFycG5lc3Mpe1xuICB2YXIgbGluZU91dCA9IGxpbmVzdHJpbmcoW10pO1xuXG4gIGxpbmVPdXQucHJvcGVydGllcyA9IGxpbmUucHJvcGVydGllcztcbiAgdmFyIHB0cyA9IGxpbmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uKHB0KXtcbiAgICByZXR1cm4ge3g6IHB0WzBdLCB5OiBwdFsxXX07XG4gIH0pO1xuXG4gIHZhciBzcGxpbmUgPSBuZXcgU3BsaW5lKHtcbiAgICBwb2ludHM6IHB0cyxcbiAgICBkdXJhdGlvbjogcmVzb2x1dGlvbixcbiAgICBzaGFycG5lc3M6IHNoYXJwbmVzc1xuICB9KTtcbiAgZm9yICh2YXIgaT0wOyBpPHNwbGluZS5kdXJhdGlvbjsgaSs9MTApIHtcbiAgICB2YXIgcG9zID0gc3BsaW5lLnBvcyhpKTtcbiAgICBpZiAoTWF0aC5mbG9vcihpLzEwMCklMj09PTApIHtcbiAgICAgICAgbGluZU91dC5nZW9tZXRyeS5jb29yZGluYXRlcy5wdXNoKFtwb3MueCwgcG9zLnldKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbGluZU91dDtcbn07XG4iLCIvKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgTGluZVN0cmluZ30ge0BsaW5rIEZlYXR1cmV9IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG1vZHVsZSB0dXJmL2xpbmVzdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8TnVtYmVyPj59IGNvb3JkaW5hdGVzIC0gYW4gYXJyYXkgb2YgUG9zaXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBhbiBPYmplY3QgY29uc2lzdGluZyBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEByZXR1cm4ge0xpbmVTdHJpbmd9IGEgTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBsaW5lc3RyaW5nMSA9IHR1cmYubGluZXN0cmluZyhbXG4gKlx0Wy0yMS45NjQ0MTYsIDY0LjE0ODIwM10sXG4gKlx0Wy0yMS45NTYxNzYsIDY0LjE0MTMxNl0sXG4gKlx0Wy0yMS45MzkwMSwgNjQuMTM1OTI0XSxcbiAqXHRbLTIxLjkyNzMzNywgNjQuMTM2NjczXVxuICogXSk7XG4gKiB2YXIgbGluZXN0cmluZzIgPSB0dXJmLmxpbmVzdHJpbmcoW1xuICpcdFstMjEuOTI5MDU0LCA2NC4xMjc5ODVdLFxuICpcdFstMjEuOTEyOTE4LCA2NC4xMzQ3MjZdLFxuICpcdFstMjEuOTE2MDA3LCA2NC4xNDEwMTZdLFxuICogXHRbLTIxLjkzMDA4NCwgNjQuMTQ0NDZdXG4gKiBdLCB7bmFtZTogJ2xpbmUgMScsIGRpc3RhbmNlOiAxNDV9KTtcbiAqXG4gKiAvLz1saW5lc3RyaW5nMVxuICpcbiAqIC8vPWxpbmVzdHJpbmcyXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMpe1xuICBpZiAoIWNvb3JkaW5hdGVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuICB9XG4gIHJldHVybiB7XG4gICAgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxuICAgIFwiZ2VvbWV0cnlcIjoge1xuICAgICAgXCJ0eXBlXCI6IFwiTGluZVN0cmluZ1wiLFxuICAgICAgXCJjb29yZGluYXRlc1wiOiBjb29yZGluYXRlc1xuICAgIH0sXG4gICAgXCJwcm9wZXJ0aWVzXCI6IHByb3BlcnRpZXMgfHwge31cbiAgfTtcbn07XG4iLCIgLyoqXG4gICAqIEJlemllclNwbGluZVxuICAgKiBodHRwOi8vbGVzemVrci5naXRodWIuY29tL1xuICAgKlxuICAgKiBAY29weXJpZ2h0XG4gICAqIENvcHlyaWdodCAoQykgMjAxMiBMZXN6ZWsgUnliaWNraS5cbiAgICpcbiAgICogQGxpY2Vuc2VcbiAgICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQmV6aWVyU3BsaW5lXG4gICAqXG4gICAqIEJlemllclNwbGluZSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gICAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICAgKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICAgKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICAgKlxuICAgKiBCZXppZXJTcGxpbmUgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAgICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAgICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICAgKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKlxuICAgKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgKiBhbG9uZyB3aXRoIEJlemllclNwbGluZS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvY29weWxlZnQvbGVzc2VyLmh0bWw+LlxuICAgKi9cblxuICAvKlxuICBVc2FnZTpcblxuICAgIHZhciBzcGxpbmUgPSBuZXcgU3BsaW5lKHtcbiAgICAgIHBvaW50czogYXJyYXlfb2ZfY29udHJvbF9wb2ludHMsXG4gICAgICBkdXJhdGlvbjogdGltZV9pbl9taWxpc2Vjb25kcyxcbiAgICAgIHNoYXJwbmVzczogaG93X2N1cnZ5LFxuICAgICAgc3RlcExlbmd0aDogZGlzdGFuY2VfYmV0d2Vlbl9wb2ludHNfdG9fY2FjaGVcbiAgICB9KTtcblxuICAqL1xudmFyIFNwbGluZSA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgIHRoaXMucG9pbnRzID0gb3B0aW9ucy5wb2ludHMgfHwgW107XG4gICAgdGhpcy5kdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gfHwgMTAwMDA7XG4gICAgdGhpcy5zaGFycG5lc3MgPSBvcHRpb25zLnNoYXJwbmVzcyB8fCAwLjg1O1xuICAgIHRoaXMuY2VudGVycyA9IFtdO1xuICAgIHRoaXMuY29udHJvbHMgPSBbXTtcbiAgICB0aGlzLnN0ZXBMZW5ndGggPSBvcHRpb25zLnN0ZXBMZW5ndGggfHwgNjA7XG4gICAgdGhpcy5sZW5ndGggPSB0aGlzLnBvaW50cy5sZW5ndGg7XG4gICAgdGhpcy5kZWxheSA9IDA7XG4gICAgLy8gdGhpcyBpcyB0byBlbnN1cmUgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSAyZCB2ZXJzaW9uXG4gICAgZm9yKHZhciBpPTA7IGk8dGhpcy5sZW5ndGg7IGkrKykgdGhpcy5wb2ludHNbaV0ueiA9IHRoaXMucG9pbnRzW2ldLnogfHwgMDtcbiAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmxlbmd0aC0xOyBpKyspe1xuICAgICAgdmFyIHAxID0gdGhpcy5wb2ludHNbaV07XG4gICAgICB2YXIgcDIgPSB0aGlzLnBvaW50c1tpKzFdO1xuICAgICAgdGhpcy5jZW50ZXJzLnB1c2goe3g6KHAxLngrcDIueCkvMiwgeToocDEueStwMi55KS8yLCB6OihwMS56K3AyLnopLzJ9KTtcbiAgICB9XG4gICAgdGhpcy5jb250cm9scy5wdXNoKFt0aGlzLnBvaW50c1swXSx0aGlzLnBvaW50c1swXV0pO1xuICAgIGZvcih2YXIgaT0wOyBpPHRoaXMuY2VudGVycy5sZW5ndGgtMTsgaSsrKXtcbiAgICAgIHZhciBwMSA9IHRoaXMuY2VudGVyc1tpXTtcbiAgICAgIHZhciBwMiA9IHRoaXMuY2VudGVyc1tpKzFdO1xuICAgICAgdmFyIGR4ID0gdGhpcy5wb2ludHNbaSsxXS54LSh0aGlzLmNlbnRlcnNbaV0ueCt0aGlzLmNlbnRlcnNbaSsxXS54KS8yO1xuICAgICAgdmFyIGR5ID0gdGhpcy5wb2ludHNbaSsxXS55LSh0aGlzLmNlbnRlcnNbaV0ueSt0aGlzLmNlbnRlcnNbaSsxXS55KS8yO1xuICAgICAgdmFyIGR6ID0gdGhpcy5wb2ludHNbaSsxXS56LSh0aGlzLmNlbnRlcnNbaV0ueSt0aGlzLmNlbnRlcnNbaSsxXS56KS8yO1xuICAgICAgdGhpcy5jb250cm9scy5wdXNoKFt7XG4gICAgICAgIHg6KDEuMC10aGlzLnNoYXJwbmVzcykqdGhpcy5wb2ludHNbaSsxXS54K3RoaXMuc2hhcnBuZXNzKih0aGlzLmNlbnRlcnNbaV0ueCtkeCksXG4gICAgICAgIHk6KDEuMC10aGlzLnNoYXJwbmVzcykqdGhpcy5wb2ludHNbaSsxXS55K3RoaXMuc2hhcnBuZXNzKih0aGlzLmNlbnRlcnNbaV0ueStkeSksXG4gICAgICAgIHo6KDEuMC10aGlzLnNoYXJwbmVzcykqdGhpcy5wb2ludHNbaSsxXS56K3RoaXMuc2hhcnBuZXNzKih0aGlzLmNlbnRlcnNbaV0ueitkeil9LFxuICAgICAge1xuICAgICAgICB4OigxLjAtdGhpcy5zaGFycG5lc3MpKnRoaXMucG9pbnRzW2krMV0ueCt0aGlzLnNoYXJwbmVzcyoodGhpcy5jZW50ZXJzW2krMV0ueCtkeCksXG4gICAgICAgIHk6KDEuMC10aGlzLnNoYXJwbmVzcykqdGhpcy5wb2ludHNbaSsxXS55K3RoaXMuc2hhcnBuZXNzKih0aGlzLmNlbnRlcnNbaSsxXS55K2R5KSxcbiAgICAgICAgejooMS4wLXRoaXMuc2hhcnBuZXNzKSp0aGlzLnBvaW50c1tpKzFdLnordGhpcy5zaGFycG5lc3MqKHRoaXMuY2VudGVyc1tpKzFdLnorZHopfV0pO1xuICAgIH1cbiAgICB0aGlzLmNvbnRyb2xzLnB1c2goW3RoaXMucG9pbnRzW3RoaXMubGVuZ3RoLTFdLHRoaXMucG9pbnRzW3RoaXMubGVuZ3RoLTFdXSk7XG4gICAgdGhpcy5zdGVwcyA9IHRoaXMuY2FjaGVTdGVwcyh0aGlzLnN0ZXBMZW5ndGgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qXG4gICAgQ2FjaGVzIGFuIGFycmF5IG9mIGVxdWlkaXN0YW50IChtb3JlIG9yIGxlc3MpIHBvaW50cyBvbiB0aGUgY3VydmUuXG4gICovXG4gIFNwbGluZS5wcm90b3R5cGUuY2FjaGVTdGVwcyA9IGZ1bmN0aW9uKG1pbmRpc3Qpe1xuICAgIHZhciBzdGVwcyA9IFtdO1xuICAgIHZhciBsYXN0c3RlcCA9IHRoaXMucG9zKDApO1xuICAgIHN0ZXBzLnB1c2goMCk7XG4gICAgZm9yKHZhciB0PTA7IHQ8dGhpcy5kdXJhdGlvbjsgdCs9MTApe1xuICAgICAgdmFyIHN0ZXAgPSB0aGlzLnBvcyh0KTtcbiAgICAgIHZhciBkaXN0ID0gTWF0aC5zcXJ0KChzdGVwLngtbGFzdHN0ZXAueCkqKHN0ZXAueC1sYXN0c3RlcC54KSsoc3RlcC55LWxhc3RzdGVwLnkpKihzdGVwLnktbGFzdHN0ZXAueSkrKHN0ZXAuei1sYXN0c3RlcC56KSooc3RlcC56LWxhc3RzdGVwLnopKTtcbiAgICAgIGlmKGRpc3Q+bWluZGlzdCl7XG4gICAgICAgIHN0ZXBzLnB1c2godCk7XG4gICAgICAgIGxhc3RzdGVwID0gc3RlcDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0ZXBzO1xuICB9O1xuXG4gIC8qXG4gICAgcmV0dXJucyBhbmdsZSBhbmQgc3BlZWQgaW4gdGhlIGdpdmVuIHBvaW50IGluIHRoZSBjdXJ2ZVxuICAqL1xuICBTcGxpbmUucHJvdG90eXBlLnZlY3RvciA9IGZ1bmN0aW9uKHQpe1xuICAgIHZhciBwMSA9IHRoaXMucG9zKHQrMTApO1xuICAgIHZhciBwMiA9IHRoaXMucG9zKHQtMTApO1xuICAgIHJldHVybiB7XG4gICAgICBhbmdsZToxODAqTWF0aC5hdGFuMihwMS55LXAyLnksIHAxLngtcDIueCkvMy4xNCxcbiAgICAgIHNwZWVkOk1hdGguc3FydCgocDIueC1wMS54KSoocDIueC1wMS54KSsocDIueS1wMS55KSoocDIueS1wMS55KSsocDIuei1wMS56KSoocDIuei1wMS56KSlcbiAgICB9O1xuICB9O1xuXG4gIC8qXG4gICAgR2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIHBvaW50LCBnaXZlbiB0aW1lLlxuXG4gICAgV0FSTklORzogVGhlIHNwZWVkIGlzIG5vdCBjb25zdGFudC4gVGhlIHRpbWUgaXQgdGFrZXMgYmV0d2VlbiBjb250cm9sIHBvaW50cyBpcyBjb25zdGFudC5cblxuICAgIEZvciBjb25zdGFudCBzcGVlZCwgdXNlIFNwbGluZS5zdGVwc1tpXTtcbiAgKi9cbiAgU3BsaW5lLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih0aW1lKXtcblxuICAgIGZ1bmN0aW9uIGJlemllcih0LCBwMSwgYzEsIGMyLCBwMil7XG4gICAgICB2YXIgQiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdmFyIHQyPXQqdCwgdDM9dDIqdDtcbiAgICAgICAgcmV0dXJuIFsodDMpLCgzKnQyKigxLXQpKSwoMyp0KigxLXQpKigxLXQpKSwoKDEtdCkqKDEtdCkqKDEtdCkpXVxuICAgICAgfVxuICAgICAgdmFyIGIgPSBCKHQpXG4gICAgICB2YXIgcG9zID0ge1xuICAgICAgICB4IDogcDIueCAqIGJbMF0gKyBjMi54ICogYlsxXSArYzEueCAqIGJbMl0gKyBwMS54ICogYlszXSxcbiAgICAgICAgeSA6IHAyLnkgKiBiWzBdICsgYzIueSAqIGJbMV0gK2MxLnkgKiBiWzJdICsgcDEueSAqIGJbM10sXG4gICAgICAgIHogOiBwMi56ICogYlswXSArIGMyLnogKiBiWzFdICtjMS56ICogYlsyXSArIHAxLnogKiBiWzNdXG4gICAgICB9XG4gICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICB2YXIgdCA9IHRpbWUtdGhpcy5kZWxheTtcbiAgICBpZih0PDApIHQ9MDtcbiAgICBpZih0PnRoaXMuZHVyYXRpb24pIHQ9dGhpcy5kdXJhdGlvbi0xO1xuICAgIC8vdCA9IHQtdGhpcy5kZWxheTtcbiAgICB2YXIgdDIgPSAodCkvdGhpcy5kdXJhdGlvbjtcbiAgICBpZih0Mj49MSkgcmV0dXJuIHRoaXMucG9pbnRzW3RoaXMubGVuZ3RoLTFdO1xuXG4gICAgdmFyIG4gPSBNYXRoLmZsb29yKCh0aGlzLnBvaW50cy5sZW5ndGgtMSkqdDIpO1xuICAgIHZhciB0MSA9ICh0aGlzLmxlbmd0aC0xKSp0Mi1uO1xuICAgIHJldHVybiBiZXppZXIodDEsdGhpcy5wb2ludHNbbl0sdGhpcy5jb250cm9sc1tuXVsxXSx0aGlzLmNvbnRyb2xzW24rMV1bMF0sdGhpcy5wb2ludHNbbisxXSk7XG4gIH1cblxuICBtb2R1bGUuZXhwb3J0cyA9IFNwbGluZTtcbiIsIi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODM5ODk5L2hvdy1kby1pLWNhbGN1bGF0ZS1hLXBvaW50LW9uLWEtY2lyY2xlcy1jaXJjdW1mZXJlbmNlXG4vLyByYWRpYW5zID0gZGVncmVlcyAqIChwaS8xODApXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmpvcm5oYXJydGVsbC9qc3RzL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL2J1ZmZlci5odG1sXG5cbnZhciBmZWF0dXJlY29sbGVjdGlvbiA9IHJlcXVpcmUoJ3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24nKTtcbnZhciBwb2x5Z29uID0gcmVxdWlyZSgndHVyZi1wb2x5Z29uJyk7XG52YXIgY29tYmluZSA9IHJlcXVpcmUoJ3R1cmYtY29tYmluZScpO1xudmFyIGpzdHMgPSByZXF1aXJlKCdqc3RzJyk7XG5cbi8qKlxuKiBDYWxjdWxhdGVzIGEgYnVmZmVyIGZvciBhIHtAbGluayBQb2ludH0sIHtAbGluayBMaW5lU3RyaW5nfSwgb3Ige0BsaW5rIFBvbHlnb259IHtAbGluayBGZWF0dXJlfS97QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IGZvciBhIGdpdmVuIHJhZGl1cy4gVW5pdHMgc3VwcG9ydGVkIGFyZSBtaWxlcywga2lsb21ldGVycywgYW5kIGRlZ3JlZXMuXG4qXG4qIEBtb2R1bGUgdHVyZi9idWZmZXJcbiogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gZmVhdHVyZSBhIEZlYXR1cmUgb3IgRmVhdHVyZUNvbGxlY3Rpb24gb2YgYW55IHR5cGVcbiogQHBhcmFtIHtOdW1iZXJ9IGRpc3RhbmNlIGRpc3RhbmNlIHRvIGRyYXcgdGhlIGJ1ZmZlclxuKiBAcGFyYW0ge1N0cmluZ30gdW5pdCAnbWlsZXMnIG9yICdraWxvbWV0ZXJzJ1xuKiBAcmV0dXJuIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBjb250YWluaW5nIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyByZXByZXNlbnRpbmcgYnVmZmVyc1xuKlxuKiBAZXhhbXBsZVxuKiB2YXIgcHQgPSB0dXJmLnBvaW50KFstOTAuNTQ4NjMwLCAxNC42MTY1OTldKTtcbiogdmFyIHVuaXQgPSAnbWlsZXMnO1xuKlxuKiB2YXIgYnVmZmVyZWQgPSB0dXJmLmJ1ZmZlcihwdCwgNTAwLCB1bml0KTtcbipcbiogdmFyIHJlc3VsdCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oXG4qICAgYnVmZmVyZWQuZmVhdHVyZXMuY29uY2F0KHB0KSk7XG4qXG4qIC8vPXJlc3VsdFxuKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmZWF0dXJlLCByYWRpdXMsIHVuaXRzKXtcbiAgdmFyIGJ1ZmZlcmVkO1xuXG4gIHN3aXRjaCh1bml0cyl7XG4gICAgY2FzZSAnbWlsZXMnOlxuICAgICAgcmFkaXVzID0gcmFkaXVzIC8gNjkuMDQ3O1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdmZWV0JzpcbiAgICAgIHJhZGl1cyA9IHJhZGl1cyAvIDM2NDU2OC4wO1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdraWxvbWV0ZXJzJzpcbiAgICAgIHJhZGl1cyA9IHJhZGl1cyAvIDExMS4xMjtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnbWV0ZXJzJzpcbiAgICAgIHJhZGl1cyA9IHJhZGl1cyAvIDExMTEyMC4wO1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdkZWdyZWVzJzpcbiAgICAgIGJyZWFrXG4gIH1cblxuICBpZihmZWF0dXJlLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpe1xuICAgIHZhciBtdWx0aSA9IGNvbWJpbmUoZmVhdHVyZSk7XG4gICAgbXVsdGkucHJvcGVydGllcyA9IHt9O1xuICAgIGJ1ZmZlcmVkID0gYnVmZmVyT3AobXVsdGksIHJhZGl1cyk7XG4gICAgcmV0dXJuIGJ1ZmZlcmVkO1xuICB9XG4gIGVsc2V7XG4gICAgYnVmZmVyZWQgPSBidWZmZXJPcChmZWF0dXJlLCByYWRpdXMpO1xuICAgIHJldHVybiBidWZmZXJlZDtcbiAgfVxufVxuXG52YXIgYnVmZmVyT3AgPSBmdW5jdGlvbihmZWF0dXJlLCByYWRpdXMpe1xuICB2YXIgcmVhZGVyID0gbmV3IGpzdHMuaW8uR2VvSlNPTlJlYWRlcigpO1xuICB2YXIgZ2VvbSA9IHJlYWRlci5yZWFkKEpTT04uc3RyaW5naWZ5KGZlYXR1cmUuZ2VvbWV0cnkpKTtcbiAgdmFyIGJ1ZmZlcmVkID0gZ2VvbS5idWZmZXIocmFkaXVzKTtcbiAgdmFyIHBhcnNlciA9IG5ldyBqc3RzLmlvLkdlb0pTT05QYXJzZXIoKTtcbiAgYnVmZmVyZWQgPSBwYXJzZXIud3JpdGUoYnVmZmVyZWQpO1xuXG4gIGlmKGJ1ZmZlcmVkLnR5cGUgPT09ICdNdWx0aVBvbHlnb24nKXtcbiAgICBidWZmZXJlZCA9IHtcbiAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgIGdlb21ldHJ5OiBidWZmZXJlZCxcbiAgICAgIHByb3BlcnRpZXM6IHt9XG4gICAgfTtcbiAgICBidWZmZXJlZCA9IGZlYXR1cmVjb2xsZWN0aW9uKFtidWZmZXJlZF0pO1xuICB9XG4gIGVsc2V7XG4gICAgYnVmZmVyZWQgPSBmZWF0dXJlY29sbGVjdGlvbihbcG9seWdvbihidWZmZXJlZC5jb29yZGluYXRlcyldKTtcbiAgfVxuXG4gIHJldHVybiBidWZmZXJlZDtcbn1cbiIsInJlcXVpcmUoJ2phdmFzY3JpcHQudXRpbCcpO1xudmFyIGpzdHMgPSByZXF1aXJlKCcuL2xpYi9qc3RzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGpzdHNcbiIsIi8qIFRoZSBKU1RTIFRvcG9sb2d5IFN1aXRlIGlzIGEgY29sbGVjdGlvbiBvZiBKYXZhU2NyaXB0IGNsYXNzZXMgdGhhdFxuaW1wbGVtZW50IHRoZSBmdW5kYW1lbnRhbCBvcGVyYXRpb25zIHJlcXVpcmVkIHRvIHZhbGlkYXRlIGEgZ2l2ZW5cbmdlby1zcGF0aWFsIGRhdGEgc2V0IHRvIGEga25vd24gdG9wb2xvZ2ljYWwgc3BlY2lmaWNhdGlvbi5cblxuQ29weXJpZ2h0IChDKSAyMDExIFRoZSBBdXRob3JzXG5cblRoaXMgbGlicmFyeSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3Jcbm1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWNcbkxpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlclxudmVyc2lvbiAyLjEgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cblRoaXMgbGlicmFyeSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2Zcbk1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VXG5MZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG5Zb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljXG5MaWNlbnNlIGFsb25nIHdpdGggdGhpcyBsaWJyYXJ5OyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlXG5Gb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUgUGxhY2UsIFN1aXRlIDMzMCwgQm9zdG9uLCBNQSAgMDIxMTEtMTMwNyAgVVNBICovXG5qc3RzPXt2ZXJzaW9uOicwLjE1LjAnLGFsZ29yaXRobTp7ZGlzdGFuY2U6e30sbG9jYXRlOnt9fSxlcnJvcjp7fSxnZW9tOnt1dGlsOnt9fSxnZW9tZ3JhcGg6e2luZGV4Ont9fSxpbmRleDp7YmludHJlZTp7fSxjaGFpbjp7fSxrZHRyZWU6e30scXVhZHRyZWU6e30sc3RydHJlZTp7fX0saW86e30sbm9kaW5nOntzbmFwcm91bmQ6e319LG9wZXJhdGlvbjp7YnVmZmVyOnt9LGRpc3RhbmNlOnt9LG92ZXJsYXk6e3NuYXA6e319LHBvbHlnb25pemU6e30scHJlZGljYXRlOnt9LHJlbGF0ZTp7fSx1bmlvbjp7fSx2YWxpZDp7fX0scGxhbmFyZ3JhcGg6e30sc2ltcGxpZnk6e30sdHJpYW5ndWxhdGU6e3F1YWRlZGdlOnt9fSx1dGlsOnt9fTtpZih0eXBlb2YgU3RyaW5nLnByb3RvdHlwZS50cmltIT09J2Z1bmN0aW9uJyl7U3RyaW5nLnByb3RvdHlwZS50cmltPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywnJyk7fTt9XG5qc3RzLmFic3RyYWN0RnVuYz1mdW5jdGlvbigpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmVycm9yPXt9O2pzdHMuZXJyb3IuSWxsZWdhbEFyZ3VtZW50RXJyb3I9ZnVuY3Rpb24obWVzc2FnZSl7dGhpcy5uYW1lPSdJbGxlZ2FsQXJndW1lbnRFcnJvcic7dGhpcy5tZXNzYWdlPW1lc3NhZ2U7fTtqc3RzLmVycm9yLklsbGVnYWxBcmd1bWVudEVycm9yLnByb3RvdHlwZT1uZXcgRXJyb3IoKTtqc3RzLmVycm9yLlRvcG9sb2d5RXJyb3I9ZnVuY3Rpb24obWVzc2FnZSxwdCl7dGhpcy5uYW1lPSdUb3BvbG9neUVycm9yJzt0aGlzLm1lc3NhZ2U9cHQ/bWVzc2FnZSsnIFsgJytwdCsnIF0nOm1lc3NhZ2U7fTtqc3RzLmVycm9yLlRvcG9sb2d5RXJyb3IucHJvdG90eXBlPW5ldyBFcnJvcigpO2pzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3I9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9J0Fic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yJzt0aGlzLm1lc3NhZ2U9J0Fic3RyYWN0IG1ldGhvZCBjYWxsZWQsIHNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzcy4nO307anN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvci5wcm90b3R5cGU9bmV3IEVycm9yKCk7anN0cy5lcnJvci5Ob3RJbXBsZW1lbnRlZEVycm9yPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSdOb3RJbXBsZW1lbnRlZEVycm9yJzt0aGlzLm1lc3NhZ2U9J1RoaXMgbWV0aG9kIGhhcyBub3QgeWV0IGJlZW4gaW1wbGVtZW50ZWQuJzt9O2pzdHMuZXJyb3IuTm90SW1wbGVtZW50ZWRFcnJvci5wcm90b3R5cGU9bmV3IEVycm9yKCk7anN0cy5lcnJvci5Ob3RSZXByZXNlbnRhYmxlRXJyb3I9ZnVuY3Rpb24obWVzc2FnZSl7dGhpcy5uYW1lPSdOb3RSZXByZXNlbnRhYmxlRXJyb3InO3RoaXMubWVzc2FnZT1tZXNzYWdlO307anN0cy5lcnJvci5Ob3RSZXByZXNlbnRhYmxlRXJyb3IucHJvdG90eXBlPW5ldyBFcnJvcigpO2pzdHMuZXJyb3IuTG9jYXRlRmFpbHVyZUVycm9yPWZ1bmN0aW9uKG1lc3NhZ2Upe3RoaXMubmFtZT0nTG9jYXRlRmFpbHVyZUVycm9yJzt0aGlzLm1lc3NhZ2U9bWVzc2FnZTt9O2pzdHMuZXJyb3IuTG9jYXRlRmFpbHVyZUVycm9yLnByb3RvdHlwZT1uZXcgRXJyb3IoKTtpZih0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIiltb2R1bGUuZXhwb3J0cz1qc3RzO2pzdHMuZ2VvbS5HZW9tZXRyeUZpbHRlcj1mdW5jdGlvbigpe307anN0cy5nZW9tLkdlb21ldHJ5RmlsdGVyLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZ2VvbSl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbS51dGlsLlBvbHlnb25FeHRyYWN0ZXI9ZnVuY3Rpb24oY29tcHMpe3RoaXMuY29tcHM9Y29tcHM7fTtqc3RzLmdlb20udXRpbC5Qb2x5Z29uRXh0cmFjdGVyLnByb3RvdHlwZT1uZXcganN0cy5nZW9tLkdlb21ldHJ5RmlsdGVyKCk7anN0cy5nZW9tLnV0aWwuUG9seWdvbkV4dHJhY3Rlci5wcm90b3R5cGUuY29tcHM9bnVsbDtqc3RzLmdlb20udXRpbC5Qb2x5Z29uRXh0cmFjdGVyLmdldFBvbHlnb25zPWZ1bmN0aW9uKGdlb20sbGlzdCl7aWYobGlzdD09PXVuZGVmaW5lZCl7bGlzdD1bXTt9XG5pZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pe2xpc3QucHVzaChnZW9tKTt9ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbil7Z2VvbS5hcHBseShuZXcganN0cy5nZW9tLnV0aWwuUG9seWdvbkV4dHJhY3RlcihsaXN0KSk7fVxucmV0dXJuIGxpc3Q7fTtqc3RzLmdlb20udXRpbC5Qb2x5Z29uRXh0cmFjdGVyLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZ2VvbSl7aWYoZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29uKVxudGhpcy5jb21wcy5wdXNoKGdlb20pO307anN0cy5pby5XS1RQYXJzZXI9ZnVuY3Rpb24oZ2VvbWV0cnlGYWN0b3J5KXt0aGlzLmdlb21ldHJ5RmFjdG9yeT1nZW9tZXRyeUZhY3Rvcnl8fG5ldyBqc3RzLmdlb20uR2VvbWV0cnlGYWN0b3J5KCk7dGhpcy5yZWdFeGVzPXsndHlwZVN0cic6L15cXHMqKFxcdyspXFxzKlxcKFxccyooLiopXFxzKlxcKVxccyokLywnZW1wdHlUeXBlU3RyJzovXlxccyooXFx3KylcXHMqRU1QVFlcXHMqJC8sJ3NwYWNlcyc6L1xccysvLCdwYXJlbkNvbW1hJzovXFwpXFxzKixcXHMqXFwoLywnZG91YmxlUGFyZW5Db21tYSc6L1xcKVxccypcXClcXHMqLFxccypcXChcXHMqXFwoLywndHJpbVBhcmVucyc6L15cXHMqXFwoPyguKj8pXFwpP1xccyokL307fTtqc3RzLmlvLldLVFBhcnNlci5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih3a3Qpe3ZhciBnZW9tZXRyeSx0eXBlLHN0cjt3a3Q9d2t0LnJlcGxhY2UoL1tcXG5cXHJdL2csJyAnKTt2YXIgbWF0Y2hlcz10aGlzLnJlZ0V4ZXMudHlwZVN0ci5leGVjKHdrdCk7aWYod2t0LnNlYXJjaCgnRU1QVFknKSE9PS0xKXttYXRjaGVzPXRoaXMucmVnRXhlcy5lbXB0eVR5cGVTdHIuZXhlYyh3a3QpO21hdGNoZXNbMl09dW5kZWZpbmVkO31cbmlmKG1hdGNoZXMpe3R5cGU9bWF0Y2hlc1sxXS50b0xvd2VyQ2FzZSgpO3N0cj1tYXRjaGVzWzJdO2lmKHRoaXMucGFyc2VbdHlwZV0pe2dlb21ldHJ5PXRoaXMucGFyc2VbdHlwZV0uYXBwbHkodGhpcyxbc3RyXSk7fX1cbmlmKGdlb21ldHJ5PT09dW5kZWZpbmVkKVxudGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgcGFyc2UgV0tUICcrd2t0KTtyZXR1cm4gZ2VvbWV0cnk7fTtqc3RzLmlvLldLVFBhcnNlci5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZ2VvbWV0cnkpe3JldHVybiB0aGlzLmV4dHJhY3RHZW9tZXRyeShnZW9tZXRyeSk7fTtqc3RzLmlvLldLVFBhcnNlci5wcm90b3R5cGUuZXh0cmFjdEdlb21ldHJ5PWZ1bmN0aW9uKGdlb21ldHJ5KXt2YXIgdHlwZT1nZW9tZXRyeS5DTEFTU19OQU1FLnNwbGl0KCcuJylbMl0udG9Mb3dlckNhc2UoKTtpZighdGhpcy5leHRyYWN0W3R5cGVdKXtyZXR1cm4gbnVsbDt9XG52YXIgd2t0VHlwZT10eXBlLnRvVXBwZXJDYXNlKCk7dmFyIGRhdGE7aWYoZ2VvbWV0cnkuaXNFbXB0eSgpKXtkYXRhPXdrdFR5cGUrJyBFTVBUWSc7fWVsc2V7ZGF0YT13a3RUeXBlKycoJyt0aGlzLmV4dHJhY3RbdHlwZV0uYXBwbHkodGhpcyxbZ2VvbWV0cnldKSsnKSc7fVxucmV0dXJuIGRhdGE7fTtqc3RzLmlvLldLVFBhcnNlci5wcm90b3R5cGUuZXh0cmFjdD17J2Nvb3JkaW5hdGUnOmZ1bmN0aW9uKGNvb3JkaW5hdGUpe3JldHVybiBjb29yZGluYXRlLngrJyAnK2Nvb3JkaW5hdGUueTt9LCdwb2ludCc6ZnVuY3Rpb24ocG9pbnQpe3JldHVybiBwb2ludC5jb29yZGluYXRlLngrJyAnK3BvaW50LmNvb3JkaW5hdGUueTt9LCdtdWx0aXBvaW50JzpmdW5jdGlvbihtdWx0aXBvaW50KXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTAsbGVuPW11bHRpcG9pbnQuZ2VvbWV0cmllcy5sZW5ndGg7aTxsZW47KytpKXthcnJheS5wdXNoKCcoJytcbnRoaXMuZXh0cmFjdC5wb2ludC5hcHBseSh0aGlzLFttdWx0aXBvaW50Lmdlb21ldHJpZXNbaV1dKSsnKScpO31cbnJldHVybiBhcnJheS5qb2luKCcsJyk7fSwnbGluZXN0cmluZyc6ZnVuY3Rpb24obGluZXN0cmluZyl7dmFyIGFycmF5PVtdO2Zvcih2YXIgaT0wLGxlbj1saW5lc3RyaW5nLnBvaW50cy5sZW5ndGg7aTxsZW47KytpKXthcnJheS5wdXNoKHRoaXMuZXh0cmFjdC5jb29yZGluYXRlLmFwcGx5KHRoaXMsW2xpbmVzdHJpbmcucG9pbnRzW2ldXSkpO31cbnJldHVybiBhcnJheS5qb2luKCcsJyk7fSwnbXVsdGlsaW5lc3RyaW5nJzpmdW5jdGlvbihtdWx0aWxpbmVzdHJpbmcpe3ZhciBhcnJheT1bXTtmb3IodmFyIGk9MCxsZW49bXVsdGlsaW5lc3RyaW5nLmdlb21ldHJpZXMubGVuZ3RoO2k8bGVuOysraSl7YXJyYXkucHVzaCgnKCcrXG50aGlzLmV4dHJhY3QubGluZXN0cmluZy5hcHBseSh0aGlzLFttdWx0aWxpbmVzdHJpbmcuZ2VvbWV0cmllc1tpXV0pKycpJyk7fVxucmV0dXJuIGFycmF5LmpvaW4oJywnKTt9LCdwb2x5Z29uJzpmdW5jdGlvbihwb2x5Z29uKXt2YXIgYXJyYXk9W107YXJyYXkucHVzaCgnKCcrdGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbcG9seWdvbi5zaGVsbF0pKycpJyk7Zm9yKHZhciBpPTAsbGVuPXBvbHlnb24uaG9sZXMubGVuZ3RoO2k8bGVuOysraSl7YXJyYXkucHVzaCgnKCcrdGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbcG9seWdvbi5ob2xlc1tpXV0pKycpJyk7fVxucmV0dXJuIGFycmF5LmpvaW4oJywnKTt9LCdtdWx0aXBvbHlnb24nOmZ1bmN0aW9uKG11bHRpcG9seWdvbil7dmFyIGFycmF5PVtdO2Zvcih2YXIgaT0wLGxlbj1tdWx0aXBvbHlnb24uZ2VvbWV0cmllcy5sZW5ndGg7aTxsZW47KytpKXthcnJheS5wdXNoKCcoJyt0aGlzLmV4dHJhY3QucG9seWdvbi5hcHBseSh0aGlzLFttdWx0aXBvbHlnb24uZ2VvbWV0cmllc1tpXV0pKycpJyk7fVxucmV0dXJuIGFycmF5LmpvaW4oJywnKTt9LCdnZW9tZXRyeWNvbGxlY3Rpb24nOmZ1bmN0aW9uKGNvbGxlY3Rpb24pe3ZhciBhcnJheT1bXTtmb3IodmFyIGk9MCxsZW49Y29sbGVjdGlvbi5nZW9tZXRyaWVzLmxlbmd0aDtpPGxlbjsrK2kpe2FycmF5LnB1c2godGhpcy5leHRyYWN0R2VvbWV0cnkuYXBwbHkodGhpcyxbY29sbGVjdGlvbi5nZW9tZXRyaWVzW2ldXSkpO31cbnJldHVybiBhcnJheS5qb2luKCcsJyk7fX07anN0cy5pby5XS1RQYXJzZXIucHJvdG90eXBlLnBhcnNlPXsncG9pbnQnOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9pbnQobnVsbCk7fVxudmFyIGNvb3Jkcz1zdHIudHJpbSgpLnNwbGl0KHRoaXMucmVnRXhlcy5zcGFjZXMpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2ludChuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoY29vcmRzWzBdLGNvb3Jkc1sxXSkpO30sJ211bHRpcG9pbnQnOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2ludChudWxsKTt9XG52YXIgcG9pbnQ7dmFyIHBvaW50cz1zdHIudHJpbSgpLnNwbGl0KCcsJyk7dmFyIGNvbXBvbmVudHM9W107Zm9yKHZhciBpPTAsbGVuPXBvaW50cy5sZW5ndGg7aTxsZW47KytpKXtwb2ludD1wb2ludHNbaV0ucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVBhcmVucywnJDEnKTtjb21wb25lbnRzLnB1c2godGhpcy5wYXJzZS5wb2ludC5hcHBseSh0aGlzLFtwb2ludF0pKTt9XG5yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2ludChjb21wb25lbnRzKTt9LCdsaW5lc3RyaW5nJzpmdW5jdGlvbihzdHIpe2lmKHN0cj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcobnVsbCk7fVxudmFyIHBvaW50cz1zdHIudHJpbSgpLnNwbGl0KCcsJyk7dmFyIGNvbXBvbmVudHM9W107dmFyIGNvb3Jkcztmb3IodmFyIGk9MCxsZW49cG9pbnRzLmxlbmd0aDtpPGxlbjsrK2kpe2Nvb3Jkcz1wb2ludHNbaV0udHJpbSgpLnNwbGl0KHRoaXMucmVnRXhlcy5zcGFjZXMpO2NvbXBvbmVudHMucHVzaChuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoY29vcmRzWzBdLGNvb3Jkc1sxXSkpO31cbnJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKGNvbXBvbmVudHMpO30sJ2xpbmVhcnJpbmcnOmZ1bmN0aW9uKHN0cil7aWYoc3RyPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhudWxsKTt9XG52YXIgcG9pbnRzPXN0ci50cmltKCkuc3BsaXQoJywnKTt2YXIgY29tcG9uZW50cz1bXTt2YXIgY29vcmRzO2Zvcih2YXIgaT0wLGxlbj1wb2ludHMubGVuZ3RoO2k8bGVuOysraSl7Y29vcmRzPXBvaW50c1tpXS50cmltKCkuc3BsaXQodGhpcy5yZWdFeGVzLnNwYWNlcyk7Y29tcG9uZW50cy5wdXNoKG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShjb29yZHNbMF0sY29vcmRzWzFdKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoY29tcG9uZW50cyk7fSwnbXVsdGlsaW5lc3RyaW5nJzpmdW5jdGlvbihzdHIpe2lmKHN0cj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyhudWxsKTt9XG52YXIgbGluZTt2YXIgbGluZXM9c3RyLnRyaW0oKS5zcGxpdCh0aGlzLnJlZ0V4ZXMucGFyZW5Db21tYSk7dmFyIGNvbXBvbmVudHM9W107Zm9yKHZhciBpPTAsbGVuPWxpbmVzLmxlbmd0aDtpPGxlbjsrK2kpe2xpbmU9bGluZXNbaV0ucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVBhcmVucywnJDEnKTtjb21wb25lbnRzLnB1c2godGhpcy5wYXJzZS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2xpbmVdKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyhjb21wb25lbnRzKTt9LCdwb2x5Z29uJzpmdW5jdGlvbihzdHIpe2lmKHN0cj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvbHlnb24obnVsbCk7fVxudmFyIHJpbmcsbGluZXN0cmluZyxsaW5lYXJyaW5nO3ZhciByaW5ncz1zdHIudHJpbSgpLnNwbGl0KHRoaXMucmVnRXhlcy5wYXJlbkNvbW1hKTt2YXIgc2hlbGw7dmFyIGhvbGVzPVtdO2Zvcih2YXIgaT0wLGxlbj1yaW5ncy5sZW5ndGg7aTxsZW47KytpKXtyaW5nPXJpbmdzW2ldLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1QYXJlbnMsJyQxJyk7bGluZXN0cmluZz10aGlzLnBhcnNlLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbcmluZ10pO2xpbmVhcnJpbmc9dGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhsaW5lc3RyaW5nLnBvaW50cyk7aWYoaT09PTApe3NoZWxsPWxpbmVhcnJpbmc7fWVsc2V7aG9sZXMucHVzaChsaW5lYXJyaW5nKTt9fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvbHlnb24oc2hlbGwsaG9sZXMpO30sJ211bHRpcG9seWdvbic6ZnVuY3Rpb24oc3RyKXtpZihzdHI9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvbHlnb24obnVsbCk7fVxudmFyIHBvbHlnb247dmFyIHBvbHlnb25zPXN0ci50cmltKCkuc3BsaXQodGhpcy5yZWdFeGVzLmRvdWJsZVBhcmVuQ29tbWEpO3ZhciBjb21wb25lbnRzPVtdO2Zvcih2YXIgaT0wLGxlbj1wb2x5Z29ucy5sZW5ndGg7aTxsZW47KytpKXtwb2x5Z29uPXBvbHlnb25zW2ldLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1QYXJlbnMsJyQxJyk7Y29tcG9uZW50cy5wdXNoKHRoaXMucGFyc2UucG9seWdvbi5hcHBseSh0aGlzLFtwb2x5Z29uXSkpO31cbnJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvbHlnb24oY29tcG9uZW50cyk7fSwnZ2VvbWV0cnljb2xsZWN0aW9uJzpmdW5jdGlvbihzdHIpe2lmKHN0cj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKTt9XG5zdHI9c3RyLnJlcGxhY2UoLyxcXHMqKFtBLVphLXpdKS9nLCd8JDEnKTt2YXIgd2t0QXJyYXk9c3RyLnRyaW0oKS5zcGxpdCgnfCcpO3ZhciBjb21wb25lbnRzPVtdO2Zvcih2YXIgaT0wLGxlbj13a3RBcnJheS5sZW5ndGg7aTxsZW47KytpKXtjb21wb25lbnRzLnB1c2goanN0cy5pby5XS1RQYXJzZXIucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbd2t0QXJyYXlbaV1dKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihjb21wb25lbnRzKTt9fTtqc3RzLmluZGV4Lkl0ZW1WaXNpdG9yPWZ1bmN0aW9uKCl7fTtqc3RzLmluZGV4Lkl0ZW1WaXNpdG9yLnByb3RvdHlwZS52aXNpdEl0ZW09ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zPWZ1bmN0aW9uKCl7fTtqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ0xPQ0tXSVNFPS0xO2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5SSUdIVD1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ0xPQ0tXSVNFO2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5DT1VOVEVSQ0xPQ0tXSVNFPTE7anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLkxFRlQ9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLkNPVU5URVJDTE9DS1dJU0U7anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLkNPTExJTkVBUj0wO2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5TVFJBSUdIVD1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ09MTElORUFSO2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5vcmllbnRhdGlvbkluZGV4PWZ1bmN0aW9uKHAxLHAyLHEpe3ZhciBkeDEsZHkxLGR4MixkeTI7ZHgxPXAyLngtcDEueDtkeTE9cDIueS1wMS55O2R4Mj1xLngtcDIueDtkeTI9cS55LXAyLnk7cmV0dXJuIGpzdHMuYWxnb3JpdGhtLlJvYnVzdERldGVybWluYW50LnNpZ25PZkRldDJ4MihkeDEsZHkxLGR4MixkeTIpO307anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzUG9pbnRJblJpbmc9ZnVuY3Rpb24ocCxyaW5nKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmxvY2F0ZVBvaW50SW5SaW5nKHAscmluZykhPT1qc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I7fTtqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMubG9jYXRlUG9pbnRJblJpbmc9ZnVuY3Rpb24ocCxyaW5nKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uUmF5Q3Jvc3NpbmdDb3VudGVyLmxvY2F0ZVBvaW50SW5SaW5nKHAscmluZyk7fTtqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuaXNPbkxpbmU9ZnVuY3Rpb24ocCxwdCl7dmFyIGxpbmVJbnRlcnNlY3RvcixpLGlsLHAwLHAxO2xpbmVJbnRlcnNlY3Rvcj1uZXcganN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yKCk7Zm9yKGk9MSxpbD1wdC5sZW5ndGg7aTxpbDtpKyspe3AwPXB0W2ktMV07cDE9cHRbaV07bGluZUludGVyc2VjdG9yLmNvbXB1dGVJbnRlcnNlY3Rpb24ocCxwMCxwMSk7aWYobGluZUludGVyc2VjdG9yLmhhc0ludGVyc2VjdGlvbigpKXtyZXR1cm4gdHJ1ZTt9fVxucmV0dXJuIGZhbHNlO307anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzQ0NXPWZ1bmN0aW9uKHJpbmcpe3ZhciBuUHRzLGhpUHQsaGlJbmRleCxwLGlQcmV2LGlOZXh0LHByZXYsbmV4dCxpLGRpc2MsaXNDQ1c7blB0cz1yaW5nLmxlbmd0aC0xO2lmKG5QdHM8Myl7dGhyb3cgbmV3IGpzdHMuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ1JpbmcgaGFzIGZld2VyIHRoYW4gMyBwb2ludHMsIHNvIG9yaWVudGF0aW9uIGNhbm5vdCBiZSBkZXRlcm1pbmVkJyk7fVxuaGlQdD1yaW5nWzBdO2hpSW5kZXg9MDtpPTE7Zm9yKGk7aTw9blB0cztpKyspe3A9cmluZ1tpXTtpZihwLnk+aGlQdC55KXtoaVB0PXA7aGlJbmRleD1pO319XG5pUHJldj1oaUluZGV4O2Rve2lQcmV2PWlQcmV2LTE7aWYoaVByZXY8MCl7aVByZXY9blB0czt9fXdoaWxlKHJpbmdbaVByZXZdLmVxdWFsczJEKGhpUHQpJiZpUHJldiE9PWhpSW5kZXgpO2lOZXh0PWhpSW5kZXg7ZG97aU5leHQ9KGlOZXh0KzEpJW5QdHM7fXdoaWxlKHJpbmdbaU5leHRdLmVxdWFsczJEKGhpUHQpJiZpTmV4dCE9PWhpSW5kZXgpO3ByZXY9cmluZ1tpUHJldl07bmV4dD1yaW5nW2lOZXh0XTtpZihwcmV2LmVxdWFsczJEKGhpUHQpfHxuZXh0LmVxdWFsczJEKGhpUHQpfHxwcmV2LmVxdWFsczJEKG5leHQpKXtyZXR1cm4gZmFsc2U7fVxuZGlzYz1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuY29tcHV0ZU9yaWVudGF0aW9uKHByZXYsaGlQdCxuZXh0KTtpc0NDVz1mYWxzZTtpZihkaXNjPT09MCl7aXNDQ1c9KHByZXYueD5uZXh0LngpO31lbHNle2lzQ0NXPShkaXNjPjApO31cbnJldHVybiBpc0NDVzt9O2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5jb21wdXRlT3JpZW50YXRpb249ZnVuY3Rpb24ocDEscDIscSl7cmV0dXJuIGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5vcmllbnRhdGlvbkluZGV4KHAxLHAyLHEpO307anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmRpc3RhbmNlUG9pbnRMaW5lPWZ1bmN0aW9uKHAsQSxCKXtpZighKEEgaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSkpe2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZTIuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbmlmKEEueD09PUIueCYmQS55PT09Qi55KXtyZXR1cm4gcC5kaXN0YW5jZShBKTt9XG52YXIgcixzO3I9KChwLngtQS54KSooQi54LUEueCkrKHAueS1BLnkpKihCLnktQS55KSkvKChCLngtQS54KSooQi54LUEueCkrKEIueS1BLnkpKihCLnktQS55KSk7aWYocjw9MC4wKXtyZXR1cm4gcC5kaXN0YW5jZShBKTt9XG5pZihyPj0xLjApe3JldHVybiBwLmRpc3RhbmNlKEIpO31cbnM9KChBLnktcC55KSooQi54LUEueCktKEEueC1wLngpKihCLnktQS55KSkvKChCLngtQS54KSooQi54LUEueCkrKEIueS1BLnkpKihCLnktQS55KSk7cmV0dXJuIE1hdGguYWJzKHMpKk1hdGguc3FydCgoKEIueC1BLngpKihCLngtQS54KSsoQi55LUEueSkqKEIueS1BLnkpKSk7fTtqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmVQZXJwZW5kaWN1bGFyPWZ1bmN0aW9uKHAsQSxCKXt2YXIgcz0oKEEueS1wLnkpKihCLngtQS54KS0oQS54LXAueCkqKEIueS1BLnkpKS8oKEIueC1BLngpKihCLngtQS54KSsoQi55LUEueSkqKEIueS1BLnkpKTtyZXR1cm4gTWF0aC5hYnMocykqTWF0aC5zcXJ0KCgoQi54LUEueCkqKEIueC1BLngpKyhCLnktQS55KSooQi55LUEueSkpKTt9O2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZTI9ZnVuY3Rpb24ocCxsaW5lKXt2YXIgbWluRGlzdGFuY2UsaSxpbCxkaXN0O2lmKGxpbmUubGVuZ3RoPT09MCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ0xpbmUgYXJyYXkgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSB2ZXJ0ZXgnKTt9XG5taW5EaXN0YW5jZT1wLmRpc3RhbmNlKGxpbmVbMF0pO2ZvcihpPTAsaWw9bGluZS5sZW5ndGgtMTtpPGlsO2krKyl7ZGlzdD1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmUocCxsaW5lW2ldLGxpbmVbaSsxXSk7aWYoZGlzdDxtaW5EaXN0YW5jZSl7bWluRGlzdGFuY2U9ZGlzdDt9fVxucmV0dXJuIG1pbkRpc3RhbmNlO307anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmRpc3RhbmNlTGluZUxpbmU9ZnVuY3Rpb24oQSxCLEMsRCl7aWYoQS5lcXVhbHMoQikpe3JldHVybiBqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmUoQSxDLEQpO31cbmlmKEMuZXF1YWxzKEQpKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmRpc3RhbmNlUG9pbnRMaW5lKEQsQSxCKTt9XG52YXIgcl90b3Ascl9ib3Qsc190b3Asc19ib3QscyxyO3JfdG9wPShBLnktQy55KSooRC54LUMueCktKEEueC1DLngpKihELnktQy55KTtyX2JvdD0oQi54LUEueCkqKEQueS1DLnkpLShCLnktQS55KSooRC54LUMueCk7c190b3A9KEEueS1DLnkpKihCLngtQS54KS0oQS54LUMueCkqKEIueS1BLnkpO3NfYm90PShCLngtQS54KSooRC55LUMueSktKEIueS1BLnkpKihELngtQy54KTtpZigocl9ib3Q9PT0wKXx8KHNfYm90PT09MCkpe3JldHVybiBNYXRoLm1pbihqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmUoQSxDLEQpLE1hdGgubWluKGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZShCLEMsRCksTWF0aC5taW4oanN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmRpc3RhbmNlUG9pbnRMaW5lKEMsQSxCKSxqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmUoRCxBLEIpKSkpO31cbnM9c190b3Avc19ib3Q7cj1yX3RvcC9yX2JvdDtpZigocjwwKXx8KHI+MSl8fChzPDApfHwocz4xKSl7cmV0dXJuIE1hdGgubWluKGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZShBLEMsRCksTWF0aC5taW4oanN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmRpc3RhbmNlUG9pbnRMaW5lKEIsQyxEKSxNYXRoLm1pbihqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmUoQyxBLEIpLGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZShELEEsQikpKSk7fVxucmV0dXJuIDAuMDt9O2pzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5zaWduZWRBcmVhPWZ1bmN0aW9uKHJpbmcpe2lmKHJpbmcubGVuZ3RoPDMpe3JldHVybiAwLjA7fVxudmFyIHN1bSxpLGlsLGJ4LGJ5LGN4LGN5O3N1bT0wLjA7Zm9yKGk9MCxpbD1yaW5nLmxlbmd0aC0xO2k8aWw7aSsrKXtieD1yaW5nW2ldLng7Ynk9cmluZ1tpXS55O2N4PXJpbmdbaSsxXS54O2N5PXJpbmdbaSsxXS55O3N1bSs9KGJ4K2N4KSooY3ktYnkpO31cbnJldHVybi1zdW0vMi4wO307anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLnNpZ25lZEFyZWE9ZnVuY3Rpb24ocmluZyl7dmFyIG4sc3VtLHAsYngsYnksaSxjeCxjeTtuPXJpbmcubGVuZ3RoO2lmKG48Myl7cmV0dXJuIDAuMDt9XG5zdW09MC4wO3A9cmluZ1swXTtieD1wLng7Ynk9cC55O2ZvcihpPTE7aTxuO2krKyl7cD1yaW5nW2ldO2N4PXAueDtjeT1wLnk7c3VtKz0oYngrY3gpKihjeS1ieSk7Yng9Y3g7Ynk9Y3k7fVxucmV0dXJuLXN1bS8yLjA7fTtqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuY29tcHV0ZUxlbmd0aD1mdW5jdGlvbihwdHMpe3ZhciBuPXB0cy5sZW5ndGgsbGVuLHgwLHkwLHgxLHkxLGR4LGR5LHAsaSxpbDtpZihuPD0xKXtyZXR1cm4gMC4wO31cbmxlbj0wLjA7cD1wdHNbMF07eDA9cC54O3kwPXAueTtpPTEsaWw9bjtmb3IoaTtpPG47aSsrKXtwPXB0c1tpXTt4MT1wLng7eTE9cC55O2R4PXgxLXgwO2R5PXkxLXkwO2xlbis9TWF0aC5zcXJ0KGR4KmR4K2R5KmR5KTt4MD14MTt5MD15MTt9XG5yZXR1cm4gbGVuO307anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmxlbmd0aD1mdW5jdGlvbigpe307anN0cy5hbGdvcml0aG0uQW5nbGU9ZnVuY3Rpb24oKXt9O2pzdHMuYWxnb3JpdGhtLkFuZ2xlLlBJX1RJTUVTXzI9Mi4wKk1hdGguUEk7anN0cy5hbGdvcml0aG0uQW5nbGUuUElfT1ZFUl8yPU1hdGguUEkvMi4wO2pzdHMuYWxnb3JpdGhtLkFuZ2xlLlBJX09WRVJfND1NYXRoLlBJLzQuMDtqc3RzLmFsZ29yaXRobS5BbmdsZS5DT1VOVEVSQ0xPQ0tXSVNFPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5DT1VOVEVSQ0xPQ0tXSVNFO2pzdHMuYWxnb3JpdGhtLkFuZ2xlLkNMT0NLV0lTRT1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ0xPQ0tXSVNFO2pzdHMuYWxnb3JpdGhtLkFuZ2xlLk5PTkU9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLkNPTExJTkVBUjtqc3RzLmFsZ29yaXRobS5BbmdsZS50b0RlZ3JlZXM9ZnVuY3Rpb24ocmFkaWFucyl7cmV0dXJuKHJhZGlhbnMqMTgwKS9NYXRoLlBJO307anN0cy5hbGdvcml0aG0uQW5nbGUudG9SYWRpYW5zPWZ1bmN0aW9uKGFuZ2xlRGVncmVlcyl7cmV0dXJuKGFuZ2xlRGVncmVlcypNYXRoLlBJKS8xODAuMDt9O2pzdHMuYWxnb3JpdGhtLkFuZ2xlLmFuZ2xlPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3JldHVybiBqc3RzLmFsZ29yaXRobS5BbmdsZS5hbmdsZUZyb21Pcmlnbyhhcmd1bWVudHNbMF0pO31lbHNle3JldHVybiBqc3RzLmFsZ29yaXRobS5BbmdsZS5hbmdsZUJldHdlZW5Db29yZHMoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7fX07anN0cy5hbGdvcml0aG0uQW5nbGUuYW5nbGVCZXR3ZWVuQ29vcmRzPWZ1bmN0aW9uKHAwLHAxKXt2YXIgZHgsZHk7ZHg9cDEueC1wMC54O2R5PXAxLnktcDAueTtyZXR1cm4gTWF0aC5hdGFuMihkeSxkeCk7fTtqc3RzLmFsZ29yaXRobS5BbmdsZS5hbmdsZUZyb21Pcmlnbz1mdW5jdGlvbihwKXtyZXR1cm4gTWF0aC5hdGFuMihwLnkscC54KTt9O2pzdHMuYWxnb3JpdGhtLkFuZ2xlLmlzQWN1dGU9ZnVuY3Rpb24ocDAscDEscDIpe3ZhciBkeDAsZHkwLGR4MSxkeTEsZG90cHJvZDtkeDA9cDAueC1wMS54O2R5MD1wMC55LXAxLnk7ZHgxPXAyLngtcDEueDtkeTE9cDIueS1wMS55O2RvdHByb2Q9ZHgwKmR4MStkeTAqZHkxO3JldHVybiBkb3Rwcm9kPjA7fTtqc3RzLmFsZ29yaXRobS5BbmdsZS5pc09idHVzZT1mdW5jdGlvbihwMCxwMSxwMil7dmFyIGR4MCxkeTAsZHgxLGR5MSxkb3Rwcm9kO2R4MD1wMC54LXAxLng7ZHkwPXAwLnktcDEueTtkeDE9cDIueC1wMS54O2R5MT1wMi55LXAxLnk7ZG90cHJvZD1keDAqZHgxK2R5MCpkeTE7cmV0dXJuIGRvdHByb2Q8MDt9O2pzdHMuYWxnb3JpdGhtLkFuZ2xlLmFuZ2xlQmV0d2Vlbj1mdW5jdGlvbih0aXAxLHRhaWwsdGlwMil7dmFyIGExLGEyO2ExPWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmFuZ2xlKHRhaWwsdGlwMSk7YTI9anN0cy5hbGdvcml0aG0uQW5nbGUuYW5nbGUodGFpbCx0aXAyKTtyZXR1cm4ganN0cy5hbGdvcml0aG0uQW5nbGUuZGlmZihhMSxhMik7fTtqc3RzLmFsZ29yaXRobS5BbmdsZS5hbmdsZUJldHdlZW5PcmllbnRlZD1mdW5jdGlvbih0aXAxLHRhaWwsdGlwMil7dmFyIGExLGEyLGFuZ0RlbDthMT1qc3RzLmFsZ29yaXRobS5BbmdsZS5hbmdsZSh0YWlsLHRpcDEpO2EyPWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmFuZ2xlKHRhaWwsdGlwMik7YW5nRGVsPWEyLWExO2lmKGFuZ0RlbDw9LU1hdGguUEkpe3JldHVybiBhbmdEZWwranN0cy5hbGdvcml0aG0uQW5nbGUuUElfVElNRVNfMjt9XG5pZihhbmdEZWw+TWF0aC5QSSl7cmV0dXJuIGFuZ0RlbC1qc3RzLmFsZ29yaXRobS5BbmdsZS5QSV9USU1FU18yO31cbnJldHVybiBhbmdEZWw7fTtqc3RzLmFsZ29yaXRobS5BbmdsZS5pbnRlcmlvckFuZ2xlPWZ1bmN0aW9uKHAwLHAxLHAyKXt2YXIgYW5nbGVQcmV2LGFuZ2xlTmV4dDthbmdsZVByZXY9anN0cy5hbGdvcml0aG0uQW5nbGUuYW5nbGUocDEscDApO2FuZ2xlTmV4dD1qc3RzLmFsZ29yaXRobS5BbmdsZS5hbmdsZShwMSxwMik7cmV0dXJuIE1hdGguYWJzKGFuZ2xlTmV4dC1hbmdsZVByZXYpO307anN0cy5hbGdvcml0aG0uQW5nbGUuZ2V0VHVybj1mdW5jdGlvbihhbmcxLGFuZzIpe3ZhciBjcm9zc3Byb2R1Y3Q9TWF0aC5zaW4oYW5nMi1hbmcxKTtpZihjcm9zc3Byb2R1Y3Q+MCl7cmV0dXJuIGpzdHMuYWxnb3JpdGhtLkFuZ2xlLkNPVU5URVJDTE9DS1dJU0U7fVxuaWYoY3Jvc3Nwcm9kdWN0PDApe3JldHVybiBqc3RzLmFsZ29yaXRobS5BbmdsZS5DTE9DS1dJU0U7fVxucmV0dXJuIGpzdHMuYWxnb3JpdGhtLkFuZ2xlLk5PTkU7fTtqc3RzLmFsZ29yaXRobS5BbmdsZS5ub3JtYWxpemU9ZnVuY3Rpb24oYW5nbGUpe3doaWxlKGFuZ2xlPk1hdGguUEkpe2FuZ2xlLT1qc3RzLmFsZ29yaXRobS5BbmdsZS5QSV9USU1FU18yO31cbndoaWxlKGFuZ2xlPD0tTWF0aC5QSSl7YW5nbGUrPWpzdHMuYWxnb3JpdGhtLkFuZ2xlLlBJX1RJTUVTXzI7fVxucmV0dXJuIGFuZ2xlO307anN0cy5hbGdvcml0aG0uQW5nbGUubm9ybWFsaXplUG9zaXRpdmU9ZnVuY3Rpb24oYW5nbGUpe2lmKGFuZ2xlPDAuMCl7d2hpbGUoYW5nbGU8MC4wKXthbmdsZSs9anN0cy5hbGdvcml0aG0uQW5nbGUuUElfVElNRVNfMjt9XG5pZihhbmdsZT49anN0cy5hbGdvcml0aG0uQW5nbGUuUElfVElNRVNfMil7YW5nbGU9MC4wO319XG5lbHNle3doaWxlKGFuZ2xlPj1qc3RzLmFsZ29yaXRobS5BbmdsZS5QSV9USU1FU18yKXthbmdsZS09anN0cy5hbGdvcml0aG0uQW5nbGUuUElfVElNRVNfMjt9XG5pZihhbmdsZTwwLjApe2FuZ2xlPTAuMDt9fVxucmV0dXJuIGFuZ2xlO307anN0cy5hbGdvcml0aG0uQW5nbGUuZGlmZj1mdW5jdGlvbihhbmcxLGFuZzIpe3ZhciBkZWxBbmdsZTtpZihhbmcxPGFuZzIpe2RlbEFuZ2xlPWFuZzItYW5nMTt9ZWxzZXtkZWxBbmdsZT1hbmcxLWFuZzI7fVxuaWYoZGVsQW5nbGU+TWF0aC5QSSl7ZGVsQW5nbGU9KDIqTWF0aC5QSSktZGVsQW5nbGU7fVxucmV0dXJuIGRlbEFuZ2xlO307anN0cy5nZW9tLkdlb21ldHJ5Q29tcG9uZW50RmlsdGVyPWZ1bmN0aW9uKCl7fTtqc3RzLmdlb20uR2VvbWV0cnlDb21wb25lbnRGaWx0ZXIucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihnZW9tKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyPWZ1bmN0aW9uKGxpbmVzLGlzRm9yY2VkVG9MaW5lU3RyaW5nKXt0aGlzLmxpbmVzPWxpbmVzO3RoaXMuaXNGb3JjZWRUb0xpbmVTdHJpbmc9aXNGb3JjZWRUb0xpbmVTdHJpbmc7fTtqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIucHJvdG90eXBlPW5ldyBqc3RzLmdlb20uR2VvbWV0cnlDb21wb25lbnRGaWx0ZXIoKTtqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIucHJvdG90eXBlLmxpbmVzPW51bGw7anN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLnByb3RvdHlwZS5pc0ZvcmNlZFRvTGluZVN0cmluZz1mYWxzZTtqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIuZ2V0TGluZXM9ZnVuY3Rpb24oZ2VvbXMsbGluZXMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe3JldHVybiBqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIuZ2V0TGluZXM1LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG5lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTImJnR5cGVvZiBsaW5lcz09PSdib29sZWFuJyl7cmV0dXJuIGpzdHMuZ2VvbS51dGlsLkxpbmVhckNvbXBvbmVudEV4dHJhY3Rlci5nZXRMaW5lczYuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbmVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09MiYmZ2VvbXMgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnkpe3JldHVybiBqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIuZ2V0TGluZXMzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG5lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTMmJmdlb21zIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5KXtyZXR1cm4ganN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLmdldExpbmVzNC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fVxuZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT0zKXtyZXR1cm4ganN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLmdldExpbmVzMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fVxuZm9yKHZhciBpPTA7aTxnZW9tcy5sZW5ndGg7aSsrKXt2YXIgZz1nZW9tc1tpXTtqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIuZ2V0TGluZXMzKGcsbGluZXMpO31cbnJldHVybiBsaW5lczt9O2pzdHMuZ2VvbS51dGlsLkxpbmVhckNvbXBvbmVudEV4dHJhY3Rlci5nZXRMaW5lczI9ZnVuY3Rpb24oZ2VvbXMsbGluZXMsZm9yY2VUb0xpbmVTdHJpbmcpe2Zvcih2YXIgaT0wO2k8Z2VvbXMubGVuZ3RoO2krKyl7dmFyIGc9Z2VvbXNbaV07anN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLmdldExpbmVzNChnLGxpbmVzLGZvcmNlVG9MaW5lU3RyaW5nKTt9XG5yZXR1cm4gbGluZXM7fTtqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIuZ2V0TGluZXMzPWZ1bmN0aW9uKGdlb20sbGluZXMpe2lmKGdlb20gaW5zdGFuY2VvZiBMaW5lU3RyaW5nKXtsaW5lcy5hZGQoZ2VvbSk7fWVsc2V7Z2VvbS5hcHBseShuZXcganN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyKGxpbmVzKSk7fVxucmV0dXJuIGxpbmVzO307anN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLmdldExpbmVzND1mdW5jdGlvbihnZW9tLGxpbmVzLGZvcmNlVG9MaW5lU3RyaW5nKXtnZW9tLmFwcGx5KG5ldyBqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIobGluZXMsZm9yY2VUb0xpbmVTdHJpbmcpKTtyZXR1cm4gbGluZXM7fTtqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIuZ2V0TGluZXM1PWZ1bmN0aW9uKGdlb20pe3JldHVybiBqc3RzLmdlb20udXRpbC5MaW5lYXJDb21wb25lbnRFeHRyYWN0ZXIuZ2V0TGluZXM2KGdlb20sZmFsc2UpO307anN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLmdldExpbmVzNj1mdW5jdGlvbihnZW9tLGZvcmNlVG9MaW5lU3RyaW5nKXt2YXIgbGluZXM9W107Z2VvbS5hcHBseShuZXcganN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyKGxpbmVzLGZvcmNlVG9MaW5lU3RyaW5nKSk7cmV0dXJuIGxpbmVzO307anN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLnByb3RvdHlwZS5zZXRGb3JjZVRvTGluZVN0cmluZz1mdW5jdGlvbihpc0ZvcmNlZFRvTGluZVN0cmluZyl7dGhpcy5pc0ZvcmNlZFRvTGluZVN0cmluZz1pc0ZvcmNlZFRvTGluZVN0cmluZzt9O2pzdHMuZ2VvbS51dGlsLkxpbmVhckNvbXBvbmVudEV4dHJhY3Rlci5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGdlb20pe2lmKHRoaXMuaXNGb3JjZWRUb0xpbmVTdHJpbmcmJmdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZWFyUmluZyl7dmFyIGxpbmU9Z2VvbS5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhnZW9tLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpKTt0aGlzLmxpbmVzLnB1c2gobGluZSk7cmV0dXJuO31cbmlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZ3x8Z2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lYXJSaW5nKVxudGhpcy5saW5lcy5wdXNoKGdlb20pO307anN0cy5nZW9tLkxvY2F0aW9uPWZ1bmN0aW9uKCl7fTtqc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1I9MDtqc3RzLmdlb20uTG9jYXRpb24uQk9VTkRBUlk9MTtqc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I9Mjtqc3RzLmdlb20uTG9jYXRpb24uTk9ORT0tMTtqc3RzLmdlb20uTG9jYXRpb24udG9Mb2NhdGlvblN5bWJvbD1mdW5jdGlvbihsb2NhdGlvblZhbHVlKXtzd2l0Y2gobG9jYXRpb25WYWx1ZSl7Y2FzZSBqc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I6cmV0dXJuJ2UnO2Nhc2UganN0cy5nZW9tLkxvY2F0aW9uLkJPVU5EQVJZOnJldHVybidiJztjYXNlIGpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUjpyZXR1cm4naSc7Y2FzZSBqc3RzLmdlb20uTG9jYXRpb24uTk9ORTpyZXR1cm4nLSc7fVxudGhyb3cgbmV3IGpzdHMuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ1Vua25vd24gbG9jYXRpb24gdmFsdWU6ICcrXG5sb2NhdGlvblZhbHVlKTt9OyhmdW5jdGlvbigpe2pzdHMuaW8uR2VvSlNPTlJlYWRlcj1mdW5jdGlvbihnZW9tZXRyeUZhY3Rvcnkpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PWdlb21ldHJ5RmFjdG9yeXx8bmV3IGpzdHMuZ2VvbS5HZW9tZXRyeUZhY3RvcnkoKTt0aGlzLnByZWNpc2lvbk1vZGVsPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmdldFByZWNpc2lvbk1vZGVsKCk7dGhpcy5wYXJzZXI9bmV3IGpzdHMuaW8uR2VvSlNPTlBhcnNlcih0aGlzLmdlb21ldHJ5RmFjdG9yeSk7fTtqc3RzLmlvLkdlb0pTT05SZWFkZXIucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZ2VvSnNvbil7dmFyIGdlb21ldHJ5PXRoaXMucGFyc2VyLnJlYWQoZ2VvSnNvbik7aWYodGhpcy5wcmVjaXNpb25Nb2RlbC5nZXRUeXBlKCk9PT1qc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwuRklYRUQpe3RoaXMucmVkdWNlUHJlY2lzaW9uKGdlb21ldHJ5KTt9XG5yZXR1cm4gZ2VvbWV0cnk7fTtqc3RzLmlvLkdlb0pTT05SZWFkZXIucHJvdG90eXBlLnJlZHVjZVByZWNpc2lvbj1mdW5jdGlvbihnZW9tZXRyeSl7dmFyIGksbGVuO2lmKGdlb21ldHJ5LmNvb3JkaW5hdGUpe3RoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2UoZ2VvbWV0cnkuY29vcmRpbmF0ZSk7fWVsc2UgaWYoZ2VvbWV0cnkucG9pbnRzKXtmb3IoaT0wLGxlbj1nZW9tZXRyeS5wb2ludHMubGVuZ3RoO2k8bGVuO2krKyl7dGhpcy5wcmVjaXNpb25Nb2RlbC5tYWtlUHJlY2lzZShnZW9tZXRyeS5wb2ludHNbaV0pO319ZWxzZSBpZihnZW9tZXRyeS5nZW9tZXRyaWVzKXtmb3IoaT0wLGxlbj1nZW9tZXRyeS5nZW9tZXRyaWVzLmxlbmd0aDtpPGxlbjtpKyspe3RoaXMucmVkdWNlUHJlY2lzaW9uKGdlb21ldHJ5Lmdlb21ldHJpZXNbaV0pO319fTt9KSgpO2pzdHMuZ2VvbS5HZW9tZXRyeT1mdW5jdGlvbihmYWN0b3J5KXt0aGlzLmZhY3Rvcnk9ZmFjdG9yeTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZW52ZWxvcGU9bnVsbDtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmZhY3Rvcnk9bnVsbDtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmdldEdlb21ldHJ5VHlwZT1mdW5jdGlvbigpe3JldHVybidHZW9tZXRyeSc7fTtqc3RzLmdlb20uR2VvbWV0cnkuaGFzTm9uRW1wdHlFbGVtZW50cz1mdW5jdGlvbihnZW9tZXRyaWVzKXt2YXIgaTtmb3IoaT0wO2k8Z2VvbWV0cmllcy5sZW5ndGg7aSsrKXtpZighZ2VvbWV0cmllc1tpXS5pc0VtcHR5KCkpe3JldHVybiB0cnVlO319XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmdlb20uR2VvbWV0cnkuaGFzTnVsbEVsZW1lbnRzPWZ1bmN0aW9uKGFycmF5KXt2YXIgaTtmb3IoaT0wO2k8YXJyYXkubGVuZ3RoO2krKyl7aWYoYXJyYXlbaV09PT1udWxsKXtyZXR1cm4gdHJ1ZTt9fVxucmV0dXJuIGZhbHNlO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5nZXRGYWN0b3J5PWZ1bmN0aW9uKCl7aWYodGhpcy5mYWN0b3J5PT09bnVsbHx8dGhpcy5mYWN0b3J5PT09dW5kZWZpbmVkKXt0aGlzLmZhY3Rvcnk9bmV3IGpzdHMuZ2VvbS5HZW9tZXRyeUZhY3RvcnkoKTt9XG5yZXR1cm4gdGhpcy5mYWN0b3J5O307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5nZXROdW1HZW9tZXRyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIDE7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmdldEdlb21ldHJ5Tj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpczt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0UHJlY2lzaW9uTW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuZ2V0UHJlY2lzaW9uTW9kZWwoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0TnVtUG9pbnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuaXNTaW1wbGU9ZnVuY3Rpb24oKXt0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpO3ZhciBvcD1uZXcganN0cy5vcGVyYXRpb24uSXNTaW1wbGVPcCh0aGlzKTtyZXR1cm4gb3AuaXNTaW1wbGUoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbigpe3ZhciBpc1ZhbGlkT3A9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcCh0aGlzKTtyZXR1cm4gaXNWYWxpZE9wLmlzVmFsaWQoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKGcpe3JldHVybiBqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLmRpc3RhbmNlKHRoaXMsZyk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmlzV2l0aGluRGlzdGFuY2U9ZnVuY3Rpb24oZ2VvbSxkaXN0YW5jZSl7dmFyIGVudkRpc3Q9dGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCkuZGlzdGFuY2UoZ2VvbS5nZXRFbnZlbG9wZUludGVybmFsKCkpO2lmKGVudkRpc3Q+ZGlzdGFuY2Upe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gRGlzdGFuY2VPcC5pc1dpdGhpbkRpc3RhbmNlKHRoaXMsZ2VvbSxkaXN0YW5jZSk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmlzUmVjdGFuZ2xlPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5nZXRBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIDAuMDt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIDAuMDt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q2VudHJvaWQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSl7cmV0dXJuIG51bGw7fVxudmFyIGNlbnQ7dmFyIGNlbnRQdD1udWxsO3ZhciBkaW09dGhpcy5nZXREaW1lbnNpb24oKTtpZihkaW09PT0wKXtjZW50PW5ldyBqc3RzLmFsZ29yaXRobS5DZW50cm9pZFBvaW50KCk7Y2VudC5hZGQodGhpcyk7Y2VudFB0PWNlbnQuZ2V0Q2VudHJvaWQoKTt9ZWxzZSBpZihkaW09PT0xKXtjZW50PW5ldyBqc3RzLmFsZ29yaXRobS5DZW50cm9pZExpbmUoKTtjZW50LmFkZCh0aGlzKTtjZW50UHQ9Y2VudC5nZXRDZW50cm9pZCgpO31lbHNle2NlbnQ9bmV3IGpzdHMuYWxnb3JpdGhtLkNlbnRyb2lkQXJlYSgpO2NlbnQuYWRkKHRoaXMpO2NlbnRQdD1jZW50LmdldENlbnRyb2lkKCk7fVxucmV0dXJuIHRoaXMuY3JlYXRlUG9pbnRGcm9tSW50ZXJuYWxDb29yZChjZW50UHQsdGhpcyk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmdldEludGVyaW9yUG9pbnQ9ZnVuY3Rpb24oKXt2YXIgaW50UHQ7dmFyIGludGVyaW9yUHQ9bnVsbDt2YXIgZGltPXRoaXMuZ2V0RGltZW5zaW9uKCk7aWYoZGltPT09MCl7aW50UHQ9bmV3IGpzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRQb2ludCh0aGlzKTtpbnRlcmlvclB0PWludFB0LmdldEludGVyaW9yUG9pbnQoKTt9ZWxzZSBpZihkaW09PT0xKXtpbnRQdD1uZXcganN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludExpbmUodGhpcyk7aW50ZXJpb3JQdD1pbnRQdC5nZXRJbnRlcmlvclBvaW50KCk7fWVsc2V7aW50UHQ9bmV3IGpzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRBcmVhKHRoaXMpO2ludGVyaW9yUHQ9aW50UHQuZ2V0SW50ZXJpb3JQb2ludCgpO31cbnJldHVybiB0aGlzLmNyZWF0ZVBvaW50RnJvbUludGVybmFsQ29vcmQoaW50ZXJpb3JQdCx0aGlzKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0RGltZW5zaW9uPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0Qm91bmRhcnk9ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5nZXRCb3VuZGFyeURpbWVuc2lvbj1mdW5jdGlvbigpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmdldEVudmVsb3BlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLnRvR2VvbWV0cnkodGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCkpO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5nZXRFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7aWYodGhpcy5lbnZlbG9wZT09PW51bGwpe3RoaXMuZW52ZWxvcGU9dGhpcy5jb21wdXRlRW52ZWxvcGVJbnRlcm5hbCgpO31cbnJldHVybiB0aGlzLmVudmVsb3BlO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5kaXNqb2ludD1mdW5jdGlvbihnKXtyZXR1cm4hdGhpcy5pbnRlcnNlY3RzKGcpO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS50b3VjaGVzPWZ1bmN0aW9uKGcpe2lmKCF0aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKGcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiB0aGlzLnJlbGF0ZShnKS5pc1RvdWNoZXModGhpcy5nZXREaW1lbnNpb24oKSxnLmdldERpbWVuc2lvbigpKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbihnKXtpZighdGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhnLmdldEVudmVsb3BlSW50ZXJuYWwoKSkpe3JldHVybiBmYWxzZTt9XG5pZih0aGlzLmlzUmVjdGFuZ2xlKCkpe3JldHVybiBqc3RzLm9wZXJhdGlvbi5wcmVkaWNhdGUuUmVjdGFuZ2xlSW50ZXJzZWN0cy5pbnRlcnNlY3RzKHRoaXMsZyk7fVxuaWYoZy5pc1JlY3RhbmdsZSgpKXtyZXR1cm4ganN0cy5vcGVyYXRpb24ucHJlZGljYXRlLlJlY3RhbmdsZUludGVyc2VjdHMuaW50ZXJzZWN0cyhnLHRoaXMpO31cbnJldHVybiB0aGlzLnJlbGF0ZShnKS5pc0ludGVyc2VjdHMoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuY3Jvc3Nlcz1mdW5jdGlvbihnKXtpZighdGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhnLmdldEVudmVsb3BlSW50ZXJuYWwoKSkpe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gdGhpcy5yZWxhdGUoZykuaXNDcm9zc2VzKHRoaXMuZ2V0RGltZW5zaW9uKCksZy5nZXREaW1lbnNpb24oKSk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLndpdGhpbj1mdW5jdGlvbihnKXtyZXR1cm4gZy5jb250YWlucyh0aGlzKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZyl7aWYoIXRoaXMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmNvbnRhaW5zKGcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7cmV0dXJuIGZhbHNlO31cbmlmKHRoaXMuaXNSZWN0YW5nbGUoKSl7cmV0dXJuIGpzdHMub3BlcmF0aW9uLnByZWRpY2F0ZS5SZWN0YW5nbGVDb250YWlucy5jb250YWlucyh0aGlzLGcpO31cbnJldHVybiB0aGlzLnJlbGF0ZShnKS5pc0NvbnRhaW5zKCk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLm92ZXJsYXBzPWZ1bmN0aW9uKGcpe2lmKCF0aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKGcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiB0aGlzLnJlbGF0ZShnKS5pc092ZXJsYXBzKHRoaXMuZ2V0RGltZW5zaW9uKCksZy5nZXREaW1lbnNpb24oKSk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmNvdmVycz1mdW5jdGlvbihnKXtpZighdGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCkuY292ZXJzKGcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7cmV0dXJuIGZhbHNlO31cbmlmKHRoaXMuaXNSZWN0YW5nbGUoKSl7cmV0dXJuIHRydWU7fVxucmV0dXJuIHRoaXMucmVsYXRlKGcpLmlzQ292ZXJzKCk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmNvdmVyZWRCeT1mdW5jdGlvbihnKXtyZXR1cm4gZy5jb3ZlcnModGhpcyk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLnJlbGF0ZT1mdW5jdGlvbihnLGludGVyc2VjdGlvblBhdHRlcm4pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtyZXR1cm4gdGhpcy5yZWxhdGUyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG5yZXR1cm4gdGhpcy5yZWxhdGUyKGcpLm1hdGNoZXMoaW50ZXJzZWN0aW9uUGF0dGVybik7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLnJlbGF0ZTI9ZnVuY3Rpb24oZyl7dGhpcy5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0aGlzKTt0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKGcpO3JldHVybiBqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlT3AucmVsYXRlKHRoaXMsZyk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmVxdWFsc1RvcG89ZnVuY3Rpb24oZyl7aWYoIXRoaXMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmVxdWFscyhnLmdldEVudmVsb3BlSW50ZXJuYWwoKSkpe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gdGhpcy5yZWxhdGUoZykuaXNFcXVhbHModGhpcy5nZXREaW1lbnNpb24oKSxnLmdldERpbWVuc2lvbigpKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKG8pe2lmKG8gaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnl8fG8gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZWFyUmluZ3x8byBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29ufHxvIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbnx8byBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvaW50fHxvIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpTGluZVN0cmluZ3x8byBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvbHlnb24pe3JldHVybiB0aGlzLmVxdWFsc0V4YWN0KG8pO31cbnJldHVybiBmYWxzZTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuYnVmZmVyPWZ1bmN0aW9uKGRpc3RhbmNlLHF1YWRyYW50U2VnbWVudHMsZW5kQ2FwU3R5bGUpe3ZhciBwYXJhbXM9bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzKHF1YWRyYW50U2VnbWVudHMsZW5kQ2FwU3R5bGUpXG5yZXR1cm4ganN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLmJ1ZmZlck9wMih0aGlzLGRpc3RhbmNlLHBhcmFtcyk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmNvbnZleEh1bGw9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGpzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwodGhpcykuZ2V0Q29udmV4SHVsbCgpO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24ob3RoZXIpe2lmKHRoaXMuaXNFbXB0eSgpKXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKG51bGwpO31cbmlmKG90aGVyLmlzRW1wdHkoKSl7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKTt9XG5pZih0aGlzLmlzR2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpKXt2YXIgZzI9b3RoZXI7fVxudGhpcy5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0aGlzKTt0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKG90aGVyKTtyZXR1cm4ganN0cy5vcGVyYXRpb24ub3ZlcmxheS5zbmFwLlNuYXBJZk5lZWRlZE92ZXJsYXlPcC5vdmVybGF5T3AodGhpcyxvdGhlcixqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5JTlRFUlNFQ1RJT04pO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS51bmlvbj1mdW5jdGlvbihvdGhlcil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3JldHVybiBqc3RzLm9wZXJhdGlvbi51bmlvbi5VbmFyeVVuaW9uT3AudW5pb24odGhpcyk7fVxuaWYodGhpcy5pc0VtcHR5KCkpe3JldHVybiBvdGhlci5jbG9uZSgpO31cbmlmKG90aGVyLmlzRW1wdHkoKSl7cmV0dXJuIHRoaXMuY2xvbmUoKTt9XG50aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpO3RoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24ob3RoZXIpO3JldHVybiBqc3RzLm9wZXJhdGlvbi5vdmVybGF5LnNuYXAuU25hcElmTmVlZGVkT3ZlcmxheU9wLm92ZXJsYXlPcCh0aGlzLG90aGVyLGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLlVOSU9OKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZGlmZmVyZW5jZT1mdW5jdGlvbihvdGhlcil7aWYodGhpcy5pc0VtcHR5KCkpe3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obnVsbCk7fVxuaWYob3RoZXIuaXNFbXB0eSgpKXtyZXR1cm4gdGhpcy5jbG9uZSgpO31cbnRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odGhpcyk7dGhpcy5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbihvdGhlcik7cmV0dXJuIGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuc25hcC5TbmFwSWZOZWVkZWRPdmVybGF5T3Aub3ZlcmxheU9wKHRoaXMsb3RoZXIsanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuRElGRkVSRU5DRSk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLnN5bURpZmZlcmVuY2U9ZnVuY3Rpb24ob3RoZXIpe2lmKHRoaXMuaXNFbXB0eSgpKXtyZXR1cm4gb3RoZXIuY2xvbmUoKTt9XG5pZihvdGhlci5pc0VtcHR5KCkpe3JldHVybiB0aGlzLmNsb25lKCk7fVxudGhpcy5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0aGlzKTt0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKG90aGVyKTtyZXR1cm4ganN0cy5vcGVyYXRpb24ub3ZlcmxheS5zbmFwLlNuYXBJZk5lZWRlZE92ZXJsYXlPcC5vdmVybGF5T3AodGhpcyxvdGhlcixqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5TWU1ESUZGRVJFTkNFKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZXF1YWxzRXhhY3Q9ZnVuY3Rpb24ob3RoZXIsdG9sZXJhbmNlKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5lcXVhbHNOb3JtPWZ1bmN0aW9uKGcpe2lmKGc9PT1udWxsfHxnPT09dW5kZWZpbmVkKVxucmV0dXJuIGZhbHNlO3JldHVybiB0aGlzLm5vcm0oKS5lcXVhbHNFeGFjdChnLm5vcm0oKSk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGZpbHRlcil7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5ub3JtPWZ1bmN0aW9uKCl7dmFyIGNvcHk9dGhpcy5jbG9uZSgpO2NvcHkubm9ybWFsaXplKCk7cmV0dXJuIGNvcHk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbihvKXt2YXIgb3RoZXI9bztpZih0aGlzLmdldENsYXNzU29ydEluZGV4KCkhPT1vdGhlci5nZXRDbGFzc1NvcnRJbmRleCgpKXtyZXR1cm4gdGhpcy5nZXRDbGFzc1NvcnRJbmRleCgpLW90aGVyLmdldENsYXNzU29ydEluZGV4KCk7fVxuaWYodGhpcy5pc0VtcHR5KCkmJm90aGVyLmlzRW1wdHkoKSl7cmV0dXJuIDA7fVxuaWYodGhpcy5pc0VtcHR5KCkpe3JldHVybi0xO31cbmlmKG90aGVyLmlzRW1wdHkoKSl7cmV0dXJuIDE7fVxucmV0dXJuIHRoaXMuY29tcGFyZVRvU2FtZUNsYXNzKG8pO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5pc0VxdWl2YWxlbnRDbGFzcz1mdW5jdGlvbihvdGhlcil7aWYodGhpcyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2ludCYmb3RoZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnQpe3JldHVybiB0cnVlO31lbHNlIGlmKHRoaXMgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZyYmKG90aGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmd8b3RoZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZWFyUmluZykpe3JldHVybiB0cnVlO31lbHNlIGlmKHRoaXMgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZWFyUmluZyYmKG90aGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmd8b3RoZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZWFyUmluZykpe3JldHVybiB0cnVlO31lbHNlIGlmKHRoaXMgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbiYmKG90aGVyIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pKXtyZXR1cm4gdHJ1ZTt9ZWxzZSBpZih0aGlzIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9pbnQmJihvdGhlciBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvaW50KSl7cmV0dXJuIHRydWU7fWVsc2UgaWYodGhpcyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcmJihvdGhlciBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcpKXtyZXR1cm4gdHJ1ZTt9ZWxzZSBpZih0aGlzIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbiYmKG90aGVyIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbikpe3JldHVybiB0cnVlO31lbHNlIGlmKHRoaXMgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uJiYob3RoZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKSl7cmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbj1mdW5jdGlvbihnKXtpZihnLmlzR2VvbWV0cnlDb2xsZWN0aW9uQmFzZSgpKXt0aHJvdyBuZXcganN0cy5lcnJvci5JbGxlZ2FsQXJndW1lbnRFcnJvcignVGhpcyBtZXRob2QgZG9lcyBub3Qgc3VwcG9ydCBHZW9tZXRyeUNvbGxlY3Rpb24nKTt9fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmlzR2VvbWV0cnlDb2xsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuaXNHZW9tZXRyeUNvbGxlY3Rpb25CYXNlPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuQ0xBU1NfTkFNRT09PSdqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uJyk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuY29tcGFyZVRvU2FtZUNsYXNzPWZ1bmN0aW9uKG8pe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXt2YXIgaT1hLml0ZXJhdG9yKCk7dmFyIGo9Yi5pdGVyYXRvcigpO3doaWxlKGkuaGFzTmV4dCgpJiZqLmhhc05leHQoKSl7dmFyIGFFbGVtZW50PWkubmV4dCgpO3ZhciBiRWxlbWVudD1qLm5leHQoKTt2YXIgY29tcGFyaXNvbj1hRWxlbWVudC5jb21wYXJlVG8oYkVsZW1lbnQpO2lmKGNvbXBhcmlzb24hPT0wKXtyZXR1cm4gY29tcGFyaXNvbjt9fVxuaWYoaS5oYXNOZXh0KCkpe3JldHVybiAxO31cbmlmKGouaGFzTmV4dCgpKXtyZXR1cm4tMTt9XG5yZXR1cm4gMDt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZXF1YWw9ZnVuY3Rpb24oYSxiLHRvbGVyYW5jZSl7aWYodG9sZXJhbmNlPT09dW5kZWZpbmVkfHx0b2xlcmFuY2U9PT1udWxsfHx0b2xlcmFuY2U9PT0wKXtyZXR1cm4gYS5lcXVhbHMoYik7fVxucmV0dXJuIGEuZGlzdGFuY2UoYik8PXRvbGVyYW5jZTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q2xhc3NTb3J0SW5kZXg9ZnVuY3Rpb24oKXt2YXIgc29ydGVkQ2xhc3Nlcz1banN0cy5nZW9tLlBvaW50LGpzdHMuZ2VvbS5NdWx0aVBvaW50LGpzdHMuZ2VvbS5MaW5lU3RyaW5nLGpzdHMuZ2VvbS5MaW5lYXJSaW5nLGpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcsanN0cy5nZW9tLlBvbHlnb24sanN0cy5nZW9tLk11bHRpUG9seWdvbixqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uXTtmb3IodmFyIGk9MDtpPHNvcnRlZENsYXNzZXMubGVuZ3RoO2krKyl7aWYodGhpcyBpbnN0YW5jZW9mIHNvcnRlZENsYXNzZXNbaV0pXG5yZXR1cm4gaTt9XG5qc3RzLnV0aWwuQXNzZXJ0LnNob3VsZE5ldmVyUmVhY2hIZXJlKCdDbGFzcyBub3Qgc3VwcG9ydGVkOiAnK3RoaXMpO3JldHVybi0xO307anN0cy5nZW9tLkdlb21ldHJ5LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBuZXcganN0cy5pby5XS1RXcml0ZXIoKS53cml0ZSh0aGlzKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeS5wcm90b3R5cGUuY3JlYXRlUG9pbnRGcm9tSW50ZXJuYWxDb29yZD1mdW5jdGlvbihjb29yZCxleGVtcGxhcil7ZXhlbXBsYXIuZ2V0UHJlY2lzaW9uTW9kZWwoKS5tYWtlUHJlY2lzZShjb29yZCk7cmV0dXJuIGV4ZW1wbGFyLmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludChjb29yZCk7fTsoZnVuY3Rpb24oKXtqc3RzLmdlb20uQ29vcmRpbmF0ZT1mdW5jdGlvbih4LHkpe2lmKHR5cGVvZiB4PT09J251bWJlcicpe3RoaXMueD14O3RoaXMueT15O31lbHNlIGlmKHggaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7dGhpcy54PXBhcnNlRmxvYXQoeC54KTt0aGlzLnk9cGFyc2VGbG9hdCh4LnkpO31lbHNlIGlmKHg9PT11bmRlZmluZWR8fHg9PT1udWxsKXt0aGlzLng9MDt0aGlzLnk9MDt9ZWxzZSBpZih0eXBlb2YgeD09PSdzdHJpbmcnKXt0aGlzLng9cGFyc2VGbG9hdCh4KTt0aGlzLnk9cGFyc2VGbG9hdCh5KTt9fTtqc3RzLmdlb20uQ29vcmRpbmF0ZS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZT1mdW5jdGlvbihvdGhlcil7dGhpcy54PW90aGVyLng7dGhpcy55PW90aGVyLnk7fTtqc3RzLmdlb20uQ29vcmRpbmF0ZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHRoaXMueCx0aGlzLnkpO307anN0cy5nZW9tLkNvb3JkaW5hdGUucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKHApe3ZhciBkeD10aGlzLngtcC54O3ZhciBkeT10aGlzLnktcC55O3JldHVybiBNYXRoLnNxcnQoZHgqZHgrZHkqZHkpO307anN0cy5nZW9tLkNvb3JkaW5hdGUucHJvdG90eXBlLmVxdWFsczJEPWZ1bmN0aW9uKG90aGVyKXtpZih0aGlzLnghPT1vdGhlci54KXtyZXR1cm4gZmFsc2U7fVxuaWYodGhpcy55IT09b3RoZXIueSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiB0cnVlO307anN0cy5nZW9tLkNvb3JkaW5hdGUucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihvdGhlcil7aWYoIW90aGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGV8fG90aGVyPT09dW5kZWZpbmVkKXtyZXR1cm4gZmFsc2U7fVxucmV0dXJuIHRoaXMuZXF1YWxzMkQob3RoZXIpO307anN0cy5nZW9tLkNvb3JkaW5hdGUucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbihvdGhlcil7aWYodGhpcy54PG90aGVyLngpe3JldHVybi0xO31cbmlmKHRoaXMueD5vdGhlci54KXtyZXR1cm4gMTt9XG5pZih0aGlzLnk8b3RoZXIueSl7cmV0dXJuLTE7fVxuaWYodGhpcy55Pm90aGVyLnkpe3JldHVybiAxO31cbnJldHVybiAwO307anN0cy5nZW9tLkNvb3JkaW5hdGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuJygnK3RoaXMueCsnLCAnK3RoaXMueSsnKSc7fTt9KSgpO2pzdHMuZ2VvbS5FbnZlbG9wZT1mdW5jdGlvbigpe2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLm1pbng9bnVsbDtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLm1heHg9bnVsbDtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLm1pbnk9bnVsbDtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLm1heHk9bnVsbDtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZih0eXBlb2YgYXJndW1lbnRzWzBdPT09J251bWJlcicmJmFyZ3VtZW50cy5sZW5ndGg9PT00KXt0aGlzLmluaXRGcm9tVmFsdWVzKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdLGFyZ3VtZW50c1szXSk7fWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSYmYXJndW1lbnRzLmxlbmd0aD09PTEpe3RoaXMuaW5pdEZyb21Db29yZGluYXRlKGFyZ3VtZW50c1swXSk7fWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSYmYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMuaW5pdEZyb21Db29yZGluYXRlcyhhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGpzdHMuZ2VvbS5FbnZlbG9wZSYmYXJndW1lbnRzLmxlbmd0aD09PTEpe3RoaXMuaW5pdEZyb21FbnZlbG9wZShhcmd1bWVudHNbMF0pO31lbHNle3RoaXMuc2V0VG9OdWxsKCk7fX07anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5pbml0RnJvbVZhbHVlcz1mdW5jdGlvbih4MSx4Mix5MSx5Mil7aWYoeDE8eDIpe3RoaXMubWlueD14MTt0aGlzLm1heHg9eDI7fWVsc2V7dGhpcy5taW54PXgyO3RoaXMubWF4eD14MTt9XG5pZih5MTx5Mil7dGhpcy5taW55PXkxO3RoaXMubWF4eT15Mjt9ZWxzZXt0aGlzLm1pbnk9eTI7dGhpcy5tYXh5PXkxO319O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuaW5pdEZyb21Db29yZGluYXRlcz1mdW5jdGlvbihwMSxwMil7dGhpcy5pbml0RnJvbVZhbHVlcyhwMS54LHAyLngscDEueSxwMi55KTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuaW5pdEZyb21Db29yZGluYXRlPWZ1bmN0aW9uKHApe3RoaXMuaW5pdEZyb21WYWx1ZXMocC54LHAueCxwLnkscC55KTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuaW5pdEZyb21FbnZlbG9wZT1mdW5jdGlvbihlbnYpe3RoaXMubWlueD1lbnYubWlueDt0aGlzLm1heHg9ZW52Lm1heHg7dGhpcy5taW55PWVudi5taW55O3RoaXMubWF4eT1lbnYubWF4eTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuc2V0VG9OdWxsPWZ1bmN0aW9uKCl7dGhpcy5taW54PTA7dGhpcy5tYXh4PS0xO3RoaXMubWlueT0wO3RoaXMubWF4eT0tMTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4eDx0aGlzLm1pbng7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmdldEhlaWdodD1mdW5jdGlvbigpe2lmKHRoaXMuaXNOdWxsKCkpe3JldHVybiAwO31cbnJldHVybiB0aGlzLm1heHktdGhpcy5taW55O307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbigpe2lmKHRoaXMuaXNOdWxsKCkpe3JldHVybiAwO31cbnJldHVybiB0aGlzLm1heHgtdGhpcy5taW54O307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5nZXRNaW5YPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWlueDt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuZ2V0TWF4WD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1heHg7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmdldE1pblk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW55O307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5nZXRNYXhZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4eTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuZ2V0QXJlYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFdpZHRoKCkqdGhpcy5nZXRIZWlnaHQoKTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuZXhwYW5kVG9JbmNsdWRlPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7dGhpcy5leHBhbmRUb0luY2x1ZGVDb29yZGluYXRlKGFyZ3VtZW50c1swXSk7fWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb20uRW52ZWxvcGUpe3RoaXMuZXhwYW5kVG9JbmNsdWRlRW52ZWxvcGUoYXJndW1lbnRzWzBdKTt9ZWxzZXt0aGlzLmV4cGFuZFRvSW5jbHVkZVZhbHVlcyhhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt9fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmV4cGFuZFRvSW5jbHVkZUNvb3JkaW5hdGU9ZnVuY3Rpb24ocCl7dGhpcy5leHBhbmRUb0luY2x1ZGVWYWx1ZXMocC54LHAueSk7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmV4cGFuZFRvSW5jbHVkZVZhbHVlcz1mdW5jdGlvbih4LHkpe2lmKHRoaXMuaXNOdWxsKCkpe3RoaXMubWlueD14O3RoaXMubWF4eD14O3RoaXMubWlueT15O3RoaXMubWF4eT15O31lbHNle2lmKHg8dGhpcy5taW54KXt0aGlzLm1pbng9eDt9XG5pZih4PnRoaXMubWF4eCl7dGhpcy5tYXh4PXg7fVxuaWYoeTx0aGlzLm1pbnkpe3RoaXMubWlueT15O31cbmlmKHk+dGhpcy5tYXh5KXt0aGlzLm1heHk9eTt9fX07anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5leHBhbmRUb0luY2x1ZGVFbnZlbG9wZT1mdW5jdGlvbihvdGhlcil7aWYob3RoZXIuaXNOdWxsKCkpe3JldHVybjt9XG5pZih0aGlzLmlzTnVsbCgpKXt0aGlzLm1pbng9b3RoZXIuZ2V0TWluWCgpO3RoaXMubWF4eD1vdGhlci5nZXRNYXhYKCk7dGhpcy5taW55PW90aGVyLmdldE1pblkoKTt0aGlzLm1heHk9b3RoZXIuZ2V0TWF4WSgpO31lbHNle2lmKG90aGVyLm1pbng8dGhpcy5taW54KXt0aGlzLm1pbng9b3RoZXIubWlueDt9XG5pZihvdGhlci5tYXh4PnRoaXMubWF4eCl7dGhpcy5tYXh4PW90aGVyLm1heHg7fVxuaWYob3RoZXIubWlueTx0aGlzLm1pbnkpe3RoaXMubWlueT1vdGhlci5taW55O31cbmlmKG90aGVyLm1heHk+dGhpcy5tYXh5KXt0aGlzLm1heHk9b3RoZXIubWF4eTt9fX07anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5leHBhbmRCeT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXt0aGlzLmV4cGFuZEJ5RGlzdGFuY2UoYXJndW1lbnRzWzBdKTt9ZWxzZXt0aGlzLmV4cGFuZEJ5RGlzdGFuY2VzKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pO319O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuZXhwYW5kQnlEaXN0YW5jZT1mdW5jdGlvbihkaXN0YW5jZSl7dGhpcy5leHBhbmRCeURpc3RhbmNlcyhkaXN0YW5jZSxkaXN0YW5jZSk7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmV4cGFuZEJ5RGlzdGFuY2VzPWZ1bmN0aW9uKGRlbHRhWCxkZWx0YVkpe2lmKHRoaXMuaXNOdWxsKCkpe3JldHVybjt9XG50aGlzLm1pbngtPWRlbHRhWDt0aGlzLm1heHgrPWRlbHRhWDt0aGlzLm1pbnktPWRlbHRhWTt0aGlzLm1heHkrPWRlbHRhWTtpZih0aGlzLm1pbng+dGhpcy5tYXh4fHx0aGlzLm1pbnk+dGhpcy5tYXh5KXt0aGlzLnNldFRvTnVsbCgpO319O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUudHJhbnNsYXRlPWZ1bmN0aW9uKHRyYW5zWCx0cmFuc1kpe2lmKHRoaXMuaXNOdWxsKCkpe3JldHVybjt9XG50aGlzLmluaXQodGhpcy5taW54K3RyYW5zWCx0aGlzLm1heHgrdHJhbnNYLHRoaXMubWlueSt0cmFuc1ksdGhpcy5tYXh5K3RyYW5zWSk7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmNlbnRyZT1mdW5jdGlvbigpe2lmKHRoaXMuaXNOdWxsKCkpe3JldHVybiBudWxsO31cbnJldHVybiBuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKHRoaXMubWlueCt0aGlzLm1heHgpLzIuMCwodGhpcy5taW55K3RoaXMubWF4eSkvMi4wKTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGVudil7aWYodGhpcy5pc051bGwoKXx8ZW52LmlzTnVsbCgpfHwhdGhpcy5pbnRlcnNlY3RzKGVudikpe3JldHVybiBuZXcganN0cy5nZW9tLkVudmVsb3BlKCk7fVxudmFyIGludE1pblg9dGhpcy5taW54PmVudi5taW54P3RoaXMubWlueDplbnYubWlueDt2YXIgaW50TWluWT10aGlzLm1pbnk+ZW52Lm1pbnk/dGhpcy5taW55OmVudi5taW55O3ZhciBpbnRNYXhYPXRoaXMubWF4eDxlbnYubWF4eD90aGlzLm1heHg6ZW52Lm1heHg7dmFyIGludE1heFk9dGhpcy5tYXh5PGVudi5tYXh5P3RoaXMubWF4eTplbnYubWF4eTtyZXR1cm4gbmV3IGpzdHMuZ2VvbS5FbnZlbG9wZShpbnRNaW5YLGludE1heFgsaW50TWluWSxpbnRNYXhZKTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YganN0cy5nZW9tLkVudmVsb3BlKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzRW52ZWxvcGUoYXJndW1lbnRzWzBdKTt9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGpzdHMuZ2VvbS5Db29yZGluYXRlKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQ29vcmRpbmF0ZShhcmd1bWVudHNbMF0pO31lbHNle3JldHVybiB0aGlzLmludGVyc2VjdHNWYWx1ZXMoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7fX07anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5pbnRlcnNlY3RzRW52ZWxvcGU9ZnVuY3Rpb24ob3RoZXIpe2lmKHRoaXMuaXNOdWxsKCl8fG90aGVyLmlzTnVsbCgpKXtyZXR1cm4gZmFsc2U7fVxudmFyIHJlc3VsdD0hKG90aGVyLm1pbng+dGhpcy5tYXh4fHxvdGhlci5tYXh4PHRoaXMubWlueHx8b3RoZXIubWlueT50aGlzLm1heHl8fG90aGVyLm1heHk8dGhpcy5taW55KTtyZXR1cm4gcmVzdWx0O307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5pbnRlcnNlY3RzQ29vcmRpbmF0ZT1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzVmFsdWVzKHAueCxwLnkpO307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5pbnRlcnNlY3RzVmFsdWVzPWZ1bmN0aW9uKHgseSl7aWYodGhpcy5pc051bGwoKSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiEoeD50aGlzLm1heHh8fHg8dGhpcy5taW54fHx5PnRoaXMubWF4eXx8eTx0aGlzLm1pbnkpO307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YganN0cy5nZW9tLkVudmVsb3BlKXtyZXR1cm4gdGhpcy5jb250YWluc0VudmVsb3BlKGFyZ3VtZW50c1swXSk7fWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7cmV0dXJuIHRoaXMuY29udGFpbnNDb29yZGluYXRlKGFyZ3VtZW50c1swXSk7fWVsc2V7cmV0dXJuIHRoaXMuY29udGFpbnNWYWx1ZXMoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7fX07anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5jb250YWluc0VudmVsb3BlPWZ1bmN0aW9uKG90aGVyKXtyZXR1cm4gdGhpcy5jb3ZlcnNFbnZlbG9wZShvdGhlcik7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmNvbnRhaW5zQ29vcmRpbmF0ZT1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5jb3ZlcnNDb29yZGluYXRlKHApO307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5jb250YWluc1ZhbHVlcz1mdW5jdGlvbih4LHkpe3JldHVybiB0aGlzLmNvdmVyc1ZhbHVlcyh4LHkpO307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5jb3ZlcnM9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGpzdHMuZ2VvbS5FbnZlbG9wZSl7cmV0dXJuIHRoaXMuY292ZXJzRW52ZWxvcGUoYXJndW1lbnRzWzBdKTt9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGpzdHMuZ2VvbS5Db29yZGluYXRlKXtyZXR1cm4gdGhpcy5jb3ZlcnNDb29yZGluYXRlKGFyZ3VtZW50c1swXSk7fWVsc2V7cmV0dXJuIHRoaXMuY292ZXJzVmFsdWVzKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pO319O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUuY292ZXJzVmFsdWVzPWZ1bmN0aW9uKHgseSl7aWYodGhpcy5pc051bGwoKSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiB4Pj10aGlzLm1pbngmJng8PXRoaXMubWF4eCYmeT49dGhpcy5taW55JiZ5PD10aGlzLm1heHk7fTtqc3RzLmdlb20uRW52ZWxvcGUucHJvdG90eXBlLmNvdmVyc0Nvb3JkaW5hdGU9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuY292ZXJzVmFsdWVzKHAueCxwLnkpO307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5jb3ZlcnNFbnZlbG9wZT1mdW5jdGlvbihvdGhlcil7aWYodGhpcy5pc051bGwoKXx8b3RoZXIuaXNOdWxsKCkpe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gb3RoZXIubWlueD49dGhpcy5taW54JiZvdGhlci5tYXh4PD10aGlzLm1heHgmJm90aGVyLm1pbnk+PXRoaXMubWlueSYmb3RoZXIubWF4eTw9dGhpcy5tYXh5O307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5kaXN0YW5jZT1mdW5jdGlvbihlbnYpe2lmKHRoaXMuaW50ZXJzZWN0cyhlbnYpKXtyZXR1cm4gMDt9XG52YXIgZHg9MC4wO2lmKHRoaXMubWF4eDxlbnYubWlueCl7ZHg9ZW52Lm1pbngtdGhpcy5tYXh4O31cbmlmKHRoaXMubWlueD5lbnYubWF4eCl7ZHg9dGhpcy5taW54LWVudi5tYXh4O31cbnZhciBkeT0wLjA7aWYodGhpcy5tYXh5PGVudi5taW55KXtkeT1lbnYubWlueS10aGlzLm1heHk7fVxuaWYodGhpcy5taW55PmVudi5tYXh5KXtkeT10aGlzLm1pbnktZW52Lm1heHk7fVxuaWYoZHg9PT0wLjApe3JldHVybiBkeTt9XG5pZihkeT09PTAuMCl7cmV0dXJuIGR4O31cbnJldHVybiBNYXRoLnNxcnQoZHgqZHgrZHkqZHkpO307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24ob3RoZXIpe2lmKHRoaXMuaXNOdWxsKCkpe3JldHVybiBvdGhlci5pc051bGwoKTt9XG5yZXR1cm4gdGhpcy5tYXh4PT09b3RoZXIubWF4eCYmdGhpcy5tYXh5PT09b3RoZXIubWF4eSYmdGhpcy5taW54PT09b3RoZXIubWlueCYmdGhpcy5taW55PT09b3RoZXIubWlueTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4nRW52WycrdGhpcy5taW54KycgOiAnK3RoaXMubWF4eCsnLCAnK3RoaXMubWlueSsnIDogJytcbnRoaXMubWF4eSsnXSc7fTtqc3RzLmdlb20uRW52ZWxvcGUuaW50ZXJzZWN0cz1mdW5jdGlvbihwMSxwMixxKXtpZihhcmd1bWVudHMubGVuZ3RoPT09NCl7cmV0dXJuIGpzdHMuZ2VvbS5FbnZlbG9wZS5pbnRlcnNlY3RzRW52ZWxvcGUoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0sYXJndW1lbnRzWzNdKTt9XG52YXIgeGMxPXAxLng8cDIueD9wMS54OnAyLng7dmFyIHhjMj1wMS54PnAyLng/cDEueDpwMi54O3ZhciB5YzE9cDEueTxwMi55P3AxLnk6cDIueTt2YXIgeWMyPXAxLnk+cDIueT9wMS55OnAyLnk7aWYoKChxLng+PXhjMSkmJihxLng8PXhjMikpJiYoKHEueT49eWMxKSYmKHEueTw9eWMyKSkpe3JldHVybiB0cnVlO31cbnJldHVybiBmYWxzZTt9O2pzdHMuZ2VvbS5FbnZlbG9wZS5pbnRlcnNlY3RzRW52ZWxvcGU9ZnVuY3Rpb24ocDEscDIscTEscTIpe3ZhciBtaW5xPU1hdGgubWluKHExLngscTIueCk7dmFyIG1heHE9TWF0aC5tYXgocTEueCxxMi54KTt2YXIgbWlucD1NYXRoLm1pbihwMS54LHAyLngpO3ZhciBtYXhwPU1hdGgubWF4KHAxLngscDIueCk7aWYobWlucD5tYXhxKXtyZXR1cm4gZmFsc2U7fVxuaWYobWF4cDxtaW5xKXtyZXR1cm4gZmFsc2U7fVxubWlucT1NYXRoLm1pbihxMS55LHEyLnkpO21heHE9TWF0aC5tYXgocTEueSxxMi55KTttaW5wPU1hdGgubWluKHAxLnkscDIueSk7bWF4cD1NYXRoLm1heChwMS55LHAyLnkpO2lmKG1pbnA+bWF4cSl7cmV0dXJuIGZhbHNlO31cbmlmKG1heHA8bWlucSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiB0cnVlO307anN0cy5nZW9tLkVudmVsb3BlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcganN0cy5nZW9tLkVudmVsb3BlKHRoaXMubWlueCx0aGlzLm1heHgsdGhpcy5taW55LHRoaXMubWF4eSk7fTtqc3RzLmdlb20udXRpbC5HZW9tZXRyeUNvbWJpbmVyPWZ1bmN0aW9uKGdlb21zKXt0aGlzLmdlb21GYWN0b3J5PWpzdHMuZ2VvbS51dGlsLkdlb21ldHJ5Q29tYmluZXIuZXh0cmFjdEZhY3RvcnkoZ2VvbXMpO3RoaXMuaW5wdXRHZW9tcz1nZW9tczt9O2pzdHMuZ2VvbS51dGlsLkdlb21ldHJ5Q29tYmluZXIuY29tYmluZT1mdW5jdGlvbihnZW9tcyl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXJldHVybiB0aGlzLmNvbWJpbmUyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgY29tYmluZXI9bmV3IGpzdHMuZ2VvbS51dGlsLkdlb21ldHJ5Q29tYmluZXIoZ2VvbXMpO3JldHVybiBjb21iaW5lci5jb21iaW5lKCk7fTtqc3RzLmdlb20udXRpbC5HZW9tZXRyeUNvbWJpbmVyLmNvbWJpbmUyPWZ1bmN0aW9uKCl7dmFyIGFycmF5TGlzdD1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpO0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuZm9yRWFjaChmdW5jdGlvbihhKXthcnJheUxpc3QuYWRkKGEpO30pO3ZhciBjb21iaW5lcj1uZXcganN0cy5nZW9tLnV0aWwuR2VvbWV0cnlDb21iaW5lcihhcnJheUxpc3QpO3JldHVybiBjb21iaW5lci5jb21iaW5lKCk7fTtqc3RzLmdlb20udXRpbC5HZW9tZXRyeUNvbWJpbmVyLnByb3RvdHlwZS5nZW9tRmFjdG9yeT1udWxsO2pzdHMuZ2VvbS51dGlsLkdlb21ldHJ5Q29tYmluZXIucHJvdG90eXBlLnNraXBFbXB0eT1mYWxzZTtqc3RzLmdlb20udXRpbC5HZW9tZXRyeUNvbWJpbmVyLnByb3RvdHlwZS5pbnB1dEdlb21zO2pzdHMuZ2VvbS51dGlsLkdlb21ldHJ5Q29tYmluZXIuZXh0cmFjdEZhY3Rvcnk9ZnVuY3Rpb24oZ2VvbXMpe2lmKGdlb21zLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDtyZXR1cm4gZ2VvbXMuaXRlcmF0b3IoKS5uZXh0KCkuZ2V0RmFjdG9yeSgpO307anN0cy5nZW9tLnV0aWwuR2VvbWV0cnlDb21iaW5lci5wcm90b3R5cGUuY29tYmluZT1mdW5jdGlvbigpe3ZhciBlbGVtcz1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpLGk7Zm9yKGk9dGhpcy5pbnB1dEdlb21zLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZz1pLm5leHQoKTt0aGlzLmV4dHJhY3RFbGVtZW50cyhnLGVsZW1zKTt9XG5pZihlbGVtcy5zaXplKCk9PT0wKXtpZih0aGlzLmdlb21GYWN0b3J5IT09bnVsbCl7cmV0dXJuIHRoaXMuZ2VvbUZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKG51bGwpO31cbnJldHVybiBudWxsO31cbnJldHVybiB0aGlzLmdlb21GYWN0b3J5LmJ1aWxkR2VvbWV0cnkoZWxlbXMpO307anN0cy5nZW9tLnV0aWwuR2VvbWV0cnlDb21iaW5lci5wcm90b3R5cGUuZXh0cmFjdEVsZW1lbnRzPWZ1bmN0aW9uKGdlb20sZWxlbXMpe2lmKGdlb209PT1udWxsKXtyZXR1cm47fVxuZm9yKHZhciBpPTA7aTxnZW9tLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciBlbGVtR2VvbT1nZW9tLmdldEdlb21ldHJ5TihpKTtpZih0aGlzLnNraXBFbXB0eSYmZWxlbUdlb20uaXNFbXB0eSgpKXtjb250aW51ZTt9XG5lbGVtcy5hZGQoZWxlbUdlb20pO319O2pzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbD1mdW5jdGlvbihtb2RlbFR5cGUpe2lmKHR5cGVvZiBtb2RlbFR5cGU9PT0nbnVtYmVyJyl7dGhpcy5tb2RlbFR5cGU9anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLkZJWEVEO3RoaXMuc2NhbGU9bW9kZWxUeXBlO3JldHVybjt9XG50aGlzLm1vZGVsVHlwZT1tb2RlbFR5cGV8fGpzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbC5GTE9BVElORztpZih0aGlzLm1vZGVsVHlwZT09PWpzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbC5GSVhFRCl7dGhpcy5zY2FsZT0xLjA7fX07anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLkZMT0FUSU5HPSdGTE9BVElORyc7anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLkZJWEVEPSdGSVhFRCc7anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLkZMT0FUSU5HX1NJTkdMRT0nRkxPQVRJTkdfU0lOR0xFJztqc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwucHJvdG90eXBlLnNjYWxlPW51bGw7anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLnByb3RvdHlwZS5tb2RlbFR5cGU9bnVsbDtqc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwucHJvdG90eXBlLmlzRmxvYXRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbFR5cGU9PT1qc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwuRkxPQVRJTkd8fHRoaXMubW9kZWxUeXBlPT09anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLkZMT0FUSU5HX1NJTkxHRTt9O2pzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbC5wcm90b3R5cGUuZ2V0U2NhbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY2FsZTt9O2pzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbC5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsVHlwZTt9O2pzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKG90aGVyKXtyZXR1cm4gdHJ1ZTtpZighKG90aGVyIGluc3RhbmNlb2YganN0cy5nZW9tLlByZWNpc2lvbk1vZGVsKSl7cmV0dXJuIGZhbHNlO31cbnZhciBvdGhlclByZWNpc2lvbk1vZGVsPW90aGVyO3JldHVybiB0aGlzLm1vZGVsVHlwZT09PW90aGVyUHJlY2lzaW9uTW9kZWwubW9kZWxUeXBlJiZ0aGlzLnNjYWxlPT09b3RoZXJQcmVjaXNpb25Nb2RlbC5zY2FsZTt9O2pzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbC5wcm90b3R5cGUubWFrZVByZWNpc2U9ZnVuY3Rpb24odmFsKXtpZih2YWwgaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7dGhpcy5tYWtlUHJlY2lzZTIodmFsKTtyZXR1cm47fVxuaWYoaXNOYU4odmFsKSlcbnJldHVybiB2YWw7aWYodGhpcy5tb2RlbFR5cGU9PT1qc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwuRklYRUQpe3JldHVybiBNYXRoLnJvdW5kKHZhbCp0aGlzLnNjYWxlKS90aGlzLnNjYWxlO31cbnJldHVybiB2YWw7fTtqc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwucHJvdG90eXBlLm1ha2VQcmVjaXNlMj1mdW5jdGlvbihjb29yZCl7aWYodGhpcy5tb2RlbFR5cGU9PT1qc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwuRkxPQVRJTkcpXG5yZXR1cm47Y29vcmQueD10aGlzLm1ha2VQcmVjaXNlKGNvb3JkLngpO2Nvb3JkLnk9dGhpcy5tYWtlUHJlY2lzZShjb29yZC55KTt9O2pzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKG8pe3ZhciBvdGhlcj1vO3JldHVybiAwO307anN0cy5nZW9tLkNvb3JkaW5hdGVGaWx0ZXI9ZnVuY3Rpb24oKXt9O2pzdHMuZ2VvbS5Db29yZGluYXRlRmlsdGVyLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oY29vcmQpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLnNpbXBsaWZ5LkRvdWdsYXNQZXVja2VyTGluZVNpbXBsaWZpZXI9ZnVuY3Rpb24ocHRzKXt0aGlzLnB0cz1wdHM7dGhpcy5zZWc9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCgpO307anN0cy5zaW1wbGlmeS5Eb3VnbGFzUGV1Y2tlckxpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5wdHM9bnVsbDtqc3RzLnNpbXBsaWZ5LkRvdWdsYXNQZXVja2VyTGluZVNpbXBsaWZpZXIucHJvdG90eXBlLnVzZVB0PW51bGw7anN0cy5zaW1wbGlmeS5Eb3VnbGFzUGV1Y2tlckxpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5kaXN0YW5jZVRvbGVyYW5jZT1udWxsO2pzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJMaW5lU2ltcGxpZmllci5zaW1wbGlmeT1mdW5jdGlvbihwdHMsZGlzdGFuY2VUb2xlcmFuY2Upe3ZhciBzaW1wPW5ldyBqc3RzLnNpbXBsaWZ5LkRvdWdsYXNQZXVja2VyTGluZVNpbXBsaWZpZXIocHRzKTtzaW1wLnNldERpc3RhbmNlVG9sZXJhbmNlKGRpc3RhbmNlVG9sZXJhbmNlKTtyZXR1cm4gc2ltcC5zaW1wbGlmeSgpO307anN0cy5zaW1wbGlmeS5Eb3VnbGFzUGV1Y2tlckxpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5zZXREaXN0YW5jZVRvbGVyYW5jZT1mdW5jdGlvbihkaXN0YW5jZVRvbGVyYW5jZSl7dGhpcy5kaXN0YW5jZVRvbGVyYW5jZT1kaXN0YW5jZVRvbGVyYW5jZTt9O2pzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJMaW5lU2ltcGxpZmllci5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXt0aGlzLnVzZVB0PVtdO2Zvcih2YXIgaT0wO2k8dGhpcy5wdHMubGVuZ3RoO2krKyl7dGhpcy51c2VQdFtpXT10cnVlO31cbnRoaXMuc2ltcGxpZnlTZWN0aW9uKDAsdGhpcy5wdHMubGVuZ3RoLTEpO3ZhciBjb29yZExpc3Q9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlTGlzdCgpO2Zvcih2YXIgaj0wO2o8dGhpcy5wdHMubGVuZ3RoO2orKyl7aWYodGhpcy51c2VQdFtqXSl7Y29vcmRMaXN0LmFkZChuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUodGhpcy5wdHNbal0pKTt9fVxucmV0dXJuIGNvb3JkTGlzdC50b0Nvb3JkaW5hdGVBcnJheSgpO307anN0cy5zaW1wbGlmeS5Eb3VnbGFzUGV1Y2tlckxpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5zZWc9bnVsbDtqc3RzLnNpbXBsaWZ5LkRvdWdsYXNQZXVja2VyTGluZVNpbXBsaWZpZXIucHJvdG90eXBlLnNpbXBsaWZ5U2VjdGlvbj1mdW5jdGlvbihpLGope2lmKGkrMT09ail7cmV0dXJuO31cbnRoaXMuc2VnLnAwPXRoaXMucHRzW2ldO3RoaXMuc2VnLnAxPXRoaXMucHRzW2pdO3ZhciBtYXhEaXN0YW5jZT0tMS4wO3ZhciBtYXhJbmRleD1pO2Zvcih2YXIgaz1pKzE7azxqO2srKyl7dmFyIGRpc3RhbmNlPXRoaXMuc2VnLmRpc3RhbmNlKHRoaXMucHRzW2tdKTtpZihkaXN0YW5jZT5tYXhEaXN0YW5jZSl7bWF4RGlzdGFuY2U9ZGlzdGFuY2U7bWF4SW5kZXg9azt9fVxuaWYobWF4RGlzdGFuY2U8PXRoaXMuZGlzdGFuY2VUb2xlcmFuY2Upe2Zvcih2YXIgbD1pKzE7bDxqO2wrKyl7dGhpcy51c2VQdFtsXT1mYWxzZTt9fWVsc2V7dGhpcy5zaW1wbGlmeVNlY3Rpb24oaSxtYXhJbmRleCk7dGhpcy5zaW1wbGlmeVNlY3Rpb24obWF4SW5kZXgsaik7fX07anN0cy5nZW9tZ3JhcGguRWRnZUludGVyc2VjdGlvbj1mdW5jdGlvbihjb29yZCxzZWdtZW50SW5kZXgsZGlzdCl7dGhpcy5jb29yZD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoY29vcmQpO3RoaXMuc2VnbWVudEluZGV4PXNlZ21lbnRJbmRleDt0aGlzLmRpc3Q9ZGlzdDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb24ucHJvdG90eXBlLmNvb3JkPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZUludGVyc2VjdGlvbi5wcm90b3R5cGUuc2VnbWVudEluZGV4PW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZUludGVyc2VjdGlvbi5wcm90b3R5cGUuZGlzdD1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb24ucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb24ucHJvdG90eXBlLmdldFNlZ21lbnRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ21lbnRJbmRleDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb24ucHJvdG90eXBlLmdldERpc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzdDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb24ucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbihvdGhlcil7cmV0dXJuIHRoaXMuY29tcGFyZShvdGhlci5zZWdtZW50SW5kZXgsb3RoZXIuZGlzdCk7fTtqc3RzLmdlb21ncmFwaC5FZGdlSW50ZXJzZWN0aW9uLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHNlZ21lbnRJbmRleCxkaXN0KXtpZih0aGlzLnNlZ21lbnRJbmRleDxzZWdtZW50SW5kZXgpXG5yZXR1cm4tMTtpZih0aGlzLnNlZ21lbnRJbmRleD5zZWdtZW50SW5kZXgpXG5yZXR1cm4gMTtpZih0aGlzLmRpc3Q8ZGlzdClcbnJldHVybi0xO2lmKHRoaXMuZGlzdD5kaXN0KVxucmV0dXJuIDE7cmV0dXJuIDA7fTtqc3RzLmdlb21ncmFwaC5FZGdlSW50ZXJzZWN0aW9uLnByb3RvdHlwZS5pc0VuZFBvaW50PWZ1bmN0aW9uKG1heFNlZ21lbnRJbmRleCl7aWYodGhpcy5zZWdtZW50SW5kZXg9PT0wJiZ0aGlzLmRpc3Q9PT0wLjApXG5yZXR1cm4gdHJ1ZTtpZih0aGlzLnNlZ21lbnRJbmRleD09PW1heFNlZ21lbnRJbmRleClcbnJldHVybiB0cnVlO3JldHVybiBmYWxzZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuJycrdGhpcy5zZWdtZW50SW5kZXgrdGhpcy5kaXN0O307KGZ1bmN0aW9uKCl7dmFyIEVkZ2VJbnRlcnNlY3Rpb249anN0cy5nZW9tZ3JhcGguRWRnZUludGVyc2VjdGlvbjt2YXIgVHJlZU1hcD1qYXZhc2NyaXB0LnV0aWwuVHJlZU1hcDtqc3RzLmdlb21ncmFwaC5FZGdlSW50ZXJzZWN0aW9uTGlzdD1mdW5jdGlvbihlZGdlKXt0aGlzLm5vZGVNYXA9bmV3IFRyZWVNYXAoKTt0aGlzLmVkZ2U9ZWRnZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb25MaXN0LnByb3RvdHlwZS5ub2RlTWFwPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZUludGVyc2VjdGlvbkxpc3QucHJvdG90eXBlLmVkZ2U9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlSW50ZXJzZWN0aW9uTGlzdC5wcm90b3R5cGUuaXNJbnRlcnNlY3Rpb249ZnVuY3Rpb24ocHQpe2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlaT1pdC5uZXh0KCk7aWYoZWkuY29vcmQuZXF1YWxzKHB0KSl7cmV0dXJuIHRydWU7fX1cbnJldHVybiBmYWxzZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb25MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oaW50UHQsc2VnbWVudEluZGV4LGRpc3Qpe3ZhciBlaU5ldz1uZXcgRWRnZUludGVyc2VjdGlvbihpbnRQdCxzZWdtZW50SW5kZXgsZGlzdCk7dmFyIGVpPXRoaXMubm9kZU1hcC5nZXQoZWlOZXcpO2lmKGVpIT09bnVsbCl7cmV0dXJuIGVpO31cbnRoaXMubm9kZU1hcC5wdXQoZWlOZXcsZWlOZXcpO3JldHVybiBlaU5ldzt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb25MaXN0LnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb25MaXN0LnByb3RvdHlwZS5hZGRFbmRwb2ludHM9ZnVuY3Rpb24oKXt2YXIgbWF4U2VnSW5kZXg9dGhpcy5lZGdlLnB0cy5sZW5ndGgtMTt0aGlzLmFkZCh0aGlzLmVkZ2UucHRzWzBdLDAsMC4wKTt0aGlzLmFkZCh0aGlzLmVkZ2UucHRzW21heFNlZ0luZGV4XSxtYXhTZWdJbmRleCwwLjApO307anN0cy5nZW9tZ3JhcGguRWRnZUludGVyc2VjdGlvbkxpc3QucHJvdG90eXBlLmFkZFNwbGl0RWRnZXM9ZnVuY3Rpb24oZWRnZUxpc3QpXG57dGhpcy5hZGRFbmRwb2ludHMoKTt2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO3ZhciBlaVByZXY9aXQubmV4dCgpO3doaWxlKGl0Lmhhc05leHQoKSl7dmFyIGVpPWl0Lm5leHQoKTt2YXIgbmV3RWRnZT10aGlzLmNyZWF0ZVNwbGl0RWRnZShlaVByZXYsZWkpO2VkZ2VMaXN0LmFkZChuZXdFZGdlKTtlaVByZXY9ZWk7fX07anN0cy5nZW9tZ3JhcGguRWRnZUludGVyc2VjdGlvbkxpc3QucHJvdG90eXBlLmNyZWF0ZVNwbGl0RWRnZT1mdW5jdGlvbihlaTAsZWkxKXt2YXIgbnB0cz1laTEuc2VnbWVudEluZGV4LWVpMC5zZWdtZW50SW5kZXgrMjt2YXIgbGFzdFNlZ1N0YXJ0UHQ9dGhpcy5lZGdlLnB0c1tlaTEuc2VnbWVudEluZGV4XTt2YXIgdXNlSW50UHQxPWVpMS5kaXN0PjAuMHx8IWVpMS5jb29yZC5lcXVhbHMyRChsYXN0U2VnU3RhcnRQdCk7aWYoIXVzZUludFB0MSl7bnB0cy0tO31cbnZhciBwdHM9W107dmFyIGlwdD0wO3B0c1tpcHQrK109bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGVpMC5jb29yZCk7Zm9yKHZhciBpPWVpMC5zZWdtZW50SW5kZXgrMTtpPD1laTEuc2VnbWVudEluZGV4O2krKyl7cHRzW2lwdCsrXT10aGlzLmVkZ2UucHRzW2ldO31cbmlmKHVzZUludFB0MSlwdHNbaXB0XT1laTEuY29vcmQ7cmV0dXJuIG5ldyBqc3RzLmdlb21ncmFwaC5FZGdlKHB0cyxuZXcganN0cy5nZW9tZ3JhcGguTGFiZWwodGhpcy5lZGdlLmxhYmVsKSk7fTt9KSgpOyhmdW5jdGlvbigpe3ZhciBBc3NlcnRpb25GYWlsZWRFeGNlcHRpb249ZnVuY3Rpb24obWVzc2FnZSl7dGhpcy5tZXNzYWdlPW1lc3NhZ2U7fTtBc3NlcnRpb25GYWlsZWRFeGNlcHRpb24ucHJvdG90eXBlPW5ldyBFcnJvcigpO0Fzc2VydGlvbkZhaWxlZEV4Y2VwdGlvbi5wcm90b3R5cGUubmFtZT0nQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uJztqc3RzLnV0aWwuQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uPUFzc2VydGlvbkZhaWxlZEV4Y2VwdGlvbjt9KSgpOyhmdW5jdGlvbigpe3ZhciBBc3NlcnRpb25GYWlsZWRFeGNlcHRpb249anN0cy51dGlsLkFzc2VydGlvbkZhaWxlZEV4Y2VwdGlvbjtqc3RzLnV0aWwuQXNzZXJ0PWZ1bmN0aW9uKCl7fTtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZT1mdW5jdGlvbihhc3NlcnRpb24sbWVzc2FnZSl7aWYoIWFzc2VydGlvbil7aWYobWVzc2FnZT09PW51bGwpe3Rocm93IG5ldyBBc3NlcnRpb25GYWlsZWRFeGNlcHRpb24oKTt9ZWxzZXt0aHJvdyBuZXcgQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uKG1lc3NhZ2UpO319fTtqc3RzLnV0aWwuQXNzZXJ0LmVxdWFscz1mdW5jdGlvbihleHBlY3RlZFZhbHVlLGFjdHVhbFZhbHVlLG1lc3NhZ2Upe2lmKCFhY3R1YWxWYWx1ZS5lcXVhbHMoZXhwZWN0ZWRWYWx1ZSkpe3Rocm93IG5ldyBBc3NlcnRpb25GYWlsZWRFeGNlcHRpb24oJ0V4cGVjdGVkICcrZXhwZWN0ZWRWYWx1ZSsnIGJ1dCBlbmNvdW50ZXJlZCAnK2FjdHVhbFZhbHVlK1xuKG1lc3NhZ2UhPW51bGw/JzogJyttZXNzYWdlOicnKSk7fX07anN0cy51dGlsLkFzc2VydC5zaG91bGROZXZlclJlYWNoSGVyZT1mdW5jdGlvbihtZXNzYWdlKXt0aHJvdyBuZXcgQXNzZXJ0aW9uRmFpbGVkRXhjZXB0aW9uKCdTaG91bGQgbmV2ZXIgcmVhY2ggaGVyZScrXG4obWVzc2FnZSE9bnVsbD8nOiAnK21lc3NhZ2U6JycpKTt9O30pKCk7KGZ1bmN0aW9uKCl7dmFyIExvY2F0aW9uPWpzdHMuZ2VvbS5Mb2NhdGlvbjt2YXIgQXNzZXJ0PWpzdHMudXRpbC5Bc3NlcnQ7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlcj1mdW5jdGlvbihhcmcpe3RoaXMubGk9bmV3IGpzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3RvcigpO3RoaXMucHRMb2NhdG9yPW5ldyBqc3RzLmFsZ29yaXRobS5Qb2ludExvY2F0b3IoKTt0aGlzLm5vZGVzPW5ldyBqc3RzLmdlb21ncmFwaC5Ob2RlTWFwKG5ldyBqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlTm9kZUZhY3RvcnkoKSk7dGhpcy5pc29sYXRlZEVkZ2VzPW5ldyBBcnJheUxpc3QoKTt0aGlzLmFyZz1hcmc7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmxpPW51bGw7anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZUNvbXB1dGVyLnByb3RvdHlwZS5wdExvY2F0b3I9bnVsbDtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmFyZz1udWxsO2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlci5wcm90b3R5cGUubm9kZXM9bnVsbDtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmltPW51bGw7anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZUNvbXB1dGVyLnByb3RvdHlwZS5pc29sYXRlZEVkZ2VzPW51bGw7anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZUNvbXB1dGVyLnByb3RvdHlwZS5pbnZhbGlkUG9pbnQ9bnVsbDtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmNvbXB1dGVJTT1mdW5jdGlvbigpe3ZhciBpbT1uZXcganN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeCgpO2ltLnNldChMb2NhdGlvbi5FWFRFUklPUixMb2NhdGlvbi5FWFRFUklPUiwyKTtpZighdGhpcy5hcmdbMF0uZ2V0R2VvbWV0cnkoKS5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyh0aGlzLmFyZ1sxXS5nZXRHZW9tZXRyeSgpLmdldEVudmVsb3BlSW50ZXJuYWwoKSkpe3RoaXMuY29tcHV0ZURpc2pvaW50SU0oaW0pO3JldHVybiBpbTt9XG50aGlzLmFyZ1swXS5jb21wdXRlU2VsZk5vZGVzKHRoaXMubGksZmFsc2UpO3RoaXMuYXJnWzFdLmNvbXB1dGVTZWxmTm9kZXModGhpcy5saSxmYWxzZSk7dmFyIGludGVyc2VjdG9yPXRoaXMuYXJnWzBdLmNvbXB1dGVFZGdlSW50ZXJzZWN0aW9ucyh0aGlzLmFyZ1sxXSx0aGlzLmxpLGZhbHNlKTt0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25Ob2RlcygwKTt0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25Ob2RlcygxKTt0aGlzLmNvcHlOb2Rlc0FuZExhYmVscygwKTt0aGlzLmNvcHlOb2Rlc0FuZExhYmVscygxKTt0aGlzLmxhYmVsSXNvbGF0ZWROb2RlcygpO3RoaXMuY29tcHV0ZVByb3BlckludGVyc2VjdGlvbklNKGludGVyc2VjdG9yLGltKTt2YXIgZWVCdWlsZGVyPW5ldyBqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1aWxkZXIoKTt2YXIgZWUwPWVlQnVpbGRlci5jb21wdXRlRWRnZUVuZHModGhpcy5hcmdbMF0uZ2V0RWRnZUl0ZXJhdG9yKCkpO3RoaXMuaW5zZXJ0RWRnZUVuZHMoZWUwKTt2YXIgZWUxPWVlQnVpbGRlci5jb21wdXRlRWRnZUVuZHModGhpcy5hcmdbMV0uZ2V0RWRnZUl0ZXJhdG9yKCkpO3RoaXMuaW5zZXJ0RWRnZUVuZHMoZWUxKTt0aGlzLmxhYmVsTm9kZUVkZ2VzKCk7dGhpcy5sYWJlbElzb2xhdGVkRWRnZXMoMCwxKTt0aGlzLmxhYmVsSXNvbGF0ZWRFZGdlcygxLDApO3RoaXMudXBkYXRlSU0oaW0pO3JldHVybiBpbTt9O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlci5wcm90b3R5cGUuaW5zZXJ0RWRnZUVuZHM9ZnVuY3Rpb24oZWUpe2Zvcih2YXIgaT1lZS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGU9aS5uZXh0KCk7dGhpcy5ub2Rlcy5hZGQoZSk7fX07anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZUNvbXB1dGVyLnByb3RvdHlwZS5jb21wdXRlUHJvcGVySW50ZXJzZWN0aW9uSU09ZnVuY3Rpb24oaW50ZXJzZWN0b3IsaW0pe3ZhciBkaW1BPXRoaXMuYXJnWzBdLmdldEdlb21ldHJ5KCkuZ2V0RGltZW5zaW9uKCk7dmFyIGRpbUI9dGhpcy5hcmdbMV0uZ2V0R2VvbWV0cnkoKS5nZXREaW1lbnNpb24oKTt2YXIgaGFzUHJvcGVyPWludGVyc2VjdG9yLmhhc1Byb3BlckludGVyc2VjdGlvbigpO3ZhciBoYXNQcm9wZXJJbnRlcmlvcj1pbnRlcnNlY3Rvci5oYXNQcm9wZXJJbnRlcmlvckludGVyc2VjdGlvbigpO2lmKGRpbUE9PT0yJiZkaW1CPT09Mil7aWYoaGFzUHJvcGVyKVxuaW0uc2V0QXRMZWFzdCgnMjEyMTAxMjEyJyk7fVxuZWxzZSBpZihkaW1BPT09MiYmZGltQj09PTEpe2lmKGhhc1Byb3BlcilcbmltLnNldEF0TGVhc3QoJ0ZGRjBGRkZGMicpO2lmKGhhc1Byb3BlckludGVyaW9yKVxuaW0uc2V0QXRMZWFzdCgnMUZGRkZGMUZGJyk7fWVsc2UgaWYoZGltQT09PTEmJmRpbUI9PT0yKXtpZihoYXNQcm9wZXIpXG5pbS5zZXRBdExlYXN0KCdGMEZGRkZGRjInKTtpZihoYXNQcm9wZXJJbnRlcmlvcilcbmltLnNldEF0TGVhc3QoJzFGMUZGRkZGRicpO31cbmVsc2UgaWYoZGltQT09PTEmJmRpbUI9PT0xKXtpZihoYXNQcm9wZXJJbnRlcmlvcilcbmltLnNldEF0TGVhc3QoJzBGRkZGRkZGRicpO319O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlci5wcm90b3R5cGUuY29weU5vZGVzQW5kTGFiZWxzPWZ1bmN0aW9uKGFyZ0luZGV4KXtmb3IodmFyIGk9dGhpcy5hcmdbYXJnSW5kZXhdLmdldE5vZGVJdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGdyYXBoTm9kZT1pLm5leHQoKTt2YXIgbmV3Tm9kZT10aGlzLm5vZGVzLmFkZE5vZGUoZ3JhcGhOb2RlLmdldENvb3JkaW5hdGUoKSk7bmV3Tm9kZS5zZXRMYWJlbChhcmdJbmRleCxncmFwaE5vZGUuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbihhcmdJbmRleCkpO319O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbk5vZGVzPWZ1bmN0aW9uKGFyZ0luZGV4KXtmb3IodmFyIGk9dGhpcy5hcmdbYXJnSW5kZXhdLmdldEVkZ2VJdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGU9aS5uZXh0KCk7dmFyIGVMb2M9ZS5nZXRMYWJlbCgpLmdldExvY2F0aW9uKGFyZ0luZGV4KTtmb3IodmFyIGVpSXQ9ZS5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdCgpLml0ZXJhdG9yKCk7ZWlJdC5oYXNOZXh0KCk7KXt2YXIgZWk9ZWlJdC5uZXh0KCk7dmFyIG49dGhpcy5ub2Rlcy5hZGROb2RlKGVpLmNvb3JkKTtpZihlTG9jPT09TG9jYXRpb24uQk9VTkRBUlkpXG5uLnNldExhYmVsQm91bmRhcnkoYXJnSW5kZXgpO2Vsc2V7aWYobi5nZXRMYWJlbCgpLmlzTnVsbChhcmdJbmRleCkpXG5uLnNldExhYmVsKGFyZ0luZGV4LExvY2F0aW9uLklOVEVSSU9SKTt9fX19O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlci5wcm90b3R5cGUubGFiZWxJbnRlcnNlY3Rpb25Ob2Rlcz1mdW5jdGlvbihhcmdJbmRleCl7Zm9yKHZhciBpPXRoaXMuYXJnW2FyZ0luZGV4XS5nZXRFZGdlSXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlPWkubmV4dCgpO3ZhciBlTG9jPWUuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbihhcmdJbmRleCk7Zm9yKHZhciBlaUl0PWUuZ2V0RWRnZUludGVyc2VjdGlvbkxpc3QoKS5pdGVyYXRvcigpO2VpSXQuaGFzTmV4dCgpOyl7dmFyIGVpPWVpSXQubmV4dCgpO3ZhciBuPXRoaXMubm9kZXMuZmluZChlaS5jb29yZCk7aWYobi5nZXRMYWJlbCgpLmlzTnVsbChhcmdJbmRleCkpe2lmKGVMb2M9PT1Mb2NhdGlvbi5CT1VOREFSWSlcbm4uc2V0TGFiZWxCb3VuZGFyeShhcmdJbmRleCk7ZWxzZVxubi5zZXRMYWJlbChhcmdJbmRleCxMb2NhdGlvbi5JTlRFUklPUik7fX19fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmNvbXB1dGVEaXNqb2ludElNPWZ1bmN0aW9uKGltKXt2YXIgZ2E9dGhpcy5hcmdbMF0uZ2V0R2VvbWV0cnkoKTtpZighZ2EuaXNFbXB0eSgpKXtpbS5zZXQoTG9jYXRpb24uSU5URVJJT1IsTG9jYXRpb24uRVhURVJJT1IsZ2EuZ2V0RGltZW5zaW9uKCkpO2ltLnNldChMb2NhdGlvbi5CT1VOREFSWSxMb2NhdGlvbi5FWFRFUklPUixnYS5nZXRCb3VuZGFyeURpbWVuc2lvbigpKTt9XG52YXIgZ2I9dGhpcy5hcmdbMV0uZ2V0R2VvbWV0cnkoKTtpZighZ2IuaXNFbXB0eSgpKXtpbS5zZXQoTG9jYXRpb24uRVhURVJJT1IsTG9jYXRpb24uSU5URVJJT1IsZ2IuZ2V0RGltZW5zaW9uKCkpO2ltLnNldChMb2NhdGlvbi5FWFRFUklPUixMb2NhdGlvbi5CT1VOREFSWSxnYi5nZXRCb3VuZGFyeURpbWVuc2lvbigpKTt9fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmxhYmVsTm9kZUVkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciBuaT10aGlzLm5vZGVzLml0ZXJhdG9yKCk7bmkuaGFzTmV4dCgpOyl7dmFyIG5vZGU9bmkubmV4dCgpO25vZGUuZ2V0RWRnZXMoKS5jb21wdXRlTGFiZWxsaW5nKHRoaXMuYXJnKTt9fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLnVwZGF0ZUlNPWZ1bmN0aW9uKGltKXtmb3IodmFyIGVpPXRoaXMuaXNvbGF0ZWRFZGdlcy5pdGVyYXRvcigpO2VpLmhhc05leHQoKTspe3ZhciBlPWVpLm5leHQoKTtlLnVwZGF0ZUlNKGltKTt9XG5mb3IodmFyIG5pPXRoaXMubm9kZXMuaXRlcmF0b3IoKTtuaS5oYXNOZXh0KCk7KXt2YXIgbm9kZT1uaS5uZXh0KCk7bm9kZS51cGRhdGVJTShpbSk7bm9kZS51cGRhdGVJTUZyb21FZGdlcyhpbSk7fX07anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZUNvbXB1dGVyLnByb3RvdHlwZS5sYWJlbElzb2xhdGVkRWRnZXM9ZnVuY3Rpb24odGhpc0luZGV4LHRhcmdldEluZGV4KXtmb3IodmFyIGVpPXRoaXMuYXJnW3RoaXNJbmRleF0uZ2V0RWRnZUl0ZXJhdG9yKCk7ZWkuaGFzTmV4dCgpOyl7dmFyIGU9ZWkubmV4dCgpO2lmKGUuaXNJc29sYXRlZCgpKXt0aGlzLmxhYmVsSXNvbGF0ZWRFZGdlKGUsdGFyZ2V0SW5kZXgsdGhpcy5hcmdbdGFyZ2V0SW5kZXhdLmdldEdlb21ldHJ5KCkpO3RoaXMuaXNvbGF0ZWRFZGdlcy5hZGQoZSk7fX19O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlci5wcm90b3R5cGUubGFiZWxJc29sYXRlZEVkZ2U9ZnVuY3Rpb24oZSx0YXJnZXRJbmRleCx0YXJnZXQpe2lmKHRhcmdldC5nZXREaW1lbnNpb24oKT4wKXt2YXIgbG9jPXRoaXMucHRMb2NhdG9yLmxvY2F0ZShlLmdldENvb3JkaW5hdGUoKSx0YXJnZXQpO2UuZ2V0TGFiZWwoKS5zZXRBbGxMb2NhdGlvbnModGFyZ2V0SW5kZXgsbG9jKTt9ZWxzZXtlLmdldExhYmVsKCkuc2V0QWxsTG9jYXRpb25zKHRhcmdldEluZGV4LExvY2F0aW9uLkVYVEVSSU9SKTt9fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmxhYmVsSXNvbGF0ZWROb2Rlcz1mdW5jdGlvbigpe2Zvcih2YXIgbmk9dGhpcy5ub2Rlcy5pdGVyYXRvcigpO25pLmhhc05leHQoKTspe3ZhciBuPW5pLm5leHQoKTt2YXIgbGFiZWw9bi5nZXRMYWJlbCgpO0Fzc2VydC5pc1RydWUobGFiZWwuZ2V0R2VvbWV0cnlDb3VudCgpPjAsJ25vZGUgd2l0aCBlbXB0eSBsYWJlbCBmb3VuZCcpO2lmKG4uaXNJc29sYXRlZCgpKXtpZihsYWJlbC5pc051bGwoMCkpXG50aGlzLmxhYmVsSXNvbGF0ZWROb2RlKG4sMCk7ZWxzZVxudGhpcy5sYWJlbElzb2xhdGVkTm9kZShuLDEpO319fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlQ29tcHV0ZXIucHJvdG90eXBlLmxhYmVsSXNvbGF0ZWROb2RlPWZ1bmN0aW9uKG4sdGFyZ2V0SW5kZXgpe3ZhciBsb2M9dGhpcy5wdExvY2F0b3IubG9jYXRlKG4uZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuYXJnW3RhcmdldEluZGV4XS5nZXRHZW9tZXRyeSgpKTtuLmdldExhYmVsKCkuc2V0QWxsTG9jYXRpb25zKHRhcmdldEluZGV4LGxvYyk7fTt9KSgpOyhmdW5jdGlvbigpe3ZhciBBc3NlcnQ9anN0cy51dGlsLkFzc2VydDtqc3RzLmdlb21ncmFwaC5HcmFwaENvbXBvbmVudD1mdW5jdGlvbihsYWJlbCl7dGhpcy5sYWJlbD1sYWJlbDt9O2pzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5sYWJlbD1udWxsO2pzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5faXNJblJlc3VsdD1mYWxzZTtqc3RzLmdlb21ncmFwaC5HcmFwaENvbXBvbmVudC5wcm90b3R5cGUuX2lzQ292ZXJlZD1mYWxzZTtqc3RzLmdlb21ncmFwaC5HcmFwaENvbXBvbmVudC5wcm90b3R5cGUuX2lzQ292ZXJlZFNldD1mYWxzZTtqc3RzLmdlb21ncmFwaC5HcmFwaENvbXBvbmVudC5wcm90b3R5cGUuX2lzVmlzaXRlZD1mYWxzZTtqc3RzLmdlb21ncmFwaC5HcmFwaENvbXBvbmVudC5wcm90b3R5cGUuZ2V0TGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbDt9O2pzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5zZXRMYWJlbD1mdW5jdGlvbihsYWJlbCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMuc2V0TGFiZWwyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudGhpcy5sYWJlbD1sYWJlbDt9O2pzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5zZXRJblJlc3VsdD1mdW5jdGlvbihpc0luUmVzdWx0KXt0aGlzLl9pc0luUmVzdWx0PWlzSW5SZXN1bHQ7fTtqc3RzLmdlb21ncmFwaC5HcmFwaENvbXBvbmVudC5wcm90b3R5cGUuaXNJblJlc3VsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luUmVzdWx0O307anN0cy5nZW9tZ3JhcGguR3JhcGhDb21wb25lbnQucHJvdG90eXBlLnNldENvdmVyZWQ9ZnVuY3Rpb24oaXNDb3ZlcmVkKXt0aGlzLl9pc0NvdmVyZWQ9aXNDb3ZlcmVkO3RoaXMuX2lzQ292ZXJlZFNldD10cnVlO307anN0cy5nZW9tZ3JhcGguR3JhcGhDb21wb25lbnQucHJvdG90eXBlLmlzQ292ZXJlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NvdmVyZWQ7fTtqc3RzLmdlb21ncmFwaC5HcmFwaENvbXBvbmVudC5wcm90b3R5cGUuaXNDb3ZlcmVkU2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQ292ZXJlZFNldDt9O2pzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5pc1Zpc2l0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWaXNpdGVkO307anN0cy5nZW9tZ3JhcGguR3JhcGhDb21wb25lbnQucHJvdG90eXBlLnNldFZpc2l0ZWQ9ZnVuY3Rpb24oaXNWaXNpdGVkKXt0aGlzLl9pc1Zpc2l0ZWQ9aXNWaXNpdGVkO307anN0cy5nZW9tZ3JhcGguR3JhcGhDb21wb25lbnQucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tZ3JhcGguR3JhcGhDb21wb25lbnQucHJvdG90eXBlLmNvbXB1dGVJTT1mdW5jdGlvbihpbSl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5pc0lzb2xhdGVkPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50LnByb3RvdHlwZS51cGRhdGVJTT1mdW5jdGlvbihpbSl7QXNzZXJ0LmlzVHJ1ZSh0aGlzLmxhYmVsLmdldEdlb21ldHJ5Q291bnQoKT49MiwnZm91bmQgcGFydGlhbCBsYWJlbCcpO3RoaXMuY29tcHV0ZUlNKGltKTt9O30pKCk7anN0cy5nZW9tZ3JhcGguTm9kZT1mdW5jdGlvbihjb29yZCxlZGdlcyl7dGhpcy5jb29yZD1jb29yZDt0aGlzLmVkZ2VzPWVkZ2VzO3RoaXMubGFiZWw9bmV3IGpzdHMuZ2VvbWdyYXBoLkxhYmVsKDAsanN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpO307anN0cy5nZW9tZ3JhcGguTm9kZS5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbWdyYXBoLkdyYXBoQ29tcG9uZW50KCk7anN0cy5nZW9tZ3JhcGguTm9kZS5wcm90b3R5cGUuY29vcmQ9bnVsbDtqc3RzLmdlb21ncmFwaC5Ob2RlLnByb3RvdHlwZS5lZGdlcz1udWxsO2pzdHMuZ2VvbWdyYXBoLk5vZGUucHJvdG90eXBlLmlzSXNvbGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5sYWJlbC5nZXRHZW9tZXRyeUNvdW50KCk9PTEpO307anN0cy5nZW9tZ3JhcGguTm9kZS5wcm90b3R5cGUuc2V0TGFiZWwyPWZ1bmN0aW9uKGFyZ0luZGV4LG9uTG9jYXRpb24pe2lmKHRoaXMubGFiZWw9PT1udWxsKXt0aGlzLmxhYmVsPW5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbChhcmdJbmRleCxvbkxvY2F0aW9uKTt9ZWxzZVxudGhpcy5sYWJlbC5zZXRMb2NhdGlvbihhcmdJbmRleCxvbkxvY2F0aW9uKTt9O2pzdHMuZ2VvbWdyYXBoLk5vZGUucHJvdG90eXBlLnNldExhYmVsQm91bmRhcnk9ZnVuY3Rpb24oYXJnSW5kZXgpe3ZhciBsb2M9anN0cy5nZW9tLkxvY2F0aW9uLk5PTkU7aWYodGhpcy5sYWJlbCE9PW51bGwpXG5sb2M9dGhpcy5sYWJlbC5nZXRMb2NhdGlvbihhcmdJbmRleCk7dmFyIG5ld0xvYztzd2l0Y2gobG9jKXtjYXNlIGpzdHMuZ2VvbS5Mb2NhdGlvbi5CT1VOREFSWTpuZXdMb2M9anN0cy5nZW9tLkxvY2F0aW9uLklOVEVSSU9SO2JyZWFrO2Nhc2UganN0cy5nZW9tLkxvY2F0aW9uLklOVEVSSU9SOm5ld0xvYz1qc3RzLmdlb20uTG9jYXRpb24uQk9VTkRBUlk7YnJlYWs7ZGVmYXVsdDpuZXdMb2M9anN0cy5nZW9tLkxvY2F0aW9uLkJPVU5EQVJZO2JyZWFrO31cbnRoaXMubGFiZWwuc2V0TG9jYXRpb24oYXJnSW5kZXgsbmV3TG9jKTt9O2pzdHMuZ2VvbWdyYXBoLk5vZGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLmVkZ2VzLmluc2VydChlKTtlLnNldE5vZGUodGhpcyk7fTtqc3RzLmdlb21ncmFwaC5Ob2RlLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmQ7fTtqc3RzLmdlb21ncmFwaC5Ob2RlLnByb3RvdHlwZS5nZXRFZGdlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzO307anN0cy5nZW9tZ3JhcGguTm9kZS5wcm90b3R5cGUuaXNJbmNpZGVudEVkZ2VJblJlc3VsdD1mdW5jdGlvbigpe2Zvcih2YXIgaXQ9dGhpcy5nZXRFZGdlcygpLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtpdC5oYXNOZXh0KCk7KXt2YXIgZGU9aXQubmV4dCgpO2lmKGRlLmdldEVkZ2UoKS5pc0luUmVzdWx0KCkpXG5yZXR1cm4gdHJ1ZTt9XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmdlb20uUG9pbnQ9ZnVuY3Rpb24oY29vcmRpbmF0ZSxmYWN0b3J5KXt0aGlzLmZhY3Rvcnk9ZmFjdG9yeTtpZihjb29yZGluYXRlPT09dW5kZWZpbmVkKVxucmV0dXJuO3RoaXMuY29vcmRpbmF0ZT1jb29yZGluYXRlO307anN0cy5nZW9tLlBvaW50LnByb3RvdHlwZT1uZXcganN0cy5nZW9tLkdlb21ldHJ5KCk7anN0cy5nZW9tLlBvaW50LmNvbnN0cnVjdG9yPWpzdHMuZ2VvbS5Qb2ludDtqc3RzLmdlb20uUG9pbnQuQ0xBU1NfTkFNRT0nanN0cy5nZW9tLlBvaW50Jztqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmNvb3JkaW5hdGU9bnVsbDtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmdldFg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlLng7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmdldFk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlLnk7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlO307anN0cy5nZW9tLlBvaW50LnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9bXTpbdGhpcy5jb29yZGluYXRlXTt9O2pzdHMuZ2VvbS5Qb2ludC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP1tdOlt0aGlzLmNvb3JkaW5hdGVdO307anN0cy5nZW9tLlBvaW50LnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZT09PW51bGw7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmVxdWFsc0V4YWN0PWZ1bmN0aW9uKG90aGVyLHRvbGVyYW5jZSl7aWYoIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3Mob3RoZXIpKXtyZXR1cm4gZmFsc2U7fVxuaWYodGhpcy5pc0VtcHR5KCkmJm90aGVyLmlzRW1wdHkoKSl7cmV0dXJuIHRydWU7fVxucmV0dXJuIHRoaXMuZXF1YWwob3RoZXIuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLHRvbGVyYW5jZSk7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmdldE51bVBvaW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT8wOjE7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmlzU2ltcGxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRydWU7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKG51bGwpO307anN0cy5nZW9tLlBvaW50LnByb3RvdHlwZS5jb21wdXRlRW52ZWxvcGVJbnRlcm5hbD1mdW5jdGlvbigpe2lmKHRoaXMuaXNFbXB0eSgpKXtyZXR1cm4gbmV3IGpzdHMuZ2VvbS5FbnZlbG9wZSgpO31cbnJldHVybiBuZXcganN0cy5nZW9tLkVudmVsb3BlKHRoaXMuY29vcmRpbmF0ZSk7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGZpbHRlcil7aWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5RmlsdGVyfHxmaWx0ZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb21wb25lbnRGaWx0ZXIpe2ZpbHRlci5maWx0ZXIodGhpcyk7fWVsc2UgaWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGVGaWx0ZXIpe2lmKHRoaXMuaXNFbXB0eSgpKXtyZXR1cm47fVxuZmlsdGVyLmZpbHRlcih0aGlzLmdldENvb3JkaW5hdGUoKSk7fX07anN0cy5nZW9tLlBvaW50LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcganN0cy5nZW9tLlBvaW50KHRoaXMuY29vcmRpbmF0ZS5jbG9uZSgpLHRoaXMuZmFjdG9yeSk7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmdldERpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiAwO307anN0cy5nZW9tLlBvaW50LnByb3RvdHlwZS5nZXRCb3VuZGFyeURpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiBqc3RzLmdlb20uRGltZW5zaW9uLkZBTFNFO307anN0cy5nZW9tLlBvaW50LnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKTt9O2pzdHMuZ2VvbS5Qb2ludC5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbigpe2lmKCFqc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AuaXNWYWxpZCh0aGlzLmdldENvb3JkaW5hdGUoKSkpe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gdHJ1ZTt9O2pzdHMuZ2VvbS5Qb2ludC5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKCl7fTtqc3RzLmdlb20uUG9pbnQucHJvdG90eXBlLmNvbXBhcmVUb1NhbWVDbGFzcz1mdW5jdGlvbihvdGhlcil7dmFyIHBvaW50PW90aGVyO3JldHVybiB0aGlzLmdldENvb3JkaW5hdGUoKS5jb21wYXJlVG8ocG9pbnQuZ2V0Q29vcmRpbmF0ZSgpKTt9O2pzdHMuZ2VvbS5Qb2ludC5wcm90b3R5cGUuZ2V0R2VvbWV0cnlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuJ1BvaW50Jzt9O2pzdHMuZ2VvbS5Qb2ludC5wcm90b3R5cGUuaGFzaENvZGU9ZnVuY3Rpb24oKXtyZXR1cm4nUG9pbnRfJyt0aGlzLmNvb3JkaW5hdGUuaGFzaENvZGUoKTt9O2pzdHMuZ2VvbS5Qb2ludC5wcm90b3R5cGUuQ0xBU1NfTkFNRT0nanN0cy5nZW9tLlBvaW50Jztqc3RzLmdlb20uRGltZW5zaW9uPWZ1bmN0aW9uKCl7fTtqc3RzLmdlb20uRGltZW5zaW9uLlA9MDtqc3RzLmdlb20uRGltZW5zaW9uLkw9MTtqc3RzLmdlb20uRGltZW5zaW9uLkE9Mjtqc3RzLmdlb20uRGltZW5zaW9uLkZBTFNFPS0xO2pzdHMuZ2VvbS5EaW1lbnNpb24uVFJVRT0tMjtqc3RzLmdlb20uRGltZW5zaW9uLkRPTlRDQVJFPS0zO2pzdHMuZ2VvbS5EaW1lbnNpb24udG9EaW1lbnNpb25TeW1ib2w9ZnVuY3Rpb24oZGltZW5zaW9uVmFsdWUpe3N3aXRjaChkaW1lbnNpb25WYWx1ZSl7Y2FzZSBqc3RzLmdlb20uRGltZW5zaW9uLkZBTFNFOnJldHVybidGJztjYXNlIGpzdHMuZ2VvbS5EaW1lbnNpb24uVFJVRTpyZXR1cm4nVCc7Y2FzZSBqc3RzLmdlb20uRGltZW5zaW9uLkRPTlRDQVJFOnJldHVybicqJztjYXNlIGpzdHMuZ2VvbS5EaW1lbnNpb24uUDpyZXR1cm4nMCc7Y2FzZSBqc3RzLmdlb20uRGltZW5zaW9uLkw6cmV0dXJuJzEnO2Nhc2UganN0cy5nZW9tLkRpbWVuc2lvbi5BOnJldHVybicyJzt9XG50aHJvdyBuZXcganN0cy5JbGxlZ2FsQXJndW1lbnRFcnJvcignVW5rbm93biBkaW1lbnNpb24gdmFsdWU6ICcrXG5kaW1lbnNpb25WYWx1ZSk7fTtqc3RzLmdlb20uRGltZW5zaW9uLnRvRGltZW5zaW9uVmFsdWU9ZnVuY3Rpb24oZGltZW5zaW9uU3ltYm9sKXtzd2l0Y2goZGltZW5zaW9uU3ltYm9sLnRvVXBwZXJDYXNlKCkpe2Nhc2UnRic6cmV0dXJuIGpzdHMuZ2VvbS5EaW1lbnNpb24uRkFMU0U7Y2FzZSdUJzpyZXR1cm4ganN0cy5nZW9tLkRpbWVuc2lvbi5UUlVFO2Nhc2UnKic6cmV0dXJuIGpzdHMuZ2VvbS5EaW1lbnNpb24uRE9OVENBUkU7Y2FzZScwJzpyZXR1cm4ganN0cy5nZW9tLkRpbWVuc2lvbi5QO2Nhc2UnMSc6cmV0dXJuIGpzdHMuZ2VvbS5EaW1lbnNpb24uTDtjYXNlJzInOnJldHVybiBqc3RzLmdlb20uRGltZW5zaW9uLkE7fVxudGhyb3cgbmV3IGpzdHMuZXJyb3IuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ1Vua25vd24gZGltZW5zaW9uIHN5bWJvbDogJytcbmRpbWVuc2lvblN5bWJvbCk7fTsoZnVuY3Rpb24oKXt2YXIgRGltZW5zaW9uPWpzdHMuZ2VvbS5EaW1lbnNpb247anN0cy5nZW9tLkxpbmVTdHJpbmc9ZnVuY3Rpb24ocG9pbnRzLGZhY3Rvcnkpe3RoaXMuZmFjdG9yeT1mYWN0b3J5O3RoaXMucG9pbnRzPXBvaW50c3x8W107fTtqc3RzLmdlb20uTGluZVN0cmluZy5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbS5HZW9tZXRyeSgpO2pzdHMuZ2VvbS5MaW5lU3RyaW5nLmNvbnN0cnVjdG9yPWpzdHMuZ2VvbS5MaW5lU3RyaW5nO2pzdHMuZ2VvbS5MaW5lU3RyaW5nLnByb3RvdHlwZS5wb2ludHM9bnVsbDtqc3RzLmdlb20uTGluZVN0cmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb2ludHM7fTtqc3RzLmdlb20uTGluZVN0cmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9pbnRzO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVOPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnBvaW50c1tuXTt9O2pzdHMuZ2VvbS5MaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpe3JldHVybiBudWxsO31cbnJldHVybiB0aGlzLmdldENvb3JkaW5hdGVOKDApO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldERpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiAxO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldEJvdW5kYXJ5RGltZW5zaW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0Nsb3NlZCgpKXtyZXR1cm4gRGltZW5zaW9uLkZBTFNFO31cbnJldHVybiAwO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb2ludHMubGVuZ3RoPT09MDt9O2pzdHMuZ2VvbS5MaW5lU3RyaW5nLnByb3RvdHlwZS5nZXROdW1Qb2ludHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb2ludHMubGVuZ3RoO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldFBvaW50Tj1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQodGhpcy5wb2ludHNbbl0pO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldFN0YXJ0UG9pbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSl7cmV0dXJuIG51bGw7fVxucmV0dXJuIHRoaXMuZ2V0UG9pbnROKDApO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldEVuZFBvaW50PWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpe3JldHVybiBudWxsO31cbnJldHVybiB0aGlzLmdldFBvaW50Tih0aGlzLmdldE51bVBvaW50cygpLTEpO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmlzQ2xvc2VkPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlTigwKS5lcXVhbHMyRCh0aGlzLmdldENvb3JkaW5hdGVOKHRoaXMucG9pbnRzLmxlbmd0aC0xKSk7fTtqc3RzLmdlb20uTGluZVN0cmluZy5wcm90b3R5cGUuaXNSaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNDbG9zZWQoKSYmdGhpcy5pc1NpbXBsZSgpO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldEdlb21ldHJ5VHlwZT1mdW5jdGlvbigpe3JldHVybidMaW5lU3RyaW5nJzt9O2pzdHMuZ2VvbS5MaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmNvbXB1dGVMZW5ndGgodGhpcy5wb2ludHMpO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBqc3RzLm9wZXJhdGlvbi5Cb3VuZGFyeU9wKHRoaXMpKS5nZXRCb3VuZGFyeSgpO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmNvbXB1dGVFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpe3JldHVybiBuZXcganN0cy5nZW9tLkVudmVsb3BlKCk7fVxudmFyIGVudj1uZXcganN0cy5nZW9tLkVudmVsb3BlKCk7dGhpcy5wb2ludHMuZm9yRWFjaChmdW5jdGlvbihjb21wb25lbnQpe2Vudi5leHBhbmRUb0luY2x1ZGUoY29tcG9uZW50KTt9KTtyZXR1cm4gZW52O307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmVxdWFsc0V4YWN0PWZ1bmN0aW9uKG90aGVyLHRvbGVyYW5jZSl7aWYoIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3Mob3RoZXIpKXtyZXR1cm4gZmFsc2U7fVxuaWYodGhpcy5wb2ludHMubGVuZ3RoIT09b3RoZXIucG9pbnRzLmxlbmd0aCl7cmV0dXJuIGZhbHNlO31cbmlmKHRoaXMuaXNFbXB0eSgpJiZvdGhlci5pc0VtcHR5KCkpe3JldHVybiB0cnVlO31cbnJldHVybiB0aGlzLnBvaW50cy5yZWR1Y2UoZnVuY3Rpb24oZXF1YWwscG9pbnQsaSl7cmV0dXJuIGVxdWFsJiZqc3RzLmdlb20uR2VvbWV0cnkucHJvdG90eXBlLmVxdWFsKHBvaW50LG90aGVyLnBvaW50c1tpXSx0b2xlcmFuY2UpO30pO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmlzRXF1aXZhbGVudENsYXNzPWZ1bmN0aW9uKG90aGVyKXtyZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZzt9O2pzdHMuZ2VvbS5MaW5lU3RyaW5nLnByb3RvdHlwZS5jb21wYXJlVG9TYW1lQ2xhc3M9ZnVuY3Rpb24obyl7dmFyIGxpbmU9bzt2YXIgaT0wLGlsPXRoaXMucG9pbnRzLmxlbmd0aDt2YXIgaj0wLGpsPWxpbmUucG9pbnRzLmxlbmd0aDt3aGlsZShpPGlsJiZqPGpsKXt2YXIgY29tcGFyaXNvbj10aGlzLnBvaW50c1tpXS5jb21wYXJlVG8obGluZS5wb2ludHNbal0pO2lmKGNvbXBhcmlzb24hPT0wKXtyZXR1cm4gY29tcGFyaXNvbjt9XG5pKys7aisrO31cbmlmKGk8aWwpe3JldHVybiAxO31cbmlmKGo8amwpe3JldHVybi0xO31cbnJldHVybiAwO307anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGZpbHRlcil7aWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5RmlsdGVyfHxmaWx0ZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb21wb25lbnRGaWx0ZXIpe2ZpbHRlci5maWx0ZXIodGhpcyk7fWVsc2UgaWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGVGaWx0ZXIpe2Zvcih2YXIgaT0wLGxlbj10aGlzLnBvaW50cy5sZW5ndGg7aTxsZW47aSsrKXtmaWx0ZXIuZmlsdGVyKHRoaXMucG9pbnRzW2ldKTt9fWVsc2UgaWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGVTZXF1ZW5jZUZpbHRlcil7dGhpcy5hcHBseTIuYXBwbHkodGhpcyxhcmd1bWVudHMpO319O2pzdHMuZ2VvbS5MaW5lU3RyaW5nLnByb3RvdHlwZS5hcHBseTI9ZnVuY3Rpb24oZmlsdGVyKXtpZih0aGlzLnBvaW50cy5sZW5ndGg9PT0wKVxucmV0dXJuO2Zvcih2YXIgaT0wO2k8dGhpcy5wb2ludHMubGVuZ3RoO2krKyl7ZmlsdGVyLmZpbHRlcih0aGlzLnBvaW50cyxpKTtpZihmaWx0ZXIuaXNEb25lKCkpXG5icmVhazt9XG5pZihmaWx0ZXIuaXNHZW9tZXRyeUNoYW5nZWQoKSl7fX07anN0cy5nZW9tLkxpbmVTdHJpbmcucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHBvaW50cz1bXTtmb3IodmFyIGk9MCxsZW49dGhpcy5wb2ludHMubGVuZ3RoO2k8bGVuO2krKyl7cG9pbnRzLnB1c2godGhpcy5wb2ludHNbaV0uY2xvbmUoKSk7fVxucmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKHBvaW50cyk7fTtqc3RzLmdlb20uTGluZVN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKCl7dmFyIGksaWwsaixjaSxjaixsZW47bGVuPXRoaXMucG9pbnRzLmxlbmd0aDtpbD1wYXJzZUludChsZW4vMik7Zm9yKGk9MDtpPGlsO2krKyl7aj1sZW4tMS1pO2NpPXRoaXMucG9pbnRzW2ldO2NqPXRoaXMucG9pbnRzW2pdO2lmKCFjaS5lcXVhbHMoY2opKXtpZihjaS5jb21wYXJlVG8oY2opPjApe3RoaXMucG9pbnRzLnJldmVyc2UoKTt9XG5yZXR1cm47fX19O2pzdHMuZ2VvbS5MaW5lU3RyaW5nLnByb3RvdHlwZS5DTEFTU19OQU1FPSdqc3RzLmdlb20uTGluZVN0cmluZyc7fSkoKTsoZnVuY3Rpb24oKXtqc3RzLmdlb20uUG9seWdvbj1mdW5jdGlvbihzaGVsbCxob2xlcyxmYWN0b3J5KXt0aGlzLnNoZWxsPXNoZWxsfHxmYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcobnVsbCk7dGhpcy5ob2xlcz1ob2xlc3x8W107dGhpcy5mYWN0b3J5PWZhY3Rvcnk7fTtqc3RzLmdlb20uUG9seWdvbi5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbS5HZW9tZXRyeSgpO2pzdHMuZ2VvbS5Qb2x5Z29uLmNvbnN0cnVjdG9yPWpzdHMuZ2VvbS5Qb2x5Z29uO2pzdHMuZ2VvbS5Qb2x5Z29uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlbGwuZ2V0Q29vcmRpbmF0ZSgpO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpe3JldHVybltdO31cbnZhciBjb29yZGluYXRlcz1bXTt2YXIgaz0tMTt2YXIgc2hlbGxDb29yZGluYXRlcz10aGlzLnNoZWxsLmdldENvb3JkaW5hdGVzKCk7Zm9yKHZhciB4PTA7eDxzaGVsbENvb3JkaW5hdGVzLmxlbmd0aDt4Kyspe2srKztjb29yZGluYXRlc1trXT1zaGVsbENvb3JkaW5hdGVzW3hdO31cbmZvcih2YXIgaT0wO2k8dGhpcy5ob2xlcy5sZW5ndGg7aSsrKXt2YXIgY2hpbGRDb29yZGluYXRlcz10aGlzLmhvbGVzW2ldLmdldENvb3JkaW5hdGVzKCk7Zm9yKHZhciBqPTA7ajxjaGlsZENvb3JkaW5hdGVzLmxlbmd0aDtqKyspe2srKztjb29yZGluYXRlc1trXT1jaGlsZENvb3JkaW5hdGVzW2pdO319XG5yZXR1cm4gY29vcmRpbmF0ZXM7fTtqc3RzLmdlb20uUG9seWdvbi5wcm90b3R5cGUuZ2V0TnVtUG9pbnRzPWZ1bmN0aW9uKCl7dmFyIG51bVBvaW50cz10aGlzLnNoZWxsLmdldE51bVBvaW50cygpO2Zvcih2YXIgaT0wO2k8dGhpcy5ob2xlcy5sZW5ndGg7aSsrKXtudW1Qb2ludHMrPXRoaXMuaG9sZXNbaV0uZ2V0TnVtUG9pbnRzKCk7fVxucmV0dXJuIG51bVBvaW50czt9O2pzdHMuZ2VvbS5Qb2x5Z29uLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlbGwuaXNFbXB0eSgpO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmlzUmVjdGFuZ2xlPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXROdW1JbnRlcmlvclJpbmcoKSE9MClyZXR1cm4gZmFsc2U7aWYodGhpcy5zaGVsbD09bnVsbClyZXR1cm4gZmFsc2U7aWYodGhpcy5zaGVsbC5nZXROdW1Qb2ludHMoKSE9NSlyZXR1cm4gZmFsc2U7dmFyIHNlcT10aGlzLnNoZWxsLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpO3ZhciBlbnY9dGhpcy5nZXRFbnZlbG9wZUludGVybmFsKCk7Zm9yKHZhciBpPTA7aTw1O2krKyl7dmFyIHg9c2VxW2ldLng7aWYoISh4PT1lbnYuZ2V0TWluWCgpfHx4PT1lbnYuZ2V0TWF4WCgpKSlyZXR1cm4gZmFsc2U7dmFyIHk9c2VxW2ldLnk7aWYoISh5PT1lbnYuZ2V0TWluWSgpfHx5PT1lbnYuZ2V0TWF4WSgpKSlyZXR1cm4gZmFsc2U7fVxudmFyIHByZXZYPXNlcVswXS54O3ZhciBwcmV2WT1zZXFbMF0ueTtmb3IodmFyIGk9MTtpPD00O2krKyl7dmFyIHg9c2VxW2ldLng7dmFyIHk9c2VxW2ldLnk7dmFyIHhDaGFuZ2VkPXghPXByZXZYO3ZhciB5Q2hhbmdlZD15IT1wcmV2WTtpZih4Q2hhbmdlZD09eUNoYW5nZWQpXG5yZXR1cm4gZmFsc2U7cHJldlg9eDtwcmV2WT15O31cbnJldHVybiB0cnVlO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmdldEV4dGVyaW9yUmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNoZWxsO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmdldEludGVyaW9yUmluZ049ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaG9sZXNbbl07fTtqc3RzLmdlb20uUG9seWdvbi5wcm90b3R5cGUuZ2V0TnVtSW50ZXJpb3JSaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG9sZXMubGVuZ3RoO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmdldEFyZWE9ZnVuY3Rpb24oKXt2YXIgYXJlYT0wLjA7YXJlYSs9TWF0aC5hYnMoanN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLnNpZ25lZEFyZWEodGhpcy5zaGVsbC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSkpO2Zvcih2YXIgaT0wO2k8dGhpcy5ob2xlcy5sZW5ndGg7aSsrKXthcmVhLT1NYXRoLmFicyhqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuc2lnbmVkQXJlYSh0aGlzLmhvbGVzW2ldLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpKSk7fVxucmV0dXJuIGFyZWE7fTtqc3RzLmdlb20uUG9seWdvbi5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIGxlbj0wLjA7bGVuKz10aGlzLnNoZWxsLmdldExlbmd0aCgpO2Zvcih2YXIgaT0wO2k8dGhpcy5ob2xlcy5sZW5ndGg7aSsrKXtsZW4rPXRoaXMuaG9sZXNbaV0uZ2V0TGVuZ3RoKCk7fVxucmV0dXJuIGxlbjt9O2pzdHMuZ2VvbS5Qb2x5Z29uLnByb3RvdHlwZS5nZXRCb3VuZGFyeT1mdW5jdGlvbigpe2lmKHRoaXMuaXNFbXB0eSgpKXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKG51bGwpO31cbnZhciByaW5ncz1bXTtyaW5nc1swXT10aGlzLnNoZWxsLmNsb25lKCk7Zm9yKHZhciBpPTAsbGVuPXRoaXMuaG9sZXMubGVuZ3RoO2k8bGVuO2krKyl7cmluZ3NbaSsxXT10aGlzLmhvbGVzW2ldLmNsb25lKCk7fVxuaWYocmluZ3MubGVuZ3RoPD0xKVxucmV0dXJuIHJpbmdzWzBdO3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcocmluZ3MpO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmNvbXB1dGVFbnZlbG9wZUludGVybmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlbGwuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmdldERpbWVuc2lvbj1mdW5jdGlvbigpe3JldHVybiAyO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmdldEJvdW5kYXJ5RGltZW5zaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIDE7fTtqc3RzLmdlb20uUG9seWdvbi5wcm90b3R5cGUuZXF1YWxzRXhhY3Q9ZnVuY3Rpb24ob3RoZXIsdG9sZXJhbmNlKXtpZighdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyhvdGhlcikpe3JldHVybiBmYWxzZTt9XG5pZih0aGlzLmlzRW1wdHkoKSYmb3RoZXIuaXNFbXB0eSgpKXtyZXR1cm4gdHJ1ZTt9XG5pZih0aGlzLmlzRW1wdHkoKSE9PW90aGVyLmlzRW1wdHkoKSl7cmV0dXJuIGZhbHNlO31cbmlmKCF0aGlzLnNoZWxsLmVxdWFsc0V4YWN0KG90aGVyLnNoZWxsLHRvbGVyYW5jZSkpe3JldHVybiBmYWxzZTt9XG5pZih0aGlzLmhvbGVzLmxlbmd0aCE9PW90aGVyLmhvbGVzLmxlbmd0aCl7cmV0dXJuIGZhbHNlO31cbmlmKHRoaXMuaG9sZXMubGVuZ3RoIT09b3RoZXIuaG9sZXMubGVuZ3RoKXtyZXR1cm4gZmFsc2U7fVxuZm9yKHZhciBpPTA7aTx0aGlzLmhvbGVzLmxlbmd0aDtpKyspe2lmKCEodGhpcy5ob2xlc1tpXSkuZXF1YWxzRXhhY3Qob3RoZXIuaG9sZXNbaV0sdG9sZXJhbmNlKSl7cmV0dXJuIGZhbHNlO319XG5yZXR1cm4gdHJ1ZTt9O2pzdHMuZ2VvbS5Qb2x5Z29uLnByb3RvdHlwZS5jb21wYXJlVG9TYW1lQ2xhc3M9ZnVuY3Rpb24obyl7cmV0dXJuIHRoaXMuc2hlbGwuY29tcGFyZVRvU2FtZUNsYXNzKG8uc2hlbGwpO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGZpbHRlcil7aWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29tcG9uZW50RmlsdGVyKXtmaWx0ZXIuZmlsdGVyKHRoaXMpO3RoaXMuc2hlbGwuYXBwbHkoZmlsdGVyKTtmb3IodmFyIGk9MCxsZW49dGhpcy5ob2xlcy5sZW5ndGg7aTxsZW47aSsrKXt0aGlzLmhvbGVzW2ldLmFwcGx5KGZpbHRlcik7fX1lbHNlIGlmKGZpbHRlciBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUZpbHRlcil7ZmlsdGVyLmZpbHRlcih0aGlzKTt9ZWxzZSBpZihmaWx0ZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZUZpbHRlcil7dGhpcy5zaGVsbC5hcHBseShmaWx0ZXIpO2Zvcih2YXIgaT0wLGxlbj10aGlzLmhvbGVzLmxlbmd0aDtpPGxlbjtpKyspe3RoaXMuaG9sZXNbaV0uYXBwbHkoZmlsdGVyKTt9fWVsc2UgaWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGVTZXF1ZW5jZUZpbHRlcil7dGhpcy5hcHBseTIuYXBwbHkodGhpcyxhcmd1bWVudHMpO319O2pzdHMuZ2VvbS5Qb2x5Z29uLnByb3RvdHlwZS5hcHBseTI9ZnVuY3Rpb24oZmlsdGVyKXt0aGlzLnNoZWxsLmFwcGx5KGZpbHRlcik7aWYoIWZpbHRlci5pc0RvbmUoKSl7Zm9yKHZhciBpPTA7aTx0aGlzLmhvbGVzLmxlbmd0aDtpKyspe3RoaXMuaG9sZXNbaV0uYXBwbHkoZmlsdGVyKTtpZihmaWx0ZXIuaXNEb25lKCkpXG5icmVhazt9fVxuaWYoZmlsdGVyLmlzR2VvbWV0cnlDaGFuZ2VkKCkpe319O2pzdHMuZ2VvbS5Qb2x5Z29uLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBob2xlcz1bXTtmb3IodmFyIGk9MCxsZW49dGhpcy5ob2xlcy5sZW5ndGg7aTxsZW47aSsrKXtob2xlcy5wdXNoKHRoaXMuaG9sZXNbaV0uY2xvbmUoKSk7fVxucmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVQb2x5Z29uKHRoaXMuc2hlbGwuY2xvbmUoKSxob2xlcyk7fTtqc3RzLmdlb20uUG9seWdvbi5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKCl7dGhpcy5ub3JtYWxpemUyKHRoaXMuc2hlbGwsdHJ1ZSk7Zm9yKHZhciBpPTAsbGVuPXRoaXMuaG9sZXMubGVuZ3RoO2k8bGVuO2krKyl7dGhpcy5ub3JtYWxpemUyKHRoaXMuaG9sZXNbaV0sZmFsc2UpO31cbnRoaXMuaG9sZXMuc29ydCgpO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLm5vcm1hbGl6ZTI9ZnVuY3Rpb24ocmluZyxjbG9ja3dpc2Upe2lmKHJpbmcuaXNFbXB0eSgpKXtyZXR1cm47fVxudmFyIHVuaXF1ZUNvb3JkaW5hdGVzPXJpbmcucG9pbnRzLnNsaWNlKDAscmluZy5wb2ludHMubGVuZ3RoLTEpO3ZhciBtaW5Db29yZGluYXRlPWpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLm1pbkNvb3JkaW5hdGUocmluZy5wb2ludHMpO2pzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnNjcm9sbCh1bmlxdWVDb29yZGluYXRlcyxtaW5Db29yZGluYXRlKTtyaW5nLnBvaW50cz11bmlxdWVDb29yZGluYXRlcy5jb25jYXQoKTtyaW5nLnBvaW50c1t1bmlxdWVDb29yZGluYXRlcy5sZW5ndGhdPXVuaXF1ZUNvb3JkaW5hdGVzWzBdO2lmKGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5pc0NDVyhyaW5nLnBvaW50cyk9PT1jbG9ja3dpc2Upe3JpbmcucG9pbnRzLnJldmVyc2UoKTt9fTtqc3RzLmdlb20uUG9seWdvbi5wcm90b3R5cGUuZ2V0R2VvbWV0cnlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuJ1BvbHlnb24nO307anN0cy5nZW9tLlBvbHlnb24ucHJvdG90eXBlLkNMQVNTX05BTUU9J2pzdHMuZ2VvbS5Qb2x5Z29uJzt9KSgpOyhmdW5jdGlvbigpe3ZhciBHZW9tZXRyeT1qc3RzLmdlb20uR2VvbWV0cnk7dmFyIFRyZWVTZXQ9amF2YXNjcmlwdC51dGlsLlRyZWVTZXQ7dmFyIEFycmF5cz1qYXZhc2NyaXB0LnV0aWwuQXJyYXlzO2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb249ZnVuY3Rpb24oZ2VvbWV0cmllcyxmYWN0b3J5KXt0aGlzLmdlb21ldHJpZXM9Z2VvbWV0cmllc3x8W107dGhpcy5mYWN0b3J5PWZhY3Rvcnk7fTtqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLnByb3RvdHlwZT1uZXcgR2VvbWV0cnkoKTtqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLmNvbnN0cnVjdG9yPWpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb247anN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbi5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe2Zvcih2YXIgaT0wLGxlbj10aGlzLmdlb21ldHJpZXMubGVuZ3RoO2k8bGVuO2krKyl7dmFyIGdlb21ldHJ5PXRoaXMuZ2V0R2VvbWV0cnlOKGkpO2lmKCFnZW9tZXRyeS5pc0VtcHR5KCkpe3JldHVybiBmYWxzZTt9fVxucmV0dXJuIHRydWU7fTtqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRBcmVhPWZ1bmN0aW9uKCl7dmFyIGFyZWE9MC4wO2Zvcih2YXIgaT0wLGxlbj10aGlzLmdlb21ldHJpZXMubGVuZ3RoO2k8bGVuO2krKyl7YXJlYSs9dGhpcy5nZXRHZW9tZXRyeU4oaSkuZ2V0QXJlYSgpO31cbnJldHVybiBhcmVhO307anN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIGxlbmd0aD0wLjA7Zm9yKHZhciBpPTAsbGVuPXRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7aTxsZW47aSsrKXtsZW5ndGgrPXRoaXMuZ2V0R2VvbWV0cnlOKGkpLmdldExlbmd0aCgpO31cbnJldHVybiBsZW5ndGg7fTtqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpXG5yZXR1cm4gbnVsbDtyZXR1cm4gdGhpcy5nZXRHZW9tZXRyeU4oMCkuZ2V0Q29vcmRpbmF0ZSgpO307anN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXt2YXIgY29vcmRpbmF0ZXM9W107dmFyIGs9LTE7Zm9yKHZhciBpPTAsbGVuPXRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7aTxsZW47aSsrKXt2YXIgZ2VvbWV0cnk9dGhpcy5nZXRHZW9tZXRyeU4oaSk7dmFyIGNoaWxkQ29vcmRpbmF0ZXM9Z2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtmb3IodmFyIGo9MDtqPGNoaWxkQ29vcmRpbmF0ZXMubGVuZ3RoO2orKyl7aysrO2Nvb3JkaW5hdGVzW2tdPWNoaWxkQ29vcmRpbmF0ZXNbal07fX1cbnJldHVybiBjb29yZGluYXRlczt9O2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldE51bUdlb21ldHJpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZW9tZXRyaWVzLmxlbmd0aDt9O2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldEdlb21ldHJ5Tj1mdW5jdGlvbihuKXt2YXIgZ2VvbWV0cnk9dGhpcy5nZW9tZXRyaWVzW25dO2lmKGdlb21ldHJ5IGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGUpe2dlb21ldHJ5PW5ldyBqc3RzLmdlb20uUG9pbnQoZ2VvbWV0cnkpO31cbnJldHVybiBnZW9tZXRyeTt9O2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldE51bVBvaW50cz1mdW5jdGlvbihuKXt2YXIgbnVtUG9pbnRzPTA7Zm9yKHZhciBpPTA7aTx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO2krKyl7bnVtUG9pbnRzKz10aGlzLmdlb21ldHJpZXNbaV0uZ2V0TnVtUG9pbnRzKCk7fVxucmV0dXJuIG51bVBvaW50czt9XG5qc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLnByb3RvdHlwZS5lcXVhbHNFeGFjdD1mdW5jdGlvbihvdGhlcix0b2xlcmFuY2Upe2lmKCF0aGlzLmlzRXF1aXZhbGVudENsYXNzKG90aGVyKSl7cmV0dXJuIGZhbHNlO31cbmlmKHRoaXMuZ2VvbWV0cmllcy5sZW5ndGghPT1vdGhlci5nZW9tZXRyaWVzLmxlbmd0aCl7cmV0dXJuIGZhbHNlO31cbmZvcih2YXIgaT0wLGxlbj10aGlzLmdlb21ldHJpZXMubGVuZ3RoO2k8bGVuO2krKyl7dmFyIGdlb21ldHJ5PXRoaXMuZ2V0R2VvbWV0cnlOKGkpO2lmKCFnZW9tZXRyeS5lcXVhbHNFeGFjdChvdGhlci5nZXRHZW9tZXRyeU4oaSksdG9sZXJhbmNlKSl7cmV0dXJuIGZhbHNlO319XG5yZXR1cm4gdHJ1ZTt9O2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGdlb21ldHJpZXM9W107Zm9yKHZhciBpPTAsbGVuPXRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7aTxsZW47aSsrKXtnZW9tZXRyaWVzLnB1c2godGhpcy5nZW9tZXRyaWVzW2ldLmNsb25lKCkpO31cbnJldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKGdlb21ldHJpZXMpO307anN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbi5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAsbGVuPXRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7aTxsZW47aSsrKXt0aGlzLmdldEdlb21ldHJ5TihpKS5ub3JtYWxpemUoKTt9XG50aGlzLmdlb21ldHJpZXMuc29ydCgpO307anN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbi5wcm90b3R5cGUuY29tcGFyZVRvU2FtZUNsYXNzPWZ1bmN0aW9uKG8pe3ZhciB0aGVzZUVsZW1lbnRzPW5ldyBUcmVlU2V0KEFycmF5cy5hc0xpc3QodGhpcy5nZW9tZXRyaWVzKSk7dmFyIG90aGVyRWxlbWVudHM9bmV3IFRyZWVTZXQoQXJyYXlzLmFzTGlzdChvLmdlb21ldHJpZXMpKTtyZXR1cm4gdGhpcy5jb21wYXJlKHRoZXNlRWxlbWVudHMsb3RoZXJFbGVtZW50cyk7fTtqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbihmaWx0ZXIpe2lmKGZpbHRlciBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUZpbHRlcnx8ZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29tcG9uZW50RmlsdGVyKXtmaWx0ZXIuZmlsdGVyKHRoaXMpO2Zvcih2YXIgaT0wLGxlbj10aGlzLmdlb21ldHJpZXMubGVuZ3RoO2k8bGVuO2krKyl7dGhpcy5nZXRHZW9tZXRyeU4oaSkuYXBwbHkoZmlsdGVyKTt9fWVsc2UgaWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGVGaWx0ZXIpe2Zvcih2YXIgaT0wLGxlbj10aGlzLmdlb21ldHJpZXMubGVuZ3RoO2k8bGVuO2krKyl7dGhpcy5nZXRHZW9tZXRyeU4oaSkuYXBwbHkoZmlsdGVyKTt9fWVsc2UgaWYoZmlsdGVyIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGVTZXF1ZW5jZUZpbHRlcil7dGhpcy5hcHBseTIuYXBwbHkodGhpcyxhcmd1bWVudHMpO319O2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLmFwcGx5Mj1mdW5jdGlvbihmaWx0ZXIpe2lmKHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg9PTApXG5yZXR1cm47Zm9yKHZhciBpPTA7aTx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO2krKyl7dGhpcy5nZW9tZXRyaWVzW2ldLmFwcGx5KGZpbHRlcik7aWYoZmlsdGVyLmlzRG9uZSgpKXticmVhazt9fVxuaWYoZmlsdGVyLmlzR2VvbWV0cnlDaGFuZ2VkKCkpe319O2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLmdldERpbWVuc2lvbj1mdW5jdGlvbigpe3ZhciBkaW1lbnNpb249anN0cy5nZW9tLkRpbWVuc2lvbi5GQUxTRTtmb3IodmFyIGk9MCxsZW49dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciBnZW9tZXRyeT10aGlzLmdldEdlb21ldHJ5TihpKTtkaW1lbnNpb249TWF0aC5tYXgoZGltZW5zaW9uLGdlb21ldHJ5LmdldERpbWVuc2lvbigpKTt9XG5yZXR1cm4gZGltZW5zaW9uO307anN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbi5wcm90b3R5cGUuY29tcHV0ZUVudmVsb3BlSW50ZXJuYWw9ZnVuY3Rpb24oKXt2YXIgZW52ZWxvcGU9bmV3IGpzdHMuZ2VvbS5FbnZlbG9wZSgpO2Zvcih2YXIgaT0wLGxlbj10aGlzLmdlb21ldHJpZXMubGVuZ3RoO2k8bGVuO2krKyl7dmFyIGdlb21ldHJ5PXRoaXMuZ2V0R2VvbWV0cnlOKGkpO2VudmVsb3BlLmV4cGFuZFRvSW5jbHVkZShnZW9tZXRyeS5nZXRFbnZlbG9wZUludGVybmFsKCkpO31cbnJldHVybiBlbnZlbG9wZTt9O2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLkNMQVNTX05BTUU9J2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24nO30pKCk7anN0cy5hbGdvcml0aG0uQ2VudHJvaWQ9ZnVuY3Rpb24oZ2VvbWV0cnkpe3RoaXMuYXJlYUJhc2VQdD1udWxsO3RoaXMudHJpYW5nbGVDZW50Mz1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTt0aGlzLmFyZWFzdW0yPTA7dGhpcy5jZzM9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7dGhpcy5saW5lQ2VudFN1bT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTt0aGlzLnRvdGFsTGVuZ3RoPTA7dGhpcy5wdENvdW50PTA7dGhpcy5wdENlbnRTdW09bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7dGhpcy5hZGQoZ2VvbWV0cnkpO307anN0cy5hbGdvcml0aG0uQ2VudHJvaWQuZ2V0Q2VudHJvaWQ9ZnVuY3Rpb24oZ2VvbWV0cnkpe3ZhciBjZW50PW5ldyBqc3RzLmFsZ29yaXRobS5DZW50cm9pZChnZW9tZXRyeSk7cmV0dXJuIGNlbnQuZ2V0Q2VudHJvaWQoKTt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkLmNlbnRyb2lkMz1mdW5jdGlvbihwMSxwMixwMyxjKXtjLng9cDEueCtwMi54K3AzLng7Yy55PXAxLnkrcDIueStwMy55O307anN0cy5hbGdvcml0aG0uQ2VudHJvaWQuYXJlYTI9ZnVuY3Rpb24ocDEscDIscDMpe3JldHVybihwMi54LXAxLngpKihwMy55LXAxLnkpLShwMy54LXAxLngpKihwMi55LXAxLnkpO307anN0cy5hbGdvcml0aG0uQ2VudHJvaWQucHJvdG90eXBlLmFkZD1mdW5jdGlvbihnZW9tKXtpZihnZW9tLmlzRW1wdHkoKSl7cmV0dXJuO31cbmlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnQpe3RoaXMuYWRkUG9pbnQoZ2VvbS5nZXRDb29yZGluYXRlKCkpO31lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZyl7dGhpcy5hZGRMaW5lU2VnbWVudHMoZ2VvbS5nZXRDb29yZGluYXRlcygpKTt9ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pe3RoaXMuYWRkUG9seWdvbihnZW9tKTt9ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbil7Zm9yKHZhciBpPTA7aTxnZW9tLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3RoaXMuYWRkKGdlb20uZ2V0R2VvbWV0cnlOKGkpKTt9fX07anN0cy5hbGdvcml0aG0uQ2VudHJvaWQucHJvdG90eXBlLmdldENlbnRyb2lkPWZ1bmN0aW9uKCl7dmFyIGNlbnQ9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7aWYoTWF0aC5hYnModGhpcy5hcmVhc3VtMik+MCl7Y2VudC54PXRoaXMuY2czLngvMy90aGlzLmFyZWFzdW0yO2NlbnQueT10aGlzLmNnMy55LzMvdGhpcy5hcmVhc3VtMjt9ZWxzZSBpZih0aGlzLnRvdGFsTGVuZ3RoPjApe2NlbnQueD10aGlzLmxpbmVDZW50U3VtLngvdGhpcy50b3RhbExlbmd0aDtjZW50Lnk9dGhpcy5saW5lQ2VudFN1bS55L3RoaXMudG90YWxMZW5ndGg7fWVsc2UgaWYodGhpcy5wdENvdW50PjApe2NlbnQueD10aGlzLnB0Q2VudFN1bS54L3RoaXMucHRDb3VudDtjZW50Lnk9dGhpcy5wdENlbnRTdW0ueS90aGlzLnB0Q291bnQ7fWVsc2V7cmV0dXJuIG51bGw7fVxucmV0dXJuIGNlbnQ7fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZC5wcm90b3R5cGUuc2V0QmFzZVBvaW50PWZ1bmN0aW9uKGJhc2VQdCl7aWYodGhpcy5hcmVhQmFzZVB0PT09bnVsbCl7dGhpcy5hcmVhQmFzZVB0PWJhc2VQdDt9fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZC5wcm90b3R5cGUuYWRkUG9seWdvbj1mdW5jdGlvbihwb2x5KXt0aGlzLmFkZFNoZWxsKHBvbHkuZ2V0RXh0ZXJpb3JSaW5nKCkuZ2V0Q29vcmRpbmF0ZXMoKSk7Zm9yKHZhciBpPTA7aTxwb2x5LmdldE51bUludGVyaW9yUmluZygpO2krKyl7dGhpcy5hZGRIb2xlKHBvbHkuZ2V0SW50ZXJpb3JSaW5nTihpKS5nZXRDb29yZGluYXRlcygpKTt9fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZC5wcm90b3R5cGUuYWRkU2hlbGw9ZnVuY3Rpb24ocHRzKXtpZihwdHMubGVuZ3RoPjApe3RoaXMuc2V0QmFzZVBvaW50KHB0c1swXSk7fVxudmFyIGlzUG9zaXRpdmVBcmVhPSFqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuaXNDQ1cocHRzKTtmb3IodmFyIGk9MDtpPHB0cy5sZW5ndGgtMTtpKyspe3RoaXMuYWRkVHJpYW5nbGUodGhpcy5hcmVhQmFzZVB0LHB0c1tpXSxwdHNbaSsxXSxpc1Bvc2l0aXZlQXJlYSk7fVxudGhpcy5hZGRMaW5lU2VnbWVudHMocHRzKTt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkLnByb3RvdHlwZS5hZGRIb2xlPWZ1bmN0aW9uKHB0cyl7dmFyIGlzUG9zaXRpdmVBcmVhPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5pc0NDVyhwdHMpO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aC0xO2krKyl7dGhpcy5hZGRUcmlhbmdsZSh0aGlzLmFyZWFCYXNlUHQscHRzW2ldLHB0c1tpKzFdLGlzUG9zaXRpdmVBcmVhKTt9XG50aGlzLmFkZExpbmVTZWdtZW50cyhwdHMpO307anN0cy5hbGdvcml0aG0uQ2VudHJvaWQucHJvdG90eXBlLmFkZFRyaWFuZ2xlPWZ1bmN0aW9uKHAwLHAxLHAyLGlzUG9zaXRpdmVBcmVhKXt2YXIgc2lnbj0oaXNQb3NpdGl2ZUFyZWEpPzE6LTE7anN0cy5hbGdvcml0aG0uQ2VudHJvaWQuY2VudHJvaWQzKHAwLHAxLHAyLHRoaXMudHJpYW5nbGVDZW50Myk7dmFyIGFyZWEyPWpzdHMuYWxnb3JpdGhtLkNlbnRyb2lkLmFyZWEyKHAwLHAxLHAyKTt0aGlzLmNnMy54Kz1zaWduKmFyZWEyKnRoaXMudHJpYW5nbGVDZW50My54O3RoaXMuY2czLnkrPXNpZ24qYXJlYTIqdGhpcy50cmlhbmdsZUNlbnQzLnk7dGhpcy5hcmVhc3VtMis9c2lnbiphcmVhMjt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkLnByb3RvdHlwZS5hZGRMaW5lU2VnbWVudHM9ZnVuY3Rpb24ocHRzKXt2YXIgbGluZUxlbj0wO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aC0xO2krKyl7dmFyIHNlZ21lbnRMZW49cHRzW2ldLmRpc3RhbmNlKHB0c1tpKzFdKTtpZihzZWdtZW50TGVuPT09MCl7Y29udGludWU7fVxubGluZUxlbis9c2VnbWVudExlbjt2YXIgbWlkeD0ocHRzW2ldLngrcHRzW2krMV0ueCkvMjt0aGlzLmxpbmVDZW50U3VtLngrPXNlZ21lbnRMZW4qbWlkeDt2YXIgbWlkeT0ocHRzW2ldLnkrcHRzW2krMV0ueSkvMjt0aGlzLmxpbmVDZW50U3VtLnkrPXNlZ21lbnRMZW4qbWlkeTt9XG50aGlzLnRvdGFsTGVuZ3RoKz1saW5lTGVuO2lmKGxpbmVMZW49PT0wJiZwdHMubGVuZ3RoPjApe3RoaXMuYWRkUG9pbnQocHRzWzBdKTt9fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZC5wcm90b3R5cGUuYWRkUG9pbnQ9ZnVuY3Rpb24ocHQpe3RoaXMucHRDb3VudCs9MTt0aGlzLnB0Q2VudFN1bS54Kz1wdC54O3RoaXMucHRDZW50U3VtLnkrPXB0Lnk7fTsoZnVuY3Rpb24oKXt2YXIgRWRnZVJpbmc9ZnVuY3Rpb24oZmFjdG9yeSl7dGhpcy5kZUxpc3Q9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt0aGlzLmZhY3Rvcnk9ZmFjdG9yeTt9O0VkZ2VSaW5nLmZpbmRFZGdlUmluZ0NvbnRhaW5pbmc9ZnVuY3Rpb24odGVzdEVyLHNoZWxsTGlzdCl7dmFyIHRlc3RSaW5nPXRlc3RFci5nZXRSaW5nKCk7dmFyIHRlc3RFbnY9dGVzdFJpbmcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3ZhciB0ZXN0UHQ9dGVzdFJpbmcuZ2V0Q29vcmRpbmF0ZU4oMCk7dmFyIG1pblNoZWxsPW51bGw7dmFyIG1pbkVudj1udWxsO2Zvcih2YXIgaXQ9c2hlbGxMaXN0Lml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIHRyeVNoZWxsPWl0Lm5leHQoKTt2YXIgdHJ5UmluZz10cnlTaGVsbC5nZXRSaW5nKCk7dmFyIHRyeUVudj10cnlSaW5nLmdldEVudmVsb3BlSW50ZXJuYWwoKTtpZihtaW5TaGVsbCE9bnVsbClcbm1pbkVudj1taW5TaGVsbC5nZXRSaW5nKCkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3ZhciBpc0NvbnRhaW5lZD1mYWxzZTtpZih0cnlFbnYuZXF1YWxzKHRlc3RFbnYpKVxuY29udGludWU7dGVzdFB0PWpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnB0Tm90SW5MaXN0KHRlc3RSaW5nLmdldENvb3JkaW5hdGVzKCksdHJ5UmluZy5nZXRDb29yZGluYXRlcygpKTtpZih0cnlFbnYuY29udGFpbnModGVzdEVudikmJmpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5pc1BvaW50SW5SaW5nKHRlc3RQdCx0cnlSaW5nLmdldENvb3JkaW5hdGVzKCkpKVxuaXNDb250YWluZWQ9dHJ1ZTtpZihpc0NvbnRhaW5lZCl7aWYobWluU2hlbGw9PW51bGx8fG1pbkVudi5jb250YWlucyh0cnlFbnYpKXttaW5TaGVsbD10cnlTaGVsbDt9fX1cbnJldHVybiBtaW5TaGVsbDt9O0VkZ2VSaW5nLnB0Tm90SW5MaXN0PWZ1bmN0aW9uKHRlc3RQdHMscHRzKXtmb3IodmFyIGk9MDtpPHRlc3RQdHMubGVuZ3RoO2krKyl7dmFyIHRlc3RQdD10ZXN0UHRzW2ldO2lmKCFpc0luTGlzdCh0ZXN0UHQscHRzKSlcbnJldHVybiB0ZXN0UHQ7fVxucmV0dXJuIG51bGw7fTtFZGdlUmluZy5pc0luTGlzdD1mdW5jdGlvbihwdCxwdHMpe2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aDtpKyspe2lmKHB0LmVxdWFscyhwdHNbaV0pKVxucmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO31cbkVkZ2VSaW5nLnByb3RvdHlwZS5mYWN0b3J5PW51bGw7RWRnZVJpbmcucHJvdG90eXBlLmRlTGlzdD1udWxsO0VkZ2VSaW5nLnByb3RvdHlwZS5yaW5nPW51bGw7RWRnZVJpbmcucHJvdG90eXBlLnJpbmdQdHM9bnVsbDtFZGdlUmluZy5wcm90b3R5cGUuaG9sZXM9bnVsbDtFZGdlUmluZy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGRlKXt0aGlzLmRlTGlzdC5hZGQoZGUpO307RWRnZVJpbmcucHJvdG90eXBlLmlzSG9sZT1mdW5jdGlvbigpe3ZhciByaW5nPXRoaXMuZ2V0UmluZygpO3JldHVybiBqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuaXNDQ1cocmluZy5nZXRDb29yZGluYXRlcygpKTt9O0VkZ2VSaW5nLnByb3RvdHlwZS5hZGRIb2xlPWZ1bmN0aW9uKGhvbGUpe2lmKHRoaXMuaG9sZXM9PW51bGwpXG50aGlzLmhvbGVzPW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KCk7dGhpcy5ob2xlcy5hZGQoaG9sZSk7fTtFZGdlUmluZy5wcm90b3R5cGUuZ2V0UG9seWdvbj1mdW5jdGlvbigpe3ZhciBob2xlTFI9bnVsbDtpZih0aGlzLmhvbGVzIT1udWxsKXtob2xlTFI9W107Zm9yKHZhciBpPTA7aTx0aGlzLmhvbGVzLnNpemUoKTtpKyspe2hvbGVMUltpXT10aGlzLmhvbGVzLmdldChpKTt9fVxudmFyIHBvbHk9dGhpcy5mYWN0b3J5LmNyZWF0ZVBvbHlnb24odGhpcy5yaW5nLGhvbGVMUik7cmV0dXJuIHBvbHk7fTtFZGdlUmluZy5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbigpe3RoaXMuZ2V0Q29vcmRpbmF0ZXMoKTtpZih0aGlzLnJpbmdQdHMubGVuZ3RoPD0zKVxucmV0dXJuIGZhbHNlO3RoaXMuZ2V0UmluZygpO3JldHVybiB0aGlzLnJpbmcuaXNWYWxpZCgpO307RWRnZVJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7aWYodGhpcy5yaW5nUHRzPT1udWxsKXt2YXIgY29vcmRMaXN0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZUxpc3QoKTtmb3IodmFyIGk9dGhpcy5kZUxpc3QuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBkZT1pLm5leHQoKTt2YXIgZWRnZT1kZS5nZXRFZGdlKCk7RWRnZVJpbmcuYWRkRWRnZShlZGdlLmdldExpbmUoKS5nZXRDb29yZGluYXRlcygpLGRlLmdldEVkZ2VEaXJlY3Rpb24oKSxjb29yZExpc3QpO31cbnRoaXMucmluZ1B0cz1jb29yZExpc3QudG9Db29yZGluYXRlQXJyYXkoKTt9XG5yZXR1cm4gdGhpcy5yaW5nUHRzO307RWRnZVJpbmcucHJvdG90eXBlLmdldExpbmVTdHJpbmc9ZnVuY3Rpb24oKXt0aGlzLmdldENvb3JkaW5hdGVzKCk7cmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMucmluZ1B0cyk7fTtFZGdlUmluZy5wcm90b3R5cGUuZ2V0UmluZz1mdW5jdGlvbigpe2lmKHRoaXMucmluZyE9bnVsbClcbnJldHVybiB0aGlzLnJpbmc7dGhpcy5nZXRDb29yZGluYXRlcygpO2lmKHRoaXMucmluZ1B0cy5sZW5ndGg8MylcbmNvbnNvbGUubG9nKHRoaXMucmluZ1B0cyk7dHJ5e3RoaXMucmluZz10aGlzLmZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyh0aGlzLnJpbmdQdHMpO31jYXRjaChleCl7Y29uc29sZS5sb2codGhpcy5yaW5nUHRzKTt9XG5yZXR1cm4gdGhpcy5yaW5nO307RWRnZVJpbmcuYWRkRWRnZT1mdW5jdGlvbihjb29yZHMsaXNGb3J3YXJkLGNvb3JkTGlzdCl7aWYoaXNGb3J3YXJkKXtmb3IodmFyIGk9MDtpPGNvb3Jkcy5sZW5ndGg7aSsrKXtjb29yZExpc3QuYWRkKGNvb3Jkc1tpXSxmYWxzZSk7fX1lbHNle2Zvcih2YXIgaT1jb29yZHMubGVuZ3RoLTE7aT49MDtpLS0pe2Nvb3JkTGlzdC5hZGQoY29vcmRzW2ldLGZhbHNlKTt9fX07anN0cy5vcGVyYXRpb24ucG9seWdvbml6ZS5FZGdlUmluZz1FZGdlUmluZzt9KSgpOyhmdW5jdGlvbigpe3ZhciBHcmFwaENvbXBvbmVudD1mdW5jdGlvbigpe307R3JhcGhDb21wb25lbnQuc2V0VmlzaXRlZD1mdW5jdGlvbihpLHZpc2l0ZWQpe3doaWxlKGkuaGFzTmV4dCgpKXt2YXIgY29tcD1pLm5leHQoKTtjb21wLnNldFZpc2l0ZWQodmlzaXRlZCk7fX07R3JhcGhDb21wb25lbnQuc2V0TWFya2VkPWZ1bmN0aW9uKGksbWFya2VkKXt3aGlsZShpLmhhc05leHQoKSl7dmFyIGNvbXA9aS5uZXh0KCk7Y29tcC5zZXRNYXJrZWQobWFya2VkKTt9fTtHcmFwaENvbXBvbmVudC5nZXRDb21wb25lbnRXaXRoVmlzaXRlZFN0YXRlPWZ1bmN0aW9uKGksdmlzaXRlZFN0YXRlKXt3aGlsZShpLmhhc05leHQoKSl7dmFyIGNvbXA9aS5uZXh0KCk7aWYoY29tcC5pc1Zpc2l0ZWQoKT09dmlzaXRlZFN0YXRlKVxucmV0dXJuIGNvbXA7fVxucmV0dXJuIG51bGw7fTtHcmFwaENvbXBvbmVudC5wcm90b3R5cGUuX2lzTWFya2VkPWZhbHNlO0dyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5faXNWaXNpdGVkPWZhbHNlO0dyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5kYXRhO0dyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5pc1Zpc2l0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWaXNpdGVkO307R3JhcGhDb21wb25lbnQucHJvdG90eXBlLnNldFZpc2l0ZWQ9ZnVuY3Rpb24oaXNWaXNpdGVkKXt0aGlzLl9pc1Zpc2l0ZWQ9aXNWaXNpdGVkO307R3JhcGhDb21wb25lbnQucHJvdG90eXBlLmlzTWFya2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzTWFya2VkO307R3JhcGhDb21wb25lbnQucHJvdG90eXBlLnNldE1hcmtlZD1mdW5jdGlvbihpc01hcmtlZCl7dGhpcy5faXNNYXJrZWQ9aXNNYXJrZWQ7fTtHcmFwaENvbXBvbmVudC5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihkYXRhKXt0aGlzLmRhdGE9ZGF0YTt9O0dyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIGRhdGE7fTtHcmFwaENvbXBvbmVudC5wcm90b3R5cGUuc2V0RGF0YT1mdW5jdGlvbihkYXRhKXt0aGlzLmRhdGE9ZGF0YTt9O0dyYXBoQ29tcG9uZW50LnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIGRhdGE7fTtHcmFwaENvbXBvbmVudC5wcm90b3R5cGUuaXNSZW1vdmVkPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMucGxhbmFyZ3JhcGguR3JhcGhDb21wb25lbnQ9R3JhcGhDb21wb25lbnQ7fSkoKTsoZnVuY3Rpb24oKXt2YXIgR3JhcGhDb21wb25lbnQ9anN0cy5wbGFuYXJncmFwaC5HcmFwaENvbXBvbmVudDt2YXIgRWRnZT1mdW5jdGlvbihkZTAsZGUxKXtpZihkZTA9PT11bmRlZmluZWQpe3JldHVybjt9XG50aGlzLnNldERpcmVjdGVkRWRnZXMoZGUwLGRlMSk7fTtFZGdlLnByb3RvdHlwZT1uZXcgR3JhcGhDb21wb25lbnQoKTtFZGdlLnByb3RvdHlwZS5kaXJFZGdlPW51bGw7RWRnZS5wcm90b3R5cGUuc2V0RGlyZWN0ZWRFZGdlcz1mdW5jdGlvbihkZTAsZGUxKXt0aGlzLmRpckVkZ2U9W2RlMCxkZTFdO2RlMC5zZXRFZGdlKHRoaXMpO2RlMS5zZXRFZGdlKHRoaXMpO2RlMC5zZXRTeW0oZGUxKTtkZTEuc2V0U3ltKGRlMCk7ZGUwLmdldEZyb21Ob2RlKCkuYWRkT3V0RWRnZShkZTApO2RlMS5nZXRGcm9tTm9kZSgpLmFkZE91dEVkZ2UoZGUxKTt9O0VkZ2UucHJvdG90eXBlLmdldERpckVkZ2U9ZnVuY3Rpb24oaSl7aWYoaSBpbnN0YW5jZW9mIGpzdHMucGxhbmFyZ3JhcGguTm9kZSl7dGhpcy5nZXREaXJFZGdlMihpKTt9XG5yZXR1cm4gdGhpcy5kaXJFZGdlW2ldO307RWRnZS5wcm90b3R5cGUuZ2V0RGlyRWRnZTI9ZnVuY3Rpb24oZnJvbU5vZGUpe2lmKHRoaXMuZGlyRWRnZVswXS5nZXRGcm9tTm9kZSgpPT1mcm9tTm9kZSlcbnJldHVybiB0aGlzLmRpckVkZ2VbMF07aWYodGhpcy5kaXJFZGdlWzFdLmdldEZyb21Ob2RlKCk9PWZyb21Ob2RlKVxucmV0dXJuIHRoaXMuZGlyRWRnZVsxXTtyZXR1cm4gbnVsbDt9O0VkZ2UucHJvdG90eXBlLmdldE9wcG9zaXRlTm9kZT1mdW5jdGlvbihub2RlKXtpZih0aGlzLmRpckVkZ2VbMF0uZ2V0RnJvbU5vZGUoKT09bm9kZSlcbnJldHVybiB0aGlzLmRpckVkZ2VbMF0uZ2V0VG9Ob2RlKCk7aWYodGhpcy5kaXJFZGdlWzFdLmdldEZyb21Ob2RlKCk9PW5vZGUpXG5yZXR1cm4gdGhpcy5kaXJFZGdlWzFdLmdldFRvTm9kZSgpO3JldHVybiBudWxsO307RWRnZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5kaXJFZGdlPW51bGw7fTtFZGdlLnByb3RvdHlwZS5pc1JlbW92ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZGlyRWRnZT09bnVsbDt9O2pzdHMucGxhbmFyZ3JhcGguRWRnZT1FZGdlO30pKCk7anN0cy5vcGVyYXRpb24ucG9seWdvbml6ZS5Qb2x5Z29uaXplRWRnZT1mdW5jdGlvbihsaW5lKXt0aGlzLmxpbmU9bGluZTt9O2pzdHMub3BlcmF0aW9uLnBvbHlnb25pemUuUG9seWdvbml6ZUVkZ2UucHJvdG90eXBlPW5ldyBqc3RzLnBsYW5hcmdyYXBoLkVkZ2UoKTtqc3RzLm9wZXJhdGlvbi5wb2x5Z29uaXplLlBvbHlnb25pemVFZGdlLnByb3RvdHlwZS5saW5lPW51bGw7anN0cy5vcGVyYXRpb24ucG9seWdvbml6ZS5Qb2x5Z29uaXplRWRnZS5wcm90b3R5cGUuZ2V0TGluZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmU7fTsoZnVuY3Rpb24oKXt2YXIgQXJyYXlMaXN0PWphdmFzY3JpcHQudXRpbC5BcnJheUxpc3Q7dmFyIEdyYXBoQ29tcG9uZW50PWpzdHMucGxhbmFyZ3JhcGguR3JhcGhDb21wb25lbnQ7dmFyIERpcmVjdGVkRWRnZT1mdW5jdGlvbihmcm9tLHRvLGRpcmVjdGlvblB0LGVkZ2VEaXJlY3Rpb24pe2lmKGZyb209PT11bmRlZmluZWQpe3JldHVybjt9XG50aGlzLmZyb209ZnJvbTt0aGlzLnRvPXRvO3RoaXMuZWRnZURpcmVjdGlvbj1lZGdlRGlyZWN0aW9uO3RoaXMucDA9ZnJvbS5nZXRDb29yZGluYXRlKCk7dGhpcy5wMT1kaXJlY3Rpb25QdDt2YXIgZHg9dGhpcy5wMS54LXRoaXMucDAueDt2YXIgZHk9dGhpcy5wMS55LXRoaXMucDAueTt0aGlzLnF1YWRyYW50PWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LnF1YWRyYW50KGR4LGR5KTt0aGlzLmFuZ2xlPU1hdGguYXRhbjIoZHksZHgpO307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZT1uZXcgR3JhcGhDb21wb25lbnQoKTtEaXJlY3RlZEVkZ2UudG9FZGdlcz1mdW5jdGlvbihkaXJFZGdlcyl7dmFyIGVkZ2VzPW5ldyBBcnJheUxpc3QoKTtmb3IodmFyIGk9ZGlyRWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe2VkZ2VzLmFkZCgoaS5uZXh0KCkpLnBhcmVudEVkZ2UpO31cbnJldHVybiBlZGdlczt9O0RpcmVjdGVkRWRnZS5wcm90b3R5cGUucGFyZW50RWRnZT1udWxsO0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuZnJvbT1udWxsO0RpcmVjdGVkRWRnZS5wcm90b3R5cGUudG89bnVsbDtEaXJlY3RlZEVkZ2UucHJvdG90eXBlLnAwPW51bGw7RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5wMT1udWxsO0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuc3ltPW51bGw7RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5lZGdlRGlyZWN0aW9uPW51bGw7RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5xdWFkcmFudD1udWxsO0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuYW5nbGU9bnVsbDtEaXJlY3RlZEVkZ2UucHJvdG90eXBlLmdldEVkZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnRFZGdlO307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5zZXRFZGdlPWZ1bmN0aW9uKHBhcmVudEVkZ2Upe3RoaXMucGFyZW50RWRnZT1wYXJlbnRFZGdlO307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXRRdWFkcmFudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnF1YWRyYW50O307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXREaXJlY3Rpb25QdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnAxO307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXRFZGdlRGlyZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZURpcmVjdGlvbjt9O0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuZ2V0RnJvbU5vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcm9tO307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXRUb05vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50bzt9O0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZyb20uZ2V0Q29vcmRpbmF0ZSgpO307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXRBbmdsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFuZ2xlO307RGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXRTeW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zeW07fTtEaXJlY3RlZEVkZ2UucHJvdG90eXBlLnNldFN5bT1mdW5jdGlvbihzeW0pe3RoaXMuc3ltPXN5bTt9O0RpcmVjdGVkRWRnZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5zeW09bnVsbDt0aGlzLnBhcmVudEVkZ2U9bnVsbDt9O0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuaXNSZW1vdmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50RWRnZT09bnVsbDt9O0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKG9iail7dmFyIGRlPW9iajtyZXR1cm4gdGhpcy5jb21wYXJlRGlyZWN0aW9uKGRlKTt9O0RpcmVjdGVkRWRnZS5wcm90b3R5cGUuY29tcGFyZURpcmVjdGlvbj1mdW5jdGlvbihlKXtpZih0aGlzLnF1YWRyYW50PmUucXVhZHJhbnQpXG5yZXR1cm4gMTtpZih0aGlzLnF1YWRyYW50PGUucXVhZHJhbnQpXG5yZXR1cm4tMTtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmNvbXB1dGVPcmllbnRhdGlvbihlLnAwLGUucDEsdGhpcy5wMSk7fTtqc3RzLnBsYW5hcmdyYXBoLkRpcmVjdGVkRWRnZT1EaXJlY3RlZEVkZ2U7fSkoKTsoZnVuY3Rpb24oKXt2YXIgRGlyZWN0ZWRFZGdlPWpzdHMucGxhbmFyZ3JhcGguRGlyZWN0ZWRFZGdlO3ZhciBQb2x5Z29uaXplRGlyZWN0ZWRFZGdlPWZ1bmN0aW9uKGZyb20sdG8sZGlyZWN0aW9uUHQsZWRnZURpcmVjdGlvbil7RGlyZWN0ZWRFZGdlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O1BvbHlnb25pemVEaXJlY3RlZEVkZ2UucHJvdG90eXBlPW5ldyBEaXJlY3RlZEVkZ2UoKTtQb2x5Z29uaXplRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5lZGdlUmluZz1udWxsO1BvbHlnb25pemVEaXJlY3RlZEVkZ2UucHJvdG90eXBlLm5leHQ9bnVsbDtQb2x5Z29uaXplRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5sYWJlbD0tMTtQb2x5Z29uaXplRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxhYmVsO307UG9seWdvbml6ZURpcmVjdGVkRWRnZS5wcm90b3R5cGUuc2V0TGFiZWw9ZnVuY3Rpb24obGFiZWwpe3RoaXMubGFiZWw9bGFiZWw7fTtQb2x5Z29uaXplRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXROZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dDt9O1BvbHlnb25pemVEaXJlY3RlZEVkZ2UucHJvdG90eXBlLnNldE5leHQ9ZnVuY3Rpb24obmV4dCl7dGhpcy5uZXh0PW5leHQ7fTtQb2x5Z29uaXplRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5pc0luUmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VSaW5nIT1udWxsO307UG9seWdvbml6ZURpcmVjdGVkRWRnZS5wcm90b3R5cGUuc2V0UmluZz1mdW5jdGlvbihlZGdlUmluZyl7dGhpcy5lZGdlUmluZz1lZGdlUmluZzt9O2pzdHMub3BlcmF0aW9uLnBvbHlnb25pemUuUG9seWdvbml6ZURpcmVjdGVkRWRnZT1Qb2x5Z29uaXplRGlyZWN0ZWRFZGdlO30pKCk7KGZ1bmN0aW9uKCl7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O3ZhciBEaXJlY3RlZEVkZ2VTdGFyPWZ1bmN0aW9uKCl7dGhpcy5vdXRFZGdlcz1uZXcgQXJyYXlMaXN0KCk7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5vdXRFZGdlcz1udWxsO0RpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLnNvcnRlZD1mYWxzZTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZGUpe3RoaXMub3V0RWRnZXMuYWRkKGRlKTt0aGlzLnNvcnRlZD1mYWxzZTt9O0RpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihkZSl7dGhpcy5vdXRFZGdlcy5yZW1vdmUoZGUpO307RGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUuaXRlcmF0b3I9ZnVuY3Rpb24oKXt0aGlzLnNvcnRFZGdlcygpO3JldHVybiB0aGlzLm91dEVkZ2VzLml0ZXJhdG9yKCk7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5nZXREZWdyZWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRFZGdlcy5zaXplKCk7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7dmFyIGl0PWl0ZXJhdG9yKCk7aWYoIWl0Lmhhc05leHQoKSlcbnJldHVybiBudWxsO3ZhciBlPWl0Lm5leHQoKTtyZXR1cm4gZS5nZXRDb29yZGluYXRlKCk7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5nZXRFZGdlcz1mdW5jdGlvbigpe3RoaXMuc29ydEVkZ2VzKCk7cmV0dXJuIHRoaXMub3V0RWRnZXM7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5zb3J0RWRnZXM9ZnVuY3Rpb24oKXtpZighdGhpcy5zb3J0ZWQpe3ZhciBhcnJheT10aGlzLm91dEVkZ2VzLnRvQXJyYXkoKTthcnJheS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29tcGFyZVRvKGIpO30pO3RoaXMub3V0RWRnZXM9amF2YXNjcmlwdC51dGlsLkFycmF5cy5hc0xpc3QoYXJyYXkpO3RoaXMuc29ydGVkPXRydWU7fX07RGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUuZ2V0SW5kZXg9ZnVuY3Rpb24oZWRnZSl7aWYoZWRnZSBpbnN0YW5jZW9mIGpzdHMucGxhbmFyZ3JhcGguRGlyZWN0ZWRFZGdlKXtyZXR1cm4gdGhpcy5nZXRJbmRleDIoZWRnZSk7fWVsc2UgaWYodHlwZW9mKGVkZ2UpPT09J251bWJlcicpe3JldHVybiB0aGlzLmdldEluZGV4MyhlZGdlKTt9XG50aGlzLnNvcnRFZGdlcygpO2Zvcih2YXIgaT0wO2k8dGhpcy5vdXRFZGdlcy5zaXplKCk7aSsrKXt2YXIgZGU9dGhpcy5vdXRFZGdlcy5nZXQoaSk7aWYoZGUuZ2V0RWRnZSgpPT1lZGdlKVxucmV0dXJuIGk7fVxucmV0dXJuLTE7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5nZXRJbmRleDI9ZnVuY3Rpb24oZGlyRWRnZSl7dGhpcy5zb3J0RWRnZXMoKTtmb3IodmFyIGk9MDtpPHRoaXMub3V0RWRnZXMuc2l6ZSgpO2krKyl7dmFyIGRlPXRoaXMub3V0RWRnZXMuZ2V0KGkpO2lmKGRlPT1kaXJFZGdlKVxucmV0dXJuIGk7fVxucmV0dXJuLTE7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5nZXRJbmRleDM9ZnVuY3Rpb24oaSl7dmFyIG1vZGk9dG9JbnQoaSV0aGlzLm91dEVkZ2VzLnNpemUoKSk7aWYobW9kaTwwKVxubW9kaSs9dGhpcy5vdXRFZGdlcy5zaXplKCk7cmV0dXJuIG1vZGk7fTtEaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5nZXROZXh0RWRnZT1mdW5jdGlvbihkaXJFZGdlKXt2YXIgaT10aGlzLmdldEluZGV4KGRpckVkZ2UpO3JldHVybiB0aGlzLm91dEVkZ2VzLmdldChnZXRJbmRleChpKzEpKTt9O0RpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLmdldE5leHRDV0VkZ2U9ZnVuY3Rpb24oZGlyRWRnZSl7dmFyIGk9dGhpcy5nZXRJbmRleChkaXJFZGdlKTtyZXR1cm4gdGhpcy5vdXRFZGdlcy5nZXQoZ2V0SW5kZXgoaS0xKSk7fTtqc3RzLnBsYW5hcmdyYXBoLkRpcmVjdGVkRWRnZVN0YXI9RGlyZWN0ZWRFZGdlU3Rhcjt9KSgpOyhmdW5jdGlvbigpe3ZhciBHcmFwaENvbXBvbmVudD1qc3RzLnBsYW5hcmdyYXBoLkdyYXBoQ29tcG9uZW50O3ZhciBEaXJlY3RlZEVkZ2VTdGFyPWpzdHMucGxhbmFyZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhcjt2YXIgTm9kZT1mdW5jdGlvbihwdCxkZVN0YXIpe3RoaXMucHQ9cHQ7dGhpcy5kZVN0YXI9ZGVTdGFyfHxuZXcgRGlyZWN0ZWRFZGdlU3RhcigpO307Tm9kZS5wcm90b3R5cGU9bmV3IEdyYXBoQ29tcG9uZW50KCk7Tm9kZS5nZXRFZGdlc0JldHdlZW49ZnVuY3Rpb24obm9kZTAsbm9kZTEpe3ZhciBlZGdlczA9RGlyZWN0ZWRFZGdlLnRvRWRnZXMobm9kZTAuZ2V0T3V0RWRnZXMoKS5nZXRFZGdlcygpKTt2YXIgY29tbW9uRWRnZXM9bmV3IGphdmFzY3JpcHQudXRpbC5IYXNoU2V0KGVkZ2VzMCk7dmFyIGVkZ2VzMT1EaXJlY3RlZEVkZ2UudG9FZGdlcyhub2RlMS5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCkpO2NvbW1vbkVkZ2VzLnJldGFpbkFsbChlZGdlczEpO3JldHVybiBjb21tb25FZGdlczt9O05vZGUucHJvdG90eXBlLnB0PW51bGw7Tm9kZS5wcm90b3R5cGUuZGVTdGFyPW51bGw7Tm9kZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0O307Tm9kZS5wcm90b3R5cGUuYWRkT3V0RWRnZT1mdW5jdGlvbihkZSl7dGhpcy5kZVN0YXIuYWRkKGRlKTt9O05vZGUucHJvdG90eXBlLmdldE91dEVkZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVTdGFyO307Tm9kZS5wcm90b3R5cGUuZ2V0RGVncmVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVTdGFyLmdldERlZ3JlZSgpO307Tm9kZS5wcm90b3R5cGUuZ2V0SW5kZXg9ZnVuY3Rpb24oZWRnZSl7cmV0dXJuIHRoaXMuZGVTdGFyLmdldEluZGV4KGVkZ2UpO307Tm9kZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGRlKXtpZihkZT09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMucmVtb3ZlMigpO31cbnRoaXMuZGVTdGFyLnJlbW92ZShkZSk7fTtOb2RlLnByb3RvdHlwZS5yZW1vdmUyPWZ1bmN0aW9uKCl7dGhpcy5wdD1udWxsO307Tm9kZS5wcm90b3R5cGUuaXNSZW1vdmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHQ9PW51bGw7fTtqc3RzLnBsYW5hcmdyYXBoLk5vZGU9Tm9kZTt9KSgpOyhmdW5jdGlvbigpe3ZhciBOb2RlTWFwPWZ1bmN0aW9uKCl7dGhpcy5ub2RlTWFwPW5ldyBqYXZhc2NyaXB0LnV0aWwuVHJlZU1hcCgpO307Tm9kZU1hcC5wcm90b3R5cGUubm9kZU1hcD1udWxsO05vZGVNYXAucHJvdG90eXBlLmFkZD1mdW5jdGlvbihuKXt0aGlzLm5vZGVNYXAucHV0KG4uZ2V0Q29vcmRpbmF0ZSgpLG4pO3JldHVybiBuO307Tm9kZU1hcC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHB0KXtyZXR1cm4gdGhpcy5ub2RlTWFwLnJlbW92ZShwdCk7fTtOb2RlTWFwLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKGNvb3JkKXtyZXR1cm4gdGhpcy5ub2RlTWFwLmdldChjb29yZCk7fTtOb2RlTWFwLnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKTt9O05vZGVNYXAucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCk7fTtqc3RzLnBsYW5hcmdyYXBoLk5vZGVNYXA9Tm9kZU1hcDt9KSgpOyhmdW5jdGlvbigpe3ZhciBBcnJheUxpc3Q9amF2YXNjcmlwdC51dGlsLkFycmF5TGlzdDt2YXIgUGxhbmFyR3JhcGg9ZnVuY3Rpb24oKXt0aGlzLmVkZ2VzPW5ldyBqYXZhc2NyaXB0LnV0aWwuSGFzaFNldCgpO3RoaXMuZGlyRWRnZXM9bmV3IGphdmFzY3JpcHQudXRpbC5IYXNoU2V0KCk7dGhpcy5ub2RlTWFwPW5ldyBqc3RzLnBsYW5hcmdyYXBoLk5vZGVNYXAoKTt9O1BsYW5hckdyYXBoLnByb3RvdHlwZS5lZGdlcz1udWxsO1BsYW5hckdyYXBoLnByb3RvdHlwZS5kaXJFZGdlcz1udWxsO1BsYW5hckdyYXBoLnByb3RvdHlwZS5ub2RlTWFwPW51bGw7UGxhbmFyR3JhcGgucHJvdG90eXBlLmZpbmROb2RlPWZ1bmN0aW9uKHB0KXtyZXR1cm4gdGhpcy5ub2RlTWFwLmZpbmQocHQpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmFkZD1mdW5jdGlvbihub2RlKXtpZihub2RlIGluc3RhbmNlb2YganN0cy5wbGFuYXJncmFwaC5FZGdlKXtyZXR1cm4gdGhpcy5hZGQyKG5vZGUpO31lbHNlIGlmKG5vZGUgaW5zdGFuY2VvZiBqc3RzLnBsYW5hcmdyYXBoLkRpcmVjdGVkRWRnZSl7cmV0dXJuIHRoaXMuYWRkMyhub2RlKTt9XG50aGlzLm5vZGVNYXAuYWRkKG5vZGUpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmFkZDI9ZnVuY3Rpb24oZWRnZSl7dGhpcy5lZGdlcy5hZGQoZWRnZSk7dGhpcy5hZGQoZWRnZS5nZXREaXJFZGdlKDApKTt0aGlzLmFkZChlZGdlLmdldERpckVkZ2UoMSkpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmFkZDM9ZnVuY3Rpb24oZGlyRWRnZSl7dGhpcy5kaXJFZGdlcy5hZGQoZGlyRWRnZSk7fTtQbGFuYXJHcmFwaC5wcm90b3R5cGUubm9kZUl0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZU1hcC5pdGVyYXRvcigpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBqc3RzLnBsYW5hcmdyYXBoLkRpcmVjdGVkRWRnZSl7cmV0dXJuIHRoaXMuY29udGFpbnMyKGUpO31cbnJldHVybiB0aGlzLmVkZ2VzLmNvbnRhaW5zKGUpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmNvbnRhaW5zMj1mdW5jdGlvbihkZSl7cmV0dXJuIHRoaXMuZGlyRWRnZXMuY29udGFpbnMoZGUpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmdldE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZU1hcC52YWx1ZXMoKTt9O1BsYW5hckdyYXBoLnByb3RvdHlwZS5kaXJFZGdlSXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJFZGdlcy5pdGVyYXRvcigpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmVkZ2VJdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzLml0ZXJhdG9yKCk7fTtQbGFuYXJHcmFwaC5wcm90b3R5cGUuZ2V0RWRnZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlczt9O1BsYW5hckdyYXBoLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZWRnZSl7aWYoZWRnZSBpbnN0YW5jZW9mIGpzdHMucGxhbmFyZ3JhcGguRGlyZWN0ZWRFZGdlKXtyZXR1cm4gdGhpcy5yZW1vdmUyKGVkZ2UpO31cbnRoaXMucmVtb3ZlKGVkZ2UuZ2V0RGlyRWRnZSgwKSk7dGhpcy5yZW1vdmUoZWRnZS5nZXREaXJFZGdlKDEpKTt0aGlzLmVkZ2VzLnJlbW92ZShlZGdlKTt0aGlzLmVkZ2UucmVtb3ZlKCk7fTtQbGFuYXJHcmFwaC5wcm90b3R5cGUucmVtb3ZlMj1mdW5jdGlvbihkZSl7aWYoZGUgaW5zdGFuY2VvZiBqc3RzLnBsYW5hcmdyYXBoLk5vZGUpe3JldHVybiB0aGlzLnJlbW92ZTMoZGUpO31cbnZhciBzeW09ZGUuZ2V0U3ltKCk7aWYoc3ltIT1udWxsKVxuc3ltLnNldFN5bShudWxsKTtkZS5nZXRGcm9tTm9kZSgpLnJlbW92ZShkZSk7ZGUucmVtb3ZlKCk7dGhpcy5kaXJFZGdlcy5yZW1vdmUoZGUpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLnJlbW92ZTM9ZnVuY3Rpb24obm9kZSl7dmFyIG91dEVkZ2VzPW5vZGUuZ2V0T3V0RWRnZXMoKS5nZXRFZGdlcygpO2Zvcih2YXIgaT1vdXRFZGdlcy5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGRlPWkubmV4dCgpO3ZhciBzeW09ZGUuZ2V0U3ltKCk7aWYoc3ltIT1udWxsKVxudGhpcy5yZW1vdmUoc3ltKTt0aGlzLmRpckVkZ2VzLnJlbW92ZShkZSk7dmFyIGVkZ2U9ZGUuZ2V0RWRnZSgpO2lmKGVkZ2UhPW51bGwpe3RoaXMuZWRnZXMucmVtb3ZlKGVkZ2UpO319XG50aGlzLm5vZGVNYXAucmVtb3ZlKG5vZGUuZ2V0Q29vcmRpbmF0ZSgpKTtub2RlLnJlbW92ZSgpO307UGxhbmFyR3JhcGgucHJvdG90eXBlLmZpbmROb2Rlc09mRGVncmVlPWZ1bmN0aW9uKGRlZ3JlZSl7dmFyIG5vZGVzRm91bmQ9bmV3IEFycmF5TGlzdCgpO2Zvcih2YXIgaT10aGlzLm5vZGVJdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIG5vZGU9aS5uZXh0KCk7aWYobm9kZS5nZXREZWdyZWUoKT09ZGVncmVlKVxubm9kZXNGb3VuZC5hZGQobm9kZSk7fVxucmV0dXJuIG5vZGVzRm91bmQ7fTtqc3RzLnBsYW5hcmdyYXBoLlBsYW5hckdyYXBoPVBsYW5hckdyYXBoO30pKCk7KGZ1bmN0aW9uKCl7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O3ZhciBTdGFjaz1qYXZhc2NyaXB0LnV0aWwuU3RhY2s7dmFyIEhhc2hTZXQ9amF2YXNjcmlwdC51dGlsLkhhc2hTZXQ7dmFyIEFzc2VydD1qc3RzLnV0aWwuQXNzZXJ0O3ZhciBFZGdlUmluZz1qc3RzLm9wZXJhdGlvbi5wb2x5Z29uaXplLkVkZ2VSaW5nO3ZhciBQb2x5Z29uaXplRWRnZT1qc3RzLm9wZXJhdGlvbi5wb2x5Z29uaXplLlBvbHlnb25pemVFZGdlO3ZhciBQb2x5Z29uaXplRGlyZWN0ZWRFZGdlPWpzdHMub3BlcmF0aW9uLnBvbHlnb25pemUuUG9seWdvbml6ZURpcmVjdGVkRWRnZTt2YXIgUGxhbmFyR3JhcGg9anN0cy5wbGFuYXJncmFwaC5QbGFuYXJHcmFwaDt2YXIgTm9kZT1qc3RzLnBsYW5hcmdyYXBoLk5vZGU7dmFyIFBvbHlnb25pemVHcmFwaD1mdW5jdGlvbihmYWN0b3J5KXtQbGFuYXJHcmFwaC5hcHBseSh0aGlzKTt0aGlzLmZhY3Rvcnk9ZmFjdG9yeTt9O1BvbHlnb25pemVHcmFwaC5wcm90b3R5cGU9bmV3IFBsYW5hckdyYXBoKCk7UG9seWdvbml6ZUdyYXBoLmdldERlZ3JlZU5vbkRlbGV0ZWQ9ZnVuY3Rpb24obm9kZSl7dmFyIGVkZ2VzPW5vZGUuZ2V0T3V0RWRnZXMoKS5nZXRFZGdlcygpO3ZhciBkZWdyZWU9MDtmb3IodmFyIGk9ZWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBkZT1pLm5leHQoKTtpZighZGUuaXNNYXJrZWQoKSlcbmRlZ3JlZSsrO31cbnJldHVybiBkZWdyZWU7fTtQb2x5Z29uaXplR3JhcGguZ2V0RGVncmVlPWZ1bmN0aW9uKG5vZGUsbGFiZWwpe3ZhciBlZGdlcz1ub2RlLmdldE91dEVkZ2VzKCkuZ2V0RWRnZXMoKTt2YXIgZGVncmVlPTA7Zm9yKHZhciBpPWVkZ2VzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZGU9aS5uZXh0KCk7aWYoZGUuZ2V0TGFiZWwoKT09bGFiZWwpXG5kZWdyZWUrKzt9XG5yZXR1cm4gZGVncmVlO307UG9seWdvbml6ZUdyYXBoLmRlbGV0ZUFsbEVkZ2VzPWZ1bmN0aW9uKG5vZGUpe3ZhciBlZGdlcz1ub2RlLmdldE91dEVkZ2VzKCkuZ2V0RWRnZXMoKTtmb3IodmFyIGk9ZWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBkZT1pLm5leHQoKTtkZS5zZXRNYXJrZWQodHJ1ZSk7dmFyIHN5bT1kZS5nZXRTeW0oKTtpZihzeW0hPW51bGwpXG5zeW0uc2V0TWFya2VkKHRydWUpO319O1BvbHlnb25pemVHcmFwaC5wcm90b3R5cGUuZmFjdG9yeT1udWxsO1BvbHlnb25pemVHcmFwaC5wcm90b3R5cGUuYWRkRWRnZT1mdW5jdGlvbihsaW5lKXtpZihsaW5lLmlzRW1wdHkoKSl7cmV0dXJuO31cbnZhciBsaW5lUHRzPWpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnJlbW92ZVJlcGVhdGVkUG9pbnRzKGxpbmUuZ2V0Q29vcmRpbmF0ZXMoKSk7aWYobGluZVB0cy5sZW5ndGg8Mil7cmV0dXJuO31cbnZhciBzdGFydFB0PWxpbmVQdHNbMF07dmFyIGVuZFB0PWxpbmVQdHNbbGluZVB0cy5sZW5ndGgtMV07dmFyIG5TdGFydD10aGlzLmdldE5vZGUoc3RhcnRQdCk7dmFyIG5FbmQ9dGhpcy5nZXROb2RlKGVuZFB0KTt2YXIgZGUwPW5ldyBQb2x5Z29uaXplRGlyZWN0ZWRFZGdlKG5TdGFydCxuRW5kLGxpbmVQdHNbMV0sdHJ1ZSk7dmFyIGRlMT1uZXcgUG9seWdvbml6ZURpcmVjdGVkRWRnZShuRW5kLG5TdGFydCxsaW5lUHRzW2xpbmVQdHMubGVuZ3RoLTJdLGZhbHNlKTt2YXIgZWRnZT1uZXcgUG9seWdvbml6ZUVkZ2UobGluZSk7ZWRnZS5zZXREaXJlY3RlZEVkZ2VzKGRlMCxkZTEpO3RoaXMuYWRkKGVkZ2UpO307UG9seWdvbml6ZUdyYXBoLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKHB0KXt2YXIgbm9kZT10aGlzLmZpbmROb2RlKHB0KTtpZihub2RlPT1udWxsKXtub2RlPW5ldyBOb2RlKHB0KTt0aGlzLmFkZChub2RlKTt9XG5yZXR1cm4gbm9kZTt9O1BvbHlnb25pemVHcmFwaC5wcm90b3R5cGUuY29tcHV0ZU5leHRDV0VkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciBpTm9kZT10aGlzLm5vZGVJdGVyYXRvcigpO2lOb2RlLmhhc05leHQoKTspe3ZhciBub2RlPWlOb2RlLm5leHQoKTtQb2x5Z29uaXplR3JhcGguY29tcHV0ZU5leHRDV0VkZ2VzKG5vZGUpO319O1BvbHlnb25pemVHcmFwaC5wcm90b3R5cGUuY29udmVydE1heGltYWxUb01pbmltYWxFZGdlUmluZ3M9ZnVuY3Rpb24ocmluZ0VkZ2VzKXtmb3IodmFyIGk9cmluZ0VkZ2VzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZGU9aS5uZXh0KCk7dmFyIGxhYmVsPWRlLmdldExhYmVsKCk7dmFyIGludE5vZGVzPVBvbHlnb25pemVHcmFwaC5maW5kSW50ZXJzZWN0aW9uTm9kZXMoZGUsbGFiZWwpO2lmKGludE5vZGVzPT1udWxsKVxuY29udGludWU7Zm9yKHZhciBpTm9kZT1pbnROb2Rlcy5pdGVyYXRvcigpO2lOb2RlLmhhc05leHQoKTspe3ZhciBub2RlPWlOb2RlLm5leHQoKTtQb2x5Z29uaXplR3JhcGguY29tcHV0ZU5leHRDQ1dFZGdlcyhub2RlLGxhYmVsKTt9fX07UG9seWdvbml6ZUdyYXBoLmZpbmRJbnRlcnNlY3Rpb25Ob2Rlcz1mdW5jdGlvbihzdGFydERFLGxhYmVsKXt2YXIgZGU9c3RhcnRERTt2YXIgaW50Tm9kZXM9bnVsbDtkb3t2YXIgbm9kZT1kZS5nZXRGcm9tTm9kZSgpO2lmKFBvbHlnb25pemVHcmFwaC5nZXREZWdyZWUobm9kZSxsYWJlbCk+MSl7aWYoaW50Tm9kZXM9PW51bGwpXG5pbnROb2Rlcz1uZXcgQXJyYXlMaXN0KCk7aW50Tm9kZXMuYWRkKG5vZGUpO31cbmRlPWRlLmdldE5leHQoKTtBc3NlcnQuaXNUcnVlKGRlIT1udWxsLCdmb3VuZCBudWxsIERFIGluIHJpbmcnKTtBc3NlcnQuaXNUcnVlKGRlPT1zdGFydERFfHwhZGUuaXNJblJpbmcoKSwnZm91bmQgREUgYWxyZWFkeSBpbiByaW5nJyk7fXdoaWxlKGRlIT1zdGFydERFKTtyZXR1cm4gaW50Tm9kZXM7fTtQb2x5Z29uaXplR3JhcGgucHJvdG90eXBlLmdldEVkZ2VSaW5ncz1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZU5leHRDV0VkZ2VzKCk7UG9seWdvbml6ZUdyYXBoLmxhYmVsKHRoaXMuZGlyRWRnZXMsLTEpO3ZhciBtYXhpbWFsUmluZ3M9UG9seWdvbml6ZUdyYXBoLmZpbmRMYWJlbGVkRWRnZVJpbmdzKHRoaXMuZGlyRWRnZXMpO3RoaXMuY29udmVydE1heGltYWxUb01pbmltYWxFZGdlUmluZ3MobWF4aW1hbFJpbmdzKTt2YXIgZWRnZVJpbmdMaXN0PW5ldyBBcnJheUxpc3QoKTtmb3IodmFyIGk9dGhpcy5kaXJFZGdlcy5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGRlPWkubmV4dCgpO2lmKGRlLmlzTWFya2VkKCkpXG5jb250aW51ZTtpZihkZS5pc0luUmluZygpKVxuY29udGludWU7dmFyIGVyPXRoaXMuZmluZEVkZ2VSaW5nKGRlKTtlZGdlUmluZ0xpc3QuYWRkKGVyKTt9XG5yZXR1cm4gZWRnZVJpbmdMaXN0O307UG9seWdvbml6ZUdyYXBoLmZpbmRMYWJlbGVkRWRnZVJpbmdzPWZ1bmN0aW9uKGRpckVkZ2VzKXt2YXIgZWRnZVJpbmdTdGFydHM9bmV3IEFycmF5TGlzdCgpO3ZhciBjdXJyTGFiZWw9MTtmb3IodmFyIGk9ZGlyRWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBkZT1pLm5leHQoKTtpZihkZS5pc01hcmtlZCgpKVxuY29udGludWU7aWYoZGUuZ2V0TGFiZWwoKT49MClcbmNvbnRpbnVlO2VkZ2VSaW5nU3RhcnRzLmFkZChkZSk7dmFyIGVkZ2VzPVBvbHlnb25pemVHcmFwaC5maW5kRGlyRWRnZXNJblJpbmcoZGUpO1BvbHlnb25pemVHcmFwaC5sYWJlbChlZGdlcyxjdXJyTGFiZWwpO2N1cnJMYWJlbCsrO31cbnJldHVybiBlZGdlUmluZ1N0YXJ0czt9O1BvbHlnb25pemVHcmFwaC5wcm90b3R5cGUuZGVsZXRlQ3V0RWRnZXM9ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVOZXh0Q1dFZGdlcygpO1BvbHlnb25pemVHcmFwaC5maW5kTGFiZWxlZEVkZ2VSaW5ncyh0aGlzLmRpckVkZ2VzKTt2YXIgY3V0TGluZXM9bmV3IEFycmF5TGlzdCgpO2Zvcih2YXIgaT10aGlzLmRpckVkZ2VzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZGU9aS5uZXh0KCk7aWYoZGUuaXNNYXJrZWQoKSlcbmNvbnRpbnVlO3ZhciBzeW09ZGUuZ2V0U3ltKCk7aWYoZGUuZ2V0TGFiZWwoKT09c3ltLmdldExhYmVsKCkpe2RlLnNldE1hcmtlZCh0cnVlKTtzeW0uc2V0TWFya2VkKHRydWUpO3ZhciBlPWRlLmdldEVkZ2UoKTtjdXRMaW5lcy5hZGQoZS5nZXRMaW5lKCkpO319XG5yZXR1cm4gY3V0TGluZXM7fTtQb2x5Z29uaXplR3JhcGgubGFiZWw9ZnVuY3Rpb24oZGlyRWRnZXMsbGFiZWwpe2Zvcih2YXIgaT1kaXJFZGdlcy5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGRlPWkubmV4dCgpO2RlLnNldExhYmVsKGxhYmVsKTt9fTtQb2x5Z29uaXplR3JhcGguY29tcHV0ZU5leHRDV0VkZ2VzPWZ1bmN0aW9uKG5vZGUpe3ZhciBkZVN0YXI9bm9kZS5nZXRPdXRFZGdlcygpO3ZhciBzdGFydERFPW51bGw7dmFyIHByZXZERT1udWxsO2Zvcih2YXIgaT1kZVN0YXIuZ2V0RWRnZXMoKS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIG91dERFPWkubmV4dCgpO2lmKG91dERFLmlzTWFya2VkKCkpXG5jb250aW51ZTtpZihzdGFydERFPT1udWxsKVxuc3RhcnRERT1vdXRERTtpZihwcmV2REUhPW51bGwpe3ZhciBzeW09cHJldkRFLmdldFN5bSgpO3N5bS5zZXROZXh0KG91dERFKTt9XG5wcmV2REU9b3V0REU7fVxuaWYocHJldkRFIT1udWxsKXt2YXIgc3ltPXByZXZERS5nZXRTeW0oKTtzeW0uc2V0TmV4dChzdGFydERFKTt9fTtQb2x5Z29uaXplR3JhcGguY29tcHV0ZU5leHRDQ1dFZGdlcz1mdW5jdGlvbihub2RlLGxhYmVsKXt2YXIgZGVTdGFyPW5vZGUuZ2V0T3V0RWRnZXMoKTt2YXIgZmlyc3RPdXRERT1udWxsO3ZhciBwcmV2SW5ERT1udWxsO3ZhciBlZGdlcz1kZVN0YXIuZ2V0RWRnZXMoKTtmb3IodmFyIGk9ZWRnZXMuc2l6ZSgpLTE7aT49MDtpLS0pe3ZhciBkZT1lZGdlcy5nZXQoaSk7dmFyIHN5bT1kZS5nZXRTeW0oKTt2YXIgb3V0REU9bnVsbDtpZihkZS5nZXRMYWJlbCgpPT1sYWJlbClcbm91dERFPWRlO3ZhciBpbkRFPW51bGw7aWYoc3ltLmdldExhYmVsKCk9PWxhYmVsKVxuaW5ERT1zeW07aWYob3V0REU9PW51bGwmJmluREU9PW51bGwpXG5jb250aW51ZTtpZihpbkRFIT1udWxsKXtwcmV2SW5ERT1pbkRFO31cbmlmKG91dERFIT1udWxsKXtpZihwcmV2SW5ERSE9bnVsbCl7cHJldkluREUuc2V0TmV4dChvdXRERSk7cHJldkluREU9bnVsbDt9XG5pZihmaXJzdE91dERFPT1udWxsKVxuZmlyc3RPdXRERT1vdXRERTt9fVxuaWYocHJldkluREUhPW51bGwpe0Fzc2VydC5pc1RydWUoZmlyc3RPdXRERSE9bnVsbCk7cHJldkluREUuc2V0TmV4dChmaXJzdE91dERFKTt9fTtQb2x5Z29uaXplR3JhcGguZmluZERpckVkZ2VzSW5SaW5nPWZ1bmN0aW9uKHN0YXJ0REUpe3ZhciBkZT1zdGFydERFO3ZhciBlZGdlcz1uZXcgQXJyYXlMaXN0KCk7ZG97ZWRnZXMuYWRkKGRlKTtkZT1kZS5nZXROZXh0KCk7QXNzZXJ0LmlzVHJ1ZShkZSE9bnVsbCwnZm91bmQgbnVsbCBERSBpbiByaW5nJyk7QXNzZXJ0LmlzVHJ1ZShkZT09c3RhcnRERXx8IWRlLmlzSW5SaW5nKCksJ2ZvdW5kIERFIGFscmVhZHkgaW4gcmluZycpO313aGlsZShkZSE9c3RhcnRERSk7cmV0dXJuIGVkZ2VzO307UG9seWdvbml6ZUdyYXBoLnByb3RvdHlwZS5maW5kRWRnZVJpbmc9ZnVuY3Rpb24oc3RhcnRERSl7dmFyIGRlPXN0YXJ0REU7dmFyIGVyPW5ldyBFZGdlUmluZyh0aGlzLmZhY3RvcnkpO2Rve2VyLmFkZChkZSk7ZGUuc2V0UmluZyhlcik7ZGU9ZGUuZ2V0TmV4dCgpO0Fzc2VydC5pc1RydWUoZGUhPW51bGwsJ2ZvdW5kIG51bGwgREUgaW4gcmluZycpO0Fzc2VydC5pc1RydWUoZGU9PXN0YXJ0REV8fCFkZS5pc0luUmluZygpLCdmb3VuZCBERSBhbHJlYWR5IGluIHJpbmcnKTt9d2hpbGUoZGUhPXN0YXJ0REUpO3JldHVybiBlcjt9O1BvbHlnb25pemVHcmFwaC5wcm90b3R5cGUuZGVsZXRlRGFuZ2xlcz1mdW5jdGlvbigpe3ZhciBub2Rlc1RvUmVtb3ZlPXRoaXMuZmluZE5vZGVzT2ZEZWdyZWUoMSk7dmFyIGRhbmdsZUxpbmVzPW5ldyBIYXNoU2V0KCk7dmFyIG5vZGVTdGFjaz1uZXcgU3RhY2soKTtmb3IodmFyIGk9bm9kZXNUb1JlbW92ZS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7bm9kZVN0YWNrLnB1c2goaS5uZXh0KCkpO31cbndoaWxlKCFub2RlU3RhY2suaXNFbXB0eSgpKXt2YXIgbm9kZT1ub2RlU3RhY2sucG9wKCk7UG9seWdvbml6ZUdyYXBoLmRlbGV0ZUFsbEVkZ2VzKG5vZGUpO3ZhciBub2RlT3V0RWRnZXM9bm9kZS5nZXRPdXRFZGdlcygpLmdldEVkZ2VzKCk7Zm9yKHZhciBpPW5vZGVPdXRFZGdlcy5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGRlPWkubmV4dCgpO2RlLnNldE1hcmtlZCh0cnVlKTt2YXIgc3ltPWRlLmdldFN5bSgpO2lmKHN5bSE9bnVsbClcbnN5bS5zZXRNYXJrZWQodHJ1ZSk7dmFyIGU9ZGUuZ2V0RWRnZSgpO2RhbmdsZUxpbmVzLmFkZChlLmdldExpbmUoKSk7dmFyIHRvTm9kZT1kZS5nZXRUb05vZGUoKTtpZihQb2x5Z29uaXplR3JhcGguZ2V0RGVncmVlTm9uRGVsZXRlZCh0b05vZGUpPT0xKVxubm9kZVN0YWNrLnB1c2godG9Ob2RlKTt9fVxucmV0dXJuIGRhbmdsZUxpbmVzO307UG9seWdvbml6ZUdyYXBoLnByb3RvdHlwZS5jb21wdXRlRGVwdGhQYXJpdHk9ZnVuY3Rpb24oKXt3aGlsZSh0cnVlKXt2YXIgZGU9bnVsbDtpZihkZT09bnVsbClcbnJldHVybjt0aGlzLmNvbXB1dGVEZXB0aFBhcml0eShkZSk7fX07UG9seWdvbml6ZUdyYXBoLnByb3RvdHlwZS5jb21wdXRlRGVwdGhQYXJpdHk9ZnVuY3Rpb24oZGUpe307anN0cy5vcGVyYXRpb24ucG9seWdvbml6ZS5Qb2x5Z29uaXplR3JhcGg9UG9seWdvbml6ZUdyYXBoO30pKCk7anN0cy5pbmRleC5zdHJ0cmVlLkludGVydmFsPWZ1bmN0aW9uKCl7dmFyIG90aGVyO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtvdGhlcj1hcmd1bWVudHNbMF07cmV0dXJuIGpzdHMuaW5kZXguc3RydHJlZS5JbnRlcnZhbChvdGhlci5taW4sb3RoZXIubWF4KTt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09Mil7anN0cy51dGlsLkFzc2VydC5pc1RydWUodGhpcy5taW48PXRoaXMubWF4KTt0aGlzLm1pbj1hcmd1bWVudHNbMF07dGhpcy5tYXg9YXJndW1lbnRzWzFdO319O2pzdHMuaW5kZXguc3RydHJlZS5JbnRlcnZhbC5wcm90b3R5cGUubWluPW51bGw7anN0cy5pbmRleC5zdHJ0cmVlLkludGVydmFsLnByb3RvdHlwZS5tYXg9bnVsbDtqc3RzLmluZGV4LnN0cnRyZWUuSW50ZXJ2YWwucHJvdG90eXBlLmdldENlbnRyZT1mdW5jdGlvbigpe3JldHVybih0aGlzLm1pbit0aGlzLm1heCkvMjt9O2pzdHMuaW5kZXguc3RydHJlZS5JbnRlcnZhbC5wcm90b3R5cGUuZXhwYW5kVG9JbmNsdWRlPWZ1bmN0aW9uKG90aGVyKXt0aGlzLm1heD1NYXRoLm1heCh0aGlzLm1heCxvdGhlci5tYXgpO3RoaXMubWluPU1hdGgubWluKHRoaXMubWluLG90aGVyLm1pbik7cmV0dXJuIHRoaXM7fTtqc3RzLmluZGV4LnN0cnRyZWUuSW50ZXJ2YWwucHJvdG90eXBlLmludGVyc2VjdHM9ZnVuY3Rpb24ob3RoZXIpe3JldHVybiEob3RoZXIubWluPnRoaXMubWF4fHxvdGhlci5tYXg8dGhpcy5taW4pO307anN0cy5pbmRleC5zdHJ0cmVlLkludGVydmFsLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24obyl7aWYoIShvIGluc3RhbmNlb2YganN0cy5pbmRleC5zdHJ0cmVlLkludGVydmFsKSl7cmV0dXJuIGZhbHNlO31cbm90aGVyPW87cmV0dXJuIHRoaXMubWluPT09b3RoZXIubWluJiZ0aGlzLm1heD09PW90aGVyLm1heDt9O2pzdHMuZ2VvbS5HZW9tZXRyeUZhY3Rvcnk9ZnVuY3Rpb24ocHJlY2lzaW9uTW9kZWwpe3RoaXMucHJlY2lzaW9uTW9kZWw9cHJlY2lzaW9uTW9kZWx8fG5ldyBqc3RzLmdlb20uUHJlY2lzaW9uTW9kZWwoKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeUZhY3RvcnkucHJvdG90eXBlLnByZWNpc2lvbk1vZGVsPW51bGw7anN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeS5wcm90b3R5cGUuZ2V0UHJlY2lzaW9uTW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmVjaXNpb25Nb2RlbDt9O2pzdHMuZ2VvbS5HZW9tZXRyeUZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZVBvaW50PWZ1bmN0aW9uKGNvb3JkaW5hdGUpe3ZhciBwb2ludD1uZXcganN0cy5nZW9tLlBvaW50KGNvb3JkaW5hdGUsdGhpcyk7cmV0dXJuIHBvaW50O307anN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlTGluZVN0cmluZz1mdW5jdGlvbihjb29yZGluYXRlcyl7dmFyIGxpbmVTdHJpbmc9bmV3IGpzdHMuZ2VvbS5MaW5lU3RyaW5nKGNvb3JkaW5hdGVzLHRoaXMpO3JldHVybiBsaW5lU3RyaW5nO307anN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlTGluZWFyUmluZz1mdW5jdGlvbihjb29yZGluYXRlcyl7dmFyIGxpbmVhclJpbmc9bmV3IGpzdHMuZ2VvbS5MaW5lYXJSaW5nKGNvb3JkaW5hdGVzLHRoaXMpO3JldHVybiBsaW5lYXJSaW5nO307anN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlUG9seWdvbj1mdW5jdGlvbihzaGVsbCxob2xlcyl7dmFyIHBvbHlnb249bmV3IGpzdHMuZ2VvbS5Qb2x5Z29uKHNoZWxsLGhvbGVzLHRoaXMpO3JldHVybiBwb2x5Z29uO307anN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlTXVsdGlQb2ludD1mdW5jdGlvbihwb2ludHMpe2lmKHBvaW50cyYmcG9pbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7dmFyIGNvbnZlcnRlZD1bXTt2YXIgaTtmb3IoaT0wO2k8cG9pbnRzLmxlbmd0aDtpKyspe2NvbnZlcnRlZC5wdXNoKHRoaXMuY3JlYXRlUG9pbnQocG9pbnRzW2ldKSk7fVxucG9pbnRzPWNvbnZlcnRlZDt9XG5yZXR1cm4gbmV3IGpzdHMuZ2VvbS5NdWx0aVBvaW50KHBvaW50cyx0aGlzKTt9O2pzdHMuZ2VvbS5HZW9tZXRyeUZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZU11bHRpTGluZVN0cmluZz1mdW5jdGlvbihsaW5lU3RyaW5ncyl7cmV0dXJuIG5ldyBqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nKGxpbmVTdHJpbmdzLHRoaXMpO307anN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlTXVsdGlQb2x5Z29uPWZ1bmN0aW9uKHBvbHlnb25zKXtyZXR1cm4gbmV3IGpzdHMuZ2VvbS5NdWx0aVBvbHlnb24ocG9seWdvbnMsdGhpcyk7fTtqc3RzLmdlb20uR2VvbWV0cnlGYWN0b3J5LnByb3RvdHlwZS5idWlsZEdlb21ldHJ5PWZ1bmN0aW9uKGdlb21MaXN0KXt2YXIgZ2VvbUNsYXNzPW51bGw7dmFyIGlzSGV0ZXJvZ2VuZW91cz1mYWxzZTt2YXIgaGFzR2VvbWV0cnlDb2xsZWN0aW9uPWZhbHNlO2Zvcih2YXIgaT1nZW9tTGlzdC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGdlb209aS5uZXh0KCk7dmFyIHBhcnRDbGFzcz1nZW9tLkNMQVNTX05BTUU7aWYoZ2VvbUNsYXNzPT09bnVsbCl7Z2VvbUNsYXNzPXBhcnRDbGFzczt9XG5pZighKHBhcnRDbGFzcz09PWdlb21DbGFzcykpe2lzSGV0ZXJvZ2VuZW91cz10cnVlO31cbmlmKGdlb20uaXNHZW9tZXRyeUNvbGxlY3Rpb25CYXNlKCkpXG5oYXNHZW9tZXRyeUNvbGxlY3Rpb249dHJ1ZTt9XG5pZihnZW9tQ2xhc3M9PT1udWxsKXtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obnVsbCk7fVxuaWYoaXNIZXRlcm9nZW5lb3VzfHxoYXNHZW9tZXRyeUNvbGxlY3Rpb24pe3JldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihnZW9tTGlzdC50b0FycmF5KCkpO31cbnZhciBnZW9tMD1nZW9tTGlzdC5nZXQoMCk7dmFyIGlzQ29sbGVjdGlvbj1nZW9tTGlzdC5zaXplKCk+MTtpZihpc0NvbGxlY3Rpb24pe2lmKGdlb20wIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pe3JldHVybiB0aGlzLmNyZWF0ZU11bHRpUG9seWdvbihnZW9tTGlzdC50b0FycmF5KCkpO31lbHNlIGlmKGdlb20wIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmcpe3JldHVybiB0aGlzLmNyZWF0ZU11bHRpTGluZVN0cmluZyhnZW9tTGlzdC50b0FycmF5KCkpO31lbHNlIGlmKGdlb20wIGluc3RhbmNlb2YganN0cy5nZW9tLlBvaW50KXtyZXR1cm4gdGhpcy5jcmVhdGVNdWx0aVBvaW50KGdlb21MaXN0LnRvQXJyYXkoKSk7fVxuanN0cy51dGlsLkFzc2VydC5zaG91bGROZXZlclJlYWNoSGVyZSgnVW5oYW5kbGVkIGNsYXNzOiAnK2dlb20wKTt9XG5yZXR1cm4gZ2VvbTA7fTtqc3RzLmdlb20uR2VvbWV0cnlGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb249ZnVuY3Rpb24oZ2VvbWV0cmllcyl7cmV0dXJuIG5ldyBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKGdlb21ldHJpZXMsdGhpcyk7fTtqc3RzLmdlb20uR2VvbWV0cnlGYWN0b3J5LnByb3RvdHlwZS50b0dlb21ldHJ5PWZ1bmN0aW9uKGVudmVsb3BlKXtpZihlbnZlbG9wZS5pc051bGwoKSl7cmV0dXJuIHRoaXMuY3JlYXRlUG9pbnQobnVsbCk7fVxuaWYoZW52ZWxvcGUuZ2V0TWluWCgpPT09ZW52ZWxvcGUuZ2V0TWF4WCgpJiZlbnZlbG9wZS5nZXRNaW5ZKCk9PT1lbnZlbG9wZS5nZXRNYXhZKCkpe3JldHVybiB0aGlzLmNyZWF0ZVBvaW50KG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShlbnZlbG9wZS5nZXRNaW5YKCksZW52ZWxvcGUuZ2V0TWluWSgpKSk7fVxuaWYoZW52ZWxvcGUuZ2V0TWluWCgpPT09ZW52ZWxvcGUuZ2V0TWF4WCgpfHxlbnZlbG9wZS5nZXRNaW5ZKCk9PT1lbnZlbG9wZS5nZXRNYXhZKCkpe3JldHVybiB0aGlzLmNyZWF0ZUxpbmVTdHJpbmcoW25ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShlbnZlbG9wZS5nZXRNaW5YKCksZW52ZWxvcGUuZ2V0TWluWSgpKSxuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoZW52ZWxvcGUuZ2V0TWF4WCgpLGVudmVsb3BlLmdldE1heFkoKSldKTt9XG5yZXR1cm4gdGhpcy5jcmVhdGVQb2x5Z29uKHRoaXMuY3JlYXRlTGluZWFyUmluZyhbbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGVudmVsb3BlLmdldE1pblgoKSxlbnZlbG9wZS5nZXRNaW5ZKCkpLG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShlbnZlbG9wZS5nZXRNaW5YKCksZW52ZWxvcGUuZ2V0TWF4WSgpKSxuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoZW52ZWxvcGUuZ2V0TWF4WCgpLGVudmVsb3BlLmdldE1heFkoKSksbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGVudmVsb3BlLmdldE1heFgoKSxlbnZlbG9wZS5nZXRNaW5ZKCkpLG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShlbnZlbG9wZS5nZXRNaW5YKCksZW52ZWxvcGUuZ2V0TWluWSgpKV0pLG51bGwpO307anN0cy5nZW9tZ3JhcGguTm9kZUZhY3Rvcnk9ZnVuY3Rpb24oKXt9O2pzdHMuZ2VvbWdyYXBoLk5vZGVGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVOb2RlPWZ1bmN0aW9uKGNvb3JkKXtyZXR1cm4gbmV3IGpzdHMuZ2VvbWdyYXBoLk5vZGUoY29vcmQsbnVsbCk7fTsoZnVuY3Rpb24oKXtqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbj1mdW5jdGlvbigpe307anN0cy5nZW9tZ3JhcGguUG9zaXRpb24uT049MDtqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUPTE7anN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQ9Mjtqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5vcHBvc2l0ZT1mdW5jdGlvbihwb3NpdGlvbil7aWYocG9zaXRpb249PT1qc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKXtyZXR1cm4ganN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQ7fVxuaWYocG9zaXRpb249PT1qc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCl7cmV0dXJuIGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlQ7fVxucmV0dXJuIHBvc2l0aW9uO307fSkoKTtqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5sb2NhdGlvbj1bXTtpZihhcmd1bWVudHMubGVuZ3RoPT09Myl7dmFyIG9uPWFyZ3VtZW50c1swXTt2YXIgbGVmdD1hcmd1bWVudHNbMV07dmFyIHJpZ2h0PWFyZ3VtZW50c1syXTt0aGlzLmluaXQoMyk7dGhpcy5sb2NhdGlvbltqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5PTl09b247dGhpcy5sb2NhdGlvbltqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUXT1sZWZ0O3RoaXMubG9jYXRpb25banN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFRdPXJpZ2h0O31lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YganN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbil7dmFyIGdsPWFyZ3VtZW50c1swXTt0aGlzLmluaXQoZ2wubG9jYXRpb24ubGVuZ3RoKTtpZihnbCE9bnVsbCl7Zm9yKHZhciBpPTA7aTx0aGlzLmxvY2F0aW9uLmxlbmd0aDtpKyspe3RoaXMubG9jYXRpb25baV09Z2wubG9jYXRpb25baV07fX19ZWxzZSBpZih0eXBlb2YgYXJndW1lbnRzWzBdPT09J251bWJlcicpe3ZhciBvbj1hcmd1bWVudHNbMF07dGhpcy5pbml0KDEpO3RoaXMubG9jYXRpb25banN0cy5nZW9tZ3JhcGguUG9zaXRpb24uT05dPW9uO31lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkpe3ZhciBsb2NhdGlvbj1hcmd1bWVudHNbMF07dGhpcy5pbml0KGxvY2F0aW9uLmxlbmd0aCk7fX07anN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbi5wcm90b3R5cGUubG9jYXRpb249bnVsbDtqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHNpemUpe3RoaXMubG9jYXRpb25bc2l6ZS0xXT1udWxsO3RoaXMuc2V0QWxsTG9jYXRpb25zKGpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FKTt9O2pzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ucHJvdG90eXBlLmdldD1mdW5jdGlvbihwb3NJbmRleCl7aWYocG9zSW5kZXg8dGhpcy5sb2NhdGlvbi5sZW5ndGgpXG5yZXR1cm4gdGhpcy5sb2NhdGlvbltwb3NJbmRleF07cmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FO307anN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbi5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLmxvY2F0aW9uLmxlbmd0aDtpKyspe2lmKHRoaXMubG9jYXRpb25baV0hPT1qc3RzLmdlb20uTG9jYXRpb24uTk9ORSlcbnJldHVybiBmYWxzZTt9XG5yZXR1cm4gdHJ1ZTt9O2pzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ucHJvdG90eXBlLmlzQW55TnVsbD1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5sb2NhdGlvbi5sZW5ndGg7aSsrKXtpZih0aGlzLmxvY2F0aW9uW2ldPT09anN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpXG5yZXR1cm4gdHJ1ZTt9XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uLnByb3RvdHlwZS5pc0VxdWFsT25TaWRlPWZ1bmN0aW9uKGxlLGxvY0luZGV4KXtyZXR1cm4gdGhpcy5sb2NhdGlvbltsb2NJbmRleF09PWxlLmxvY2F0aW9uW2xvY0luZGV4XTt9O2pzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ucHJvdG90eXBlLmlzQXJlYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2F0aW9uLmxlbmd0aD4xO307anN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbi5wcm90b3R5cGUuaXNMaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYXRpb24ubGVuZ3RoPT09MTt9O2pzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ucHJvdG90eXBlLmZsaXA9ZnVuY3Rpb24oKXtpZih0aGlzLmxvY2F0aW9uLmxlbmd0aDw9MSlcbnJldHVybjt2YXIgdGVtcD10aGlzLmxvY2F0aW9uW2pzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlRdO3RoaXMubG9jYXRpb25banN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVF09dGhpcy5sb2NhdGlvbltqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVF07dGhpcy5sb2NhdGlvbltqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVF09dGVtcDt9O2pzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ucHJvdG90eXBlLnNldEFsbExvY2F0aW9ucz1mdW5jdGlvbihsb2NWYWx1ZSl7Zm9yKHZhciBpPTA7aTx0aGlzLmxvY2F0aW9uLmxlbmd0aDtpKyspe3RoaXMubG9jYXRpb25baV09bG9jVmFsdWU7fX07anN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbi5wcm90b3R5cGUuc2V0QWxsTG9jYXRpb25zSWZOdWxsPWZ1bmN0aW9uKGxvY1ZhbHVlKXtmb3IodmFyIGk9MDtpPHRoaXMubG9jYXRpb24ubGVuZ3RoO2krKyl7aWYodGhpcy5sb2NhdGlvbltpXT09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FKVxudGhpcy5sb2NhdGlvbltpXT1sb2NWYWx1ZTt9fTtqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uLnByb3RvdHlwZS5zZXRMb2NhdGlvbj1mdW5jdGlvbihsb2NJbmRleCxsb2NWYWx1ZSl7aWYobG9jVmFsdWUhPT11bmRlZmluZWQpe3RoaXMubG9jYXRpb25bbG9jSW5kZXhdPWxvY1ZhbHVlO31lbHNle3RoaXMuc2V0TG9jYXRpb24oanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uT04sbG9jSW5kZXgpO319O2pzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ucHJvdG90eXBlLmdldExvY2F0aW9ucz1mdW5jdGlvbigpe3JldHVybiBsb2NhdGlvbjt9O2pzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ucHJvdG90eXBlLnNldExvY2F0aW9ucz1mdW5jdGlvbihvbixsZWZ0LHJpZ2h0KXt0aGlzLmxvY2F0aW9uW2pzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLk9OXT1vbjt0aGlzLmxvY2F0aW9uW2pzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlRdPWxlZnQ7dGhpcy5sb2NhdGlvbltqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVF09cmlnaHQ7fTtqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uLnByb3RvdHlwZS5hbGxQb3NpdGlvbnNFcXVhbD1mdW5jdGlvbihsb2Mpe2Zvcih2YXIgaT0wO2k8dGhpcy5sb2NhdGlvbi5sZW5ndGg7aSsrKXtpZih0aGlzLmxvY2F0aW9uW2ldIT09bG9jKVxucmV0dXJuIGZhbHNlO31cbnJldHVybiB0cnVlO307anN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbi5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24oZ2wpe2lmKGdsLmxvY2F0aW9uLmxlbmd0aD50aGlzLmxvY2F0aW9uLmxlbmd0aCl7dmFyIG5ld0xvYz1bXTtuZXdMb2NbanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uT05dPXRoaXMubG9jYXRpb25banN0cy5nZW9tZ3JhcGguUG9zaXRpb24uT05dO25ld0xvY1tqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUXT1qc3RzLmdlb20uTG9jYXRpb24uTk9ORTtuZXdMb2NbanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFRdPWpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FO3RoaXMubG9jYXRpb249bmV3TG9jO31cbmZvcih2YXIgaT0wO2k8dGhpcy5sb2NhdGlvbi5sZW5ndGg7aSsrKXtpZih0aGlzLmxvY2F0aW9uW2ldPT09anN0cy5nZW9tLkxvY2F0aW9uLk5PTkUmJmk8Z2wubG9jYXRpb24ubGVuZ3RoKVxudGhpcy5sb2NhdGlvbltpXT1nbC5sb2NhdGlvbltpXTt9fTtqc3RzLmdlb21ncmFwaC5MYWJlbD1mdW5jdGlvbigpe3RoaXMuZWx0PVtdO3ZhciBnZW9tSW5kZXgsb25Mb2MsbGVmdExvYyxsYmwscmlnaHRMb2M7aWYoYXJndW1lbnRzLmxlbmd0aD09PTQpe2dlb21JbmRleD1hcmd1bWVudHNbMF07b25Mb2M9YXJndW1lbnRzWzFdO2xlZnRMb2M9YXJndW1lbnRzWzJdO3JpZ2h0TG9jPWFyZ3VtZW50c1szXTt0aGlzLmVsdFswXT1uZXcganN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbihqc3RzLmdlb20uTG9jYXRpb24uTk9ORSxqc3RzLmdlb20uTG9jYXRpb24uTk9ORSxqc3RzLmdlb20uTG9jYXRpb24uTk9ORSk7dGhpcy5lbHRbMV09bmV3IGpzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24oanN0cy5nZW9tLkxvY2F0aW9uLk5PTkUsanN0cy5nZW9tLkxvY2F0aW9uLk5PTkUsanN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpO3RoaXMuZWx0W2dlb21JbmRleF0uc2V0TG9jYXRpb25zKG9uTG9jLGxlZnRMb2MscmlnaHRMb2MpO31lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PT0zKXtvbkxvYz1hcmd1bWVudHNbMF07bGVmdExvYz1hcmd1bWVudHNbMV07cmlnaHRMb2M9YXJndW1lbnRzWzJdO3RoaXMuZWx0WzBdPW5ldyBqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uKG9uTG9jLGxlZnRMb2MscmlnaHRMb2MpO3RoaXMuZWx0WzFdPW5ldyBqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uKG9uTG9jLGxlZnRMb2MscmlnaHRMb2MpO31lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKXtnZW9tSW5kZXg9YXJndW1lbnRzWzBdO29uTG9jPWFyZ3VtZW50c1sxXTt0aGlzLmVsdFswXT1uZXcganN0cy5nZW9tZ3JhcGguVG9wb2xvZ3lMb2NhdGlvbihqc3RzLmdlb20uTG9jYXRpb24uTk9ORSk7dGhpcy5lbHRbMV09bmV3IGpzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24oanN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpO3RoaXMuZWx0W2dlb21JbmRleF0uc2V0TG9jYXRpb24ob25Mb2MpO31lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YganN0cy5nZW9tZ3JhcGguTGFiZWwpe2xibD1hcmd1bWVudHNbMF07dGhpcy5lbHRbMF09bmV3IGpzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24obGJsLmVsdFswXSk7dGhpcy5lbHRbMV09bmV3IGpzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24obGJsLmVsdFsxXSk7fWVsc2UgaWYodHlwZW9mIGFyZ3VtZW50c1swXT09PSdudW1iZXInKXtvbkxvYz1hcmd1bWVudHNbMF07dGhpcy5lbHRbMF09bmV3IGpzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24ob25Mb2MpO3RoaXMuZWx0WzFdPW5ldyBqc3RzLmdlb21ncmFwaC5Ub3BvbG9neUxvY2F0aW9uKG9uTG9jKTt9fTtqc3RzLmdlb21ncmFwaC5MYWJlbC50b0xpbmVMYWJlbD1mdW5jdGlvbihsYWJlbCl7dmFyIGksbGluZUxhYmVsPW5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbChqc3RzLmdlb20uTG9jYXRpb24uTk9ORSk7Zm9yKGk9MDtpPDI7aSsrKXtsaW5lTGFiZWwuc2V0TG9jYXRpb24oaSxsYWJlbC5nZXRMb2NhdGlvbihpKSk7fVxucmV0dXJuIGxpbmVMYWJlbDt9O2pzdHMuZ2VvbWdyYXBoLkxhYmVsLnByb3RvdHlwZS5lbHQ9bnVsbDtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuZmxpcD1mdW5jdGlvbigpe3RoaXMuZWx0WzBdLmZsaXAoKTt0aGlzLmVsdFsxXS5mbGlwKCk7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuZ2V0TG9jYXRpb249ZnVuY3Rpb24oZ2VvbUluZGV4LHBvc0luZGV4KXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtyZXR1cm4gdGhpcy5nZXRMb2NhdGlvbjIuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbnJldHVybiB0aGlzLmVsdFtnZW9tSW5kZXhdLmdldChwb3NJbmRleCk7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuZ2V0TG9jYXRpb24yPWZ1bmN0aW9uKGdlb21JbmRleCl7cmV0dXJuIHRoaXMuZWx0W2dlb21JbmRleF0uZ2V0KGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLk9OKTt9O2pzdHMuZ2VvbWdyYXBoLkxhYmVsLnByb3RvdHlwZS5zZXRMb2NhdGlvbj1mdW5jdGlvbihnZW9tSW5kZXgscG9zSW5kZXgsbG9jYXRpb24pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTIpe3RoaXMuc2V0TG9jYXRpb24yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudGhpcy5lbHRbZ2VvbUluZGV4XS5zZXRMb2NhdGlvbihwb3NJbmRleCxsb2NhdGlvbik7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuc2V0TG9jYXRpb24yPWZ1bmN0aW9uKGdlb21JbmRleCxsb2NhdGlvbil7dGhpcy5lbHRbZ2VvbUluZGV4XS5zZXRMb2NhdGlvbihqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5PTixsb2NhdGlvbik7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuc2V0QWxsTG9jYXRpb25zPWZ1bmN0aW9uKGdlb21JbmRleCxsb2NhdGlvbil7dGhpcy5lbHRbZ2VvbUluZGV4XS5zZXRBbGxMb2NhdGlvbnMobG9jYXRpb24pO307anN0cy5nZW9tZ3JhcGguTGFiZWwucHJvdG90eXBlLnNldEFsbExvY2F0aW9uc0lmTnVsbD1mdW5jdGlvbihnZW9tSW5kZXgsbG9jYXRpb24pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe3RoaXMuc2V0QWxsTG9jYXRpb25zSWZOdWxsMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbnRoaXMuZWx0W2dlb21JbmRleF0uc2V0QWxsTG9jYXRpb25zSWZOdWxsKGxvY2F0aW9uKTt9O2pzdHMuZ2VvbWdyYXBoLkxhYmVsLnByb3RvdHlwZS5zZXRBbGxMb2NhdGlvbnNJZk51bGwyPWZ1bmN0aW9uKGxvY2F0aW9uKXt0aGlzLnNldEFsbExvY2F0aW9uc0lmTnVsbCgwLGxvY2F0aW9uKTt0aGlzLnNldEFsbExvY2F0aW9uc0lmTnVsbCgxLGxvY2F0aW9uKTt9O2pzdHMuZ2VvbWdyYXBoLkxhYmVsLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbihsYmwpe3ZhciBpO2ZvcihpPTA7aTwyO2krKyl7aWYodGhpcy5lbHRbaV09PT1udWxsJiZsYmwuZWx0W2ldIT09bnVsbCl7dGhpcy5lbHRbaV09bmV3IGpzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24obGJsLmVsdFtpXSk7fWVsc2V7dGhpcy5lbHRbaV0ubWVyZ2UobGJsLmVsdFtpXSk7fX19O2pzdHMuZ2VvbWdyYXBoLkxhYmVsLnByb3RvdHlwZS5nZXRHZW9tZXRyeUNvdW50PWZ1bmN0aW9uKCl7dmFyIGNvdW50PTA7aWYoIXRoaXMuZWx0WzBdLmlzTnVsbCgpKXtjb3VudCsrO31cbmlmKCF0aGlzLmVsdFsxXS5pc051bGwoKSl7Y291bnQrKzt9XG5yZXR1cm4gY291bnQ7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuaXNOdWxsPWZ1bmN0aW9uKGdlb21JbmRleCl7cmV0dXJuIHRoaXMuZWx0W2dlb21JbmRleF0uaXNOdWxsKCk7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuaXNBbnlOdWxsPWZ1bmN0aW9uKGdlb21JbmRleCl7cmV0dXJuIHRoaXMuZWx0W2dlb21JbmRleF0uaXNBbnlOdWxsKCk7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuaXNBcmVhPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7cmV0dXJuIHRoaXMuaXNBcmVhMihhcmd1bWVudHNbMF0pO31cbnJldHVybiB0aGlzLmVsdFswXS5pc0FyZWEoKXx8dGhpcy5lbHRbMV0uaXNBcmVhKCk7fTtqc3RzLmdlb21ncmFwaC5MYWJlbC5wcm90b3R5cGUuaXNBcmVhMj1mdW5jdGlvbihnZW9tSW5kZXgpe3JldHVybiB0aGlzLmVsdFtnZW9tSW5kZXhdLmlzQXJlYSgpO307anN0cy5nZW9tZ3JhcGguTGFiZWwucHJvdG90eXBlLmlzTGluZT1mdW5jdGlvbihnZW9tSW5kZXgpe3JldHVybiB0aGlzLmVsdFtnZW9tSW5kZXhdLmlzTGluZSgpO307anN0cy5nZW9tZ3JhcGguTGFiZWwucHJvdG90eXBlLmlzRXF1YWxPblNpZGU9ZnVuY3Rpb24obGJsLHNpZGUpe3JldHVybiB0aGlzLmVsdFswXS5pc0VxdWFsT25TaWRlKGxibC5lbHRbMF0sc2lkZSkmJnRoaXMuZWx0WzFdLmlzRXF1YWxPblNpZGUobGJsLmVsdFsxXSxzaWRlKTt9O2pzdHMuZ2VvbWdyYXBoLkxhYmVsLnByb3RvdHlwZS5hbGxQb3NpdGlvbnNFcXVhbD1mdW5jdGlvbihnZW9tSW5kZXgsbG9jKXtyZXR1cm4gdGhpcy5lbHRbZ2VvbUluZGV4XS5hbGxQb3NpdGlvbnNFcXVhbChsb2MpO307anN0cy5nZW9tZ3JhcGguTGFiZWwucHJvdG90eXBlLnRvTGluZT1mdW5jdGlvbihnZW9tSW5kZXgpe2lmKHRoaXMuZWx0W2dlb21JbmRleF0uaXNBcmVhKCkpe3RoaXMuZWx0W2dlb21JbmRleF09bmV3IGpzdHMuZ2VvbWdyYXBoLlRvcG9sb2d5TG9jYXRpb24odGhpcy5lbHRbZ2VvbUluZGV4XS5sb2NhdGlvblswXSk7fX07anN0cy5nZW9tZ3JhcGguRWRnZVJpbmc9ZnVuY3Rpb24oc3RhcnQsZ2VvbWV0cnlGYWN0b3J5KXt0aGlzLmVkZ2VzPVtdO3RoaXMucHRzPVtdO3RoaXMuaG9sZXM9W107dGhpcy5sYWJlbD1uZXcganN0cy5nZW9tZ3JhcGguTGFiZWwoanN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpO3RoaXMuZ2VvbWV0cnlGYWN0b3J5PWdlb21ldHJ5RmFjdG9yeTtpZihzdGFydCl7dGhpcy5jb21wdXRlUG9pbnRzKHN0YXJ0KTt0aGlzLmNvbXB1dGVSaW5nKCk7fX07anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLnN0YXJ0RGU9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUubWF4Tm9kZURlZ3JlZT0tMTtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuZWRnZXM9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUucHRzPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLmxhYmVsPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLnJpbmc9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuX2lzSG9sZT1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5zaGVsbD1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5ob2xlcz1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5nZW9tZXRyeUZhY3Rvcnk9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuaXNJc29sYXRlZD1mdW5jdGlvbigpe3JldHVybih0aGlzLmxhYmVsLmdldEdlb21ldHJ5Q291bnQoKT09MSk7fTtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuaXNIb2xlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSG9sZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLnB0c1tpXTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmluZzt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5nZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxhYmVsO307anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLmlzU2hlbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGVsbD09PW51bGw7fTtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuZ2V0U2hlbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGVsbDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5zZXRTaGVsbD1mdW5jdGlvbihzaGVsbCl7dGhpcy5zaGVsbD1zaGVsbDtpZihzaGVsbCE9PW51bGwpXG5zaGVsbC5hZGRIb2xlKHRoaXMpO307anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLmFkZEhvbGU9ZnVuY3Rpb24ocmluZyl7dGhpcy5ob2xlcy5wdXNoKHJpbmcpO307anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLnRvUG9seWdvbj1mdW5jdGlvbihnZW9tZXRyeUZhY3Rvcnkpe3ZhciBob2xlTFI9W107Zm9yKHZhciBpPTA7aTx0aGlzLmhvbGVzLmxlbmd0aDtpKyspe2hvbGVMUltpXT10aGlzLmhvbGVzW2ldLmdldExpbmVhclJpbmcoKTt9XG52YXIgcG9seT10aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2x5Z29uKHRoaXMuZ2V0TGluZWFyUmluZygpLGhvbGVMUik7cmV0dXJuIHBvbHk7fTtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuY29tcHV0ZVJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnJpbmchPT1udWxsKVxucmV0dXJuO3ZhciBjb29yZD1bXTtmb3IodmFyIGk9MDtpPHRoaXMucHRzLmxlbmd0aDtpKyspe2Nvb3JkW2ldPXRoaXMucHRzW2ldO31cbnRoaXMucmluZz10aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKGNvb3JkKTt0aGlzLl9pc0hvbGU9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzQ0NXKHRoaXMucmluZy5nZXRDb29yZGluYXRlcygpKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5nZXROZXh0PWZ1bmN0aW9uKGRlKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLnNldEVkZ2VSaW5nPWZ1bmN0aW9uKGRlLGVyKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLmdldEVkZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZXM7fTtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuY29tcHV0ZVBvaW50cz1mdW5jdGlvbihzdGFydCl7dGhpcy5zdGFydERlPXN0YXJ0O3ZhciBkZT1zdGFydDt2YXIgaXNGaXJzdEVkZ2U9dHJ1ZTtkb3tpZihkZT09PW51bGwpXG50aHJvdyBuZXcganN0cy5lcnJvci5Ub3BvbG9neUVycm9yKCdGb3VuZCBudWxsIERpcmVjdGVkRWRnZScpO2lmKGRlLmdldEVkZ2VSaW5nKCk9PT10aGlzKVxudGhyb3cgbmV3IGpzdHMuZXJyb3IuVG9wb2xvZ3lFcnJvcignRGlyZWN0ZWQgRWRnZSB2aXNpdGVkIHR3aWNlIGR1cmluZyByaW5nLWJ1aWxkaW5nIGF0ICcrXG5kZS5nZXRDb29yZGluYXRlKCkpO3RoaXMuZWRnZXMucHVzaChkZSk7dmFyIGxhYmVsPWRlLmdldExhYmVsKCk7anN0cy51dGlsLkFzc2VydC5pc1RydWUobGFiZWwuaXNBcmVhKCkpO3RoaXMubWVyZ2VMYWJlbChsYWJlbCk7dGhpcy5hZGRQb2ludHMoZGUuZ2V0RWRnZSgpLGRlLmlzRm9yd2FyZCgpLGlzRmlyc3RFZGdlKTtpc0ZpcnN0RWRnZT1mYWxzZTt0aGlzLnNldEVkZ2VSaW5nKGRlLHRoaXMpO2RlPXRoaXMuZ2V0TmV4dChkZSk7fXdoaWxlKGRlIT09dGhpcy5zdGFydERlKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5nZXRNYXhOb2RlRGVncmVlPWZ1bmN0aW9uKCl7aWYodGhpcy5tYXhOb2RlRGVncmVlPDApXG50aGlzLmNvbXB1dGVNYXhOb2RlRGVncmVlKCk7cmV0dXJuIHRoaXMubWF4Tm9kZURlZ3JlZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5jb21wdXRlTWF4Tm9kZURlZ3JlZT1mdW5jdGlvbigpe3RoaXMubWF4Tm9kZURlZ3JlZT0wO3ZhciBkZT10aGlzLnN0YXJ0RGU7ZG97dmFyIG5vZGU9ZGUuZ2V0Tm9kZSgpO3ZhciBkZWdyZWU9bm9kZS5nZXRFZGdlcygpLmdldE91dGdvaW5nRGVncmVlKHRoaXMpO2lmKGRlZ3JlZT50aGlzLm1heE5vZGVEZWdyZWUpXG50aGlzLm1heE5vZGVEZWdyZWU9ZGVncmVlO2RlPXRoaXMuZ2V0TmV4dChkZSk7fXdoaWxlKGRlIT09dGhpcy5zdGFydERlKTt0aGlzLm1heE5vZGVEZWdyZWUqPTI7fTtqc3RzLmdlb21ncmFwaC5FZGdlUmluZy5wcm90b3R5cGUuc2V0SW5SZXN1bHQ9ZnVuY3Rpb24oKXt2YXIgZGU9dGhpcy5zdGFydERlO2Rve2RlLmdldEVkZ2UoKS5zZXRJblJlc3VsdCh0cnVlKTtkZT1kZS5nZXROZXh0KCk7fXdoaWxlKGRlIT10aGlzLnN0YXJ0RGUpO307anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLm1lcmdlTGFiZWw9ZnVuY3Rpb24oZGVMYWJlbCl7dGhpcy5tZXJnZUxhYmVsMihkZUxhYmVsLDApO3RoaXMubWVyZ2VMYWJlbDIoZGVMYWJlbCwxKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLnByb3RvdHlwZS5tZXJnZUxhYmVsMj1mdW5jdGlvbihkZUxhYmVsLGdlb21JbmRleCl7dmFyIGxvYz1kZUxhYmVsLmdldExvY2F0aW9uKGdlb21JbmRleCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCk7aWYobG9jPT1qc3RzLmdlb20uTG9jYXRpb24uTk9ORSlcbnJldHVybjtpZih0aGlzLmxhYmVsLmdldExvY2F0aW9uKGdlb21JbmRleCk9PT1qc3RzLmdlb20uTG9jYXRpb24uTk9ORSl7dGhpcy5sYWJlbC5zZXRMb2NhdGlvbihnZW9tSW5kZXgsbG9jKTtyZXR1cm47fX07anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLmFkZFBvaW50cz1mdW5jdGlvbihlZGdlLGlzRm9yd2FyZCxpc0ZpcnN0RWRnZSl7dmFyIGVkZ2VQdHM9ZWRnZS5nZXRDb29yZGluYXRlcygpO2lmKGlzRm9yd2FyZCl7dmFyIHN0YXJ0SW5kZXg9MTtpZihpc0ZpcnN0RWRnZSlcbnN0YXJ0SW5kZXg9MDtmb3IodmFyIGk9c3RhcnRJbmRleDtpPGVkZ2VQdHMubGVuZ3RoO2krKyl7dGhpcy5wdHMucHVzaChlZGdlUHRzW2ldKTt9fWVsc2V7dmFyIHN0YXJ0SW5kZXg9ZWRnZVB0cy5sZW5ndGgtMjtpZihpc0ZpcnN0RWRnZSlcbnN0YXJ0SW5kZXg9ZWRnZVB0cy5sZW5ndGgtMTtmb3IodmFyIGk9c3RhcnRJbmRleDtpPj0wO2ktLSl7dGhpcy5wdHMucHVzaChlZGdlUHRzW2ldKTt9fX07anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcucHJvdG90eXBlLmNvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24ocCl7dmFyIHNoZWxsPXRoaXMuZ2V0TGluZWFyUmluZygpO3ZhciBlbnY9c2hlbGwuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO2lmKCFlbnYuY29udGFpbnMocCkpXG5yZXR1cm4gZmFsc2U7aWYoIWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5pc1BvaW50SW5SaW5nKHAsc2hlbGwuZ2V0Q29vcmRpbmF0ZXMoKSkpXG5yZXR1cm4gZmFsc2U7Zm9yKHZhciBpPTA7aTx0aGlzLmhvbGVzLmxlbmd0aDtpKyspe3ZhciBob2xlPXRoaXMuaG9sZXNbaV07aWYoaG9sZS5jb250YWluc1BvaW50KHApKVxucmV0dXJuIGZhbHNlO31cbnJldHVybiB0cnVlO307KGZ1bmN0aW9uKCl7anN0cy5nZW9tLkxpbmVhclJpbmc9ZnVuY3Rpb24ocG9pbnRzLGZhY3Rvcnkpe2pzdHMuZ2VvbS5MaW5lU3RyaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O2pzdHMuZ2VvbS5MaW5lYXJSaW5nLnByb3RvdHlwZT1uZXcganN0cy5nZW9tLkxpbmVTdHJpbmcoKTtqc3RzLmdlb20uTGluZWFyUmluZy5jb25zdHJ1Y3Rvcj1qc3RzLmdlb20uTGluZWFyUmluZztqc3RzLmdlb20uTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0Qm91bmRhcnlEaW1lbnNpb249ZnVuY3Rpb24oKXtyZXR1cm4ganN0cy5nZW9tLkRpbWVuc2lvbi5GQUxTRTt9O2pzdHMuZ2VvbS5MaW5lYXJSaW5nLnByb3RvdHlwZS5pc1NpbXBsZT1mdW5jdGlvbigpe3JldHVybiB0cnVlO307anN0cy5nZW9tLkxpbmVhclJpbmcucHJvdG90eXBlLmdldEdlb21ldHJ5VHlwZT1mdW5jdGlvbigpe3JldHVybidMaW5lYXJSaW5nJzt9O2pzdHMuZ2VvbS5MaW5lYXJSaW5nLk1JTklNVU1fVkFMSURfU0laRT00O2pzdHMuZ2VvbS5MaW5lYXJSaW5nLnByb3RvdHlwZS5DTEFTU19OQU1FPSdqc3RzLmdlb20uTGluZWFyUmluZyc7fSkoKTtqc3RzLmluZGV4LnN0cnRyZWUuQm91bmRhYmxlPWZ1bmN0aW9uKCl7fTtqc3RzLmluZGV4LnN0cnRyZWUuQm91bmRhYmxlLnByb3RvdHlwZS5nZXRCb3VuZHM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZT1mdW5jdGlvbihsZXZlbCl7dGhpcy5sZXZlbD1sZXZlbDt0aGlzLmNoaWxkQm91bmRhYmxlcz1bXTt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdE5vZGUucHJvdG90eXBlPW5ldyBqc3RzLmluZGV4LnN0cnRyZWUuQm91bmRhYmxlKCk7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZS5jb25zdHJ1Y3Rvcj1qc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3ROb2RlO2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdE5vZGUucHJvdG90eXBlLmNoaWxkQm91bmRhYmxlcz1udWxsO2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdE5vZGUucHJvdG90eXBlLmJvdW5kcz1udWxsO2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdE5vZGUucHJvdG90eXBlLmxldmVsPW51bGw7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZS5wcm90b3R5cGUuZ2V0Q2hpbGRCb3VuZGFibGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRCb3VuZGFibGVzO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZS5wcm90b3R5cGUuY29tcHV0ZUJvdW5kcz1mdW5jdGlvbigpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3ROb2RlLnByb3RvdHlwZS5nZXRCb3VuZHM9ZnVuY3Rpb24oKXtpZih0aGlzLmJvdW5kcz09PW51bGwpe3RoaXMuYm91bmRzPXRoaXMuY29tcHV0ZUJvdW5kcygpO31cbnJldHVybiB0aGlzLmJvdW5kczt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdE5vZGUucHJvdG90eXBlLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGV2ZWw7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3ROb2RlLnByb3RvdHlwZS5hZGRDaGlsZEJvdW5kYWJsZT1mdW5jdGlvbihjaGlsZEJvdW5kYWJsZSl7dGhpcy5jaGlsZEJvdW5kYWJsZXMucHVzaChjaGlsZEJvdW5kYWJsZSk7fTsoZnVuY3Rpb24oKXtqc3RzLm5vZGluZy5Ob2Rlcj1mdW5jdGlvbigpe307anN0cy5ub2RpbmcuTm9kZXIucHJvdG90eXBlLmNvbXB1dGVOb2Rlcz1qc3RzLmFic3RyYWN0RnVuYztqc3RzLm5vZGluZy5Ob2Rlci5wcm90b3R5cGUuZ2V0Tm9kZWRTdWJzdHJpbmdzPWpzdHMuYWJzdHJhY3RGdW5jO30pKCk7KGZ1bmN0aW9uKCl7dmFyIE5vZGVyPWpzdHMubm9kaW5nLk5vZGVyO2pzdHMubm9kaW5nLlNpbmdsZVBhc3NOb2Rlcj1mdW5jdGlvbigpe307anN0cy5ub2RpbmcuU2luZ2xlUGFzc05vZGVyLnByb3RvdHlwZT1uZXcgTm9kZXIoKTtqc3RzLm5vZGluZy5TaW5nbGVQYXNzTm9kZXIuY29uc3RydWN0b3I9anN0cy5ub2RpbmcuU2luZ2xlUGFzc05vZGVyO2pzdHMubm9kaW5nLlNpbmdsZVBhc3NOb2Rlci5wcm90b3R5cGUuc2VnSW50PW51bGw7anN0cy5ub2RpbmcuU2luZ2xlUGFzc05vZGVyLnByb3RvdHlwZS5zZXRTZWdtZW50SW50ZXJzZWN0b3I9ZnVuY3Rpb24oc2VnSW50KXt0aGlzLnNlZ0ludD1zZWdJbnQ7fTt9KSgpO2pzdHMuaW5kZXguU3BhdGlhbEluZGV4PWZ1bmN0aW9uKCl7fTtqc3RzLmluZGV4LlNwYXRpYWxJbmRleC5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKGl0ZW1FbnYsaXRlbSl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuaW5kZXguU3BhdGlhbEluZGV4LnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbihzZWFyY2hFbnYsdmlzaXRvcil7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuaW5kZXguU3BhdGlhbEluZGV4LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oaXRlbUVudixpdGVtKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZT1mdW5jdGlvbihub2RlQ2FwYWNpdHkpe2lmKG5vZGVDYXBhY2l0eT09PXVuZGVmaW5lZClcbnJldHVybjt0aGlzLml0ZW1Cb3VuZGFibGVzPVtdO2pzdHMudXRpbC5Bc3NlcnQuaXNUcnVlKG5vZGVDYXBhY2l0eT4xLCdOb2RlIGNhcGFjaXR5IG11c3QgYmUgZ3JlYXRlciB0aGFuIDEnKTt0aGlzLm5vZGVDYXBhY2l0eT1ub2RlQ2FwYWNpdHk7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLkludGVyc2VjdHNPcD1mdW5jdGlvbigpe307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5JbnRlcnNlY3RzT3AucHJvdG90eXBlLmludGVyc2VjdHM9ZnVuY3Rpb24oYUJvdW5kcyxiQm91bmRzKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUucm9vdD1udWxsO2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmJ1aWx0PWZhbHNlO2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLml0ZW1Cb3VuZGFibGVzPW51bGw7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUubm9kZUNhcGFjaXR5PW51bGw7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24oKXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZSghdGhpcy5idWlsdCk7dGhpcy5yb290PXRoaXMuaXRlbUJvdW5kYWJsZXMubGVuZ3RoPT09MD90aGlzLmNyZWF0ZU5vZGUoMCk6dGhpcy5jcmVhdGVIaWdoZXJMZXZlbHModGhpcy5pdGVtQm91bmRhYmxlcywtMSk7dGhpcy5idWlsdD10cnVlO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuY3JlYXRlTm9kZT1mdW5jdGlvbihsZXZlbCl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXM9ZnVuY3Rpb24oY2hpbGRCb3VuZGFibGVzLG5ld0xldmVsKXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZSghKGNoaWxkQm91bmRhYmxlcy5sZW5ndGg9PT0wKSk7dmFyIHBhcmVudEJvdW5kYWJsZXM9W107cGFyZW50Qm91bmRhYmxlcy5wdXNoKHRoaXMuY3JlYXRlTm9kZShuZXdMZXZlbCkpO3ZhciBzb3J0ZWRDaGlsZEJvdW5kYWJsZXM9W107Zm9yKHZhciBpPTA7aTxjaGlsZEJvdW5kYWJsZXMubGVuZ3RoO2krKyl7c29ydGVkQ2hpbGRCb3VuZGFibGVzLnB1c2goY2hpbGRCb3VuZGFibGVzW2ldKTt9XG5zb3J0ZWRDaGlsZEJvdW5kYWJsZXMuc29ydCh0aGlzLmdldENvbXBhcmF0b3IoKSk7Zm9yKHZhciBpPTA7aTxzb3J0ZWRDaGlsZEJvdW5kYWJsZXMubGVuZ3RoO2krKyl7dmFyIGNoaWxkQm91bmRhYmxlPXNvcnRlZENoaWxkQm91bmRhYmxlc1tpXTtpZih0aGlzLmxhc3ROb2RlKHBhcmVudEJvdW5kYWJsZXMpLmdldENoaWxkQm91bmRhYmxlcygpLmxlbmd0aD09PXRoaXMuZ2V0Tm9kZUNhcGFjaXR5KCkpe3BhcmVudEJvdW5kYWJsZXMucHVzaCh0aGlzLmNyZWF0ZU5vZGUobmV3TGV2ZWwpKTt9XG50aGlzLmxhc3ROb2RlKHBhcmVudEJvdW5kYWJsZXMpLmFkZENoaWxkQm91bmRhYmxlKGNoaWxkQm91bmRhYmxlKTt9XG5yZXR1cm4gcGFyZW50Qm91bmRhYmxlczt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmxhc3ROb2RlPWZ1bmN0aW9uKG5vZGVzKXtyZXR1cm4gbm9kZXNbbm9kZXMubGVuZ3RoLTFdO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuY29tcGFyZURvdWJsZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5iPzE6YTxiPy0xOjA7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5jcmVhdGVIaWdoZXJMZXZlbHM9ZnVuY3Rpb24oYm91bmRhYmxlc09mQUxldmVsLGxldmVsKXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZSghKGJvdW5kYWJsZXNPZkFMZXZlbC5sZW5ndGg9PT0wKSk7dmFyIHBhcmVudEJvdW5kYWJsZXM9dGhpcy5jcmVhdGVQYXJlbnRCb3VuZGFibGVzKGJvdW5kYWJsZXNPZkFMZXZlbCxsZXZlbCsxKTtpZihwYXJlbnRCb3VuZGFibGVzLmxlbmd0aD09PTEpe3JldHVybiBwYXJlbnRCb3VuZGFibGVzWzBdO31cbnJldHVybiB0aGlzLmNyZWF0ZUhpZ2hlckxldmVscyhwYXJlbnRCb3VuZGFibGVzLGxldmVsKzEpO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuZ2V0Um9vdD1mdW5jdGlvbigpe2lmKCF0aGlzLmJ1aWx0KVxudGhpcy5idWlsZCgpO3JldHVybiB0aGlzLnJvb3Q7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5nZXROb2RlQ2FwYWNpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlQ2FwYWNpdHk7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3JldHVybiB0aGlzLnNpemUyKGFyZ3VtZW50c1swXSk7fVxuaWYoIXRoaXMuYnVpbHQpe3RoaXMuYnVpbGQoKTt9XG5pZih0aGlzLml0ZW1Cb3VuZGFibGVzLmxlbmd0aD09PTApe3JldHVybiAwO31cbnJldHVybiB0aGlzLnNpemUyKHJvb3QpO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuc2l6ZTI9ZnVuY3Rpb24obm9kZSl7dmFyIHNpemU9MDt2YXIgY2hpbGRCb3VuZGFibGVzPW5vZGUuZ2V0Q2hpbGRCb3VuZGFibGVzKCk7Zm9yKHZhciBpPTA7aTxjaGlsZEJvdW5kYWJsZXMubGVuZ3RoO2krKyl7dmFyIGNoaWxkQm91bmRhYmxlPWNoaWxkQm91bmRhYmxlc1tpXTtpZihjaGlsZEJvdW5kYWJsZSBpbnN0YW5jZW9mIGpzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdE5vZGUpe3NpemUrPXRoaXMuc2l6ZShjaGlsZEJvdW5kYWJsZSk7fWVsc2UgaWYoY2hpbGRCb3VuZGFibGUgaW5zdGFuY2VvZiBqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZSl7c2l6ZSs9MTt9fVxucmV0dXJuIHNpemU7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5kZXB0aD1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtyZXR1cm4gdGhpcy5kZXB0aDIoYXJndW1lbnRzWzBdKTt9XG5pZighdGhpcy5idWlsdCl7dGhpcy5idWlsZCgpO31cbmlmKHRoaXMuaXRlbUJvdW5kYWJsZXMubGVuZ3RoPT09MCl7cmV0dXJuIDA7fVxucmV0dXJuIHRoaXMuZGVwdGgyKHJvb3QpO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuZGVwdGgyPWZ1bmN0aW9uKCl7dmFyIG1heENoaWxkRGVwdGg9MDt2YXIgY2hpbGRCb3VuZGFibGVzPW5vZGUuZ2V0Q2hpbGRCb3VuZGFibGVzKCk7Zm9yKHZhciBpPTA7aTxjaGlsZEJvdW5kYWJsZXMubGVuZ3RoO2krKyl7dmFyIGNoaWxkQm91bmRhYmxlPWNoaWxkQm91bmRhYmxlc1tpXTtpZihjaGlsZEJvdW5kYWJsZSBpbnN0YW5jZW9mIGpzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdE5vZGUpe3ZhciBjaGlsZERlcHRoPXRoaXMuZGVwdGgoY2hpbGRCb3VuZGFibGUpO2lmKGNoaWxkRGVwdGg+bWF4Q2hpbGREZXB0aClcbm1heENoaWxkRGVwdGg9Y2hpbGREZXB0aDt9fVxucmV0dXJuIG1heENoaWxkRGVwdGgrMTt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihib3VuZHMsaXRlbSl7anN0cy51dGlsLkFzc2VydC5pc1RydWUoIXRoaXMuYnVpbHQsJ0Nhbm5vdCBpbnNlcnQgaXRlbXMgaW50byBhbiBTVFIgcGFja2VkIFItdHJlZSBhZnRlciBpdCBoYXMgYmVlbiBidWlsdC4nKTt0aGlzLml0ZW1Cb3VuZGFibGVzLnB1c2gobmV3IGpzdHMuaW5kZXguc3RydHJlZS5JdGVtQm91bmRhYmxlKGJvdW5kcyxpdGVtKSk7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbihzZWFyY2hCb3VuZHMpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7dGhpcy5xdWVyeTIuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbmlmKCF0aGlzLmJ1aWx0KXt0aGlzLmJ1aWxkKCk7fVxudmFyIG1hdGNoZXM9W107aWYodGhpcy5pdGVtQm91bmRhYmxlcy5sZW5ndGg9PT0wKXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZSh0aGlzLnJvb3QuZ2V0Qm91bmRzKCk9PT1udWxsKTtyZXR1cm4gbWF0Y2hlczt9XG5pZih0aGlzLmdldEludGVyc2VjdHNPcCgpLmludGVyc2VjdHModGhpcy5yb290LmdldEJvdW5kcygpLHNlYXJjaEJvdW5kcykpe3RoaXMucXVlcnkzKHNlYXJjaEJvdW5kcyx0aGlzLnJvb3QsbWF0Y2hlcyk7fVxucmV0dXJuIG1hdGNoZXM7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5xdWVyeTI9ZnVuY3Rpb24oc2VhcmNoQm91bmRzLHZpc2l0b3Ipe2lmKGFyZ3VtZW50cy5sZW5ndGg+Mil7dGhpcy5xdWVyeTMuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbmlmKCF0aGlzLmJ1aWx0KXt0aGlzLmJ1aWxkKCk7fVxuaWYodGhpcy5pdGVtQm91bmRhYmxlcy5sZW5ndGg9PT0wKXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZSh0aGlzLnJvb3QuZ2V0Qm91bmRzKCk9PT1udWxsKTt9XG5pZih0aGlzLmdldEludGVyc2VjdHNPcCgpLmludGVyc2VjdHModGhpcy5yb290LmdldEJvdW5kcygpLHNlYXJjaEJvdW5kcykpe3RoaXMucXVlcnk0KHNlYXJjaEJvdW5kcyx0aGlzLnJvb3QsdmlzaXRvcik7fX07anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUucXVlcnkzPWZ1bmN0aW9uKHNlYXJjaEJvdW5kcyxub2RlLG1hdGNoZXMpe2lmKCEoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBBcnJheSkpe3RoaXMucXVlcnk0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG52YXIgY2hpbGRCb3VuZGFibGVzPW5vZGUuZ2V0Q2hpbGRCb3VuZGFibGVzKCk7Zm9yKHZhciBpPTA7aTxjaGlsZEJvdW5kYWJsZXMubGVuZ3RoO2krKyl7dmFyIGNoaWxkQm91bmRhYmxlPWNoaWxkQm91bmRhYmxlc1tpXTtpZighdGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKGNoaWxkQm91bmRhYmxlLmdldEJvdW5kcygpLHNlYXJjaEJvdW5kcykpe2NvbnRpbnVlO31cbmlmKGNoaWxkQm91bmRhYmxlIGluc3RhbmNlb2YganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZSl7dGhpcy5xdWVyeTMoc2VhcmNoQm91bmRzLGNoaWxkQm91bmRhYmxlLG1hdGNoZXMpO31lbHNlIGlmKGNoaWxkQm91bmRhYmxlIGluc3RhbmNlb2YganN0cy5pbmRleC5zdHJ0cmVlLkl0ZW1Cb3VuZGFibGUpe21hdGNoZXMucHVzaChjaGlsZEJvdW5kYWJsZS5nZXRJdGVtKCkpO31lbHNle2pzdHMudXRpbC5Bc3NlcnQuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKTt9fX07anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUucXVlcnk0PWZ1bmN0aW9uKHNlYXJjaEJvdW5kcyxub2RlLHZpc2l0b3Ipe3ZhciBjaGlsZEJvdW5kYWJsZXM9bm9kZS5nZXRDaGlsZEJvdW5kYWJsZXMoKTtmb3IodmFyIGk9MDtpPGNoaWxkQm91bmRhYmxlcy5sZW5ndGg7aSsrKXt2YXIgY2hpbGRCb3VuZGFibGU9Y2hpbGRCb3VuZGFibGVzW2ldO2lmKCF0aGlzLmdldEludGVyc2VjdHNPcCgpLmludGVyc2VjdHMoY2hpbGRCb3VuZGFibGUuZ2V0Qm91bmRzKCksc2VhcmNoQm91bmRzKSl7Y29udGludWU7fVxuaWYoY2hpbGRCb3VuZGFibGUgaW5zdGFuY2VvZiBqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3ROb2RlKXt0aGlzLnF1ZXJ5NChzZWFyY2hCb3VuZHMsY2hpbGRCb3VuZGFibGUsdmlzaXRvcik7fWVsc2UgaWYoY2hpbGRCb3VuZGFibGUgaW5zdGFuY2VvZiBqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZSl7dmlzaXRvci52aXNpdEl0ZW0oY2hpbGRCb3VuZGFibGUuZ2V0SXRlbSgpKTt9ZWxzZXtqc3RzLnV0aWwuQXNzZXJ0LnNob3VsZE5ldmVyUmVhY2hIZXJlKCk7fX19O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmdldEludGVyc2VjdHNPcD1mdW5jdGlvbigpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5pdGVtc1RyZWU9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7cmV0dXJuIHRoaXMuaXRlbXNUcmVlMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fVxuaWYoIXRoaXMuYnVpbHQpe3RoaXMuYnVpbGQoKTt9XG52YXIgdmFsdWVzVHJlZT10aGlzLml0ZW1zVHJlZTIodGhpcy5yb290KTtpZih2YWx1ZXNUcmVlPT09bnVsbClcbnJldHVybltdO3JldHVybiB2YWx1ZXNUcmVlO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuaXRlbXNUcmVlMj1mdW5jdGlvbihub2RlKXt2YXIgdmFsdWVzVHJlZUZvck5vZGU9W107dmFyIGNoaWxkQm91bmRhYmxlcz1ub2RlLmdldENoaWxkQm91bmRhYmxlcygpO2Zvcih2YXIgaT0wO2k8Y2hpbGRCb3VuZGFibGVzLmxlbmd0aDtpKyspe3ZhciBjaGlsZEJvdW5kYWJsZT1jaGlsZEJvdW5kYWJsZXNbaV07aWYoY2hpbGRCb3VuZGFibGUgaW5zdGFuY2VvZiBqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3ROb2RlKXt2YXIgdmFsdWVzVHJlZUZvckNoaWxkPXRoaXMuaXRlbXNUcmVlKGNoaWxkQm91bmRhYmxlKTtpZih2YWx1ZXNUcmVlRm9yQ2hpbGQhPW51bGwpXG52YWx1ZXNUcmVlRm9yTm9kZS5wdXNoKHZhbHVlc1RyZWVGb3JDaGlsZCk7fWVsc2UgaWYoY2hpbGRCb3VuZGFibGUgaW5zdGFuY2VvZiBqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZSl7dmFsdWVzVHJlZUZvck5vZGUucHVzaChjaGlsZEJvdW5kYWJsZS5nZXRJdGVtKCkpO31lbHNle2pzdHMudXRpbC5Bc3NlcnQuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKTt9fVxuaWYodmFsdWVzVHJlZUZvck5vZGUubGVuZ3RoPD0wKVxucmV0dXJuIG51bGw7cmV0dXJuIHZhbHVlc1RyZWVGb3JOb2RlO307anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHNlYXJjaEJvdW5kcyxpdGVtKXtpZighdGhpcy5idWlsdCl7dGhpcy5idWlsZCgpO31cbmlmKHRoaXMuaXRlbUJvdW5kYWJsZXMubGVuZ3RoPT09MCl7anN0cy51dGlsLkFzc2VydC5pc1RydWUodGhpcy5yb290LmdldEJvdW5kcygpPT1udWxsKTt9XG5pZih0aGlzLmdldEludGVyc2VjdHNPcCgpLmludGVyc2VjdHModGhpcy5yb290LmdldEJvdW5kcygpLHNlYXJjaEJvdW5kcykpe3JldHVybiB0aGlzLnJlbW92ZTIoc2VhcmNoQm91bmRzLHRoaXMucm9vdCxpdGVtKTt9XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5yZW1vdmUyPWZ1bmN0aW9uKHNlYXJjaEJvdW5kcyxub2RlLGl0ZW0pe3ZhciBmb3VuZD10aGlzLnJlbW92ZUl0ZW0obm9kZSxpdGVtKTtpZihmb3VuZClcbnJldHVybiB0cnVlO3ZhciBjaGlsZFRvUHJ1bmU9bnVsbDt2YXIgY2hpbGRCb3VuZGFibGVzPW5vZGUuZ2V0Q2hpbGRCb3VuZGFibGVzKCk7Zm9yKHZhciBpPTA7aTxjaGlsZEJvdW5kYWJsZXMubGVuZ3RoO2krKyl7dmFyIGNoaWxkQm91bmRhYmxlPWNoaWxkQm91bmRhYmxlc1tpXTtpZighdGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKGNoaWxkQm91bmRhYmxlLmdldEJvdW5kcygpLHNlYXJjaEJvdW5kcykpe2NvbnRpbnVlO31cbmlmKGNoaWxkQm91bmRhYmxlIGluc3RhbmNlb2YganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZSl7Zm91bmQ9dGhpcy5yZW1vdmUoc2VhcmNoQm91bmRzLGNoaWxkQm91bmRhYmxlLGl0ZW0pO2lmKGZvdW5kKXtjaGlsZFRvUHJ1bmU9Y2hpbGRCb3VuZGFibGU7YnJlYWs7fX19XG5pZihjaGlsZFRvUHJ1bmUhPW51bGwpe2lmKGNoaWxkVG9QcnVuZS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5sZW5ndGg9PT0wKXtjaGlsZEJvdW5kYWJsZXMuc3BsaWNlKGNoaWxkQm91bmRhYmxlcy5pbmRleE9mKGNoaWxkVG9QcnVuZSksMSk7fX1cbnJldHVybiBmb3VuZDt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLnJlbW92ZUl0ZW09ZnVuY3Rpb24obm9kZSxpdGVtKXt2YXIgY2hpbGRUb1JlbW92ZT1udWxsO3ZhciBjaGlsZEJvdW5kYWJsZXM9bm9kZS5nZXRDaGlsZEJvdW5kYWJsZXMoKTtmb3IodmFyIGk9MDtpPGNoaWxkQm91bmRhYmxlcy5sZW5ndGg7aSsrKXt2YXIgY2hpbGRCb3VuZGFibGU9Y2hpbGRCb3VuZGFibGVzW2ldO2lmKGNoaWxkQm91bmRhYmxlIGluc3RhbmNlb2YganN0cy5pbmRleC5zdHJ0cmVlLkl0ZW1Cb3VuZGFibGUpe2lmKGNoaWxkQm91bmRhYmxlLmdldEl0ZW0oKT09PWl0ZW0pXG5jaGlsZFRvUmVtb3ZlPWNoaWxkQm91bmRhYmxlO319XG5pZihjaGlsZFRvUmVtb3ZlIT09bnVsbCl7Y2hpbGRCb3VuZGFibGVzLnNwbGljZShjaGlsZEJvdW5kYWJsZXMuaW5kZXhPZihjaGlsZFRvUmVtb3ZlKSwxKTtyZXR1cm4gdHJ1ZTt9XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3RTVFJ0cmVlLnByb3RvdHlwZS5ib3VuZGFibGVzQXRMZXZlbD1mdW5jdGlvbihsZXZlbCl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXt0aGlzLmJvdW5kYWJsZXNBdExldmVsMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbnZhciBib3VuZGFibGVzPVtdO3RoaXMuYm91bmRhYmxlc0F0TGV2ZWwyKGxldmVsLHRoaXMucm9vdCxib3VuZGFibGVzKTtyZXR1cm4gYm91bmRhYmxlczt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmJvdW5kYWJsZXNBdExldmVsMj1mdW5jdGlvbihsZXZlbCx0b3AsYm91bmRhYmxlcyl7anN0cy51dGlsLkFzc2VydC5pc1RydWUobGV2ZWw+LTIpO2lmKHRvcC5nZXRMZXZlbCgpPT09bGV2ZWwpe2JvdW5kYWJsZXMuYWRkKHRvcCk7cmV0dXJuO31cbnZhciBjaGlsZEJvdW5kYWJsZXM9bm9kZS5nZXRDaGlsZEJvdW5kYWJsZXMoKTtmb3IodmFyIGk9MDtpPGNoaWxkQm91bmRhYmxlcy5sZW5ndGg7aSsrKXt2YXIgYm91bmRhYmxlPWNoaWxkQm91bmRhYmxlc1tpXTtpZihib3VuZGFibGUgaW5zdGFuY2VvZiBqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3ROb2RlKXt0aGlzLmJvdW5kYWJsZXNBdExldmVsKGxldmVsLGJvdW5kYWJsZSxib3VuZGFibGVzKTt9ZWxzZXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZShib3VuZGFibGUgaW5zdGFuY2VvZiBqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZSk7aWYobGV2ZWw9PT0tMSl7Ym91bmRhYmxlcy5hZGQoYm91bmRhYmxlKTt9fX1cbnJldHVybjt9O2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmdldENvbXBhcmF0b3I9ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWU9ZnVuY3Rpb24obm9kZUNhcGFjaXR5KXtub2RlQ2FwYWNpdHk9bm9kZUNhcGFjaXR5fHxqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5ERUZBVUxUX05PREVfQ0FQQUNJVFk7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5jYWxsKHRoaXMsbm9kZUNhcGFjaXR5KTt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZT1uZXcganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZSgpO2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLmNvbnN0cnVjdG9yPWpzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlO2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS54Q29tcGFyYXRvcj1mdW5jdGlvbihvMSxvMil7cmV0dXJuIGpzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmNvbXBhcmVEb3VibGVzKGpzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS5jZW50cmVYKG8xLmdldEJvdW5kcygpKSxqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUuY2VudHJlWChvMi5nZXRCb3VuZHMoKSkpO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLnlDb21wYXJhdG9yPWZ1bmN0aW9uKG8xLG8yKXtyZXR1cm4ganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuY29tcGFyZURvdWJsZXMoanN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLmNlbnRyZVkobzEuZ2V0Qm91bmRzKCkpLGpzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS5jZW50cmVZKG8yLmdldEJvdW5kcygpKSk7fTtqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUuY2VudHJlWD1mdW5jdGlvbihlKXtyZXR1cm4ganN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLmF2ZyhlLmdldE1pblgoKSxlLmdldE1heFgoKSk7fTtqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUuY2VudHJlWT1mdW5jdGlvbihlKXtyZXR1cm4ganN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLmF2ZyhlLmdldE1pblkoKSxlLmdldE1heFkoKSk7fTtqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUuYXZnPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGErYikvMi4wO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLmludGVyc2VjdHNPcD17aW50ZXJzZWN0czpmdW5jdGlvbihhQm91bmRzLGJCb3VuZHMpe3JldHVybiBhQm91bmRzLmludGVyc2VjdHMoYkJvdW5kcyk7fX07anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXM9ZnVuY3Rpb24oY2hpbGRCb3VuZGFibGVzLG5ld0xldmVsKXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZSghKGNoaWxkQm91bmRhYmxlcy5sZW5ndGg9PT0wKSk7dmFyIG1pbkxlYWZDb3VudD1NYXRoLmNlaWwoY2hpbGRCb3VuZGFibGVzLmxlbmd0aC90aGlzLmdldE5vZGVDYXBhY2l0eSgpKTt2YXIgc29ydGVkQ2hpbGRCb3VuZGFibGVzPVtdO2Zvcih2YXIgaT0wO2k8Y2hpbGRCb3VuZGFibGVzLmxlbmd0aDtpKyspe3NvcnRlZENoaWxkQm91bmRhYmxlcy5wdXNoKGNoaWxkQm91bmRhYmxlc1tpXSk7fVxuc29ydGVkQ2hpbGRCb3VuZGFibGVzLnNvcnQodGhpcy54Q29tcGFyYXRvcik7dmFyIHZlcnRpY2FsU2xpY2VzPXRoaXMudmVydGljYWxTbGljZXMoc29ydGVkQ2hpbGRCb3VuZGFibGVzLE1hdGguY2VpbChNYXRoLnNxcnQobWluTGVhZkNvdW50KSkpO3JldHVybiB0aGlzLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXNGcm9tVmVydGljYWxTbGljZXModmVydGljYWxTbGljZXMsbmV3TGV2ZWwpO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXNGcm9tVmVydGljYWxTbGljZXM9ZnVuY3Rpb24odmVydGljYWxTbGljZXMsbmV3TGV2ZWwpe2pzdHMudXRpbC5Bc3NlcnQuaXNUcnVlKHZlcnRpY2FsU2xpY2VzLmxlbmd0aD4wKTt2YXIgcGFyZW50Qm91bmRhYmxlcz1bXTtmb3IodmFyIGk9MDtpPHZlcnRpY2FsU2xpY2VzLmxlbmd0aDtpKyspe3BhcmVudEJvdW5kYWJsZXM9cGFyZW50Qm91bmRhYmxlcy5jb25jYXQodGhpcy5jcmVhdGVQYXJlbnRCb3VuZGFibGVzRnJvbVZlcnRpY2FsU2xpY2UodmVydGljYWxTbGljZXNbaV0sbmV3TGV2ZWwpKTt9XG5yZXR1cm4gcGFyZW50Qm91bmRhYmxlczt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS5jcmVhdGVQYXJlbnRCb3VuZGFibGVzRnJvbVZlcnRpY2FsU2xpY2U9ZnVuY3Rpb24oY2hpbGRCb3VuZGFibGVzLG5ld0xldmVsKXtyZXR1cm4ganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuY3JlYXRlUGFyZW50Qm91bmRhYmxlcy5jYWxsKHRoaXMsY2hpbGRCb3VuZGFibGVzLG5ld0xldmVsKTt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS52ZXJ0aWNhbFNsaWNlcz1mdW5jdGlvbihjaGlsZEJvdW5kYWJsZXMsc2xpY2VDb3VudCl7dmFyIHNsaWNlQ2FwYWNpdHk9TWF0aC5jZWlsKGNoaWxkQm91bmRhYmxlcy5sZW5ndGgvc2xpY2VDb3VudCk7dmFyIHNsaWNlcz1bXTt2YXIgaT0wLGJvdW5kYWJsZXNBZGRlZFRvU2xpY2UsY2hpbGRCb3VuZGFibGU7Zm9yKHZhciBqPTA7ajxzbGljZUNvdW50O2orKyl7c2xpY2VzW2pdPVtdO2JvdW5kYWJsZXNBZGRlZFRvU2xpY2U9MDt3aGlsZShpPGNoaWxkQm91bmRhYmxlcy5sZW5ndGgmJmJvdW5kYWJsZXNBZGRlZFRvU2xpY2U8c2xpY2VDYXBhY2l0eSl7Y2hpbGRCb3VuZGFibGU9Y2hpbGRCb3VuZGFibGVzW2krK107c2xpY2VzW2pdLnB1c2goY2hpbGRCb3VuZGFibGUpO2JvdW5kYWJsZXNBZGRlZFRvU2xpY2UrKzt9fVxucmV0dXJuIHNsaWNlczt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLkRFRkFVTFRfTk9ERV9DQVBBQ0lUWT0xMDtqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUuY3JlYXRlTm9kZT1mdW5jdGlvbihsZXZlbCl7dmFyIGFic3RyYWN0Tm9kZT1uZXcganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZShsZXZlbCk7YWJzdHJhY3ROb2RlLmNvbXB1dGVCb3VuZHM9ZnVuY3Rpb24oKXt2YXIgYm91bmRzPW51bGw7dmFyIGNoaWxkQm91bmRhYmxlcz10aGlzLmdldENoaWxkQm91bmRhYmxlcygpO2Zvcih2YXIgaT0wO2k8Y2hpbGRCb3VuZGFibGVzLmxlbmd0aDtpKyspe3ZhciBjaGlsZEJvdW5kYWJsZT1jaGlsZEJvdW5kYWJsZXNbaV07aWYoYm91bmRzPT09bnVsbCl7Ym91bmRzPW5ldyBqc3RzLmdlb20uRW52ZWxvcGUoY2hpbGRCb3VuZGFibGUuZ2V0Qm91bmRzKCkpO31lbHNle2JvdW5kcy5leHBhbmRUb0luY2x1ZGUoY2hpbGRCb3VuZGFibGUuZ2V0Qm91bmRzKCkpO319XG5yZXR1cm4gYm91bmRzO307cmV0dXJuIGFic3RyYWN0Tm9kZTt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS5nZXRJbnRlcnNlY3RzT3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzT3A7fTtqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKGl0ZW1FbnYsaXRlbSl7aWYoaXRlbUVudi5pc051bGwoKSl7cmV0dXJuO31cbmpzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmluc2VydC5jYWxsKHRoaXMsaXRlbUVudixpdGVtKTt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbihzZWFyY2hFbnYsdmlzaXRvcil7cmV0dXJuIGpzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLnF1ZXJ5LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oaXRlbUVudixpdGVtKXtyZXR1cm4ganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyxpdGVtRW52LGl0ZW0pO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4ganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUuc2l6ZS5jYWxsKHRoaXMpO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLmRlcHRoPWZ1bmN0aW9uKCl7cmV0dXJuIGpzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmRlcHRoLmNhbGwodGhpcyk7fTtqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUuZ2V0Q29tcGFyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnlDb21wYXJhdG9yO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLm5lYXJlc3ROZWlnaGJvdXI9ZnVuY3Rpb24oaXRlbURpc3Qpe3ZhciBicD1uZXcganN0cy5pbmRleC5zdHJ0cmVlLkJvdW5kYWJsZVBhaXIodGhpcy5nZXRSb290KCksdGhpcy5nZXRSb290KCksaXRlbURpc3QpO3JldHVybiB0aGlzLm5lYXJlc3ROZWlnaGJvdXI0KGJwKTt9O2pzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlLnByb3RvdHlwZS5uZWFyZXN0TmVpZ2hib3VyMj1mdW5jdGlvbihlbnYsaXRlbSxpdGVtRGlzdCl7dmFyIGJuZD1uZXcganN0cy5pbmRleC5zdHJ0cmVlLkl0ZW1Cb3VuZGFibGUoZW52LGl0ZW0pO3ZhciBicD1uZXcganN0cy5pbmRleC5zdHJ0cmVlLkJvdW5kYWJsZVBhaXIodGhpcy5nZXRSb290KCksYm5kLGl0ZW1EaXN0KTtyZXR1cm4gdGhpcy5uZWFyZXN0TmVpZ2hib3VyNChicClbMF07fTtqc3RzLmluZGV4LnN0cnRyZWUuU1RSdHJlZS5wcm90b3R5cGUubmVhcmVzdE5laWdoYm91cjM9ZnVuY3Rpb24odHJlZSxpdGVtRGlzdCl7dmFyIGJwPW5ldyBqc3RzLmluZGV4LnN0cnRyZWUuQm91bmRhYmxlUGFpcih0aGlzLmdldFJvb3QoKSx0cmVlLmdldFJvb3QoKSxpdGVtRGlzdCk7cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cjQoYnApO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLm5lYXJlc3ROZWlnaGJvdXI0PWZ1bmN0aW9uKGluaXRCbmRQYWlyKXtyZXR1cm4gdGhpcy5uZWFyZXN0TmVpZ2hib3VyNShpbml0Qm5kUGFpcixEb3VibGUuUE9TSVRJVkVfSU5GSU5JVFkpO307anN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUucHJvdG90eXBlLm5lYXJlc3ROZWlnaGJvdXI1PWZ1bmN0aW9uKGluaXRCbmRQYWlyLG1heERpc3RhbmNlKXt2YXIgZGlzdGFuY2VMb3dlckJvdW5kPW1heERpc3RhbmNlO3ZhciBtaW5QYWlyPW51bGw7dmFyIHByaVE9W107cHJpUS5wdXNoKGluaXRCbmRQYWlyKTt3aGlsZSghcHJpUS5pc0VtcHR5KCkmJmRpc3RhbmNlTG93ZXJCb3VuZD4wLjApe3ZhciBibmRQYWlyPXByaVEucG9wKCk7dmFyIGN1cnJlbnREaXN0YW5jZT1ibmRQYWlyLmdldERpc3RhbmNlKCk7aWYoY3VycmVudERpc3RhbmNlPj1kaXN0YW5jZUxvd2VyQm91bmQpXG5icmVhaztpZihibmRQYWlyLmlzTGVhdmVzKCkpe2Rpc3RhbmNlTG93ZXJCb3VuZD1jdXJyZW50RGlzdGFuY2U7bWluUGFpcj1ibmRQYWlyO31lbHNle2JuZFBhaXIuZXhwYW5kVG9RdWV1ZShwcmlRLGRpc3RhbmNlTG93ZXJCb3VuZCk7fX1cbnJldHVyblttaW5QYWlyLmdldEJvdW5kYWJsZSgwKS5nZXRJdGVtKCksbWluUGFpci5nZXRCb3VuZGFibGUoMSkuZ2V0SXRlbSgpXTt9O2pzdHMubm9kaW5nLlNlZ21lbnRTdHJpbmc9ZnVuY3Rpb24oKXt9O2pzdHMubm9kaW5nLlNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmdldERhdGE9anN0cy5hYnN0cmFjdEZ1bmM7anN0cy5ub2RpbmcuU2VnbWVudFN0cmluZy5wcm90b3R5cGUuc2V0RGF0YT1qc3RzLmFic3RyYWN0RnVuYztqc3RzLm5vZGluZy5TZWdtZW50U3RyaW5nLnByb3RvdHlwZS5zaXplPWpzdHMuYWJzdHJhY3RGdW5jO2pzdHMubm9kaW5nLlNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGU9anN0cy5hYnN0cmFjdEZ1bmM7anN0cy5ub2RpbmcuU2VnbWVudFN0cmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9anN0cy5hYnN0cmFjdEZ1bmM7anN0cy5ub2RpbmcuU2VnbWVudFN0cmluZy5wcm90b3R5cGUuaXNDbG9zZWQ9anN0cy5hYnN0cmFjdEZ1bmM7anN0cy5ub2RpbmcuTm9kYWJsZVNlZ21lbnRTdHJpbmc9ZnVuY3Rpb24oKXt9O2pzdHMubm9kaW5nLk5vZGFibGVTZWdtZW50U3RyaW5nLnByb3RvdHlwZT1uZXcganN0cy5ub2RpbmcuU2VnbWVudFN0cmluZygpO2pzdHMubm9kaW5nLk5vZGFibGVTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5hZGRJbnRlcnNlY3Rpb249anN0cy5hYnN0cmFjdEZ1bmM7anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nPWZ1bmN0aW9uKHB0cyxkYXRhKXt0aGlzLm5vZGVMaXN0PW5ldyBqc3RzLm5vZGluZy5TZWdtZW50Tm9kZUxpc3QodGhpcyk7dGhpcy5wdHM9cHRzO3RoaXMuZGF0YT1kYXRhO307anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLnByb3RvdHlwZT1uZXcganN0cy5ub2RpbmcuTm9kYWJsZVNlZ21lbnRTdHJpbmcoKTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcuY29uc3RydWN0b3I9anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nO2pzdHMubm9kaW5nLk5vZGVkU2VnbWVudFN0cmluZy5nZXROb2RlZFN1YnN0cmluZ3M9ZnVuY3Rpb24oc2VnU3RyaW5ncyl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe2pzdHMubm9kaW5nLk5vZGVkU2VnbWVudFN0cmluZy5nZXROb2RlZFN1YnN0cmluZ3MyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudmFyIHJlc3VsdEVkZ2VsaXN0PW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KCk7anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLmdldE5vZGVkU3Vic3RyaW5nczIoc2VnU3RyaW5ncyxyZXN1bHRFZGdlbGlzdCk7cmV0dXJuIHJlc3VsdEVkZ2VsaXN0O307anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLmdldE5vZGVkU3Vic3RyaW5nczI9ZnVuY3Rpb24oc2VnU3RyaW5ncyxyZXN1bHRFZGdlbGlzdCl7Zm9yKHZhciBpPXNlZ1N0cmluZ3MuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBzcz1pLm5leHQoKTtzcy5nZXROb2RlTGlzdCgpLmFkZFNwbGl0RWRnZXMocmVzdWx0RWRnZWxpc3QpO319O2pzdHMubm9kaW5nLk5vZGVkU2VnbWVudFN0cmluZy5wcm90b3R5cGUubm9kZUxpc3Q9bnVsbDtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLnB0cz1udWxsO2pzdHMubm9kaW5nLk5vZGVkU2VnbWVudFN0cmluZy5wcm90b3R5cGUuZGF0YT1udWxsO2pzdHMubm9kaW5nLk5vZGVkU2VnbWVudFN0cmluZy5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGE7fTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLnNldERhdGE9ZnVuY3Rpb24oZGF0YSl7dGhpcy5kYXRhPWRhdGE7fTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmdldE5vZGVMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZUxpc3Q7fTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHMubGVuZ3RoO307anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLnB0c1tpXTt9O2pzdHMubm9kaW5nLk5vZGVkU2VnbWVudFN0cmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHM7fTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmlzQ2xvc2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRzWzBdLmVxdWFscyh0aGlzLnB0c1t0aGlzLnB0cy5sZW5ndGgtMV0pO307anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5nZXRTZWdtZW50T2N0YW50PWZ1bmN0aW9uKGluZGV4KXtpZihpbmRleD09PXRoaXMucHRzLmxlbmd0aC0xKVxucmV0dXJuLTE7cmV0dXJuIHRoaXMuc2FmZU9jdGFudCh0aGlzLmdldENvb3JkaW5hdGUoaW5kZXgpLHRoaXMuZ2V0Q29vcmRpbmF0ZShpbmRleCsxKSk7fTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLnNhZmVPY3RhbnQ9ZnVuY3Rpb24ocDAscDEpe2lmKHAwLmVxdWFsczJEKHAxKSlcbnJldHVybiAwO3JldHVybiBqc3RzLm5vZGluZy5PY3RhbnQub2N0YW50KHAwLHAxKTt9O2pzdHMubm9kaW5nLk5vZGVkU2VnbWVudFN0cmluZy5wcm90b3R5cGUuYWRkSW50ZXJzZWN0aW9ucz1mdW5jdGlvbihsaSxzZWdtZW50SW5kZXgsZ2VvbUluZGV4KXtmb3IodmFyIGk9MDtpPGxpLmdldEludGVyc2VjdGlvbk51bSgpO2krKyl7dGhpcy5hZGRJbnRlcnNlY3Rpb24obGksc2VnbWVudEluZGV4LGdlb21JbmRleCxpKTt9fTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmFkZEludGVyc2VjdGlvbj1mdW5jdGlvbihsaSxzZWdtZW50SW5kZXgsZ2VvbUluZGV4LGludEluZGV4KXtpZihsaSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Db29yZGluYXRlKXt0aGlzLmFkZEludGVyc2VjdGlvbjIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9XG52YXIgaW50UHQ9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGxpLmdldEludGVyc2VjdGlvbihpbnRJbmRleCkpO3RoaXMuYWRkSW50ZXJzZWN0aW9uMihpbnRQdCxzZWdtZW50SW5kZXgpO307anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5hZGRJbnRlcnNlY3Rpb24yPWZ1bmN0aW9uKGludFB0LHNlZ21lbnRJbmRleCl7dGhpcy5hZGRJbnRlcnNlY3Rpb25Ob2RlKGludFB0LHNlZ21lbnRJbmRleCk7fTtqc3RzLm5vZGluZy5Ob2RlZFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmFkZEludGVyc2VjdGlvbk5vZGU9ZnVuY3Rpb24oaW50UHQsc2VnbWVudEluZGV4KXt2YXIgbm9ybWFsaXplZFNlZ21lbnRJbmRleD1zZWdtZW50SW5kZXg7dmFyIG5leHRTZWdJbmRleD1ub3JtYWxpemVkU2VnbWVudEluZGV4KzE7aWYobmV4dFNlZ0luZGV4PHRoaXMucHRzLmxlbmd0aCl7dmFyIG5leHRQdD10aGlzLnB0c1tuZXh0U2VnSW5kZXhdO2lmKGludFB0LmVxdWFsczJEKG5leHRQdCkpe25vcm1hbGl6ZWRTZWdtZW50SW5kZXg9bmV4dFNlZ0luZGV4O319XG52YXIgZWk9dGhpcy5ub2RlTGlzdC5hZGQoaW50UHQsbm9ybWFsaXplZFNlZ21lbnRJbmRleCk7cmV0dXJuIGVpO307anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBnZW9tZXRyeUZhY3Rvcnk9bmV3IGpzdHMuZ2VvbS5HZW9tZXRyeUZhY3RvcnkoKTtyZXR1cm4gbmV3IGpzdHMuaW8uV0tUV3JpdGVyKCkud3JpdGUoZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcodGhpcy5wdHMpKTt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbkJ1aWxkZXI9ZnVuY3Rpb24oKXt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbkJ1aWxkZXIudG9JbnRBcnJheT1mdW5jdGlvbihsaXN0KXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTA7aTxsaXN0Lmxlbmd0aDtpKyspe2FycmF5W2ldPWxpc3RbaV07fVxucmV0dXJuIGFycmF5O307anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluQnVpbGRlci5nZXRDaGFpbnM9ZnVuY3Rpb24ocHRzKXtpZihhcmd1bWVudHMubGVuZ3RoPT09Mil7cmV0dXJuIGpzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbkJ1aWxkZXIuZ2V0Q2hhaW5zMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fVxucmV0dXJuIGpzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbkJ1aWxkZXIuZ2V0Q2hhaW5zMihwdHMsbnVsbCk7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW5CdWlsZGVyLmdldENoYWluczI9ZnVuY3Rpb24ocHRzLGNvbnRleHQpe3ZhciBtY0xpc3Q9W107dmFyIHN0YXJ0SW5kZXg9anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluQnVpbGRlci5nZXRDaGFpblN0YXJ0SW5kaWNlcyhwdHMpO2Zvcih2YXIgaT0wO2k8c3RhcnRJbmRleC5sZW5ndGgtMTtpKyspe3ZhciBtYz1uZXcganN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluKHB0cyxzdGFydEluZGV4W2ldLHN0YXJ0SW5kZXhbaSsxXSxjb250ZXh0KTttY0xpc3QucHVzaChtYyk7fVxucmV0dXJuIG1jTGlzdDt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbkJ1aWxkZXIuZ2V0Q2hhaW5TdGFydEluZGljZXM9ZnVuY3Rpb24ocHRzKXt2YXIgc3RhcnQ9MDt2YXIgc3RhcnRJbmRleExpc3Q9W107c3RhcnRJbmRleExpc3QucHVzaChzdGFydCk7ZG97dmFyIGxhc3Q9anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluQnVpbGRlci5maW5kQ2hhaW5FbmQocHRzLHN0YXJ0KTtzdGFydEluZGV4TGlzdC5wdXNoKGxhc3QpO3N0YXJ0PWxhc3Q7fXdoaWxlKHN0YXJ0PHB0cy5sZW5ndGgtMSk7dmFyIHN0YXJ0SW5kZXg9anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluQnVpbGRlci50b0ludEFycmF5KHN0YXJ0SW5kZXhMaXN0KTtyZXR1cm4gc3RhcnRJbmRleDt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbkJ1aWxkZXIuZmluZENoYWluRW5kPWZ1bmN0aW9uKHB0cyxzdGFydCl7dmFyIHNhZmVTdGFydD1zdGFydDt3aGlsZShzYWZlU3RhcnQ8cHRzLmxlbmd0aC0xJiZwdHNbc2FmZVN0YXJ0XS5lcXVhbHMyRChwdHNbc2FmZVN0YXJ0KzFdKSl7c2FmZVN0YXJ0Kys7fVxuaWYoc2FmZVN0YXJ0Pj1wdHMubGVuZ3RoLTEpe3JldHVybiBwdHMubGVuZ3RoLTE7fVxudmFyIGNoYWluUXVhZD1qc3RzLmdlb21ncmFwaC5RdWFkcmFudC5xdWFkcmFudChwdHNbc2FmZVN0YXJ0XSxwdHNbc2FmZVN0YXJ0KzFdKTt2YXIgbGFzdD1zdGFydCsxO3doaWxlKGxhc3Q8cHRzLmxlbmd0aCl7aWYoIXB0c1tsYXN0LTFdLmVxdWFsczJEKHB0c1tsYXN0XSkpe3ZhciBxdWFkPWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LnF1YWRyYW50KHB0c1tsYXN0LTFdLHB0c1tsYXN0XSk7aWYocXVhZCE9PWNoYWluUXVhZClcbmJyZWFrO31cbmxhc3QrKzt9XG5yZXR1cm4gbGFzdC0xO307anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dExpbmVzPVtbXSxbXV07dGhpcy5pbnRQdD1bbnVsbCxudWxsXTt0aGlzLnBhPXRoaXMuaW50UHRbMF07dGhpcy5wYj10aGlzLmludFB0WzFdO3RoaXMucmVzdWx0PWpzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5OT19JTlRFUlNFQ1RJT047fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuTk9fSU5URVJTRUNUSU9OPTA7anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLlBPSU5UX0lOVEVSU0VDVElPTj0xO2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5DT0xMSU5FQVJfSU5URVJTRUNUSU9OPTI7anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5zZXRQcmVjaXNpb25Nb2RlbD1mdW5jdGlvbihwcmVjaXNpb25Nb2RlbCl7dGhpcy5wcmVjaXNpb25Nb2RlbD1wcmVjaXNpb25Nb2RlbDt9O2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuZ2V0RW5kcG9pbnQ9ZnVuY3Rpb24oc2VnbWVudEluZGV4LHB0SW5kZXgpe3JldHVybiB0aGlzLmlucHV0TGluZXNbc2VnbWVudEluZGV4XVtwdEluZGV4XTt9O2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5jb21wdXRlRWRnZURpc3RhbmNlPWZ1bmN0aW9uKHAscDAscDEpe3ZhciBkeD1NYXRoLmFicyhwMS54LXAwLngpO3ZhciBkeT1NYXRoLmFicyhwMS55LXAwLnkpO3ZhciBkaXN0PS0xLjA7aWYocC5lcXVhbHMocDApKXtkaXN0PTAuMDt9ZWxzZSBpZihwLmVxdWFscyhwMSkpe2lmKGR4PmR5KXtkaXN0PWR4O31lbHNle2Rpc3Q9ZHk7fX1lbHNle3ZhciBwZHg9TWF0aC5hYnMocC54LXAwLngpO3ZhciBwZHk9TWF0aC5hYnMocC55LXAwLnkpO2lmKGR4PmR5KXtkaXN0PXBkeDt9ZWxzZXtkaXN0PXBkeTt9XG5pZihkaXN0PT09MC4wJiYhcC5lcXVhbHMocDApKXtkaXN0PU1hdGgubWF4KHBkeCxwZHkpO319XG5pZihkaXN0PT09MC4wJiYhcC5lcXVhbHMocDApKXt0aHJvdyBuZXcganN0cy5lcnJvci5JbGxlZ2FsQXJndW1lbnRFcnJvcignQmFkIGRpc3RhbmNlIGNhbGN1bGF0aW9uJyk7fVxucmV0dXJuIGRpc3Q7fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3Iubm9uUm9idXN0Q29tcHV0ZUVkZ2VEaXN0YW5jZT1mdW5jdGlvbihwLHAxLHAyKXt2YXIgZHg9cC54LXAxLng7dmFyIGR5PXAueS1wMS55O3ZhciBkaXN0PU1hdGguc3FydChkeCpkeCtkeSpkeSk7aWYoIShkaXN0PT09MC4wJiYhcC5lcXVhbHMocDEpKSl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ0ludmFsaWQgZGlzdGFuY2UgY2FsY3VsYXRpb24nKTt9XG5yZXR1cm4gZGlzdDt9O2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUucmVzdWx0PW51bGw7anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5pbnB1dExpbmVzPW51bGw7anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5pbnRQdD1udWxsO2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuaW50TGluZUluZGV4PW51bGw7anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5faXNQcm9wZXI9bnVsbDtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLnBhPW51bGw7anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5wYj1udWxsO2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUucHJlY2lzaW9uTW9kZWw9bnVsbDtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb249ZnVuY3Rpb24ocCxwMSxwMil7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuaXNDb2xsaW5lYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHQ9PT1qc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuQ09MTElORUFSX0lOVEVSU0VDVElPTjt9O2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbj1mdW5jdGlvbihwMSxwMixwMyxwNCl7dGhpcy5pbnB1dExpbmVzWzBdWzBdPXAxO3RoaXMuaW5wdXRMaW5lc1swXVsxXT1wMjt0aGlzLmlucHV0TGluZXNbMV1bMF09cDM7dGhpcy5pbnB1dExpbmVzWzFdWzFdPXA0O3RoaXMucmVzdWx0PXRoaXMuY29tcHV0ZUludGVyc2VjdChwMSxwMixwMyxwNCk7fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Q9ZnVuY3Rpb24ocDEscDIscTEscTIpe3Rocm93IG5ldyBqc3RzLmVycm9yLkFic3RyYWN0TWV0aG9kSW52b2NhdGlvbkVycm9yKCk7fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmlzRW5kUG9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNJbnRlcnNlY3Rpb24oKSYmIXRoaXMuX2lzUHJvcGVyO307anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5oYXNJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHQhPT1qc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuTk9fSU5URVJTRUNUSU9OO307anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5nZXRJbnRlcnNlY3Rpb25OdW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHQ7fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmdldEludGVyc2VjdGlvbj1mdW5jdGlvbihpbnRJbmRleCl7cmV0dXJuIHRoaXMuaW50UHRbaW50SW5kZXhdO307anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5jb21wdXRlSW50TGluZUluZGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5pbnRMaW5lSW5kZXg9PT1udWxsKXt0aGlzLmludExpbmVJbmRleD1bW10sW11dO3RoaXMuY29tcHV0ZUludExpbmVJbmRleCgwKTt0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoMSk7fX07anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5pc0ludGVyc2VjdGlvbj1mdW5jdGlvbihwdCl7dmFyIGk7Zm9yKGk9MDtpPHRoaXMucmVzdWx0O2krKyl7aWYodGhpcy5pbnRQdFtpXS5lcXVhbHMyRChwdCkpe3JldHVybiB0cnVlO319XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7cmV0dXJuIHRoaXMuaXNJbnRlcmlvckludGVyc2VjdGlvbjIuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbmlmKHRoaXMuaXNJbnRlcmlvckludGVyc2VjdGlvbigwKSl7cmV0dXJuIHRydWU7fVxuaWYodGhpcy5pc0ludGVyaW9ySW50ZXJzZWN0aW9uKDEpKXtyZXR1cm4gdHJ1ZTt9XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24yPWZ1bmN0aW9uKGlucHV0TGluZUluZGV4KXt2YXIgaTtmb3IoaT0wO2k8dGhpcy5yZXN1bHQ7aSsrKXtpZighKHRoaXMuaW50UHRbaV0uZXF1YWxzMkQodGhpcy5pbnB1dExpbmVzW2lucHV0TGluZUluZGV4XVswXSl8fHRoaXMuaW50UHRbaV0uZXF1YWxzMkQodGhpcy5pbnB1dExpbmVzW2lucHV0TGluZUluZGV4XVsxXSkpKXtyZXR1cm4gdHJ1ZTt9fVxucmV0dXJuIGZhbHNlO307anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5pc1Byb3Blcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGVyc2VjdGlvbigpJiZ0aGlzLl9pc1Byb3Blcjt9O2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0aW9uQWxvbmdTZWdtZW50PWZ1bmN0aW9uKHNlZ21lbnRJbmRleCxpbnRJbmRleCl7dGhpcy5jb21wdXRlSW50TGluZUluZGV4KCk7cmV0dXJuIHRoaXMuaW50UHRbaW50TGluZUluZGV4W3NlZ21lbnRJbmRleF1baW50SW5kZXhdXTt9O2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuZ2V0SW5kZXhBbG9uZ1NlZ21lbnQ9ZnVuY3Rpb24oc2VnbWVudEluZGV4LGludEluZGV4KXt0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoKTtyZXR1cm4gdGhpcy5pbnRMaW5lSW5kZXhbc2VnbWVudEluZGV4XVtpbnRJbmRleF07fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmNvbXB1dGVJbnRMaW5lSW5kZXg9ZnVuY3Rpb24oc2VnbWVudEluZGV4KXt2YXIgZGlzdDA9dGhpcy5nZXRFZGdlRGlzdGFuY2Uoc2VnbWVudEluZGV4LDApO3ZhciBkaXN0MT10aGlzLmdldEVkZ2VEaXN0YW5jZShzZWdtZW50SW5kZXgsMSk7aWYoZGlzdDA+ZGlzdDEpe3RoaXMuaW50TGluZUluZGV4W3NlZ21lbnRJbmRleF1bMF09MDt0aGlzLmludExpbmVJbmRleFtzZWdtZW50SW5kZXhdWzFdPTE7fWVsc2V7dGhpcy5pbnRMaW5lSW5kZXhbc2VnbWVudEluZGV4XVswXT0xO3RoaXMuaW50TGluZUluZGV4W3NlZ21lbnRJbmRleF1bMV09MDt9fTtqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmdldEVkZ2VEaXN0YW5jZT1mdW5jdGlvbihzZWdtZW50SW5kZXgsaW50SW5kZXgpe3ZhciBkaXN0PWpzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5jb21wdXRlRWRnZURpc3RhbmNlKHRoaXMuaW50UHRbaW50SW5kZXhdLHRoaXMuaW5wdXRMaW5lc1tzZWdtZW50SW5kZXhdWzBdLHRoaXMuaW5wdXRMaW5lc1tzZWdtZW50SW5kZXhdWzFdKTtyZXR1cm4gZGlzdDt9O2pzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3Rvcj1mdW5jdGlvbigpe2pzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt9O2pzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGU9bmV3IGpzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3RvcigpO2pzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbj1mdW5jdGlvbihwLHAxLHAyKXtpZihhcmd1bWVudHMubGVuZ3RoPT09NCl7anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudGhpcy5faXNQcm9wZXI9ZmFsc2U7aWYoanN0cy5nZW9tLkVudmVsb3BlLmludGVyc2VjdHMocDEscDIscCkpe2lmKChqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMub3JpZW50YXRpb25JbmRleChwMSxwMixwKT09PTApJiYoanN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLm9yaWVudGF0aW9uSW5kZXgocDIscDEscCk9PT0wKSl7dGhpcy5faXNQcm9wZXI9dHJ1ZTtpZihwLmVxdWFscyhwMSl8fHAuZXF1YWxzKHAyKSl7dGhpcy5faXNQcm9wZXI9ZmFsc2U7fVxudGhpcy5yZXN1bHQ9anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLlBPSU5UX0lOVEVSU0VDVElPTjtyZXR1cm47fX1cbnRoaXMucmVzdWx0PWpzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5OT19JTlRFUlNFQ1RJT047fTtqc3RzLmFsZ29yaXRobS5Sb2J1c3RMaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Q9ZnVuY3Rpb24ocDEscDIscTEscTIpe3RoaXMuX2lzUHJvcGVyPWZhbHNlO2lmKCFqc3RzLmdlb20uRW52ZWxvcGUuaW50ZXJzZWN0cyhwMSxwMixxMSxxMikpe3JldHVybiBqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuTk9fSU5URVJTRUNUSU9OO31cbnZhciBQcTE9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLm9yaWVudGF0aW9uSW5kZXgocDEscDIscTEpO3ZhciBQcTI9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLm9yaWVudGF0aW9uSW5kZXgocDEscDIscTIpO2lmKChQcTE+MCYmUHEyPjApfHwoUHExPDAmJlBxMjwwKSl7cmV0dXJuIGpzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5OT19JTlRFUlNFQ1RJT047fVxudmFyIFFwMT1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMub3JpZW50YXRpb25JbmRleChxMSxxMixwMSk7dmFyIFFwMj1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMub3JpZW50YXRpb25JbmRleChxMSxxMixwMik7aWYoKFFwMT4wJiZRcDI+MCl8fChRcDE8MCYmUXAyPDApKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLk5PX0lOVEVSU0VDVElPTjt9XG52YXIgY29sbGluZWFyPVBxMT09PTAmJlBxMj09PTAmJlFwMT09PTAmJlFwMj09PTA7aWYoY29sbGluZWFyKXtyZXR1cm4gdGhpcy5jb21wdXRlQ29sbGluZWFySW50ZXJzZWN0aW9uKHAxLHAyLHExLHEyKTt9XG5pZihQcTE9PT0wfHxQcTI9PT0wfHxRcDE9PT0wfHxRcDI9PT0wKXt0aGlzLl9pc1Byb3Blcj1mYWxzZTtpZihwMS5lcXVhbHMyRChxMSl8fHAxLmVxdWFsczJEKHEyKSl7dGhpcy5pbnRQdFswXT1wMTt9ZWxzZSBpZihwMi5lcXVhbHMyRChxMSl8fHAyLmVxdWFsczJEKHEyKSl7dGhpcy5pbnRQdFswXT1wMjt9XG5lbHNlIGlmKFBxMT09PTApe3RoaXMuaW50UHRbMF09bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHExKTt9ZWxzZSBpZihQcTI9PT0wKXt0aGlzLmludFB0WzBdPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShxMik7fWVsc2UgaWYoUXAxPT09MCl7dGhpcy5pbnRQdFswXT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUocDEpO31lbHNlIGlmKFFwMj09PTApe3RoaXMuaW50UHRbMF09bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHAyKTt9fWVsc2V7dGhpcy5faXNQcm9wZXI9dHJ1ZTt0aGlzLmludFB0WzBdPXRoaXMuaW50ZXJzZWN0aW9uKHAxLHAyLHExLHEyKTt9XG5yZXR1cm4ganN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLlBPSU5UX0lOVEVSU0VDVElPTjt9O2pzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUNvbGxpbmVhckludGVyc2VjdGlvbj1mdW5jdGlvbihwMSxwMixxMSxxMil7dmFyIHAxcTFwMj1qc3RzLmdlb20uRW52ZWxvcGUuaW50ZXJzZWN0cyhwMSxwMixxMSk7dmFyIHAxcTJwMj1qc3RzLmdlb20uRW52ZWxvcGUuaW50ZXJzZWN0cyhwMSxwMixxMik7dmFyIHExcDFxMj1qc3RzLmdlb20uRW52ZWxvcGUuaW50ZXJzZWN0cyhxMSxxMixwMSk7dmFyIHExcDJxMj1qc3RzLmdlb20uRW52ZWxvcGUuaW50ZXJzZWN0cyhxMSxxMixwMik7aWYocDFxMXAyJiZwMXEycDIpe3RoaXMuaW50UHRbMF09cTE7dGhpcy5pbnRQdFsxXT1xMjtyZXR1cm4ganN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLkNPTExJTkVBUl9JTlRFUlNFQ1RJT047fVxuaWYocTFwMXEyJiZxMXAycTIpe3RoaXMuaW50UHRbMF09cDE7dGhpcy5pbnRQdFsxXT1wMjtyZXR1cm4ganN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLkNPTExJTkVBUl9JTlRFUlNFQ1RJT047fVxuaWYocDFxMXAyJiZxMXAxcTIpe3RoaXMuaW50UHRbMF09cTE7dGhpcy5pbnRQdFsxXT1wMTtyZXR1cm4gcTEuZXF1YWxzKHAxKSYmIXAxcTJwMiYmIXExcDJxMj9qc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuUE9JTlRfSU5URVJTRUNUSU9OOmpzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5DT0xMSU5FQVJfSU5URVJTRUNUSU9OO31cbmlmKHAxcTFwMiYmcTFwMnEyKXt0aGlzLmludFB0WzBdPXExO3RoaXMuaW50UHRbMV09cDI7cmV0dXJuIHExLmVxdWFscyhwMikmJiFwMXEycDImJiFxMXAxcTI/anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLlBPSU5UX0lOVEVSU0VDVElPTjpqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuQ09MTElORUFSX0lOVEVSU0VDVElPTjt9XG5pZihwMXEycDImJnExcDFxMil7dGhpcy5pbnRQdFswXT1xMjt0aGlzLmludFB0WzFdPXAxO3JldHVybiBxMi5lcXVhbHMocDEpJiYhcDFxMXAyJiYhcTFwMnEyP2pzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5QT0lOVF9JTlRFUlNFQ1RJT046anN0cy5hbGdvcml0aG0uTGluZUludGVyc2VjdG9yLkNPTExJTkVBUl9JTlRFUlNFQ1RJT047fVxuaWYocDFxMnAyJiZxMXAycTIpe3RoaXMuaW50UHRbMF09cTI7dGhpcy5pbnRQdFsxXT1wMjtyZXR1cm4gcTIuZXF1YWxzKHAyKSYmIXAxcTFwMiYmIXExcDFxMj9qc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuUE9JTlRfSU5URVJTRUNUSU9OOmpzdHMuYWxnb3JpdGhtLkxpbmVJbnRlcnNlY3Rvci5DT0xMSU5FQVJfSU5URVJTRUNUSU9OO31cbnJldHVybiBqc3RzLmFsZ29yaXRobS5MaW5lSW50ZXJzZWN0b3IuTk9fSU5URVJTRUNUSU9OO307anN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24ocDEscDIscTEscTIpe3ZhciBpbnRQdD10aGlzLmludGVyc2VjdGlvbldpdGhOb3JtYWxpemF0aW9uKHAxLHAyLHExLHEyKTtpZighdGhpcy5pc0luU2VnbWVudEVudmVsb3BlcyhpbnRQdCkpe2ludFB0PWpzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yLmdldEludGVyc2VjdGlvbihwMSxwMixxMSxxMik7fVxuaWYodGhpcy5wcmVjaXNpb25Nb2RlbCE9PW51bGwpe3RoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2UoaW50UHQpO31cbnJldHVybiBpbnRQdDt9O2pzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuaW50ZXJzZWN0aW9uV2l0aE5vcm1hbGl6YXRpb249ZnVuY3Rpb24ocDEscDIscTEscTIpe3ZhciBuMT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUocDEpO3ZhciBuMj1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUocDIpO3ZhciBuMz1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUocTEpO3ZhciBuND1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUocTIpO3ZhciBub3JtUHQ9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7dGhpcy5ub3JtYWxpemVUb0VudkNlbnRyZShuMSxuMixuMyxuNCxub3JtUHQpO3ZhciBpbnRQdD10aGlzLnNhZmVIQ29vcmRpbmF0ZUludGVyc2VjdGlvbihuMSxuMixuMyxuNCk7aW50UHQueCs9bm9ybVB0Lng7aW50UHQueSs9bm9ybVB0Lnk7cmV0dXJuIGludFB0O307anN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5zYWZlSENvb3JkaW5hdGVJbnRlcnNlY3Rpb249ZnVuY3Rpb24ocDEscDIscTEscTIpe3ZhciBpbnRQdD1udWxsO3RyeXtpbnRQdD1qc3RzLmFsZ29yaXRobS5IQ29vcmRpbmF0ZS5pbnRlcnNlY3Rpb24ocDEscDIscTEscTIpO31jYXRjaChlKXtpZihlIGluc3RhbmNlb2YganN0cy5lcnJvci5Ob3RSZXByZXNlbnRhYmxlRXJyb3Ipe2ludFB0PWpzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yLmdldEludGVyc2VjdGlvbihwMSxwMixxMSxxMik7fWVsc2V7dGhyb3cgZTt9fVxucmV0dXJuIGludFB0O307anN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5ub3JtYWxpemVUb01pbmltdW09ZnVuY3Rpb24objEsbjIsbjMsbjQsbm9ybVB0KXtub3JtUHQueD10aGlzLnNtYWxsZXN0SW5BYnNWYWx1ZShuMS54LG4yLngsbjMueCxuNC54KTtub3JtUHQueT10aGlzLnNtYWxsZXN0SW5BYnNWYWx1ZShuMS55LG4yLnksbjMueSxuNC55KTtuMS54LT1ub3JtUHQueDtuMS55LT1ub3JtUHQueTtuMi54LT1ub3JtUHQueDtuMi55LT1ub3JtUHQueTtuMy54LT1ub3JtUHQueDtuMy55LT1ub3JtUHQueTtuNC54LT1ub3JtUHQueDtuNC55LT1ub3JtUHQueTt9O2pzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUubm9ybWFsaXplVG9FbnZDZW50cmU9ZnVuY3Rpb24objAwLG4wMSxuMTAsbjExLG5vcm1QdCl7dmFyIG1pblgwPW4wMC54PG4wMS54P24wMC54Om4wMS54O3ZhciBtaW5ZMD1uMDAueTxuMDEueT9uMDAueTpuMDEueTt2YXIgbWF4WDA9bjAwLng+bjAxLng/bjAwLng6bjAxLng7dmFyIG1heFkwPW4wMC55Pm4wMS55P24wMC55Om4wMS55O3ZhciBtaW5YMT1uMTAueDxuMTEueD9uMTAueDpuMTEueDt2YXIgbWluWTE9bjEwLnk8bjExLnk/bjEwLnk6bjExLnk7dmFyIG1heFgxPW4xMC54Pm4xMS54P24xMC54Om4xMS54O3ZhciBtYXhZMT1uMTAueT5uMTEueT9uMTAueTpuMTEueTt2YXIgaW50TWluWD1taW5YMD5taW5YMT9taW5YMDptaW5YMTt2YXIgaW50TWF4WD1tYXhYMDxtYXhYMT9tYXhYMDptYXhYMTt2YXIgaW50TWluWT1taW5ZMD5taW5ZMT9taW5ZMDptaW5ZMTt2YXIgaW50TWF4WT1tYXhZMDxtYXhZMT9tYXhZMDptYXhZMTt2YXIgaW50TWlkWD0oaW50TWluWCtpbnRNYXhYKS8yLjA7dmFyIGludE1pZFk9KGludE1pblkraW50TWF4WSkvMi4wO25vcm1QdC54PWludE1pZFg7bm9ybVB0Lnk9aW50TWlkWTtuMDAueC09bm9ybVB0Lng7bjAwLnktPW5vcm1QdC55O24wMS54LT1ub3JtUHQueDtuMDEueS09bm9ybVB0Lnk7bjEwLngtPW5vcm1QdC54O24xMC55LT1ub3JtUHQueTtuMTEueC09bm9ybVB0Lng7bjExLnktPW5vcm1QdC55O307anN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5zbWFsbGVzdEluQWJzVmFsdWU9ZnVuY3Rpb24oeDEseDIseDMseDQpe3ZhciB4PXgxO3ZhciB4YWJzPU1hdGguYWJzKHgpO2lmKE1hdGguYWJzKHgyKTx4YWJzKXt4PXgyO3hhYnM9TWF0aC5hYnMoeDIpO31cbmlmKE1hdGguYWJzKHgzKTx4YWJzKXt4PXgzO3hhYnM9TWF0aC5hYnMoeDMpO31cbmlmKE1hdGguYWJzKHg0KTx4YWJzKXt4PXg0O31cbnJldHVybiB4O307anN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5pc0luU2VnbWVudEVudmVsb3Blcz1mdW5jdGlvbihpbnRQdCl7dmFyIGVudjA9bmV3IGpzdHMuZ2VvbS5FbnZlbG9wZSh0aGlzLmlucHV0TGluZXNbMF1bMF0sdGhpcy5pbnB1dExpbmVzWzBdWzFdKTt2YXIgZW52MT1uZXcganN0cy5nZW9tLkVudmVsb3BlKHRoaXMuaW5wdXRMaW5lc1sxXVswXSx0aGlzLmlucHV0TGluZXNbMV1bMV0pO3JldHVybiBlbnYwLmNvbnRhaW5zKGludFB0KSYmZW52MS5jb250YWlucyhpbnRQdCk7fTtqc3RzLmFsZ29yaXRobS5IQ29vcmRpbmF0ZT1mdW5jdGlvbigpe3RoaXMueD0wLjA7dGhpcy55PTAuMDt0aGlzLnc9MS4wO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXt0aGlzLmluaXRGcm9tMUNvb3JkaW5hdGUoYXJndW1lbnRzWzBdKTt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09MiYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7dGhpcy5pbml0RnJvbTJDb29yZGluYXRlcyhhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09MiYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmFsZ29yaXRobS5IQ29vcmRpbmF0ZSl7dGhpcy5pbml0RnJvbTJIQ29vcmRpbmF0ZXMoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7fWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMuaW5pdEZyb21YWShhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09Myl7dGhpcy5pbml0RnJvbVhZVyhhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSk7fWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09PTQpe3RoaXMuaW5pdEZyb21YWVcoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0sYXJndW1lbnRzWzNdKTt9fTtqc3RzLmFsZ29yaXRobS5IQ29vcmRpbmF0ZS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24ocDEscDIscTEscTIpe3ZhciBweCxweSxwdyxxeCxxeSxxdyx4LHksdyx4SW50LHlJbnQ7cHg9cDEueS1wMi55O3B5PXAyLngtcDEueDtwdz1wMS54KnAyLnktcDIueCpwMS55O3F4PXExLnktcTIueTtxeT1xMi54LXExLng7cXc9cTEueCpxMi55LXEyLngqcTEueTt4PXB5KnF3LXF5KnB3O3k9cXgqcHctcHgqcXc7dz1weCpxeS1xeCpweTt4SW50PXgvdzt5SW50PXkvdztpZighaXNGaW5pdGUoeEludCl8fCFpc0Zpbml0ZSh5SW50KSl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuTm90UmVwcmVzZW50YWJsZUVycm9yKCk7fVxucmV0dXJuIG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh4SW50LHlJbnQpO307anN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUucHJvdG90eXBlLmluaXRGcm9tMUNvb3JkaW5hdGU9ZnVuY3Rpb24ocCl7dGhpcy54PXAueDt0aGlzLnk9cC55O3RoaXMudz0xLjA7fTtqc3RzLmFsZ29yaXRobS5IQ29vcmRpbmF0ZS5wcm90b3R5cGUuaW5pdEZyb20yQ29vcmRpbmF0ZXM9ZnVuY3Rpb24ocDEscDIpe3RoaXMueD1wMS55LXAyLnk7dGhpcy55PXAyLngtcDEueDt0aGlzLnc9cDEueCpwMi55LXAyLngqcDEueTt9O2pzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlLnByb3RvdHlwZS5pbml0RnJvbTJIQ29vcmRpbmF0ZXM9ZnVuY3Rpb24ocDEscDIpe3RoaXMueD1wMS55KnAyLnctcDIueSpwMS53O3RoaXMueT1wMi54KnAxLnctcDEueCpwMi53O3RoaXMudz1wMS54KnAyLnktcDIueCpwMS55O307anN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUucHJvdG90eXBlLmluaXRGcm9tWFlXPWZ1bmN0aW9uKHgseSx3KXt0aGlzLng9eDt0aGlzLnk9eTt0aGlzLnc9dzt9O2pzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlLnByb3RvdHlwZS5pbml0RnJvbVhZPWZ1bmN0aW9uKHgseSl7dGhpcy54PXg7dGhpcy55PXk7dGhpcy53PTEuMDt9O2pzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlLnByb3RvdHlwZS5pbml0RnJvbTRDb29yZGluYXRlcz1mdW5jdGlvbihwMSxwMixxMSxxMil7dmFyIHB4LHB5LHB3LHF4LHF5LHF3O3B4PXAxLnktcDIueTtweT1wMi54LXAxLng7cHc9cDEueCpwMi55LXAyLngqcDEueTtxeD1xMS55LXEyLnk7cXk9cTIueC1xMS54O3F3PXExLngqcTIueS1xMi54KnExLnk7dGhpcy54PXB5KnF3LXF5KnB3O3RoaXMueT1xeCpwdy1weCpxdzt0aGlzLnc9cHgqcXktcXgqcHk7fTtqc3RzLmFsZ29yaXRobS5IQ29vcmRpbmF0ZS5wcm90b3R5cGUuZ2V0WD1mdW5jdGlvbigpe3ZhciBhPXRoaXMueC90aGlzLnc7aWYoIWlzRmluaXRlKGEpKXt0aHJvdyBuZXcganN0cy5lcnJvci5Ob3RSZXByZXNlbnRhYmxlRXJyb3IoKTt9XG5yZXR1cm4gYTt9O2pzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlLnByb3RvdHlwZS5nZXRZPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy55L3RoaXMudztpZighaXNGaW5pdGUoYSkpe3Rocm93IG5ldyBqc3RzLmVycm9yLk5vdFJlcHJlc2VudGFibGVFcnJvcigpO31cbnJldHVybiBhO307anN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXt2YXIgcD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTtwLng9dGhpcy5nZXRYKCk7cC55PXRoaXMuZ2V0WSgpO3JldHVybiBwO307anN0cy5nZW9tLkxpbmVTZWdtZW50PWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApe3RoaXMucDA9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7dGhpcy5wMT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7dGhpcy5wMD1hcmd1bWVudHNbMF0ucDA7dGhpcy5wMT1hcmd1bWVudHNbMF0ucDE7fWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMucDA9YXJndW1lbnRzWzBdO3RoaXMucDE9YXJndW1lbnRzWzFdO31lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PT00KXt0aGlzLnAwPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt0aGlzLnAxPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShhcmd1bWVudHNbMl0sYXJndW1lbnRzWzNdKTt9fTtqc3RzLmdlb20uTGluZVNlZ21lbnQucHJvdG90eXBlLnAwPW51bGw7anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5wMT1udWxsO2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5taWRQb2ludD1mdW5jdGlvbihwMCxwMSl7cmV0dXJuIG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgocDAueCtwMS54KS8yLChwMC55K3AxLnkpLzIpO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKGkpe2lmKGk9PT0wKXJldHVybiB0aGlzLnAwO3JldHVybiB0aGlzLnAxO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wMC5kaXN0YW5jZSh0aGlzLnAxKTt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuaXNIb3Jpem9udGFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDAueT09PXRoaXMucDEueTt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuaXNWZXJ0aWNhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnAwLng9PT10aGlzLnAxLng7fTtqc3RzLmdlb20uTGluZVNlZ21lbnQucHJvdG90eXBlLm9yaWVudGF0aW9uSW5kZXg9ZnVuY3Rpb24oYXJnKXtpZihhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVNlZ21lbnQpe3JldHVybiB0aGlzLm9yaWVudGF0aW9uSW5kZXgxKGFyZyk7fWVsc2UgaWYoYXJnIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGUpe3JldHVybiB0aGlzLm9yaWVudGF0aW9uSW5kZXgyKGFyZyk7fX07anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5vcmllbnRhdGlvbkluZGV4MT1mdW5jdGlvbihzZWcpe3ZhciBvcmllbnQwPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5vcmllbnRhdGlvbkluZGV4KHRoaXMucDAsdGhpcy5wMSxzZWcucDApO3ZhciBvcmllbnQxPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5vcmllbnRhdGlvbkluZGV4KHRoaXMucDAsdGhpcy5wMSxzZWcucDEpO2lmKG9yaWVudDA+PTAmJm9yaWVudDE+PTApe3JldHVybiBNYXRoLm1heChvcmllbnQwLG9yaWVudDEpO31cbmlmKG9yaWVudDA8PTAmJm9yaWVudDE8PTApe3JldHVybiBNYXRoLm1heChvcmllbnQwLG9yaWVudDEpO31cbnJldHVybiAwO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5vcmllbnRhdGlvbkluZGV4Mj1mdW5jdGlvbihwKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLm9yaWVudGF0aW9uSW5kZXgodGhpcy5wMCx0aGlzLnAxLHApO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7dmFyIHRlbXA9dGhpcy5wMDt0aGlzLnAwPXRoaXMucDE7dGhpcy5wMT10ZW1wO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtpZih0aGlzLnAxLmNvbXBhcmVUbyh0aGlzLnAwKTwwKXRoaXMucmV2ZXJzZSgpO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5hbmdsZT1mdW5jdGlvbigpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMucDEueS10aGlzLnAwLnksdGhpcy5wMS54LXRoaXMucDAueCk7fTtqc3RzLmdlb20uTGluZVNlZ21lbnQucHJvdG90eXBlLm1pZFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIGpzdHMuZ2VvbS5MaW5lU2VnbWVudC5taWRQb2ludCh0aGlzLnAwLHRoaXMucDEpO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5kaXN0YW5jZT1mdW5jdGlvbihhcmcpe2lmKGFyZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lU2VnbWVudCl7cmV0dXJuIHRoaXMuZGlzdGFuY2UxKGFyZyk7fWVsc2UgaWYoYXJnIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGUpe3JldHVybiB0aGlzLmRpc3RhbmNlMihhcmcpO319O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuZGlzdGFuY2UxPWZ1bmN0aW9uKGxzKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmRpc3RhbmNlTGluZUxpbmUodGhpcy5wMCx0aGlzLnAxLGxzLnAwLGxzLnAxKTt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuZGlzdGFuY2UyPWZ1bmN0aW9uKHApe3JldHVybiBqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmUocCx0aGlzLnAwLHRoaXMucDEpO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5wb2ludEFsb25nPWZ1bmN0aW9uKHNlZ21lbnRMZW5ndGhGcmFjdGlvbil7dmFyIGNvb3JkPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO2Nvb3JkLng9dGhpcy5wMC54K3NlZ21lbnRMZW5ndGhGcmFjdGlvbioodGhpcy5wMS54LXRoaXMucDAueCk7Y29vcmQueT10aGlzLnAwLnkrc2VnbWVudExlbmd0aEZyYWN0aW9uKih0aGlzLnAxLnktdGhpcy5wMC55KTtyZXR1cm4gY29vcmQ7fTtqc3RzLmdlb20uTGluZVNlZ21lbnQucHJvdG90eXBlLnBvaW50QWxvbmdPZmZzZXQ9ZnVuY3Rpb24oc2VnbWVudExlbmd0aEZyYWN0aW9uLG9mZnNldERpc3RhbmNlKXt2YXIgc2VneD10aGlzLnAwLngrc2VnbWVudExlbmd0aEZyYWN0aW9uKih0aGlzLnAxLngtdGhpcy5wMC54KTt2YXIgc2VneT10aGlzLnAwLnkrc2VnbWVudExlbmd0aEZyYWN0aW9uKih0aGlzLnAxLnktdGhpcy5wMC55KTt2YXIgZHg9dGhpcy5wMS54LXRoaXMucDAueDt2YXIgZHk9dGhpcy5wMS55LXRoaXMucDAueTt2YXIgbGVuPU1hdGguc3FydChkeCpkeCtkeSpkeSk7dmFyIHV4PTA7dmFyIHV5PTA7aWYob2Zmc2V0RGlzdGFuY2UhPT0wKXtpZihsZW48PTApe3Rocm93XCJDYW5ub3QgY29tcHV0ZSBvZmZzZXQgZnJvbSB6ZXJvLWxlbmd0aCBsaW5lIHNlZ21lbnRcIjt9XG51eD1vZmZzZXREaXN0YW5jZSpkeC9sZW47dXk9b2Zmc2V0RGlzdGFuY2UqZHkvbGVuO31cbnZhciBvZmZzZXR4PXNlZ3gtdXk7dmFyIG9mZnNldHk9c2VneSt1eDt2YXIgY29vcmQ9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKG9mZnNldHgsb2Zmc2V0eSk7cmV0dXJuIGNvb3JkO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5wcm9qZWN0aW9uRmFjdG9yPWZ1bmN0aW9uKHApe2lmKHAuZXF1YWxzKHRoaXMucDApKVxucmV0dXJuIDAuMDtpZihwLmVxdWFscyh0aGlzLnAxKSlcbnJldHVybiAxLjA7dmFyIGR4PXRoaXMucDEueC10aGlzLnAwLng7dmFyIGR5PXRoaXMucDEueS10aGlzLnAwLnk7dmFyIGxlbjI9ZHgqZHgrZHkqZHk7dmFyIHI9KChwLngtdGhpcy5wMC54KSpkeCsocC55LXRoaXMucDAueSkqZHkpL2xlbjI7cmV0dXJuIHI7fTtqc3RzLmdlb20uTGluZVNlZ21lbnQucHJvdG90eXBlLnNlZ21lbnRGcmFjdGlvbj1mdW5jdGlvbihpbnB1dFB0KXt2YXIgc2VnRnJhYz10aGlzLnByb2plY3Rpb25GYWN0b3IoaW5wdXRQdCk7aWYoc2VnRnJhYzwwKXtzZWdGcmFjPTA7fWVsc2UgaWYoc2VnRnJhYz4xfHxpc05hTihzZWdGcmFjKSl7c2VnRnJhYz0xO31cbnJldHVybiBzZWdGcmFjO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5wcm9qZWN0PWZ1bmN0aW9uKGFyZyl7aWYoYXJnIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGUpe3JldHVybiB0aGlzLnByb2plY3QxKGFyZyk7fWVsc2UgaWYoYXJnIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTZWdtZW50KXtyZXR1cm4gdGhpcy5wcm9qZWN0MihhcmcpO319O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUucHJvamVjdDE9ZnVuY3Rpb24ocCl7aWYocC5lcXVhbHModGhpcy5wMCl8fHAuZXF1YWxzKHRoaXMucDEpKXtyZXR1cm4gbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHApO31cbnZhciByPXRoaXMucHJvamVjdGlvbkZhY3RvcihwKTt2YXIgY29vcmQ9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7Y29vcmQueD10aGlzLnAwLngrcioodGhpcy5wMS54LXRoaXMucDAueCk7Y29vcmQueT10aGlzLnAwLnkrcioodGhpcy5wMS55LXRoaXMucDAueSk7cmV0dXJuIGNvb3JkO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5wcm9qZWN0Mj1mdW5jdGlvbihzZWcpe3ZhciBwZjA9dGhpcy5wcm9qZWN0aW9uRmFjdG9yKHNlZy5wMCk7dmFyIHBmMT10aGlzLnByb2plY3Rpb25GYWN0b3Ioc2VnLnAxKTtpZihwZjA+PTEmJnBmMT49MSlyZXR1cm4gbnVsbDtpZihwZjA8PTAmJnBmMTw9MClyZXR1cm4gbnVsbDt2YXIgbmV3cDA9dGhpcy5wcm9qZWN0KHNlZy5wMCk7aWYocGYwPDApbmV3cDA9cDA7aWYocGYwPjEpbmV3cDA9cDE7dmFyIG5ld3AxPXRoaXMucHJvamVjdChzZWcucDEpO2lmKHBmMTwwLjApbmV3cDE9cDA7aWYocGYxPjEuMCluZXdwMT1wMTtyZXR1cm4gbmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudChuZXdwMCxuZXdwMSk7fTtqc3RzLmdlb20uTGluZVNlZ21lbnQucHJvdG90eXBlLmNsb3Nlc3RQb2ludD1mdW5jdGlvbihwKXt2YXIgZmFjdG9yPXRoaXMucHJvamVjdGlvbkZhY3RvcihwKTtpZihmYWN0b3I+MCYmZmFjdG9yPDEpe3JldHVybiB0aGlzLnByb2plY3QocCk7fVxudmFyIGRpc3QwPXRoaXMucDAuZGlzdGFuY2UocCk7dmFyIGRpc3QxPXRoaXMucDEuZGlzdGFuY2UocCk7aWYoZGlzdDA8ZGlzdDEpXG5yZXR1cm4gdGhpcy5wMDtyZXR1cm4gdGhpcy5wMTt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuY2xvc2VzdFBvaW50cz1mdW5jdGlvbihsaW5lKXt2YXIgaW50UHQ9dGhpcy5pbnRlcnNlY3Rpb24obGluZSk7aWYoaW50UHQhPT1udWxsKXtyZXR1cm5baW50UHQsaW50UHRdO31cbnZhciBjbG9zZXN0UHQ9W107dmFyIG1pbkRpc3RhbmNlPU51bWJlci5NQVhfVkFMVUU7dmFyIGRpc3Q7dmFyIGNsb3NlMDA9dGhpcy5jbG9zZXN0UG9pbnQobGluZS5wMCk7bWluRGlzdGFuY2U9Y2xvc2UwMC5kaXN0YW5jZShsaW5lLnAwKTtjbG9zZXN0UHRbMF09Y2xvc2UwMDtjbG9zZXN0UHRbMV09bGluZS5wMDt2YXIgY2xvc2UwMT10aGlzLmNsb3Nlc3RQb2ludChsaW5lLnAxKTtkaXN0PWNsb3NlMDEuZGlzdGFuY2UobGluZS5wMSk7aWYoZGlzdDxtaW5EaXN0YW5jZSl7bWluRGlzdGFuY2U9ZGlzdDtjbG9zZXN0UHRbMF09Y2xvc2UwMTtjbG9zZXN0UHRbMV09bGluZS5wMTt9XG52YXIgY2xvc2UxMD1saW5lLmNsb3Nlc3RQb2ludCh0aGlzLnAwKTtkaXN0PWNsb3NlMTAuZGlzdGFuY2UodGhpcy5wMCk7aWYoZGlzdDxtaW5EaXN0YW5jZSl7bWluRGlzdGFuY2U9ZGlzdDtjbG9zZXN0UHRbMF09dGhpcy5wMDtjbG9zZXN0UHRbMV09Y2xvc2UxMDt9XG52YXIgY2xvc2UxMT1saW5lLmNsb3Nlc3RQb2ludCh0aGlzLnAxKTtkaXN0PWNsb3NlMTEuZGlzdGFuY2UodGhpcy5wMSk7aWYoZGlzdDxtaW5EaXN0YW5jZSl7bWluRGlzdGFuY2U9ZGlzdDtjbG9zZXN0UHRbMF09dGhpcy5wMTtjbG9zZXN0UHRbMV09Y2xvc2UxMTt9XG5yZXR1cm4gY2xvc2VzdFB0O307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24obGluZSl7dmFyIGxpPW5ldyBqc3RzLmFsZ29yaXRobS5Sb2J1c3RMaW5lSW50ZXJzZWN0b3IoKTtsaS5jb21wdXRlSW50ZXJzZWN0aW9uKHRoaXMucDAsdGhpcy5wMSxsaW5lLnAwLGxpbmUucDEpO2lmKGxpLmhhc0ludGVyc2VjdGlvbigpKVxucmV0dXJuIGxpLmdldEludGVyc2VjdGlvbigwKTtyZXR1cm4gbnVsbDt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24obHMpe2lmKGxzIGluc3RhbmNlb2YganN0cy5nZW9tLkNvb3JkaW5hdGUpe3RoaXMuc2V0Q29vcmRpbmF0ZXMyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudGhpcy5zZXRDb29yZGluYXRlczIobHMucDAsbHMucDEpO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlczI9ZnVuY3Rpb24ocDAscDEpe3RoaXMucDAueD1wMC54O3RoaXMucDAueT1wMC55O3RoaXMucDEueD1wMS54O3RoaXMucDEueT1wMS55O307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5kaXN0YW5jZVBlcnBlbmRpY3VsYXI9ZnVuY3Rpb24ocCl7cmV0dXJuIGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZVBlcnBlbmRpY3VsYXIocCx0aGlzLnAwLHRoaXMucDEpO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS5saW5lSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGxpbmUpe3RyeXt2YXIgaW50UHQ9anN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUuaW50ZXJzZWN0aW9uKHRoaXMucDAsdGhpcy5wMSxsaW5lLnAwLGxpbmUucDEpO3JldHVybiBpbnRQdDt9Y2F0Y2goZXgpe31cbnJldHVybiBudWxsO307anN0cy5nZW9tLkxpbmVTZWdtZW50LnByb3RvdHlwZS50b0dlb21ldHJ5PWZ1bmN0aW9uKGdlb21GYWN0b3J5KXtyZXR1cm4gZ2VvbUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhbdGhpcy5wMCx0aGlzLnAxXSk7fTtqc3RzLmdlb20uTGluZVNlZ21lbnQucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihvKXtpZighKG8gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVNlZ21lbnQpKXtyZXR1cm4gZmFsc2U7fVxucmV0dXJuIHRoaXMucDAuZXF1YWxzKG8ucDApJiZ0aGlzLnAxLmVxdWFscyhvLnAxKTt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKG8pe3ZhciBjb21wMD10aGlzLnAwLmNvbXBhcmVUbyhvLnAwKTtpZihjb21wMCE9PTApcmV0dXJuIGNvbXAwO3JldHVybiB0aGlzLnAxLmNvbXBhcmVUbyhvLnAxKTt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUuZXF1YWxzVG9wbz1mdW5jdGlvbihvdGhlcil7cmV0dXJuIHRoaXMucDAuZXF1YWxzKG90aGVyLnAwKSYmdGhpcy5wMS5lcXVhbHMob3RoZXIucDEpfHx0aGlzLnAwLmVxdWFscyhvdGhlci5wMSkmJnRoaXMucDEuZXF1YWxzKG90aGVyLnAwKTt9O2pzdHMuZ2VvbS5MaW5lU2VnbWVudC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIkxJTkVTVFJJTkcoXCIrXG50aGlzLnAwLngrXCIgXCIrdGhpcy5wMC55XG4rXCIsIFwiK1xudGhpcy5wMS54K1wiIFwiK3RoaXMucDEueStcIilcIjt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbk92ZXJsYXBBY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnRlbXBFbnYxPW5ldyBqc3RzLmdlb20uRW52ZWxvcGUoKTt0aGlzLnRlbXBFbnYyPW5ldyBqc3RzLmdlb20uRW52ZWxvcGUoKTt0aGlzLm92ZXJsYXBTZWcxPW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoKTt0aGlzLm92ZXJsYXBTZWcyPW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoKTt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbk92ZXJsYXBBY3Rpb24ucHJvdG90eXBlLnRlbXBFbnYxPW51bGw7anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluT3ZlcmxhcEFjdGlvbi5wcm90b3R5cGUudGVtcEVudjI9bnVsbDtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW5PdmVybGFwQWN0aW9uLnByb3RvdHlwZS5vdmVybGFwU2VnMT1udWxsO2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbk92ZXJsYXBBY3Rpb24ucHJvdG90eXBlLm92ZXJsYXBTZWcyPW51bGw7anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluT3ZlcmxhcEFjdGlvbi5wcm90b3R5cGUub3ZlcmxhcD1mdW5jdGlvbihtYzEsc3RhcnQxLG1jMixzdGFydDIpe3RoaXMubWMxLmdldExpbmVTZWdtZW50KHN0YXJ0MSx0aGlzLm92ZXJsYXBTZWcxKTt0aGlzLm1jMi5nZXRMaW5lU2VnbWVudChzdGFydDIsdGhpcy5vdmVybGFwU2VnMik7dGhpcy5vdmVybGFwMih0aGlzLm92ZXJsYXBTZWcxLHRoaXMub3ZlcmxhcFNlZzIpO307anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluT3ZlcmxhcEFjdGlvbi5wcm90b3R5cGUub3ZlcmxhcDI9ZnVuY3Rpb24oc2VnMSxzZWcyKXt9OyhmdW5jdGlvbigpe3ZhciBNb25vdG9uZUNoYWluT3ZlcmxhcEFjdGlvbj1qc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW5PdmVybGFwQWN0aW9uO3ZhciBTaW5nbGVQYXNzTm9kZXI9anN0cy5ub2RpbmcuU2luZ2xlUGFzc05vZGVyO3ZhciBTVFJ0cmVlPWpzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlO3ZhciBOb2RlZFNlZ21lbnRTdHJpbmc9anN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nO3ZhciBNb25vdG9uZUNoYWluQnVpbGRlcj1qc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW5CdWlsZGVyO3ZhciBTZWdtZW50T3ZlcmxhcEFjdGlvbj1mdW5jdGlvbihzaSl7dGhpcy5zaT1zaTt9O1NlZ21lbnRPdmVybGFwQWN0aW9uLnByb3RvdHlwZT1uZXcgTW9ub3RvbmVDaGFpbk92ZXJsYXBBY3Rpb24oKTtTZWdtZW50T3ZlcmxhcEFjdGlvbi5jb25zdHJ1Y3Rvcj1TZWdtZW50T3ZlcmxhcEFjdGlvbjtTZWdtZW50T3ZlcmxhcEFjdGlvbi5wcm90b3R5cGUuc2k9bnVsbDtTZWdtZW50T3ZlcmxhcEFjdGlvbi5wcm90b3R5cGUub3ZlcmxhcD1mdW5jdGlvbihtYzEsc3RhcnQxLG1jMixzdGFydDIpe3ZhciBzczE9bWMxLmdldENvbnRleHQoKTt2YXIgc3MyPW1jMi5nZXRDb250ZXh0KCk7dGhpcy5zaS5wcm9jZXNzSW50ZXJzZWN0aW9ucyhzczEsc3RhcnQxLHNzMixzdGFydDIpO307anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyPWZ1bmN0aW9uKCl7dGhpcy5tb25vQ2hhaW5zPVtdO3RoaXMuaW5kZXg9bmV3IFNUUnRyZWUoKTt9O2pzdHMubm9kaW5nLk1DSW5kZXhOb2Rlci5wcm90b3R5cGU9bmV3IFNpbmdsZVBhc3NOb2RlcigpO2pzdHMubm9kaW5nLk1DSW5kZXhOb2Rlci5jb25zdHJ1Y3Rvcj1qc3RzLm5vZGluZy5NQ0luZGV4Tm9kZXI7anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyLnByb3RvdHlwZS5tb25vQ2hhaW5zPW51bGw7anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyLnByb3RvdHlwZS5pbmRleD1udWxsO2pzdHMubm9kaW5nLk1DSW5kZXhOb2Rlci5wcm90b3R5cGUuaWRDb3VudGVyPTA7anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyLnByb3RvdHlwZS5ub2RlZFNlZ1N0cmluZ3M9bnVsbDtqc3RzLm5vZGluZy5NQ0luZGV4Tm9kZXIucHJvdG90eXBlLm5PdmVybGFwcz0wO2pzdHMubm9kaW5nLk1DSW5kZXhOb2Rlci5wcm90b3R5cGUuZ2V0TW9ub3RvbmVDaGFpbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb25vQ2hhaW5zO307anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyLnByb3RvdHlwZS5nZXRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4O307anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyLnByb3RvdHlwZS5nZXROb2RlZFN1YnN0cmluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gTm9kZWRTZWdtZW50U3RyaW5nLmdldE5vZGVkU3Vic3RyaW5ncyh0aGlzLm5vZGVkU2VnU3RyaW5ncyk7fTtqc3RzLm5vZGluZy5NQ0luZGV4Tm9kZXIucHJvdG90eXBlLmNvbXB1dGVOb2Rlcz1mdW5jdGlvbihpbnB1dFNlZ1N0cmluZ3Mpe3RoaXMubm9kZWRTZWdTdHJpbmdzPWlucHV0U2VnU3RyaW5ncztmb3IodmFyIGk9aW5wdXRTZWdTdHJpbmdzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt0aGlzLmFkZChpLm5leHQoKSk7fVxudGhpcy5pbnRlcnNlY3RDaGFpbnMoKTt9O2pzdHMubm9kaW5nLk1DSW5kZXhOb2Rlci5wcm90b3R5cGUuaW50ZXJzZWN0Q2hhaW5zPWZ1bmN0aW9uKCl7dmFyIG92ZXJsYXBBY3Rpb249bmV3IFNlZ21lbnRPdmVybGFwQWN0aW9uKHRoaXMuc2VnSW50KTtmb3IodmFyIGk9MDtpPHRoaXMubW9ub0NoYWlucy5sZW5ndGg7aSsrKXt2YXIgcXVlcnlDaGFpbj10aGlzLm1vbm9DaGFpbnNbaV07dmFyIG92ZXJsYXBDaGFpbnM9dGhpcy5pbmRleC5xdWVyeShxdWVyeUNoYWluLmdldEVudmVsb3BlKCkpO2Zvcih2YXIgaj0wO2o8b3ZlcmxhcENoYWlucy5sZW5ndGg7aisrKXt2YXIgdGVzdENoYWluPW92ZXJsYXBDaGFpbnNbal07aWYodGVzdENoYWluLmdldElkKCk+cXVlcnlDaGFpbi5nZXRJZCgpKXtxdWVyeUNoYWluLmNvbXB1dGVPdmVybGFwcyh0ZXN0Q2hhaW4sb3ZlcmxhcEFjdGlvbik7dGhpcy5uT3ZlcmxhcHMrKzt9XG5pZih0aGlzLnNlZ0ludC5pc0RvbmUoKSlcbnJldHVybjt9fX07anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oc2VnU3RyKXt2YXIgc2VnQ2hhaW5zPU1vbm90b25lQ2hhaW5CdWlsZGVyLmdldENoYWlucyhzZWdTdHIuZ2V0Q29vcmRpbmF0ZXMoKSxzZWdTdHIpO2Zvcih2YXIgaT0wO2k8c2VnQ2hhaW5zLmxlbmd0aDtpKyspe3ZhciBtYz1zZWdDaGFpbnNbaV07bWMuc2V0SWQodGhpcy5pZENvdW50ZXIrKyk7dGhpcy5pbmRleC5pbnNlcnQobWMuZ2V0RW52ZWxvcGUoKSxtYyk7dGhpcy5tb25vQ2hhaW5zLnB1c2gobWMpO319O30pKCk7anN0cy5zaW1wbGlmeS5MaW5lU2VnbWVudEluZGV4PWZ1bmN0aW9uKCl7dGhpcy5pbmRleD1uZXcganN0cy5pbmRleC5xdWFkdHJlZS5RdWFkdHJlZSgpO307anN0cy5zaW1wbGlmeS5MaW5lU2VnbWVudEluZGV4LnByb3RvdHlwZS5pbmRleD1udWxsO2pzdHMuc2ltcGxpZnkuTGluZVNlZ21lbnRJbmRleC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGxpbmUpe2lmKGxpbmUgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVNlZ21lbnQpe3RoaXMuYWRkMihsaW5lKTtyZXR1cm47fVxudmFyIHNlZ3M9bGluZS5nZXRTZWdtZW50cygpO2Zvcih2YXIgaT0wO2k8c2Vncy5sZW5ndGg7aSsrKXt2YXIgc2VnPXNlZ3NbaV07dGhpcy5hZGQyKHNlZyk7fX07anN0cy5zaW1wbGlmeS5MaW5lU2VnbWVudEluZGV4LnByb3RvdHlwZS5hZGQyPWZ1bmN0aW9uKHNlZyl7dGhpcy5pbmRleC5pbnNlcnQobmV3IGpzdHMuZ2VvbS5FbnZlbG9wZShzZWcucDAsc2VnLnAxKSxzZWcpO307anN0cy5zaW1wbGlmeS5MaW5lU2VnbWVudEluZGV4LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oc2VnKXt0aGlzLmluZGV4LnJlbW92ZShuZXcganN0cy5nZW9tLkVudmVsb3BlKHNlZy5wMCxzZWcucDEpLHNlZyk7fTtqc3RzLnNpbXBsaWZ5LkxpbmVTZWdtZW50SW5kZXgucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKHF1ZXJ5U2VnKXt2YXIgZW52PW5ldyBqc3RzLmdlb20uRW52ZWxvcGUocXVlcnlTZWcucDAscXVlcnlTZWcucDEpO3ZhciB2aXNpdG9yPW5ldyBqc3RzLnNpbXBsaWZ5LkxpbmVTZWdtZW50SW5kZXguTGluZVNlZ21lbnRWaXNpdG9yKHF1ZXJ5U2VnKTt0aGlzLmluZGV4LnF1ZXJ5KGVudix2aXNpdG9yKTt2YXIgaXRlbXNGb3VuZD12aXNpdG9yLmdldEl0ZW1zKCk7cmV0dXJuIGl0ZW1zRm91bmQ7fTtqc3RzLnNpbXBsaWZ5LkxpbmVTZWdtZW50SW5kZXguTGluZVNlZ21lbnRWaXNpdG9yPWZ1bmN0aW9uKHF1ZXJ5U2VnKXt0aGlzLml0ZW1zPVtdO3RoaXMucXVlcnlTZWc9cXVlcnlTZWc7fTtqc3RzLnNpbXBsaWZ5LkxpbmVTZWdtZW50SW5kZXguTGluZVNlZ21lbnRWaXNpdG9yLnByb3RvdHlwZT1uZXcganN0cy5pbmRleC5JdGVtVmlzaXRvcigpO2pzdHMuc2ltcGxpZnkuTGluZVNlZ21lbnRJbmRleC5MaW5lU2VnbWVudFZpc2l0b3IucHJvdG90eXBlLnF1ZXJ5U2VnPW51bGw7anN0cy5zaW1wbGlmeS5MaW5lU2VnbWVudEluZGV4LkxpbmVTZWdtZW50VmlzaXRvci5wcm90b3R5cGUuaXRlbXM9bnVsbDtqc3RzLnNpbXBsaWZ5LkxpbmVTZWdtZW50SW5kZXguTGluZVNlZ21lbnRWaXNpdG9yLnByb3RvdHlwZS52aXNpdEl0ZW09ZnVuY3Rpb24oaXRlbSl7dmFyIHNlZz1pdGVtO2lmKGpzdHMuZ2VvbS5FbnZlbG9wZS5pbnRlcnNlY3RzKHNlZy5wMCxzZWcucDEsdGhpcy5xdWVyeVNlZy5wMCx0aGlzLnF1ZXJ5U2VnLnAxKSlcbnRoaXMuaXRlbXMucHVzaChpdGVtKTt9O2pzdHMuc2ltcGxpZnkuTGluZVNlZ21lbnRJbmRleC5MaW5lU2VnbWVudFZpc2l0b3IucHJvdG90eXBlLmdldEl0ZW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXM7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kU3Rhcj1mdW5jdGlvbigpe3RoaXMuZWRnZU1hcD1uZXcgamF2YXNjcmlwdC51dGlsLlRyZWVNYXAoKTt0aGlzLmVkZ2VMaXN0PW51bGw7dGhpcy5wdEluQXJlYUxvY2F0aW9uPVtqc3RzLmdlb20uTG9jYXRpb24uTk9ORSxqc3RzLmdlb20uTG9jYXRpb24uTk9ORV07fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kU3Rhci5wcm90b3R5cGUuZWRnZU1hcD1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5lZGdlTGlzdD1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5wdEluQXJlYUxvY2F0aW9uPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZUVuZFN0YXIucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihlKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tZ3JhcGguRWRnZUVuZFN0YXIucHJvdG90eXBlLmluc2VydEVkZ2VFbmQ9ZnVuY3Rpb24oZSxvYmope3RoaXMuZWRnZU1hcC5wdXQoZSxvYmopO3RoaXMuZWRnZUxpc3Q9bnVsbDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7dmFyIGl0PXRoaXMuaXRlcmF0b3IoKTtpZighaXQuaGFzTmV4dCgpKVxucmV0dXJuIG51bGw7dmFyIGU9aXQubmV4dCgpO3JldHVybiBlLmdldENvb3JkaW5hdGUoKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5nZXREZWdyZWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlTWFwLnNpemUoKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5nZXRFZGdlcz1mdW5jdGlvbigpe2lmKHRoaXMuZWRnZUxpc3Q9PT1udWxsKXt0aGlzLmVkZ2VMaXN0PW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KHRoaXMuZWRnZU1hcC52YWx1ZXMoKSk7fVxucmV0dXJuIHRoaXMuZWRnZUxpc3Q7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kU3Rhci5wcm90b3R5cGUuZ2V0TmV4dENXPWZ1bmN0aW9uKGVlKXt0aGlzLmdldEVkZ2VzKCk7dmFyIGk9dGhpcy5lZGdlTGlzdC5pbmRleE9mKGVlKTt2YXIgaU5leHRDVz1pLTE7aWYoaT09PTApXG5pTmV4dENXPXRoaXMuZWRnZUxpc3QubGVuZ3RoLTE7cmV0dXJuIHRoaXMuZWRnZUxpc3RbaU5leHRDV107fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kU3Rhci5wcm90b3R5cGUuY29tcHV0ZUxhYmVsbGluZz1mdW5jdGlvbihnZW9tR3JhcGgpe3RoaXMuY29tcHV0ZUVkZ2VFbmRMYWJlbHMoZ2VvbUdyYXBoWzBdLmdldEJvdW5kYXJ5Tm9kZVJ1bGUoKSk7dGhpcy5wcm9wYWdhdGVTaWRlTGFiZWxzKDApO3RoaXMucHJvcGFnYXRlU2lkZUxhYmVscygxKTt2YXIgaGFzRGltZW5zaW9uYWxDb2xsYXBzZUVkZ2U9W2ZhbHNlLGZhbHNlXTtmb3IodmFyIGl0PXRoaXMuaXRlcmF0b3IoKTtpdC5oYXNOZXh0KCk7KXt2YXIgZT1pdC5uZXh0KCk7dmFyIGxhYmVsPWUuZ2V0TGFiZWwoKTtmb3IodmFyIGdlb21pPTA7Z2VvbWk8MjtnZW9taSsrKXtpZihsYWJlbC5pc0xpbmUoZ2VvbWkpJiZsYWJlbC5nZXRMb2NhdGlvbihnZW9taSk9PT1qc3RzLmdlb20uTG9jYXRpb24uQk9VTkRBUlkpXG5oYXNEaW1lbnNpb25hbENvbGxhcHNlRWRnZVtnZW9taV09dHJ1ZTt9fVxuZm9yKHZhciBpdD10aGlzLml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGU9aXQubmV4dCgpO3ZhciBsYWJlbD1lLmdldExhYmVsKCk7Zm9yKHZhciBnZW9taT0wO2dlb21pPDI7Z2VvbWkrKyl7aWYobGFiZWwuaXNBbnlOdWxsKGdlb21pKSl7dmFyIGxvYz1qc3RzLmdlb20uTG9jYXRpb24uTk9ORTtpZihoYXNEaW1lbnNpb25hbENvbGxhcHNlRWRnZVtnZW9taV0pe2xvYz1qc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I7fWVsc2V7dmFyIHA9ZS5nZXRDb29yZGluYXRlKCk7bG9jPXRoaXMuZ2V0TG9jYXRpb24oZ2VvbWkscCxnZW9tR3JhcGgpO31cbmxhYmVsLnNldEFsbExvY2F0aW9uc0lmTnVsbChnZW9taSxsb2MpO319fX07anN0cy5nZW9tZ3JhcGguRWRnZUVuZFN0YXIucHJvdG90eXBlLmNvbXB1dGVFZGdlRW5kTGFiZWxzPWZ1bmN0aW9uKGJvdW5kYXJ5Tm9kZVJ1bGUpe2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlZT1pdC5uZXh0KCk7ZWUuY29tcHV0ZUxhYmVsKGJvdW5kYXJ5Tm9kZVJ1bGUpO319O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5nZXRMb2NhdGlvbj1mdW5jdGlvbihnZW9tSW5kZXgscCxnZW9tKXtpZih0aGlzLnB0SW5BcmVhTG9jYXRpb25bZ2VvbUluZGV4XT09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FKXt0aGlzLnB0SW5BcmVhTG9jYXRpb25bZ2VvbUluZGV4XT1qc3RzLmFsZ29yaXRobS5sb2NhdGUuU2ltcGxlUG9pbnRJbkFyZWFMb2NhdG9yLmxvY2F0ZShwLGdlb21bZ2VvbUluZGV4XS5nZXRHZW9tZXRyeSgpKTt9XG5yZXR1cm4gdGhpcy5wdEluQXJlYUxvY2F0aW9uW2dlb21JbmRleF07fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kU3Rhci5wcm90b3R5cGUuaXNBcmVhTGFiZWxzQ29uc2lzdGVudD1mdW5jdGlvbihnZW9tR3JhcGgpe3RoaXMuY29tcHV0ZUVkZ2VFbmRMYWJlbHMoZ2VvbUdyYXBoLmdldEJvdW5kYXJ5Tm9kZVJ1bGUoKSk7cmV0dXJuIHRoaXMuY2hlY2tBcmVhTGFiZWxzQ29uc2lzdGVudCgwKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5jaGVja0FyZWFMYWJlbHNDb25zaXN0ZW50PWZ1bmN0aW9uKGdlb21JbmRleCl7dmFyIGVkZ2VzPXRoaXMuZ2V0RWRnZXMoKTtpZihlZGdlcy5zaXplKCk8PTApXG5yZXR1cm4gdHJ1ZTt2YXIgbGFzdEVkZ2VJbmRleD1lZGdlcy5zaXplKCktMTt2YXIgc3RhcnRMYWJlbD1lZGdlcy5nZXQobGFzdEVkZ2VJbmRleCkuZ2V0TGFiZWwoKTt2YXIgc3RhcnRMb2M9c3RhcnRMYWJlbC5nZXRMb2NhdGlvbihnZW9tSW5kZXgsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCk7anN0cy51dGlsLkFzc2VydC5pc1RydWUoc3RhcnRMb2MhPWpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FLCdGb3VuZCB1bmxhYmVsbGVkIGFyZWEgZWRnZScpO3ZhciBjdXJyTG9jPXN0YXJ0TG9jO2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlPWl0Lm5leHQoKTt2YXIgbGFiZWw9ZS5nZXRMYWJlbCgpO2pzdHMudXRpbC5Bc3NlcnQuaXNUcnVlKGxhYmVsLmlzQXJlYShnZW9tSW5kZXgpLCdGb3VuZCBub24tYXJlYSBlZGdlJyk7dmFyIGxlZnRMb2M9bGFiZWwuZ2V0TG9jYXRpb24oZ2VvbUluZGV4LGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlQpO3ZhciByaWdodExvYz1sYWJlbC5nZXRMb2NhdGlvbihnZW9tSW5kZXgsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQpO2lmKGxlZnRMb2M9PT1yaWdodExvYyl7cmV0dXJuIGZhbHNlO31cbmlmKHJpZ2h0TG9jIT09Y3VyckxvYyl7cmV0dXJuIGZhbHNlO31cbmN1cnJMb2M9bGVmdExvYzt9XG5yZXR1cm4gdHJ1ZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5wcm9wYWdhdGVTaWRlTGFiZWxzPWZ1bmN0aW9uKGdlb21JbmRleCl7dmFyIHN0YXJ0TG9jPWpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FO2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlPWl0Lm5leHQoKTt2YXIgbGFiZWw9ZS5nZXRMYWJlbCgpO2lmKGxhYmVsLmlzQXJlYShnZW9tSW5kZXgpJiZsYWJlbC5nZXRMb2NhdGlvbihnZW9tSW5kZXgsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCkhPT1qc3RzLmdlb20uTG9jYXRpb24uTk9ORSlcbnN0YXJ0TG9jPWxhYmVsLmdldExvY2F0aW9uKGdlb21JbmRleCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKTt9XG5pZihzdGFydExvYz09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5OT05FKVxucmV0dXJuO3ZhciBjdXJyTG9jPXN0YXJ0TG9jO2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlPWl0Lm5leHQoKTt2YXIgbGFiZWw9ZS5nZXRMYWJlbCgpO2lmKGxhYmVsLmdldExvY2F0aW9uKGdlb21JbmRleCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5PTik9PT1qc3RzLmdlb20uTG9jYXRpb24uTk9ORSlcbmxhYmVsLnNldExvY2F0aW9uKGdlb21JbmRleCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5PTixjdXJyTG9jKTtpZihsYWJlbC5pc0FyZWEoZ2VvbUluZGV4KSl7dmFyIGxlZnRMb2M9bGFiZWwuZ2V0TG9jYXRpb24oZ2VvbUluZGV4LGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlQpO3ZhciByaWdodExvYz1sYWJlbC5nZXRMb2NhdGlvbihnZW9tSW5kZXgsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQpO2lmKHJpZ2h0TG9jIT09anN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpe2lmKHJpZ2h0TG9jIT09Y3VyckxvYylcbnRocm93IG5ldyBqc3RzLmVycm9yLlRvcG9sb2d5RXJyb3IoJ3NpZGUgbG9jYXRpb24gY29uZmxpY3QnLGUuZ2V0Q29vcmRpbmF0ZSgpKTtpZihsZWZ0TG9jPT09anN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpe2pzdHMudXRpbC5Bc3NlcnQuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoJ2ZvdW5kIHNpbmdsZSBudWxsIHNpZGUgKGF0ICcrXG5lLmdldENvb3JkaW5hdGUoKSsnKScpO31cbmN1cnJMb2M9bGVmdExvYzt9ZWxzZXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZShsYWJlbC5nZXRMb2NhdGlvbihnZW9tSW5kZXgsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCk9PT1qc3RzLmdlb20uTG9jYXRpb24uTk9ORSwnZm91bmQgc2luZ2xlIG51bGwgc2lkZScpO2xhYmVsLnNldExvY2F0aW9uKGdlb21JbmRleCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCxjdXJyTG9jKTtsYWJlbC5zZXRMb2NhdGlvbihnZW9tSW5kZXgsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCxjdXJyTG9jKTt9fX19O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLnByb3RvdHlwZS5maW5kSW5kZXg9ZnVuY3Rpb24oZVNlYXJjaCl7dGhpcy5pdGVyYXRvcigpO2Zvcih2YXIgaT0wO2k8dGhpcy5lZGdlTGlzdC5zaXplKCk7aSsrKXt2YXIgZT10aGlzLmVkZ2VMaXN0LmdldChpKTtpZihlPT09ZVNlYXJjaClcbnJldHVybiBpO31cbnJldHVybi0xO307anN0cy5vcGVyYXRpb24ucmVsYXRlLkVkZ2VFbmRCdW5kbGVTdGFyPWZ1bmN0aW9uKCl7anN0cy5nZW9tZ3JhcGguRWRnZUVuZFN0YXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO307anN0cy5vcGVyYXRpb24ucmVsYXRlLkVkZ2VFbmRCdW5kbGVTdGFyLnByb3RvdHlwZT1uZXcganN0cy5nZW9tZ3JhcGguRWRnZUVuZFN0YXIoKTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1bmRsZVN0YXIucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihlKXt2YXIgZWI9dGhpcy5lZGdlTWFwLmdldChlKTtpZihlYj09PW51bGwpe2ViPW5ldyBqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1bmRsZShlKTt0aGlzLmluc2VydEVkZ2VFbmQoZSxlYik7fVxuZWxzZXtlYi5pbnNlcnQoZSk7fX07anN0cy5vcGVyYXRpb24ucmVsYXRlLkVkZ2VFbmRCdW5kbGVTdGFyLnByb3RvdHlwZS51cGRhdGVJTT1mdW5jdGlvbihpbSl7Zm9yKHZhciBpdD10aGlzLml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGVzYj1pdC5uZXh0KCk7ZXNiLnVwZGF0ZUlNKGltKTt9fTtqc3RzLmluZGV4LkFycmF5TGlzdFZpc2l0b3I9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPVtdO307anN0cy5pbmRleC5BcnJheUxpc3RWaXNpdG9yLnByb3RvdHlwZS52aXNpdEl0ZW09ZnVuY3Rpb24oaXRlbSl7dGhpcy5pdGVtcy5wdXNoKGl0ZW0pO307anN0cy5pbmRleC5BcnJheUxpc3RWaXNpdG9yLnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zO307anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzdGFuY2VUb1BvaW50PWZ1bmN0aW9uKCl7fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXN0YW5jZVRvUG9pbnQuY29tcHV0ZURpc3RhbmNlPWZ1bmN0aW9uKGdlb20scHQscHREaXN0KXtpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmcpe2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLkRpc3RhbmNlVG9Qb2ludC5jb21wdXRlRGlzdGFuY2UyKGdlb20scHQscHREaXN0KTt9ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pe2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLkRpc3RhbmNlVG9Qb2ludC5jb21wdXRlRGlzdGFuY2U0KGdlb20scHQscHREaXN0KTt9ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbil7dmFyIGdjPWdlb207Zm9yKHZhciBpPTA7aTxnYy5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgZz1nYy5nZXRHZW9tZXRyeU4oaSk7anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzdGFuY2VUb1BvaW50LmNvbXB1dGVEaXN0YW5jZShnLHB0LHB0RGlzdCk7fX1lbHNle3B0RGlzdC5zZXRNaW5pbXVtKGdlb20uZ2V0Q29vcmRpbmF0ZSgpLHB0KTt9fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXN0YW5jZVRvUG9pbnQuY29tcHV0ZURpc3RhbmNlMj1mdW5jdGlvbihsaW5lLHB0LHB0RGlzdCl7dmFyIHRlbXBTZWdtZW50PW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoKTt2YXIgY29vcmRzPWxpbmUuZ2V0Q29vcmRpbmF0ZXMoKTtmb3IodmFyIGk9MDtpPGNvb3Jkcy5sZW5ndGgtMTtpKyspe3RlbXBTZWdtZW50LnNldENvb3JkaW5hdGVzKGNvb3Jkc1tpXSxjb29yZHNbaSsxXSk7dmFyIGNsb3Nlc3RQdD10ZW1wU2VnbWVudC5jbG9zZXN0UG9pbnQocHQpO3B0RGlzdC5zZXRNaW5pbXVtKGNsb3Nlc3RQdCxwdCk7fX07anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzdGFuY2VUb1BvaW50LmNvbXB1dGVEaXN0YW5jZTM9ZnVuY3Rpb24oc2VnbWVudCxwdCxwdERpc3Qpe3ZhciBjbG9zZXN0UHQ9c2VnbWVudC5jbG9zZXN0UG9pbnQocHQpO3B0RGlzdC5zZXRNaW5pbXVtKGNsb3Nlc3RQdCxwdCk7fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXN0YW5jZVRvUG9pbnQuY29tcHV0ZURpc3RhbmNlND1mdW5jdGlvbihwb2x5LHB0LHB0RGlzdCl7anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzdGFuY2VUb1BvaW50LmNvbXB1dGVEaXN0YW5jZTIocG9seS5nZXRFeHRlcmlvclJpbmcoKSxwdCxwdERpc3QpO2Zvcih2YXIgaT0wO2k8cG9seS5nZXROdW1JbnRlcmlvclJpbmcoKTtpKyspe2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLkRpc3RhbmNlVG9Qb2ludC5jb21wdXRlRGlzdGFuY2UyKHBvbHkuZ2V0SW50ZXJpb3JSaW5nTihpKSxwdCxwdERpc3QpO319O2pzdHMuaW5kZXguc3RydHJlZS5JdGVtQm91bmRhYmxlPWZ1bmN0aW9uKGJvdW5kcyxpdGVtKXt0aGlzLmJvdW5kcz1ib3VuZHM7dGhpcy5pdGVtPWl0ZW07fTtqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZS5wcm90b3R5cGU9bmV3IGpzdHMuaW5kZXguc3RydHJlZS5Cb3VuZGFibGUoKTtqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZS5jb25zdHJ1Y3Rvcj1qc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZTtqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZS5wcm90b3R5cGUuYm91bmRzPW51bGw7anN0cy5pbmRleC5zdHJ0cmVlLkl0ZW1Cb3VuZGFibGUucHJvdG90eXBlLml0ZW09bnVsbDtqc3RzLmluZGV4LnN0cnRyZWUuSXRlbUJvdW5kYWJsZS5wcm90b3R5cGUuZ2V0Qm91bmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm91bmRzO307anN0cy5pbmRleC5zdHJ0cmVlLkl0ZW1Cb3VuZGFibGUucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtO307KGZ1bmN0aW9uKCl7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O3ZhciBUcmVlTWFwPWphdmFzY3JpcHQudXRpbC5UcmVlTWFwO2pzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0PWZ1bmN0aW9uKCl7dGhpcy5lZGdlcz1uZXcgQXJyYXlMaXN0KCk7dGhpcy5vY2FNYXA9bmV3IFRyZWVNYXAoKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0LnByb3RvdHlwZS5lZGdlcz1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0LnByb3RvdHlwZS5vY2FNYXA9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlTGlzdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3RoaXMuZWRnZXMuYWRkKGUpO3ZhciBvY2E9bmV3IGpzdHMubm9kaW5nLk9yaWVudGVkQ29vcmRpbmF0ZUFycmF5KGUuZ2V0Q29vcmRpbmF0ZXMoKSk7dGhpcy5vY2FNYXAucHV0KG9jYSxlKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24oZWRnZUNvbGwpe2Zvcih2YXIgaT1lZGdlQ29sbC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dGhpcy5hZGQoaS5uZXh0KCkpO319O2pzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0LnByb3RvdHlwZS5nZXRFZGdlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzO307anN0cy5nZW9tZ3JhcGguRWRnZUxpc3QucHJvdG90eXBlLmZpbmRFcXVhbEVkZ2U9ZnVuY3Rpb24oZSl7dmFyIG9jYT1uZXcganN0cy5ub2RpbmcuT3JpZW50ZWRDb29yZGluYXRlQXJyYXkoZS5nZXRDb29yZGluYXRlcygpKTt2YXIgbWF0Y2hFZGdlPXRoaXMub2NhTWFwLmdldChvY2EpO3JldHVybiBtYXRjaEVkZ2U7fTtqc3RzLmdlb21ncmFwaC5FZGdlTGlzdC5wcm90b3R5cGUuZ2V0RWRnZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlczt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0LnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzLml0ZXJhdG9yKCk7fTtqc3RzLmdlb21ncmFwaC5FZGdlTGlzdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmVkZ2VzLmdldChpKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0LnByb3RvdHlwZS5maW5kRWRnZUluZGV4PWZ1bmN0aW9uKGUpe2Zvcih2YXIgaT0wO2k8dGhpcy5lZGdlcy5zaXplKCk7aSsrKXtpZih0aGlzLmVkZ2VzLmdldChpKS5lcXVhbHMoZSkpXG5yZXR1cm4gaTt9XG5yZXR1cm4tMTt9O30pKCk7anN0cy5vcGVyYXRpb24uSXNTaW1wbGVPcD1mdW5jdGlvbihnZW9tKXt0aGlzLmdlb209Z2VvbTt9O2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AucHJvdG90eXBlLmdlb209bnVsbDtqc3RzLm9wZXJhdGlvbi5Jc1NpbXBsZU9wLnByb3RvdHlwZS5pc0Nsb3NlZEVuZHBvaW50c0luSW50ZXJpb3I9dHJ1ZTtqc3RzLm9wZXJhdGlvbi5Jc1NpbXBsZU9wLnByb3RvdHlwZS5ub25TaW1wbGVMb2NhdGlvbj1udWxsO2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AucHJvdG90eXBlLklzU2ltcGxlT3A9ZnVuY3Rpb24oZ2VvbSl7dGhpcy5nZW9tPWdlb207fTtqc3RzLm9wZXJhdGlvbi5Jc1NpbXBsZU9wLnByb3RvdHlwZS5pc1NpbXBsZT1mdW5jdGlvbigpe3RoaXMubm9uU2ltcGxlTG9jYXRpb249bnVsbDtpZih0aGlzLmdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZyl7cmV0dXJuIHRoaXMuaXNTaW1wbGVMaW5lYXJHZW9tZXRyeSh0aGlzLmdlb20pO31cbmlmKHRoaXMuZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcpe3JldHVybiB0aGlzLmlzU2ltcGxlTGluZWFyR2VvbWV0cnkodGhpcy5nZW9tKTt9XG5pZih0aGlzLmdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2ludCl7cmV0dXJuIHRoaXMuaXNTaW1wbGVNdWx0aVBvaW50KHRoaXMuZ2VvbSk7fVxucmV0dXJuIHRydWU7fTtqc3RzLm9wZXJhdGlvbi5Jc1NpbXBsZU9wLnByb3RvdHlwZS5pc1NpbXBsZU11bHRpUG9pbnQ9ZnVuY3Rpb24obXApe2lmKG1wLmlzRW1wdHkoKSlcbnJldHVybiB0cnVlO3ZhciBwb2ludHM9W107Zm9yKHZhciBpPTA7aTxtcC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcHQ9bXAuZ2V0R2VvbWV0cnlOKGkpO3ZhciBwPXB0LmdldENvb3JkaW5hdGUoKTtmb3IodmFyIGo9MDtqPHBvaW50cy5sZW5ndGg7aisrKXt2YXIgcG9pbnQ9cG9pbnRzW2pdO2lmKHAuZXF1YWxzMkQocG9pbnQpKXt0aGlzLm5vblNpbXBsZUxvY2F0aW9uPXA7cmV0dXJuIGZhbHNlO319XG5wb2ludHMucHVzaChwKTt9XG5yZXR1cm4gdHJ1ZTt9O2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AucHJvdG90eXBlLmlzU2ltcGxlTGluZWFyR2VvbWV0cnk9ZnVuY3Rpb24oZ2VvbSl7aWYoZ2VvbS5pc0VtcHR5KCkpXG5yZXR1cm4gdHJ1ZTt2YXIgZ3JhcGg9bmV3IGpzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgoMCxnZW9tKTt2YXIgbGk9bmV3IGpzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3RvcigpO3ZhciBzaT1ncmFwaC5jb21wdXRlU2VsZk5vZGVzKGxpLHRydWUpO2lmKCFzaS5oYXNJbnRlcnNlY3Rpb24oKSlcbnJldHVybiB0cnVlO2lmKHNpLmhhc1Byb3BlckludGVyc2VjdGlvbigpKXt0aGlzLm5vblNpbXBsZUxvY2F0aW9uPXNpLmdldFByb3BlckludGVyc2VjdGlvblBvaW50KCk7cmV0dXJuIGZhbHNlO31cbmlmKHRoaXMuaGFzTm9uRW5kcG9pbnRJbnRlcnNlY3Rpb24oZ3JhcGgpKVxucmV0dXJuIGZhbHNlO2lmKHRoaXMuaXNDbG9zZWRFbmRwb2ludHNJbkludGVyaW9yKXtpZih0aGlzLmhhc0Nsb3NlZEVuZHBvaW50SW50ZXJzZWN0aW9uKGdyYXBoKSlcbnJldHVybiBmYWxzZTt9XG5yZXR1cm4gdHJ1ZTt9O2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AucHJvdG90eXBlLmhhc05vbkVuZHBvaW50SW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGdyYXBoKXtmb3IodmFyIGk9Z3JhcGguZ2V0RWRnZUl0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZT1pLm5leHQoKTt2YXIgbWF4U2VnbWVudEluZGV4PWUuZ2V0TWF4aW11bVNlZ21lbnRJbmRleCgpO2Zvcih2YXIgZWlJdD1lLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCkuaXRlcmF0b3IoKTtlaUl0Lmhhc05leHQoKTspe3ZhciBlaT1laUl0Lm5leHQoKTtpZighZWkuaXNFbmRQb2ludChtYXhTZWdtZW50SW5kZXgpKXt0aGlzLm5vblNpbXBsZUxvY2F0aW9uPWVpLmdldENvb3JkaW5hdGUoKTtyZXR1cm4gdHJ1ZTt9fX1cbnJldHVybiBmYWxzZTt9O2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AucHJvdG90eXBlLmhhc0Nsb3NlZEVuZHBvaW50SW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGdyYXBoKXt2YXIgZW5kUG9pbnRzPW5ldyBqYXZhc2NyaXB0LnV0aWwuVHJlZU1hcCgpO2Zvcih2YXIgaT1ncmFwaC5nZXRFZGdlSXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlPWkubmV4dCgpO3ZhciBtYXhTZWdtZW50SW5kZXg9ZS5nZXRNYXhpbXVtU2VnbWVudEluZGV4KCk7dmFyIGlzQ2xvc2VkPWUuaXNDbG9zZWQoKTt2YXIgcDA9ZS5nZXRDb29yZGluYXRlKDApO3RoaXMuYWRkRW5kcG9pbnQoZW5kUG9pbnRzLHAwLGlzQ2xvc2VkKTt2YXIgcDE9ZS5nZXRDb29yZGluYXRlKGUuZ2V0TnVtUG9pbnRzKCktMSk7dGhpcy5hZGRFbmRwb2ludChlbmRQb2ludHMscDEsaXNDbG9zZWQpO31cbmZvcih2YXIgaT1lbmRQb2ludHMudmFsdWVzKCkuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlaUluZm89aS5uZXh0KCk7aWYoZWlJbmZvLmlzQ2xvc2VkJiZlaUluZm8uZGVncmVlIT0yKXt0aGlzLm5vblNpbXBsZUxvY2F0aW9uPWVpSW5mby5nZXRDb29yZGluYXRlKCk7cmV0dXJuIHRydWU7fX1cbnJldHVybiBmYWxzZTt9O2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AuRW5kcG9pbnRJbmZvPWZ1bmN0aW9uKHB0KXt0aGlzLnB0PXB0O3RoaXMuaXNDbG9zZWQ9ZmFsc2U7dGhpcy5kZWdyZWU9MDt9O2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AuRW5kcG9pbnRJbmZvLnByb3RvdHlwZS5wdD1udWxsO2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AuRW5kcG9pbnRJbmZvLnByb3RvdHlwZS5pc0Nsb3NlZD1udWxsO2pzdHMub3BlcmF0aW9uLklzU2ltcGxlT3AuRW5kcG9pbnRJbmZvLnByb3RvdHlwZS5kZWdyZWU9bnVsbDtqc3RzLm9wZXJhdGlvbi5Jc1NpbXBsZU9wLkVuZHBvaW50SW5mby5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0O307anN0cy5vcGVyYXRpb24uSXNTaW1wbGVPcC5FbmRwb2ludEluZm8ucHJvdG90eXBlLmFkZEVuZHBvaW50PWZ1bmN0aW9uKGlzQ2xvc2VkKXt0aGlzLmRlZ3JlZSsrO3RoaXMuaXNDbG9zZWQ9dGhpcy5pc0Nsb3NlZHx8aXNDbG9zZWQ7fTtqc3RzLm9wZXJhdGlvbi5Jc1NpbXBsZU9wLnByb3RvdHlwZS5hZGRFbmRwb2ludD1mdW5jdGlvbihlbmRQb2ludHMscCxpc0Nsb3NlZCl7dmFyIGVpSW5mbz1lbmRQb2ludHMuZ2V0KHApO2lmKGVpSW5mbz09PW51bGwpe2VpSW5mbz1uZXcganN0cy5vcGVyYXRpb24uSXNTaW1wbGVPcC5FbmRwb2ludEluZm8ocCk7ZW5kUG9pbnRzLnB1dChwLGVpSW5mbyk7fVxuZWlJbmZvLmFkZEVuZHBvaW50KGlzQ2xvc2VkKTt9OyhmdW5jdGlvbigpe3ZhciBMaW5lU3RyaW5nU25hcHBlcj1mdW5jdGlvbigpe3RoaXMuc25hcFRvbGVyYW5jZT0wLjA7dGhpcy5zZWc9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCgpO3RoaXMuYWxsb3dTbmFwcGluZ1RvU291cmNlVmVydGljZXM9ZmFsc2U7dGhpcy5pc0Nsb3NlZD1mYWxzZTt0aGlzLnNyY1B0cz1bXTtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lU3RyaW5nKXt0aGlzLmluaXRGcm9tTGluZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fWVsc2V7dGhpcy5pbml0RnJvbVBvaW50cy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fX07TGluZVN0cmluZ1NuYXBwZXIucHJvdG90eXBlLmluaXRGcm9tTGluZT1mdW5jdGlvbihzcmNMaW5lLHNuYXBUb2xlcmFuY2Upe3RoaXMuaW5pdEZyb21Qb2ludHMoc3JjTGluZS5nZXRDb29yZGluYXRlcygpLHNuYXBUb2xlcmFuY2UpO307TGluZVN0cmluZ1NuYXBwZXIucHJvdG90eXBlLmluaXRGcm9tUG9pbnRzPWZ1bmN0aW9uKHNyY1B0cyxzbmFwVG9sZXJhbmNlKXt0aGlzLnNyY1B0cz1zcmNQdHM7dGhpcy5pc0Nsb3NlZD10aGlzLmNhbGNJc0Nsb3NlZChzcmNQdHMpO3RoaXMuc25hcFRvbGVyYW5jZT1zbmFwVG9sZXJhbmNlO307TGluZVN0cmluZ1NuYXBwZXIucHJvdG90eXBlLnNldEFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzPWZ1bmN0aW9uKGFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzKXt0aGlzLmFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzPWFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzO307TGluZVN0cmluZ1NuYXBwZXIucHJvdG90eXBlLmNhbGNJc0Nsb3NlZD1mdW5jdGlvbihwdHMpe2lmKHB0cy5sZW5ndGg8PTEpe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gcHRzWzBdLmVxdWFscyhwdHNbcHRzLmxlbmd0aC0xXSk7fTtMaW5lU3RyaW5nU25hcHBlci5wcm90b3R5cGUuc25hcFRvPWZ1bmN0aW9uKHNuYXBQdHMpe3ZhciBjb29yZExpc3Q9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlTGlzdCh0aGlzLnNyY1B0cyk7dGhpcy5zbmFwVmVydGljZXMoY29vcmRMaXN0LHNuYXBQdHMpO3RoaXMuc25hcFNlZ21lbnRzKGNvb3JkTGlzdCxzbmFwUHRzKTtyZXR1cm4gY29vcmRMaXN0LnRvQ29vcmRpbmF0ZUFycmF5KCk7fTtMaW5lU3RyaW5nU25hcHBlci5wcm90b3R5cGUuc25hcFZlcnRpY2VzPWZ1bmN0aW9uKHNyY0Nvb3JkcyxzbmFwUHRzKXt2YXIgZW5kPXRoaXMuaXNDbG9zZWQ/c3JjQ29vcmRzLnNpemUoKS0xOnNyY0Nvb3Jkcy5zaXplKCksaT0wLHNyY1B0LHNuYXBWZXJ0O2ZvcihpO2k8ZW5kO2krKyl7c3JjUHQ9c3JjQ29vcmRzLmdldChpKTtzbmFwVmVydD10aGlzLmZpbmRTbmFwRm9yVmVydGV4KHNyY1B0LHNuYXBQdHMpO2lmKHNuYXBWZXJ0IT09bnVsbCl7c3JjQ29vcmRzLnNldChpLG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShzbmFwVmVydCkpO2lmKGk9PT0wJiZ0aGlzLmlzQ2xvc2VkKVxuc3JjQ29vcmRzLnNldChzcmNDb29yZHMuc2l6ZSgpLTEsbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHNuYXBWZXJ0KSk7fX19O0xpbmVTdHJpbmdTbmFwcGVyLnByb3RvdHlwZS5maW5kU25hcEZvclZlcnRleD1mdW5jdGlvbihwdCxzbmFwUHRzKXt2YXIgaT0wLGlsPXNuYXBQdHMubGVuZ3RoO2ZvcihpPTA7aTxpbDtpKyspe2lmKHB0LmVxdWFscyhzbmFwUHRzW2ldKSl7cmV0dXJuIG51bGw7fVxuaWYocHQuZGlzdGFuY2Uoc25hcFB0c1tpXSk8dGhpcy5zbmFwVG9sZXJhbmNlKXtyZXR1cm4gc25hcFB0c1tpXTt9fVxucmV0dXJuIG51bGw7fTtMaW5lU3RyaW5nU25hcHBlci5wcm90b3R5cGUuc25hcFNlZ21lbnRzPWZ1bmN0aW9uKHNyY0Nvb3JkcyxzbmFwUHRzKXtpZihzbmFwUHRzLmxlbmd0aD09PTApe3JldHVybjt9XG52YXIgZGlzdGluY3RQdENvdW50PXNuYXBQdHMubGVuZ3RoLGksc25hcFB0LGluZGV4O2lmKHNuYXBQdHMubGVuZ3RoPjEmJnNuYXBQdHNbMF0uZXF1YWxzMkQoc25hcFB0c1tzbmFwUHRzLmxlbmd0aC0xXSkpe2Rpc3RpbmN0UHRDb3VudD1zbmFwUHRzLmxlbmd0aC0xO31cbmk9MDtmb3IoaTtpPGRpc3RpbmN0UHRDb3VudDtpKyspe3NuYXBQdD1zbmFwUHRzW2ldO2luZGV4PXRoaXMuZmluZFNlZ21lbnRJbmRleFRvU25hcChzbmFwUHQsc3JjQ29vcmRzKTtpZihpbmRleD49MCl7c3JjQ29vcmRzLmFkZChpbmRleCsxLG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShzbmFwUHQpLGZhbHNlKTt9fX07TGluZVN0cmluZ1NuYXBwZXIucHJvdG90eXBlLmZpbmRTZWdtZW50SW5kZXhUb1NuYXA9ZnVuY3Rpb24oc25hcFB0LHNyY0Nvb3Jkcyl7dmFyIG1pbkRpc3Q9TnVtYmVyLk1BWF9WQUxVRSxzbmFwSW5kZXg9LTEsaT0wLGRpc3Q7Zm9yKGk7aTxzcmNDb29yZHMuc2l6ZSgpLTE7aSsrKXt0aGlzLnNlZy5wMD1zcmNDb29yZHMuZ2V0KGkpO3RoaXMuc2VnLnAxPXNyY0Nvb3Jkcy5nZXQoaSsxKTtpZih0aGlzLnNlZy5wMC5lcXVhbHMoc25hcFB0KXx8dGhpcy5zZWcucDEuZXF1YWxzKHNuYXBQdCkpe2lmKHRoaXMuYWxsb3dTbmFwcGluZ1RvU291cmNlVmVydGljZXMpe2NvbnRpbnVlO31lbHNle3JldHVybi0xO319XG5kaXN0PXRoaXMuc2VnLmRpc3RhbmNlKHNuYXBQdCk7aWYoZGlzdDx0aGlzLnNuYXBUb2xlcmFuY2UmJmRpc3Q8bWluRGlzdCl7bWluRGlzdD1kaXN0O3NuYXBJbmRleD1pO319XG5yZXR1cm4gc25hcEluZGV4O307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5zbmFwLkxpbmVTdHJpbmdTbmFwcGVyPUxpbmVTdHJpbmdTbmFwcGVyO30pKCk7KGZ1bmN0aW9uKCl7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O3ZhciBHZW9tZXRyeUNvbXBvbmVudEZpbHRlcj1qc3RzLmdlb20uR2VvbWV0cnlDb21wb25lbnRGaWx0ZXI7dmFyIExpbmVTdHJpbmc9anN0cy5nZW9tLkxpbmVTdHJpbmc7dmFyIEVkZ2VSaW5nPWpzdHMub3BlcmF0aW9uLnBvbHlnb25pemUuRWRnZVJpbmc7dmFyIFBvbHlnb25pemVHcmFwaD1qc3RzLm9wZXJhdGlvbi5wb2x5Z29uaXplLlBvbHlnb25pemVHcmFwaDt2YXIgUG9seWdvbml6ZXI9ZnVuY3Rpb24oKXt2YXIgdGhhdD10aGlzO3ZhciBMaW5lU3RyaW5nQWRkZXI9ZnVuY3Rpb24oKXt9O0xpbmVTdHJpbmdBZGRlci5wcm90b3R5cGU9bmV3IEdlb21ldHJ5Q29tcG9uZW50RmlsdGVyKCk7TGluZVN0cmluZ0FkZGVyLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZyl7aWYoZyBpbnN0YW5jZW9mIExpbmVTdHJpbmcpXG50aGF0LmFkZChnKTt9O3RoaXMubGluZVN0cmluZ0FkZGVyPW5ldyBMaW5lU3RyaW5nQWRkZXIoKTt0aGlzLmRhbmdsZXM9bmV3IEFycmF5TGlzdCgpO3RoaXMuY3V0RWRnZXM9bmV3IEFycmF5TGlzdCgpO3RoaXMuaW52YWxpZFJpbmdMaW5lcz1uZXcgQXJyYXlMaXN0KCk7fTtQb2x5Z29uaXplci5wcm90b3R5cGUubGluZVN0cmluZ0FkZGVyPW51bGw7UG9seWdvbml6ZXIucHJvdG90eXBlLmdyYXBoPW51bGw7UG9seWdvbml6ZXIucHJvdG90eXBlLmRhbmdsZXM9bnVsbDtQb2x5Z29uaXplci5wcm90b3R5cGUuY3V0RWRnZXM9bnVsbDtQb2x5Z29uaXplci5wcm90b3R5cGUuaW52YWxpZFJpbmdMaW5lcz1udWxsO1BvbHlnb25pemVyLnByb3RvdHlwZS5ob2xlTGlzdD1udWxsO1BvbHlnb25pemVyLnByb3RvdHlwZS5zaGVsbExpc3Q9bnVsbDtQb2x5Z29uaXplci5wcm90b3R5cGUucG9seUxpc3Q9bnVsbDtQb2x5Z29uaXplci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGdlb21MaXN0KXtpZihnZW9tTGlzdCBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lU3RyaW5nKXtyZXR1cm4gdGhpcy5hZGQzKGdlb21MaXN0KTt9ZWxzZSBpZihnZW9tTGlzdCBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeSl7cmV0dXJuIHRoaXMuYWRkMihnZW9tTGlzdCk7fVxuZm9yKHZhciBpPWdlb21MaXN0Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZ2VvbWV0cnk9aS5uZXh0KCk7dGhpcy5hZGQyKGdlb21ldHJ5KTt9fTtQb2x5Z29uaXplci5wcm90b3R5cGUuYWRkMj1mdW5jdGlvbihnKXtnLmFwcGx5KHRoaXMubGluZVN0cmluZ0FkZGVyKTt9O1BvbHlnb25pemVyLnByb3RvdHlwZS5hZGQzPWZ1bmN0aW9uKGxpbmUpe2lmKHRoaXMuZ3JhcGg9PW51bGwpXG50aGlzLmdyYXBoPW5ldyBQb2x5Z29uaXplR3JhcGgobGluZS5nZXRGYWN0b3J5KCkpO3RoaXMuZ3JhcGguYWRkRWRnZShsaW5lKTt9O1BvbHlnb25pemVyLnByb3RvdHlwZS5nZXRQb2x5Z29ucz1mdW5jdGlvbigpe3RoaXMucG9seWdvbml6ZSgpO3JldHVybiB0aGlzLnBvbHlMaXN0O307UG9seWdvbml6ZXIucHJvdG90eXBlLmdldERhbmdsZXM9ZnVuY3Rpb24oKXt0aGlzLnBvbHlnb25pemUoKTtyZXR1cm4gdGhpcy5kYW5nbGVzO307UG9seWdvbml6ZXIucHJvdG90eXBlLmdldEN1dEVkZ2VzPWZ1bmN0aW9uKCl7dGhpcy5wb2x5Z29uaXplKCk7cmV0dXJuIHRoaXMuY3V0RWRnZXM7fTtQb2x5Z29uaXplci5wcm90b3R5cGUuZ2V0SW52YWxpZFJpbmdMaW5lcz1mdW5jdGlvbigpe3RoaXMucG9seWdvbml6ZSgpO3JldHVybiB0aGlzLmludmFsaWRSaW5nTGluZXM7fTtQb2x5Z29uaXplci5wcm90b3R5cGUucG9seWdvbml6ZT1mdW5jdGlvbigpe2lmKHRoaXMucG9seUxpc3QhPW51bGwpXG5yZXR1cm47dGhpcy5wb2x5TGlzdD1uZXcgQXJyYXlMaXN0KCk7aWYodGhpcy5ncmFwaD09bnVsbClcbnJldHVybjt0aGlzLmRhbmdsZXM9dGhpcy5ncmFwaC5kZWxldGVEYW5nbGVzKCk7dGhpcy5jdXRFZGdlcz10aGlzLmdyYXBoLmRlbGV0ZUN1dEVkZ2VzKCk7dmFyIGVkZ2VSaW5nTGlzdD10aGlzLmdyYXBoLmdldEVkZ2VSaW5ncygpO3ZhciB2YWxpZEVkZ2VSaW5nTGlzdD1uZXcgQXJyYXlMaXN0KCk7dGhpcy5pbnZhbGlkUmluZ0xpbmVzPW5ldyBBcnJheUxpc3QoKTt0aGlzLmZpbmRWYWxpZFJpbmdzKGVkZ2VSaW5nTGlzdCx2YWxpZEVkZ2VSaW5nTGlzdCx0aGlzLmludmFsaWRSaW5nTGluZXMpO3RoaXMuZmluZFNoZWxsc0FuZEhvbGVzKHZhbGlkRWRnZVJpbmdMaXN0KTtQb2x5Z29uaXplci5hc3NpZ25Ib2xlc1RvU2hlbGxzKHRoaXMuaG9sZUxpc3QsdGhpcy5zaGVsbExpc3QpO3RoaXMucG9seUxpc3Q9bmV3IEFycmF5TGlzdCgpO2Zvcih2YXIgaT10aGlzLnNoZWxsTGlzdC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGVyPWkubmV4dCgpO3RoaXMucG9seUxpc3QuYWRkKGVyLmdldFBvbHlnb24oKSk7fX07UG9seWdvbml6ZXIucHJvdG90eXBlLmZpbmRWYWxpZFJpbmdzPWZ1bmN0aW9uKGVkZ2VSaW5nTGlzdCx2YWxpZEVkZ2VSaW5nTGlzdCxpbnZhbGlkUmluZ0xpc3Qpe2Zvcih2YXIgaT1lZGdlUmluZ0xpc3QuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlcj1pLm5leHQoKTtpZihlci5pc1ZhbGlkKCkpXG52YWxpZEVkZ2VSaW5nTGlzdC5hZGQoZXIpO2Vsc2VcbmludmFsaWRSaW5nTGlzdC5hZGQoZXIuZ2V0TGluZVN0cmluZygpKTt9fTtQb2x5Z29uaXplci5wcm90b3R5cGUuZmluZFNoZWxsc0FuZEhvbGVzPWZ1bmN0aW9uKGVkZ2VSaW5nTGlzdCl7dGhpcy5ob2xlTGlzdD1uZXcgQXJyYXlMaXN0KCk7dGhpcy5zaGVsbExpc3Q9bmV3IEFycmF5TGlzdCgpO2Zvcih2YXIgaT1lZGdlUmluZ0xpc3QuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlcj1pLm5leHQoKTtpZihlci5pc0hvbGUoKSlcbnRoaXMuaG9sZUxpc3QuYWRkKGVyKTtlbHNlXG50aGlzLnNoZWxsTGlzdC5hZGQoZXIpO319O1BvbHlnb25pemVyLmFzc2lnbkhvbGVzVG9TaGVsbHM9ZnVuY3Rpb24oaG9sZUxpc3Qsc2hlbGxMaXN0KXtmb3IodmFyIGk9aG9sZUxpc3QuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBob2xlRVI9aS5uZXh0KCk7UG9seWdvbml6ZXIuYXNzaWduSG9sZVRvU2hlbGwoaG9sZUVSLHNoZWxsTGlzdCk7fX07UG9seWdvbml6ZXIuYXNzaWduSG9sZVRvU2hlbGw9ZnVuY3Rpb24oaG9sZUVSLHNoZWxsTGlzdCl7dmFyIHNoZWxsPUVkZ2VSaW5nLmZpbmRFZGdlUmluZ0NvbnRhaW5pbmcoaG9sZUVSLHNoZWxsTGlzdCk7aWYoc2hlbGwhPW51bGwpXG5zaGVsbC5hZGRIb2xlKGhvbGVFUi5nZXRSaW5nKCkpO307anN0cy5vcGVyYXRpb24ucG9seWdvbml6ZS5Qb2x5Z29uaXplcj1Qb2x5Z29uaXplcjt9KSgpOyhmdW5jdGlvbigpe3ZhciBBcnJheUxpc3Q9amF2YXNjcmlwdC51dGlsLkFycmF5TGlzdDt2YXIgR2VvbWV0cnlUcmFuc2Zvcm1lcj1mdW5jdGlvbigpe307R2VvbWV0cnlUcmFuc2Zvcm1lci5wcm90b3R5cGUuaW5wdXRHZW9tPW51bGw7R2VvbWV0cnlUcmFuc2Zvcm1lci5wcm90b3R5cGUuZmFjdG9yeT1udWxsO0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnBydW5lRW1wdHlHZW9tZXRyeT10cnVlO0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnByZXNlcnZlR2VvbWV0cnlDb2xsZWN0aW9uVHlwZT10cnVlO0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnByZXNlcnZlQ29sbGVjdGlvbnM9ZmFsc2U7R2VvbWV0cnlUcmFuc2Zvcm1lci5wcm90b3R5cGUucmVzZXJ2ZVR5cGU9ZmFsc2U7R2VvbWV0cnlUcmFuc2Zvcm1lci5wcm90b3R5cGUuZ2V0SW5wdXRHZW9tZXRyeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlucHV0R2VvbTt9O0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnRyYW5zZm9ybT1mdW5jdGlvbihpbnB1dEdlb20pe3RoaXMuaW5wdXRHZW9tPWlucHV0R2VvbTt0aGlzLmZhY3Rvcnk9aW5wdXRHZW9tLmdldEZhY3RvcnkoKTtpZihpbnB1dEdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnQpXG5yZXR1cm4gdGhpcy50cmFuc2Zvcm1Qb2ludChpbnB1dEdlb20sbnVsbCk7aWYoaW5wdXRHZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9pbnQpXG5yZXR1cm4gdGhpcy50cmFuc2Zvcm1NdWx0aVBvaW50KGlucHV0R2VvbSxudWxsKTtpZihpbnB1dEdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZWFyUmluZylcbnJldHVybiB0aGlzLnRyYW5zZm9ybUxpbmVhclJpbmcoaW5wdXRHZW9tLG51bGwpO2lmKGlucHV0R2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lU3RyaW5nKVxucmV0dXJuIHRoaXMudHJhbnNmb3JtTGluZVN0cmluZyhpbnB1dEdlb20sbnVsbCk7aWYoaW5wdXRHZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpTGluZVN0cmluZylcbnJldHVybiB0aGlzLnRyYW5zZm9ybU11bHRpTGluZVN0cmluZyhpbnB1dEdlb20sbnVsbCk7aWYoaW5wdXRHZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pXG5yZXR1cm4gdGhpcy50cmFuc2Zvcm1Qb2x5Z29uKGlucHV0R2VvbSxudWxsKTtpZihpbnB1dEdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2x5Z29uKVxucmV0dXJuIHRoaXMudHJhbnNmb3JtTXVsdGlQb2x5Z29uKGlucHV0R2VvbSxudWxsKTtpZihpbnB1dEdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKVxucmV0dXJuIHRoaXMudHJhbnNmb3JtR2VvbWV0cnlDb2xsZWN0aW9uKGlucHV0R2VvbSxudWxsKTt0aHJvdyBuZXcganN0cy5lcnJvci5JbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ1Vua25vd24gR2VvbWV0cnkgc3VidHlwZTogJytcbmlucHV0R2VvbS5nZXRDbGFzcygpLmdldE5hbWUoKSk7fTtHZW9tZXRyeVRyYW5zZm9ybWVyLnByb3RvdHlwZS5jcmVhdGVDb29yZGluYXRlU2VxdWVuY2U9ZnVuY3Rpb24oY29vcmRzKXtyZXR1cm4gdGhpcy5mYWN0b3J5LmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoY29vcmRzKTt9O0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oc2VxKXtyZXR1cm4gc2VxLmNsb25lKCk7fTtHZW9tZXRyeVRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1Db29yZGluYXRlcz1mdW5jdGlvbihjb29yZHMscGFyZW50KXtyZXR1cm4gdGhpcy5jb3B5KGNvb3Jkcyk7fTtHZW9tZXRyeVRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludD1mdW5jdGlvbihnZW9tLHBhcmVudCl7cmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVQb2ludCh0aGlzLnRyYW5zZm9ybUNvb3JkaW5hdGVzKGdlb20uZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCksZ2VvbSkpO307R2VvbWV0cnlUcmFuc2Zvcm1lci5wcm90b3R5cGUudHJhbnNmb3JtTXVsdGlQb2ludD1mdW5jdGlvbihnZW9tLHBhcmVudCl7dmFyIHRyYW5zR2VvbUxpc3Q9bmV3IEFycmF5TGlzdCgpO2Zvcih2YXIgaT0wO2k8Z2VvbS5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgdHJhbnNmb3JtR2VvbT10aGlzLnRyYW5zZm9ybVBvaW50KGdlb20uZ2V0R2VvbWV0cnlOKGkpLGdlb20pO2lmKHRyYW5zZm9ybUdlb209PW51bGwpXG5jb250aW51ZTtpZih0cmFuc2Zvcm1HZW9tLmlzRW1wdHkoKSlcbmNvbnRpbnVlO3RyYW5zR2VvbUxpc3QuYWRkKHRyYW5zZm9ybUdlb20pO31cbnJldHVybiB0aGlzLmZhY3RvcnkuYnVpbGRHZW9tZXRyeSh0cmFuc0dlb21MaXN0KTt9O0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnRyYW5zZm9ybUxpbmVhclJpbmc9ZnVuY3Rpb24oZ2VvbSxwYXJlbnQpe3ZhciBzZXE9dGhpcy50cmFuc2Zvcm1Db29yZGluYXRlcyhnZW9tLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLGdlb20pO3ZhciBzZXFTaXplPXNlcS5sZW5ndGg7aWYoc2VxU2l6ZT4wJiZzZXFTaXplPDQmJiF0aGlzLnByZXNlcnZlVHlwZSlcbnJldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhzZXEpO3JldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhzZXEpO307R2VvbWV0cnlUcmFuc2Zvcm1lci5wcm90b3R5cGUudHJhbnNmb3JtTGluZVN0cmluZz1mdW5jdGlvbihnZW9tLHBhcmVudCl7cmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMudHJhbnNmb3JtQ29vcmRpbmF0ZXMoZ2VvbS5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSxnZW9tKSk7fTtHZW9tZXRyeVRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1NdWx0aUxpbmVTdHJpbmc9ZnVuY3Rpb24oZ2VvbSxwYXJlbnQpe3ZhciB0cmFuc0dlb21MaXN0PW5ldyBBcnJheUxpc3QoKTtmb3IodmFyIGk9MDtpPGdlb20uZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIHRyYW5zZm9ybUdlb209dGhpcy50cmFuc2Zvcm1MaW5lU3RyaW5nKGdlb20uZ2V0R2VvbWV0cnlOKGkpLGdlb20pO2lmKHRyYW5zZm9ybUdlb209PW51bGwpXG5jb250aW51ZTtpZih0cmFuc2Zvcm1HZW9tLmlzRW1wdHkoKSlcbmNvbnRpbnVlO3RyYW5zR2VvbUxpc3QuYWRkKHRyYW5zZm9ybUdlb20pO31cbnJldHVybiB0aGlzLmZhY3RvcnkuYnVpbGRHZW9tZXRyeSh0cmFuc0dlb21MaXN0KTt9O0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnRyYW5zZm9ybVBvbHlnb249ZnVuY3Rpb24oZ2VvbSxwYXJlbnQpe3ZhciBpc0FsbFZhbGlkTGluZWFyUmluZ3M9dHJ1ZTt2YXIgc2hlbGw9dGhpcy50cmFuc2Zvcm1MaW5lYXJSaW5nKGdlb20uZ2V0RXh0ZXJpb3JSaW5nKCksZ2VvbSk7aWYoc2hlbGw9PW51bGx8fCEoc2hlbGwgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZWFyUmluZyl8fHNoZWxsLmlzRW1wdHkoKSlcbmlzQWxsVmFsaWRMaW5lYXJSaW5ncz1mYWxzZTt2YXIgaG9sZXM9bmV3IEFycmF5TGlzdCgpO2Zvcih2YXIgaT0wO2k8Z2VvbS5nZXROdW1JbnRlcmlvclJpbmcoKTtpKyspe3ZhciBob2xlPXRoaXMudHJhbnNmb3JtTGluZWFyUmluZyhnZW9tLmdldEludGVyaW9yUmluZ04oaSksZ2VvbSk7aWYoaG9sZT09bnVsbHx8aG9sZS5pc0VtcHR5KCkpe2NvbnRpbnVlO31cbmlmKCEoaG9sZSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lYXJSaW5nKSlcbmlzQWxsVmFsaWRMaW5lYXJSaW5ncz1mYWxzZTtob2xlcy5hZGQoaG9sZSk7fVxuaWYoaXNBbGxWYWxpZExpbmVhclJpbmdzKVxucmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVQb2x5Z29uKHNoZWxsLGhvbGVzLnRvQXJyYXkoKSk7ZWxzZXt2YXIgY29tcG9uZW50cz1uZXcgQXJyYXlMaXN0KCk7aWYoc2hlbGwhPW51bGwpXG5jb21wb25lbnRzLmFkZChzaGVsbCk7Y29tcG9uZW50cy5hZGRBbGwoaG9sZXMpO3JldHVybiB0aGlzLmZhY3RvcnkuYnVpbGRHZW9tZXRyeShjb21wb25lbnRzKTt9fTtHZW9tZXRyeVRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1NdWx0aVBvbHlnb249ZnVuY3Rpb24oZ2VvbSxwYXJlbnQpe3ZhciB0cmFuc0dlb21MaXN0PW5ldyBBcnJheUxpc3QoKTtmb3IodmFyIGk9MDtpPGdlb20uZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIHRyYW5zZm9ybUdlb209dGhpcy50cmFuc2Zvcm1Qb2x5Z29uKGdlb20uZ2V0R2VvbWV0cnlOKGkpLGdlb20pO2lmKHRyYW5zZm9ybUdlb209PW51bGwpXG5jb250aW51ZTtpZih0cmFuc2Zvcm1HZW9tLmlzRW1wdHkoKSlcbmNvbnRpbnVlO3RyYW5zR2VvbUxpc3QuYWRkKHRyYW5zZm9ybUdlb20pO31cbnJldHVybiB0aGlzLmZhY3RvcnkuYnVpbGRHZW9tZXRyeSh0cmFuc0dlb21MaXN0KTt9O0dlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnRyYW5zZm9ybUdlb21ldHJ5Q29sbGVjdGlvbj1mdW5jdGlvbihnZW9tLHBhcmVudCl7dmFyIHRyYW5zR2VvbUxpc3Q9bmV3IEFycmF5TGlzdCgpO2Zvcih2YXIgaT0wO2k8Z2VvbS5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgdHJhbnNmb3JtR2VvbT10aGlzLnRyYW5zZm9ybShnZW9tLmdldEdlb21ldHJ5TihpKSk7aWYodHJhbnNmb3JtR2VvbT09bnVsbClcbmNvbnRpbnVlO2lmKHRoaXMucHJ1bmVFbXB0eUdlb21ldHJ5JiZ0cmFuc2Zvcm1HZW9tLmlzRW1wdHkoKSlcbmNvbnRpbnVlO3RyYW5zR2VvbUxpc3QuYWRkKHRyYW5zZm9ybUdlb20pO31cbmlmKHRoaXMucHJlc2VydmVHZW9tZXRyeUNvbGxlY3Rpb25UeXBlKVxucmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oR2VvbWV0cnlGYWN0b3J5LnRvR2VvbWV0cnlBcnJheSh0cmFuc0dlb21MaXN0KSk7cmV0dXJuIHRoaXMuZmFjdG9yeS5idWlsZEdlb21ldHJ5KHRyYW5zR2VvbUxpc3QpO307anN0cy5nZW9tLnV0aWwuR2VvbWV0cnlUcmFuc2Zvcm1lcj1HZW9tZXRyeVRyYW5zZm9ybWVyO30pKCk7KGZ1bmN0aW9uKCl7dmFyIExpbmVTdHJpbmdTbmFwcGVyPWpzdHMub3BlcmF0aW9uLm92ZXJsYXkuc25hcC5MaW5lU3RyaW5nU25hcHBlcjt2YXIgUHJlY2lzaW9uTW9kZWw9anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsO3ZhciBUcmVlU2V0PWphdmFzY3JpcHQudXRpbC5UcmVlU2V0O3ZhciBTbmFwVHJhbnNmb3JtZXI9ZnVuY3Rpb24oc25hcFRvbGVyYW5jZSxzbmFwUHRzLGlzU2VsZlNuYXApe3RoaXMuc25hcFRvbGVyYW5jZT1zbmFwVG9sZXJhbmNlO3RoaXMuc25hcFB0cz1zbmFwUHRzO3RoaXMuaXNTZWxmU25hcD1pc1NlbGZTbmFwfHxmYWxzZTt9O1NuYXBUcmFuc2Zvcm1lci5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbS51dGlsLkdlb21ldHJ5VHJhbnNmb3JtZXIoKTtTbmFwVHJhbnNmb3JtZXIucHJvdG90eXBlLnNuYXBUb2xlcmFuY2U9bnVsbDtTbmFwVHJhbnNmb3JtZXIucHJvdG90eXBlLnNuYXBQdHM9bnVsbDtTbmFwVHJhbnNmb3JtZXIucHJvdG90eXBlLmlzU2VsZlNuYXA9ZmFsc2U7U25hcFRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1Db29yZGluYXRlcz1mdW5jdGlvbihjb29yZHMscGFyZW50KXt2YXIgc3JjUHRzPWNvb3Jkczt2YXIgbmV3UHRzPXRoaXMuc25hcExpbmUoc3JjUHRzLHRoaXMuc25hcFB0cyk7cmV0dXJuIG5ld1B0czt9O1NuYXBUcmFuc2Zvcm1lci5wcm90b3R5cGUuc25hcExpbmU9ZnVuY3Rpb24oc3JjUHRzLHNuYXBQdHMpe3ZhciBzbmFwcGVyPW5ldyBMaW5lU3RyaW5nU25hcHBlcihzcmNQdHMsdGhpcy5zbmFwVG9sZXJhbmNlKTtzbmFwcGVyLnNldEFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzKHRoaXMuaXNTZWxmU25hcCk7cmV0dXJuIHNuYXBwZXIuc25hcFRvKHNuYXBQdHMpO307dmFyIEdlb21ldHJ5U25hcHBlcj1mdW5jdGlvbihzcmNHZW9tKXt0aGlzLnNyY0dlb209c3JjR2VvbTt9O0dlb21ldHJ5U25hcHBlci5TTkFQX1BSRUNJU0lPTl9GQUNUT1I9MWUtOTtHZW9tZXRyeVNuYXBwZXIuY29tcHV0ZU92ZXJsYXlTbmFwVG9sZXJhbmNlPWZ1bmN0aW9uKGcpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKXtyZXR1cm4gR2VvbWV0cnlTbmFwcGVyLmNvbXB1dGVPdmVybGF5U25hcFRvbGVyYW5jZTIuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbnZhciBzbmFwVG9sZXJhbmNlPXRoaXMuY29tcHV0ZVNpemVCYXNlZFNuYXBUb2xlcmFuY2UoZyk7dmFyIHBtPWcuZ2V0UHJlY2lzaW9uTW9kZWwoKTtpZihwbS5nZXRUeXBlKCk9PVByZWNpc2lvbk1vZGVsLkZJWEVEKXt2YXIgZml4ZWRTbmFwVG9sPSgxL3BtLmdldFNjYWxlKCkpKjIvMS40MTU7aWYoZml4ZWRTbmFwVG9sPnNuYXBUb2xlcmFuY2UpXG5zbmFwVG9sZXJhbmNlPWZpeGVkU25hcFRvbDt9XG5yZXR1cm4gc25hcFRvbGVyYW5jZTt9O0dlb21ldHJ5U25hcHBlci5jb21wdXRlU2l6ZUJhc2VkU25hcFRvbGVyYW5jZT1mdW5jdGlvbihnKXt2YXIgZW52PWcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3ZhciBtaW5EaW1lbnNpb249TWF0aC5taW4oZW52LmdldEhlaWdodCgpLGVudi5nZXRXaWR0aCgpKTt2YXIgc25hcFRvbD1taW5EaW1lbnNpb24qR2VvbWV0cnlTbmFwcGVyLlNOQVBfUFJFQ0lTSU9OX0ZBQ1RPUjtyZXR1cm4gc25hcFRvbDt9O0dlb21ldHJ5U25hcHBlci5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2UyPWZ1bmN0aW9uKGcwLGcxKXtyZXR1cm4gTWF0aC5taW4odGhpcy5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2UoZzApLHRoaXMuY29tcHV0ZU92ZXJsYXlTbmFwVG9sZXJhbmNlKGcxKSk7fTtHZW9tZXRyeVNuYXBwZXIuc25hcD1mdW5jdGlvbihnMCxnMSxzbmFwVG9sZXJhbmNlKXt2YXIgc25hcEdlb209W107dmFyIHNuYXBwZXIwPW5ldyBHZW9tZXRyeVNuYXBwZXIoZzApO3NuYXBHZW9tWzBdPXNuYXBwZXIwLnNuYXBUbyhnMSxzbmFwVG9sZXJhbmNlKTt2YXIgc25hcHBlcjE9bmV3IEdlb21ldHJ5U25hcHBlcihnMSk7c25hcEdlb21bMV09c25hcHBlcjEuc25hcFRvKHNuYXBHZW9tWzBdLHNuYXBUb2xlcmFuY2UpO3JldHVybiBzbmFwR2VvbTt9O0dlb21ldHJ5U25hcHBlci5zbmFwVG9TZWxmPWZ1bmN0aW9uKGcwLHNuYXBUb2xlcmFuY2UsY2xlYW5SZXN1bHQpe3ZhciBzbmFwcGVyMD1uZXcgR2VvbWV0cnlTbmFwcGVyKGcwKTtyZXR1cm4gc25hcHBlcjAuc25hcFRvU2VsZihzbmFwVG9sZXJhbmNlLGNsZWFuUmVzdWx0KTt9O0dlb21ldHJ5U25hcHBlci5wcm90b3R5cGUuc3JjR2VvbT1udWxsO0dlb21ldHJ5U25hcHBlci5wcm90b3R5cGUuc25hcFRvPWZ1bmN0aW9uKHNuYXBHZW9tLHNuYXBUb2xlcmFuY2Upe3ZhciBzbmFwUHRzPXRoaXMuZXh0cmFjdFRhcmdldENvb3JkaW5hdGVzKHNuYXBHZW9tKTt2YXIgc25hcFRyYW5zPW5ldyBTbmFwVHJhbnNmb3JtZXIoc25hcFRvbGVyYW5jZSxzbmFwUHRzKTtyZXR1cm4gc25hcFRyYW5zLnRyYW5zZm9ybSh0aGlzLnNyY0dlb20pO307R2VvbWV0cnlTbmFwcGVyLnByb3RvdHlwZS5zbmFwVG9TZWxmPWZ1bmN0aW9uKHNuYXBUb2xlcmFuY2UsY2xlYW5SZXN1bHQpe3ZhciBzbmFwUHRzPXRoaXMuZXh0cmFjdFRhcmdldENvb3JkaW5hdGVzKHNyY0dlb20pO3ZhciBzbmFwVHJhbnM9bmV3IFNuYXBUcmFuc2Zvcm1lcihzbmFwVG9sZXJhbmNlLHNuYXBQdHMsdHJ1ZSk7dmFyIHNuYXBwZWRHZW9tPXNuYXBUcmFucy50cmFuc2Zvcm0oc3JjR2VvbSk7dmFyIHJlc3VsdD1zbmFwcGVkR2VvbTtpZihjbGVhblJlc3VsdCYmcmVzdWx0IGluc3RhbmNlb2YgUG9seWdvbmFsKXtyZXN1bHQ9c25hcHBlZEdlb20uYnVmZmVyKDApO31cbnJldHVybiByZXN1bHQ7fTtHZW9tZXRyeVNuYXBwZXIucHJvdG90eXBlLmV4dHJhY3RUYXJnZXRDb29yZGluYXRlcz1mdW5jdGlvbihnKXt2YXIgcHRTZXQ9bmV3IFRyZWVTZXQoKTt2YXIgcHRzPWcuZ2V0Q29vcmRpbmF0ZXMoKTtmb3IodmFyIGk9MDtpPHB0cy5sZW5ndGg7aSsrKXtwdFNldC5hZGQocHRzW2ldKTt9XG5yZXR1cm4gcHRTZXQudG9BcnJheSgpO307R2VvbWV0cnlTbmFwcGVyLnByb3RvdHlwZS5jb21wdXRlU25hcFRvbGVyYW5jZT1mdW5jdGlvbihyaW5nUHRzKXt2YXIgbWluU2VnTGVuPXRoaXMuY29tcHV0ZU1pbmltdW1TZWdtZW50TGVuZ3RoKHJpbmdQdHMpO3ZhciBzbmFwVG9sPW1pblNlZ0xlbi8xMDtyZXR1cm4gc25hcFRvbDt9O0dlb21ldHJ5U25hcHBlci5wcm90b3R5cGUuY29tcHV0ZU1pbmltdW1TZWdtZW50TGVuZ3RoPWZ1bmN0aW9uKHB0cyl7dmFyIG1pblNlZ0xlbj1OdW1iZXIuTUFYX1ZBTFVFO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aC0xO2krKyl7dmFyIHNlZ0xlbj1wdHNbaV0uZGlzdGFuY2UocHRzW2krMV0pO2lmKHNlZ0xlbjxtaW5TZWdMZW4pXG5taW5TZWdMZW49c2VnTGVuO31cbnJldHVybiBtaW5TZWdMZW47fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LnNuYXAuR2VvbWV0cnlTbmFwcGVyPUdlb21ldHJ5U25hcHBlcjt9KSgpO2pzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvcj1mdW5jdGlvbihib3VuZGFyeVJ1bGUpe3RoaXMuYm91bmRhcnlSdWxlPWJvdW5kYXJ5UnVsZT9ib3VuZGFyeVJ1bGU6anN0cy5hbGdvcml0aG0uQm91bmRhcnlOb2RlUnVsZS5PR0NfU0ZTX0JPVU5EQVJZX1JVTEU7fTtqc3RzLmFsZ29yaXRobS5Qb2ludExvY2F0b3IucHJvdG90eXBlLmJvdW5kYXJ5UnVsZT1udWxsO2pzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvci5wcm90b3R5cGUuaXNJbj1udWxsO2pzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvci5wcm90b3R5cGUubnVtQm91bmRhcmllcz1udWxsO2pzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvci5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbihwLGdlb20pe3JldHVybiB0aGlzLmxvY2F0ZShwLGdlb20pIT09anN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SO307anN0cy5hbGdvcml0aG0uUG9pbnRMb2NhdG9yLnByb3RvdHlwZS5sb2NhdGU9ZnVuY3Rpb24ocCxnZW9tKXtpZihnZW9tLmlzRW1wdHkoKSlcbnJldHVybiBqc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I7aWYoZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2ludCl7cmV0dXJuIHRoaXMubG9jYXRlMihwLGdlb20pO31lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZyl7cmV0dXJuIHRoaXMubG9jYXRlMyhwLGdlb20pO31lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7cmV0dXJuIHRoaXMubG9jYXRlNChwLGdlb20pO31cbnRoaXMuaXNJbj1mYWxzZTt0aGlzLm51bUJvdW5kYXJpZXM9MDt0aGlzLmNvbXB1dGVMb2NhdGlvbihwLGdlb20pO2lmKHRoaXMuYm91bmRhcnlSdWxlLmlzSW5Cb3VuZGFyeSh0aGlzLm51bUJvdW5kYXJpZXMpKVxucmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5CT1VOREFSWTtpZih0aGlzLm51bUJvdW5kYXJpZXM+MHx8dGhpcy5pc0luKVxucmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUjtyZXR1cm4ganN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SO307anN0cy5hbGdvcml0aG0uUG9pbnRMb2NhdG9yLnByb3RvdHlwZS5jb21wdXRlTG9jYXRpb249ZnVuY3Rpb24ocCxnZW9tKXtpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvaW50fHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmd8fGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7dGhpcy51cGRhdGVMb2NhdGlvbkluZm8odGhpcy5sb2NhdGUocCxnZW9tKSk7fWVsc2UgaWYoZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcpe3ZhciBtbD1nZW9tO2Zvcih2YXIgaT0wO2k8bWwuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIGw9bWwuZ2V0R2VvbWV0cnlOKGkpO3RoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlKHAsbCkpO319ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7dmFyIG1wb2x5PWdlb207Zm9yKHZhciBpPTA7aTxtcG9seS5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcG9seT1tcG9seS5nZXRHZW9tZXRyeU4oaSk7dGhpcy51cGRhdGVMb2NhdGlvbkluZm8odGhpcy5sb2NhdGUocCxwb2x5KSk7fX1lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2ludHx8Z2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24pe2Zvcih2YXIgaT0wO2k8Z2VvbS5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcGFydD1nZW9tLmdldEdlb21ldHJ5TihpKTtpZihwYXJ0IT09Z2VvbSl7dGhpcy5jb21wdXRlTG9jYXRpb24ocCxwYXJ0KTt9fX19O2pzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvci5wcm90b3R5cGUudXBkYXRlTG9jYXRpb25JbmZvPWZ1bmN0aW9uKGxvYyl7aWYobG9jPT09anN0cy5nZW9tLkxvY2F0aW9uLklOVEVSSU9SKVxudGhpcy5pc0luPXRydWU7aWYobG9jPT09anN0cy5nZW9tLkxvY2F0aW9uLkJPVU5EQVJZKVxudGhpcy5udW1Cb3VuZGFyaWVzKys7fTtqc3RzLmFsZ29yaXRobS5Qb2ludExvY2F0b3IucHJvdG90eXBlLmxvY2F0ZTI9ZnVuY3Rpb24ocCxwdCl7dmFyIHB0Q29vcmQ9cHQuZ2V0Q29vcmRpbmF0ZSgpO2lmKHB0Q29vcmQuZXF1YWxzMkQocCkpXG5yZXR1cm4ganN0cy5nZW9tLkxvY2F0aW9uLklOVEVSSU9SO3JldHVybiBqc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I7fTtqc3RzLmFsZ29yaXRobS5Qb2ludExvY2F0b3IucHJvdG90eXBlLmxvY2F0ZTM9ZnVuY3Rpb24ocCxsKXtpZighbC5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhwKSlcbnJldHVybiBqc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I7dmFyIHB0PWwuZ2V0Q29vcmRpbmF0ZXMoKTtpZighbC5pc0Nsb3NlZCgpKXtpZihwLmVxdWFscyhwdFswXSl8fHAuZXF1YWxzKHB0W3B0Lmxlbmd0aC0xXSkpe3JldHVybiBqc3RzLmdlb20uTG9jYXRpb24uQk9VTkRBUlk7fX1cbmlmKGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5pc09uTGluZShwLHB0KSlcbnJldHVybiBqc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1I7cmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUjt9O2pzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvci5wcm90b3R5cGUubG9jYXRlSW5Qb2x5Z29uUmluZz1mdW5jdGlvbihwLHJpbmcpe2lmKCFyaW5nLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHApKVxucmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUjtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmxvY2F0ZVBvaW50SW5SaW5nKHAscmluZy5nZXRDb29yZGluYXRlcygpKTt9O2pzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvci5wcm90b3R5cGUubG9jYXRlND1mdW5jdGlvbihwLHBvbHkpe2lmKHBvbHkuaXNFbXB0eSgpKVxucmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUjt2YXIgc2hlbGw9cG9seS5nZXRFeHRlcmlvclJpbmcoKTt2YXIgc2hlbGxMb2M9dGhpcy5sb2NhdGVJblBvbHlnb25SaW5nKHAsc2hlbGwpO2lmKHNoZWxsTG9jPT09anN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SKVxucmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUjtpZihzaGVsbExvYz09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5CT1VOREFSWSlcbnJldHVybiBqc3RzLmdlb20uTG9jYXRpb24uQk9VTkRBUlk7Zm9yKHZhciBpPTA7aTxwb2x5LmdldE51bUludGVyaW9yUmluZygpO2krKyl7dmFyIGhvbGU9cG9seS5nZXRJbnRlcmlvclJpbmdOKGkpO3ZhciBob2xlTG9jPXRoaXMubG9jYXRlSW5Qb2x5Z29uUmluZyhwLGhvbGUpO2lmKGhvbGVMb2M9PT1qc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1IpXG5yZXR1cm4ganN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SO2lmKGhvbGVMb2M9PT1qc3RzLmdlb20uTG9jYXRpb24uQk9VTkRBUlkpXG5yZXR1cm4ganN0cy5nZW9tLkxvY2F0aW9uLkJPVU5EQVJZO31cbnJldHVybiBqc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1I7fTsoZnVuY3Rpb24oKXt2YXIgTG9jYXRpb249anN0cy5nZW9tLkxvY2F0aW9uO3ZhciBBcnJheUxpc3Q9amF2YXNjcmlwdC51dGlsLkFycmF5TGlzdDt2YXIgVHJlZU1hcD1qYXZhc2NyaXB0LnV0aWwuVHJlZU1hcDtqc3RzLmdlb21ncmFwaC5Ob2RlTWFwPWZ1bmN0aW9uKG5vZGVGYWN0b3J5KXt0aGlzLm5vZGVNYXA9bmV3IFRyZWVNYXAoKTt0aGlzLm5vZGVGYWN0PW5vZGVGYWN0b3J5O307anN0cy5nZW9tZ3JhcGguTm9kZU1hcC5wcm90b3R5cGUubm9kZU1hcD1udWxsO2pzdHMuZ2VvbWdyYXBoLk5vZGVNYXAucHJvdG90eXBlLm5vZGVGYWN0PW51bGw7anN0cy5nZW9tZ3JhcGguTm9kZU1hcC5wcm90b3R5cGUuYWRkTm9kZT1mdW5jdGlvbihhcmcpe3ZhciBub2RlLGNvb3JkO2lmKGFyZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Db29yZGluYXRlKXtjb29yZD1hcmc7bm9kZT10aGlzLm5vZGVNYXAuZ2V0KGNvb3JkKTtpZihub2RlPT09bnVsbCl7bm9kZT10aGlzLm5vZGVGYWN0LmNyZWF0ZU5vZGUoY29vcmQpO3RoaXMubm9kZU1hcC5wdXQoY29vcmQsbm9kZSk7fVxucmV0dXJuIG5vZGU7fWVsc2UgaWYoYXJnIGluc3RhbmNlb2YganN0cy5nZW9tZ3JhcGguTm9kZSl7dmFyIG49YXJnO2Nvb3JkPW4uZ2V0Q29vcmRpbmF0ZSgpO25vZGU9dGhpcy5ub2RlTWFwLmdldChjb29yZCk7aWYobm9kZT09PW51bGwpe3RoaXMubm9kZU1hcC5wdXQoY29vcmQsbik7cmV0dXJuIG47fVxubm9kZS5tZXJnZUxhYmVsKG4pO3JldHVybiBub2RlO319O2pzdHMuZ2VvbWdyYXBoLk5vZGVNYXAucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgcD1lLmdldENvb3JkaW5hdGUoKTt2YXIgbj10aGlzLmFkZE5vZGUocCk7bi5hZGQoZSk7fTtqc3RzLmdlb21ncmFwaC5Ob2RlTWFwLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKGNvb3JkKXtyZXR1cm4gdGhpcy5ub2RlTWFwLmdldChjb29yZCk7fTtqc3RzLmdlb21ncmFwaC5Ob2RlTWFwLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlTWFwLnZhbHVlcygpO307anN0cy5nZW9tZ3JhcGguTm9kZU1hcC5wcm90b3R5cGUuaXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMoKS5pdGVyYXRvcigpO307anN0cy5nZW9tZ3JhcGguTm9kZU1hcC5wcm90b3R5cGUuZ2V0Qm91bmRhcnlOb2Rlcz1mdW5jdGlvbihnZW9tSW5kZXgpe3ZhciBiZHlOb2Rlcz1uZXcgQXJyYXlMaXN0KCk7Zm9yKHZhciBpPXRoaXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBub2RlPWkubmV4dCgpO2lmKG5vZGUuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbihnZW9tSW5kZXgpPT09TG9jYXRpb24uQk9VTkRBUlkpe2JkeU5vZGVzLmFkZChub2RlKTt9fVxucmV0dXJuIGJkeU5vZGVzO307fSkoKTsoZnVuY3Rpb24oKXt2YXIgQXJyYXlMaXN0PWphdmFzY3JpcHQudXRpbC5BcnJheUxpc3Q7anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGg9ZnVuY3Rpb24obm9kZUZhY3Rvcnkpe3RoaXMuZWRnZXM9bmV3IEFycmF5TGlzdCgpO3RoaXMuZWRnZUVuZExpc3Q9bmV3IEFycmF5TGlzdCgpO3RoaXMubm9kZXM9bmV3IGpzdHMuZ2VvbWdyYXBoLk5vZGVNYXAobm9kZUZhY3Rvcnl8fG5ldyBqc3RzLmdlb21ncmFwaC5Ob2RlRmFjdG9yeSgpKTt9O2pzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoLnByb3RvdHlwZS5lZGdlcz1udWxsO2pzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoLnByb3RvdHlwZS5ub2Rlcz1udWxsO2pzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoLnByb3RvdHlwZS5lZGdlRW5kTGlzdD1udWxsO2pzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzPWZ1bmN0aW9uKG5vZGVzKXtmb3IodmFyIG5vZGVpdD1ub2Rlcy5pdGVyYXRvcigpO25vZGVpdC5oYXNOZXh0KCk7KXt2YXIgbm9kZT1ub2RlaXQubmV4dCgpO25vZGUuZ2V0RWRnZXMoKS5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcygpO319O2pzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoLnByb3RvdHlwZS5nZXRFZGdlSXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlcy5pdGVyYXRvcigpO307anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGgucHJvdG90eXBlLmdldEVkZ2VFbmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZUVuZExpc3Q7fTtqc3RzLmdlb21ncmFwaC5QbGFuYXJHcmFwaC5wcm90b3R5cGUuaXNCb3VuZGFyeU5vZGU9ZnVuY3Rpb24oZ2VvbUluZGV4LGNvb3JkKXt2YXIgbm9kZT10aGlzLm5vZGVzLmZpbmQoY29vcmQpO2lmKG5vZGU9PT1udWxsKVxucmV0dXJuIGZhbHNlO3ZhciBsYWJlbD1ub2RlLmdldExhYmVsKCk7aWYobGFiZWwhPT1udWxsJiZsYWJlbC5nZXRMb2NhdGlvbihnZW9tSW5kZXgpPT09anN0cy5nZW9tLkxvY2F0aW9uLkJPVU5EQVJZKVxucmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO307anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGgucHJvdG90eXBlLmluc2VydEVkZ2U9ZnVuY3Rpb24oZSl7dGhpcy5lZGdlcy5hZGQoZSk7fTtqc3RzLmdlb21ncmFwaC5QbGFuYXJHcmFwaC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3RoaXMubm9kZXMuYWRkKGUpO3RoaXMuZWRnZUVuZExpc3QuYWRkKGUpO307anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGgucHJvdG90eXBlLmdldE5vZGVJdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzLml0ZXJhdG9yKCk7fTtqc3RzLmdlb21ncmFwaC5QbGFuYXJHcmFwaC5wcm90b3R5cGUuZ2V0Tm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlcy52YWx1ZXMoKTt9O2pzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKG5vZGUpe3JldHVybiB0aGlzLm5vZGVzLmFkZE5vZGUobm9kZSk7fTtqc3RzLmdlb21ncmFwaC5QbGFuYXJHcmFwaC5wcm90b3R5cGUuYWRkRWRnZXM9ZnVuY3Rpb24oZWRnZXNUb0FkZCl7Zm9yKHZhciBpdD1lZGdlc1RvQWRkLml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGU9aXQubmV4dCgpO3RoaXMuZWRnZXMuYWRkKGUpO3ZhciBkZTE9bmV3IGpzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZShlLHRydWUpO3ZhciBkZTI9bmV3IGpzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZShlLGZhbHNlKTtkZTEuc2V0U3ltKGRlMik7ZGUyLnNldFN5bShkZTEpO3RoaXMuYWRkKGRlMSk7dGhpcy5hZGQoZGUyKTt9fTtqc3RzLmdlb21ncmFwaC5QbGFuYXJHcmFwaC5wcm90b3R5cGUubGlua1Jlc3VsdERpcmVjdGVkRWRnZXM9ZnVuY3Rpb24oKXtmb3IodmFyIG5vZGVpdD10aGlzLm5vZGVzLml0ZXJhdG9yKCk7bm9kZWl0Lmhhc05leHQoKTspe3ZhciBub2RlPW5vZGVpdC5uZXh0KCk7bm9kZS5nZXRFZGdlcygpLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCk7fX07anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGgucHJvdG90eXBlLmZpbmRFZGdlSW5TYW1lRGlyZWN0aW9uPWZ1bmN0aW9uKHAwLHAxKXt2YXIgaT0wLGlsPXRoaXMuZWRnZXMuc2l6ZSgpLGUsZUNvb3JkO2ZvcihpO2k8aWw7aSsrKXtlPXRoaXMuZWRnZXMuZ2V0KGkpO2VDb29yZD1lLmdldENvb3JkaW5hdGVzKCk7aWYodGhpcy5tYXRjaEluU2FtZURpcmVjdGlvbihwMCxwMSxlQ29vcmRbMF0sZUNvb3JkWzFdKSl7cmV0dXJuIGU7fVxuaWYodGhpcy5tYXRjaEluU2FtZURpcmVjdGlvbihwMCxwMSxlQ29vcmRbZUNvb3JkLmxlbmd0aC0xXSxlQ29vcmRbZUNvb3JkLmxlbmd0aC0yXSkpe3JldHVybiBlO319XG5yZXR1cm4gbnVsbDt9O2pzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoLnByb3RvdHlwZS5tYXRjaEluU2FtZURpcmVjdGlvbj1mdW5jdGlvbihwMCxwMSxlcDAsZXAxKXtpZighcDAuZXF1YWxzKGVwMCkpe3JldHVybiBmYWxzZTt9XG5pZihqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuY29tcHV0ZU9yaWVudGF0aW9uKHAwLHAxLGVwMSk9PT1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ09MTElORUFSJiZqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5xdWFkcmFudChwMCxwMSk9PT1qc3RzLmdlb21ncmFwaC5RdWFkcmFudC5xdWFkcmFudChlcDAsZXAxKSl7cmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGgucHJvdG90eXBlLmZpbmRFZGdlRW5kPWZ1bmN0aW9uKGUpe2Zvcih2YXIgaT10aGlzLmdldEVkZ2VFbmRzKCkuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlZT1pLm5leHQoKTtpZihlZS5nZXRFZGdlKCk9PT1lKXtyZXR1cm4gZWU7fX1cbnJldHVybiBudWxsO307fSkoKTtqc3RzLm5vZGluZy5TZWdtZW50SW50ZXJzZWN0b3I9ZnVuY3Rpb24oKXt9O2pzdHMubm9kaW5nLlNlZ21lbnRJbnRlcnNlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ludGVyc2VjdGlvbnM9anN0cy5hYnN0cmFjdEZ1bmM7anN0cy5ub2RpbmcuU2VnbWVudEludGVyc2VjdG9yLnByb3RvdHlwZS5pc0RvbmU9anN0cy5hYnN0cmFjdEZ1bmM7KGZ1bmN0aW9uKCl7dmFyIFNlZ21lbnRJbnRlcnNlY3Rvcj1qc3RzLm5vZGluZy5TZWdtZW50SW50ZXJzZWN0b3I7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O2pzdHMubm9kaW5nLkludGVyaW9ySW50ZXJzZWN0aW9uRmluZGVyPWZ1bmN0aW9uKGxpKXt0aGlzLmxpPWxpO3RoaXMuaW50ZXJzZWN0aW9ucz1uZXcgQXJyYXlMaXN0KCk7dGhpcy5pbnRlcmlvckludGVyc2VjdGlvbj1udWxsO307anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlPW5ldyBTZWdtZW50SW50ZXJzZWN0b3IoKTtqc3RzLm5vZGluZy5JbnRlcmlvckludGVyc2VjdGlvbkZpbmRlci5jb25zdHJ1Y3Rvcj1qc3RzLm5vZGluZy5JbnRlcmlvckludGVyc2VjdGlvbkZpbmRlcjtqc3RzLm5vZGluZy5JbnRlcmlvckludGVyc2VjdGlvbkZpbmRlci5wcm90b3R5cGUuZmluZEFsbEludGVyc2VjdGlvbnM9ZmFsc2U7anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlLmlzQ2hlY2tFbmRTZWdtZW50c09ubHk9ZmFsc2U7anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlLmxpPW51bGw7anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlLmludGVyaW9ySW50ZXJzZWN0aW9uPW51bGw7anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlLmludFNlZ21lbnRzPW51bGw7anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlLmludGVyc2VjdGlvbnM9bnVsbDtqc3RzLm5vZGluZy5JbnRlcmlvckludGVyc2VjdGlvbkZpbmRlci5wcm90b3R5cGUuc2V0RmluZEFsbEludGVyc2VjdGlvbnM9ZnVuY3Rpb24oZmluZEFsbEludGVyc2VjdGlvbnMpe3RoaXMuZmluZEFsbEludGVyc2VjdGlvbnM9ZmluZEFsbEludGVyc2VjdGlvbnM7fTtqc3RzLm5vZGluZy5JbnRlcmlvckludGVyc2VjdGlvbkZpbmRlci5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe3JldHVybiBpbnRlcnNlY3Rpb25zO307anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlLnNldENoZWNrRW5kU2VnbWVudHNPbmx5PWZ1bmN0aW9uKGlzQ2hlY2tFbmRTZWdtZW50c09ubHkpe3RoaXMuaXNDaGVja0VuZFNlZ21lbnRzT25seT1pc0NoZWNrRW5kU2VnbWVudHNPbmx5O31cbmpzdHMubm9kaW5nLkludGVyaW9ySW50ZXJzZWN0aW9uRmluZGVyLnByb3RvdHlwZS5oYXNJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcmlvckludGVyc2VjdGlvbiE9bnVsbDt9O2pzdHMubm9kaW5nLkludGVyaW9ySW50ZXJzZWN0aW9uRmluZGVyLnByb3RvdHlwZS5nZXRJbnRlcmlvckludGVyc2VjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9uO307anN0cy5ub2RpbmcuSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIucHJvdG90eXBlLmdldEludGVyc2VjdGlvblNlZ21lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50U2VnbWVudHM7fTtqc3RzLm5vZGluZy5JbnRlcmlvckludGVyc2VjdGlvbkZpbmRlci5wcm90b3R5cGUucHJvY2Vzc0ludGVyc2VjdGlvbnM9ZnVuY3Rpb24oZTAsc2VnSW5kZXgwLGUxLHNlZ0luZGV4MSl7aWYodGhpcy5oYXNJbnRlcnNlY3Rpb24oKSlcbnJldHVybjtpZihlMD09ZTEmJnNlZ0luZGV4MD09c2VnSW5kZXgxKVxucmV0dXJuO2lmKHRoaXMuaXNDaGVja0VuZFNlZ21lbnRzT25seSl7dmFyIGlzRW5kU2VnUHJlc2VudD10aGlzLmlzRW5kU2VnbWVudChlMCxzZWdJbmRleDApfHxpc0VuZFNlZ21lbnQoZTEsc2VnSW5kZXgxKTtpZighaXNFbmRTZWdQcmVzZW50KVxucmV0dXJuO31cbnZhciBwMDA9ZTAuZ2V0Q29vcmRpbmF0ZXMoKVtzZWdJbmRleDBdO3ZhciBwMDE9ZTAuZ2V0Q29vcmRpbmF0ZXMoKVtzZWdJbmRleDArMV07dmFyIHAxMD1lMS5nZXRDb29yZGluYXRlcygpW3NlZ0luZGV4MV07dmFyIHAxMT1lMS5nZXRDb29yZGluYXRlcygpW3NlZ0luZGV4MSsxXTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAwLHAwMSxwMTAscDExKTtpZih0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpKXtpZih0aGlzLmxpLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oKSl7dGhpcy5pbnRTZWdtZW50cz1bXTt0aGlzLmludFNlZ21lbnRzWzBdPXAwMDt0aGlzLmludFNlZ21lbnRzWzFdPXAwMTt0aGlzLmludFNlZ21lbnRzWzJdPXAxMDt0aGlzLmludFNlZ21lbnRzWzNdPXAxMTt0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9uPXRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uKDApO3RoaXMuaW50ZXJzZWN0aW9ucy5hZGQodGhpcy5pbnRlcmlvckludGVyc2VjdGlvbik7fX19O2pzdHMubm9kaW5nLkludGVyaW9ySW50ZXJzZWN0aW9uRmluZGVyLnByb3RvdHlwZS5pc0VuZFNlZ21lbnQ9ZnVuY3Rpb24oc2VnU3RyLGluZGV4KXtpZihpbmRleD09MClcbnJldHVybiB0cnVlO2lmKGluZGV4Pj1zZWdTdHIuc2l6ZSgpLTIpXG5yZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2U7fTtqc3RzLm5vZGluZy5JbnRlcmlvckludGVyc2VjdGlvbkZpbmRlci5wcm90b3R5cGUuaXNEb25lPWZ1bmN0aW9uKCl7aWYodGhpcy5maW5kQWxsSW50ZXJzZWN0aW9ucylcbnJldHVybiBmYWxzZTtyZXR1cm4gdGhpcy5pbnRlcmlvckludGVyc2VjdGlvbiE9bnVsbDt9O30pKCk7KGZ1bmN0aW9uKCl7dmFyIFJvYnVzdExpbmVJbnRlcnNlY3Rvcj1qc3RzLmFsZ29yaXRobS5Sb2J1c3RMaW5lSW50ZXJzZWN0b3I7dmFyIEludGVyaW9ySW50ZXJzZWN0aW9uRmluZGVyPWpzdHMubm9kaW5nLkludGVyaW9ySW50ZXJzZWN0aW9uRmluZGVyO3ZhciBNQ0luZGV4Tm9kZXI9anN0cy5ub2RpbmcuTUNJbmRleE5vZGVyO2pzdHMubm9kaW5nLkZhc3ROb2RpbmdWYWxpZGF0b3I9ZnVuY3Rpb24oc2VnU3RyaW5ncyl7dGhpcy5saT1uZXcgUm9idXN0TGluZUludGVyc2VjdG9yKCk7dGhpcy5zZWdTdHJpbmdzPXNlZ1N0cmluZ3M7fTtqc3RzLm5vZGluZy5GYXN0Tm9kaW5nVmFsaWRhdG9yLnByb3RvdHlwZS5saT1udWxsO2pzdHMubm9kaW5nLkZhc3ROb2RpbmdWYWxpZGF0b3IucHJvdG90eXBlLnNlZ1N0cmluZ3M9bnVsbDtqc3RzLm5vZGluZy5GYXN0Tm9kaW5nVmFsaWRhdG9yLnByb3RvdHlwZS5maW5kQWxsSW50ZXJzZWN0aW9ucz1mYWxzZTtqc3RzLm5vZGluZy5GYXN0Tm9kaW5nVmFsaWRhdG9yLnByb3RvdHlwZS5zZWdJbnQ9bnVsbDtqc3RzLm5vZGluZy5GYXN0Tm9kaW5nVmFsaWRhdG9yLnByb3RvdHlwZS5faXNWYWxpZD10cnVlO2pzdHMubm9kaW5nLkZhc3ROb2RpbmdWYWxpZGF0b3IucHJvdG90eXBlLnNldEZpbmRBbGxJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKGZpbmRBbGxJbnRlcnNlY3Rpb25zKXt0aGlzLmZpbmRBbGxJbnRlcnNlY3Rpb25zPWZpbmRBbGxJbnRlcnNlY3Rpb25zO307anN0cy5ub2RpbmcuRmFzdE5vZGluZ1ZhbGlkYXRvci5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe3JldHVybiBzZWdJbnQuZ2V0SW50ZXJzZWN0aW9ucygpO307anN0cy5ub2RpbmcuRmFzdE5vZGluZ1ZhbGlkYXRvci5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbigpe3RoaXMuZXhlY3V0ZSgpO3JldHVybiB0aGlzLl9pc1ZhbGlkO307anN0cy5ub2RpbmcuRmFzdE5vZGluZ1ZhbGlkYXRvci5wcm90b3R5cGUuZ2V0RXJyb3JNZXNzYWdlPWZ1bmN0aW9uKCl7aWYodGhpcy5faXNWYWxpZClcbnJldHVybidubyBpbnRlcnNlY3Rpb25zIGZvdW5kJzt2YXIgaW50U2Vncz10aGlzLnNlZ0ludC5nZXRJbnRlcnNlY3Rpb25TZWdtZW50cygpO3JldHVybidmb3VuZCBub24tbm9kZWQgaW50ZXJzZWN0aW9uIGJldHdlZW4gJytcbmpzdHMuaW8uV0tUV3JpdGVyLnRvTGluZVN0cmluZyhpbnRTZWdzWzBdLGludFNlZ3NbMV0pKycgYW5kICcrXG5qc3RzLmlvLldLVFdyaXRlci50b0xpbmVTdHJpbmcoaW50U2Vnc1syXSxpbnRTZWdzWzNdKTt9O2pzdHMubm9kaW5nLkZhc3ROb2RpbmdWYWxpZGF0b3IucHJvdG90eXBlLmNoZWNrVmFsaWQ9ZnVuY3Rpb24oKXt0aGlzLmV4ZWN1dGUoKTtpZighdGhpcy5faXNWYWxpZClcbnRocm93IG5ldyBqc3RzLmVycm9yLlRvcG9sb2d5RXJyb3IodGhpcy5nZXRFcnJvck1lc3NhZ2UoKSx0aGlzLnNlZ0ludC5nZXRJbnRlcmlvckludGVyc2VjdGlvbigpKTt9O2pzdHMubm9kaW5nLkZhc3ROb2RpbmdWYWxpZGF0b3IucHJvdG90eXBlLmV4ZWN1dGU9ZnVuY3Rpb24oKXtpZih0aGlzLnNlZ0ludCE9bnVsbClcbnJldHVybjt0aGlzLmNoZWNrSW50ZXJpb3JJbnRlcnNlY3Rpb25zKCk7fTtqc3RzLm5vZGluZy5GYXN0Tm9kaW5nVmFsaWRhdG9yLnByb3RvdHlwZS5jaGVja0ludGVyaW9ySW50ZXJzZWN0aW9ucz1mdW5jdGlvbigpe3RoaXMuX2lzVmFsaWQ9dHJ1ZTt0aGlzLnNlZ0ludD1uZXcgSW50ZXJpb3JJbnRlcnNlY3Rpb25GaW5kZXIodGhpcy5saSk7dGhpcy5zZWdJbnQuc2V0RmluZEFsbEludGVyc2VjdGlvbnModGhpcy5maW5kQWxsSW50ZXJzZWN0aW9ucyk7dmFyIG5vZGVyPW5ldyBNQ0luZGV4Tm9kZXIoKTtub2Rlci5zZXRTZWdtZW50SW50ZXJzZWN0b3IodGhpcy5zZWdJbnQpO25vZGVyLmNvbXB1dGVOb2Rlcyh0aGlzLnNlZ1N0cmluZ3MpO2lmKHRoaXMuc2VnSW50Lmhhc0ludGVyc2VjdGlvbigpKXt0aGlzLl9pc1ZhbGlkPWZhbHNlO3JldHVybjt9fTt9KSgpOyhmdW5jdGlvbigpe2pzdHMubm9kaW5nLkJhc2ljU2VnbWVudFN0cmluZz1mdW5jdGlvbihwdHMsZGF0YSl7dGhpcy5wdHM9cHRzO3RoaXMuZGF0YT1kYXRhO307anN0cy5ub2RpbmcuQmFzaWNTZWdtZW50U3RyaW5nLnByb3RvdHlwZT1uZXcganN0cy5ub2RpbmcuU2VnbWVudFN0cmluZygpO2pzdHMubm9kaW5nLkJhc2ljU2VnbWVudFN0cmluZy5wcm90b3R5cGUucHRzPW51bGw7anN0cy5ub2RpbmcuQmFzaWNTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5kYXRhPW51bGw7anN0cy5ub2RpbmcuQmFzaWNTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YTt9XG5qc3RzLm5vZGluZy5CYXNpY1NlZ21lbnRTdHJpbmcucHJvdG90eXBlLnNldERhdGE9ZnVuY3Rpb24oZGF0YSl7dGhpcy5kYXRhPWRhdGE7fTtqc3RzLm5vZGluZy5CYXNpY1NlZ21lbnRTdHJpbmcucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHMubGVuZ3RoO307anN0cy5ub2RpbmcuQmFzaWNTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLnB0c1tpXTt9O2pzdHMubm9kaW5nLkJhc2ljU2VnbWVudFN0cmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHM7fTtqc3RzLm5vZGluZy5CYXNpY1NlZ21lbnRTdHJpbmcucHJvdG90eXBlLmlzQ2xvc2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRzWzBdLmVxdWFscyh0aGlzLnB0c1t0aGlzLnB0cy5sZW5ndGgtMV0pO307anN0cy5ub2RpbmcuQmFzaWNTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5nZXRTZWdtZW50T2N0YW50PWZ1bmN0aW9uKGluZGV4KXtpZihpbmRleD09dGhpcy5wdHMubGVuZ3RoLTEpXG5yZXR1cm4tMTtyZXR1cm4ganN0cy5ub2RpbmcuT2N0YW50Lm9jdGFudCh0aGlzLmdldENvb3JkaW5hdGUoaW5kZXgpLHRoaXMuZ2V0Q29vcmRpbmF0ZShpbmRleCsxKSk7fTt9KSgpOyhmdW5jdGlvbigpe3ZhciBGYXN0Tm9kaW5nVmFsaWRhdG9yPWpzdHMubm9kaW5nLkZhc3ROb2RpbmdWYWxpZGF0b3I7dmFyIEJhc2ljU2VnbWVudFN0cmluZz1qc3RzLm5vZGluZy5CYXNpY1NlZ21lbnRTdHJpbmc7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O2pzdHMuZ2VvbWdyYXBoLkVkZ2VOb2RpbmdWYWxpZGF0b3I9ZnVuY3Rpb24oZWRnZXMpe3RoaXMubnY9bmV3IEZhc3ROb2RpbmdWYWxpZGF0b3IoanN0cy5nZW9tZ3JhcGguRWRnZU5vZGluZ1ZhbGlkYXRvci50b1NlZ21lbnRTdHJpbmdzKGVkZ2VzKSk7fTtqc3RzLmdlb21ncmFwaC5FZGdlTm9kaW5nVmFsaWRhdG9yLmNoZWNrVmFsaWQ9ZnVuY3Rpb24oZWRnZXMpe3ZhciB2YWxpZGF0b3I9bmV3IGpzdHMuZ2VvbWdyYXBoLkVkZ2VOb2RpbmdWYWxpZGF0b3IoZWRnZXMpO3ZhbGlkYXRvci5jaGVja1ZhbGlkKCk7fTtqc3RzLmdlb21ncmFwaC5FZGdlTm9kaW5nVmFsaWRhdG9yLnRvU2VnbWVudFN0cmluZ3M9ZnVuY3Rpb24oZWRnZXMpe3ZhciBzZWdTdHJpbmdzPW5ldyBBcnJheUxpc3QoKTtmb3IodmFyIGk9ZWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlPWkubmV4dCgpO3NlZ1N0cmluZ3MuYWRkKG5ldyBCYXNpY1NlZ21lbnRTdHJpbmcoZS5nZXRDb29yZGluYXRlcygpLGUpKTt9XG5yZXR1cm4gc2VnU3RyaW5nczt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VOb2RpbmdWYWxpZGF0b3IucHJvdG90eXBlLm52PW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZU5vZGluZ1ZhbGlkYXRvci5wcm90b3R5cGUuY2hlY2tWYWxpZD1mdW5jdGlvbigpe3RoaXMubnYuY2hlY2tWYWxpZCgpO307fSkoKTtqc3RzLm9wZXJhdGlvbi5HZW9tZXRyeUdyYXBoT3BlcmF0aW9uPWZ1bmN0aW9uKGcwLGcxLGJvdW5kYXJ5Tm9kZVJ1bGUpe3RoaXMubGk9bmV3IGpzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3RvcigpO3RoaXMuYXJnPVtdO2lmKGcwPT09dW5kZWZpbmVkKXtyZXR1cm47fVxuaWYoZzE9PT11bmRlZmluZWQpe3RoaXMuc2V0Q29tcHV0YXRpb25QcmVjaXNpb24oZzAuZ2V0UHJlY2lzaW9uTW9kZWwoKSk7dGhpcy5hcmdbMF09bmV3IGpzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgoMCxnMCk7cmV0dXJuO31cbmJvdW5kYXJ5Tm9kZVJ1bGU9Ym91bmRhcnlOb2RlUnVsZXx8anN0cy5hbGdvcml0aG0uQm91bmRhcnlOb2RlUnVsZS5PR0NfU0ZTX0JPVU5EQVJZX1JVTEU7aWYoZzAuZ2V0UHJlY2lzaW9uTW9kZWwoKS5jb21wYXJlVG8oZzEuZ2V0UHJlY2lzaW9uTW9kZWwoKSk+PTApXG50aGlzLnNldENvbXB1dGF0aW9uUHJlY2lzaW9uKGcwLmdldFByZWNpc2lvbk1vZGVsKCkpO2Vsc2VcbnRoaXMuc2V0Q29tcHV0YXRpb25QcmVjaXNpb24oZzEuZ2V0UHJlY2lzaW9uTW9kZWwoKSk7dGhpcy5hcmdbMF09bmV3IGpzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgoMCxnMCxib3VuZGFyeU5vZGVSdWxlKTt0aGlzLmFyZ1sxXT1uZXcganN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaCgxLGcxLGJvdW5kYXJ5Tm9kZVJ1bGUpO307anN0cy5vcGVyYXRpb24uR2VvbWV0cnlHcmFwaE9wZXJhdGlvbi5wcm90b3R5cGUubGk9bnVsbDtqc3RzLm9wZXJhdGlvbi5HZW9tZXRyeUdyYXBoT3BlcmF0aW9uLnByb3RvdHlwZS5yZXN1bHRQcmVjaXNpb25Nb2RlbD1udWxsO2pzdHMub3BlcmF0aW9uLkdlb21ldHJ5R3JhcGhPcGVyYXRpb24ucHJvdG90eXBlLmFyZz1udWxsO2pzdHMub3BlcmF0aW9uLkdlb21ldHJ5R3JhcGhPcGVyYXRpb24ucHJvdG90eXBlLmdldEFyZ0dlb21ldHJ5PWZ1bmN0aW9uKGkpe3JldHVybiBhcmdbaV0uZ2V0R2VvbWV0cnkoKTt9O2pzdHMub3BlcmF0aW9uLkdlb21ldHJ5R3JhcGhPcGVyYXRpb24ucHJvdG90eXBlLnNldENvbXB1dGF0aW9uUHJlY2lzaW9uPWZ1bmN0aW9uKHBtKXt0aGlzLnJlc3VsdFByZWNpc2lvbk1vZGVsPXBtO3RoaXMubGkuc2V0UHJlY2lzaW9uTW9kZWwodGhpcy5yZXN1bHRQcmVjaXNpb25Nb2RlbCk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlOb2RlRmFjdG9yeT1mdW5jdGlvbigpe307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5Tm9kZUZhY3RvcnkucHJvdG90eXBlPW5ldyBqc3RzLmdlb21ncmFwaC5Ob2RlRmFjdG9yeSgpO2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU5vZGVGYWN0b3J5LmNvbnN0cnVjdG9yPWpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU5vZGVGYWN0b3J5O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU5vZGVGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGVOb2RlPWZ1bmN0aW9uKGNvb3JkKXtyZXR1cm4gbmV3IGpzdHMuZ2VvbWdyYXBoLk5vZGUoY29vcmQsbmV3IGpzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIoKSk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyPWZ1bmN0aW9uKGdlb21ldHJ5RmFjdG9yeSl7dGhpcy5zaGVsbExpc3Q9W107dGhpcy5nZW9tZXRyeUZhY3Rvcnk9Z2VvbWV0cnlGYWN0b3J5O307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5Qb2x5Z29uQnVpbGRlci5wcm90b3R5cGUuZ2VvbWV0cnlGYWN0b3J5PW51bGw7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5Qb2x5Z29uQnVpbGRlci5wcm90b3R5cGUuc2hlbGxMaXN0PW51bGw7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5Qb2x5Z29uQnVpbGRlci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGdyYXBoKXtpZihhcmd1bWVudHMubGVuZ3RoPT09Mil7dGhpcy5hZGQyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudGhpcy5hZGQyKGdyYXBoLmdldEVkZ2VFbmRzKCksZ3JhcGguZ2V0Tm9kZXMoKSk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5hZGQyPWZ1bmN0aW9uKGRpckVkZ2VzLG5vZGVzKXtqc3RzLmdlb21ncmFwaC5QbGFuYXJHcmFwaC5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcyhub2Rlcyk7dmFyIG1heEVkZ2VSaW5ncz10aGlzLmJ1aWxkTWF4aW1hbEVkZ2VSaW5ncyhkaXJFZGdlcyk7dmFyIGZyZWVIb2xlTGlzdD1bXTt2YXIgZWRnZVJpbmdzPXRoaXMuYnVpbGRNaW5pbWFsRWRnZVJpbmdzKG1heEVkZ2VSaW5ncyx0aGlzLnNoZWxsTGlzdCxmcmVlSG9sZUxpc3QpO3RoaXMuc29ydFNoZWxsc0FuZEhvbGVzKGVkZ2VSaW5ncyx0aGlzLnNoZWxsTGlzdCxmcmVlSG9sZUxpc3QpO3RoaXMucGxhY2VGcmVlSG9sZXModGhpcy5zaGVsbExpc3QsZnJlZUhvbGVMaXN0KTt9O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmdldFBvbHlnb25zPWZ1bmN0aW9uKCl7dmFyIHJlc3VsdFBvbHlMaXN0PXRoaXMuY29tcHV0ZVBvbHlnb25zKHRoaXMuc2hlbGxMaXN0KTtyZXR1cm4gcmVzdWx0UG9seUxpc3Q7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5idWlsZE1heGltYWxFZGdlUmluZ3M9ZnVuY3Rpb24oZGlyRWRnZXMpe3ZhciBtYXhFZGdlUmluZ3M9W107Zm9yKHZhciBpdD1kaXJFZGdlcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7aWYoZGUuaXNJblJlc3VsdCgpJiZkZS5nZXRMYWJlbCgpLmlzQXJlYSgpKXtpZihkZS5nZXRFZGdlUmluZygpPT1udWxsKXt2YXIgZXI9bmV3IGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuTWF4aW1hbEVkZ2VSaW5nKGRlLHRoaXMuZ2VvbWV0cnlGYWN0b3J5KTttYXhFZGdlUmluZ3MucHVzaChlcik7ZXIuc2V0SW5SZXN1bHQoKTt9fX1cbnJldHVybiBtYXhFZGdlUmluZ3M7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5idWlsZE1pbmltYWxFZGdlUmluZ3M9ZnVuY3Rpb24obWF4RWRnZVJpbmdzLHNoZWxsTGlzdCxmcmVlSG9sZUxpc3Qpe3ZhciBlZGdlUmluZ3M9W107Zm9yKHZhciBpPTA7aTxtYXhFZGdlUmluZ3MubGVuZ3RoO2krKyl7dmFyIGVyPW1heEVkZ2VSaW5nc1tpXTtpZihlci5nZXRNYXhOb2RlRGVncmVlKCk+Mil7ZXIubGlua0RpcmVjdGVkRWRnZXNGb3JNaW5pbWFsRWRnZVJpbmdzKCk7dmFyIG1pbkVkZ2VSaW5ncz1lci5idWlsZE1pbmltYWxSaW5ncygpO3ZhciBzaGVsbD10aGlzLmZpbmRTaGVsbChtaW5FZGdlUmluZ3MpO2lmKHNoZWxsIT09bnVsbCl7dGhpcy5wbGFjZVBvbHlnb25Ib2xlcyhzaGVsbCxtaW5FZGdlUmluZ3MpO3NoZWxsTGlzdC5wdXNoKHNoZWxsKTt9ZWxzZXtmcmVlSG9sZUxpc3Q9ZnJlZUhvbGVMaXN0LmNvbmNhdChtaW5FZGdlUmluZ3MpO319ZWxzZXtlZGdlUmluZ3MucHVzaChlcik7fX1cbnJldHVybiBlZGdlUmluZ3M7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5maW5kU2hlbGw9ZnVuY3Rpb24obWluRWRnZVJpbmdzKXt2YXIgc2hlbGxDb3VudD0wO3ZhciBzaGVsbD1udWxsO2Zvcih2YXIgaT0wO2k8bWluRWRnZVJpbmdzLmxlbmd0aDtpKyspe3ZhciBlcj1taW5FZGdlUmluZ3NbaV07aWYoIWVyLmlzSG9sZSgpKXtzaGVsbD1lcjtzaGVsbENvdW50Kys7fX1cbmpzdHMudXRpbC5Bc3NlcnQuaXNUcnVlKHNoZWxsQ291bnQ8PTEsJ2ZvdW5kIHR3byBzaGVsbHMgaW4gTWluaW1hbEVkZ2VSaW5nIGxpc3QnKTtyZXR1cm4gc2hlbGw7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5wbGFjZVBvbHlnb25Ib2xlcz1mdW5jdGlvbihzaGVsbCxtaW5FZGdlUmluZ3Mpe2Zvcih2YXIgaT0wO2k8bWluRWRnZVJpbmdzLmxlbmd0aDtpKyspe3ZhciBlcj1taW5FZGdlUmluZ3NbaV07aWYoZXIuaXNIb2xlKCkpe2VyLnNldFNoZWxsKHNoZWxsKTt9fX07anN0cy5vcGVyYXRpb24ub3ZlcmxheS5Qb2x5Z29uQnVpbGRlci5wcm90b3R5cGUuc29ydFNoZWxsc0FuZEhvbGVzPWZ1bmN0aW9uKGVkZ2VSaW5ncyxzaGVsbExpc3QsZnJlZUhvbGVMaXN0KXtmb3IodmFyIGk9MDtpPGVkZ2VSaW5ncy5sZW5ndGg7aSsrKXt2YXIgZXI9ZWRnZVJpbmdzW2ldO2lmKGVyLmlzSG9sZSgpKXtmcmVlSG9sZUxpc3QucHVzaChlcik7fWVsc2V7c2hlbGxMaXN0LnB1c2goZXIpO319fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5wbGFjZUZyZWVIb2xlcz1mdW5jdGlvbihzaGVsbExpc3QsZnJlZUhvbGVMaXN0KXtmb3IodmFyIGk9MDtpPGZyZWVIb2xlTGlzdC5sZW5ndGg7aSsrKXt2YXIgaG9sZT1mcmVlSG9sZUxpc3RbaV07aWYoaG9sZS5nZXRTaGVsbCgpPT1udWxsKXt2YXIgc2hlbGw9dGhpcy5maW5kRWRnZVJpbmdDb250YWluaW5nKGhvbGUsc2hlbGxMaXN0KTtpZihzaGVsbD09PW51bGwpXG50aHJvdyBuZXcganN0cy5lcnJvci5Ub3BvbG9neUVycm9yKCd1bmFibGUgdG8gYXNzaWduIGhvbGUgdG8gYSBzaGVsbCcsaG9sZS5nZXRDb29yZGluYXRlKDApKTtob2xlLnNldFNoZWxsKHNoZWxsKTt9fX07anN0cy5vcGVyYXRpb24ub3ZlcmxheS5Qb2x5Z29uQnVpbGRlci5wcm90b3R5cGUuZmluZEVkZ2VSaW5nQ29udGFpbmluZz1mdW5jdGlvbih0ZXN0RXIsc2hlbGxMaXN0KXt2YXIgdGVzdFJpbmc9dGVzdEVyLmdldExpbmVhclJpbmcoKTt2YXIgdGVzdEVudj10ZXN0UmluZy5nZXRFbnZlbG9wZUludGVybmFsKCk7dmFyIHRlc3RQdD10ZXN0UmluZy5nZXRDb29yZGluYXRlTigwKTt2YXIgbWluU2hlbGw9bnVsbDt2YXIgbWluRW52PW51bGw7Zm9yKHZhciBpPTA7aTxzaGVsbExpc3QubGVuZ3RoO2krKyl7dmFyIHRyeVNoZWxsPXNoZWxsTGlzdFtpXTt2YXIgdHJ5UmluZz10cnlTaGVsbC5nZXRMaW5lYXJSaW5nKCk7dmFyIHRyeUVudj10cnlSaW5nLmdldEVudmVsb3BlSW50ZXJuYWwoKTtpZihtaW5TaGVsbCE9PW51bGwpXG5taW5FbnY9bWluU2hlbGwuZ2V0TGluZWFyUmluZygpLmdldEVudmVsb3BlSW50ZXJuYWwoKTt2YXIgaXNDb250YWluZWQ9ZmFsc2U7aWYodHJ5RW52LmNvbnRhaW5zKHRlc3RFbnYpJiZqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuaXNQb2ludEluUmluZyh0ZXN0UHQsdHJ5UmluZy5nZXRDb29yZGluYXRlcygpKSlcbmlzQ29udGFpbmVkPXRydWU7aWYoaXNDb250YWluZWQpe2lmKG1pblNoZWxsPT1udWxsfHxtaW5FbnYuY29udGFpbnModHJ5RW52KSl7bWluU2hlbGw9dHJ5U2hlbGw7fX19XG5yZXR1cm4gbWluU2hlbGw7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyLnByb3RvdHlwZS5jb21wdXRlUG9seWdvbnM9ZnVuY3Rpb24oc2hlbGxMaXN0KXt2YXIgcmVzdWx0UG9seUxpc3Q9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTtmb3IodmFyIGk9MDtpPHNoZWxsTGlzdC5sZW5ndGg7aSsrKXt2YXIgZXI9c2hlbGxMaXN0W2ldO3ZhciBwb2x5PWVyLnRvUG9seWdvbih0aGlzLmdlb21ldHJ5RmFjdG9yeSk7cmVzdWx0UG9seUxpc3QuYWRkKHBvbHkpO31cbnJldHVybiByZXN1bHRQb2x5TGlzdDt9O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuUG9seWdvbkJ1aWxkZXIucHJvdG90eXBlLmNvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24ocCl7Zm9yKHZhciBpPTA7aTx0aGlzLnNoZWxsTGlzdC5sZW5ndGg7aSsrKXt2YXIgZXI9dGhpcy5zaGVsbExpc3RbaV07aWYoZXIuY29udGFpbnNQb2ludChwKSlcbnJldHVybiB0cnVlO31cbnJldHVybiBmYWxzZTt9OyhmdW5jdGlvbigpe3ZhciBBc3NlcnQ9anN0cy51dGlsLkFzc2VydDt2YXIgQXJyYXlMaXN0PWphdmFzY3JpcHQudXRpbC5BcnJheUxpc3Q7dmFyIExpbmVCdWlsZGVyPWZ1bmN0aW9uKG9wLGdlb21ldHJ5RmFjdG9yeSxwdExvY2F0b3Ipe3RoaXMubGluZUVkZ2VzTGlzdD1uZXcgQXJyYXlMaXN0KCk7dGhpcy5yZXN1bHRMaW5lTGlzdD1uZXcgQXJyYXlMaXN0KCk7dGhpcy5vcD1vcDt0aGlzLmdlb21ldHJ5RmFjdG9yeT1nZW9tZXRyeUZhY3Rvcnk7dGhpcy5wdExvY2F0b3I9cHRMb2NhdG9yO307TGluZUJ1aWxkZXIucHJvdG90eXBlLm9wPW51bGw7TGluZUJ1aWxkZXIucHJvdG90eXBlLmdlb21ldHJ5RmFjdG9yeT1udWxsO0xpbmVCdWlsZGVyLnByb3RvdHlwZS5wdExvY2F0b3I9bnVsbDtMaW5lQnVpbGRlci5wcm90b3R5cGUubGluZUVkZ2VzTGlzdD1udWxsO0xpbmVCdWlsZGVyLnByb3RvdHlwZS5yZXN1bHRMaW5lTGlzdD1udWxsO0xpbmVCdWlsZGVyLnByb3RvdHlwZS5idWlsZD1mdW5jdGlvbihvcENvZGUpe3RoaXMuZmluZENvdmVyZWRMaW5lRWRnZXMoKTt0aGlzLmNvbGxlY3RMaW5lcyhvcENvZGUpO3RoaXMuYnVpbGRMaW5lcyhvcENvZGUpO3JldHVybiB0aGlzLnJlc3VsdExpbmVMaXN0O307TGluZUJ1aWxkZXIucHJvdG90eXBlLmZpbmRDb3ZlcmVkTGluZUVkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciBub2RlaXQ9dGhpcy5vcC5nZXRHcmFwaCgpLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtub2RlaXQuaGFzTmV4dCgpOyl7dmFyIG5vZGU9bm9kZWl0Lm5leHQoKTtub2RlLmdldEVkZ2VzKCkuZmluZENvdmVyZWRMaW5lRWRnZXMoKTt9XG5mb3IodmFyIGl0PXRoaXMub3AuZ2V0R3JhcGgoKS5nZXRFZGdlRW5kcygpLml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGRlPWl0Lm5leHQoKTt2YXIgZT1kZS5nZXRFZGdlKCk7aWYoZGUuaXNMaW5lRWRnZSgpJiYhZS5pc0NvdmVyZWRTZXQoKSl7dmFyIGlzQ292ZXJlZD10aGlzLm9wLmlzQ292ZXJlZEJ5QShkZS5nZXRDb29yZGluYXRlKCkpO2Uuc2V0Q292ZXJlZChpc0NvdmVyZWQpO319fTtMaW5lQnVpbGRlci5wcm90b3R5cGUuY29sbGVjdExpbmVzPWZ1bmN0aW9uKG9wQ29kZSl7Zm9yKHZhciBpdD10aGlzLm9wLmdldEdyYXBoKCkuZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7dGhpcy5jb2xsZWN0TGluZUVkZ2UoZGUsb3BDb2RlLHRoaXMubGluZUVkZ2VzTGlzdCk7dGhpcy5jb2xsZWN0Qm91bmRhcnlUb3VjaEVkZ2UoZGUsb3BDb2RlLHRoaXMubGluZUVkZ2VzTGlzdCk7fX07TGluZUJ1aWxkZXIucHJvdG90eXBlLmNvbGxlY3RMaW5lRWRnZT1mdW5jdGlvbihkZSxvcENvZGUsZWRnZXMpe3ZhciBsYWJlbD1kZS5nZXRMYWJlbCgpO3ZhciBlPWRlLmdldEVkZ2UoKTtpZihkZS5pc0xpbmVFZGdlKCkpe2lmKCFkZS5pc1Zpc2l0ZWQoKSYmanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuaXNSZXN1bHRPZk9wKGxhYmVsLG9wQ29kZSkmJiFlLmlzQ292ZXJlZCgpKXtlZGdlcy5hZGQoZSk7ZGUuc2V0VmlzaXRlZEVkZ2UodHJ1ZSk7fX19O0xpbmVCdWlsZGVyLnByb3RvdHlwZS5jb2xsZWN0Qm91bmRhcnlUb3VjaEVkZ2U9ZnVuY3Rpb24oZGUsb3BDb2RlLGVkZ2VzKXt2YXIgbGFiZWw9ZGUuZ2V0TGFiZWwoKTtpZihkZS5pc0xpbmVFZGdlKCkpXG5yZXR1cm47aWYoZGUuaXNWaXNpdGVkKCkpXG5yZXR1cm47aWYoZGUuaXNJbnRlcmlvckFyZWFFZGdlKCkpXG5yZXR1cm47aWYoZGUuZ2V0RWRnZSgpLmlzSW5SZXN1bHQoKSlcbnJldHVybjtBc3NlcnQuaXNUcnVlKCEoZGUuaXNJblJlc3VsdCgpfHxkZS5nZXRTeW0oKS5pc0luUmVzdWx0KCkpfHwhZGUuZ2V0RWRnZSgpLmlzSW5SZXN1bHQoKSk7aWYoanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuaXNSZXN1bHRPZk9wKGxhYmVsLG9wQ29kZSkmJm9wQ29kZT09PWpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLklOVEVSU0VDVElPTil7ZWRnZXMuYWRkKGRlLmdldEVkZ2UoKSk7ZGUuc2V0VmlzaXRlZEVkZ2UodHJ1ZSk7fX07TGluZUJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkTGluZXM9ZnVuY3Rpb24ob3BDb2RlKXtmb3IodmFyIGl0PXRoaXMubGluZUVkZ2VzTGlzdC5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlPWl0Lm5leHQoKTt2YXIgbGFiZWw9ZS5nZXRMYWJlbCgpO3ZhciBsaW5lPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcoZS5nZXRDb29yZGluYXRlcygpKTt0aGlzLnJlc3VsdExpbmVMaXN0LmFkZChsaW5lKTtlLnNldEluUmVzdWx0KHRydWUpO319O0xpbmVCdWlsZGVyLnByb3RvdHlwZS5sYWJlbElzb2xhdGVkTGluZXM9ZnVuY3Rpb24oZWRnZXNMaXN0KXtmb3IodmFyIGl0PWVkZ2VzTGlzdC5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlPWl0Lm5leHQoKTt2YXIgbGFiZWw9ZS5nZXRMYWJlbCgpO2lmKGUuaXNJc29sYXRlZCgpKXtpZihsYWJlbC5pc051bGwoMCkpXG50aGlzLmxhYmVsSXNvbGF0ZWRMaW5lKGUsMCk7ZWxzZVxudGhpcy5sYWJlbElzb2xhdGVkTGluZShlLDEpO319fTtMaW5lQnVpbGRlci5wcm90b3R5cGUubGFiZWxJc29sYXRlZExpbmU9ZnVuY3Rpb24oZSx0YXJnZXRJbmRleCl7dmFyIGxvYz1wdExvY2F0b3IubG9jYXRlKGUuZ2V0Q29vcmRpbmF0ZSgpLG9wLmdldEFyZ0dlb21ldHJ5KHRhcmdldEluZGV4KSk7ZS5nZXRMYWJlbCgpLnNldExvY2F0aW9uKHRhcmdldEluZGV4LGxvYyk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5LkxpbmVCdWlsZGVyPUxpbmVCdWlsZGVyO30pKCk7KGZ1bmN0aW9uKCl7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O3ZhciBQb2ludEJ1aWxkZXI9ZnVuY3Rpb24ob3AsZ2VvbWV0cnlGYWN0b3J5LHB0TG9jYXRvcil7dGhpcy5yZXN1bHRQb2ludExpc3Q9bmV3IEFycmF5TGlzdCgpO3RoaXMub3A9b3A7dGhpcy5nZW9tZXRyeUZhY3Rvcnk9Z2VvbWV0cnlGYWN0b3J5O307UG9pbnRCdWlsZGVyLnByb3RvdHlwZS5vcD1udWxsO1BvaW50QnVpbGRlci5wcm90b3R5cGUuZ2VvbWV0cnlGYWN0b3J5PW51bGw7UG9pbnRCdWlsZGVyLnByb3RvdHlwZS5yZXN1bHRQb2ludExpc3Q9bnVsbDtQb2ludEJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkPWZ1bmN0aW9uKG9wQ29kZSl7dGhpcy5leHRyYWN0Tm9uQ292ZXJlZFJlc3VsdE5vZGVzKG9wQ29kZSk7cmV0dXJuIHRoaXMucmVzdWx0UG9pbnRMaXN0O307UG9pbnRCdWlsZGVyLnByb3RvdHlwZS5leHRyYWN0Tm9uQ292ZXJlZFJlc3VsdE5vZGVzPWZ1bmN0aW9uKG9wQ29kZSl7Zm9yKHZhciBub2RlaXQ9dGhpcy5vcC5nZXRHcmFwaCgpLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtub2RlaXQuaGFzTmV4dCgpOyl7dmFyIG49bm9kZWl0Lm5leHQoKTtpZihuLmlzSW5SZXN1bHQoKSlcbmNvbnRpbnVlO2lmKG4uaXNJbmNpZGVudEVkZ2VJblJlc3VsdCgpKVxuY29udGludWU7aWYobi5nZXRFZGdlcygpLmdldERlZ3JlZSgpPT09MHx8b3BDb2RlPT09anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuSU5URVJTRUNUSU9OKXt2YXIgbGFiZWw9bi5nZXRMYWJlbCgpO2lmKGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLmlzUmVzdWx0T2ZPcChsYWJlbCxvcENvZGUpKXt0aGlzLmZpbHRlckNvdmVyZWROb2RlVG9Qb2ludChuKTt9fX19O1BvaW50QnVpbGRlci5wcm90b3R5cGUuZmlsdGVyQ292ZXJlZE5vZGVUb1BvaW50PWZ1bmN0aW9uKG4pe3ZhciBjb29yZD1uLmdldENvb3JkaW5hdGUoKTtpZighdGhpcy5vcC5pc0NvdmVyZWRCeUxBKGNvb3JkKSl7dmFyIHB0PXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvaW50KGNvb3JkKTt0aGlzLnJlc3VsdFBvaW50TGlzdC5hZGQocHQpO319O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuUG9pbnRCdWlsZGVyPVBvaW50QnVpbGRlcjt9KSgpOyhmdW5jdGlvbigpe3ZhciBQb2ludExvY2F0b3I9anN0cy5hbGdvcml0aG0uUG9pbnRMb2NhdG9yO3ZhciBMb2NhdGlvbj1qc3RzLmdlb20uTG9jYXRpb247dmFyIEVkZ2VMaXN0PWpzdHMuZ2VvbWdyYXBoLkVkZ2VMaXN0O3ZhciBMYWJlbD1qc3RzLmdlb21ncmFwaC5MYWJlbDt2YXIgUGxhbmFyR3JhcGg9anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGg7dmFyIFBvc2l0aW9uPWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uO3ZhciBFZGdlTm9kaW5nVmFsaWRhdG9yPWpzdHMuZ2VvbWdyYXBoLkVkZ2VOb2RpbmdWYWxpZGF0b3I7dmFyIEdlb21ldHJ5R3JhcGhPcGVyYXRpb249anN0cy5vcGVyYXRpb24uR2VvbWV0cnlHcmFwaE9wZXJhdGlvbjt2YXIgT3ZlcmxheU5vZGVGYWN0b3J5PWpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU5vZGVGYWN0b3J5O3ZhciBQb2x5Z29uQnVpbGRlcj1qc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyO3ZhciBMaW5lQnVpbGRlcj1qc3RzLm9wZXJhdGlvbi5vdmVybGF5LkxpbmVCdWlsZGVyO3ZhciBQb2ludEJ1aWxkZXI9anN0cy5vcGVyYXRpb24ub3ZlcmxheS5Qb2ludEJ1aWxkZXI7dmFyIEFzc2VydD1qc3RzLnV0aWwuQXNzZXJ0O3ZhciBBcnJheUxpc3Q9amF2YXNjcmlwdC51dGlsLkFycmF5TGlzdDtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcD1mdW5jdGlvbihnMCxnMSl7dGhpcy5wdExvY2F0b3I9bmV3IFBvaW50TG9jYXRvcigpO3RoaXMuZWRnZUxpc3Q9bmV3IEVkZ2VMaXN0KCk7dGhpcy5yZXN1bHRQb2x5TGlzdD1uZXcgQXJyYXlMaXN0KCk7dGhpcy5yZXN1bHRMaW5lTGlzdD1uZXcgQXJyYXlMaXN0KCk7dGhpcy5yZXN1bHRQb2ludExpc3Q9bmV3IEFycmF5TGlzdCgpO0dlb21ldHJ5R3JhcGhPcGVyYXRpb24uY2FsbCh0aGlzLGcwLGcxKTt0aGlzLmdyYXBoPW5ldyBQbGFuYXJHcmFwaChuZXcgT3ZlcmxheU5vZGVGYWN0b3J5KCkpO3RoaXMuZ2VvbUZhY3Q9ZzAuZ2V0RmFjdG9yeSgpO307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlPW5ldyBHZW9tZXRyeUdyYXBoT3BlcmF0aW9uKCk7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuY29uc3RydWN0b3I9anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3A7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuSU5URVJTRUNUSU9OPTE7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuVU5JT049Mjtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5ESUZGRVJFTkNFPTM7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuU1lNRElGRkVSRU5DRT00O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLm92ZXJsYXlPcD1mdW5jdGlvbihnZW9tMCxnZW9tMSxvcENvZGUpe3ZhciBnb3Y9bmV3IGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wKGdlb20wLGdlb20xKTt2YXIgZ2VvbU92PWdvdi5nZXRSZXN1bHRHZW9tZXRyeShvcENvZGUpO3JldHVybiBnZW9tT3Y7fVxuanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuaXNSZXN1bHRPZk9wPWZ1bmN0aW9uKGxhYmVsLG9wQ29kZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTMpe3JldHVybiBqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5pc1Jlc3VsdE9mT3AyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG52YXIgbG9jMD1sYWJlbC5nZXRMb2NhdGlvbigwKTt2YXIgbG9jMT1sYWJlbC5nZXRMb2NhdGlvbigxKTtyZXR1cm4ganN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuaXNSZXN1bHRPZk9wMihsb2MwLGxvYzEsb3BDb2RlKTt9XG5qc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5pc1Jlc3VsdE9mT3AyPWZ1bmN0aW9uKGxvYzAsbG9jMSxvcENvZGUpe2lmKGxvYzA9PUxvY2F0aW9uLkJPVU5EQVJZKVxubG9jMD1Mb2NhdGlvbi5JTlRFUklPUjtpZihsb2MxPT1Mb2NhdGlvbi5CT1VOREFSWSlcbmxvYzE9TG9jYXRpb24uSU5URVJJT1I7c3dpdGNoKG9wQ29kZSl7Y2FzZSBqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5JTlRFUlNFQ1RJT046cmV0dXJuIGxvYzA9PUxvY2F0aW9uLklOVEVSSU9SJiZsb2MxPT1Mb2NhdGlvbi5JTlRFUklPUjtjYXNlIGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLlVOSU9OOnJldHVybiBsb2MwPT1Mb2NhdGlvbi5JTlRFUklPUnx8bG9jMT09TG9jYXRpb24uSU5URVJJT1I7Y2FzZSBqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5ESUZGRVJFTkNFOnJldHVybiBsb2MwPT1Mb2NhdGlvbi5JTlRFUklPUiYmbG9jMSE9TG9jYXRpb24uSU5URVJJT1I7Y2FzZSBqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5TWU1ESUZGRVJFTkNFOnJldHVybihsb2MwPT1Mb2NhdGlvbi5JTlRFUklPUiYmbG9jMSE9TG9jYXRpb24uSU5URVJJT1IpfHwobG9jMCE9TG9jYXRpb24uSU5URVJJT1ImJmxvYzE9PUxvY2F0aW9uLklOVEVSSU9SKTt9XG5yZXR1cm4gZmFsc2U7fVxuanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLnB0TG9jYXRvcj1udWxsO2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5nZW9tRmFjdD1udWxsO2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5yZXN1bHRHZW9tPW51bGw7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLmdyYXBoPW51bGw7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLmVkZ2VMaXN0PW51bGw7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLnJlc3VsdFBvbHlMaXN0PW51bGw7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLnJlc3VsdExpbmVMaXN0PW51bGw7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLnJlc3VsdFBvaW50TGlzdD1udWxsO2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5nZXRSZXN1bHRHZW9tZXRyeT1mdW5jdGlvbihmdW5jQ29kZSl7dGhpcy5jb21wdXRlT3ZlcmxheShmdW5jQ29kZSk7cmV0dXJuIHRoaXMucmVzdWx0R2VvbTt9XG5qc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUuZ2V0R3JhcGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncmFwaDt9XG5qc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUuY29tcHV0ZU92ZXJsYXk9ZnVuY3Rpb24ob3BDb2RlKXt0aGlzLmNvcHlQb2ludHMoMCk7dGhpcy5jb3B5UG9pbnRzKDEpO3RoaXMuYXJnWzBdLmNvbXB1dGVTZWxmTm9kZXModGhpcy5saSxmYWxzZSk7dGhpcy5hcmdbMV0uY29tcHV0ZVNlbGZOb2Rlcyh0aGlzLmxpLGZhbHNlKTt0aGlzLmFyZ1swXS5jb21wdXRlRWRnZUludGVyc2VjdGlvbnModGhpcy5hcmdbMV0sdGhpcy5saSx0cnVlKTt2YXIgYmFzZVNwbGl0RWRnZXM9bmV3IEFycmF5TGlzdCgpO3RoaXMuYXJnWzBdLmNvbXB1dGVTcGxpdEVkZ2VzKGJhc2VTcGxpdEVkZ2VzKTt0aGlzLmFyZ1sxXS5jb21wdXRlU3BsaXRFZGdlcyhiYXNlU3BsaXRFZGdlcyk7dmFyIHNwbGl0RWRnZXM9YmFzZVNwbGl0RWRnZXM7dGhpcy5pbnNlcnRVbmlxdWVFZGdlcyhiYXNlU3BsaXRFZGdlcyk7dGhpcy5jb21wdXRlTGFiZWxzRnJvbURlcHRocygpO3RoaXMucmVwbGFjZUNvbGxhcHNlZEVkZ2VzKCk7RWRnZU5vZGluZ1ZhbGlkYXRvci5jaGVja1ZhbGlkKHRoaXMuZWRnZUxpc3QuZ2V0RWRnZXMoKSk7dGhpcy5ncmFwaC5hZGRFZGdlcyh0aGlzLmVkZ2VMaXN0LmdldEVkZ2VzKCkpO3RoaXMuY29tcHV0ZUxhYmVsbGluZygpO3RoaXMubGFiZWxJbmNvbXBsZXRlTm9kZXMoKTt0aGlzLmZpbmRSZXN1bHRBcmVhRWRnZXMob3BDb2RlKTt0aGlzLmNhbmNlbER1cGxpY2F0ZVJlc3VsdEVkZ2VzKCk7dmFyIHBvbHlCdWlsZGVyPW5ldyBQb2x5Z29uQnVpbGRlcih0aGlzLmdlb21GYWN0KTtwb2x5QnVpbGRlci5hZGQodGhpcy5ncmFwaCk7dGhpcy5yZXN1bHRQb2x5TGlzdD1wb2x5QnVpbGRlci5nZXRQb2x5Z29ucygpO3ZhciBsaW5lQnVpbGRlcj1uZXcgTGluZUJ1aWxkZXIodGhpcyx0aGlzLmdlb21GYWN0LHRoaXMucHRMb2NhdG9yKTt0aGlzLnJlc3VsdExpbmVMaXN0PWxpbmVCdWlsZGVyLmJ1aWxkKG9wQ29kZSk7dmFyIHBvaW50QnVpbGRlcj1uZXcgUG9pbnRCdWlsZGVyKHRoaXMsdGhpcy5nZW9tRmFjdCx0aGlzLnB0TG9jYXRvcik7dGhpcy5yZXN1bHRQb2ludExpc3Q9cG9pbnRCdWlsZGVyLmJ1aWxkKG9wQ29kZSk7dGhpcy5yZXN1bHRHZW9tPXRoaXMuY29tcHV0ZUdlb21ldHJ5KHRoaXMucmVzdWx0UG9pbnRMaXN0LHRoaXMucmVzdWx0TGluZUxpc3QsdGhpcy5yZXN1bHRQb2x5TGlzdCxvcENvZGUpO31cbmpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5pbnNlcnRVbmlxdWVFZGdlcz1mdW5jdGlvbihlZGdlcyl7Zm9yKHZhciBpPWVkZ2VzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZT1pLm5leHQoKTt0aGlzLmluc2VydFVuaXF1ZUVkZ2UoZSk7fX1cbmpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5pbnNlcnRVbmlxdWVFZGdlPWZ1bmN0aW9uKGUpe3ZhciBleGlzdGluZ0VkZ2U9dGhpcy5lZGdlTGlzdC5maW5kRXF1YWxFZGdlKGUpO2lmKGV4aXN0aW5nRWRnZSE9PW51bGwpe3ZhciBleGlzdGluZ0xhYmVsPWV4aXN0aW5nRWRnZS5nZXRMYWJlbCgpO3ZhciBsYWJlbFRvTWVyZ2U9ZS5nZXRMYWJlbCgpO2lmKCFleGlzdGluZ0VkZ2UuaXNQb2ludHdpc2VFcXVhbChlKSl7bGFiZWxUb01lcmdlPW5ldyBMYWJlbChlLmdldExhYmVsKCkpO2xhYmVsVG9NZXJnZS5mbGlwKCk7fVxudmFyIGRlcHRoPWV4aXN0aW5nRWRnZS5nZXREZXB0aCgpO2lmKGRlcHRoLmlzTnVsbCgpKXtkZXB0aC5hZGQoZXhpc3RpbmdMYWJlbCk7fVxuZGVwdGguYWRkKGxhYmVsVG9NZXJnZSk7ZXhpc3RpbmdMYWJlbC5tZXJnZShsYWJlbFRvTWVyZ2UpO31lbHNle3RoaXMuZWRnZUxpc3QuYWRkKGUpO319O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5jb21wdXRlTGFiZWxzRnJvbURlcHRocz1mdW5jdGlvbigpe2Zvcih2YXIgaXQ9dGhpcy5lZGdlTGlzdC5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBlPWl0Lm5leHQoKTt2YXIgbGJsPWUuZ2V0TGFiZWwoKTt2YXIgZGVwdGg9ZS5nZXREZXB0aCgpO2lmKCFkZXB0aC5pc051bGwoKSl7ZGVwdGgubm9ybWFsaXplKCk7Zm9yKHZhciBpPTA7aTwyO2krKyl7aWYoIWxibC5pc051bGwoaSkmJmxibC5pc0FyZWEoKSYmIWRlcHRoLmlzTnVsbChpKSl7aWYoZGVwdGguZ2V0RGVsdGEoaSk9PTApe2xibC50b0xpbmUoaSk7fWVsc2V7QXNzZXJ0LmlzVHJ1ZSghZGVwdGguaXNOdWxsKGksUG9zaXRpb24uTEVGVCksJ2RlcHRoIG9mIExFRlQgc2lkZSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtsYmwuc2V0TG9jYXRpb24oaSxQb3NpdGlvbi5MRUZULGRlcHRoLmdldExvY2F0aW9uKGksUG9zaXRpb24uTEVGVCkpO0Fzc2VydC5pc1RydWUoIWRlcHRoLmlzTnVsbChpLFBvc2l0aW9uLlJJR0hUKSwnZGVwdGggb2YgUklHSFQgc2lkZSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtsYmwuc2V0TG9jYXRpb24oaSxQb3NpdGlvbi5SSUdIVCxkZXB0aC5nZXRMb2NhdGlvbihpLFBvc2l0aW9uLlJJR0hUKSk7fX19fX19XG5qc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUucmVwbGFjZUNvbGxhcHNlZEVkZ2VzPWZ1bmN0aW9uKCl7dmFyIG5ld0VkZ2VzPW5ldyBBcnJheUxpc3QoKTtmb3IodmFyIGl0PXRoaXMuZWRnZUxpc3QuaXRlcmF0b3IoKTtpdC5oYXNOZXh0KCk7KXt2YXIgZT1pdC5uZXh0KCk7aWYoZS5pc0NvbGxhcHNlZCgpKXtpdC5yZW1vdmUoKTtuZXdFZGdlcy5hZGQoZS5nZXRDb2xsYXBzZWRFZGdlKCkpO319XG50aGlzLmVkZ2VMaXN0LmFkZEFsbChuZXdFZGdlcyk7fVxuanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLmNvcHlQb2ludHM9ZnVuY3Rpb24oYXJnSW5kZXgpe2Zvcih2YXIgaT10aGlzLmFyZ1thcmdJbmRleF0uZ2V0Tm9kZUl0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZ3JhcGhOb2RlPWkubmV4dCgpO3ZhciBuZXdOb2RlPXRoaXMuZ3JhcGguYWRkTm9kZShncmFwaE5vZGUuZ2V0Q29vcmRpbmF0ZSgpKTtuZXdOb2RlLnNldExhYmVsKGFyZ0luZGV4LGdyYXBoTm9kZS5nZXRMYWJlbCgpLmdldExvY2F0aW9uKGFyZ0luZGV4KSk7fX1cbmpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5jb21wdXRlTGFiZWxsaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciBub2RlaXQ9dGhpcy5ncmFwaC5nZXROb2RlcygpLml0ZXJhdG9yKCk7bm9kZWl0Lmhhc05leHQoKTspe3ZhciBub2RlPW5vZGVpdC5uZXh0KCk7bm9kZS5nZXRFZGdlcygpLmNvbXB1dGVMYWJlbGxpbmcodGhpcy5hcmcpO31cbnRoaXMubWVyZ2VTeW1MYWJlbHMoKTt0aGlzLnVwZGF0ZU5vZGVMYWJlbGxpbmcoKTt9XG5qc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUubWVyZ2VTeW1MYWJlbHM9ZnVuY3Rpb24oKXtmb3IodmFyIG5vZGVpdD10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtub2RlaXQuaGFzTmV4dCgpOyl7dmFyIG5vZGU9bm9kZWl0Lm5leHQoKTtub2RlLmdldEVkZ2VzKCkubWVyZ2VTeW1MYWJlbHMoKTt9fVxuanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLnVwZGF0ZU5vZGVMYWJlbGxpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIG5vZGVpdD10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtub2RlaXQuaGFzTmV4dCgpOyl7dmFyIG5vZGU9bm9kZWl0Lm5leHQoKTt2YXIgbGJsPW5vZGUuZ2V0RWRnZXMoKS5nZXRMYWJlbCgpO25vZGUuZ2V0TGFiZWwoKS5tZXJnZShsYmwpO319XG5qc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUubGFiZWxJbmNvbXBsZXRlTm9kZXM9ZnVuY3Rpb24oKXt2YXIgbm9kZUNvdW50PTA7Zm9yKHZhciBuaT10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtuaS5oYXNOZXh0KCk7KXt2YXIgbj1uaS5uZXh0KCk7dmFyIGxhYmVsPW4uZ2V0TGFiZWwoKTtpZihuLmlzSXNvbGF0ZWQoKSl7bm9kZUNvdW50Kys7aWYobGFiZWwuaXNOdWxsKDApKVxudGhpcy5sYWJlbEluY29tcGxldGVOb2RlKG4sMCk7ZWxzZVxudGhpcy5sYWJlbEluY29tcGxldGVOb2RlKG4sMSk7fVxubi5nZXRFZGdlcygpLnVwZGF0ZUxhYmVsbGluZyhsYWJlbCk7fX07anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLmxhYmVsSW5jb21wbGV0ZU5vZGU9ZnVuY3Rpb24obix0YXJnZXRJbmRleCl7dmFyIGxvYz10aGlzLnB0TG9jYXRvci5sb2NhdGUobi5nZXRDb29yZGluYXRlKCksdGhpcy5hcmdbdGFyZ2V0SW5kZXhdLmdldEdlb21ldHJ5KCkpO24uZ2V0TGFiZWwoKS5zZXRMb2NhdGlvbih0YXJnZXRJbmRleCxsb2MpO307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLmZpbmRSZXN1bHRBcmVhRWRnZXM9ZnVuY3Rpb24ob3BDb2RlKXtmb3IodmFyIGl0PXRoaXMuZ3JhcGguZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7dmFyIGxhYmVsPWRlLmdldExhYmVsKCk7aWYobGFiZWwuaXNBcmVhKCkmJiFkZS5pc0ludGVyaW9yQXJlYUVkZ2UoKSYmanN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuaXNSZXN1bHRPZk9wKGxhYmVsLmdldExvY2F0aW9uKDAsUG9zaXRpb24uUklHSFQpLGxhYmVsLmdldExvY2F0aW9uKDEsUG9zaXRpb24uUklHSFQpLG9wQ29kZSkpe2RlLnNldEluUmVzdWx0KHRydWUpO319fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUuY2FuY2VsRHVwbGljYXRlUmVzdWx0RWRnZXM9ZnVuY3Rpb24oKXtmb3IodmFyIGl0PXRoaXMuZ3JhcGguZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7dmFyIHN5bT1kZS5nZXRTeW0oKTtpZihkZS5pc0luUmVzdWx0KCkmJnN5bS5pc0luUmVzdWx0KCkpe2RlLnNldEluUmVzdWx0KGZhbHNlKTtzeW0uc2V0SW5SZXN1bHQoZmFsc2UpO319fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUuaXNDb3ZlcmVkQnlMQT1mdW5jdGlvbihjb29yZCl7aWYodGhpcy5pc0NvdmVyZWQoY29vcmQsdGhpcy5yZXN1bHRMaW5lTGlzdCkpXG5yZXR1cm4gdHJ1ZTtpZih0aGlzLmlzQ292ZXJlZChjb29yZCx0aGlzLnJlc3VsdFBvbHlMaXN0KSlcbnJldHVybiB0cnVlO3JldHVybiBmYWxzZTt9O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5pc0NvdmVyZWRCeUE9ZnVuY3Rpb24oY29vcmQpe2lmKHRoaXMuaXNDb3ZlcmVkKGNvb3JkLHRoaXMucmVzdWx0UG9seUxpc3QpKVxucmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLmlzQ292ZXJlZD1mdW5jdGlvbihjb29yZCxnZW9tTGlzdCl7Zm9yKHZhciBpdD1nZW9tTGlzdC5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBnZW9tPWl0Lm5leHQoKTt2YXIgbG9jPXRoaXMucHRMb2NhdG9yLmxvY2F0ZShjb29yZCxnZW9tKTtpZihsb2MhPUxvY2F0aW9uLkVYVEVSSU9SKVxucmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AucHJvdG90eXBlLmNvbXB1dGVHZW9tZXRyeT1mdW5jdGlvbihyZXN1bHRQb2ludExpc3QscmVzdWx0TGluZUxpc3QscmVzdWx0UG9seUxpc3Qsb3Bjb2RlKXt2YXIgZ2VvbUxpc3Q9bmV3IEFycmF5TGlzdCgpO2dlb21MaXN0LmFkZEFsbChyZXN1bHRQb2ludExpc3QpO2dlb21MaXN0LmFkZEFsbChyZXN1bHRMaW5lTGlzdCk7Z2VvbUxpc3QuYWRkQWxsKHJlc3VsdFBvbHlMaXN0KTtyZXR1cm4gdGhpcy5nZW9tRmFjdC5idWlsZEdlb21ldHJ5KGdlb21MaXN0KTt9O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLnByb3RvdHlwZS5jcmVhdGVFbXB0eVJlc3VsdD1mdW5jdGlvbihvcENvZGUpe3ZhciByZXN1bHQ9bnVsbDtzd2l0Y2gocmVzdWx0RGltZW5zaW9uKG9wQ29kZSx0aGlzLmFyZ1swXS5nZXRHZW9tZXRyeSgpLHRoaXMuYXJnWzFdLmdldEdlb21ldHJ5KCkpKXtjYXNlLTE6cmVzdWx0PWdlb21GYWN0LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbigpO2JyZWFrO2Nhc2UgMDpyZXN1bHQ9Z2VvbUZhY3QuY3JlYXRlUG9pbnQobnVsbCk7YnJlYWs7Y2FzZSAxOnJlc3VsdD1nZW9tRmFjdC5jcmVhdGVMaW5lU3RyaW5nKG51bGwpO2JyZWFrO2Nhc2UgMjpyZXN1bHQ9Z2VvbUZhY3QuY3JlYXRlUG9seWdvbihudWxsLG51bGwpO2JyZWFrO31cbnJldHVybiByZXN1bHQ7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcC5wcm90b3R5cGUucmVzdWx0RGltZW5zaW9uPWZ1bmN0aW9uKG9wQ29kZSxnMCxnMSl7dmFyIGRpbTA9ZzAuZ2V0RGltZW5zaW9uKCk7dmFyIGRpbTE9ZzEuZ2V0RGltZW5zaW9uKCk7dmFyIHJlc3VsdERpbWVuc2lvbj0tMTtzd2l0Y2gob3BDb2RlKXtjYXNlIGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLklOVEVSU0VDVElPTjpyZXN1bHREaW1lbnNpb249TWF0aC5taW4oZGltMCxkaW0xKTticmVhaztjYXNlIGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLlVOSU9OOnJlc3VsdERpbWVuc2lvbj1NYXRoLm1heChkaW0wLGRpbTEpO2JyZWFrO2Nhc2UganN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3AuRElGRkVSRU5DRTpyZXN1bHREaW1lbnNpb249ZGltMDticmVhaztjYXNlIGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU9wLlNZTURJRkZFUkVOQ0U6cmVzdWx0RGltZW5zaW9uPU1hdGgubWF4KGRpbTAsZGltMSk7YnJlYWs7fVxucmV0dXJuIHJlc3VsdERpbWVuc2lvbjt9O30pKCk7KGZ1bmN0aW9uKCl7dmFyIE92ZXJsYXlPcD1qc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk92ZXJsYXlPcDt2YXIgR2VvbWV0cnlTbmFwcGVyPWpzdHMub3BlcmF0aW9uLm92ZXJsYXkuc25hcC5HZW9tZXRyeVNuYXBwZXI7dmFyIFNuYXBPdmVybGF5T3A9ZnVuY3Rpb24oZzEsZzIpe3RoaXMuZ2VvbT1bXTt0aGlzLmdlb21bMF09ZzE7dGhpcy5nZW9tWzFdPWcyO3RoaXMuY29tcHV0ZVNuYXBUb2xlcmFuY2UoKTt9O1NuYXBPdmVybGF5T3Aub3ZlcmxheU9wPWZ1bmN0aW9uKGcwLGcxLG9wQ29kZSl7dmFyIG9wPW5ldyBTbmFwT3ZlcmxheU9wKGcwLGcxKTtyZXR1cm4gb3AuZ2V0UmVzdWx0R2VvbWV0cnkob3BDb2RlKTt9O1NuYXBPdmVybGF5T3AuaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGcwLGcxKXtyZXR1cm4gdGhpcy5vdmVybGF5T3AoZzAsZzEsT3ZlcmxheU9wLklOVEVSU0VDVElPTik7fTtTbmFwT3ZlcmxheU9wLnVuaW9uPWZ1bmN0aW9uKGcwLGcxKXtyZXR1cm4gdGhpcy5vdmVybGF5T3AoZzAsZzEsT3ZlcmxheU9wLlVOSU9OKTt9O1NuYXBPdmVybGF5T3AuZGlmZmVyZW5jZT1mdW5jdGlvbihnMCxnMSl7cmV0dXJuIG92ZXJsYXlPcChnMCxnMSxPdmVybGF5T3AuRElGRkVSRU5DRSk7fTtTbmFwT3ZlcmxheU9wLnN5bURpZmZlcmVuY2U9ZnVuY3Rpb24oZzAsZzEpe3JldHVybiBvdmVybGF5T3AoZzAsZzEsT3ZlcmxheU9wLlNZTURJRkZFUkVOQ0UpO307U25hcE92ZXJsYXlPcC5wcm90b3R5cGUuZ2VvbT1udWxsO1NuYXBPdmVybGF5T3AucHJvdG90eXBlLnNuYXBUb2xlcmFuY2U9bnVsbDtTbmFwT3ZlcmxheU9wLnByb3RvdHlwZS5jb21wdXRlU25hcFRvbGVyYW5jZT1mdW5jdGlvbigpe3RoaXMuc25hcFRvbGVyYW5jZT1HZW9tZXRyeVNuYXBwZXIuY29tcHV0ZU92ZXJsYXlTbmFwVG9sZXJhbmNlKHRoaXMuZ2VvbVswXSx0aGlzLmdlb21bMV0pO307U25hcE92ZXJsYXlPcC5wcm90b3R5cGUuZ2V0UmVzdWx0R2VvbWV0cnk9ZnVuY3Rpb24ob3BDb2RlKXt2YXIgcHJlcEdlb209dGhpcy5zbmFwKHRoaXMuZ2VvbSk7dmFyIHJlc3VsdD1PdmVybGF5T3Aub3ZlcmxheU9wKHByZXBHZW9tWzBdLHByZXBHZW9tWzFdLG9wQ29kZSk7cmV0dXJuIHRoaXMucHJlcGFyZVJlc3VsdChyZXN1bHQpO307U25hcE92ZXJsYXlPcC5wcm90b3R5cGUuc2VsZlNuYXA9ZnVuY3Rpb24oZ2VvbSl7dmFyIHNuYXBwZXIwPW5ldyBHZW9tZXRyeVNuYXBwZXIoZ2VvbSk7dmFyIHNuYXBHZW9tPXNuYXBwZXIwLnNuYXBUbyhnZW9tLHRoaXMuc25hcFRvbGVyYW5jZSk7cmV0dXJuIHNuYXBHZW9tO307U25hcE92ZXJsYXlPcC5wcm90b3R5cGUuc25hcD1mdW5jdGlvbihnZW9tKXt2YXIgcmVtR2VvbT1nZW9tO3ZhciBzbmFwR2VvbT1HZW9tZXRyeVNuYXBwZXIuc25hcChyZW1HZW9tWzBdLHJlbUdlb21bMV0sdGhpcy5zbmFwVG9sZXJhbmNlKTtyZXR1cm4gc25hcEdlb207fTtTbmFwT3ZlcmxheU9wLnByb3RvdHlwZS5wcmVwYXJlUmVzdWx0PWZ1bmN0aW9uKGdlb20pe3JldHVybiBnZW9tO307U25hcE92ZXJsYXlPcC5wcm90b3R5cGUuY2JyPW51bGw7U25hcE92ZXJsYXlPcC5wcm90b3R5cGUucmVtb3ZlQ29tbW9uQml0cz1mdW5jdGlvbihnZW9tKXt0aGlzLmNicj1uZXcganN0cy5wcmVjaXNpb24uQ29tbW9uQml0c1JlbW92ZXIoKTt0aGlzLmNici5hZGQodGhpcy5nZW9tWzBdKTt0aGlzLmNici5hZGQodGhpcy5nZW9tWzFdKTt2YXIgcmVtR2VvbT1bXTtyZW1HZW9tWzBdPWNici5yZW1vdmVDb21tb25CaXRzKHRoaXMuZ2VvbVswXS5jbG9uZSgpKTtyZW1HZW9tWzFdPWNici5yZW1vdmVDb21tb25CaXRzKHRoaXMuZ2VvbVsxXS5jbG9uZSgpKTtyZXR1cm4gcmVtR2VvbTt9O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuc25hcC5TbmFwT3ZlcmxheU9wPVNuYXBPdmVybGF5T3A7fSkoKTtqc3RzLmdlb21ncmFwaC5pbmRleC5FZGdlU2V0SW50ZXJzZWN0b3I9ZnVuY3Rpb24oKXt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LkVkZ2VTZXRJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbnM9ZnVuY3Rpb24oZWRnZXMsc2ksdGVzdEFsbFNlZ21lbnRzKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tZ3JhcGguaW5kZXguRWRnZVNldEludGVyc2VjdG9yLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9uczI9ZnVuY3Rpb24oZWRnZXMwLGVkZ2VzMSxzaSl7dGhyb3cgbmV3IGpzdHMuZXJyb3IuQWJzdHJhY3RNZXRob2RJbnZvY2F0aW9uRXJyb3IoKTt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZU1DU3dlZXBMaW5lSW50ZXJzZWN0b3I9ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cz1bXTt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZU1DU3dlZXBMaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlPW5ldyBqc3RzLmdlb21ncmFwaC5pbmRleC5FZGdlU2V0SW50ZXJzZWN0b3IoKTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVNQ1N3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5ldmVudHM9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVNQ1N3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5uT3ZlcmxhcHM9MDtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVNQ1N3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9ucz1mdW5jdGlvbihlZGdlcyxzaSx0ZXN0QWxsU2VnbWVudHMpe2lmKHNpIGluc3RhbmNlb2YgamF2YXNjcmlwdC51dGlsLkxpc3Qpe3RoaXMuY29tcHV0ZUludGVyc2VjdGlvbnMyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxuaWYodGVzdEFsbFNlZ21lbnRzKXt0aGlzLmFkZExpc3QyKGVkZ2VzLG51bGwpO31lbHNle3RoaXMuYWRkTGlzdChlZGdlcyk7fVxudGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uczMoc2kpO307anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlTUNTd2VlcExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbnMyPWZ1bmN0aW9uKGVkZ2VzMCxlZGdlczEsc2kpe3RoaXMuYWRkTGlzdDIoZWRnZXMwLGVkZ2VzMCk7dGhpcy5hZGRMaXN0MihlZGdlczEsZWRnZXMxKTt0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25zMyhzaSk7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVNQ1N3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZWRnZSxlZGdlU2V0KXtpZihlZGdlIGluc3RhbmNlb2YgamF2YXNjcmlwdC51dGlsLkxpc3Qpe3RoaXMuYWRkTGlzdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbnZhciBtY2U9ZWRnZS5nZXRNb25vdG9uZUNoYWluRWRnZSgpO3ZhciBzdGFydEluZGV4PW1jZS5nZXRTdGFydEluZGV4ZXMoKTtmb3IodmFyIGk9MDtpPHN0YXJ0SW5kZXgubGVuZ3RoLTE7aSsrKXt2YXIgbWM9bmV3IGpzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW4obWNlLGkpO3ZhciBpbnNlcnRFdmVudD1uZXcganN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQobWNlLmdldE1pblgoaSksbWMsZWRnZVNldCk7dGhpcy5ldmVudHMucHVzaChpbnNlcnRFdmVudCk7dGhpcy5ldmVudHMucHVzaChuZXcganN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQobWNlLmdldE1heFgoaSksaW5zZXJ0RXZlbnQpKTt9fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVNQ1N3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5hZGRMaXN0PWZ1bmN0aW9uKGVkZ2VzKXtmb3IodmFyIGk9ZWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlZGdlPWkubmV4dCgpO3RoaXMuYWRkKGVkZ2UsZWRnZSk7fX07anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlTUNTd2VlcExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuYWRkTGlzdDI9ZnVuY3Rpb24oZWRnZXMsZWRnZVNldCl7Zm9yKHZhciBpPWVkZ2VzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZWRnZT1pLm5leHQoKTt0aGlzLmFkZChlZGdlLGVkZ2VTZXQpO319O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZU1DU3dlZXBMaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLnByZXBhcmVFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29tcGFyZVRvKGIpO30pO2Zvcih2YXIgaT0wO2k8dGhpcy5ldmVudHMubGVuZ3RoO2krKyl7dmFyIGV2PXRoaXMuZXZlbnRzW2ldO2lmKGV2LmlzRGVsZXRlKCkpe2V2LmdldEluc2VydEV2ZW50KCkuc2V0RGVsZXRlRXZlbnRJbmRleChpKTt9fX07anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlTUNTd2VlcExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbnMzPWZ1bmN0aW9uKHNpKXt0aGlzLm5PdmVybGFwcz0wO3RoaXMucHJlcGFyZUV2ZW50cygpO2Zvcih2YXIgaT0wO2k8dGhpcy5ldmVudHMubGVuZ3RoO2krKyl7dmFyIGV2PXRoaXMuZXZlbnRzW2ldO2lmKGV2LmlzSW5zZXJ0KCkpe3RoaXMucHJvY2Vzc092ZXJsYXBzKGksZXYuZ2V0RGVsZXRlRXZlbnRJbmRleCgpLGV2LHNpKTt9fX07anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlTUNTd2VlcExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUucHJvY2Vzc092ZXJsYXBzPWZ1bmN0aW9uKHN0YXJ0LGVuZCxldjAsc2kpe3ZhciBtYzA9ZXYwLmdldE9iamVjdCgpO2Zvcih2YXIgaT1zdGFydDtpPGVuZDtpKyspe3ZhciBldjE9dGhpcy5ldmVudHNbaV07aWYoZXYxLmlzSW5zZXJ0KCkpe3ZhciBtYzE9ZXYxLmdldE9iamVjdCgpO2lmKCFldjAuaXNTYW1lTGFiZWwoZXYxKSl7bWMwLmNvbXB1dGVJbnRlcnNlY3Rpb25zKG1jMSxzaSk7dGhpcy5uT3ZlcmxhcHMrKzt9fX19O2pzdHMuYWxnb3JpdGhtLmxvY2F0ZS5TaW1wbGVQb2ludEluQXJlYUxvY2F0b3I9ZnVuY3Rpb24oZ2VvbSl7dGhpcy5nZW9tPWdlb207fTtqc3RzLmFsZ29yaXRobS5sb2NhdGUuU2ltcGxlUG9pbnRJbkFyZWFMb2NhdG9yLmxvY2F0ZT1mdW5jdGlvbihwLGdlb20pe2lmKGdlb20uaXNFbXB0eSgpKVxucmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUjtpZihqc3RzLmFsZ29yaXRobS5sb2NhdGUuU2ltcGxlUG9pbnRJbkFyZWFMb2NhdG9yLmNvbnRhaW5zUG9pbnQocCxnZW9tKSlcbnJldHVybiBqc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1I7cmV0dXJuIGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUjt9O2pzdHMuYWxnb3JpdGhtLmxvY2F0ZS5TaW1wbGVQb2ludEluQXJlYUxvY2F0b3IuY29udGFpbnNQb2ludD1mdW5jdGlvbihwLGdlb20pe2lmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7cmV0dXJuIGpzdHMuYWxnb3JpdGhtLmxvY2F0ZS5TaW1wbGVQb2ludEluQXJlYUxvY2F0b3IuY29udGFpbnNQb2ludEluUG9seWdvbihwLGdlb20pO31lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9ufHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9pbnR8fGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nfHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7Zm9yKHZhciBpPTA7aTxnZW9tLmdlb21ldHJpZXMubGVuZ3RoO2krKyl7dmFyIGcyPWdlb20uZ2VvbWV0cmllc1tpXTtpZihnMiE9PWdlb20pXG5pZihqc3RzLmFsZ29yaXRobS5sb2NhdGUuU2ltcGxlUG9pbnRJbkFyZWFMb2NhdG9yLmNvbnRhaW5zUG9pbnQocCxnMikpXG5yZXR1cm4gdHJ1ZTt9fVxucmV0dXJuIGZhbHNlO307anN0cy5hbGdvcml0aG0ubG9jYXRlLlNpbXBsZVBvaW50SW5BcmVhTG9jYXRvci5jb250YWluc1BvaW50SW5Qb2x5Z29uPWZ1bmN0aW9uKHAscG9seSl7aWYocG9seS5pc0VtcHR5KCkpXG5yZXR1cm4gZmFsc2U7dmFyIHNoZWxsPXBvbHkuZ2V0RXh0ZXJpb3JSaW5nKCk7aWYoIWpzdHMuYWxnb3JpdGhtLmxvY2F0ZS5TaW1wbGVQb2ludEluQXJlYUxvY2F0b3IuaXNQb2ludEluUmluZyhwLHNoZWxsKSlcbnJldHVybiBmYWxzZTtmb3IodmFyIGk9MDtpPHBvbHkuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7aSsrKXt2YXIgaG9sZT1wb2x5LmdldEludGVyaW9yUmluZ04oaSk7aWYoanN0cy5hbGdvcml0aG0ubG9jYXRlLlNpbXBsZVBvaW50SW5BcmVhTG9jYXRvci5pc1BvaW50SW5SaW5nKHAsaG9sZSkpXG5yZXR1cm4gZmFsc2U7fVxucmV0dXJuIHRydWU7fTtqc3RzLmFsZ29yaXRobS5sb2NhdGUuU2ltcGxlUG9pbnRJbkFyZWFMb2NhdG9yLmlzUG9pbnRJblJpbmc9ZnVuY3Rpb24ocCxyaW5nKXtpZighcmluZy5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhwKSlcbnJldHVybiBmYWxzZTtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzUG9pbnRJblJpbmcocCxyaW5nLmdldENvb3JkaW5hdGVzKCkpO307anN0cy5hbGdvcml0aG0ubG9jYXRlLlNpbXBsZVBvaW50SW5BcmVhTG9jYXRvci5wcm90b3R5cGUuZ2VvbT1udWxsO2pzdHMuYWxnb3JpdGhtLmxvY2F0ZS5TaW1wbGVQb2ludEluQXJlYUxvY2F0b3IucHJvdG90eXBlLmxvY2F0ZT1mdW5jdGlvbihwKXtyZXR1cm4ganN0cy5hbGdvcml0aG0ubG9jYXRlLlNpbXBsZVBvaW50SW5BcmVhTG9jYXRvci5sb2NhdGUocCxnZW9tKTt9OyhmdW5jdGlvbigpe3ZhciBMb2NhdGlvbj1qc3RzLmdlb20uTG9jYXRpb247dmFyIFBvc2l0aW9uPWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uO3ZhciBFZGdlRW5kU3Rhcj1qc3RzLmdlb21ncmFwaC5FZGdlRW5kU3Rhcjt2YXIgQXNzZXJ0PWpzdHMudXRpbC5Bc3NlcnQ7anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhcj1mdW5jdGlvbigpe2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmRTdGFyLmNhbGwodGhpcyk7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZT1uZXcgRWRnZUVuZFN0YXIoKTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2VTdGFyLmNvbnN0cnVjdG9yPWpzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXI7anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUucmVzdWx0QXJlYUVkZ2VMaXN0PW51bGw7anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUubGFiZWw9bnVsbDtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24oZWUpe3ZhciBkZT1lZTt0aGlzLmluc2VydEVkZ2VFbmQoZGUsZGUpO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUuZ2V0TGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbDt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLmdldE91dGdvaW5nRGVncmVlPWZ1bmN0aW9uKCl7dmFyIGRlZ3JlZT0wO2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7aWYoZGUuaXNJblJlc3VsdCgpKVxuZGVncmVlKys7fVxucmV0dXJuIGRlZ3JlZTt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLmdldE91dGdvaW5nRGVncmVlPWZ1bmN0aW9uKGVyKXt2YXIgZGVncmVlPTA7Zm9yKHZhciBpdD10aGlzLml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGRlPWl0Lm5leHQoKTtpZihkZS5nZXRFZGdlUmluZygpPT09ZXIpXG5kZWdyZWUrKzt9XG5yZXR1cm4gZGVncmVlO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUuZ2V0UmlnaHRtb3N0RWRnZT1mdW5jdGlvbigpe3ZhciBlZGdlcz10aGlzLmdldEVkZ2VzKCk7dmFyIHNpemU9ZWRnZXMuc2l6ZSgpO2lmKHNpemU8MSlcbnJldHVybiBudWxsO3ZhciBkZTA9ZWRnZXMuZ2V0KDApO2lmKHNpemU9PTEpXG5yZXR1cm4gZGUwO3ZhciBkZUxhc3Q9ZWRnZXMuZ2V0KHNpemUtMSk7dmFyIHF1YWQwPWRlMC5nZXRRdWFkcmFudCgpO3ZhciBxdWFkMT1kZUxhc3QuZ2V0UXVhZHJhbnQoKTtpZihqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5pc05vcnRoZXJuKHF1YWQwKSYmanN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuaXNOb3J0aGVybihxdWFkMSkpXG5yZXR1cm4gZGUwO2Vsc2UgaWYoIWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LmlzTm9ydGhlcm4ocXVhZDApJiYhanN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuaXNOb3J0aGVybihxdWFkMSkpXG5yZXR1cm4gZGVMYXN0O2Vsc2V7dmFyIG5vbkhvcml6b250YWxFZGdlPW51bGw7aWYoZGUwLmdldER5KCkhPTApXG5yZXR1cm4gZGUwO2Vsc2UgaWYoZGVMYXN0LmdldER5KCkhPTApXG5yZXR1cm4gZGVMYXN0O31cbkFzc2VydC5zaG91bGROZXZlclJlYWNoSGVyZSgnZm91bmQgdHdvIGhvcml6b250YWwgZWRnZXMgaW5jaWRlbnQgb24gbm9kZScpO3JldHVybiBudWxsO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUuY29tcHV0ZUxhYmVsbGluZz1mdW5jdGlvbihnZW9tKXtFZGdlRW5kU3Rhci5wcm90b3R5cGUuY29tcHV0ZUxhYmVsbGluZy5jYWxsKHRoaXMsZ2VvbSk7dGhpcy5sYWJlbD1uZXcganN0cy5nZW9tZ3JhcGguTGFiZWwoTG9jYXRpb24uTk9ORSk7Zm9yKHZhciBpdD10aGlzLml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGVlPWl0Lm5leHQoKTt2YXIgZT1lZS5nZXRFZGdlKCk7dmFyIGVMYWJlbD1lLmdldExhYmVsKCk7Zm9yKHZhciBpPTA7aTwyO2krKyl7dmFyIGVMb2M9ZUxhYmVsLmdldExvY2F0aW9uKGkpO2lmKGVMb2M9PT1Mb2NhdGlvbi5JTlRFUklPUnx8ZUxvYz09PUxvY2F0aW9uLkJPVU5EQVJZKVxudGhpcy5sYWJlbC5zZXRMb2NhdGlvbihpLExvY2F0aW9uLklOVEVSSU9SKTt9fX07anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUubWVyZ2VTeW1MYWJlbHM9ZnVuY3Rpb24oKXtmb3IodmFyIGl0PXRoaXMuaXRlcmF0b3IoKTtpdC5oYXNOZXh0KCk7KXt2YXIgZGU9aXQubmV4dCgpO3ZhciBsYWJlbD1kZS5nZXRMYWJlbCgpO2xhYmVsLm1lcmdlKGRlLmdldFN5bSgpLmdldExhYmVsKCkpO319O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLnVwZGF0ZUxhYmVsbGluZz1mdW5jdGlvbihub2RlTGFiZWwpe2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7dmFyIGxhYmVsPWRlLmdldExhYmVsKCk7bGFiZWwuc2V0QWxsTG9jYXRpb25zSWZOdWxsKDAsbm9kZUxhYmVsLmdldExvY2F0aW9uKDApKTtsYWJlbC5zZXRBbGxMb2NhdGlvbnNJZk51bGwoMSxub2RlTGFiZWwuZ2V0TG9jYXRpb24oMSkpO319O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLmdldFJlc3VsdEFyZWFFZGdlcz1mdW5jdGlvbigpe2lmKHRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0IT09bnVsbClcbnJldHVybiB0aGlzLnJlc3VsdEFyZWFFZGdlTGlzdDt0aGlzLnJlc3VsdEFyZWFFZGdlTGlzdD1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpO2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7aWYoZGUuaXNJblJlc3VsdCgpfHxkZS5nZXRTeW0oKS5pc0luUmVzdWx0KCkpXG50aGlzLnJlc3VsdEFyZWFFZGdlTGlzdC5hZGQoZGUpO31cbnJldHVybiB0aGlzLnJlc3VsdEFyZWFFZGdlTGlzdDt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLlNDQU5OSU5HX0ZPUl9JTkNPTUlORz0xO2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLkxJTktJTkdfVE9fT1VUR09JTkc9Mjtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcz1mdW5jdGlvbigpe3RoaXMuZ2V0UmVzdWx0QXJlYUVkZ2VzKCk7dmFyIGZpcnN0T3V0PW51bGw7dmFyIGluY29taW5nPW51bGw7dmFyIHN0YXRlPXRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HO2Zvcih2YXIgaT0wO2k8dGhpcy5yZXN1bHRBcmVhRWRnZUxpc3Quc2l6ZSgpO2krKyl7dmFyIG5leHRPdXQ9dGhpcy5yZXN1bHRBcmVhRWRnZUxpc3QuZ2V0KGkpO3ZhciBuZXh0SW49bmV4dE91dC5nZXRTeW0oKTtpZighbmV4dE91dC5nZXRMYWJlbCgpLmlzQXJlYSgpKVxuY29udGludWU7aWYoZmlyc3RPdXQ9PT1udWxsJiZuZXh0T3V0LmlzSW5SZXN1bHQoKSlcbmZpcnN0T3V0PW5leHRPdXQ7c3dpdGNoKHN0YXRlKXtjYXNlIHRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HOmlmKCFuZXh0SW4uaXNJblJlc3VsdCgpKVxuY29udGludWU7aW5jb21pbmc9bmV4dEluO3N0YXRlPXRoaXMuTElOS0lOR19UT19PVVRHT0lORzticmVhaztjYXNlIHRoaXMuTElOS0lOR19UT19PVVRHT0lORzppZighbmV4dE91dC5pc0luUmVzdWx0KCkpXG5jb250aW51ZTtpbmNvbWluZy5zZXROZXh0KG5leHRPdXQpO3N0YXRlPXRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HO2JyZWFrO319XG5pZihzdGF0ZT09PXRoaXMuTElOS0lOR19UT19PVVRHT0lORyl7aWYoZmlyc3RPdXQ9PT1udWxsKVxudGhyb3cgbmV3IGpzdHMuZXJyb3IuVG9wb2xvZ3lFcnJvcignbm8gb3V0Z29pbmcgZGlyRWRnZSBmb3VuZCcsdGhpcy5nZXRDb29yZGluYXRlKCkpO0Fzc2VydC5pc1RydWUoZmlyc3RPdXQuaXNJblJlc3VsdCgpLCd1bmFibGUgdG8gbGluayBsYXN0IGluY29taW5nIGRpckVkZ2UnKTtpbmNvbWluZy5zZXROZXh0KGZpcnN0T3V0KTt9fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5saW5rTWluaW1hbERpcmVjdGVkRWRnZXM9ZnVuY3Rpb24oZXIpe3ZhciBmaXJzdE91dD1udWxsO3ZhciBpbmNvbWluZz1udWxsO3ZhciBzdGF0ZT10aGlzLlNDQU5OSU5HX0ZPUl9JTkNPTUlORztmb3IodmFyIGk9dGhpcy5yZXN1bHRBcmVhRWRnZUxpc3Quc2l6ZSgpLTE7aT49MDtpLS0pe3ZhciBuZXh0T3V0PXRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LmdldChpKTt2YXIgbmV4dEluPW5leHRPdXQuZ2V0U3ltKCk7aWYoZmlyc3RPdXQ9PT1udWxsJiZuZXh0T3V0LmdldEVkZ2VSaW5nKCk9PT1lcilcbmZpcnN0T3V0PW5leHRPdXQ7c3dpdGNoKHN0YXRlKXtjYXNlIHRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HOmlmKG5leHRJbi5nZXRFZGdlUmluZygpIT1lcilcbmNvbnRpbnVlO2luY29taW5nPW5leHRJbjtzdGF0ZT10aGlzLkxJTktJTkdfVE9fT1VUR09JTkc7YnJlYWs7Y2FzZSB0aGlzLkxJTktJTkdfVE9fT1VUR09JTkc6aWYobmV4dE91dC5nZXRFZGdlUmluZygpIT09ZXIpXG5jb250aW51ZTtpbmNvbWluZy5zZXROZXh0TWluKG5leHRPdXQpO3N0YXRlPXRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HO2JyZWFrO319XG5pZihzdGF0ZT09PXRoaXMuTElOS0lOR19UT19PVVRHT0lORyl7QXNzZXJ0LmlzVHJ1ZShmaXJzdE91dCE9PW51bGwsJ2ZvdW5kIG51bGwgZm9yIGZpcnN0IG91dGdvaW5nIGRpckVkZ2UnKTtBc3NlcnQuaXNUcnVlKGZpcnN0T3V0LmdldEVkZ2VSaW5nKCk9PT1lciwndW5hYmxlIHRvIGxpbmsgbGFzdCBpbmNvbWluZyBkaXJFZGdlJyk7aW5jb21pbmcuc2V0TmV4dE1pbihmaXJzdE91dCk7fX07anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUubGlua0FsbERpcmVjdGVkRWRnZXM9ZnVuY3Rpb24oKXt0aGlzLmdldEVkZ2VzKCk7dmFyIHByZXZPdXQ9bnVsbDt2YXIgZmlyc3RJbj1udWxsO2Zvcih2YXIgaT10aGlzLmVkZ2VMaXN0LnNpemUoKS0xO2k+PTA7aS0tKXt2YXIgbmV4dE91dD10aGlzLmVkZ2VMaXN0LmdldChpKTt2YXIgbmV4dEluPW5leHRPdXQuZ2V0U3ltKCk7aWYoZmlyc3RJbj09PW51bGwpXG5maXJzdEluPW5leHRJbjtpZihwcmV2T3V0IT09bnVsbClcbm5leHRJbi5zZXROZXh0KHByZXZPdXQpO3ByZXZPdXQ9bmV4dE91dDt9XG5maXJzdEluLnNldE5leHQocHJldk91dCk7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2VTdGFyLnByb3RvdHlwZS5maW5kQ292ZXJlZExpbmVFZGdlcz1mdW5jdGlvbigpe3ZhciBzdGFydExvYz1Mb2NhdGlvbi5OT05FO2Zvcih2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBuZXh0T3V0PWl0Lm5leHQoKTt2YXIgbmV4dEluPW5leHRPdXQuZ2V0U3ltKCk7aWYoIW5leHRPdXQuaXNMaW5lRWRnZSgpKXtpZihuZXh0T3V0LmlzSW5SZXN1bHQoKSl7c3RhcnRMb2M9TG9jYXRpb24uSU5URVJJT1I7YnJlYWs7fVxuaWYobmV4dEluLmlzSW5SZXN1bHQoKSl7c3RhcnRMb2M9TG9jYXRpb24uRVhURVJJT1I7YnJlYWs7fX19XG5pZihzdGFydExvYz09PUxvY2F0aW9uLk5PTkUpXG5yZXR1cm47dmFyIGN1cnJMb2M9c3RhcnRMb2M7Zm9yKHZhciBpdD10aGlzLml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIG5leHRPdXQ9aXQubmV4dCgpO3ZhciBuZXh0SW49bmV4dE91dC5nZXRTeW0oKTtpZihuZXh0T3V0LmlzTGluZUVkZ2UoKSl7bmV4dE91dC5nZXRFZGdlKCkuc2V0Q292ZXJlZChjdXJyTG9jPT09TG9jYXRpb24uSU5URVJJT1IpO31lbHNle2lmKG5leHRPdXQuaXNJblJlc3VsdCgpKVxuY3VyckxvYz1Mb2NhdGlvbi5FWFRFUklPUjtpZihuZXh0SW4uaXNJblJlc3VsdCgpKVxuY3VyckxvYz1Mb2NhdGlvbi5JTlRFUklPUjt9fX07anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlU3Rhci5wcm90b3R5cGUuY29tcHV0ZURlcHRocz1mdW5jdGlvbihkZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMuY29tcHV0ZURlcHRoczIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9XG52YXIgZWRnZUluZGV4PXRoaXMuZmluZEluZGV4KGRlKTt2YXIgbGFiZWw9ZGUuZ2V0TGFiZWwoKTt2YXIgc3RhcnREZXB0aD1kZS5nZXREZXB0aChQb3NpdGlvbi5MRUZUKTt2YXIgdGFyZ2V0TGFzdERlcHRoPWRlLmdldERlcHRoKFBvc2l0aW9uLlJJR0hUKTt2YXIgbmV4dERlcHRoPXRoaXMuY29tcHV0ZURlcHRoczIoZWRnZUluZGV4KzEsdGhpcy5lZGdlTGlzdC5zaXplKCksc3RhcnREZXB0aCk7dmFyIGxhc3REZXB0aD10aGlzLmNvbXB1dGVEZXB0aHMyKDAsZWRnZUluZGV4LG5leHREZXB0aCk7aWYobGFzdERlcHRoIT10YXJnZXRMYXN0RGVwdGgpXG50aHJvdyBuZXcganN0cy5lcnJvci5Ub3BvbG9neUVycm9yKCdkZXB0aCBtaXNtYXRjaCBhdCAnK1xuZGUuZ2V0Q29vcmRpbmF0ZSgpKTt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZVN0YXIucHJvdG90eXBlLmNvbXB1dGVEZXB0aHMyPWZ1bmN0aW9uKHN0YXJ0SW5kZXgsZW5kSW5kZXgsc3RhcnREZXB0aCl7dmFyIGN1cnJEZXB0aD1zdGFydERlcHRoO2Zvcih2YXIgaT1zdGFydEluZGV4O2k8ZW5kSW5kZXg7aSsrKXt2YXIgbmV4dERlPXRoaXMuZWRnZUxpc3QuZ2V0KGkpO3ZhciBsYWJlbD1uZXh0RGUuZ2V0TGFiZWwoKTtuZXh0RGUuc2V0RWRnZURlcHRocyhQb3NpdGlvbi5SSUdIVCxjdXJyRGVwdGgpO2N1cnJEZXB0aD1uZXh0RGUuZ2V0RGVwdGgoUG9zaXRpb24uTEVGVCk7fVxucmV0dXJuIGN1cnJEZXB0aDt9O30pKCk7anN0cy5hbGdvcml0aG0uQ2VudHJvaWRMaW5lPWZ1bmN0aW9uKCl7dGhpcy5jZW50U3VtPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO307anN0cy5hbGdvcml0aG0uQ2VudHJvaWRMaW5lLnByb3RvdHlwZS5jZW50U3VtPW51bGw7anN0cy5hbGdvcml0aG0uQ2VudHJvaWRMaW5lLnByb3RvdHlwZS50b3RhbExlbmd0aD0wLjA7anN0cy5hbGdvcml0aG0uQ2VudHJvaWRMaW5lLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZ2VvbSl7aWYoZ2VvbSBpbnN0YW5jZW9mIEFycmF5KXt0aGlzLmFkZDIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9XG5pZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmcpe3RoaXMuYWRkKGdlb20uZ2V0Q29vcmRpbmF0ZXMoKSk7fWVsc2UgaWYoZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29uKXt2YXIgcG9seT1nZW9tO3RoaXMuYWRkKHBvbHkuZ2V0RXh0ZXJpb3JSaW5nKCkuZ2V0Q29vcmRpbmF0ZXMoKSk7Zm9yKHZhciBpPTA7aTxwb2x5LmdldE51bUludGVyaW9yUmluZygpO2krKyl7dGhpcy5hZGQocG9seS5nZXRJbnRlcmlvclJpbmdOKGkpLmdldENvb3JkaW5hdGVzKCkpO319ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbnx8Z2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvaW50fHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpTGluZVN0cmluZ3x8Z2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvbHlnb24pe3ZhciBnYz1nZW9tO2Zvcih2YXIgaT0wO2k8Z2MuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dGhpcy5hZGQoZ2MuZ2V0R2VvbWV0cnlOKGkpKTt9fX07anN0cy5hbGdvcml0aG0uQ2VudHJvaWRMaW5lLnByb3RvdHlwZS5nZXRDZW50cm9pZD1mdW5jdGlvbigpe3ZhciBjZW50PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO2NlbnQueD10aGlzLmNlbnRTdW0ueC90aGlzLnRvdGFsTGVuZ3RoO2NlbnQueT10aGlzLmNlbnRTdW0ueS90aGlzLnRvdGFsTGVuZ3RoO3JldHVybiBjZW50O307anN0cy5hbGdvcml0aG0uQ2VudHJvaWRMaW5lLnByb3RvdHlwZS5hZGQyPWZ1bmN0aW9uKHB0cyl7Zm9yKHZhciBpPTA7aTxwdHMubGVuZ3RoLTE7aSsrKXt2YXIgc2VnbWVudExlbj1wdHNbaV0uZGlzdGFuY2UocHRzW2krMV0pO3RoaXMudG90YWxMZW5ndGgrPXNlZ21lbnRMZW47dmFyIG1pZHg9KHB0c1tpXS54K3B0c1tpKzFdLngpLzI7dGhpcy5jZW50U3VtLngrPXNlZ21lbnRMZW4qbWlkeDt2YXIgbWlkeT0ocHRzW2ldLnkrcHRzW2krMV0ueSkvMjt0aGlzLmNlbnRTdW0ueSs9c2VnbWVudExlbiptaWR5O319O2pzdHMuaW5kZXguSW50ZXJ2YWxTaXplPWZ1bmN0aW9uKCl7fTtqc3RzLmluZGV4LkludGVydmFsU2l6ZS5NSU5fQklOQVJZX0VYUE9ORU5UPS01MDtqc3RzLmluZGV4LkludGVydmFsU2l6ZS5pc1plcm9XaWR0aD1mdW5jdGlvbihtaW4sbWF4KXt2YXIgd2lkdGg9bWF4LW1pbjtpZih3aWR0aD09PTAuMCl7cmV0dXJuIHRydWU7fVxudmFyIG1heEFicyxzY2FsZWRJbnRlcnZhbCxsZXZlbDttYXhBYnM9TWF0aC5tYXgoTWF0aC5hYnMobWluKSxNYXRoLmFicyhtYXgpKTtzY2FsZWRJbnRlcnZhbD13aWR0aC9tYXhBYnM7bGV2ZWw9anN0cy5pbmRleC5Eb3VibGVCaXRzLmV4cG9uZW50KHNjYWxlZEludGVydmFsKTtyZXR1cm4gbGV2ZWw8PWpzdHMuaW5kZXguSW50ZXJ2YWxTaXplLk1JTl9CSU5BUllfRVhQT05FTlQ7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVFZGdlU2V0SW50ZXJzZWN0b3I9ZnVuY3Rpb24oKXt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZUVkZ2VTZXRJbnRlcnNlY3Rvci5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbWdyYXBoLmluZGV4LkVkZ2VTZXRJbnRlcnNlY3RvcigpO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZUVkZ2VTZXRJbnRlcnNlY3Rvci5wcm90b3R5cGUubk92ZXJsYXBzPTA7anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlRWRnZVNldEludGVyc2VjdG9yLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9ucz1mdW5jdGlvbihlZGdlcyxzaSx0ZXN0QWxsU2VnbWVudHMpe2lmKHNpIGluc3RhbmNlb2YgamF2YXNjcmlwdC51dGlsLkxpc3Qpe3RoaXMuY29tcHV0ZUludGVyc2VjdGlvbnMyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudGhpcy5uT3ZlcmxhcHM9MDtmb3IodmFyIGkwPWVkZ2VzLml0ZXJhdG9yKCk7aTAuaGFzTmV4dCgpOyl7dmFyIGVkZ2UwPWkwLm5leHQoKTtmb3IodmFyIGkxPWVkZ2VzLml0ZXJhdG9yKCk7aTEuaGFzTmV4dCgpOyl7dmFyIGVkZ2UxPWkxLm5leHQoKTtpZih0ZXN0QWxsU2VnbWVudHN8fGVkZ2UwIT1lZGdlMSlcbnRoaXMuY29tcHV0ZUludGVyc2VjdHMoZWRnZTAsZWRnZTEsc2kpO319fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVFZGdlU2V0SW50ZXJzZWN0b3IucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb25zMj1mdW5jdGlvbihlZGdlczAsZWRnZXMxLHNpKXt0aGlzLm5PdmVybGFwcz0wO2Zvcih2YXIgaTA9ZWRnZXMwLml0ZXJhdG9yKCk7aTAuaGFzTmV4dCgpOyl7dmFyIGVkZ2UwPWkwLm5leHQoKTtmb3IodmFyIGkxPWVkZ2VzMS5pdGVyYXRvcigpO2kxLmhhc05leHQoKTspe3ZhciBlZGdlMT1pMS5uZXh0KCk7dGhpcy5jb21wdXRlSW50ZXJzZWN0cyhlZGdlMCxlZGdlMSxzaSk7fX19O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZUVkZ2VTZXRJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdHM9ZnVuY3Rpb24oZTAsZTEsc2kpe3ZhciBwdHMwPWUwLmdldENvb3JkaW5hdGVzKCk7dmFyIHB0czE9ZTEuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgaTAsaTE7Zm9yKGkwPTA7aTA8cHRzMC5sZW5ndGgtMTtpMCsrKXtmb3IoaTE9MDtpMTxwdHMxLmxlbmd0aC0xO2kxKyspe3NpLmFkZEludGVyc2VjdGlvbnMoZTAsaTAsZTEsaTEpO319fTtqc3RzLmdlb21ncmFwaC5FZGdlPWZ1bmN0aW9uKHB0cyxsYWJlbCl7dGhpcy5wdHM9cHRzO3RoaXMubGFiZWw9bGFiZWw7dGhpcy5laUxpc3Q9bmV3IGpzdHMuZ2VvbWdyYXBoLkVkZ2VJbnRlcnNlY3Rpb25MaXN0KHRoaXMpO3RoaXMuZGVwdGg9bmV3IGpzdHMuZ2VvbWdyYXBoLkRlcHRoKCk7fTtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZT1uZXcganN0cy5nZW9tZ3JhcGguR3JhcGhDb21wb25lbnQoKTtqc3RzLmdlb21ncmFwaC5FZGdlLmNvbnN0cnVjdG9yPWpzdHMuZ2VvbWdyYXBoLkVkZ2U7anN0cy5nZW9tZ3JhcGguRWRnZS51cGRhdGVJTT1mdW5jdGlvbihsYWJlbCxpbSl7aW0uc2V0QXRMZWFzdElmVmFsaWQobGFiZWwuZ2V0TG9jYXRpb24oMCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5PTiksbGFiZWwuZ2V0TG9jYXRpb24oMSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5PTiksMSk7aWYobGFiZWwuaXNBcmVhKCkpe2ltLnNldEF0TGVhc3RJZlZhbGlkKGxhYmVsLmdldExvY2F0aW9uKDAsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCksbGFiZWwuZ2V0TG9jYXRpb24oMSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKSwyKTtpbS5zZXRBdExlYXN0SWZWYWxpZChsYWJlbC5nZXRMb2NhdGlvbigwLGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLlJJR0hUKSxsYWJlbC5nZXRMb2NhdGlvbigxLGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLlJJR0hUKSwyKTt9fTtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5wdHM9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5lbnY9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5uYW1lPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUubWNlPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuX2lzSXNvbGF0ZWQ9dHJ1ZTtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5kZXB0aD1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmRlcHRoRGVsdGE9MDtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5laUxpc3Q9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5nZXROdW1Qb2ludHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHMubGVuZ3RoO307anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuZ2V0RW52ZWxvcGU9ZnVuY3Rpb24oKXtpZih0aGlzLmVudj09PW51bGwpe3RoaXMuZW52PW5ldyBqc3RzLmdlb20uRW52ZWxvcGUoKTtmb3IodmFyIGk9MDtpPHRoaXMucHRzLmxlbmd0aDtpKyspe3RoaXMuZW52LmV4cGFuZFRvSW5jbHVkZShwdHNbaV0pO319XG5yZXR1cm4gZW52O307anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuZ2V0RGVwdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZXB0aDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmdldERlcHRoRGVsdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZXB0aERlbHRhO307anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuc2V0RGVwdGhEZWx0YT1mdW5jdGlvbihkZXB0aERlbHRhKXt0aGlzLmRlcHRoRGVsdGE9ZGVwdGhEZWx0YTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRzO307anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbihpKXtpZihpPT09dW5kZWZpbmVkKXtpZih0aGlzLnB0cy5sZW5ndGg+MCl7cmV0dXJuIHRoaXMucHRzWzBdO31lbHNle3JldHVybiBudWxsO319XG5yZXR1cm4gdGhpcy5wdHNbaV07fTtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5pc0Nsb3NlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0c1swXS5lcXVhbHModGhpcy5wdHNbdGhpcy5wdHMubGVuZ3RoLTFdKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLnNldElzb2xhdGVkPWZ1bmN0aW9uKGlzSXNvbGF0ZWQpe3RoaXMuX2lzSXNvbGF0ZWQ9aXNJc29sYXRlZDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmlzSXNvbGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJc29sYXRlZDt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmFkZEludGVyc2VjdGlvbnM9ZnVuY3Rpb24obGksc2VnbWVudEluZGV4LGdlb21JbmRleCl7Zm9yKHZhciBpPTA7aTxsaS5nZXRJbnRlcnNlY3Rpb25OdW0oKTtpKyspe3RoaXMuYWRkSW50ZXJzZWN0aW9uKGxpLHNlZ21lbnRJbmRleCxnZW9tSW5kZXgsaSk7fX07anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuYWRkSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGxpLHNlZ21lbnRJbmRleCxnZW9tSW5kZXgsaW50SW5kZXgpe3ZhciBpbnRQdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUobGkuZ2V0SW50ZXJzZWN0aW9uKGludEluZGV4KSk7dmFyIG5vcm1hbGl6ZWRTZWdtZW50SW5kZXg9c2VnbWVudEluZGV4O3ZhciBkaXN0PWxpLmdldEVkZ2VEaXN0YW5jZShnZW9tSW5kZXgsaW50SW5kZXgpO3ZhciBuZXh0U2VnSW5kZXg9bm9ybWFsaXplZFNlZ21lbnRJbmRleCsxO2lmKG5leHRTZWdJbmRleDx0aGlzLnB0cy5sZW5ndGgpe3ZhciBuZXh0UHQ9dGhpcy5wdHNbbmV4dFNlZ0luZGV4XTtpZihpbnRQdC5lcXVhbHMyRChuZXh0UHQpKXtub3JtYWxpemVkU2VnbWVudEluZGV4PW5leHRTZWdJbmRleDtkaXN0PTAuMDt9fVxudmFyIGVpPXRoaXMuZWlMaXN0LmFkZChpbnRQdCxub3JtYWxpemVkU2VnbWVudEluZGV4LGRpc3QpO307anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuZ2V0TWF4aW11bVNlZ21lbnRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy5sZW5ndGgtMTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWlMaXN0O307anN0cy5nZW9tZ3JhcGguRWRnZS5wcm90b3R5cGUuZ2V0TW9ub3RvbmVDaGFpbkVkZ2U9ZnVuY3Rpb24oKXtpZih0aGlzLm1jZT09bnVsbCl7dGhpcy5tY2U9bmV3IGpzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5FZGdlKHRoaXMpO31cbnJldHVybiB0aGlzLm1jZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmlzQ2xvc2VkPWZ1bmN0aW9uKClcbntyZXR1cm4gdGhpcy5wdHNbMF0uZXF1YWxzKHRoaXMucHRzW3RoaXMucHRzLmxlbmd0aC0xXSk7fTtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5pc0NvbGxhcHNlZD1mdW5jdGlvbigpXG57aWYoIXRoaXMubGFiZWwuaXNBcmVhKCkpcmV0dXJuIGZhbHNlO2lmKHRoaXMucHRzLmxlbmd0aCE9MylyZXR1cm4gZmFsc2U7aWYodGhpcy5wdHNbMF0uZXF1YWxzKHRoaXMucHRzWzJdKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2U7fTtqc3RzLmdlb21ncmFwaC5FZGdlLnByb3RvdHlwZS5nZXRDb2xsYXBzZWRFZGdlPWZ1bmN0aW9uKClcbnt2YXIgbmV3UHRzPVtdO25ld1B0c1swXT10aGlzLnB0c1swXTtuZXdQdHNbMV09dGhpcy5wdHNbMV07dmFyIG5ld2U9bmV3IGpzdHMuZ2VvbWdyYXBoLkVkZ2UobmV3UHRzLGpzdHMuZ2VvbWdyYXBoLkxhYmVsLnRvTGluZUxhYmVsKHRoaXMubGFiZWwpKTtyZXR1cm4gbmV3ZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmNvbXB1dGVJTT1mdW5jdGlvbihpbSl7anN0cy5nZW9tZ3JhcGguRWRnZS51cGRhdGVJTSh0aGlzLmxhYmVsLGltKTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2UucHJvdG90eXBlLmlzUG9pbnR3aXNlRXF1YWw9ZnVuY3Rpb24oZSlcbntpZih0aGlzLnB0cy5sZW5ndGghPWUucHRzLmxlbmd0aClyZXR1cm4gZmFsc2U7Zm9yKHZhciBpPTA7aTx0aGlzLnB0cy5sZW5ndGg7aSsrKXtpZighdGhpcy5wdHNbaV0uZXF1YWxzMkQoZS5wdHNbaV0pKXtyZXR1cm4gZmFsc2U7fX1cbnJldHVybiB0cnVlO307anN0cy5ub2RpbmcuT2N0YW50PWZ1bmN0aW9uKCl7dGhyb3cganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5ub2RpbmcuT2N0YW50Lm9jdGFudD1mdW5jdGlvbihkeCxkeSl7aWYoZHggaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7cmV0dXJuIGpzdHMubm9kaW5nLk9jdGFudC5vY3RhbnQyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG5pZihkeD09PTAuMCYmZHk9PT0wLjApXG50aHJvdyBuZXcganN0cy5lcnJvci5JbGxlZ2FsQXJndW1lbnRFcnJvcignQ2Fubm90IGNvbXB1dGUgdGhlIG9jdGFudCBmb3IgcG9pbnQgKCAnK2R4KycsICcrZHkrJyApJyk7dmFyIGFkeD1NYXRoLmFicyhkeCk7dmFyIGFkeT1NYXRoLmFicyhkeSk7aWYoZHg+PTApe2lmKGR5Pj0wKXtpZihhZHg+PWFkeSlcbnJldHVybiAwO2Vsc2VcbnJldHVybiAxO31cbmVsc2V7aWYoYWR4Pj1hZHkpXG5yZXR1cm4gNztlbHNlXG5yZXR1cm4gNjt9fVxuZWxzZXtpZihkeT49MCl7aWYoYWR4Pj1hZHkpXG5yZXR1cm4gMztlbHNlXG5yZXR1cm4gMjt9XG5lbHNle2lmKGFkeD49YWR5KVxucmV0dXJuIDQ7ZWxzZVxucmV0dXJuIDU7fX19O2pzdHMubm9kaW5nLk9jdGFudC5vY3RhbnQyPWZ1bmN0aW9uKHAwLHAxKXt2YXIgZHg9cDEueC1wMC54O3ZhciBkeT1wMS55LXAwLnk7aWYoZHg9PT0wLjAmJmR5PT09MC4wKVxudGhyb3cgbmV3IGpzdHMuZXJyb3IuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ0Nhbm5vdCBjb21wdXRlIHRoZSBvY3RhbnQgZm9yIHR3byBpZGVudGljYWwgcG9pbnRzICcrcDApO3JldHVybiBqc3RzLm5vZGluZy5PY3RhbnQub2N0YW50KGR4LGR5KTt9O2pzdHMub3BlcmF0aW9uLnVuaW9uLlVuaW9uSW50ZXJhY3Rpbmc9ZnVuY3Rpb24oZzAsZzEpe3RoaXMuZzA9ZzA7dGhpcy5nMT1nMTt0aGlzLmdlb21GYWN0b3J5PWcwLmdldEZhY3RvcnkoKTt0aGlzLmludGVyYWN0czA9W107dGhpcy5pbnRlcmFjdHMxPVtdO307anN0cy5vcGVyYXRpb24udW5pb24uVW5pb25JbnRlcmFjdGluZy51bmlvbj1mdW5jdGlvbihnMCxnMSl7dmFyIHV1ZT1uZXcganN0cy5vcGVyYXRpb24udW5pb24uVW5pb25JbnRlcmFjdGluZyhnMCxnMSk7cmV0dXJuIHV1ZS51bmlvbigpO307anN0cy5vcGVyYXRpb24udW5pb24uVW5pb25JbnRlcmFjdGluZy5wcm90b3R5cGUuZ2VvbUZhY3Rvcnk9bnVsbDtqc3RzLm9wZXJhdGlvbi51bmlvbi5VbmlvbkludGVyYWN0aW5nLnByb3RvdHlwZS5nMD1udWxsO2pzdHMub3BlcmF0aW9uLnVuaW9uLlVuaW9uSW50ZXJhY3RpbmcucHJvdG90eXBlLmcxPW51bGw7anN0cy5vcGVyYXRpb24udW5pb24uVW5pb25JbnRlcmFjdGluZy5wcm90b3R5cGUuaW50ZXJhY3RzMD1udWxsO2pzdHMub3BlcmF0aW9uLnVuaW9uLlVuaW9uSW50ZXJhY3RpbmcucHJvdG90eXBlLmludGVyYWN0czE9bnVsbDtqc3RzLm9wZXJhdGlvbi51bmlvbi5VbmlvbkludGVyYWN0aW5nLnByb3RvdHlwZS51bmlvbj1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZUludGVyYWN0aW5nKCk7dmFyIGludDA9dGhpcy5leHRyYWN0RWxlbWVudHModGhpcy5nMCx0aGlzLmludGVyYWN0czAsdHJ1ZSk7dmFyIGludDE9dGhpcy5leHRyYWN0RWxlbWVudHModGhpcy5nMSx0aGlzLmludGVyYWN0czEsdHJ1ZSk7aWYoaW50MC5pc0VtcHR5KCl8fGludDEuaXNFbXB0eSgpKXt9XG52YXIgdW5pb249aW4wLnVuaW9uKGludDEpO3ZhciBkaXNqb2ludDA9dGhpcy5leHRyYWN0RWxlbWVudHModGhpcy5nMCx0aGlzLmludGVyYWN0czAsZmFsc2UpO3ZhciBkaXNqb2ludDE9dGhpcy5leHRyYWN0RWxlbWVudHModGhpcy5nMSx0aGlzLmludGVyYWN0czEsZmFsc2UpO3ZhciBvdmVyYWxsVW5pb249anN0cy5nZW9tLnV0aWwuR2VvbWV0cnlDb21iaW5lci5jb21iaW5lKHVuaW9uLGRpc2pvaW50MCxkaXNqb2ludDEpO3JldHVybiBvdmVyYWxsVW5pb247fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5VbmlvbkludGVyYWN0aW5nLnByb3RvdHlwZS5idWZmZXJVbmlvbj1mdW5jdGlvbihnMCxnMSl7dmFyIGZhY3Rvcnk9ZzAuZ2V0RmFjdG9yeSgpO3ZhciBnQ29sbD1mYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihbZzAsZzFdKTt2YXIgdW5pb25BbGw9Z0NvbGwuYnVmZmVyKDAuMCk7cmV0dXJuIHVuaW9uQWxsO307anN0cy5vcGVyYXRpb24udW5pb24uVW5pb25JbnRlcmFjdGluZy5wcm90b3R5cGUuY29tcHV0ZUludGVyYWN0aW5nPWZ1bmN0aW9uKGVsZW0wKXtpZighZWxlbTApe2Zvcih2YXIgaT0wLGw9dGhpcy5nMC5nZXROdW1HZW9tZXRyaWVzKCk7aTxsO2krKyl7dmFyIGVsZW09dGhpcy5nMC5nZXRHZW9tZXRyeU4oaSk7dGhpcy5pbnRlcmFjdHMwW2ldPXRoaXMuY29tcHV0ZUludGVyYWN0aW5nKGVsZW0pO319XG5lbHNle3ZhciBpbnRlcmFjdHNXaXRoQW55PWZhbHNlO2Zvcih2YXIgaT0wLGw9ZzEuZ2V0TnVtR2VvbWV0cmllcygpO2k8bDtpKyspe3ZhciBlbGVtMT10aGlzLmcxLmdldEdlb21ldHJ5TihpKTt2YXIgaW50ZXJhY3RzPWVsZW0xLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKGVsZW0wLmdldEVudmVsb3BlSW50ZXJuYWwoKSk7aWYoaW50ZXJhY3RzKXt0aGlzLmludGVyYWN0czFbaV09dHJ1ZTtpbnRlcmFjdHNXaXRoQW55PXRydWU7fX1cbnJldHVybiBpbnRlcmFjdHNXaXRoQW55O319O2pzdHMub3BlcmF0aW9uLnVuaW9uLlVuaW9uSW50ZXJhY3RpbmcucHJvdG90eXBlLmV4dHJhY3RFbGVtZW50cz1mdW5jdGlvbihnZW9tLGludGVyYWN0cyxpc0ludGVyYWN0aW5nKXt2YXIgZXh0cmFjdGVkR2VvbXM9W107Zm9yKHZhciBpPTAsbD1nZW9tLmdldE51bUdlb21ldHJpZXMoKTtpPGw7aSsrKXt2YXIgZWxlbT1nZW9tLmdldEdlb21ldHJ5TihpKTtpZihpbnRlcmFjdHNbaV09PT1pc0ludGVyYWN0aW5nKXtleHRyYWN0ZWRHZW9tcy5wdXNoKGVsZW0pO319XG5yZXR1cm4gdGhpcy5nZW9tRmFjdG9yeS5idWlsZEdlb21ldHJ5KGV4dHJhY3RlZEdlb21zKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGU9ZnVuY3Rpb24oKXt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGUuaXNJbkNpcmNsZU5vblJvYnVzdD1mdW5jdGlvbihhLGIsYyxwKXt2YXIgaXNJbkNpcmNsZT0oYS54KmEueCthLnkqYS55KSpqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlUHJlZGljYXRlLnRyaUFyZWEoYixjLHApLVxuKGIueCpiLngrYi55KmIueSkqanN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS50cmlBcmVhKGEsYyxwKStcbihjLngqYy54K2MueSpjLnkpKmpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGUudHJpQXJlYShhLGIscCktXG4ocC54KnAueCtwLnkqcC55KSpqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlUHJlZGljYXRlLnRyaUFyZWEoYSxiLGMpPjA7cmV0dXJuIGlzSW5DaXJjbGU7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlUHJlZGljYXRlLmlzSW5DaXJjbGVOb3JtYWxpemVkPWZ1bmN0aW9uKGEsYixjLHApe3ZhciBhZHgsYWR5LGJkeCxiZHksY2R4LGNkeSxhYmRldCxiY2RldCxjYWRldCxhbGlmdCxibGlmdCxjbGlmdCxkaXNjO2FkeD1hLngtcC54O2FkeT1hLnktcC55O2JkeD1iLngtcC54O2JkeT1iLnktcC55O2NkeD1jLngtcC54O2NkeT1jLnktcC55O2FiZGV0PWFkeCpiZHktYmR4KmFkeTtiY2RldD1iZHgqY2R5LWNkeCpiZHk7Y2FkZXQ9Y2R4KmFkeS1hZHgqY2R5O2FsaWZ0PWFkeCphZHgrYWR5KmFkeTtibGlmdD1iZHgqYmR4K2JkeSpiZHk7Y2xpZnQ9Y2R4KmNkeCtjZHkqY2R5O2Rpc2M9YWxpZnQqYmNkZXQrYmxpZnQqY2FkZXQrY2xpZnQqYWJkZXQ7cmV0dXJuIGRpc2M+MDt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGUudHJpQXJlYT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuKGIueC1hLngpKihjLnktYS55KS0oYi55LWEueSkqKGMueC1hLngpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS5pc0luQ2lyY2xlUm9idXN0PWZ1bmN0aW9uKGEsYixjLHApe3JldHVybiBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlUHJlZGljYXRlLmlzSW5DaXJjbGVOb3JtYWxpemVkKGEsYixjLHApO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS5pc0luQ2lyY2xlRERTbG93PWZ1bmN0aW9uKGEsYixjLHApe3ZhciBweCxweSxheCxheSxieCxieSxjeCxjeSxhVGVybSxiVGVybSxjVGVybSxwVGVybSxzdW0saXNJbkNpcmNsZTtweD1qc3RzLm1hdGguREQudmFsdWVPZihwLngpO3B5PWpzdHMubWF0aC5ERC52YWx1ZU9mKHAueSk7YXg9anN0cy5tYXRoLkRELnZhbHVlT2YoYS54KTtheT1qc3RzLm1hdGguREQudmFsdWVPZihhLnkpO2J4PWpzdHMubWF0aC5ERC52YWx1ZU9mKGIueCk7Ynk9anN0cy5tYXRoLkRELnZhbHVlT2YoYi55KTtjeD1qc3RzLm1hdGguREQudmFsdWVPZihjLngpO2N5PWpzdHMubWF0aC5ERC52YWx1ZU9mKGMueSk7YVRlcm09KGF4Lm11bHRpcGx5KGF4KS5hZGQoYXkubXVsdGlwbHkoYXkpKSkubXVsdGlwbHkoanN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS50cmlBcmVhRERTbG93KGJ4LGJ5LGN4LGN5LHB4LHB5KSk7YlRlcm09KGJ4Lm11bHRpcGx5KGJ4KS5hZGQoYnkubXVsdGlwbHkoYnkpKSkubXVsdGlwbHkoanN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS50cmlBcmVhRERTbG93KGF4LGF5LGN4LGN5LHB4LHB5KSk7Y1Rlcm09KGN4Lm11bHRpcGx5KGN4KS5hZGQoY3kubXVsdGlwbHkoY3kpKSkubXVsdGlwbHkoanN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS50cmlBcmVhRERTbG93KGF4LGF5LGJ4LGJ5LHB4LHB5KSk7cFRlcm09KHB4Lm11bHRpcGx5KHB4KS5hZGQocHkubXVsdGlwbHkocHkpKSkubXVsdGlwbHkoanN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS50cmlBcmVhRERTbG93KGF4LGF5LGJ4LGJ5LGN4LGN5KSk7c3VtPWFUZXJtLnN1YnRyYWN0KGJUZXJtKS5hZGQoY1Rlcm0pLnN1YnRyYWN0KHBUZXJtKTtpc0luQ2lyY2xlPXN1bS5kb3VibGVWYWx1ZSgpPjA7cmV0dXJuIGlzSW5DaXJjbGU7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlUHJlZGljYXRlLnRyaUFyZWFERFNsb3c9ZnVuY3Rpb24oYXgsYXksYngsYnksY3gsY3kpe3JldHVybihieC5zdWJ0cmFjdChheCkubXVsdGlwbHkoY3kuc3VidHJhY3QoYXkpKS5zdWJ0cmFjdChieS5zdWJ0cmFjdChheSkubXVsdGlwbHkoY3guc3VidHJhY3QoYXgpKSkpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS5pc0luQ2lyY2xlRERGYXN0PWZ1bmN0aW9uKGEsYixjLHApe3ZhciBhVGVybSxiVGVybSxjVGVybSxwVGVybSxzdW0saXNJbkNpcmNsZTthVGVybT0oanN0cy5tYXRoLkRELnNxcihhLngpLnNlbGZBZGQoanN0cy5tYXRoLkRELnNxcihhLnkpKSkuc2VsZk11bHRpcGx5KGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGUudHJpQXJlYURERmFzdChiLGMscCkpO2JUZXJtPShqc3RzLm1hdGguREQuc3FyKGIueCkuc2VsZkFkZChqc3RzLm1hdGguREQuc3FyKGIueSkpKS5zZWxmTXVsdGlwbHkoanN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS50cmlBcmVhRERGYXN0KGEsYyxwKSk7Y1Rlcm09KGpzdHMubWF0aC5ERC5zcXIoYy54KS5zZWxmQWRkKGpzdHMubWF0aC5ERC5zcXIoYy55KSkpLnNlbGZNdWx0aXBseShqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlUHJlZGljYXRlLnRyaUFyZWFEREZhc3QoYSxiLHApKTtwVGVybT0oanN0cy5tYXRoLkRELnNxcihwLngpLnNlbGZBZGQoanN0cy5tYXRoLkRELnNxcihwLnkpKSkuc2VsZk11bHRpcGx5KGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGUudHJpQXJlYURERmFzdChhLGIsYykpO3N1bT1hVGVybS5zZWxmU3VidHJhY3QoYlRlcm0pLnNlbGZBZGQoY1Rlcm0pLnNlbGZTdWJ0cmFjdChwVGVybSk7aXNJbkNpcmNsZT1zdW0uZG91YmxlVmFsdWUoKT4wO3JldHVybiBpc0luQ2lyY2xlO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZVByZWRpY2F0ZS50cmlBcmVhRERGYXN0PWZ1bmN0aW9uKGEsYixjKXt2YXIgdDEsdDI7dDE9anN0cy5tYXRoLkRELnZhbHVlT2YoYi54KS5zZWxmU3VidHJhY3QoYS54KS5zZWxmTXVsdGlwbHkoanN0cy5tYXRoLkRELnZhbHVlT2YoYy55KS5zZWxmU3VidHJhY3QoYS55KSk7dDI9anN0cy5tYXRoLkRELnZhbHVlT2YoYi55KS5zZWxTdWJ0cmFjdChhLnkpLnNlbGZNdWx0aXBseShqc3RzLm1hdGguREQudmFsdWVPZihjLngpLnNlbGZTdWJ0cmFjdChhLngpKTtyZXR1cm4gdDEuc2VsZlN1YnRyYWN0KHQyKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGUuaXNJbkNpcmNsZURETm9ybWFsaXplZD1mdW5jdGlvbihhLGIsYyxwKXt2YXIgYWR4LGFkeSxiZHgsYmR5LGNkeCxjZHksYWJkZXQsYmNkZXQsY2FkZXQsYWxpZnQsYmxpZnQsY2xpZnQsc3VtLGlzSW5DaXJjbGU7YWR4PWpzdHMubWF0aC5ERC52YWx1ZU9mKGEueCkuc2VsZlN1YnRyYWN0KHAueCk7YWR5PWpzdHMubWF0aC5ERC52YWx1ZU9mKGEueSkuc2VsZlN1YnRyYWN0KHAueSk7YmR4PWpzdHMubWF0aC5ERC52YWx1ZU9mKGIueCkuc2VsZlN1YnRyYWN0KHAueCk7YmR4PWpzdHMubWF0aC5ERC52YWx1ZU9mKGIueSkuc2VsZlN1YnRyYWN0KHAueSk7Y2R4PWpzdHMubWF0aC5ERC52YWx1ZU9mKGMueCkuc2VsZlN1YnRyYWN0KHAueCk7Y2R4PWpzdHMubWF0aC5ERC52YWx1ZU9mKGMueSkuc2VsZlN1YnRyYWN0KHAueSk7YWJkZXQ9YWR4Lm11bHRpcGx5KGJkeSkuc2VsZlN1YnRyYWN0KGJkeC5tdWx0aXBseShhZHkpKTtiY2RldD1iZHgubXVsdGlwbHkoY2R5KS5zZWxmU3VidHJhY3QoY2R4Lm11bHRpcGx5KGJkeSkpO2NhZGV0PWNkeC5tdWx0aXBseShhZHkpLnNlbGZTdWJ0cmFjdChhZHgubXVsdGlwbHkoY2R5KSk7YWxpZnQ9YWR4Lm11bHRpcGx5KGFkeCkuc2VsZkFkZChhZHkubXVsdGlwbHkoYWR5KSk7YmxpZnQ9YmR4Lm11bHRpcGx5KGJkeCkuc2VsZkFkZChiZHkubXVsdGlwbHkoYmR5KSk7Y2xpZnQ9Y2R4Lm11bHRpcGx5KGNkeCkuc2VsZkFkZChjZHkubXVsdGlwbHkoY2R5KSk7c3VtPWFsaWZ0LnNlbGZNdWx0aXBseShiY2RldCkuc2VsZkFkZChibGlmdC5zZWxmTXVsdGlwbHkoY2FkZXQpKS5zZWxmQWRkKGNsaWZ0LnNlbGZNdWx0aXBseShhYmRldCkpO2lzSW5DaXJjbGU9c3VtLmRvdWJsZVZhbHVlKCk+MDtyZXR1cm4gaXNJbkNpcmNsZTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVQcmVkaWNhdGUuaXNJbkNpcmNsZUNDPWZ1bmN0aW9uKGEsYixjLHApe3ZhciBjYyxjY1JhZGl1cyxwUmFkaXVzRGlmZjtjYz1qc3RzLmdlb20uVHJpYW5nbGUuY2lyY3VtY2VudHJlKGEsYixjKTtjY1JhZGl1cz1hLmRpc3RhbmNlKGNjKTtwUmFkaXVzRGlmZj1wLmRpc3RhbmNlKGNjKS1jY1JhZGl1cztyZXR1cm4gcFJhZGl1c0RpZmY8PTA7fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5Qb2ludEdlb21ldHJ5VW5pb249ZnVuY3Rpb24ocG9pbnRHZW9tLG90aGVyR2VvbSl7dGhpcy5wb2ludEdlb209cG9pbnRHZW9tO3RoaXMub3RoZXJHZW9tPW90aGVyR2VvbTt0aGlzLmdlb21GYWN0PW90aGVyR2VvbS5nZXRGYWN0b3J5KCk7fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5Qb2ludEdlb21ldHJ5VW5pb24udW5pb249ZnVuY3Rpb24ocG9pbnRHZW9tLG90aGVyR2VvbSl7dmFyIHVuaW9uZXI9bmV3IGpzdHMub3BlcmF0aW9uLnVuaW9uLlBvaW50R2VvbWV0cnlVbmlvbihwb2ludEdlb20sb3RoZXJHZW9tKTtyZXR1cm4gdW5pb25lci51bmlvbigpO307anN0cy5vcGVyYXRpb24udW5pb24uUG9pbnRHZW9tZXRyeVVuaW9uLnByb3RvdHlwZS5wb2ludEdlb209bnVsbDtqc3RzLm9wZXJhdGlvbi51bmlvbi5Qb2ludEdlb21ldHJ5VW5pb24ucHJvdG90eXBlLm90aGVyR2VvbT1udWxsO2pzdHMub3BlcmF0aW9uLnVuaW9uLlBvaW50R2VvbWV0cnlVbmlvbi5wcm90b3R5cGUuZ2VvbUZhY3Q9bnVsbDtqc3RzLm9wZXJhdGlvbi51bmlvbi5Qb2ludEdlb21ldHJ5VW5pb24ucHJvdG90eXBlLnVuaW9uPWZ1bmN0aW9uKCl7dmFyIGxvY2F0b3I9bmV3IGpzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvcigpO3ZhciBleHRlcmlvckNvb3Jkcz1bXTtmb3IodmFyIGk9MCxsPXRoaXMucG9pbnRHZW9tLmdldE51bUdlb21ldHJpZXMoKTtpPGw7aSsrKXt2YXIgcG9pbnQ9dGhpcy5wb2ludEdlb20uZ2V0R2VvbWV0cnlOKGkpO3ZhciBjb29yZD1wb2ludC5nZXRDb29yZGluYXRlKCk7dmFyIGxvYz1sb2NhdG9yLmxvY2F0ZShjb29yZCx0aGlzLm90aGVyR2VvbSk7aWYobG9jPT09anN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SKXt2YXIgaW5jbHVkZT10cnVlO2Zvcih2YXIgaj1leHRlcmlvckNvb3Jkcy5sZW5ndGg7aS0tOyl7aWYoZXh0ZXJpb3JDb29yZHNbal0uZXF1YWxzKGNvb3JkKSl7aW5jbHVkZT1mYWxzZTticmVhazt9fVxuaWYoaW5jbHVkZSl7ZXh0ZXJpb3JDb29yZHMucHVzaChjb29yZCk7fX19XG5leHRlcmlvckNvb3Jkcy5zb3J0KGZ1bmN0aW9uKHgseSl7cmV0dXJuIHguY29tcGFyZVRvKHkpO30pO2lmKGV4dGVyaW9yQ29vcmRzLmxlbmd0aD09PTApe3JldHVybiB0aGlzLm90aGVyR2VvbTt9XG52YXIgcHRDb21wPW51bGw7dmFyIGNvb3Jkcz1qc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy50b0Nvb3JkaW5hdGVBcnJheShleHRlcmlvckNvb3Jkcyk7aWYoY29vcmRzLmxlbmd0aD09PTEpe3B0Q29tcD10aGlzLmdlb21GYWN0LmNyZWF0ZVBvaW50KGNvb3Jkc1swXSk7fVxuZWxzZXtwdENvbXA9dGhpcy5nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50KGNvb3Jkcyk7fVxucmV0dXJuIGpzdHMuZ2VvbS51dGlsLkdlb21ldHJ5Q29tYmluZXIuY29tYmluZShwdENvbXAsdGhpcy5vdGhlckdlb20pO307anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uRmluZGVyQWRkZXI9ZnVuY3Rpb24obGkpe3RoaXMubGk9bGk7dGhpcy5pbnRlcmlvckludGVyc2VjdGlvbnM9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt9O2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkZpbmRlckFkZGVyLnByb3RvdHlwZT1uZXcganN0cy5ub2RpbmcuU2VnbWVudEludGVyc2VjdG9yKCk7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uRmluZGVyQWRkZXIuY29uc3RydWN0b3I9anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uRmluZGVyQWRkZXI7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uRmluZGVyQWRkZXIucHJvdG90eXBlLmxpPW51bGw7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uRmluZGVyQWRkZXIucHJvdG90eXBlLmludGVyaW9ySW50ZXJzZWN0aW9ucz1udWxsO2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkZpbmRlckFkZGVyLnByb3RvdHlwZS5nZXRJbnRlcmlvckludGVyc2VjdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcmlvckludGVyc2VjdGlvbnM7fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25GaW5kZXJBZGRlci5wcm90b3R5cGUucHJvY2Vzc0ludGVyc2VjdGlvbnM9ZnVuY3Rpb24oZTAsc2VnSW5kZXgwLGUxLHNlZ0luZGV4MSl7aWYoZTA9PT1lMSYmc2VnSW5kZXgwPT09c2VnSW5kZXgxKVxucmV0dXJuO3ZhciBwMDA9ZTAuZ2V0Q29vcmRpbmF0ZXMoKVtzZWdJbmRleDBdO3ZhciBwMDE9ZTAuZ2V0Q29vcmRpbmF0ZXMoKVtzZWdJbmRleDArMV07dmFyIHAxMD1lMS5nZXRDb29yZGluYXRlcygpW3NlZ0luZGV4MV07dmFyIHAxMT1lMS5nZXRDb29yZGluYXRlcygpW3NlZ0luZGV4MSsxXTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAwLHAwMSxwMTAscDExKTtpZih0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpKXtpZih0aGlzLmxpLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oKSl7Zm9yKHZhciBpbnRJbmRleD0wO2ludEluZGV4PHRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uTnVtKCk7aW50SW5kZXgrKyl7dGhpcy5pbnRlcmlvckludGVyc2VjdGlvbnMuYWRkKHRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uKGludEluZGV4KSk7fVxuZTAuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmxpLHNlZ0luZGV4MCwwKTtlMS5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksc2VnSW5kZXgxLDEpO319fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25GaW5kZXJBZGRlci5wcm90b3R5cGUuaXNEb25lPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhTbmFwUm91bmRlcj1mdW5jdGlvbihwbSl7dGhpcy5wbT1wbTt0aGlzLmxpPW5ldyBqc3RzLmFsZ29yaXRobS5Sb2J1c3RMaW5lSW50ZXJzZWN0b3IoKTt0aGlzLmxpLnNldFByZWNpc2lvbk1vZGVsKHBtKTt0aGlzLnNjYWxlRmFjdG9yPXBtLmdldFNjYWxlKCk7fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLnByb3RvdHlwZT1uZXcganN0cy5ub2RpbmcuTm9kZXIoKTtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLmNvbnN0cnVjdG9yPWpzdHMubm9kaW5nLnNuYXByb3VuZC5NQ0luZGV4U25hcFJvdW5kZXI7anN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhTbmFwUm91bmRlci5wcm90b3R5cGUucG09bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLnByb3RvdHlwZS5saT1udWxsO2pzdHMubm9kaW5nLnNuYXByb3VuZC5NQ0luZGV4U25hcFJvdW5kZXIucHJvdG90eXBlLnNjYWxlRmFjdG9yPW51bGw7anN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhTbmFwUm91bmRlci5wcm90b3R5cGUubm9kZXI9bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLnByb3RvdHlwZS5wb2ludFNuYXBwZXI9bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLnByb3RvdHlwZS5ub2RlZFNlZ1N0cmluZ3M9bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLnByb3RvdHlwZS5nZXROb2RlZFN1YnN0cmluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4ganN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nLmdldE5vZGVkU3Vic3RyaW5ncyh0aGlzLm5vZGVkU2VnU3RyaW5ncyk7fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLnByb3RvdHlwZS5jb21wdXRlTm9kZXM9ZnVuY3Rpb24oaW5wdXRTZWdtZW50U3RyaW5ncyl7dGhpcy5ub2RlZFNlZ1N0cmluZ3M9aW5wdXRTZWdtZW50U3RyaW5nczt0aGlzLm5vZGVyPW5ldyBqc3RzLm5vZGluZy5NQ0luZGV4Tm9kZXIoKTt0aGlzLnBvaW50U25hcHBlcj1uZXcganN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhQb2ludFNuYXBwZXIodGhpcy5ub2Rlci5nZXRJbmRleCgpKTt0aGlzLnNuYXBSb3VuZChpbnB1dFNlZ21lbnRTdHJpbmdzLHRoaXMubGkpO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhTbmFwUm91bmRlci5wcm90b3R5cGUuc25hcFJvdW5kPWZ1bmN0aW9uKHNlZ1N0cmluZ3MsbGkpe3ZhciBpbnRlcnNlY3Rpb25zPXRoaXMuZmluZEludGVyaW9ySW50ZXJzZWN0aW9ucyhzZWdTdHJpbmdzLGxpKTt0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25TbmFwcyhpbnRlcnNlY3Rpb25zKTt0aGlzLmNvbXB1dGVWZXJ0ZXhTbmFwcyhzZWdTdHJpbmdzKTt9O2pzdHMubm9kaW5nLnNuYXByb3VuZC5NQ0luZGV4U25hcFJvdW5kZXIucHJvdG90eXBlLmZpbmRJbnRlcmlvckludGVyc2VjdGlvbnM9ZnVuY3Rpb24oc2VnU3RyaW5ncyxsaSl7dmFyIGludEZpbmRlckFkZGVyPW5ldyBqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25GaW5kZXJBZGRlcihsaSk7dGhpcy5ub2Rlci5zZXRTZWdtZW50SW50ZXJzZWN0b3IoaW50RmluZGVyQWRkZXIpO3RoaXMubm9kZXIuY29tcHV0ZU5vZGVzKHNlZ1N0cmluZ3MpO3JldHVybiBpbnRGaW5kZXJBZGRlci5nZXRJbnRlcmlvckludGVyc2VjdGlvbnMoKTt9O2pzdHMubm9kaW5nLnNuYXByb3VuZC5NQ0luZGV4U25hcFJvdW5kZXIucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb25TbmFwcz1mdW5jdGlvbihzbmFwUHRzKXtmb3IodmFyIGl0PXNuYXBQdHMuaXRlcmF0b3IoKTtpdC5oYXNOZXh0KCk7KXt2YXIgc25hcFB0PWl0Lm5leHQoKTt2YXIgaG90UGl4ZWw9bmV3IGpzdHMubm9kaW5nLnNuYXByb3VuZC5Ib3RQaXhlbChzbmFwUHQsdGhpcy5zY2FsZUZhY3Rvcix0aGlzLmxpKTt0aGlzLnBvaW50U25hcHBlci5zbmFwKGhvdFBpeGVsKTt9fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFNuYXBSb3VuZGVyLnByb3RvdHlwZS5jb21wdXRlVmVydGV4U25hcHM9ZnVuY3Rpb24oZWRnZXMpe2lmKGVkZ2VzIGluc3RhbmNlb2YganN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nKXt0aGlzLmNvbXB1dGVWZXJ0ZXhTbmFwczIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9XG5mb3IodmFyIGkwPWVkZ2VzLml0ZXJhdG9yKCk7aTAuaGFzTmV4dCgpOyl7dmFyIGVkZ2UwPWkwLm5leHQoKTt0aGlzLmNvbXB1dGVWZXJ0ZXhTbmFwcyhlZGdlMCk7fX07anN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhTbmFwUm91bmRlci5wcm90b3R5cGUuY29tcHV0ZVZlcnRleFNuYXBzMj1mdW5jdGlvbihlKXt2YXIgcHRzMD1lLmdldENvb3JkaW5hdGVzKCk7Zm9yKHZhciBpPTA7aTxwdHMwLmxlbmd0aC0xO2krKyl7dmFyIGhvdFBpeGVsPW5ldyBqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwocHRzMFtpXSx0aGlzLnNjYWxlRmFjdG9yLHRoaXMubGkpO3ZhciBpc05vZGVBZGRlZD10aGlzLnBvaW50U25hcHBlci5zbmFwKGhvdFBpeGVsLGUsaSk7aWYoaXNOb2RlQWRkZWQpe2UuYWRkSW50ZXJzZWN0aW9uKHB0czBbaV0saSk7fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLkNvbm5lY3RlZEludGVyaW9yVGVzdGVyPWZ1bmN0aW9uKGdlb21HcmFwaCl7dGhpcy5nZW9tR3JhcGg9Z2VvbUdyYXBoO3RoaXMuZ2VvbWV0cnlGYWN0b3J5PW5ldyBqc3RzLmdlb20uR2VvbWV0cnlGYWN0b3J5KCk7dGhpcy5kaXNjb25uZWN0ZWRSaW5nY29vcmQ9bnVsbDt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLkNvbm5lY3RlZEludGVyaW9yVGVzdGVyLmZpbmREaWZmZXJlbnRQb2ludD1mdW5jdGlvbihjb29yZCxwdCl7dmFyIGk9MCxpbD1jb29yZC5sZW5ndGg7Zm9yKGk7aTxpbDtpKyspe2lmKCFjb29yZFtpXS5lcXVhbHMocHQpKVxucmV0dXJuIGNvb3JkW2ldO31cbnJldHVybiBudWxsO307anN0cy5vcGVyYXRpb24udmFsaWQuQ29ubmVjdGVkSW50ZXJpb3JUZXN0ZXIucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNjb25uZWN0ZWRSaW5nY29vcmQ7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Db25uZWN0ZWRJbnRlcmlvclRlc3Rlci5wcm90b3R5cGUuaXNJbnRlcmlvcnNDb25uZWN0ZWQ9ZnVuY3Rpb24oKXt2YXIgc3BsaXRFZGdlcz1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpO3RoaXMuZ2VvbUdyYXBoLmNvbXB1dGVTcGxpdEVkZ2VzKHNwbGl0RWRnZXMpO3ZhciBncmFwaD1uZXcganN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGgobmV3IGpzdHMub3BlcmF0aW9uLm92ZXJsYXkuT3ZlcmxheU5vZGVGYWN0b3J5KCkpO2dyYXBoLmFkZEVkZ2VzKHNwbGl0RWRnZXMpO3RoaXMuc2V0SW50ZXJpb3JFZGdlc0luUmVzdWx0KGdyYXBoKTtncmFwaC5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcygpO3ZhciBlZGdlUmluZ3M9dGhpcy5idWlsZEVkZ2VSaW5ncyhncmFwaC5nZXRFZGdlRW5kcygpKTt0aGlzLnZpc2l0U2hlbGxJbnRlcmlvcnModGhpcy5nZW9tR3JhcGguZ2V0R2VvbWV0cnkoKSxncmFwaCk7cmV0dXJuIXRoaXMuaGFzVW52aXNpdGVkU2hlbGxFZGdlKGVkZ2VSaW5ncyk7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Db25uZWN0ZWRJbnRlcmlvclRlc3Rlci5wcm90b3R5cGUuc2V0SW50ZXJpb3JFZGdlc0luUmVzdWx0PWZ1bmN0aW9uKGdyYXBoKXt2YXIgaXQ9Z3JhcGguZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpLGRlO3doaWxlKGl0Lmhhc05leHQoKSl7ZGU9aXQubmV4dCgpO2lmKGRlLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCk9PWpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUil7ZGUuc2V0SW5SZXN1bHQodHJ1ZSk7fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLkNvbm5lY3RlZEludGVyaW9yVGVzdGVyLnByb3RvdHlwZS5idWlsZEVkZ2VSaW5ncz1mdW5jdGlvbihkaXJFZGdlcyl7dmFyIGVkZ2VSaW5ncz1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpO2Zvcih2YXIgaXQ9ZGlyRWRnZXMuaXRlcmF0b3IoKTtpdC5oYXNOZXh0KCk7KXt2YXIgZGU9aXQubmV4dCgpO2lmKGRlLmlzSW5SZXN1bHQoKSYmZGUuZ2V0RWRnZVJpbmcoKT09bnVsbCl7dmFyIGVyPW5ldyBqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk1heGltYWxFZGdlUmluZyhkZSx0aGlzLmdlb21ldHJ5RmFjdG9yeSk7ZXIubGlua0RpcmVjdGVkRWRnZXNGb3JNaW5pbWFsRWRnZVJpbmdzKCk7dmFyIG1pbkVkZ2VSaW5ncz1lci5idWlsZE1pbmltYWxSaW5ncygpO3ZhciBpPTAsaWw9bWluRWRnZVJpbmdzLmxlbmd0aDtmb3IoaTtpPGlsO2krKyl7ZWRnZVJpbmdzLmFkZChtaW5FZGdlUmluZ3NbaV0pO319fVxucmV0dXJuIGVkZ2VSaW5nczt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLkNvbm5lY3RlZEludGVyaW9yVGVzdGVyLnByb3RvdHlwZS52aXNpdFNoZWxsSW50ZXJpb3JzPWZ1bmN0aW9uKGcsZ3JhcGgpe2lmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7dmFyIHA9Zzt0aGlzLnZpc2l0SW50ZXJpb3JSaW5nKHAuZ2V0RXh0ZXJpb3JSaW5nKCksZ3JhcGgpO31cbmlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2x5Z29uKXt2YXIgbXA9Zztmb3IodmFyIGk9MDtpPG1wLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciBwPW1wLmdldEdlb21ldHJ5TihpKTt0aGlzLnZpc2l0SW50ZXJpb3JSaW5nKHAuZ2V0RXh0ZXJpb3JSaW5nKCksZ3JhcGgpO319fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Db25uZWN0ZWRJbnRlcmlvclRlc3Rlci5wcm90b3R5cGUudmlzaXRJbnRlcmlvclJpbmc9ZnVuY3Rpb24ocmluZyxncmFwaCl7dmFyIHB0cz1yaW5nLmdldENvb3JkaW5hdGVzKCk7dmFyIHB0MD1wdHNbMF07dmFyIHB0MT1qc3RzLm9wZXJhdGlvbi52YWxpZC5Db25uZWN0ZWRJbnRlcmlvclRlc3Rlci5maW5kRGlmZmVyZW50UG9pbnQocHRzLHB0MCk7dmFyIGU9Z3JhcGguZmluZEVkZ2VJblNhbWVEaXJlY3Rpb24ocHQwLHB0MSk7dmFyIGRlPWdyYXBoLmZpbmRFZGdlRW5kKGUpO3ZhciBpbnREZT1udWxsO2lmKGRlLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCk9PWpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUil7aW50RGU9ZGU7fWVsc2UgaWYoZGUuZ2V0U3ltKCkuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbigwLGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLlJJR0hUKT09anN0cy5nZW9tLkxvY2F0aW9uLklOVEVSSU9SKXtpbnREZT1kZS5nZXRTeW0oKTt9XG50aGlzLnZpc2l0TGlua2VkRGlyZWN0ZWRFZGdlcyhpbnREZSk7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Db25uZWN0ZWRJbnRlcmlvclRlc3Rlci5wcm90b3R5cGUudmlzaXRMaW5rZWREaXJlY3RlZEVkZ2VzPWZ1bmN0aW9uKHN0YXJ0KXt2YXIgc3RhcnREZT1zdGFydDt2YXIgZGU9c3RhcnQ7ZG97ZGUuc2V0VmlzaXRlZCh0cnVlKTtkZT1kZS5nZXROZXh0KCk7fXdoaWxlKGRlIT1zdGFydERlKTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLkNvbm5lY3RlZEludGVyaW9yVGVzdGVyLnByb3RvdHlwZS5oYXNVbnZpc2l0ZWRTaGVsbEVkZ2U9ZnVuY3Rpb24oZWRnZVJpbmdzKXtmb3IodmFyIGk9MDtpPGVkZ2VSaW5ncy5zaXplKCk7aSsrKXt2YXIgZXI9ZWRnZVJpbmdzLmdldChpKTtpZihlci5pc0hvbGUoKSl7Y29udGludWU7fVxudmFyIGVkZ2VzPWVyLmdldEVkZ2VzKCk7dmFyIGRlPWVkZ2VzWzBdO2lmKGRlLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCkhPWpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUil7Y29udGludWU7fVxuZm9yKHZhciBqPTA7ajxlZGdlcy5sZW5ndGg7aisrKXtkZT1lZGdlc1tqXTtpZighZGUuaXNWaXNpdGVkKCkpe2Rpc2Nvbm5lY3RlZFJpbmdjb29yZD1kZS5nZXRDb29yZGluYXRlKCk7cmV0dXJuIHRydWU7fX19XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmFsZ29yaXRobS5JbnRlcmlvclBvaW50TGluZT1mdW5jdGlvbihnZW9tZXRyeSl7dGhpcy5jZW50cm9pZDt0aGlzLm1pbkRpc3RhbmNlPU51bWJlci5NQVhfVkFMVUU7dGhpcy5pbnRlcmlvclBvaW50PW51bGw7dGhpcy5jZW50cm9pZD1nZW9tZXRyeS5nZXRDZW50cm9pZCgpLmdldENvb3JkaW5hdGUoKTt0aGlzLmFkZEludGVyaW9yKGdlb21ldHJ5KTtpZih0aGlzLmludGVyaW9yUG9pbnQ9PW51bGwpe3RoaXMuYWRkRW5kcG9pbnRzKGdlb21ldHJ5KTt9fTtqc3RzLmFsZ29yaXRobS5JbnRlcmlvclBvaW50TGluZS5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyaW9yUG9pbnQ7fTtqc3RzLmFsZ29yaXRobS5JbnRlcmlvclBvaW50TGluZS5wcm90b3R5cGUuYWRkSW50ZXJpb3I9ZnVuY3Rpb24oZ2VvbWV0cnkpe2lmKGdlb21ldHJ5IGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmcpe3RoaXMuYWRkSW50ZXJpb3JDb29yZChnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpKTt9ZWxzZSBpZihnZW9tZXRyeSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24pe2Zvcih2YXIgaT0wO2k8Z2VvbWV0cnkuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dGhpcy5hZGRJbnRlcmlvcihnZW9tZXRyeS5nZXRHZW9tZXRyeU4oaSkpO319fTtqc3RzLmFsZ29yaXRobS5JbnRlcmlvclBvaW50TGluZS5wcm90b3R5cGUuYWRkSW50ZXJpb3JDb29yZD1mdW5jdGlvbihwdHMpe2Zvcih2YXIgaT0xO2k8cHRzLmxlbmd0aC0xO2krKyl7dGhpcy5hZGQocHRzW2ldKTt9fTtqc3RzLmFsZ29yaXRobS5JbnRlcmlvclBvaW50TGluZS5wcm90b3R5cGUuYWRkRW5kcG9pbnRzPWZ1bmN0aW9uKGdlb21ldHJ5KXtpZihnZW9tZXRyeSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lU3RyaW5nKXt0aGlzLmFkZEVuZHBvaW50c0Nvb3JkKGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCkpO31lbHNlIGlmKGdlb21ldHJ5IGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbil7Zm9yKHZhciBpPTA7aTxnZW9tZXRyeS5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt0aGlzLmFkZEVuZHBvaW50cyhnZW9tZXRyeS5nZXRHZW9tZXRyeU4oaSkpO319fTtqc3RzLmFsZ29yaXRobS5JbnRlcmlvclBvaW50TGluZS5wcm90b3R5cGUuYWRkRW5kcG9pbnRzQ29vcmQ9ZnVuY3Rpb24ocHRzKXt0aGlzLmFkZChwdHNbMF0pO3RoaXMuYWRkKHB0c1twdHMubGVuZ3RoLTFdKTt9O2pzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRMaW5lLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24ocG9pbnQpe3ZhciBkaXN0PXBvaW50LmRpc3RhbmNlKHRoaXMuY2VudHJvaWQpO2lmKGRpc3Q8dGhpcy5taW5EaXN0YW5jZSl7dGhpcy5pbnRlcmlvclBvaW50PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShwb2ludCk7dGhpcy5taW5EaXN0YW5jZT1kaXN0O319O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpblNlbGVjdEFjdGlvbj1mdW5jdGlvbigpe3RoaXMudGVtcEVudjE9bmV3IGpzdHMuZ2VvbS5FbnZlbG9wZSgpO3RoaXMuc2VsZWN0ZWRTZWdtZW50PW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoKTt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpblNlbGVjdEFjdGlvbi5wcm90b3R5cGUudGVtcEVudjE9bnVsbDtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW5TZWxlY3RBY3Rpb24ucHJvdG90eXBlLnNlbGVjdGVkU2VnbWVudD1udWxsO2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpblNlbGVjdEFjdGlvbi5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKG1jLHN0YXJ0KXttYy5nZXRMaW5lU2VnbWVudChzdGFydCx0aGlzLnNlbGVjdGVkU2VnbWVudCk7dGhpcy5zZWxlY3QyKHRoaXMuc2VsZWN0ZWRTZWdtZW50KTt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpblNlbGVjdEFjdGlvbi5wcm90b3R5cGUuc2VsZWN0Mj1mdW5jdGlvbihzZWcpe307anN0cy5hbGdvcml0aG0uTUNQb2ludEluUmluZz1mdW5jdGlvbihyaW5nKXt0aGlzLnJpbmc9cmluZzt0aGlzLnRyZWU9bnVsbDt0aGlzLmNyb3NzaW5ncz0wO3RoaXMuaW50ZXJ2YWw9bmV3IGpzdHMuaW5kZXguYmludHJlZS5JbnRlcnZhbCgpO3RoaXMuYnVpbGRJbmRleCgpO307anN0cy5hbGdvcml0aG0uTUNQb2ludEluUmluZy5NQ1NlbGVjdGVyPWZ1bmN0aW9uKHAscGFyZW50KXt0aGlzLnBhcmVudD1wYXJlbnQ7dGhpcy5wPXA7fTtqc3RzLmFsZ29yaXRobS5NQ1BvaW50SW5SaW5nLk1DU2VsZWN0ZXIucHJvdG90eXBlPW5ldyBqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW5TZWxlY3RBY3Rpb247anN0cy5hbGdvcml0aG0uTUNQb2ludEluUmluZy5NQ1NlbGVjdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1qc3RzLmFsZ29yaXRobS5NQ1BvaW50SW5SaW5nLk1DU2VsZWN0ZXI7anN0cy5hbGdvcml0aG0uTUNQb2ludEluUmluZy5NQ1NlbGVjdGVyLnByb3RvdHlwZS5zZWxlY3QyPWZ1bmN0aW9uKGxzKXt0aGlzLnBhcmVudC50ZXN0TGluZVNlZ21lbnQuYXBwbHkodGhpcy5wYXJlbnQsW3RoaXMucCxsc10pO307anN0cy5hbGdvcml0aG0uTUNQb2ludEluUmluZy5wcm90b3R5cGUuYnVpbGRJbmRleD1mdW5jdGlvbigpe3RoaXMudHJlZT1uZXcganN0cy5pbmRleC5iaW50cmVlLkJpbnRyZWUoKTt2YXIgcHRzPWpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnJlbW92ZVJlcGVhdGVkUG9pbnRzKHRoaXMucmluZy5nZXRDb29yZGluYXRlcygpKTt2YXIgbWNMaXN0PWpzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbkJ1aWxkZXIuZ2V0Q2hhaW5zKHB0cyk7Zm9yKHZhciBpPTA7aTxtY0xpc3QubGVuZ3RoO2krKyl7dmFyIG1jPW1jTGlzdFtpXTt2YXIgbWNFbnY9bWMuZ2V0RW52ZWxvcGUoKTt0aGlzLmludGVydmFsLm1pbj1tY0Vudi5nZXRNaW5ZKCk7dGhpcy5pbnRlcnZhbC5tYXg9bWNFbnYuZ2V0TWF4WSgpO3RoaXMudHJlZS5pbnNlcnQodGhpcy5pbnRlcnZhbCxtYyk7fX07anN0cy5hbGdvcml0aG0uTUNQb2ludEluUmluZy5wcm90b3R5cGUuaXNJbnNpZGU9ZnVuY3Rpb24ocHQpe3RoaXMuY3Jvc3NpbmdzPTA7dmFyIHJheUVudj1uZXcganN0cy5nZW9tLkVudmVsb3BlKC1OdW1iZXIuTUFYX1ZBTFVFLE51bWJlci5NQVhfVkFMVUUscHQueSxwdC55KTt0aGlzLmludGVydmFsLm1pbj1wdC55O3RoaXMuaW50ZXJ2YWwubWF4PXB0Lnk7dmFyIHNlZ3M9dGhpcy50cmVlLnF1ZXJ5KHRoaXMuaW50ZXJ2YWwpO3ZhciBtY1NlbGVjdGVyPW5ldyBqc3RzLmFsZ29yaXRobS5NQ1BvaW50SW5SaW5nLk1DU2VsZWN0ZXIocHQsdGhpcyk7Zm9yKHZhciBpPXNlZ3MuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBtYz1pLm5leHQoKTt0aGlzLnRlc3RNb25vdG9uZUNoYWluKHJheUVudixtY1NlbGVjdGVyLG1jKTt9XG5pZigodGhpcy5jcm9zc2luZ3MlMik9PTEpe3JldHVybiB0cnVlO31cbnJldHVybiBmYWxzZTt9O2pzdHMuYWxnb3JpdGhtLk1DUG9pbnRJblJpbmcucHJvdG90eXBlLnRlc3RNb25vdG9uZUNoYWluPWZ1bmN0aW9uKHJheUVudixtY1NlbGVjdGVyLG1jKXttYy5zZWxlY3QocmF5RW52LG1jU2VsZWN0ZXIpO307anN0cy5hbGdvcml0aG0uTUNQb2ludEluUmluZy5wcm90b3R5cGUudGVzdExpbmVTZWdtZW50PWZ1bmN0aW9uKHAsc2VnKXt2YXIgeEludCx4MSx5MSx4Mix5MixwMSxwMjtwMT1zZWcucDA7cDI9c2VnLnAxO3gxPXAxLngtcC54O3kxPXAxLnktcC55O3gyPXAyLngtcC54O3kyPXAyLnktcC55O2lmKCgoeTE+MCkmJih5Mjw9MCkpfHwoKHkyPjApJiYoeTE8PTApKSl7eEludD1qc3RzLmFsZ29yaXRobS5Sb2J1c3REZXRlcm1pbmFudC5zaWduT2ZEZXQyeDIoeDEseTEseDIseTIpLyh5Mi15MSk7aWYoMC4wPHhJbnQpe3RoaXMuY3Jvc3NpbmdzKys7fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yPWZ1bmN0aW9uKGVycm9yVHlwZSxwdCl7dGhpcy5lcnJvclR5cGU9ZXJyb3JUeXBlO3RoaXMucHQ9bnVsbDtpZihwdCE9bnVsbCl7dGhpcy5wdD1wdC5jbG9uZSgpO319O2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLkhPTEVfT1VUU0lERV9TSEVMTD0yO2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLk5FU1RFRF9IT0xFUz0zO2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLkRJU0NPTk5FQ1RFRF9JTlRFUklPUj00O2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLlNFTEZfSU5URVJTRUNUSU9OPTU7anN0cy5vcGVyYXRpb24udmFsaWQuVG9wb2xvZ3lWYWxpZGF0aW9uRXJyb3IuUklOR19TRUxGX0lOVEVSU0VDVElPTj02O2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLk5FU1RFRF9TSEVMTFM9Nztqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvci5EVVBMSUNBVEVfUklOR1M9ODtqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvci5UT09fRkVXX1BPSU5UUz05O2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLklOVkFMSURfQ09PUkRJTkFURT0xMDtqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvci5SSU5HX05PVF9DTE9TRUQ9MTE7anN0cy5vcGVyYXRpb24udmFsaWQuVG9wb2xvZ3lWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlLmVyck1zZz1bJ1RvcG9sb2d5IFZhbGlkYXRpb24gRXJyb3InLCdSZXBlYXRlZCBQb2ludCcsJ0hvbGUgbGllcyBvdXRzaWRlIHNoZWxsJywnSG9sZXMgYXJlIG5lc3RlZCcsJ0ludGVyaW9yIGlzIGRpc2Nvbm5lY3RlZCcsJ1NlbGYtaW50ZXJzZWN0aW9uJywnUmluZyBTZWxmLWludGVyc2VjdGlvbicsJ05lc3RlZCBzaGVsbHMnLCdEdXBsaWNhdGUgUmluZ3MnLCdUb28gZmV3IGRpc3RpbmN0IHBvaW50cyBpbiBnZW9tZXRyeSBjb21wb25lbnQnLCdJbnZhbGlkIENvb3JkaW5hdGUnLCdSaW5nIGlzIG5vdCBjbG9zZWQnXTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvci5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0O307anN0cy5vcGVyYXRpb24udmFsaWQuVG9wb2xvZ3lWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlLmdldEVycm9yVHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVycm9yVHlwZTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZS5nZXRNZXNzYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXJyTXNnW3RoaXMuZXJyb3JUeXBlXTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBsb2NTdHI9Jyc7aWYodGhpcy5wdCE9bnVsbCl7bG9jU3RyPScgYXQgb3IgbmVhciBwb2ludCAnK3RoaXMucHQ7cmV0dXJuIHRoaXMuZ2V0TWVzc2FnZSgpK2xvY1N0cjt9XG5yZXR1cm4gbG9jU3RyO307KGZ1bmN0aW9uKCl7anN0cy5nZW9tLk11bHRpUG9seWdvbj1mdW5jdGlvbihnZW9tZXRyaWVzLGZhY3Rvcnkpe3RoaXMuZ2VvbWV0cmllcz1nZW9tZXRyaWVzfHxbXTt0aGlzLmZhY3Rvcnk9ZmFjdG9yeTt9O2pzdHMuZ2VvbS5NdWx0aVBvbHlnb24ucHJvdG90eXBlPW5ldyBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKCk7anN0cy5nZW9tLk11bHRpUG9seWdvbi5jb25zdHJ1Y3Rvcj1qc3RzLmdlb20uTXVsdGlQb2x5Z29uO2pzdHMuZ2VvbS5NdWx0aVBvbHlnb24ucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpe3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcobnVsbCk7fVxudmFyIGFsbFJpbmdzPVtdO2Zvcih2YXIgaT0wO2k8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtpKyspe3ZhciBwb2x5Z29uPXRoaXMuZ2VvbWV0cmllc1tpXTt2YXIgcmluZ3M9cG9seWdvbi5nZXRCb3VuZGFyeSgpO2Zvcih2YXIgaj0wO2o8cmluZ3MuZ2V0TnVtR2VvbWV0cmllcygpO2orKyl7YWxsUmluZ3MucHVzaChyaW5ncy5nZXRHZW9tZXRyeU4oaikpO319XG5yZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGFsbFJpbmdzKTt9O2pzdHMuZ2VvbS5NdWx0aVBvbHlnb24ucHJvdG90eXBlLmVxdWFsc0V4YWN0PWZ1bmN0aW9uKG90aGVyLHRvbGVyYW5jZSl7aWYoIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3Mob3RoZXIpKXtyZXR1cm4gZmFsc2U7fVxucmV0dXJuIGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24ucHJvdG90eXBlLmVxdWFsc0V4YWN0LmNhbGwodGhpcyxvdGhlcix0b2xlcmFuY2UpO307anN0cy5nZW9tLk11bHRpUG9seWdvbi5wcm90b3R5cGUuQ0xBU1NfTkFNRT0nanN0cy5nZW9tLk11bHRpUG9seWdvbic7fSkoKTtqc3RzLmdlb20uQ29vcmRpbmF0ZVNlcXVlbmNlRmlsdGVyPWZ1bmN0aW9uKCl7fTtqc3RzLmdlb20uQ29vcmRpbmF0ZVNlcXVlbmNlRmlsdGVyLnByb3RvdHlwZS5maWx0ZXI9anN0cy5hYnN0cmFjdEZ1bmM7anN0cy5nZW9tLkNvb3JkaW5hdGVTZXF1ZW5jZUZpbHRlci5wcm90b3R5cGUuaXNEb25lPWpzdHMuYWJzdHJhY3RGdW5jO2pzdHMuZ2VvbS5Db29yZGluYXRlU2VxdWVuY2VGaWx0ZXIucHJvdG90eXBlLmlzR2VvbWV0cnlDaGFuZ2VkPWpzdHMuYWJzdHJhY3RGdW5jOyhmdW5jdGlvbigpe3ZhciBJbnRlcnZhbD1mdW5jdGlvbigpe3RoaXMubWluPTAuMDt0aGlzLm1heD0wLjA7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3ZhciBpbnRlcnZhbD1hcmd1bWVudHNbMF07dGhpcy5pbml0KGludGVydmFsLm1pbixpbnRlcnZhbC5tYXgpO31lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKXt0aGlzLmluaXQoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7fX07SW50ZXJ2YWwucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24obWluLG1heCl7dGhpcy5taW49bWluO3RoaXMubWF4PW1heDtpZihtaW4+bWF4KXt0aGlzLm1pbj1tYXg7dGhpcy5tYXg9bWluO319O0ludGVydmFsLnByb3RvdHlwZS5nZXRNaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW47fTtJbnRlcnZhbC5wcm90b3R5cGUuZ2V0TWF4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4O307SW50ZXJ2YWwucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubWF4LXRoaXMubWluKTt9O0ludGVydmFsLnByb3RvdHlwZS5leHBhbmRUb0luY2x1ZGU9ZnVuY3Rpb24oaW50ZXJ2YWwpe2lmKGludGVydmFsLm1heD50aGlzLm1heCl7dGhpcy5tYXg9aW50ZXJ2YWwubWF4O31cbmlmKGludGVydmFsLm1pbjx0aGlzLm1pbil7dGhpcy5taW49aW50ZXJ2YWwubWluO319O0ludGVydmFsLnByb3RvdHlwZS5vdmVybGFwcz1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtyZXR1cm4gdGhpcy5vdmVybGFwc0ludGVydmFsLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZWxzZXtyZXR1cm4gdGhpcy5vdmVybGFwc01pbk1heC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fX07SW50ZXJ2YWwucHJvdG90eXBlLm92ZXJsYXBzSW50ZXJ2YWw9ZnVuY3Rpb24oaW50ZXJ2YWwpe3JldHVybiB0aGlzLm92ZXJsYXBzKGludGVydmFsLm1pbixpbnRlcnZhbC5tYXgpO307SW50ZXJ2YWwucHJvdG90eXBlLm92ZXJsYXBzTWluTWF4PWZ1bmN0aW9uKG1pbixtYXgpe2lmKHRoaXMubWluPm1heHx8dGhpcy5tYXg8bWluKXtyZXR1cm4gZmFsc2U7fVxucmV0dXJuIHRydWU7fTtJbnRlcnZhbC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oKXt2YXIgaW50ZXJ2YWw7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmluZGV4LmJpbnRyZWUuSW50ZXJ2YWwpe2ludGVydmFsPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jb250YWluc01pbk1heChpbnRlcnZhbC5taW4saW50ZXJ2YWwubWF4KTt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7cmV0dXJuIHRoaXMuY29udGFpbnNQb2ludChhcmd1bWVudHNbMF0pO31lbHNle3JldHVybiB0aGlzLmNvbnRhaW5zTWluTWF4KGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pO319O0ludGVydmFsLnByb3RvdHlwZS5jb250YWluc01pbk1heD1mdW5jdGlvbihtaW4sbWF4KXtyZXR1cm4obWluPj10aGlzLm1pbiYmbWF4PD10aGlzLm1heCk7fTtJbnRlcnZhbC5wcm90b3R5cGUuY29udGFpbnNQb2ludD1mdW5jdGlvbihwKXtyZXR1cm4ocD49dGhpcy5taW4mJnA8PXRoaXMubWF4KTt9O2pzdHMuaW5kZXguYmludHJlZS5JbnRlcnZhbD1JbnRlcnZhbDt9KSgpO2pzdHMuaW5kZXguRG91YmxlQml0cz1mdW5jdGlvbigpe307anN0cy5pbmRleC5Eb3VibGVCaXRzLnBvd2VyT2YyPWZ1bmN0aW9uKGV4cCl7cmV0dXJuIE1hdGgucG93KDIsZXhwKTt9O2pzdHMuaW5kZXguRG91YmxlQml0cy5leHBvbmVudD1mdW5jdGlvbihkKXtyZXR1cm4ganN0cy5pbmRleC5Eb3VibGVCaXRzLkNWVEZXRCg2NCxkKS0xMDIzO307anN0cy5pbmRleC5Eb3VibGVCaXRzLkNWVEZXRD1mdW5jdGlvbihOdW1XLFF0eSl7dmFyIFNpZ24sRXhwbyxNYW50LEJpbixuYjAxPScnO3ZhciBJbmY9ezMyOntkOjB4N0YsYzoweDgwLGI6MCxhOjB9LDY0OntkOjB4N0ZGMCxjOjAsYjowLGE6MH19O3ZhciBFeFc9ezMyOjgsNjQ6MTF9W051bVddLE10Vz1OdW1XLUV4Vy0xO2lmKCFCaW4pe1NpZ249UXR5PDB8fDEvUXR5PDA7aWYoIWlzRmluaXRlKFF0eSkpe0Jpbj1JbmZbTnVtV107aWYoU2lnbil7QmluLmQrPTE8PChOdW1XLzQtMSk7fVxuRXhwbz1NYXRoLnBvdygyLEV4VyktMTtNYW50PTA7fX1cbmlmKCFCaW4pe0V4cG89ezMyOjEyNyw2NDoxMDIzfVtOdW1XXTtNYW50PU1hdGguYWJzKFF0eSk7d2hpbGUoTWFudD49Mil7RXhwbysrO01hbnQvPTI7fVxud2hpbGUoTWFudDwxJiZFeHBvPjApe0V4cG8tLTtNYW50Kj0yO31cbmlmKEV4cG88PTApe01hbnQvPTI7bmIwMT0nWmVybyBvciBEZW5vcm1hbCc7fVxuaWYoTnVtVz09PTMyJiZFeHBvPjI1NCl7bmIwMT0nVG9vIGJpZyBmb3IgU2luZ2xlJztCaW49e2Q6U2lnbj8weEZGOjB4N0YsYzoweDgwLGI6MCxhOjB9O0V4cG89TWF0aC5wb3coMixFeFcpLTE7TWFudD0wO319XG5yZXR1cm4gRXhwbzt9OyhmdW5jdGlvbigpe3ZhciBEb3VibGVCaXRzPWpzdHMuaW5kZXguRG91YmxlQml0czt2YXIgSW50ZXJ2YWw9anN0cy5pbmRleC5iaW50cmVlLkludGVydmFsO3ZhciBLZXk9ZnVuY3Rpb24oaW50ZXJ2YWwpe3RoaXMucHQ9MC4wO3RoaXMubGV2ZWw9MDt0aGlzLmNvbXB1dGVLZXkoaW50ZXJ2YWwpO307S2V5LmNvbXB1dGVMZXZlbD1mdW5jdGlvbihpbnRlcnZhbCl7dmFyIGR4PWludGVydmFsLmdldFdpZHRoKCksbGV2ZWw7bGV2ZWw9RG91YmxlQml0cy5leHBvbmVudChkeCkrMTtyZXR1cm4gbGV2ZWw7fTtLZXkucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHQ7fTtLZXkucHJvdG90eXBlLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGV2ZWw7fTtLZXkucHJvdG90eXBlLmdldEludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZXJ2YWw7fTtLZXkucHJvdG90eXBlLmNvbXB1dGVLZXk9ZnVuY3Rpb24oaXRlbUludGVydmFsKXt0aGlzLmxldmVsPUtleS5jb21wdXRlTGV2ZWwoaXRlbUludGVydmFsKTt0aGlzLmludGVydmFsPW5ldyBJbnRlcnZhbCgpO3RoaXMuY29tcHV0ZUludGVydmFsKHRoaXMubGV2ZWwsaXRlbUludGVydmFsKTt3aGlsZSghdGhpcy5pbnRlcnZhbC5jb250YWlucyhpdGVtSW50ZXJ2YWwpKXt0aGlzLmxldmVsKz0xO3RoaXMuY29tcHV0ZUludGVydmFsKHRoaXMubGV2ZWwsaXRlbUludGVydmFsKTt9fTtLZXkucHJvdG90eXBlLmNvbXB1dGVJbnRlcnZhbD1mdW5jdGlvbihsZXZlbCxpdGVtSW50ZXJ2YWwpe3ZhciBzaXplPURvdWJsZUJpdHMucG93ZXJPZjIobGV2ZWwpO3RoaXMucHQ9TWF0aC5mbG9vcihpdGVtSW50ZXJ2YWwuZ2V0TWluKCkvc2l6ZSkqc2l6ZTt0aGlzLmludGVydmFsLmluaXQodGhpcy5wdCx0aGlzLnB0K3NpemUpO307anN0cy5pbmRleC5iaW50cmVlLktleT1LZXk7fSkoKTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuU3ViZ3JhcGhEZXB0aExvY2F0ZXI9ZnVuY3Rpb24oc3ViZ3JhcGhzKXt0aGlzLnN1YmdyYXBocz1bXTt0aGlzLnNlZz1uZXcganN0cy5nZW9tLkxpbmVTZWdtZW50KCk7dGhpcy5zdWJncmFwaHM9c3ViZ3JhcGhzO307anN0cy5vcGVyYXRpb24uYnVmZmVyLlN1YmdyYXBoRGVwdGhMb2NhdGVyLnByb3RvdHlwZS5zdWJncmFwaHM9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuU3ViZ3JhcGhEZXB0aExvY2F0ZXIucHJvdG90eXBlLnNlZz1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5TdWJncmFwaERlcHRoTG9jYXRlci5wcm90b3R5cGUuZ2V0RGVwdGg9ZnVuY3Rpb24ocCl7dmFyIHN0YWJiZWRTZWdtZW50cz10aGlzLmZpbmRTdGFiYmVkU2VnbWVudHMocCk7aWYoc3RhYmJlZFNlZ21lbnRzLmxlbmd0aD09PTApXG5yZXR1cm4gMDtzdGFiYmVkU2VnbWVudHMuc29ydCgpO3ZhciBkcz1zdGFiYmVkU2VnbWVudHNbMF07cmV0dXJuIGRzLmxlZnREZXB0aDt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5TdWJncmFwaERlcHRoTG9jYXRlci5wcm90b3R5cGUuZmluZFN0YWJiZWRTZWdtZW50cz1mdW5jdGlvbihzdGFiYmluZ1JheUxlZnRQdCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTMpe3RoaXMuZmluZFN0YWJiZWRTZWdtZW50czIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9XG52YXIgc3RhYmJlZFNlZ21lbnRzPVtdO2Zvcih2YXIgaT0wO2k8dGhpcy5zdWJncmFwaHMubGVuZ3RoO2krKyl7dmFyIGJzZz10aGlzLnN1YmdyYXBoc1tpXTt2YXIgZW52PWJzZy5nZXRFbnZlbG9wZSgpO2lmKHN0YWJiaW5nUmF5TGVmdFB0Lnk8ZW52LmdldE1pblkoKXx8c3RhYmJpbmdSYXlMZWZ0UHQueT5lbnYuZ2V0TWF4WSgpKVxuY29udGludWU7dGhpcy5maW5kU3RhYmJlZFNlZ21lbnRzMihzdGFiYmluZ1JheUxlZnRQdCxic2cuZ2V0RGlyZWN0ZWRFZGdlcygpLHN0YWJiZWRTZWdtZW50cyk7fVxucmV0dXJuIHN0YWJiZWRTZWdtZW50czt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5TdWJncmFwaERlcHRoTG9jYXRlci5wcm90b3R5cGUuZmluZFN0YWJiZWRTZWdtZW50czI9ZnVuY3Rpb24oc3RhYmJpbmdSYXlMZWZ0UHQsZGlyRWRnZXMsc3RhYmJlZFNlZ21lbnRzKXtpZihhcmd1bWVudHNbMV1pbnN0YW5jZW9mIGpzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZSl7dGhpcy5maW5kU3RhYmJlZFNlZ21lbnRzMyhzdGFiYmluZ1JheUxlZnRQdCxkaXJFZGdlcyxzdGFiYmVkU2VnbWVudHMpO3JldHVybjt9XG5mb3IodmFyIGk9ZGlyRWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBkZT1pLm5leHQoKTtpZighZGUuaXNGb3J3YXJkKCkpXG5jb250aW51ZTt0aGlzLmZpbmRTdGFiYmVkU2VnbWVudHMzKHN0YWJiaW5nUmF5TGVmdFB0LGRlLHN0YWJiZWRTZWdtZW50cyk7fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLlN1YmdyYXBoRGVwdGhMb2NhdGVyLnByb3RvdHlwZS5maW5kU3RhYmJlZFNlZ21lbnRzMz1mdW5jdGlvbihzdGFiYmluZ1JheUxlZnRQdCxkaXJFZGdlLHN0YWJiZWRTZWdtZW50cyl7dmFyIHB0cz1kaXJFZGdlLmdldEVkZ2UoKS5nZXRDb29yZGluYXRlcygpO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aC0xO2krKyl7dGhpcy5zZWcucDA9cHRzW2ldO3RoaXMuc2VnLnAxPXB0c1tpKzFdO2lmKHRoaXMuc2VnLnAwLnk+dGhpcy5zZWcucDEueSlcbnRoaXMuc2VnLnJldmVyc2UoKTt2YXIgbWF4eD1NYXRoLm1heCh0aGlzLnNlZy5wMC54LHRoaXMuc2VnLnAxLngpO2lmKG1heHg8c3RhYmJpbmdSYXlMZWZ0UHQueClcbmNvbnRpbnVlO2lmKHRoaXMuc2VnLmlzSG9yaXpvbnRhbCgpKVxuY29udGludWU7aWYoc3RhYmJpbmdSYXlMZWZ0UHQueTx0aGlzLnNlZy5wMC55fHxzdGFiYmluZ1JheUxlZnRQdC55PnRoaXMuc2VnLnAxLnkpXG5jb250aW51ZTtpZihqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuY29tcHV0ZU9yaWVudGF0aW9uKHRoaXMuc2VnLnAwLHRoaXMuc2VnLnAxLHN0YWJiaW5nUmF5TGVmdFB0KT09PWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5SSUdIVClcbmNvbnRpbnVlO3ZhciBkZXB0aD1kaXJFZGdlLmdldERlcHRoKGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlQpO2lmKCF0aGlzLnNlZy5wMC5lcXVhbHMocHRzW2ldKSlcbmRlcHRoPWRpckVkZ2UuZ2V0RGVwdGgoanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQpO3ZhciBkcz1uZXcganN0cy5vcGVyYXRpb24uYnVmZmVyLlN1YmdyYXBoRGVwdGhMb2NhdGVyLkRlcHRoU2VnbWVudCh0aGlzLnNlZyxkZXB0aCk7c3RhYmJlZFNlZ21lbnRzLnB1c2goZHMpO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5TdWJncmFwaERlcHRoTG9jYXRlci5EZXB0aFNlZ21lbnQ9ZnVuY3Rpb24oc2VnLGRlcHRoKXt0aGlzLnVwd2FyZFNlZz1uZXcganN0cy5nZW9tLkxpbmVTZWdtZW50KHNlZyk7dGhpcy5sZWZ0RGVwdGg9ZGVwdGg7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuU3ViZ3JhcGhEZXB0aExvY2F0ZXIuRGVwdGhTZWdtZW50LnByb3RvdHlwZS51cHdhcmRTZWc9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuU3ViZ3JhcGhEZXB0aExvY2F0ZXIuRGVwdGhTZWdtZW50LnByb3RvdHlwZS5sZWZ0RGVwdGg9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuU3ViZ3JhcGhEZXB0aExvY2F0ZXIuRGVwdGhTZWdtZW50LnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24ob2JqKXt2YXIgb3RoZXI9b2JqO3ZhciBvcmllbnRJbmRleD10aGlzLnVwd2FyZFNlZy5vcmllbnRhdGlvbkluZGV4KG90aGVyLnVwd2FyZFNlZyk7aWYob3JpZW50SW5kZXg9PT0wKVxub3JpZW50SW5kZXg9LTEqb3RoZXIudXB3YXJkU2VnLm9yaWVudGF0aW9uSW5kZXgodXB3YXJkU2VnKTtpZihvcmllbnRJbmRleCE9PTApXG5yZXR1cm4gb3JpZW50SW5kZXg7cmV0dXJuIHRoaXMuY29tcGFyZVgodGhpcy51cHdhcmRTZWcsb3RoZXIudXB3YXJkU2VnKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5TdWJncmFwaERlcHRoTG9jYXRlci5EZXB0aFNlZ21lbnQucHJvdG90eXBlLmNvbXBhcmVYPWZ1bmN0aW9uKHNlZzAsc2VnMSl7dmFyIGNvbXBhcmUwPXNlZzAucDAuY29tcGFyZVRvKHNlZzEucDApO2lmKGNvbXBhcmUwIT09MClcbnJldHVybiBjb21wYXJlMDtyZXR1cm4gc2VnMC5wMS5jb21wYXJlVG8oc2VnMS5wMSk7fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWw9ZnVuY3Rpb24ocHQsc2NhbGVGYWN0b3IsbGkpe3RoaXMuY29ybmVyPVtdO3RoaXMub3JpZ2luYWxQdD1wdDt0aGlzLnB0PXB0O3RoaXMuc2NhbGVGYWN0b3I9c2NhbGVGYWN0b3I7dGhpcy5saT1saTtpZih0aGlzLnNjYWxlRmFjdG9yIT09MS4wKXt0aGlzLnB0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh0aGlzLnNjYWxlKHB0LngpLHRoaXMuc2NhbGUocHQueSkpO3RoaXMucDBTY2FsZWQ9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7dGhpcy5wMVNjYWxlZD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTt9XG50aGlzLmluaXRDb3JuZXJzKHRoaXMucHQpO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5saT1udWxsO2pzdHMubm9kaW5nLnNuYXByb3VuZC5Ib3RQaXhlbC5wcm90b3R5cGUucHQ9bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwucHJvdG90eXBlLm9yaWdpbmFsUHQ9bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwucHJvdG90eXBlLnB0U2NhbGVkPW51bGw7anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5wMFNjYWxlZD1udWxsO2pzdHMubm9kaW5nLnNuYXByb3VuZC5Ib3RQaXhlbC5wcm90b3R5cGUucDFTY2FsZWQ9bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwucHJvdG90eXBlLnNjYWxlRmFjdG9yPXVuZGVmaW5lZDtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwucHJvdG90eXBlLm1pbng9dW5kZWZpbmVkO2pzdHMubm9kaW5nLnNuYXByb3VuZC5Ib3RQaXhlbC5wcm90b3R5cGUubWF4eD11bmRlZmluZWQ7anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5taW55PXVuZGVmaW5lZDtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwucHJvdG90eXBlLm1heHk9dW5kZWZpbmVkO2pzdHMubm9kaW5nLnNuYXByb3VuZC5Ib3RQaXhlbC5wcm90b3R5cGUuY29ybmVyPW51bGw7anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5zYWZlRW52PW51bGw7anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxQdDt9O2pzdHMubm9kaW5nLnNuYXByb3VuZC5Ib3RQaXhlbC5TQUZFX0VOVl9FWFBBTlNJT05fRkFDVE9SPTAuNzU7anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5nZXRTYWZlRW52ZWxvcGU9ZnVuY3Rpb24oKXtpZih0aGlzLnNhZmVFbnY9PT1udWxsKXt2YXIgc2FmZVRvbGVyYW5jZT1qc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwuU0FGRV9FTlZfRVhQQU5TSU9OX0ZBQ1RPUi90aGlzLnNjYWxlRmFjdG9yO3RoaXMuc2FmZUVudj1uZXcganN0cy5nZW9tLkVudmVsb3BlKHRoaXMub3JpZ2luYWxQdC54LXNhZmVUb2xlcmFuY2UsdGhpcy5vcmlnaW5hbFB0Lngrc2FmZVRvbGVyYW5jZSx0aGlzLm9yaWdpbmFsUHQueS1zYWZlVG9sZXJhbmNlLHRoaXMub3JpZ2luYWxQdC55K3NhZmVUb2xlcmFuY2UpO31cbnJldHVybiB0aGlzLnNhZmVFbnY7fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwucHJvdG90eXBlLmluaXRDb3JuZXJzPWZ1bmN0aW9uKHB0KXt2YXIgdG9sZXJhbmNlPTAuNTt0aGlzLm1pbng9cHQueC10b2xlcmFuY2U7dGhpcy5tYXh4PXB0LngrdG9sZXJhbmNlO3RoaXMubWlueT1wdC55LXRvbGVyYW5jZTt0aGlzLm1heHk9cHQueSt0b2xlcmFuY2U7dGhpcy5jb3JuZXJbMF09bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHRoaXMubWF4eCx0aGlzLm1heHkpO3RoaXMuY29ybmVyWzFdPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh0aGlzLm1pbngsdGhpcy5tYXh5KTt0aGlzLmNvcm5lclsyXT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUodGhpcy5taW54LHRoaXMubWlueSk7dGhpcy5jb3JuZXJbM109bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHRoaXMubWF4eCx0aGlzLm1pbnkpO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbih2YWwpe3JldHVybiBNYXRoLnJvdW5kKHZhbCp0aGlzLnNjYWxlRmFjdG9yKTt9O2pzdHMubm9kaW5nLnNuYXByb3VuZC5Ib3RQaXhlbC5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbihwMCxwMSl7aWYodGhpcy5zY2FsZUZhY3Rvcj09PTEuMClcbnJldHVybiB0aGlzLmludGVyc2VjdHNTY2FsZWQocDAscDEpO3RoaXMuY29weVNjYWxlZChwMCx0aGlzLnAwU2NhbGVkKTt0aGlzLmNvcHlTY2FsZWQocDEsdGhpcy5wMVNjYWxlZCk7cmV0dXJuIHRoaXMuaW50ZXJzZWN0c1NjYWxlZCh0aGlzLnAwU2NhbGVkLHRoaXMucDFTY2FsZWQpO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5jb3B5U2NhbGVkPWZ1bmN0aW9uKHAscFNjYWxlZCl7cFNjYWxlZC54PXRoaXMuc2NhbGUocC54KTtwU2NhbGVkLnk9dGhpcy5zY2FsZShwLnkpO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5pbnRlcnNlY3RzU2NhbGVkPWZ1bmN0aW9uKHAwLHAxKXt2YXIgc2VnTWlueD1NYXRoLm1pbihwMC54LHAxLngpO3ZhciBzZWdNYXh4PU1hdGgubWF4KHAwLngscDEueCk7dmFyIHNlZ01pbnk9TWF0aC5taW4ocDAueSxwMS55KTt2YXIgc2VnTWF4eT1NYXRoLm1heChwMC55LHAxLnkpO3ZhciBpc091dHNpZGVQaXhlbEVudj10aGlzLm1heHg8c2VnTWlueHx8dGhpcy5taW54PnNlZ01heHh8fHRoaXMubWF4eTxzZWdNaW55fHx0aGlzLm1pbnk+c2VnTWF4eTtpZihpc091dHNpZGVQaXhlbEVudilcbnJldHVybiBmYWxzZTt2YXIgaW50ZXJzZWN0cz10aGlzLmludGVyc2VjdHNUb2xlcmFuY2VTcXVhcmUocDAscDEpO2pzdHMudXRpbC5Bc3NlcnQuaXNUcnVlKCEoaXNPdXRzaWRlUGl4ZWxFbnYmJmludGVyc2VjdHMpLCdGb3VuZCBiYWQgZW52ZWxvcGUgdGVzdCcpO3JldHVybiBpbnRlcnNlY3RzO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5pbnRlcnNlY3RzVG9sZXJhbmNlU3F1YXJlPWZ1bmN0aW9uKHAwLHAxKXt2YXIgaW50ZXJzZWN0c0xlZnQ9ZmFsc2U7dmFyIGludGVyc2VjdHNCb3R0b209ZmFsc2U7dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHAwLHAxLHRoaXMuY29ybmVyWzBdLHRoaXMuY29ybmVyWzFdKTtpZih0aGlzLmxpLmlzUHJvcGVyKCkpXG5yZXR1cm4gdHJ1ZTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAscDEsdGhpcy5jb3JuZXJbMV0sdGhpcy5jb3JuZXJbMl0pO2lmKHRoaXMubGkuaXNQcm9wZXIoKSlcbnJldHVybiB0cnVlO2lmKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpXG5pbnRlcnNlY3RzTGVmdD10cnVlO3RoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbihwMCxwMSx0aGlzLmNvcm5lclsyXSx0aGlzLmNvcm5lclszXSk7aWYodGhpcy5saS5pc1Byb3BlcigpKVxucmV0dXJuIHRydWU7aWYodGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKSlcbmludGVyc2VjdHNCb3R0b209dHJ1ZTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAscDEsdGhpcy5jb3JuZXJbM10sdGhpcy5jb3JuZXJbMF0pO2lmKHRoaXMubGkuaXNQcm9wZXIoKSlcbnJldHVybiB0cnVlO2lmKGludGVyc2VjdHNMZWZ0JiZpbnRlcnNlY3RzQm90dG9tKVxucmV0dXJuIHRydWU7aWYocDAuZXF1YWxzKHRoaXMucHQpKVxucmV0dXJuIHRydWU7aWYocDEuZXF1YWxzKHRoaXMucHQpKVxucmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLkhvdFBpeGVsLnByb3RvdHlwZS5pbnRlcnNlY3RzUGl4ZWxDbG9zdXJlPWZ1bmN0aW9uKHAwLHAxKXt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAscDEsdGhpcy5jb3JuZXJbMF0sdGhpcy5jb3JuZXJbMV0pO2lmKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpXG5yZXR1cm4gdHJ1ZTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAscDEsdGhpcy5jb3JuZXJbMV0sdGhpcy5jb3JuZXJbMl0pO2lmKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpXG5yZXR1cm4gdHJ1ZTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAscDEsdGhpcy5jb3JuZXJbMl0sdGhpcy5jb3JuZXJbM10pO2lmKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpXG5yZXR1cm4gdHJ1ZTt0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24ocDAscDEsdGhpcy5jb3JuZXJbM10sdGhpcy5jb3JuZXJbMF0pO2lmKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpXG5yZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2U7fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuSG90UGl4ZWwucHJvdG90eXBlLmFkZFNuYXBwZWROb2RlPWZ1bmN0aW9uKHNlZ1N0cixzZWdJbmRleCl7dmFyIHAwPXNlZ1N0ci5nZXRDb29yZGluYXRlKHNlZ0luZGV4KTt2YXIgcDE9c2VnU3RyLmdldENvb3JkaW5hdGUoc2VnSW5kZXgrMSk7aWYodGhpcy5pbnRlcnNlY3RzKHAwLHAxKSl7c2VnU3RyLmFkZEludGVyc2VjdGlvbih0aGlzLmdldENvb3JkaW5hdGUoKSxzZWdJbmRleCk7cmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXI9ZnVuY3Rpb24oaW5wdXRMaW5lKXt0aGlzLmlucHV0TGluZT1pbnB1dExpbmU7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5zaW1wbGlmeT1mdW5jdGlvbihpbnB1dExpbmUsZGlzdGFuY2VUb2wpe3ZhciBzaW1wPW5ldyBqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllcihpbnB1dExpbmUpO3JldHVybiBzaW1wLnNpbXBsaWZ5KGRpc3RhbmNlVG9sKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLklOSVQ9MDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5ERUxFVEU9MTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5LRUVQPTE7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXIucHJvdG90eXBlLmlucHV0TGluZT1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5kaXN0YW5jZVRvbD1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5pc0RlbGV0ZWQ9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5wcm90b3R5cGUuYW5nbGVPcmllbnRhdGlvbj1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ09VTlRFUkNMT0NLV0lTRTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oZGlzdGFuY2VUb2wpe3RoaXMuZGlzdGFuY2VUb2w9TWF0aC5hYnMoZGlzdGFuY2VUb2wpO2lmKGRpc3RhbmNlVG9sPDApXG50aGlzLmFuZ2xlT3JpZW50YXRpb249anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLkNMT0NLV0lTRTt0aGlzLmlzRGVsZXRlZD1bXTt0aGlzLmlzRGVsZXRlZC5sZW5ndGg9dGhpcy5pbnB1dExpbmUubGVuZ3RoO3ZhciBpc0NoYW5nZWQ9ZmFsc2U7ZG97aXNDaGFuZ2VkPXRoaXMuZGVsZXRlU2hhbGxvd0NvbmNhdml0aWVzKCk7fXdoaWxlKGlzQ2hhbmdlZCk7cmV0dXJuIHRoaXMuY29sbGFwc2VMaW5lKCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5wcm90b3R5cGUuZGVsZXRlU2hhbGxvd0NvbmNhdml0aWVzPWZ1bmN0aW9uKCl7dmFyIGluZGV4PTE7dmFyIG1heEluZGV4PXRoaXMuaW5wdXRMaW5lLmxlbmd0aC0xO3ZhciBtaWRJbmRleD10aGlzLmZpbmROZXh0Tm9uRGVsZXRlZEluZGV4KGluZGV4KTt2YXIgbGFzdEluZGV4PXRoaXMuZmluZE5leHROb25EZWxldGVkSW5kZXgobWlkSW5kZXgpO3ZhciBpc0NoYW5nZWQ9ZmFsc2U7d2hpbGUobGFzdEluZGV4PHRoaXMuaW5wdXRMaW5lLmxlbmd0aCl7dmFyIGlzTWlkZGxlVmVydGV4RGVsZXRlZD1mYWxzZTtpZih0aGlzLmlzRGVsZXRhYmxlKGluZGV4LG1pZEluZGV4LGxhc3RJbmRleCx0aGlzLmRpc3RhbmNlVG9sKSl7dGhpcy5pc0RlbGV0ZWRbbWlkSW5kZXhdPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLkRFTEVURTtpc01pZGRsZVZlcnRleERlbGV0ZWQ9dHJ1ZTtpc0NoYW5nZWQ9dHJ1ZTt9XG5pZihpc01pZGRsZVZlcnRleERlbGV0ZWQpXG5pbmRleD1sYXN0SW5kZXg7ZWxzZVxuaW5kZXg9bWlkSW5kZXg7bWlkSW5kZXg9dGhpcy5maW5kTmV4dE5vbkRlbGV0ZWRJbmRleChpbmRleCk7bGFzdEluZGV4PXRoaXMuZmluZE5leHROb25EZWxldGVkSW5kZXgobWlkSW5kZXgpO31cbnJldHVybiBpc0NoYW5nZWQ7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5wcm90b3R5cGUuZmluZE5leHROb25EZWxldGVkSW5kZXg9ZnVuY3Rpb24oaW5kZXgpe3ZhciBuZXh0PWluZGV4KzE7d2hpbGUobmV4dDx0aGlzLmlucHV0TGluZS5sZW5ndGgmJnRoaXMuaXNEZWxldGVkW25leHRdPT09anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXIuREVMRVRFKVxubmV4dCsrO3JldHVybiBuZXh0O307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXIucHJvdG90eXBlLmNvbGxhcHNlTGluZT1mdW5jdGlvbigpe3ZhciBjb29yZExpc3Q9W107Zm9yKHZhciBpPTA7aTx0aGlzLmlucHV0TGluZS5sZW5ndGg7aSsrKXtpZih0aGlzLmlzRGVsZXRlZFtpXSE9PWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLkRFTEVURSlcbmNvb3JkTGlzdC5wdXNoKHRoaXMuaW5wdXRMaW5lW2ldKTt9XG5yZXR1cm4gY29vcmRMaXN0O307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXIucHJvdG90eXBlLmlzRGVsZXRhYmxlPWZ1bmN0aW9uKGkwLGkxLGkyLGRpc3RhbmNlVG9sKXt2YXIgcDA9dGhpcy5pbnB1dExpbmVbaTBdO3ZhciBwMT10aGlzLmlucHV0TGluZVtpMV07dmFyIHAyPXRoaXMuaW5wdXRMaW5lW2kyXTtpZighdGhpcy5pc0NvbmNhdmUocDAscDEscDIpKVxucmV0dXJuIGZhbHNlO2lmKCF0aGlzLmlzU2hhbGxvdyhwMCxwMSxwMixkaXN0YW5jZVRvbCkpXG5yZXR1cm4gZmFsc2U7cmV0dXJuIHRoaXMuaXNTaGFsbG93U2FtcGxlZChwMCxwMSxpMCxpMixkaXN0YW5jZVRvbCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5wcm90b3R5cGUuaXNTaGFsbG93Q29uY2F2aXR5PWZ1bmN0aW9uKHAwLHAxLHAyLGRpc3RhbmNlVG9sKXt2YXIgb3JpZW50YXRpb249anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmNvbXB1dGVPcmllbnRhdGlvbihwMCxwMSxwMik7dmFyIGlzQW5nbGVUb1NpbXBsaWZ5PShvcmllbnRhdGlvbj09PXRoaXMuYW5nbGVPcmllbnRhdGlvbik7aWYoIWlzQW5nbGVUb1NpbXBsaWZ5KVxucmV0dXJuIGZhbHNlO3ZhciBkaXN0PWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZShwMSxwMCxwMik7cmV0dXJuIGRpc3Q8ZGlzdGFuY2VUb2w7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5OVU1fUFRTX1RPX0NIRUNLPTEwO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5pc1NoYWxsb3dTYW1wbGVkPWZ1bmN0aW9uKHAwLHAyLGkwLGkyLGRpc3RhbmNlVG9sKXt2YXIgaW5jPXBhcnNlSW50KChpMi1pMCkvanN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXIuTlVNX1BUU19UT19DSEVDSyk7aWYoaW5jPD0wKVxuaW5jPTE7Zm9yKHZhciBpPWkwO2k8aTI7aSs9aW5jKXtpZighdGhpcy5pc1NoYWxsb3cocDAscDIsdGhpcy5pbnB1dExpbmVbaV0sZGlzdGFuY2VUb2wpKVxucmV0dXJuIGZhbHNlO31cbnJldHVybiB0cnVlO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXIucHJvdG90eXBlLmlzU2hhbGxvdz1mdW5jdGlvbihwMCxwMSxwMixkaXN0YW5jZVRvbCl7dmFyIGRpc3Q9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmRpc3RhbmNlUG9pbnRMaW5lKHAxLHAwLHAyKTtyZXR1cm4gZGlzdDxkaXN0YW5jZVRvbDt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnByb3RvdHlwZS5pc0NvbmNhdmU9ZnVuY3Rpb24ocDAscDEscDIpe3ZhciBvcmllbnRhdGlvbj1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuY29tcHV0ZU9yaWVudGF0aW9uKHAwLHAxLHAyKTt2YXIgaXNDb25jYXZlPShvcmllbnRhdGlvbj09PXRoaXMuYW5nbGVPcmllbnRhdGlvbik7cmV0dXJuIGlzQ29uY2F2ZTt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50PWZ1bmN0aW9uKHgsb2JqLGxhYmVsKXtpZighKG9iaiBpbnN0YW5jZW9mIGpzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50KSl7dGhpcy5ldmVudFR5cGU9anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQuSU5TRVJUO3RoaXMubGFiZWw9bGFiZWw7dGhpcy54VmFsdWU9eDt0aGlzLm9iaj1vYmo7cmV0dXJuO31cbnRoaXMuZXZlbnRUeXBlPWpzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50LkRFTEVURTt0aGlzLnhWYWx1ZT14O3RoaXMuaW5zZXJ0RXZlbnQ9b2JqO307anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQuSU5TRVJUPTE7anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQuREVMRVRFPTI7anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQucHJvdG90eXBlLmxhYmVsPW51bGw7anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQucHJvdG90eXBlLnhWYWx1ZT1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50LnByb3RvdHlwZS5ldmVudFR5cGU9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudC5wcm90b3R5cGUuaW5zZXJ0RXZlbnQ9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudC5wcm90b3R5cGUuZGVsZXRlRXZlbnRJbmRleD1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50LnByb3RvdHlwZS5vYmo9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudC5wcm90b3R5cGUuaXNJbnNlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVudFR5cGU9PWpzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50LklOU0VSVDt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50LnByb3RvdHlwZS5pc0RlbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZW50VHlwZT09anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQuREVMRVRFO307anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lRXZlbnQucHJvdG90eXBlLmdldEluc2VydEV2ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5zZXJ0RXZlbnQ7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudC5wcm90b3R5cGUuZ2V0RGVsZXRlRXZlbnRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRlbGV0ZUV2ZW50SW5kZXg7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudC5wcm90b3R5cGUuc2V0RGVsZXRlRXZlbnRJbmRleD1mdW5jdGlvbihkZWxldGVFdmVudEluZGV4KXt0aGlzLmRlbGV0ZUV2ZW50SW5kZXg9ZGVsZXRlRXZlbnRJbmRleDt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50LnByb3RvdHlwZS5nZXRPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmo7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudC5wcm90b3R5cGUuaXNTYW1lTGFiZWw9ZnVuY3Rpb24oZXYpe2lmKHRoaXMubGFiZWw9PW51bGwpe3JldHVybiBmYWxzZTt9XG5yZXR1cm4gdGhpcy5sYWJlbD09ZXYubGFiZWw7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHBlKXtpZih0aGlzLnhWYWx1ZTxwZS54VmFsdWUpe3JldHVybi0xO31cbmlmKHRoaXMueFZhbHVlPnBlLnhWYWx1ZSl7cmV0dXJuIDE7fVxuaWYodGhpcy5ldmVudFR5cGU8cGUuZXZlbnRUeXBlKXtyZXR1cm4tMTt9XG5pZih0aGlzLmV2ZW50VHlwZT5wZS5ldmVudFR5cGUpe3JldHVybiAxO31cbnJldHVybiAwO307anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0PWZ1bmN0aW9uKGNvb3JkLGFsbG93UmVwZWF0ZWQpe3RoaXMuYXJyYXk9W107YWxsb3dSZXBlYXRlZD0oYWxsb3dSZXBlYXRlZD09PXVuZGVmaW5lZCk/dHJ1ZTphbGxvd1JlcGVhdGVkO2lmKGNvb3JkIT09dW5kZWZpbmVkKXt0aGlzLmFkZChjb29yZCxhbGxvd1JlcGVhdGVkKTt9fTtqc3RzLmdlb20uQ29vcmRpbmF0ZUxpc3QucHJvdG90eXBlPW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KCk7anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0LnByb3RvdHlwZS5pdGVyYXRvcj1udWxsO2pzdHMuZ2VvbS5Db29yZGluYXRlTGlzdC5wcm90b3R5cGUucmVtb3ZlPW51bGw7anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuYXJyYXlbaV07fTtqc3RzLmdlb20uQ29vcmRpbmF0ZUxpc3QucHJvdG90eXBlLnNldD1mdW5jdGlvbihpLGUpe3ZhciBvPXRoaXMuYXJyYXlbaV07dGhpcy5hcnJheVtpXT1lO3JldHVybiBvO307anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoO307anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe3JldHVybiB0aGlzLmFkZENvb3JkaW5hdGVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZWxzZXtyZXR1cm4gdGhpcy5hcnJheS5wdXNoKGFyZ3VtZW50c1swXSk7fX07anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0LnByb3RvdHlwZS5hZGRDb29yZGluYXRlcz1mdW5jdGlvbihjb29yZCxhbGxvd1JlcGVhdGVkLGRpcmVjdGlvbil7aWYoY29vcmQgaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7cmV0dXJuIHRoaXMuYWRkQ29vcmRpbmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fWVsc2UgaWYodHlwZW9mIGNvb3JkPT09J251bWJlcicpe3JldHVybiB0aGlzLmluc2VydENvb3JkaW5hdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbmRpcmVjdGlvbj1kaXJlY3Rpb258fHRydWU7aWYoZGlyZWN0aW9uKXtmb3IodmFyIGk9MDtpPGNvb3JkLmxlbmd0aDtpKyspe3RoaXMuYWRkQ29vcmRpbmF0ZShjb29yZFtpXSxhbGxvd1JlcGVhdGVkKTt9fWVsc2V7Zm9yKHZhciBpPWNvb3JkLmxlbmd0aC0xO2k+PTA7aS0tKXt0aGlzLmFkZENvb3JkaW5hdGUoY29vcmRbaV0sYWxsb3dSZXBlYXRlZCk7fX1cbnJldHVybiB0cnVlO307anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0LnByb3RvdHlwZS5hZGRDb29yZGluYXRlPWZ1bmN0aW9uKGNvb3JkLGFsbG93UmVwZWF0ZWQpe2lmKCFhbGxvd1JlcGVhdGVkKXtpZih0aGlzLnNpemUoKT49MSl7dmFyIGxhc3Q9dGhpcy5nZXQodGhpcy5zaXplKCktMSk7aWYobGFzdC5lcXVhbHMyRChjb29yZCkpcmV0dXJuO319XG50aGlzLmFkZChjb29yZCk7fTtqc3RzLmdlb20uQ29vcmRpbmF0ZUxpc3QucHJvdG90eXBlLmluc2VydENvb3JkaW5hdGU9ZnVuY3Rpb24oaW5kZXgsY29vcmQsYWxsb3dSZXBlYXRlZCl7aWYoIWFsbG93UmVwZWF0ZWQpe3ZhciBiZWZvcmU9aW5kZXg+MD9pbmRleC0xOi0xO2lmKGJlZm9yZSE9PS0xJiZ0aGlzLmdldChiZWZvcmUpLmVxdWFsczJEKGNvb3JkKSl7cmV0dXJuO31cbnZhciBhZnRlcj1pbmRleDx0aGlzLnNpemUoKS0xP2luZGV4KzE6LTE7aWYoYWZ0ZXIhPT0tMSYmdGhpcy5nZXQoYWZ0ZXIpLmVxdWFsczJEKGNvb3JkKSl7cmV0dXJuO319XG50aGlzLmFycmF5LnNwbGljZShpbmRleCwwLGNvb3JkKTt9O2pzdHMuZ2VvbS5Db29yZGluYXRlTGlzdC5wcm90b3R5cGUuY2xvc2VSaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5zaXplKCk+MCl7dGhpcy5hZGRDb29yZGluYXRlKG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh0aGlzLmdldCgwKSksZmFsc2UpO319O2pzdHMuZ2VvbS5Db29yZGluYXRlTGlzdC5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5O307anN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0LnByb3RvdHlwZS50b0Nvb3JkaW5hdGVBcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5O307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3I9ZnVuY3Rpb24ocHJlY2lzaW9uTW9kZWwsYnVmUGFyYW1zLGRpc3RhbmNlKXt0aGlzLnNlZzA9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCgpO3RoaXMuc2VnMT1uZXcganN0cy5nZW9tLkxpbmVTZWdtZW50KCk7dGhpcy5vZmZzZXQwPW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoKTt0aGlzLm9mZnNldDE9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCgpO3RoaXMucHJlY2lzaW9uTW9kZWw9cHJlY2lzaW9uTW9kZWw7dGhpcy5idWZQYXJhbXM9YnVmUGFyYW1zO3RoaXMubGk9bmV3IGpzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3RvcigpO3RoaXMuZmlsbGV0QW5nbGVRdWFudHVtPU1hdGguUEkvMi4wL2J1ZlBhcmFtcy5nZXRRdWFkcmFudFNlZ21lbnRzKCk7aWYodGhpcy5idWZQYXJhbXMuZ2V0UXVhZHJhbnRTZWdtZW50cygpPj04JiZ0aGlzLmJ1ZlBhcmFtcy5nZXRKb2luU3R5bGUoKT09PWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkpPSU5fUk9VTkQpe3RoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcj1qc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5NQVhfQ0xPU0lOR19TRUdfTEVOX0ZBQ1RPUjt9XG50aGlzLmluaXQoZGlzdGFuY2UpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IuT0ZGU0VUX1NFR01FTlRfU0VQQVJBVElPTl9GQUNUT1I9MS4wRS0zO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLklOU0lERV9UVVJOX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUj0xLjBFLTM7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IuQ1VSVkVfVkVSVEVYX1NOQVBfRElTVEFOQ0VfRkFDVE9SPTEuMEUtNjtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5NQVhfQ0xPU0lOR19TRUdfTEVOX0ZBQ1RPUj04MDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUubWF4Q3VydmVTZWdtZW50RXJyb3I9MC4wO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5maWxsZXRBbmdsZVF1YW50dW09bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcj0xO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5zZWdMaXN0PW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmRpc3RhbmNlPTAuMDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUucHJlY2lzaW9uTW9kZWw9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuYnVmUGFyYW1zPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmxpPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLnMwPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLnMxPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLnMyPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLnNlZzA9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuc2VnMT1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5vZmZzZXQwPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLm9mZnNldDE9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuc2lkZT0wO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5oYXNOYXJyb3dDb25jYXZlQW5nbGU9ZmFsc2U7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmhhc05hcnJvd0NvbmNhdmVBbmdsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc05hcnJvd0NvbmNhdmVBbmdsZTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGRpc3RhbmNlKXt0aGlzLmRpc3RhbmNlPWRpc3RhbmNlO3RoaXMubWF4Q3VydmVTZWdtZW50RXJyb3I9dGhpcy5kaXN0YW5jZSooMS1NYXRoLmNvcyh0aGlzLmZpbGxldEFuZ2xlUXVhbnR1bS8yLjApKTt0aGlzLnNlZ0xpc3Q9bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50U3RyaW5nKCk7dGhpcy5zZWdMaXN0LnNldFByZWNpc2lvbk1vZGVsKHRoaXMucHJlY2lzaW9uTW9kZWwpO3RoaXMuc2VnTGlzdC5zZXRNaW5pbXVtVmVydGV4RGlzdGFuY2UodGhpcy5kaXN0YW5jZSpqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5DVVJWRV9WRVJURVhfU05BUF9ESVNUQU5DRV9GQUNUT1IpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmluaXRTaWRlU2VnbWVudHM9ZnVuY3Rpb24oczEsczIsc2lkZSl7dGhpcy5zMT1zMTt0aGlzLnMyPXMyO3RoaXMuc2lkZT1zaWRlO3RoaXMuc2VnMS5zZXRDb29yZGluYXRlcyh0aGlzLnMxLHRoaXMuczIpO3RoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQodGhpcy5zZWcxLHRoaXMuc2lkZSx0aGlzLmRpc3RhbmNlLHRoaXMub2Zmc2V0MSk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWdMaXN0LmdldENvb3JkaW5hdGVzKCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuY2xvc2VSaW5nPWZ1bmN0aW9uKCl7dGhpcy5zZWdMaXN0LmNsb3NlUmluZygpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmFkZFNlZ21lbnRzPWZ1bmN0aW9uKHB0LGlzRm9yd2FyZCl7dGhpcy5zZWdMaXN0LmFkZFB0cyhwdCxpc0ZvcndhcmQpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmFkZEZpcnN0U2VnbWVudD1mdW5jdGlvbigpe3RoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDEucDApO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmFkZExhc3RTZWdtZW50PWZ1bmN0aW9uKCl7dGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MS5wMSk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuYWRkTmV4dFNlZ21lbnQ9ZnVuY3Rpb24ocCxhZGRTdGFydFBvaW50KXt0aGlzLnMwPXRoaXMuczE7dGhpcy5zMT10aGlzLnMyO3RoaXMuczI9cDt0aGlzLnNlZzAuc2V0Q29vcmRpbmF0ZXModGhpcy5zMCx0aGlzLnMxKTt0aGlzLmNvbXB1dGVPZmZzZXRTZWdtZW50KHRoaXMuc2VnMCx0aGlzLnNpZGUsdGhpcy5kaXN0YW5jZSx0aGlzLm9mZnNldDApO3RoaXMuc2VnMS5zZXRDb29yZGluYXRlcyh0aGlzLnMxLHRoaXMuczIpO3RoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQodGhpcy5zZWcxLHRoaXMuc2lkZSx0aGlzLmRpc3RhbmNlLHRoaXMub2Zmc2V0MSk7aWYodGhpcy5zMS5lcXVhbHModGhpcy5zMikpXG5yZXR1cm47dmFyIG9yaWVudGF0aW9uPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5jb21wdXRlT3JpZW50YXRpb24odGhpcy5zMCx0aGlzLnMxLHRoaXMuczIpO3ZhciBvdXRzaWRlVHVybj0ob3JpZW50YXRpb249PT1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ0xPQ0tXSVNFJiZ0aGlzLnNpZGU9PT1qc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKXx8KG9yaWVudGF0aW9uPT09anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLkNPVU5URVJDTE9DS1dJU0UmJnRoaXMuc2lkZT09PWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLlJJR0hUKTtpZihvcmllbnRhdGlvbj09MCl7dGhpcy5hZGRDb2xsaW5lYXIoYWRkU3RhcnRQb2ludCk7fWVsc2UgaWYob3V0c2lkZVR1cm4pe3RoaXMuYWRkT3V0c2lkZVR1cm4ob3JpZW50YXRpb24sYWRkU3RhcnRQb2ludCk7fWVsc2V7dGhpcy5hZGRJbnNpZGVUdXJuKG9yaWVudGF0aW9uLGFkZFN0YXJ0UG9pbnQpO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5hZGRDb2xsaW5lYXI9ZnVuY3Rpb24oYWRkU3RhcnRQb2ludCl7dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHRoaXMuczAsdGhpcy5zMSx0aGlzLnMxLHRoaXMuczIpO3ZhciBudW1JbnQ9dGhpcy5saS5nZXRJbnRlcnNlY3Rpb25OdW0oKTtpZihudW1JbnQ+PTIpe2lmKHRoaXMuYnVmUGFyYW1zLmdldEpvaW5TdHlsZSgpPT09anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuSk9JTl9CRVZFTHx8dGhpcy5idWZQYXJhbXMuZ2V0Sm9pblN0eWxlKCk9PT1qc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5KT0lOX01JVFJFKXtpZihhZGRTdGFydFBvaW50KVxudGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MC5wMSk7dGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MS5wMCk7fWVsc2V7dGhpcy5hZGRGaWxsZXQodGhpcy5zMSx0aGlzLm9mZnNldDAucDEsdGhpcy5vZmZzZXQxLnAwLGpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5DTE9DS1dJU0UsdGhpcy5kaXN0YW5jZSk7fX19O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5hZGRPdXRzaWRlVHVybj1mdW5jdGlvbihvcmllbnRhdGlvbixhZGRTdGFydFBvaW50KXtpZih0aGlzLm9mZnNldDAucDEuZGlzdGFuY2UodGhpcy5vZmZzZXQxLnAwKTx0aGlzLmRpc3RhbmNlKmpzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLk9GRlNFVF9TRUdNRU5UX1NFUEFSQVRJT05fRkFDVE9SKXt0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQwLnAxKTtyZXR1cm47fVxuaWYodGhpcy5idWZQYXJhbXMuZ2V0Sm9pblN0eWxlKCk9PT1qc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5KT0lOX01JVFJFKXt0aGlzLmFkZE1pdHJlSm9pbih0aGlzLnMxLHRoaXMub2Zmc2V0MCx0aGlzLm9mZnNldDEsdGhpcy5kaXN0YW5jZSk7fWVsc2UgaWYodGhpcy5idWZQYXJhbXMuZ2V0Sm9pblN0eWxlKCk9PT1qc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5KT0lOX0JFVkVMKXt0aGlzLmFkZEJldmVsSm9pbih0aGlzLm9mZnNldDAsdGhpcy5vZmZzZXQxKTt9ZWxzZXtpZihhZGRTdGFydFBvaW50KVxudGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MC5wMSk7dGhpcy5hZGRGaWxsZXQodGhpcy5zMSx0aGlzLm9mZnNldDAucDEsdGhpcy5vZmZzZXQxLnAwLG9yaWVudGF0aW9uLHRoaXMuZGlzdGFuY2UpO3RoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDEucDApO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5hZGRJbnNpZGVUdXJuPWZ1bmN0aW9uKG9yaWVudGF0aW9uLGFkZFN0YXJ0UG9pbnQpe3RoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0aGlzLm9mZnNldDAucDAsdGhpcy5vZmZzZXQwLnAxLHRoaXMub2Zmc2V0MS5wMCx0aGlzLm9mZnNldDEucDEpO2lmKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpe3RoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLmxpLmdldEludGVyc2VjdGlvbigwKSk7fWVsc2V7dGhpcy5oYXNOYXJyb3dDb25jYXZlQW5nbGU9dHJ1ZTtpZih0aGlzLm9mZnNldDAucDEuZGlzdGFuY2UodGhpcy5vZmZzZXQxLnAwKTx0aGlzLmRpc3RhbmNlKmpzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLklOU0lERV9UVVJOX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUil7dGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MC5wMSk7fWVsc2V7dGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MC5wMSk7aWYodGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yPjApe3ZhciBtaWQwPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgodGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKnRoaXMub2Zmc2V0MC5wMS54K3RoaXMuczEueCkvKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3RvcisxKSwodGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKnRoaXMub2Zmc2V0MC5wMS55K3RoaXMuczEueSkvKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3RvcisxKSk7dGhpcy5zZWdMaXN0LmFkZFB0KG1pZDApO3ZhciBtaWQxPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgodGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKnRoaXMub2Zmc2V0MS5wMC54K3RoaXMuczEueCkvKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3RvcisxKSwodGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKnRoaXMub2Zmc2V0MS5wMC55K3RoaXMuczEueSkvKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3RvcisxKSk7dGhpcy5zZWdMaXN0LmFkZFB0KG1pZDEpO31lbHNle3RoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLnMxKTt9XG50aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQxLnAwKTt9fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmNvbXB1dGVPZmZzZXRTZWdtZW50PWZ1bmN0aW9uKHNlZyxzaWRlLGRpc3RhbmNlLG9mZnNldCl7dmFyIHNpZGVTaWduPXNpZGU9PT1qc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUPzE6LTE7dmFyIGR4PXNlZy5wMS54LXNlZy5wMC54O3ZhciBkeT1zZWcucDEueS1zZWcucDAueTt2YXIgbGVuPU1hdGguc3FydChkeCpkeCtkeSpkeSk7dmFyIHV4PXNpZGVTaWduKmRpc3RhbmNlKmR4L2xlbjt2YXIgdXk9c2lkZVNpZ24qZGlzdGFuY2UqZHkvbGVuO29mZnNldC5wMC54PXNlZy5wMC54LXV5O29mZnNldC5wMC55PXNlZy5wMC55K3V4O29mZnNldC5wMS54PXNlZy5wMS54LXV5O29mZnNldC5wMS55PXNlZy5wMS55K3V4O307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmFkZExpbmVFbmRDYXA9ZnVuY3Rpb24ocDAscDEpe3ZhciBzZWc9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudChwMCxwMSk7dmFyIG9mZnNldEw9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCgpO3RoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQoc2VnLGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlQsdGhpcy5kaXN0YW5jZSxvZmZzZXRMKTt2YXIgb2Zmc2V0Uj1uZXcganN0cy5nZW9tLkxpbmVTZWdtZW50KCk7dGhpcy5jb21wdXRlT2Zmc2V0U2VnbWVudChzZWcsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQsdGhpcy5kaXN0YW5jZSxvZmZzZXRSKTt2YXIgZHg9cDEueC1wMC54O3ZhciBkeT1wMS55LXAwLnk7dmFyIGFuZ2xlPU1hdGguYXRhbjIoZHksZHgpO3N3aXRjaCh0aGlzLmJ1ZlBhcmFtcy5nZXRFbmRDYXBTdHlsZSgpKXtjYXNlIGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkNBUF9ST1VORDp0aGlzLnNlZ0xpc3QuYWRkUHQob2Zmc2V0TC5wMSk7dGhpcy5hZGRGaWxsZXQocDEsYW5nbGUrTWF0aC5QSS8yLGFuZ2xlLU1hdGguUEkvMixqc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuQ0xPQ0tXSVNFLHRoaXMuZGlzdGFuY2UpO3RoaXMuc2VnTGlzdC5hZGRQdChvZmZzZXRSLnAxKTticmVhaztjYXNlIGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkNBUF9GTEFUOnRoaXMuc2VnTGlzdC5hZGRQdChvZmZzZXRMLnAxKTt0aGlzLnNlZ0xpc3QuYWRkUHQob2Zmc2V0Ui5wMSk7YnJlYWs7Y2FzZSBqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5DQVBfU1FVQVJFOnZhciBzcXVhcmVDYXBTaWRlT2Zmc2V0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO3NxdWFyZUNhcFNpZGVPZmZzZXQueD1NYXRoLmFicyh0aGlzLmRpc3RhbmNlKSpNYXRoLmNvcyhhbmdsZSk7c3F1YXJlQ2FwU2lkZU9mZnNldC55PU1hdGguYWJzKHRoaXMuZGlzdGFuY2UpKk1hdGguc2luKGFuZ2xlKTt2YXIgc3F1YXJlQ2FwTE9mZnNldD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUob2Zmc2V0TC5wMS54K1xuc3F1YXJlQ2FwU2lkZU9mZnNldC54LG9mZnNldEwucDEueStzcXVhcmVDYXBTaWRlT2Zmc2V0LnkpO3ZhciBzcXVhcmVDYXBST2Zmc2V0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShvZmZzZXRSLnAxLngrXG5zcXVhcmVDYXBTaWRlT2Zmc2V0Lngsb2Zmc2V0Ui5wMS55K3NxdWFyZUNhcFNpZGVPZmZzZXQueSk7dGhpcy5zZWdMaXN0LmFkZFB0KHNxdWFyZUNhcExPZmZzZXQpO3RoaXMuc2VnTGlzdC5hZGRQdChzcXVhcmVDYXBST2Zmc2V0KTticmVhazt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuYWRkTWl0cmVKb2luPWZ1bmN0aW9uKHAsb2Zmc2V0MCxvZmZzZXQxLGRpc3RhbmNlKXt2YXIgaXNNaXRyZVdpdGhpbkxpbWl0PXRydWU7dmFyIGludFB0PW51bGw7dHJ5e2ludFB0PWpzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlLmludGVyc2VjdGlvbihvZmZzZXQwLnAwLG9mZnNldDAucDEsb2Zmc2V0MS5wMCxvZmZzZXQxLnAxKTt2YXIgbWl0cmVSYXRpbz1kaXN0YW5jZTw9MC4wPzEuMDppbnRQdC5kaXN0YW5jZShwKS9NYXRoLmFicyhkaXN0YW5jZSk7aWYobWl0cmVSYXRpbz50aGlzLmJ1ZlBhcmFtcy5nZXRNaXRyZUxpbWl0KCkpXG50aGlzLmlzTWl0cmVXaXRoaW5MaW1pdD1mYWxzZTt9Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIGpzdHMuZXJyb3IuTm90UmVwcmVzZW50YWJsZUVycm9yKXtpbnRQdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoMCwwKTt0aGlzLmlzTWl0cmVXaXRoaW5MaW1pdD1mYWxzZTt9fVxuaWYoaXNNaXRyZVdpdGhpbkxpbWl0KXt0aGlzLnNlZ0xpc3QuYWRkUHQoaW50UHQpO31lbHNle3RoaXMuYWRkTGltaXRlZE1pdHJlSm9pbihvZmZzZXQwLG9mZnNldDEsZGlzdGFuY2UsYnVmUGFyYW1zLmdldE1pdHJlTGltaXQoKSk7fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmFkZExpbWl0ZWRNaXRyZUpvaW49ZnVuY3Rpb24ob2Zmc2V0MCxvZmZzZXQxLGRpc3RhbmNlLG1pdHJlTGltaXQpe3ZhciBiYXNlUHQ9dGhpcy5zZWcwLnAxO3ZhciBhbmcwPWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmFuZ2xlKGJhc2VQdCx0aGlzLnNlZzAucDApO3ZhciBhbmcxPWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmFuZ2xlKGJhc2VQdCx0aGlzLnNlZzEucDEpO3ZhciBhbmdEaWZmPWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmFuZ2xlQmV0d2Vlbk9yaWVudGVkKHRoaXMuc2VnMC5wMCxiYXNlUHQsdGhpcy5zZWcxLnAxKTt2YXIgYW5nRGlmZkhhbGY9YW5nRGlmZi8yO3ZhciBtaWRBbmc9anN0cy5hbGdvcml0aG0uQW5nbGUubm9ybWFsaXplKGFuZzArYW5nRGlmZkhhbGYpO3ZhciBtaXRyZU1pZEFuZz1qc3RzLmFsZ29yaXRobS5BbmdsZS5ub3JtYWxpemUobWlkQW5nK01hdGguUEkpO3ZhciBtaXRyZURpc3Q9bWl0cmVMaW1pdCpkaXN0YW5jZTt2YXIgYmV2ZWxEZWx0YT1taXRyZURpc3QqTWF0aC5hYnMoTWF0aC5zaW4oYW5nRGlmZkhhbGYpKTt2YXIgYmV2ZWxIYWxmTGVuPWRpc3RhbmNlLWJldmVsRGVsdGE7dmFyIGJldmVsTWlkWD1iYXNlUHQueCttaXRyZURpc3QqTWF0aC5jb3MobWl0cmVNaWRBbmcpO3ZhciBiZXZlbE1pZFk9YmFzZVB0LnkrbWl0cmVEaXN0Kk1hdGguc2luKG1pdHJlTWlkQW5nKTt2YXIgYmV2ZWxNaWRQdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoYmV2ZWxNaWRYLGJldmVsTWlkWSk7dmFyIG1pdHJlTWlkTGluZT1uZXcganN0cy5nZW9tLkxpbmVTZWdtZW50KGJhc2VQdCxiZXZlbE1pZFB0KTt2YXIgYmV2ZWxFbmRMZWZ0PW1pdHJlTWlkTGluZS5wb2ludEFsb25nT2Zmc2V0KDEuMCxiZXZlbEhhbGZMZW4pO3ZhciBiZXZlbEVuZFJpZ2h0PW1pdHJlTWlkTGluZS5wb2ludEFsb25nT2Zmc2V0KDEuMCwtYmV2ZWxIYWxmTGVuKTtpZih0aGlzLnNpZGU9PWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlQpe3RoaXMuc2VnTGlzdC5hZGRQdChiZXZlbEVuZExlZnQpO3RoaXMuc2VnTGlzdC5hZGRQdChiZXZlbEVuZFJpZ2h0KTt9ZWxzZXt0aGlzLnNlZ0xpc3QuYWRkUHQoYmV2ZWxFbmRSaWdodCk7dGhpcy5zZWdMaXN0LmFkZFB0KGJldmVsRW5kTGVmdCk7fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmFkZEJldmVsSm9pbj1mdW5jdGlvbihvZmZzZXQwLG9mZnNldDEpe3RoaXMuc2VnTGlzdC5hZGRQdChvZmZzZXQwLnAxKTt0aGlzLnNlZ0xpc3QuYWRkUHQob2Zmc2V0MS5wMCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudEdlbmVyYXRvci5wcm90b3R5cGUuYWRkRmlsbGV0PWZ1bmN0aW9uKHAscDAscDEsZGlyZWN0aW9uLHJhZGl1cyl7aWYoIShwMSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Db29yZGluYXRlKSl7dGhpcy5hZGRGaWxsZXQyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudmFyIGR4MD1wMC54LXAueDt2YXIgZHkwPXAwLnktcC55O3ZhciBzdGFydEFuZ2xlPU1hdGguYXRhbjIoZHkwLGR4MCk7dmFyIGR4MT1wMS54LXAueDt2YXIgZHkxPXAxLnktcC55O3ZhciBlbmRBbmdsZT1NYXRoLmF0YW4yKGR5MSxkeDEpO2lmKGRpcmVjdGlvbj09PWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5DTE9DS1dJU0Upe2lmKHN0YXJ0QW5nbGU8PWVuZEFuZ2xlKVxuc3RhcnRBbmdsZSs9Mi4wKk1hdGguUEk7fWVsc2V7aWYoc3RhcnRBbmdsZT49ZW5kQW5nbGUpXG5zdGFydEFuZ2xlLT0yLjAqTWF0aC5QSTt9XG50aGlzLnNlZ0xpc3QuYWRkUHQocDApO3RoaXMuYWRkRmlsbGV0KHAsc3RhcnRBbmdsZSxlbmRBbmdsZSxkaXJlY3Rpb24scmFkaXVzKTt0aGlzLnNlZ0xpc3QuYWRkUHQocDEpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmFkZEZpbGxldDI9ZnVuY3Rpb24ocCxzdGFydEFuZ2xlLGVuZEFuZ2xlLGRpcmVjdGlvbixyYWRpdXMpe3ZhciBkaXJlY3Rpb25GYWN0b3I9ZGlyZWN0aW9uPT09anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLkNMT0NLV0lTRT8tMToxO3ZhciB0b3RhbEFuZ2xlPU1hdGguYWJzKHN0YXJ0QW5nbGUtZW5kQW5nbGUpO3ZhciBuU2Vncz1wYXJzZUludCgodG90YWxBbmdsZS90aGlzLmZpbGxldEFuZ2xlUXVhbnR1bSswLjUpKTtpZihuU2VnczwxKVxucmV0dXJuO3ZhciBpbml0QW5nbGUsY3VyckFuZ2xlSW5jO2luaXRBbmdsZT0wLjA7Y3VyckFuZ2xlSW5jPXRvdGFsQW5nbGUvblNlZ3M7dmFyIGN1cnJBbmdsZT1pbml0QW5nbGU7dmFyIHB0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO3doaWxlKGN1cnJBbmdsZTx0b3RhbEFuZ2xlKXt2YXIgYW5nbGU9c3RhcnRBbmdsZStkaXJlY3Rpb25GYWN0b3IqY3VyckFuZ2xlO3B0Lng9cC54K3JhZGl1cypNYXRoLmNvcyhhbmdsZSk7cHQueT1wLnkrcmFkaXVzKk1hdGguc2luKGFuZ2xlKTt0aGlzLnNlZ0xpc3QuYWRkUHQocHQpO2N1cnJBbmdsZSs9Y3VyckFuZ2xlSW5jO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50R2VuZXJhdG9yLnByb3RvdHlwZS5jcmVhdGVDaXJjbGU9ZnVuY3Rpb24ocCl7dmFyIHB0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShwLngrdGhpcy5kaXN0YW5jZSxwLnkpO3RoaXMuc2VnTGlzdC5hZGRQdChwdCk7dGhpcy5hZGRGaWxsZXQocCwwLjAsMi4wKk1hdGguUEksLTEsdGhpcy5kaXN0YW5jZSk7dGhpcy5zZWdMaXN0LmNsb3NlUmluZygpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IucHJvdG90eXBlLmNyZWF0ZVNxdWFyZT1mdW5jdGlvbihwKXt0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHAueCtkaXN0YW5jZSxwLnkrZGlzdGFuY2UpKTt0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHAueCtkaXN0YW5jZSxwLnktZGlzdGFuY2UpKTt0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHAueC1kaXN0YW5jZSxwLnktZGlzdGFuY2UpKTt0aGlzLnNlZ0xpc3QuYWRkUHQobmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKHAueC1kaXN0YW5jZSxwLnkrZGlzdGFuY2UpKTt0aGlzLnNlZ0xpc3QuY2xvc2VSaW5nKCk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk1heGltYWxFZGdlUmluZz1mdW5jdGlvbihzdGFydCxnZW9tZXRyeUZhY3Rvcnkpe2pzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nLmNhbGwodGhpcyxzdGFydCxnZW9tZXRyeUZhY3RvcnkpO307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5NYXhpbWFsRWRnZVJpbmcucHJvdG90eXBlPW5ldyBqc3RzLmdlb21ncmFwaC5FZGdlUmluZygpO2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuTWF4aW1hbEVkZ2VSaW5nLmNvbnN0cnVjdG9yPWpzdHMub3BlcmF0aW9uLm92ZXJsYXkuTWF4aW1hbEVkZ2VSaW5nO2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuTWF4aW1hbEVkZ2VSaW5nLnByb3RvdHlwZS5nZXROZXh0PWZ1bmN0aW9uKGRlKVxue3JldHVybiBkZS5nZXROZXh0KCk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk1heGltYWxFZGdlUmluZy5wcm90b3R5cGUuc2V0RWRnZVJpbmc9ZnVuY3Rpb24oZGUsZXIpXG57ZGUuc2V0RWRnZVJpbmcoZXIpO307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5NYXhpbWFsRWRnZVJpbmcucHJvdG90eXBlLmxpbmtEaXJlY3RlZEVkZ2VzRm9yTWluaW1hbEVkZ2VSaW5ncz1mdW5jdGlvbigpXG57dmFyIGRlPXRoaXMuc3RhcnREZTtkb3t2YXIgbm9kZT1kZS5nZXROb2RlKCk7bm9kZS5nZXRFZGdlcygpLmxpbmtNaW5pbWFsRGlyZWN0ZWRFZGdlcyh0aGlzKTtkZT1kZS5nZXROZXh0KCk7fXdoaWxlKGRlIT10aGlzLnN0YXJ0RGUpO307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5NYXhpbWFsRWRnZVJpbmcucHJvdG90eXBlLmJ1aWxkTWluaW1hbFJpbmdzPWZ1bmN0aW9uKClcbnt2YXIgbWluRWRnZVJpbmdzPVtdO3ZhciBkZT10aGlzLnN0YXJ0RGU7ZG97aWYoZGUuZ2V0TWluRWRnZVJpbmcoKT09PW51bGwpe3ZhciBtaW5Fcj1uZXcganN0cy5vcGVyYXRpb24ub3ZlcmxheS5NaW5pbWFsRWRnZVJpbmcoZGUsdGhpcy5nZW9tZXRyeUZhY3RvcnkpO21pbkVkZ2VSaW5ncy5wdXNoKG1pbkVyKTt9XG5kZT1kZS5nZXROZXh0KCk7fXdoaWxlKGRlIT10aGlzLnN0YXJ0RGUpO3JldHVybiBtaW5FZGdlUmluZ3M7fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZFBvaW50PWZ1bmN0aW9uKCl7dGhpcy5jZW50U3VtPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO307anN0cy5hbGdvcml0aG0uQ2VudHJvaWRQb2ludC5wcm90b3R5cGUucHRDb3VudD0wO2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkUG9pbnQucHJvdG90eXBlLmNlbnRTdW09bnVsbDtqc3RzLmFsZ29yaXRobS5DZW50cm9pZFBvaW50LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZ2VvbSl7aWYoZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2ludCl7dGhpcy5hZGQyKGdlb20uZ2V0Q29vcmRpbmF0ZSgpKTt9ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvbnx8Z2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvaW50fHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpTGluZVN0cmluZ3x8Z2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvbHlnb24pe3ZhciBnYz1nZW9tO2Zvcih2YXIgaT0wO2k8Z2MuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dGhpcy5hZGQoZ2MuZ2V0R2VvbWV0cnlOKGkpKTt9fX07anN0cy5hbGdvcml0aG0uQ2VudHJvaWRQb2ludC5wcm90b3R5cGUuYWRkMj1mdW5jdGlvbihwdCl7dGhpcy5wdENvdW50Kz0xO3RoaXMuY2VudFN1bS54Kz1wdC54O3RoaXMuY2VudFN1bS55Kz1wdC55O307anN0cy5hbGdvcml0aG0uQ2VudHJvaWRQb2ludC5wcm90b3R5cGUuZ2V0Q2VudHJvaWQ9ZnVuY3Rpb24oKXt2YXIgY2VudD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTtjZW50Lng9dGhpcy5jZW50U3VtLngvdGhpcy5wdENvdW50O2NlbnQueT10aGlzLmNlbnRTdW0ueS90aGlzLnB0Q291bnQ7cmV0dXJuIGNlbnQ7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5Db25uZWN0ZWRFbGVtZW50TG9jYXRpb25GaWx0ZXI9ZnVuY3Rpb24obG9jYXRpb25zKXt0aGlzLmxvY2F0aW9ucz1sb2NhdGlvbnM7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5Db25uZWN0ZWRFbGVtZW50TG9jYXRpb25GaWx0ZXIucHJvdG90eXBlPW5ldyBqc3RzLmdlb20uR2VvbWV0cnlGaWx0ZXIoKTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5Db25uZWN0ZWRFbGVtZW50TG9jYXRpb25GaWx0ZXIucHJvdG90eXBlLmxvY2F0aW9ucz1udWxsO2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkNvbm5lY3RlZEVsZW1lbnRMb2NhdGlvbkZpbHRlci5nZXRMb2NhdGlvbnM9ZnVuY3Rpb24oZ2VvbSl7dmFyIGxvY2F0aW9ucz1bXTtnZW9tLmFwcGx5KG5ldyBqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5Db25uZWN0ZWRFbGVtZW50TG9jYXRpb25GaWx0ZXIobG9jYXRpb25zKSk7cmV0dXJuIGxvY2F0aW9uczt9O2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkNvbm5lY3RlZEVsZW1lbnRMb2NhdGlvbkZpbHRlci5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGdlb20pe2lmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnR8fGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZ3x8Z2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29uKVxudGhpcy5sb2NhdGlvbnMucHVzaChuZXcganN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbihnZW9tLDAsZ2VvbS5nZXRDb29yZGluYXRlKCkpKTt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5FZGdlPWZ1bmN0aW9uKGUpe3RoaXMuZT1lO3RoaXMucHRzPWUuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgbWNiPW5ldyBqc3RzLmdlb21ncmFwaC5pbmRleC5Nb25vdG9uZUNoYWluSW5kZXhlcigpO3RoaXMuc3RhcnRJbmRleD1tY2IuZ2V0Q2hhaW5TdGFydEluZGljZXModGhpcy5wdHMpO307anN0cy5nZW9tZ3JhcGguaW5kZXguTW9ub3RvbmVDaGFpbkVkZ2UucHJvdG90eXBlLmU9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5Nb25vdG9uZUNoYWluRWRnZS5wcm90b3R5cGUucHRzPW51bGw7anN0cy5nZW9tZ3JhcGguaW5kZXguTW9ub3RvbmVDaGFpbkVkZ2UucHJvdG90eXBlLnN0YXJ0SW5kZXg9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5Nb25vdG9uZUNoYWluRWRnZS5wcm90b3R5cGUuZW52MT1uZXcganN0cy5nZW9tLkVudmVsb3BlKCk7anN0cy5nZW9tZ3JhcGguaW5kZXguTW9ub3RvbmVDaGFpbkVkZ2UucHJvdG90eXBlLmVudjI9bmV3IGpzdHMuZ2VvbS5FbnZlbG9wZSgpO2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5FZGdlLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0czt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5FZGdlLnByb3RvdHlwZS5nZXRTdGFydEluZGV4ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydEluZGV4O307anN0cy5nZW9tZ3JhcGguaW5kZXguTW9ub3RvbmVDaGFpbkVkZ2UucHJvdG90eXBlLmdldE1pblg9ZnVuY3Rpb24oY2hhaW5JbmRleCl7dmFyIHgxPXRoaXMucHRzW3RoaXMuc3RhcnRJbmRleFtjaGFpbkluZGV4XV0ueDt2YXIgeDI9dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W2NoYWluSW5kZXgrMV1dLng7aWYoeDE8eDIpe3JldHVybiB4MTt9XG5yZXR1cm4geDI7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Nb25vdG9uZUNoYWluRWRnZS5wcm90b3R5cGUuZ2V0TWF4WD1mdW5jdGlvbihjaGFpbkluZGV4KXt2YXIgeDE9dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W2NoYWluSW5kZXhdXS54O3ZhciB4Mj10aGlzLnB0c1t0aGlzLnN0YXJ0SW5kZXhbY2hhaW5JbmRleCsxXV0ueDtpZih4MT54Mil7cmV0dXJuIHgxO31cbnJldHVybiB4Mjt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5FZGdlLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0cz1mdW5jdGlvbihtY2Usc2kpe2Zvcih2YXIgaT0wO2k8dGhpcy5zdGFydEluZGV4Lmxlbmd0aC0xO2krKyl7Zm9yKHZhciBqPTA7ajxtY2Uuc3RhcnRJbmRleC5sZW5ndGgtMTtqKyspe3RoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbihpLG1jZSxqLHNpKTt9fX07anN0cy5nZW9tZ3JhcGguaW5kZXguTW9ub3RvbmVDaGFpbkVkZ2UucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW49ZnVuY3Rpb24oY2hhaW5JbmRleDAsbWNlLGNoYWluSW5kZXgxLHNpKXt0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4yKHRoaXMuc3RhcnRJbmRleFtjaGFpbkluZGV4MF0sdGhpcy5zdGFydEluZGV4W2NoYWluSW5kZXgwKzFdLG1jZSxtY2Uuc3RhcnRJbmRleFtjaGFpbkluZGV4MV0sbWNlLnN0YXJ0SW5kZXhbY2hhaW5JbmRleDErMV0sc2kpO307anN0cy5nZW9tZ3JhcGguaW5kZXguTW9ub3RvbmVDaGFpbkVkZ2UucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4yPWZ1bmN0aW9uKHN0YXJ0MCxlbmQwLG1jZSxzdGFydDEsZW5kMSxlaSl7dmFyIHAwMD10aGlzLnB0c1tzdGFydDBdO3ZhciBwMDE9dGhpcy5wdHNbZW5kMF07dmFyIHAxMD1tY2UucHRzW3N0YXJ0MV07dmFyIHAxMT1tY2UucHRzW2VuZDFdO2lmKGVuZDAtc3RhcnQwPT0xJiZlbmQxLXN0YXJ0MT09MSl7ZWkuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmUsc3RhcnQwLG1jZS5lLHN0YXJ0MSk7cmV0dXJuO31cbnRoaXMuZW52MS5pbml0KHAwMCxwMDEpO3RoaXMuZW52Mi5pbml0KHAxMCxwMTEpO2lmKCF0aGlzLmVudjEuaW50ZXJzZWN0cyh0aGlzLmVudjIpKXtyZXR1cm47fVxudmFyIG1pZDA9TWF0aC5mbG9vcigoc3RhcnQwK2VuZDApLzIpO3ZhciBtaWQxPU1hdGguZmxvb3IoKHN0YXJ0MStlbmQxKS8yKTtpZihzdGFydDA8bWlkMCl7aWYoc3RhcnQxPG1pZDEpe3RoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbjIoc3RhcnQwLG1pZDAsbWNlLHN0YXJ0MSxtaWQxLGVpKTt9XG5pZihtaWQxPGVuZDEpe3RoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbjIoc3RhcnQwLG1pZDAsbWNlLG1pZDEsZW5kMSxlaSk7fX1cbmlmKG1pZDA8ZW5kMCl7aWYoc3RhcnQxPG1pZDEpe3RoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbjIobWlkMCxlbmQwLG1jZSxzdGFydDEsbWlkMSxlaSk7fVxuaWYobWlkMTxlbmQxKXt0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4yKG1pZDAsZW5kMCxtY2UsbWlkMSxlbmQxLGVpKTt9fX07KGZ1bmN0aW9uKCl7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVpbGRlcj1mdW5jdGlvbigpe307anN0cy5vcGVyYXRpb24ucmVsYXRlLkVkZ2VFbmRCdWlsZGVyLnByb3RvdHlwZS5jb21wdXRlRWRnZUVuZHM9ZnVuY3Rpb24oZWRnZXMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTIpe3RoaXMuY29tcHV0ZUVkZ2VFbmRzMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbnZhciBsPW5ldyBBcnJheUxpc3QoKTtmb3IodmFyIGk9ZWRnZXM7aS5oYXNOZXh0KCk7KXt2YXIgZT1pLm5leHQoKTt0aGlzLmNvbXB1dGVFZGdlRW5kczIoZSxsKTt9XG5yZXR1cm4gbDt9O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVpbGRlci5wcm90b3R5cGUuY29tcHV0ZUVkZ2VFbmRzMj1mdW5jdGlvbihlZGdlLGwpe3ZhciBlaUxpc3Q9ZWRnZS5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdCgpO2VpTGlzdC5hZGRFbmRwb2ludHMoKTt2YXIgaXQ9ZWlMaXN0Lml0ZXJhdG9yKCk7dmFyIGVpUHJldj1udWxsO3ZhciBlaUN1cnI9bnVsbDtpZighaXQuaGFzTmV4dCgpKVxucmV0dXJuO3ZhciBlaU5leHQ9aXQubmV4dCgpO2Rve2VpUHJldj1laUN1cnI7ZWlDdXJyPWVpTmV4dDtlaU5leHQ9bnVsbDtpZihpdC5oYXNOZXh0KCkpXG5laU5leHQ9aXQubmV4dCgpO2lmKGVpQ3VyciE9PW51bGwpe3RoaXMuY3JlYXRlRWRnZUVuZEZvclByZXYoZWRnZSxsLGVpQ3VycixlaVByZXYpO3RoaXMuY3JlYXRlRWRnZUVuZEZvck5leHQoZWRnZSxsLGVpQ3VycixlaU5leHQpO319d2hpbGUoZWlDdXJyIT09bnVsbCk7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZUVkZ2VFbmRGb3JQcmV2PWZ1bmN0aW9uKGVkZ2UsbCxlaUN1cnIsZWlQcmV2KXt2YXIgaVByZXY9ZWlDdXJyLnNlZ21lbnRJbmRleDtpZihlaUN1cnIuZGlzdD09PTAuMCl7aWYoaVByZXY9PT0wKVxucmV0dXJuO2lQcmV2LS07fVxudmFyIHBQcmV2PWVkZ2UuZ2V0Q29vcmRpbmF0ZShpUHJldik7aWYoZWlQcmV2IT09bnVsbCYmZWlQcmV2LnNlZ21lbnRJbmRleD49aVByZXYpXG5wUHJldj1laVByZXYuY29vcmQ7dmFyIGxhYmVsPW5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbChlZGdlLmdldExhYmVsKCkpO2xhYmVsLmZsaXAoKTt2YXIgZT1uZXcganN0cy5nZW9tZ3JhcGguRWRnZUVuZChlZGdlLGVpQ3Vyci5jb29yZCxwUHJldixsYWJlbCk7bC5hZGQoZSk7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZUVkZ2VFbmRGb3JOZXh0PWZ1bmN0aW9uKGVkZ2UsbCxlaUN1cnIsZWlOZXh0KXt2YXIgaU5leHQ9ZWlDdXJyLnNlZ21lbnRJbmRleCsxO2lmKGlOZXh0Pj1lZGdlLmdldE51bVBvaW50cygpJiZlaU5leHQ9PT1udWxsKVxucmV0dXJuO3ZhciBwTmV4dD1lZGdlLmdldENvb3JkaW5hdGUoaU5leHQpO2lmKGVpTmV4dCE9PW51bGwmJmVpTmV4dC5zZWdtZW50SW5kZXg9PT1laUN1cnIuc2VnbWVudEluZGV4KVxucE5leHQ9ZWlOZXh0LmNvb3JkO3ZhciBlPW5ldyBqc3RzLmdlb21ncmFwaC5FZGdlRW5kKGVkZ2UsZWlDdXJyLmNvb3JkLHBOZXh0LG5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbChlZGdlLmdldExhYmVsKCkpKTtsLmFkZChlKTt9O30pKCk7KGZ1bmN0aW9uKCl7dmFyIEFycmF5TGlzdD1qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0O3ZhciBUcmVlU2V0PWphdmFzY3JpcHQudXRpbC5UcmVlU2V0O3ZhciBDb29yZGluYXRlRmlsdGVyPWpzdHMuZ2VvbS5Db29yZGluYXRlRmlsdGVyO2pzdHMudXRpbC5VbmlxdWVDb29yZGluYXRlQXJyYXlGaWx0ZXI9ZnVuY3Rpb24oKXt0aGlzLnRyZWVTZXQ9bmV3IFRyZWVTZXQoKTt0aGlzLmxpc3Q9bmV3IEFycmF5TGlzdCgpO307anN0cy51dGlsLlVuaXF1ZUNvb3JkaW5hdGVBcnJheUZpbHRlci5wcm90b3R5cGU9bmV3IENvb3JkaW5hdGVGaWx0ZXIoKTtqc3RzLnV0aWwuVW5pcXVlQ29vcmRpbmF0ZUFycmF5RmlsdGVyLnByb3RvdHlwZS50cmVlU2V0PW51bGw7anN0cy51dGlsLlVuaXF1ZUNvb3JkaW5hdGVBcnJheUZpbHRlci5wcm90b3R5cGUubGlzdD1udWxsO2pzdHMudXRpbC5VbmlxdWVDb29yZGluYXRlQXJyYXlGaWx0ZXIucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlzdC50b0FycmF5KCk7fTtqc3RzLnV0aWwuVW5pcXVlQ29vcmRpbmF0ZUFycmF5RmlsdGVyLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oY29vcmQpe2lmKCF0aGlzLnRyZWVTZXQuY29udGFpbnMoY29vcmQpKXt0aGlzLmxpc3QuYWRkKGNvb3JkKTt0aGlzLnRyZWVTZXQuYWRkKGNvb3JkKTt9fTt9KSgpOyhmdW5jdGlvbigpe3ZhciBDR0FsZ29yaXRobXM9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zO3ZhciBVbmlxdWVDb29yZGluYXRlQXJyYXlGaWx0ZXI9anN0cy51dGlsLlVuaXF1ZUNvb3JkaW5hdGVBcnJheUZpbHRlcjt2YXIgQXNzZXJ0PWpzdHMudXRpbC5Bc3NlcnQ7dmFyIFN0YWNrPWphdmFzY3JpcHQudXRpbC5TdGFjazt2YXIgQXJyYXlMaXN0PWphdmFzY3JpcHQudXRpbC5BcnJheUxpc3Q7dmFyIEFycmF5cz1qYXZhc2NyaXB0LnV0aWwuQXJyYXlzO3ZhciBSYWRpYWxDb21wYXJhdG9yPWZ1bmN0aW9uKG9yaWdpbil7dGhpcy5vcmlnaW49b3JpZ2luO307UmFkaWFsQ29tcGFyYXRvci5wcm90b3R5cGUub3JpZ2luPW51bGw7UmFkaWFsQ29tcGFyYXRvci5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihvMSxvMil7dmFyIHAxPW8xO3ZhciBwMj1vMjtyZXR1cm4gUmFkaWFsQ29tcGFyYXRvci5wb2xhckNvbXBhcmUodGhpcy5vcmlnaW4scDEscDIpO307UmFkaWFsQ29tcGFyYXRvci5wb2xhckNvbXBhcmU9ZnVuY3Rpb24obyxwLHEpe3ZhciBkeHA9cC54LW8ueDt2YXIgZHlwPXAueS1vLnk7dmFyIGR4cT1xLngtby54O3ZhciBkeXE9cS55LW8ueTt2YXIgb3JpZW50PUNHQWxnb3JpdGhtcy5jb21wdXRlT3JpZW50YXRpb24obyxwLHEpO2lmKG9yaWVudD09Q0dBbGdvcml0aG1zLkNPVU5URVJDTE9DS1dJU0UpXG5yZXR1cm4gMTtpZihvcmllbnQ9PUNHQWxnb3JpdGhtcy5DTE9DS1dJU0UpXG5yZXR1cm4tMTt2YXIgb3A9ZHhwKmR4cCtkeXAqZHlwO3ZhciBvcT1keHEqZHhxK2R5cSpkeXE7aWYob3A8b3Epe3JldHVybi0xO31cbmlmKG9wPm9xKXtyZXR1cm4gMTt9XG5yZXR1cm4gMDt9O2pzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGw9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7dmFyIGdlb21ldHJ5PWFyZ3VtZW50c1swXTt0aGlzLmlucHV0UHRzPWpzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwuZXh0cmFjdENvb3JkaW5hdGVzKGdlb21ldHJ5KTt0aGlzLmdlb21GYWN0b3J5PWdlb21ldHJ5LmdldEZhY3RvcnkoKTt9ZWxzZXt0aGlzLnB0cz1hcmd1bWVudHNbMF07dGhpcy5nZW9tRmFjdG9yeT1hcmd1bWVudHNbMV07fX07anN0cy5hbGdvcml0aG0uQ29udmV4SHVsbC5wcm90b3R5cGUuZ2VvbUZhY3Rvcnk9bnVsbDtqc3RzLmFsZ29yaXRobS5Db252ZXhIdWxsLnByb3RvdHlwZS5pbnB1dFB0cz1udWxsO2pzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwuZXh0cmFjdENvb3JkaW5hdGVzPWZ1bmN0aW9uKGdlb20pe3ZhciBmaWx0ZXI9bmV3IFVuaXF1ZUNvb3JkaW5hdGVBcnJheUZpbHRlcigpO2dlb20uYXBwbHkoZmlsdGVyKTtyZXR1cm4gZmlsdGVyLmdldENvb3JkaW5hdGVzKCk7fTtqc3RzLmFsZ29yaXRobS5Db252ZXhIdWxsLnByb3RvdHlwZS5nZXRDb252ZXhIdWxsPWZ1bmN0aW9uKCl7aWYodGhpcy5pbnB1dFB0cy5sZW5ndGg9PTApe3JldHVybiB0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKTt9XG5pZih0aGlzLmlucHV0UHRzLmxlbmd0aD09MSl7cmV0dXJuIHRoaXMuZ2VvbUZhY3RvcnkuY3JlYXRlUG9pbnQodGhpcy5pbnB1dFB0c1swXSk7fVxuaWYodGhpcy5pbnB1dFB0cy5sZW5ndGg9PTIpe3JldHVybiB0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcodGhpcy5pbnB1dFB0cyk7fVxudmFyIHJlZHVjZWRQdHM9dGhpcy5pbnB1dFB0cztpZih0aGlzLmlucHV0UHRzLmxlbmd0aD41MCl7cmVkdWNlZFB0cz10aGlzLnJlZHVjZSh0aGlzLmlucHV0UHRzKTt9XG52YXIgc29ydGVkUHRzPXRoaXMucHJlU29ydChyZWR1Y2VkUHRzKTt2YXIgY0hTPXRoaXMuZ3JhaGFtU2Nhbihzb3J0ZWRQdHMpO3ZhciBjSD1jSFMudG9BcnJheSgpO3JldHVybiB0aGlzLmxpbmVPclBvbHlnb24oY0gpO307anN0cy5hbGdvcml0aG0uQ29udmV4SHVsbC5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGlucHV0UHRzKXt2YXIgcG9seVB0cz10aGlzLmNvbXB1dGVPY3RSaW5nKGlucHV0UHRzKTtpZihwb2x5UHRzPT1udWxsKVxucmV0dXJuIHRoaXMuaW5wdXRQdHM7dmFyIHJlZHVjZWRTZXQ9bmV3IGphdmFzY3JpcHQudXRpbC5UcmVlU2V0KCk7Zm9yKHZhciBpPTA7aTxwb2x5UHRzLmxlbmd0aDtpKyspe3JlZHVjZWRTZXQuYWRkKHBvbHlQdHNbaV0pO31cbmZvcih2YXIgaT0wO2k8aW5wdXRQdHMubGVuZ3RoO2krKyl7aWYoIUNHQWxnb3JpdGhtcy5pc1BvaW50SW5SaW5nKGlucHV0UHRzW2ldLHBvbHlQdHMpKXtyZWR1Y2VkU2V0LmFkZChpbnB1dFB0c1tpXSk7fX1cbnZhciByZWR1Y2VkUHRzPXJlZHVjZWRTZXQudG9BcnJheSgpO2lmKHJlZHVjZWRQdHMubGVuZ3RoPDMpXG5yZXR1cm4gdGhpcy5wYWRBcnJheTMocmVkdWNlZFB0cyk7cmV0dXJuIHJlZHVjZWRQdHM7fTtqc3RzLmFsZ29yaXRobS5Db252ZXhIdWxsLnByb3RvdHlwZS5wYWRBcnJheTM9ZnVuY3Rpb24ocHRzKXt2YXIgcGFkPVtdO2Zvcih2YXIgaT0wO2k8cGFkLmxlbmd0aDtpKyspe2lmKGk8cHRzLmxlbmd0aCl7cGFkW2ldPXB0c1tpXTt9ZWxzZVxucGFkW2ldPXB0c1swXTt9XG5yZXR1cm4gcGFkO307anN0cy5hbGdvcml0aG0uQ29udmV4SHVsbC5wcm90b3R5cGUucHJlU29ydD1mdW5jdGlvbihwdHMpe3ZhciB0O2Zvcih2YXIgaT0xO2k8cHRzLmxlbmd0aDtpKyspe2lmKChwdHNbaV0ueTxwdHNbMF0ueSl8fCgocHRzW2ldLnk9PXB0c1swXS55KSYmKHB0c1tpXS54PHB0c1swXS54KSkpe3Q9cHRzWzBdO3B0c1swXT1wdHNbaV07cHRzW2ldPXQ7fX1cbkFycmF5cy5zb3J0KHB0cywxLHB0cy5sZW5ndGgsbmV3IFJhZGlhbENvbXBhcmF0b3IocHRzWzBdKSk7cmV0dXJuIHB0czt9O2pzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwucHJvdG90eXBlLmdyYWhhbVNjYW49ZnVuY3Rpb24oYyl7dmFyIHA7dmFyIHBzPW5ldyBTdGFjaygpO3A9cHMucHVzaChjWzBdKTtwPXBzLnB1c2goY1sxXSk7cD1wcy5wdXNoKGNbMl0pO2Zvcih2YXIgaT0zO2k8Yy5sZW5ndGg7aSsrKXtwPXBzLnBvcCgpO3doaWxlKCFwcy5lbXB0eSgpJiZDR0FsZ29yaXRobXMuY29tcHV0ZU9yaWVudGF0aW9uKHBzLnBlZWsoKSxwLGNbaV0pPjApe3A9cHMucG9wKCk7fVxucD1wcy5wdXNoKHApO3A9cHMucHVzaChjW2ldKTt9XG5wPXBzLnB1c2goY1swXSk7cmV0dXJuIHBzO307anN0cy5hbGdvcml0aG0uQ29udmV4SHVsbC5wcm90b3R5cGUuaXNCZXR3ZWVuPWZ1bmN0aW9uKGMxLGMyLGMzKXtpZihDR0FsZ29yaXRobXMuY29tcHV0ZU9yaWVudGF0aW9uKGMxLGMyLGMzKSE9PTApe3JldHVybiBmYWxzZTt9XG5pZihjMS54IT1jMy54KXtpZihjMS54PD1jMi54JiZjMi54PD1jMy54KXtyZXR1cm4gdHJ1ZTt9XG5pZihjMy54PD1jMi54JiZjMi54PD1jMS54KXtyZXR1cm4gdHJ1ZTt9fVxuaWYoYzEueSE9YzMueSl7aWYoYzEueTw9YzIueSYmYzIueTw9YzMueSl7cmV0dXJuIHRydWU7fVxuaWYoYzMueTw9YzIueSYmYzIueTw9YzEueSl7cmV0dXJuIHRydWU7fX1cbnJldHVybiBmYWxzZTt9O2pzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwucHJvdG90eXBlLmNvbXB1dGVPY3RSaW5nPWZ1bmN0aW9uKGlucHV0UHRzKXt2YXIgb2N0UHRzPXRoaXMuY29tcHV0ZU9jdFB0cyhpbnB1dFB0cyk7dmFyIGNvb3JkTGlzdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0KCk7Y29vcmRMaXN0LmFkZChvY3RQdHMsZmFsc2UpO2lmKGNvb3JkTGlzdC5zaXplKCk8Myl7cmV0dXJuIG51bGw7fVxuY29vcmRMaXN0LmNsb3NlUmluZygpO3JldHVybiBjb29yZExpc3QudG9Db29yZGluYXRlQXJyYXkoKTt9O2pzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwucHJvdG90eXBlLmNvbXB1dGVPY3RQdHM9ZnVuY3Rpb24oaW5wdXRQdHMpe3ZhciBwdHM9W107Zm9yKHZhciBqPTA7ajw4O2orKyl7cHRzW2pdPWlucHV0UHRzWzBdO31cbmZvcih2YXIgaT0xO2k8aW5wdXRQdHMubGVuZ3RoO2krKyl7aWYoaW5wdXRQdHNbaV0ueDxwdHNbMF0ueCl7cHRzWzBdPWlucHV0UHRzW2ldO31cbmlmKGlucHV0UHRzW2ldLngtaW5wdXRQdHNbaV0ueTxwdHNbMV0ueC1wdHNbMV0ueSl7cHRzWzFdPWlucHV0UHRzW2ldO31cbmlmKGlucHV0UHRzW2ldLnk+cHRzWzJdLnkpe3B0c1syXT1pbnB1dFB0c1tpXTt9XG5pZihpbnB1dFB0c1tpXS54K2lucHV0UHRzW2ldLnk+cHRzWzNdLngrcHRzWzNdLnkpe3B0c1szXT1pbnB1dFB0c1tpXTt9XG5pZihpbnB1dFB0c1tpXS54PnB0c1s0XS54KXtwdHNbNF09aW5wdXRQdHNbaV07fVxuaWYoaW5wdXRQdHNbaV0ueC1pbnB1dFB0c1tpXS55PnB0c1s1XS54LXB0c1s1XS55KXtwdHNbNV09aW5wdXRQdHNbaV07fVxuaWYoaW5wdXRQdHNbaV0ueTxwdHNbNl0ueSl7cHRzWzZdPWlucHV0UHRzW2ldO31cbmlmKGlucHV0UHRzW2ldLngraW5wdXRQdHNbaV0ueTxwdHNbN10ueCtwdHNbN10ueSl7cHRzWzddPWlucHV0UHRzW2ldO319XG5yZXR1cm4gcHRzO307anN0cy5hbGdvcml0aG0uQ29udmV4SHVsbC5wcm90b3R5cGUubGluZU9yUG9seWdvbj1mdW5jdGlvbihjb29yZGluYXRlcyl7Y29vcmRpbmF0ZXM9dGhpcy5jbGVhblJpbmcoY29vcmRpbmF0ZXMpO2lmKGNvb3JkaW5hdGVzLmxlbmd0aD09Myl7cmV0dXJuIHRoaXMuZ2VvbUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhbY29vcmRpbmF0ZXNbMF0sY29vcmRpbmF0ZXNbMV1dKTt9XG52YXIgbGluZWFyUmluZz10aGlzLmdlb21GYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoY29vcmRpbmF0ZXMpO3JldHVybiB0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZVBvbHlnb24obGluZWFyUmluZyxudWxsKTt9O2pzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwucHJvdG90eXBlLmNsZWFuUmluZz1mdW5jdGlvbihvcmlnaW5hbCl7QXNzZXJ0LmVxdWFscyhvcmlnaW5hbFswXSxvcmlnaW5hbFtvcmlnaW5hbC5sZW5ndGgtMV0pO3ZhciBjbGVhbmVkUmluZz1uZXcgQXJyYXlMaXN0KCk7dmFyIHByZXZpb3VzRGlzdGluY3RDb29yZGluYXRlPW51bGw7Zm9yKHZhciBpPTA7aTw9b3JpZ2luYWwubGVuZ3RoLTI7aSsrKXt2YXIgY3VycmVudENvb3JkaW5hdGU9b3JpZ2luYWxbaV07dmFyIG5leHRDb29yZGluYXRlPW9yaWdpbmFsW2krMV07aWYoY3VycmVudENvb3JkaW5hdGUuZXF1YWxzKG5leHRDb29yZGluYXRlKSl7Y29udGludWU7fVxuaWYocHJldmlvdXNEaXN0aW5jdENvb3JkaW5hdGUhPW51bGwmJnRoaXMuaXNCZXR3ZWVuKHByZXZpb3VzRGlzdGluY3RDb29yZGluYXRlLGN1cnJlbnRDb29yZGluYXRlLG5leHRDb29yZGluYXRlKSl7Y29udGludWU7fVxuY2xlYW5lZFJpbmcuYWRkKGN1cnJlbnRDb29yZGluYXRlKTtwcmV2aW91c0Rpc3RpbmN0Q29vcmRpbmF0ZT1jdXJyZW50Q29vcmRpbmF0ZTt9XG5jbGVhbmVkUmluZy5hZGQob3JpZ2luYWxbb3JpZ2luYWwubGVuZ3RoLTFdKTt2YXIgY2xlYW5lZFJpbmdDb29yZGluYXRlcz1bXTtyZXR1cm4gY2xlYW5lZFJpbmcudG9BcnJheShjbGVhbmVkUmluZ0Nvb3JkaW5hdGVzKTt9O30pKCk7anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyPWZ1bmN0aW9uKGlucHV0R2VvbSxpc0NvbnZleCl7dGhpcy5jb252ZXhIdWxsUHRzPW51bGw7dGhpcy5taW5CYXNlU2VnPW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoKTt0aGlzLm1pbldpZHRoUHQ9bnVsbDt0aGlzLm1pblB0SW5kZXg9MDt0aGlzLm1pbldpZHRoPTA7anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmlucHV0R2VvbT1pbnB1dEdlb207anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmlzQ29udmV4PWlzQ29udmV4fHxmYWxzZTt9O2pzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5pbnB1dEdlb209bnVsbDtqc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIuaXNDb252ZXg9ZmFsc2U7anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLm5leHRJbmRleD1mdW5jdGlvbihwdHMsaW5kZXgpe2luZGV4Kys7aWYoaW5kZXg+PXB0cy5sZW5ndGgpe2luZGV4PTA7fVxucmV0dXJuIGluZGV4O307anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmNvbXB1dGVDPWZ1bmN0aW9uKGEsYixwKXtyZXR1cm4gYSpwLnktYipwLng7fTtqc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIuY29tcHV0ZVNlZ21lbnRGb3JMaW5lPWZ1bmN0aW9uKGEsYixjKXt2YXIgcDA7dmFyIHAxO2lmKE1hdGguYWJzKGIpPk1hdGguYWJzKGEpKXtwMD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoMCxjL2IpO3AxPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgxLGMvYi1hL2IpO31cbmVsc2V7cDA9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGMvYSwwKTtwMT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoYy9hLWIvYSwxKTt9XG5yZXR1cm4gbmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudChwMCxwMSk7fTtqc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZU1pbmltdW1EaWFtZXRlcigpO3JldHVybiB0aGlzLm1pbldpZHRoO307anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLnByb3RvdHlwZS5nZXRXaWR0aENvb3JkaW5hdGU9ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVNaW5pbXVtRGlhbWV0ZXIoKTtyZXR1cm4gdGhpcy5taW5XaWR0aFB0O307anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLnByb3RvdHlwZS5nZXRTdXBwb3J0aW5nU2VnbWVudD1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZU1pbmltdW1EaWFtZXRlcigpO3ZhciBjb29yZD1bdGhpcy5taW5CYXNlU2VnLnAwLHRoaXMubWluQmFzZVNlZy5wMV07cmV0dXJuIGpzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5pbnB1dEdlb20uZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVTdHJpbmcoY29vcmQpO307anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLnByb3RvdHlwZS5nZXREaWFtZXRlcj1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZU1pbmltdW1EaWFtZXRlcigpO2lmKHRoaXMubWluV2lkdGhQdD09PW51bGwpe3JldHVybiBqc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIuaW5wdXRHZW9tLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKG51bGwpO31cbnZhciBiYXNlUHQ9dGhpcy5taW5CYXNlU2VnLnByb2plY3QodGhpcy5taW5XaWR0aFB0KTtyZXR1cm4ganN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmlucHV0R2VvbS5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhbYmFzZVB0LHRoaXMubWluV2lkdGhQdF0pO307anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLnByb3RvdHlwZS5jb21wdXRlTWluaW11bURpYW1ldGVyPWZ1bmN0aW9uKCl7aWYodGhpcy5taW5XaWR0aFB0IT09bnVsbCl7cmV0dXJuO31cbmlmKGpzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5pc0NvbnZleClcbnRoaXMuY29tcHV0ZVdpZHRoQ29udmV4KGpzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5pbnB1dEdlb20pO2Vsc2V7dmFyIGNvbnZleEdlb209bmV3IGpzdHMuYWxnb3JpdGhtLkNvbnZleEh1bGwoanN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmlucHV0R2VvbSkuZ2V0Q29udmV4SHVsbCgpO3RoaXMuY29tcHV0ZVdpZHRoQ29udmV4KGNvbnZleEdlb20pO319O2pzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5wcm90b3R5cGUuY29tcHV0ZVdpZHRoQ29udmV4PWZ1bmN0aW9uKGNvbnZleEdlb20pe2lmKGNvbnZleEdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7dGhpcy5jb252ZXhIdWxsUHRzPWNvbnZleEdlb20uZ2V0RXh0ZXJpb3JSaW5nKCkuZ2V0Q29vcmRpbmF0ZXMoKTt9ZWxzZXt0aGlzLmNvbnZleEh1bGxQdHM9Y29udmV4R2VvbS5nZXRDb29yZGluYXRlcygpO31cbmlmKHRoaXMuY29udmV4SHVsbFB0cy5sZW5ndGg9PT0wKXt0aGlzLm1pbldpZHRoPTA7dGhpcy5taW5XaWR0aFB0PW51bGw7dGhpcy5taW5CYXNlU2VnPW51bGw7fWVsc2UgaWYodGhpcy5jb252ZXhIdWxsUHRzLmxlbmd0aD09PTEpe3RoaXMubWluV2lkdGg9MDt0aGlzLm1pbldpZHRoUHQ9dGhpcy5jb252ZXhIdWxsUHRzWzBdO3RoaXMubWluQmFzZVNlZy5wMD10aGlzLmNvbnZleEh1bGxQdHNbMF07dGhpcy5taW5CYXNlU2VnLnAxPXRoaXMuY29udmV4SHVsbFB0c1swXTt9ZWxzZSBpZih0aGlzLmNvbnZleEh1bGxQdHMubGVuZ3RoPT09Mnx8dGhpcy5jb252ZXhIdWxsUHRzLmxlbmd0aD09PTMpe3RoaXMubWluV2lkdGg9MDt0aGlzLm1pbldpZHRoUHQ9dGhpcy5jb252ZXhIdWxsUHRzWzBdO3RoaXMubWluQmFzZVNlZy5wMD10aGlzLmNvbnZleEh1bGxQdHNbMF07dGhpcy5taW5CYXNlU2VnLnAxPXRoaXMuY29udmV4SHVsbFB0c1sxXTt9ZWxzZXt0aGlzLmNvbXB1dGVDb252ZXhSaW5nTWluRGlhbWV0ZXIodGhpcy5jb252ZXhIdWxsUHRzKTt9fTtqc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIucHJvdG90eXBlLmNvbXB1dGVDb252ZXhSaW5nTWluRGlhbWV0ZXI9ZnVuY3Rpb24ocHRzKXt0aGlzLm1pbldpZHRoPU51bWJlci5NQVhfVkFMVUU7dmFyIGN1cnJNYXhJbmRleD0xO3ZhciBzZWc9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCgpO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aC0xO2krKyl7c2VnLnAwPXB0c1tpXTtzZWcucDE9cHRzW2krMV07Y3Vyck1heEluZGV4PXRoaXMuZmluZE1heFBlcnBEaXN0YW5jZShwdHMsc2VnLGN1cnJNYXhJbmRleCk7fX07anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLnByb3RvdHlwZS5maW5kTWF4UGVycERpc3RhbmNlPWZ1bmN0aW9uKHB0cyxzZWcsc3RhcnRJbmRleCl7dmFyIG1heFBlcnBEaXN0YW5jZT1zZWcuZGlzdGFuY2VQZXJwZW5kaWN1bGFyKHB0c1tzdGFydEluZGV4XSk7dmFyIG5leHRQZXJwRGlzdGFuY2U9bWF4UGVycERpc3RhbmNlO3ZhciBtYXhJbmRleD1zdGFydEluZGV4O3ZhciBuZXh0SW5kZXg9bWF4SW5kZXg7d2hpbGUobmV4dFBlcnBEaXN0YW5jZT49bWF4UGVycERpc3RhbmNlKXttYXhQZXJwRGlzdGFuY2U9bmV4dFBlcnBEaXN0YW5jZTttYXhJbmRleD1uZXh0SW5kZXg7bmV4dEluZGV4PWpzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5uZXh0SW5kZXgocHRzLG1heEluZGV4KTtuZXh0UGVycERpc3RhbmNlPXNlZy5kaXN0YW5jZVBlcnBlbmRpY3VsYXIocHRzW25leHRJbmRleF0pO31cbmlmKG1heFBlcnBEaXN0YW5jZTx0aGlzLm1pbldpZHRoKXt0aGlzLm1pblB0SW5kZXg9bWF4SW5kZXg7dGhpcy5taW5XaWR0aD1tYXhQZXJwRGlzdGFuY2U7dGhpcy5taW5XaWR0aFB0PXB0c1t0aGlzLm1pblB0SW5kZXhdO3RoaXMubWluQmFzZVNlZz1uZXcganN0cy5nZW9tLkxpbmVTZWdtZW50KHNlZyk7fVxucmV0dXJuIG1heEluZGV4O307anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLnByb3RvdHlwZS5nZXRNaW5pbXVtUmVjdGFuZ2xlPWZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlTWluaW11bURpYW1ldGVyKCk7aWYodGhpcy5taW5XaWR0aD09PTApe2lmKHRoaXMubWluQmFzZVNlZy5wMC5lcXVhbHMyRCh0aGlzLm1pbkJhc2VTZWcucDEpKXtyZXR1cm4ganN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmlucHV0R2VvbS5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQodGhpcy5taW5CYXNlU2VnLnAwKTt9XG5yZXR1cm4gdGhpcy5taW5CYXNlU2VnLnRvR2VvbWV0cnkoanN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmlucHV0R2VvbS5nZXRGYWN0b3J5KCkpO31cbnZhciBkeD10aGlzLm1pbkJhc2VTZWcucDEueC10aGlzLm1pbkJhc2VTZWcucDAueDt2YXIgZHk9dGhpcy5taW5CYXNlU2VnLnAxLnktdGhpcy5taW5CYXNlU2VnLnAwLnk7dmFyIG1pblBhcmE9TnVtYmVyLk1BWF9WQUxVRTt2YXIgbWF4UGFyYT0tTnVtYmVyLk1BWF9WQUxVRTt2YXIgbWluUGVycD1OdW1iZXIuTUFYX1ZBTFVFO3ZhciBtYXhQZXJwPS1OdW1iZXIuTUFYX1ZBTFVFO2Zvcih2YXIgaT0wO2k8dGhpcy5jb252ZXhIdWxsUHRzLmxlbmd0aDtpKyspe3ZhciBwYXJhQz1qc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIuY29tcHV0ZUMoZHgsZHksdGhpcy5jb252ZXhIdWxsUHRzW2ldKTtpZihwYXJhQz5tYXhQYXJhKW1heFBhcmE9cGFyYUM7aWYocGFyYUM8bWluUGFyYSltaW5QYXJhPXBhcmFDO3ZhciBwZXJwQz1qc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIuY29tcHV0ZUMoLWR5LGR4LHRoaXMuY29udmV4SHVsbFB0c1tpXSk7aWYocGVycEM+bWF4UGVycCltYXhQZXJwPXBlcnBDO2lmKHBlcnBDPG1pblBlcnApbWluUGVycD1wZXJwQzt9XG52YXIgbWF4UGVycExpbmU9anN0cy5hbGdvcml0aG0uTWluaW11bURpYW1ldGVyLmNvbXB1dGVTZWdtZW50Rm9yTGluZSgtZHgsLWR5LG1heFBlcnApO3ZhciBtaW5QZXJwTGluZT1qc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIuY29tcHV0ZVNlZ21lbnRGb3JMaW5lKC1keCwtZHksbWluUGVycCk7dmFyIG1heFBhcmFMaW5lPWpzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5jb21wdXRlU2VnbWVudEZvckxpbmUoLWR5LGR4LG1heFBhcmEpO3ZhciBtaW5QYXJhTGluZT1qc3RzLmFsZ29yaXRobS5NaW5pbXVtRGlhbWV0ZXIuY29tcHV0ZVNlZ21lbnRGb3JMaW5lKC1keSxkeCxtaW5QYXJhKTt2YXIgcDA9bWF4UGFyYUxpbmUubGluZUludGVyc2VjdGlvbihtYXhQZXJwTGluZSk7dmFyIHAxPW1pblBhcmFMaW5lLmxpbmVJbnRlcnNlY3Rpb24obWF4UGVycExpbmUpO3ZhciBwMj1taW5QYXJhTGluZS5saW5lSW50ZXJzZWN0aW9uKG1pblBlcnBMaW5lKTt2YXIgcDM9bWF4UGFyYUxpbmUubGluZUludGVyc2VjdGlvbihtaW5QZXJwTGluZSk7dmFyIHNoZWxsPWpzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5pbnB1dEdlb20uZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVhclJpbmcoW3AwLHAxLHAyLHAzLHAwXSk7cmV0dXJuIGpzdHMuYWxnb3JpdGhtLk1pbmltdW1EaWFtZXRlci5pbnB1dEdlb20uZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvbHlnb24oc2hlbGwsbnVsbCk7fTsoZnVuY3Rpb24oKXtqc3RzLmlvLkdlb0pTT05QYXJzZXI9ZnVuY3Rpb24oZ2VvbWV0cnlGYWN0b3J5KXt0aGlzLmdlb21ldHJ5RmFjdG9yeT1nZW9tZXRyeUZhY3Rvcnl8fG5ldyBqc3RzLmdlb20uR2VvbWV0cnlGYWN0b3J5KCk7dGhpcy5nZW9tZXRyeVR5cGVzPVsnUG9pbnQnLCdNdWx0aVBvaW50JywnTGluZVN0cmluZycsJ011bHRpTGluZVN0cmluZycsJ1BvbHlnb24nLCdNdWx0aVBvbHlnb24nXTt9O2pzdHMuaW8uR2VvSlNPTlBhcnNlci5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihqc29uKXt2YXIgb2JqO2lmKHR5cGVvZiBqc29uPT09J3N0cmluZycpe29iaj1KU09OLnBhcnNlKGpzb24pO31lbHNle29iaj1qc29uO31cbnZhciB0eXBlPW9iai50eXBlO2lmKCF0aGlzLnBhcnNlW3R5cGVdKXt0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gR2VvSlNPTiB0eXBlOiAnK29iai50eXBlKTt9XG5pZih0aGlzLmdlb21ldHJ5VHlwZXMuaW5kZXhPZih0eXBlKSE9LTEpe3JldHVybiB0aGlzLnBhcnNlW3R5cGVdLmFwcGx5KHRoaXMsW29iai5jb29yZGluYXRlc10pO31lbHNlIGlmKHR5cGU9PT0nR2VvbWV0cnlDb2xsZWN0aW9uJyl7cmV0dXJuIHRoaXMucGFyc2VbdHlwZV0uYXBwbHkodGhpcyxbb2JqLmdlb21ldHJpZXNdKTt9XG5yZXR1cm4gdGhpcy5wYXJzZVt0eXBlXS5hcHBseSh0aGlzLFtvYmpdKTt9O2pzdHMuaW8uR2VvSlNPTlBhcnNlci5wcm90b3R5cGUucGFyc2U9eydGZWF0dXJlJzpmdW5jdGlvbihvYmope3ZhciBmZWF0dXJlPXt9O2Zvcih2YXIga2V5IGluIG9iail7ZmVhdHVyZVtrZXldPW9ialtrZXldO31cbmlmKG9iai5nZW9tZXRyeSl7dmFyIHR5cGU9b2JqLmdlb21ldHJ5LnR5cGU7aWYoIXRoaXMucGFyc2VbdHlwZV0pe3Rocm93IG5ldyBFcnJvcignVW5rbm93biBHZW9KU09OIHR5cGU6ICcrb2JqLnR5cGUpO31cbmZlYXR1cmUuZ2VvbWV0cnk9dGhpcy5yZWFkKG9iai5nZW9tZXRyeSk7fVxuaWYob2JqLmJib3gpe2ZlYXR1cmUuYmJveD10aGlzLnBhcnNlLmJib3guYXBwbHkodGhpcyxbb2JqLmJib3hdKTt9XG5yZXR1cm4gZmVhdHVyZTt9LCdGZWF0dXJlQ29sbGVjdGlvbic6ZnVuY3Rpb24ob2JqKXt2YXIgZmVhdHVyZUNvbGxlY3Rpb249e307aWYob2JqLmZlYXR1cmVzKXtmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcz1bXTtmb3IodmFyIGk9MDtpPG9iai5mZWF0dXJlcy5sZW5ndGg7KytpKXtmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcy5wdXNoKHRoaXMucmVhZChvYmouZmVhdHVyZXNbaV0pKTt9fVxuaWYob2JqLmJib3gpe2ZlYXR1cmVDb2xsZWN0aW9uLmJib3g9dGhpcy5wYXJzZS5iYm94LmFwcGx5KHRoaXMsW29iai5iYm94XSk7fVxucmV0dXJuIGZlYXR1cmVDb2xsZWN0aW9uO30sJ2Nvb3JkaW5hdGVzJzpmdW5jdGlvbihhcnJheSl7dmFyIGNvb3JkaW5hdGVzPVtdO2Zvcih2YXIgaT0wO2k8YXJyYXkubGVuZ3RoOysraSl7dmFyIHN1Yj1hcnJheVtpXTtjb29yZGluYXRlcy5wdXNoKG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShzdWJbMF0sc3ViWzFdKSk7fVxucmV0dXJuIGNvb3JkaW5hdGVzO30sJ2Jib3gnOmZ1bmN0aW9uKGFycmF5KXtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhbbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGFycmF5WzBdLGFycmF5WzFdKSxuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoYXJyYXlbMl0sYXJyYXlbMV0pLG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShhcnJheVsyXSxhcnJheVszXSksbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGFycmF5WzBdLGFycmF5WzNdKSxuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoYXJyYXlbMF0sYXJyYXlbMV0pXSk7fSwnUG9pbnQnOmZ1bmN0aW9uKGFycmF5KXt2YXIgY29vcmRpbmF0ZT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoYXJyYXlbMF0sYXJyYXlbMV0pO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2ludChjb29yZGluYXRlKTt9LCdNdWx0aVBvaW50JzpmdW5jdGlvbihhcnJheSl7dmFyIHBvaW50cz1bXTtmb3IodmFyIGk9MDtpPGFycmF5Lmxlbmd0aDsrK2kpe3BvaW50cy5wdXNoKHRoaXMucGFyc2UuUG9pbnQuYXBwbHkodGhpcyxbYXJyYXlbaV1dKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpUG9pbnQocG9pbnRzKTt9LCdMaW5lU3RyaW5nJzpmdW5jdGlvbihhcnJheSl7dmFyIGNvb3JkaW5hdGVzPXRoaXMucGFyc2UuY29vcmRpbmF0ZXMuYXBwbHkodGhpcyxbYXJyYXldKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhjb29yZGluYXRlcyk7fSwnTXVsdGlMaW5lU3RyaW5nJzpmdW5jdGlvbihhcnJheSl7dmFyIGxpbmVTdHJpbmdzPVtdO2Zvcih2YXIgaT0wO2k8YXJyYXkubGVuZ3RoOysraSl7bGluZVN0cmluZ3MucHVzaCh0aGlzLnBhcnNlLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbYXJyYXlbaV1dKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyhsaW5lU3RyaW5ncyk7fSwnUG9seWdvbic6ZnVuY3Rpb24oYXJyYXkpe3ZhciBzaGVsbENvb3JkaW5hdGVzPXRoaXMucGFyc2UuY29vcmRpbmF0ZXMuYXBwbHkodGhpcyxbYXJyYXlbMF1dKTt2YXIgc2hlbGw9dGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhzaGVsbENvb3JkaW5hdGVzKTt2YXIgaG9sZXM9W107Zm9yKHZhciBpPTE7aTxhcnJheS5sZW5ndGg7KytpKXt2YXIgaG9sZT1hcnJheVtpXTt2YXIgY29vcmRpbmF0ZXM9dGhpcy5wYXJzZS5jb29yZGluYXRlcy5hcHBseSh0aGlzLFtob2xlXSk7dmFyIGxpbmVhclJpbmc9dGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhjb29yZGluYXRlcyk7aG9sZXMucHVzaChsaW5lYXJSaW5nKTt9XG5yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9seWdvbihzaGVsbCxob2xlcyk7fSwnTXVsdGlQb2x5Z29uJzpmdW5jdGlvbihhcnJheSl7dmFyIHBvbHlnb25zPVtdO2Zvcih2YXIgaT0wO2k8YXJyYXkubGVuZ3RoOysraSl7dmFyIHBvbHlnb249YXJyYXlbaV07cG9seWdvbnMucHVzaCh0aGlzLnBhcnNlLlBvbHlnb24uYXBwbHkodGhpcyxbcG9seWdvbl0pKTt9XG5yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKHBvbHlnb25zKTt9LCdHZW9tZXRyeUNvbGxlY3Rpb24nOmZ1bmN0aW9uKGFycmF5KXt2YXIgZ2VvbWV0cmllcz1bXTtmb3IodmFyIGk9MDtpPGFycmF5Lmxlbmd0aDsrK2kpe3ZhciBnZW9tZXRyeT1hcnJheVtpXTtnZW9tZXRyaWVzLnB1c2godGhpcy5yZWFkKGdlb21ldHJ5KSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihnZW9tZXRyaWVzKTt9fTtqc3RzLmlvLkdlb0pTT05QYXJzZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGdlb21ldHJ5KXt2YXIgdHlwZT1nZW9tZXRyeS5DTEFTU19OQU1FLnNsaWNlKDEwKTtpZighdGhpcy5leHRyYWN0W3R5cGVdKXt0aHJvdyBuZXcgRXJyb3IoJ0dlb21ldHJ5IGlzIG5vdCBzdXBwb3J0ZWQnKTt9XG5yZXR1cm4gdGhpcy5leHRyYWN0W3R5cGVdLmFwcGx5KHRoaXMsW2dlb21ldHJ5XSk7fTtqc3RzLmlvLkdlb0pTT05QYXJzZXIucHJvdG90eXBlLmV4dHJhY3Q9eydjb29yZGluYXRlJzpmdW5jdGlvbihjb29yZGluYXRlKXtyZXR1cm5bY29vcmRpbmF0ZS54LGNvb3JkaW5hdGUueV07fSwnUG9pbnQnOmZ1bmN0aW9uKHBvaW50KXt2YXIgYXJyYXk9dGhpcy5leHRyYWN0LmNvb3JkaW5hdGUuYXBwbHkodGhpcyxbcG9pbnQuY29vcmRpbmF0ZV0pO3JldHVybnt0eXBlOidQb2ludCcsY29vcmRpbmF0ZXM6YXJyYXl9O30sJ011bHRpUG9pbnQnOmZ1bmN0aW9uKG11bHRpcG9pbnQpe3ZhciBhcnJheT1bXTtmb3IodmFyIGk9MDtpPG11bHRpcG9pbnQuZ2VvbWV0cmllcy5sZW5ndGg7KytpKXt2YXIgcG9pbnQ9bXVsdGlwb2ludC5nZW9tZXRyaWVzW2ldO3ZhciBnZW9Kc29uPXRoaXMuZXh0cmFjdC5Qb2ludC5hcHBseSh0aGlzLFtwb2ludF0pO2FycmF5LnB1c2goZ2VvSnNvbi5jb29yZGluYXRlcyk7fVxucmV0dXJue3R5cGU6J011bHRpUG9pbnQnLGNvb3JkaW5hdGVzOmFycmF5fTt9LCdMaW5lU3RyaW5nJzpmdW5jdGlvbihsaW5lc3RyaW5nKXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTA7aTxsaW5lc3RyaW5nLnBvaW50cy5sZW5ndGg7KytpKXt2YXIgY29vcmRpbmF0ZT1saW5lc3RyaW5nLnBvaW50c1tpXTthcnJheS5wdXNoKHRoaXMuZXh0cmFjdC5jb29yZGluYXRlLmFwcGx5KHRoaXMsW2Nvb3JkaW5hdGVdKSk7fVxucmV0dXJue3R5cGU6J0xpbmVTdHJpbmcnLGNvb3JkaW5hdGVzOmFycmF5fTt9LCdNdWx0aUxpbmVTdHJpbmcnOmZ1bmN0aW9uKG11bHRpbGluZXN0cmluZyl7dmFyIGFycmF5PVtdO2Zvcih2YXIgaT0wO2k8bXVsdGlsaW5lc3RyaW5nLmdlb21ldHJpZXMubGVuZ3RoOysraSl7dmFyIGxpbmVzdHJpbmc9bXVsdGlsaW5lc3RyaW5nLmdlb21ldHJpZXNbaV07dmFyIGdlb0pzb249dGhpcy5leHRyYWN0LkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbbGluZXN0cmluZ10pO2FycmF5LnB1c2goZ2VvSnNvbi5jb29yZGluYXRlcyk7fVxucmV0dXJue3R5cGU6J011bHRpTGluZVN0cmluZycsY29vcmRpbmF0ZXM6YXJyYXl9O30sJ1BvbHlnb24nOmZ1bmN0aW9uKHBvbHlnb24pe3ZhciBhcnJheT1bXTt2YXIgc2hlbGxHZW9Kc29uPXRoaXMuZXh0cmFjdC5MaW5lU3RyaW5nLmFwcGx5KHRoaXMsW3BvbHlnb24uc2hlbGxdKTthcnJheS5wdXNoKHNoZWxsR2VvSnNvbi5jb29yZGluYXRlcyk7Zm9yKHZhciBpPTA7aTxwb2x5Z29uLmhvbGVzLmxlbmd0aDsrK2kpe3ZhciBob2xlPXBvbHlnb24uaG9sZXNbaV07dmFyIGhvbGVHZW9Kc29uPXRoaXMuZXh0cmFjdC5MaW5lU3RyaW5nLmFwcGx5KHRoaXMsW2hvbGVdKTthcnJheS5wdXNoKGhvbGVHZW9Kc29uLmNvb3JkaW5hdGVzKTt9XG5yZXR1cm57dHlwZTonUG9seWdvbicsY29vcmRpbmF0ZXM6YXJyYXl9O30sJ011bHRpUG9seWdvbic6ZnVuY3Rpb24obXVsdGlwb2x5Z29uKXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTA7aTxtdWx0aXBvbHlnb24uZ2VvbWV0cmllcy5sZW5ndGg7KytpKXt2YXIgcG9seWdvbj1tdWx0aXBvbHlnb24uZ2VvbWV0cmllc1tpXTt2YXIgZ2VvSnNvbj10aGlzLmV4dHJhY3QuUG9seWdvbi5hcHBseSh0aGlzLFtwb2x5Z29uXSk7YXJyYXkucHVzaChnZW9Kc29uLmNvb3JkaW5hdGVzKTt9XG5yZXR1cm57dHlwZTonTXVsdGlQb2x5Z29uJyxjb29yZGluYXRlczphcnJheX07fSwnR2VvbWV0cnlDb2xsZWN0aW9uJzpmdW5jdGlvbihjb2xsZWN0aW9uKXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTA7aTxjb2xsZWN0aW9uLmdlb21ldHJpZXMubGVuZ3RoOysraSl7dmFyIGdlb21ldHJ5PWNvbGxlY3Rpb24uZ2VvbWV0cmllc1tpXTt2YXIgdHlwZT1nZW9tZXRyeS5DTEFTU19OQU1FLnNsaWNlKDEwKTthcnJheS5wdXNoKHRoaXMuZXh0cmFjdFt0eXBlXS5hcHBseSh0aGlzLFtnZW9tZXRyeV0pKTt9XG5yZXR1cm57dHlwZTonR2VvbWV0cnlDb2xsZWN0aW9uJyxnZW9tZXRyaWVzOmFycmF5fTt9fTt9KSgpO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4PWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3RoaXMuaW5pdEZyb21Db29yZGluYXRlKGFyZ3VtZW50c1swXSk7fWVsc2V7dGhpcy5pbml0RnJvbVhZKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pO319O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LkxFRlQ9MDtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5SSUdIVD0xO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LkJFWU9ORD0yO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LkJFSElORD0zO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LkJFVFdFRU49NDtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5PUklHSU49NTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5ERVNUSU5BVElPTj02O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LnByb3RvdHlwZS5pbml0RnJvbVhZPWZ1bmN0aW9uKHgseSl7dGhpcy5wPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh4LHkpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmluaXRGcm9tQ29vcmRpbmF0ZT1mdW5jdGlvbihfcCl7dGhpcy5wPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShfcCk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuZ2V0WD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnAueDt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LnByb3RvdHlwZS5nZXRZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucC55O307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmdldFo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wLno7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuc2V0Wj1mdW5jdGlvbih6KXt0aGlzLnAuej16O307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmdldENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuJ1BPSU5UICgnK3RoaXMucC54KycgJyt0aGlzLnAueSsnKSc7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3JldHVybiB0aGlzLmVxdWFsc0V4YWN0KGFyZ3VtZW50c1swXSk7fWVsc2V7cmV0dXJuIHRoaXMuZXF1YWxzV2l0aFRvbGVyYW5jZShhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt9fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuZXF1YWxzRXhhY3Q9ZnVuY3Rpb24ob3RoZXIpe3JldHVybih0aGlzLnAueD09PW90aGVyLmdldFgoKSYmdGhpcy5wLnk9PT1vdGhlci5nZXRZKCkpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmVxdWFsc1dpdGhUb2xlcmFuY2U9ZnVuY3Rpb24ob3RoZXIsdG9sZXJhbmNlKXtyZXR1cm4odGhpcy5wLmRpc3RhbmNlKG90aGVyLmdldENvb3JkaW5hdGUoKSk8dG9sZXJhbmNlKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LnByb3RvdHlwZS5jbGFzc2lmeT1mdW5jdGlvbihwMCxwMSl7dmFyIHAyLGEsYixzYTtwMj10aGlzO2E9cDEuc3ViKHAwKTtiPXAyLnN1YihwMCk7c2E9YS5jcm9zc1Byb2R1Y3QoYik7aWYoc2E+MC4wKXtyZXR1cm4ganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXguTEVGVDt9XG5pZihzYTwwLjApe3JldHVybiBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5SSUdIVDt9XG5pZigoYS5nZXRYKCkqYi5nZXRYKCk8MC4wKXx8KGEuZ2V0WSgpKmIuZ2V0WSgpPDAuMCkpe3JldHVybiBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5CRUhJTkQ7fVxuaWYoYS5tYWduKCk8Yi5tYWduKCkpe3JldHVybiBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5CRVlPTkQ7fVxuaWYocDAuZXF1YWxzKHAyKSl7cmV0dXJuIGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4Lk9SSUdJTjt9XG5pZihwMS5lcXVhbHMocDIpKXtyZXR1cm4ganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXguREVTVElOQVRJT047fVxucmV0dXJuIGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LkJFVFdFRU47fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuY3Jvc3NQcm9kdWN0PWZ1bmN0aW9uKHYpe3JldHVybigodGhpcy5wLngqdi5nZXRZKCkpLSh0aGlzLnAueSp2LmdldFgoKSkpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmRvdD1mdW5jdGlvbih2KXtyZXR1cm4oKHRoaXMucC54KnYuZ2V0WCgpKSsodGhpcy5wLnkqdi5nZXRZKCkpKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LnByb3RvdHlwZS50aW1lcz1mdW5jdGlvbihjKXtyZXR1cm4gbmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4KGMqdGhpcy5wLngsYyp0aGlzLnAueSk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuc3VtPWZ1bmN0aW9uKHYpe3JldHVybiBuZXcganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgodGhpcy5wLngrdi5nZXRYKCksdGhpcy5wLnkrXG52LmdldFkoKSk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuc3ViPWZ1bmN0aW9uKHYpe3JldHVybiBuZXcganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgodGhpcy5wLngtdi5nZXRYKCksdGhpcy5wLnktXG52LmdldFkoKSk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUubWFnbj1mdW5jdGlvbigpe3JldHVybihNYXRoLnNxcnQoKHRoaXMucC54KnRoaXMucC54KSsodGhpcy5wLnkqdGhpcy5wLnkpKSk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuY3Jvc3M9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFZlcnRleCh0aGlzLnAueSwtdGhpcy5wLngpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmlzSW5DaXJjbGU9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlUHJlZGljYXRlLmlzSW5DaXJjbGVSb2J1c3QoYS5wLGIucCxjLnAsdGhpcy5wKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LnByb3RvdHlwZS5pc0NDVz1mdW5jdGlvbihiLGMpe3JldHVybigoYi5wLngtdGhpcy5wLngpKihjLnAueS10aGlzLnAueSktKGIucC55LXRoaXMucC55KSooYy5wLngtdGhpcy5wLngpPjApO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLnJpZ2h0T2Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNDQ1coZS5kZXN0KCksZS5vcmlnKCkpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmxlZnRPZj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pc0NDVyhlLm9yaWcoKSxlLmRlc3QoKSk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuYmlzZWN0b3I9ZnVuY3Rpb24oYSxiKXt2YXIgZHgsZHksbDEsbDI7ZHg9Yi5nZXRYKCktYS5nZXRYKCk7ZHk9Yi5nZXRZKCktYS5nZXRZKCk7bDE9bmV3IGpzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlKGEuZ2V0WCgpKyhkeC8yLjApLGEuZ2V0WSgpK1xuKGR5LzIuMCksMS4wKTtsMj1uZXcganN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUoYS5nZXRYKCktZHkrKGR4LzIuMCksYS5nZXRZKCkrXG5keCsoZHkvMi4wKSwxLjApO3JldHVybiBuZXcganN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUobDEsbDIpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKHYxLHYyKXtyZXR1cm4gdjEucC5kaXN0YW5jZSh2Mi5wKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LnByb3RvdHlwZS5jaXJjdW1SYWRpdXNSYXRpbz1mdW5jdGlvbihiLGMpe3ZhciB4LHJhZGl1cyxlZGdlTGVuZ3RoLGVsO3g9dGhpcy5jaXJjbGVDZW50ZXIoYixjKTtyYWRpdXM9dGhpcy5kaXN0YW5jZSh4LGIpO2VkZ2VMZW5ndGg9dGhpcy5kaXN0YW5jZSh0aGlzLGIpO2VsPXRoaXMuZGlzdGFuY2UoYixjKTtpZihlbDxlZGdlTGVuZ3RoKXtlZGdlTGVuZ3RoPWVsO31cbmVsPXRoaXMuZGlzdGFuY2UoYyx0aGlzKTtpZihlbDxlZGdlTGVuZ3RoKXtlZGdlTGVuZ3RoPWVsO31cbnJldHVybiByYWRpdXMvZWRnZUxlbmd0aDt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4LnByb3RvdHlwZS5taWRQb2ludD1mdW5jdGlvbihhKXt2YXIgeG0seW07eG09KHRoaXMucC54K2EuZ2V0WCgpKS8yLjA7eW09KHRoaXMucC55K2EuZ2V0WSgpKS8yLjA7cmV0dXJuIG5ldyBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleCh4bSx5bSk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleC5wcm90b3R5cGUuY2lyY2xlQ2VudGVyPWZ1bmN0aW9uKGIsYyl7dmFyIGEsY2FiLGNiYyxoY2MsY2M7YT1uZXcganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgodGhpcy5nZXRYKCksdGhpcy5nZXRZKCkpO2NhYj10aGlzLmJpc2VjdG9yKGEsYik7Y2JjPXRoaXMuYmlzZWN0b3IoYixjKTtoY2M9bmV3IGpzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlKGNhYixjYmMpO2NjPW51bGw7dHJ5e2NjPW5ldyBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleChoY2MuZ2V0WCgpLGhjYy5nZXRZKCkpO31jYXRjaChlcnIpe31cbnJldHVybiBjYzt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcD1mdW5jdGlvbihwYXJlbnRHZW9tZXRyeSl7dGhpcy5wYXJlbnRHZW9tZXRyeT1wYXJlbnRHZW9tZXRyeTt0aGlzLmlzU2VsZlRvdWNoaW5nUmluZ0Zvcm1pbmdIb2xlVmFsaWQ9ZmFsc2U7dGhpcy52YWxpZEVycj1udWxsO307anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLmlzVmFsaWQ9ZnVuY3Rpb24oYXJnKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGpzdHMuZ2VvbS5Db29yZGluYXRlKXtpZihpc05hTihhcmcueCkpe3JldHVybiBmYWxzZTt9XG5pZighaXNGaW5pdGUoYXJnLngpJiYhaXNOYU4oYXJnLngpKXtyZXR1cm4gZmFsc2U7fVxuaWYoaXNOYU4oYXJnLnkpKXtyZXR1cm4gZmFsc2U7fVxuaWYoIWlzRmluaXRlKGFyZy55KSYmIWlzTmFOKGFyZy55KSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiB0cnVlO31lbHNle3ZhciBpc1ZhbGlkT3A9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcChhcmcpO3JldHVybiBpc1ZhbGlkT3AuaXNWYWxpZCgpO319O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5maW5kUHROb3ROb2RlPWZ1bmN0aW9uKHRlc3RDb29yZHMsc2VhcmNoUmluZyxncmFwaCl7dmFyIHNlYXJjaEVkZ2U9Z3JhcGguZmluZEVkZ2Uoc2VhcmNoUmluZyk7dmFyIGVpTGlzdD1zZWFyY2hFZGdlLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCk7Zm9yKHZhciBpPTA7aTx0ZXN0Q29vcmRzLmxlbmd0aDtpKyspe3ZhciBwdD10ZXN0Q29vcmRzW2ldO2lmKCFlaUxpc3QuaXNJbnRlcnNlY3Rpb24ocHQpKXtyZXR1cm4gcHQ7fX1cbnJldHVybiBudWxsO307anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5zZXRTZWxmVG91Y2hpbmdSaW5nRm9ybWluZ0hvbGVWYWxpZD1mdW5jdGlvbihpc1ZhbGlkKXt0aGlzLmlzU2VsZlRvdWNoaW5nUmluZ0Zvcm1pbmdIb2xlVmFsaWQ9aXNWYWxpZDt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbigpe3RoaXMuY2hlY2tWYWxpZCh0aGlzLnBhcmVudEdlb21ldHJ5KTtyZXR1cm4gdGhpcy52YWxpZEVycj09bnVsbDt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuZ2V0VmFsaWRhdGlvbkVycm9yPWZ1bmN0aW9uKCl7dGhpcy5jaGVja1ZhbGlkKHRoaXMucGFyZW50R2VvbWV0cnkpO3JldHVybiB0aGlzLnZhbGlkRXJyO307anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5jaGVja1ZhbGlkPWZ1bmN0aW9uKGcpe3RoaXMudmFsaWRFcnI9bnVsbDtpZihnLmlzRW1wdHkoKSl7cmV0dXJuO31cbmlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnQpe3RoaXMuY2hlY2tWYWxpZFBvaW50KGcpO31lbHNlIGlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2ludCl7dGhpcy5jaGVja1ZhbGlkTXVsdGlQb2ludChnKTt9ZWxzZSBpZihnIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVhclJpbmcpe3RoaXMuY2hlY2tWYWxpZExpbmVhclJpbmcoZyk7fWVsc2UgaWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lU3RyaW5nKXt0aGlzLmNoZWNrVmFsaWRMaW5lU3RyaW5nKGcpO31lbHNlIGlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7dGhpcy5jaGVja1ZhbGlkUG9seWdvbihnKTt9ZWxzZSBpZihnIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7dGhpcy5jaGVja1ZhbGlkTXVsdGlQb2x5Z29uKGcpO31lbHNlIGlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKXt0aGlzLmNoZWNrVmFsaWRHZW9tZXRyeUNvbGxlY3Rpb24oZyk7fWVsc2V7dGhyb3cgZy5jb25zdHJ1Y3Rvcjt9fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AucHJvdG90eXBlLmNoZWNrVmFsaWRQb2ludD1mdW5jdGlvbihnKXt0aGlzLmNoZWNrSW52YWxpZENvb3JkaW5hdGVzKGcuZ2V0Q29vcmRpbmF0ZXMoKSk7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AucHJvdG90eXBlLmNoZWNrVmFsaWRNdWx0aVBvaW50PWZ1bmN0aW9uKGcpe3RoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMoZy5nZXRDb29yZGluYXRlcygpKTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tWYWxpZExpbmVTdHJpbmc9ZnVuY3Rpb24oZyl7dGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyhnLmdldENvb3JkaW5hdGVzKCkpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG52YXIgZ3JhcGg9bmV3IGpzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgoMCxnKTt0aGlzLmNoZWNrVG9vRmV3UG9pbnRzKGdyYXBoKTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tWYWxpZExpbmVhclJpbmc9ZnVuY3Rpb24oZyl7dGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyhnLmdldENvb3JkaW5hdGVzKCkpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG50aGlzLmNoZWNrQ2xvc2VkUmluZyhnKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fVxudmFyIGdyYXBoPW5ldyBqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoKDAsZyk7dGhpcy5jaGVja1Rvb0Zld1BvaW50cyhncmFwaCk7aWYodGhpcy52YWxpZEVyciE9bnVsbCl7cmV0dXJuO31cbnZhciBsaT1uZXcganN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yKCk7Z3JhcGguY29tcHV0ZVNlbGZOb2RlcyhsaSx0cnVlKTt0aGlzLmNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZ3MoZ3JhcGgpO307anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5jaGVja1ZhbGlkUG9seWdvbj1mdW5jdGlvbihnKXt0aGlzLmNoZWNrSW52YWxpZENvb3JkaW5hdGVzKGcpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG50aGlzLmNoZWNrQ2xvc2VkUmluZ3MoZyk7aWYodGhpcy52YWxpZEVyciE9bnVsbCl7cmV0dXJuO31cbnZhciBncmFwaD1uZXcganN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaCgwLGcpO3RoaXMuY2hlY2tUb29GZXdQb2ludHMoZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG50aGlzLmNoZWNrQ29uc2lzdGVudEFyZWEoZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG5pZighdGhpcy5pc1NlbGZUb3VjaGluZ1JpbmdGb3JtaW5nSG9sZVZhbGlkKXt0aGlzLmNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZ3MoZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9fVxudGhpcy5jaGVja0hvbGVzSW5TaGVsbChnLGdyYXBoKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fVxudGhpcy5jaGVja0hvbGVzTm90TmVzdGVkKGcsZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG50aGlzLmNoZWNrQ29ubmVjdGVkSW50ZXJpb3JzKGdyYXBoKTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tWYWxpZE11bHRpUG9seWdvbj1mdW5jdGlvbihnKXt2YXIgaWw9Zy5nZXROdW1HZW9tZXRyaWVzKCk7Zm9yKHZhciBpPTA7aTxpbDtpKyspe3ZhciBwPWcuZ2V0R2VvbWV0cnlOKGkpO3RoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMocCk7aWYodGhpcy52YWxpZEVyciE9bnVsbCl7cmV0dXJuO31cbnRoaXMuY2hlY2tDbG9zZWRSaW5ncyhwKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fX1cbnZhciBncmFwaD1uZXcganN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaCgwLGcpO3RoaXMuY2hlY2tUb29GZXdQb2ludHMoZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG50aGlzLmNoZWNrQ29uc2lzdGVudEFyZWEoZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9XG5pZighdGhpcy5pc1NlbGZUb3VjaGluZ1JpbmdGb3JtaW5nSG9sZVZhbGlkKXt0aGlzLmNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZ3MoZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9fVxuZm9yKHZhciBpPTA7aTxnLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciBwPWcuZ2V0R2VvbWV0cnlOKGkpO3RoaXMuY2hlY2tIb2xlc0luU2hlbGwocCxncmFwaCk7aWYodGhpcy52YWxpZEVyciE9bnVsbCl7cmV0dXJuO319XG5mb3IodmFyIGk9MDtpPGcuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIHA9Zy5nZXRHZW9tZXRyeU4oaSk7dGhpcy5jaGVja0hvbGVzTm90TmVzdGVkKHAsZ3JhcGgpO2lmKHRoaXMudmFsaWRFcnIhPW51bGwpe3JldHVybjt9fVxudGhpcy5jaGVja1NoZWxsc05vdE5lc3RlZChnLGdyYXBoKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fVxudGhpcy5jaGVja0Nvbm5lY3RlZEludGVyaW9ycyhncmFwaCk7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AucHJvdG90eXBlLmNoZWNrVmFsaWRHZW9tZXRyeUNvbGxlY3Rpb249ZnVuY3Rpb24oZ2Mpe2Zvcih2YXIgaT0wO2k8Z2MuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIGc9Z2MuZ2V0R2VvbWV0cnlOKGkpO3RoaXMuY2hlY2tWYWxpZChnKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXM9ZnVuY3Rpb24oYXJnKXtpZihhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7dmFyIHBvbHk9YXJnO3RoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMocG9seS5nZXRFeHRlcmlvclJpbmcoKS5nZXRDb29yZGluYXRlcygpKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fVxuZm9yKHZhciBpPTA7aTxwb2x5LmdldE51bUludGVyaW9yUmluZygpO2krKyl7dGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyhwb2x5LmdldEludGVyaW9yUmluZ04oaSkuZ2V0Q29vcmRpbmF0ZXMoKSk7aWYodGhpcy52YWxpZEVyciE9bnVsbCl7cmV0dXJuO319fWVsc2V7dmFyIGNvb3Jkcz1hcmc7Zm9yKHZhciBpPTA7aTxjb29yZHMubGVuZ3RoO2krKyl7aWYoIWpzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5pc1ZhbGlkKGNvb3Jkc1tpXSkpe3RoaXMudmFsaWRFcnI9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yKGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLklOVkFMSURfQ09PUkRJTkFURSxjb29yZHNbaV0pO3JldHVybjt9fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tDbG9zZWRSaW5ncz1mdW5jdGlvbihwb2x5KXt0aGlzLmNoZWNrQ2xvc2VkUmluZyhwb2x5LmdldEV4dGVyaW9yUmluZygpKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fVxuZm9yKHZhciBpPTA7aTxwb2x5LmdldE51bUludGVyaW9yUmluZygpO2krKyl7dGhpcy5jaGVja0Nsb3NlZFJpbmcocG9seS5nZXRJbnRlcmlvclJpbmdOKGkpKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tDbG9zZWRSaW5nPWZ1bmN0aW9uKHJpbmcpe2lmKCFyaW5nLmlzQ2xvc2VkKCkpe3ZhciBwdD1udWxsO2lmKHJpbmcuZ2V0TnVtUG9pbnRzKCk+PTEpe3B0PXJpbmcuZ2V0Q29vcmRpbmF0ZU4oMCk7fVxudGhpcy52YWxpZEVycj1uZXcganN0cy5vcGVyYXRpb24udmFsaWQuVG9wb2xvZ3lWYWxpZGF0aW9uRXJyb3IoanN0cy5vcGVyYXRpb24udmFsaWQuVG9wb2xvZ3lWYWxpZGF0aW9uRXJyb3IuUklOR19OT1RfQ0xPU0VELHB0KTt9fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AucHJvdG90eXBlLmNoZWNrVG9vRmV3UG9pbnRzPWZ1bmN0aW9uKGdyYXBoKXtpZihncmFwaC5oYXNUb29GZXdQb2ludHMpe3RoaXMudmFsaWRFcnI9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yKGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLlRPT19GRVdfUE9JTlRTLGdyYXBoLmdldEludmFsaWRQb2ludCgpKTtyZXR1cm47fX07anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5jaGVja0NvbnNpc3RlbnRBcmVhPWZ1bmN0aW9uKGdyYXBoKXt2YXIgY2F0PW5ldyBqc3RzLm9wZXJhdGlvbi52YWxpZC5Db25zaXN0ZW50QXJlYVRlc3RlcihncmFwaCk7dmFyIGlzVmFsaWRBcmVhPWNhdC5pc05vZGVDb25zaXN0ZW50QXJlYSgpO2lmKCFpc1ZhbGlkQXJlYSl7dGhpcy52YWxpZEVycj1uZXcganN0cy5vcGVyYXRpb24udmFsaWQuVG9wb2xvZ3lWYWxpZGF0aW9uRXJyb3IoanN0cy5vcGVyYXRpb24udmFsaWQuVG9wb2xvZ3lWYWxpZGF0aW9uRXJyb3IuU0VMRl9JTlRFUlNFQ1RJT04sY2F0LmdldEludmFsaWRQb2ludCgpKTtyZXR1cm47fVxuaWYoY2F0Lmhhc0R1cGxpY2F0ZVJpbmdzKCkpe3RoaXMudmFsaWRFcnI9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yKGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLkRVUExJQ0FURV9SSU5HUyxjYXQuZ2V0SW52YWxpZFBvaW50KCkpO319O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tOb1NlbGZJbnRlcnNlY3RpbmdSaW5ncz1mdW5jdGlvbihncmFwaCl7Zm9yKHZhciBpPWdyYXBoLmdldEVkZ2VJdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGU9aS5uZXh0KCk7dGhpcy5jaGVja05vU2VsZkludGVyc2VjdGluZ1JpbmcoZS5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdCgpKTtpZih0aGlzLnZhbGlkRXJyIT1udWxsKXtyZXR1cm47fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tOb1NlbGZJbnRlcnNlY3RpbmdSaW5nPWZ1bmN0aW9uKGVpTGlzdCl7dmFyIG5vZGVTZXQ9W107dmFyIGlzRmlyc3Q9dHJ1ZTtmb3IodmFyIGk9ZWlMaXN0Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZWk9aS5uZXh0KCk7aWYoaXNGaXJzdCl7aXNGaXJzdD1mYWxzZTtjb250aW51ZTt9XG5pZihub2RlU2V0LmluZGV4T2YoZWkuY29vcmQpPj0wKXt0aGlzLnZhbGlkRXJyPW5ldyBqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvcihqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvci5SSU5HX1NFTEZfSU5URVJTRUNUSU9OLGVpLmNvb3JkKTtyZXR1cm47fWVsc2V7bm9kZVNldC5wdXNoKGVpLmNvb3JkKTt9fX07anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5jaGVja0hvbGVzSW5TaGVsbD1mdW5jdGlvbihwLGdyYXBoKXt2YXIgc2hlbGw9cC5nZXRFeHRlcmlvclJpbmcoKTt2YXIgcGlyPW5ldyBqc3RzLmFsZ29yaXRobS5NQ1BvaW50SW5SaW5nKHNoZWxsKTtmb3IodmFyIGk9MDtpPHAuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7aSsrKXt2YXIgaG9sZT1wLmdldEludGVyaW9yUmluZ04oaSk7dmFyIGhvbGVQdD1qc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AuZmluZFB0Tm90Tm9kZShob2xlLmdldENvb3JkaW5hdGVzKCksc2hlbGwsZ3JhcGgpO2lmKGhvbGVQdD09bnVsbCl7cmV0dXJuO31cbnZhciBvdXRzaWRlPSFwaXIuaXNJbnNpZGUoaG9sZVB0KTtpZihvdXRzaWRlKXt0aGlzLnZhbGlkRXJyPW5ldyBqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvcihqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvci5IT0xFX09VVFNJREVfU0hFTEwsaG9sZVB0KTtyZXR1cm47fX19O2pzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5wcm90b3R5cGUuY2hlY2tIb2xlc05vdE5lc3RlZD1mdW5jdGlvbihwLGdyYXBoKXt2YXIgbmVzdGVkVGVzdGVyPW5ldyBqc3RzLm9wZXJhdGlvbi52YWxpZC5JbmRleGVkTmVzdGVkUmluZ1Rlc3RlcihncmFwaCk7Zm9yKHZhciBpPTA7aTxwLmdldE51bUludGVyaW9yUmluZygpO2krKyl7dmFyIGlubmVySG9sZT1wLmdldEludGVyaW9yUmluZ04oaSk7bmVzdGVkVGVzdGVyLmFkZChpbm5lckhvbGUpO31cbnZhciBpc05vbk5lc3RlZD1uZXN0ZWRUZXN0ZXIuaXNOb25OZXN0ZWQoKTtpZighaXNOb25OZXN0ZWQpe3RoaXMudmFsaWRFcnI9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yKGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLk5FU1RFRF9IT0xFUyxuZXN0ZWRUZXN0ZXIuZ2V0TmVzdGVkUG9pbnQoKSk7fX07anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5jaGVja1NoZWxsc05vdE5lc3RlZD1mdW5jdGlvbihtcCxncmFwaCl7Zm9yKHZhciBpPTA7aTxtcC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcD1tcC5nZXRHZW9tZXRyeU4oaSk7dmFyIHNoZWxsPXAuZ2V0RXh0ZXJpb3JSaW5nKCk7Zm9yKHZhciBqPTA7ajxtcC5nZXROdW1HZW9tZXRyaWVzKCk7aisrKXtpZihpPT1qKXtjb250aW51ZTt9XG52YXIgcDI9bXAuZ2V0R2VvbWV0cnlOKGopO3RoaXMuY2hlY2tTaGVsbE5vdE5lc3RlZChzaGVsbCxwMixncmFwaCk7aWYodGhpcy52YWxpZEVyciE9bnVsbCl7cmV0dXJuO319fX07anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5jaGVja1NoZWxsTm90TmVzdGVkPWZ1bmN0aW9uKHNoZWxsLHAsZ3JhcGgpe3ZhciBzaGVsbFB0cz1zaGVsbC5nZXRDb29yZGluYXRlcygpO3ZhciBwb2x5U2hlbGw9cC5nZXRFeHRlcmlvclJpbmcoKTt2YXIgcG9seVB0cz1wb2x5U2hlbGwuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgc2hlbGxQdD1qc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AuZmluZFB0Tm90Tm9kZShzaGVsbFB0cyxwb2x5U2hlbGwsZ3JhcGgpO2lmKHNoZWxsUHQ9PW51bGwpe3JldHVybjt9XG52YXIgaW5zaWRlUG9seVNoZWxsPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5pc1BvaW50SW5SaW5nKHNoZWxsUHQscG9seVB0cyk7aWYoIWluc2lkZVBvbHlTaGVsbCl7cmV0dXJuO31cbmlmKHAuZ2V0TnVtSW50ZXJpb3JSaW5nKCk8PTApe3RoaXMudmFsaWRFcnI9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yKGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLk5FU1RFRF9TSEVMTFMsc2hlbGxQdCk7cmV0dXJuO31cbnZhciBiYWROZXN0ZWRQdD1udWxsO2Zvcih2YXIgaT0wO2k8cC5nZXROdW1JbnRlcmlvclJpbmcoKTtpKyspe3ZhciBob2xlPXAuZ2V0SW50ZXJpb3JSaW5nTihpKTtiYWROZXN0ZWRQdD10aGlzLmNoZWNrU2hlbGxJbnNpZGVIb2xlKHNoZWxsLGhvbGUsZ3JhcGgpO2lmKGJhZE5lc3RlZFB0PT1udWxsKXtyZXR1cm47fX1cbnRoaXMudmFsaWRFcnI9bmV3IGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yKGpzdHMub3BlcmF0aW9uLnZhbGlkLlRvcG9sb2d5VmFsaWRhdGlvbkVycm9yLk5FU1RFRF9TSEVMTFMsYmFkTmVzdGVkUHQpO307anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLnByb3RvdHlwZS5jaGVja1NoZWxsSW5zaWRlSG9sZT1mdW5jdGlvbihzaGVsbCxob2xlLGdyYXBoKXt2YXIgc2hlbGxQdHM9c2hlbGwuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgaG9sZVB0cz1ob2xlLmdldENvb3JkaW5hdGVzKCk7dmFyIHNoZWxsUHQ9anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLmZpbmRQdE5vdE5vZGUoc2hlbGxQdHMsaG9sZSxncmFwaCk7aWYoc2hlbGxQdCE9bnVsbCl7dmFyIGluc2lkZUhvbGU9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzUG9pbnRJblJpbmcoc2hlbGxQdCxob2xlUHRzKTtpZighaW5zaWRlSG9sZSl7cmV0dXJuIHNoZWxsUHQ7fX1cbnZhciBob2xlUHQ9anN0cy5vcGVyYXRpb24udmFsaWQuSXNWYWxpZE9wLmZpbmRQdE5vdE5vZGUoaG9sZVB0cyxzaGVsbCxncmFwaCk7aWYoaG9sZVB0IT1udWxsKXt2YXIgaW5zaWRlU2hlbGw9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzUG9pbnRJblJpbmcoaG9sZVB0LHNoZWxsUHRzKTtpZihpbnNpZGVTaGVsbCl7cmV0dXJuIGhvbGVQdDt9XG5yZXR1cm4gbnVsbDt9XG5qc3RzLnV0aWwuQXNzZXJ0LnNob3VsZE5ldmVyUmVhY2hIZXJlKCdwb2ludHMgaW4gc2hlbGwgYW5kIGhvbGUgYXBwZWFyIHRvIGJlIGVxdWFsJyk7cmV0dXJuIG51bGw7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Jc1ZhbGlkT3AucHJvdG90eXBlLmNoZWNrQ29ubmVjdGVkSW50ZXJpb3JzPWZ1bmN0aW9uKGdyYXBoKXt2YXIgY2l0PW5ldyBqc3RzLm9wZXJhdGlvbi52YWxpZC5Db25uZWN0ZWRJbnRlcmlvclRlc3RlcihncmFwaCk7aWYoIWNpdC5pc0ludGVyaW9yc0Nvbm5lY3RlZCgpKXt0aGlzLnZhbGlkRXJyPW5ldyBqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvcihqc3RzLm9wZXJhdGlvbi52YWxpZC5Ub3BvbG9neVZhbGlkYXRpb25FcnJvci5ESVNDT05ORUNURURfSU5URVJJT1IsY2l0LmdldENvb3JkaW5hdGUoKSk7fX07anN0cy5hbGdvcml0aG0uUm9idXN0RGV0ZXJtaW5hbnQ9ZnVuY3Rpb24oKXt9O2pzdHMuYWxnb3JpdGhtLlJvYnVzdERldGVybWluYW50LnNpZ25PZkRldDJ4Mj1mdW5jdGlvbih4MSx5MSx4Mix5Mil7dmFyIHNpZ24sc3dhcCxrLGNvdW50O2NvdW50PTA7c2lnbj0xO2lmKCh4MT09PTAuMCl8fCh5Mj09PTAuMCkpe2lmKCh5MT09PTAuMCl8fCh4Mj09PTAuMCkpe3JldHVybiAwO31cbmVsc2UgaWYoeTE+MCl7aWYoeDI+MCl7cmV0dXJuLXNpZ247fVxuZWxzZXtyZXR1cm4gc2lnbjt9fVxuZWxzZXtpZih4Mj4wKXtyZXR1cm4gc2lnbjt9XG5lbHNle3JldHVybi1zaWduO319fVxuaWYoKHkxPT09MC4wKXx8KHgyPT09MC4wKSl7aWYoeTI+MCl7aWYoeDE+MCl7cmV0dXJuIHNpZ247fVxuZWxzZXtyZXR1cm4tc2lnbjt9fVxuZWxzZXtpZih4MT4wKXtyZXR1cm4tc2lnbjt9XG5lbHNle3JldHVybiBzaWduO319fVxuaWYoMC4wPHkxKXtpZigwLjA8eTIpe2lmKHkxPnkyKXtzaWduPS1zaWduO3N3YXA9eDE7eDE9eDI7eDI9c3dhcDtzd2FwPXkxO3kxPXkyO3kyPXN3YXA7fX1cbmVsc2V7aWYoeTE8PS15Mil7c2lnbj0tc2lnbjt4Mj0teDI7eTI9LXkyO31cbmVsc2V7c3dhcD14MTt4MT0teDI7eDI9c3dhcDtzd2FwPXkxO3kxPS15Mjt5Mj1zd2FwO319fVxuZWxzZXtpZigwLjA8eTIpe2lmKC15MTw9eTIpe3NpZ249LXNpZ247eDE9LXgxO3kxPS15MTt9XG5lbHNle3N3YXA9LXgxO3gxPXgyO3gyPXN3YXA7c3dhcD0teTE7eTE9eTI7eTI9c3dhcDt9fVxuZWxzZXtpZih5MT49eTIpe3gxPS14MTt5MT0teTE7eDI9LXgyO3kyPS15Mjt9XG5lbHNle3NpZ249LXNpZ247c3dhcD0teDE7eDE9LXgyO3gyPXN3YXA7c3dhcD0teTE7eTE9LXkyO3kyPXN3YXA7fX19XG5pZigwLjA8eDEpe2lmKDAuMDx4Mil7aWYoeDE+eDIpe3JldHVybiBzaWduO319XG5lbHNle3JldHVybiBzaWduO319XG5lbHNle2lmKDAuMDx4Mil7cmV0dXJuLXNpZ247fVxuZWxzZXtpZih4MT49eDIpe3NpZ249LXNpZ247eDE9LXgxO3gyPS14Mjt9XG5lbHNle3JldHVybi1zaWduO319fVxud2hpbGUodHJ1ZSl7Y291bnQ9Y291bnQrMTtrPU1hdGguZmxvb3IoeDIveDEpO3gyPXgyLWsqeDE7eTI9eTItayp5MTtpZih5MjwwLjApe3JldHVybi1zaWduO31cbmlmKHkyPnkxKXtyZXR1cm4gc2lnbjt9XG5pZih4MT54Mit4Mil7aWYoeTE8eTIreTIpe3JldHVybiBzaWduO319XG5lbHNle2lmKHkxPnkyK3kyKXtyZXR1cm4tc2lnbjt9XG5lbHNle3gyPXgxLXgyO3kyPXkxLXkyO3NpZ249LXNpZ247fX1cbmlmKHkyPT09MC4wKXtpZih4Mj09PTAuMCl7cmV0dXJuIDA7fVxuZWxzZXtyZXR1cm4tc2lnbjt9fVxuaWYoeDI9PT0wLjApe3JldHVybiBzaWduO31cbms9TWF0aC5mbG9vcih4MS94Mik7eDE9eDEtayp4Mjt5MT15MS1rKnkyO2lmKHkxPDAuMCl7cmV0dXJuIHNpZ247fVxuaWYoeTE+eTIpe3JldHVybi1zaWduO31cbmlmKHgyPngxK3gxKXtpZih5Mjx5MSt5MSl7cmV0dXJuLXNpZ247fX1cbmVsc2V7aWYoeTI+eTEreTEpe3JldHVybiBzaWduO31cbmVsc2V7eDE9eDIteDE7eTE9eTIteTE7c2lnbj0tc2lnbjt9fVxuaWYoeTE9PT0wLjApe2lmKHgxPT09MC4wKXtyZXR1cm4gMDt9XG5lbHNle3JldHVybiBzaWduO319XG5pZih4MT09PTAuMCl7cmV0dXJuLXNpZ247fX19O2pzdHMuYWxnb3JpdGhtLlJvYnVzdERldGVybWluYW50Lm9yaWVudGF0aW9uSW5kZXg9ZnVuY3Rpb24ocDEscDIscSl7dmFyIGR4MT1wMi54LXAxLng7dmFyIGR5MT1wMi55LXAxLnk7dmFyIGR4Mj1xLngtcDIueDt2YXIgZHkyPXEueS1wMi55O3JldHVybiBqc3RzLmFsZ29yaXRobS5Sb2J1c3REZXRlcm1pbmFudC5zaWduT2ZEZXQyeDIoZHgxLGR5MSxkeDIsZHkyKTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZUJhc2U9ZnVuY3Rpb24oKXt0aGlzLnN1Ym5vZGU9bmV3IEFycmF5KDQpO3RoaXMuc3Vibm9kZVswXT1udWxsO3RoaXMuc3Vibm9kZVsxXT1udWxsO3RoaXMuc3Vibm9kZVsyXT1udWxsO3RoaXMuc3Vibm9kZVszXT1udWxsO3RoaXMuaXRlbXM9W107fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGVCYXNlLnByb3RvdHlwZS5nZXRTdWJub2RlSW5kZXg9ZnVuY3Rpb24oZW52LGNlbnRyZSl7dmFyIHN1Ym5vZGVJbmRleD0tMTtpZihlbnYuZ2V0TWluWCgpPj1jZW50cmUueCl7aWYoZW52LmdldE1pblkoKT49Y2VudHJlLnkpe3N1Ym5vZGVJbmRleD0zO31cbmlmKGVudi5nZXRNYXhZKCk8PWNlbnRyZS55KXtzdWJub2RlSW5kZXg9MTt9fVxuaWYoZW52LmdldE1heFgoKTw9Y2VudHJlLngpe2lmKGVudi5nZXRNaW5ZKCk+PWNlbnRyZS55KXtzdWJub2RlSW5kZXg9Mjt9XG5pZihlbnYuZ2V0TWF4WSgpPD1jZW50cmUueSl7c3Vibm9kZUluZGV4PTA7fX1cbnJldHVybiBzdWJub2RlSW5kZXg7fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGVCYXNlLnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZS5wcm90b3R5cGUuaGFzSXRlbXM9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5pdGVtcy5sZW5ndGg+MCk7fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGVCYXNlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oaXRlbSl7dGhpcy5pdGVtcy5wdXNoKGl0ZW0pO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGl0ZW1FbnYsaXRlbSl7aWYoIXRoaXMuaXNTZWFyY2hNYXRjaChpdGVtRW52KSl7cmV0dXJuIGZhbHNlO31cbnZhciBmb3VuZD1mYWxzZSxpPTA7Zm9yKGk7aTw0O2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7Zm91bmQ9dGhpcy5zdWJub2RlW2ldLnJlbW92ZShpdGVtRW52LGl0ZW0pO2lmKGZvdW5kKXtpZih0aGlzLnN1Ym5vZGVbaV0uaXNQcnVuYWJsZSgpKXt0aGlzLnN1Ym5vZGVbaV09bnVsbDt9XG5icmVhazt9fX1cbmlmKGZvdW5kKXtyZXR1cm4gZm91bmQ7fVxuaWYodGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pIT09LTEpe2Zvcih2YXIgaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKXtpZih0aGlzLml0ZW1zW2ldPT09aXRlbSl7dGhpcy5pdGVtcy5zcGxpY2UoaSwxKTt9fVxuZm91bmQ9dHJ1ZTt9XG5yZXR1cm4gZm91bmQ7fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGVCYXNlLnByb3RvdHlwZS5pc1BydW5hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLmhhc0NoaWxkcmVuKCl8fHRoaXMuaGFzSXRlbXMoKSk7fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGVCYXNlLnByb3RvdHlwZS5oYXNDaGlsZHJlbj1mdW5jdGlvbigpe3ZhciBpPTA7Zm9yKGk7aTw0O2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7cmV0dXJuIHRydWU7fX1cbnJldHVybiBmYWxzZTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZUJhc2UucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXt2YXIgaXNFbXB0eT10cnVlO2lmKHRoaXMuaXRlbXMubGVuZ3RoPjApe2lzRW1wdHk9ZmFsc2U7fVxudmFyIGk9MDtmb3IoaTtpPDQ7aSsrKXtpZih0aGlzLnN1Ym5vZGVbaV0hPT1udWxsKXtpZighdGhpcy5zdWJub2RlW2ldLmlzRW1wdHkoKSl7aXNFbXB0eT1mYWxzZTt9fX1cbnJldHVybiBpc0VtcHR5O307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZS5wcm90b3R5cGUuYWRkQWxsSXRlbXM9ZnVuY3Rpb24ocmVzdWx0SXRlbXMpe3Jlc3VsdEl0ZW1zPXJlc3VsdEl0ZW1zLmNvbmNhdCh0aGlzLml0ZW1zKTt2YXIgaT0wO2ZvcihpO2k8NDtpKyspe2lmKHRoaXMuc3Vibm9kZVtpXSE9PW51bGwpe3Jlc3VsdEl0ZW1zPXRoaXMuc3Vibm9kZVtpXS5hZGRBbGxJdGVtcyhyZXN1bHRJdGVtcyk7fX1cbnJldHVybiByZXN1bHRJdGVtczt9O2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZUJhc2UucHJvdG90eXBlLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nPWZ1bmN0aW9uKHNlYXJjaEVudixyZXN1bHRJdGVtcyl7aWYoIXRoaXMuaXNTZWFyY2hNYXRjaChzZWFyY2hFbnYpKXtyZXR1cm47fVxucmVzdWx0SXRlbXM9cmVzdWx0SXRlbXMuY29uY2F0KHRoaXMuaXRlbXMpO3ZhciBpPTA7Zm9yKGk7aTw0O2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7cmVzdWx0SXRlbXM9dGhpcy5zdWJub2RlW2ldLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nKHNlYXJjaEVudixyZXN1bHRJdGVtcyk7fX19O2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZUJhc2UucHJvdG90eXBlLnZpc2l0PWZ1bmN0aW9uKHNlYXJjaEVudix2aXNpdG9yKXtpZighdGhpcy5pc1NlYXJjaE1hdGNoKHNlYXJjaEVudikpe3JldHVybjt9XG50aGlzLnZpc2l0SXRlbXMoc2VhcmNoRW52LHZpc2l0b3IpO3ZhciBpPTA7Zm9yKGk7aTw0O2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7dGhpcy5zdWJub2RlW2ldLnZpc2l0KHNlYXJjaEVudix2aXNpdG9yKTt9fX07anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZS5wcm90b3R5cGUudmlzaXRJdGVtcz1mdW5jdGlvbihlbnYsdmlzaXRvcil7dmFyIGk9MCxpbD10aGlzLml0ZW1zLmxlbmd0aDtmb3IoaTtpPGlsO2krKyl7dmlzaXRvci52aXNpdEl0ZW0odGhpcy5pdGVtc1tpXSk7fX07anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZS5wcm90b3R5cGUuZGVwdGg9ZnVuY3Rpb24oKXt2YXIgbWF4U3ViRGVwdGg9MCxpPTAsc3FkO2ZvcihpO2k8NDtpKyspe2lmKHRoaXMuc3Vibm9kZVtpXSE9PW51bGwpe3NxZD10aGlzLnN1Ym5vZGVbaV0uZGVwdGgoKTtpZihzcWQ+bWF4U3ViRGVwdGgpe21heFN1YkRlcHRoPXNxZDt9fX1cbnJldHVybiBtYXhTdWJEZXB0aCsxO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3ZhciBzdWJTaXplPTAsaT0wO2ZvcihpO2k8NDtpKyspe2lmKHRoaXMuc3Vibm9kZVtpXSE9PW51bGwpe3N1YlNpemUrPXRoaXMuc3Vibm9kZVtpXS5zaXplKCk7fX1cbnJldHVybiBzdWJTaXplK3RoaXMuaXRlbXMubGVuZ3RoO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZS5wcm90b3R5cGUuZ2V0Tm9kZUNvdW50PWZ1bmN0aW9uKCl7dmFyIHN1YlNpemU9MCxpPTA7Zm9yKGk7aTw0O2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7c3ViU2l6ZSs9dGhpcy5zdWJub2RlW2ldLnNpemUoKTt9fVxucmV0dXJuIHN1YlNpemUrMTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZT1mdW5jdGlvbihlbnYsbGV2ZWwpe2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZUJhc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVudj1lbnY7dGhpcy5sZXZlbD1sZXZlbDt0aGlzLmNlbnRyZT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTt0aGlzLmNlbnRyZS54PShlbnYuZ2V0TWluWCgpK2Vudi5nZXRNYXhYKCkpLzI7dGhpcy5jZW50cmUueT0oZW52LmdldE1pblkoKStlbnYuZ2V0TWF4WSgpKS8yO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlLnByb3RvdHlwZT1uZXcganN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZSgpO2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZS5jcmVhdGVOb2RlPWZ1bmN0aW9uKGVudil7dmFyIGtleSxub2RlO2tleT1uZXcganN0cy5pbmRleC5xdWFkdHJlZS5LZXkoZW52KTtub2RlPW5ldyBqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGUoa2V5LmdldEVudmVsb3BlKCksa2V5LmdldExldmVsKCkpO3JldHVybiBub2RlO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlLmNyZWF0ZUV4cGFuZGVkPWZ1bmN0aW9uKG5vZGUsYWRkRW52KXt2YXIgZXhwYW5kRW52PW5ldyBqc3RzLmdlb20uRW52ZWxvcGUoYWRkRW52KSxsYXJnZXJOb2RlO2lmKG5vZGUhPT1udWxsKXtleHBhbmRFbnYuZXhwYW5kVG9JbmNsdWRlKG5vZGUuZW52KTt9XG5sYXJnZXJOb2RlPWpzdHMuaW5kZXgucXVhZHRyZWUuTm9kZS5jcmVhdGVOb2RlKGV4cGFuZEVudik7aWYobm9kZSE9PW51bGwpe2xhcmdlck5vZGUuaW5zZXJ0Tm9kZShub2RlKTt9XG5yZXR1cm4gbGFyZ2VyTm9kZTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZS5wcm90b3R5cGUuZ2V0RW52ZWxvcGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbnY7fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGUucHJvdG90eXBlLmlzU2VhcmNoTWF0Y2g9ZnVuY3Rpb24oc2VhcmNoRW52KXtyZXR1cm4gdGhpcy5lbnYuaW50ZXJzZWN0cyhzZWFyY2hFbnYpO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKHNlYXJjaEVudil7dmFyIHN1Ym5vZGVJbmRleD10aGlzLmdldFN1Ym5vZGVJbmRleChzZWFyY2hFbnYsdGhpcy5jZW50cmUpLG5vZGU7aWYoc3Vibm9kZUluZGV4IT09LTEpe25vZGU9dGhpcy5nZXRTdWJub2RlKHN1Ym5vZGVJbmRleCk7cmV0dXJuIG5vZGUuZ2V0Tm9kZShzZWFyY2hFbnYpO31lbHNle3JldHVybiB0aGlzO319O2pzdHMuaW5kZXgucXVhZHRyZWUuTm9kZS5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihzZWFyY2hFbnYpe3ZhciBzdWJub2RlSW5kZXg9dGhpcy5nZXRTdWJub2RlSW5kZXgoc2VhcmNoRW52LHRoaXMuY2VudHJlKSxub2RlO2lmKHN1Ym5vZGVJbmRleD09PS0xKXtyZXR1cm4gdGhpczt9XG5pZih0aGlzLnN1Ym5vZGVbc3Vibm9kZUluZGV4XSE9PW51bGwpe25vZGU9dGhpcy5zdWJub2RlW3N1Ym5vZGVJbmRleF07cmV0dXJuIG5vZGUuZmluZChzZWFyY2hFbnYpO31cbnJldHVybiB0aGlzO307anN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlLnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKG5vZGUpe3ZhciBpbmRleD10aGlzLmdldFN1Ym5vZGVJbmRleChub2RlLmVudix0aGlzLmNlbnRyZSksY2hpbGROb2RlO2lmKG5vZGUubGV2ZWw9PT10aGlzLmxldmVsLTEpe3RoaXMuc3Vibm9kZVtpbmRleF09bm9kZTt9ZWxzZXtjaGlsZE5vZGU9dGhpcy5jcmVhdGVTdWJub2RlKGluZGV4KTtjaGlsZE5vZGUuaW5zZXJ0Tm9kZShub2RlKTt0aGlzLnN1Ym5vZGVbaW5kZXhdPWNoaWxkTm9kZTt9fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGUucHJvdG90eXBlLmdldFN1Ym5vZGU9ZnVuY3Rpb24oaW5kZXgpe2lmKHRoaXMuc3Vibm9kZVtpbmRleF09PT1udWxsKXt0aGlzLnN1Ym5vZGVbaW5kZXhdPXRoaXMuY3JlYXRlU3Vibm9kZShpbmRleCk7fVxucmV0dXJuIHRoaXMuc3Vibm9kZVtpbmRleF07fTtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGUucHJvdG90eXBlLmNyZWF0ZVN1Ym5vZGU9ZnVuY3Rpb24oaW5kZXgpe3ZhciBtaW54PTAuMCxtYXh4PTAuMCxtaW55PTAuMCxtYXh5PTAuMCxzcUVudixub2RlO3N3aXRjaChpbmRleCl7Y2FzZSAwOm1pbng9dGhpcy5lbnYuZ2V0TWluWCgpO21heHg9dGhpcy5jZW50cmUueDttaW55PXRoaXMuZW52LmdldE1pblkoKTttYXh5PXRoaXMuY2VudHJlLnk7YnJlYWs7Y2FzZSAxOm1pbng9dGhpcy5jZW50cmUueDttYXh4PXRoaXMuZW52LmdldE1heFgoKTttaW55PXRoaXMuZW52LmdldE1pblkoKTttYXh5PXRoaXMuY2VudHJlLnk7YnJlYWs7Y2FzZSAyOm1pbng9dGhpcy5lbnYuZ2V0TWluWCgpO21heHg9dGhpcy5jZW50cmUueDttaW55PXRoaXMuY2VudHJlLnk7bWF4eT10aGlzLmVudi5nZXRNYXhZKCk7YnJlYWs7Y2FzZSAzOm1pbng9dGhpcy5jZW50cmUueDttYXh4PXRoaXMuZW52LmdldE1heFgoKTttaW55PXRoaXMuY2VudHJlLnk7bWF4eT10aGlzLmVudi5nZXRNYXhZKCk7YnJlYWs7fVxuc3FFbnY9bmV3IGpzdHMuZ2VvbS5FbnZlbG9wZShtaW54LG1heHgsbWlueSxtYXh5KTtub2RlPW5ldyBqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGUoc3FFbnYsdGhpcy5sZXZlbC0xKTtyZXR1cm4gbm9kZTt9OyhmdW5jdGlvbigpe2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2U9ZnVuY3Rpb24oKXt0aGlzLnJvdD1udWxsO3RoaXMudmVydGV4PW51bGw7dGhpcy5uZXh0PW51bGw7dGhpcy5kYXRhPW51bGw7fTt2YXIgUXVhZEVkZ2U9anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLm1ha2VFZGdlPWZ1bmN0aW9uKG8sZCl7dmFyIHEwLHExLHEyLHEzLGJhc2U7cTA9bmV3IFF1YWRFZGdlKCk7cTE9bmV3IFF1YWRFZGdlKCk7cTI9bmV3IFF1YWRFZGdlKCk7cTM9bmV3IFF1YWRFZGdlKCk7cTAucm90PXExO3ExLnJvdD1xMjtxMi5yb3Q9cTM7cTMucm90PXEwO3EwLnNldE5leHQocTApO3ExLnNldE5leHQocTMpO3EyLnNldE5leHQocTIpO3EzLnNldE5leHQocTEpO2Jhc2U9cTA7YmFzZS5zZXRPcmlnKG8pO2Jhc2Uuc2V0RGVzdChkKTtyZXR1cm4gYmFzZTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UuY29ubmVjdD1mdW5jdGlvbihhLGIpe3ZhciBlPVF1YWRFZGdlLm1ha2VFZGdlKGEuZGVzdCgpLGIub3JpZygpKTtRdWFkRWRnZS5zcGxpY2UoZSxhLmxOZXh0KCkpO1F1YWRFZGdlLnNwbGljZShlLnN5bSgpLGIpO3JldHVybiBlO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5zcGxpY2U9ZnVuY3Rpb24oYSxiKXt2YXIgYWxwaGEsYmV0YSx0MSx0Mix0Myx0NDthbHBoYT1hLm9OZXh0KCkucm90O2JldGE9Yi5vTmV4dCgpLnJvdDt0MT1iLm9OZXh0KCk7dDI9YS5vTmV4dCgpO3QzPWJldGEub05leHQoKTt0ND1hbHBoYS5vTmV4dCgpO2Euc2V0TmV4dCh0MSk7Yi5zZXROZXh0KHQyKTthbHBoYS5zZXROZXh0KHQzKTtiZXRhLnNldE5leHQodDQpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5zd2FwPWZ1bmN0aW9uKGUpe3ZhciBhLGI7YT1lLm9QcmV2KCk7Yj1lLnN5bSgpLm9QcmV2KCk7UXVhZEVkZ2Uuc3BsaWNlKGUsYSk7UXVhZEVkZ2Uuc3BsaWNlKGUuc3ltKCksYik7UXVhZEVkZ2Uuc3BsaWNlKGUsYS5sTmV4dCgpKTtRdWFkRWRnZS5zcGxpY2UoZS5zeW0oKSxiLmxOZXh0KCkpO2Uuc2V0T3JpZyhhLmRlc3QoKSk7ZS5zZXREZXN0KGIuZGVzdCgpKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLmdldFByaW1hcnk9ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWcoKS5nZXRDb29yZGluYXRlKCkuY29tcGFyZVRvKHRoaXMuZGVzdCgpLmdldENvb3JkaW5hdGUoKSk8PTApe3JldHVybiB0aGlzO31cbmVsc2V7cmV0dXJuIHRoaXMuc3ltKCk7fX07anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUuc2V0RGF0YT1mdW5jdGlvbihkYXRhKXt0aGlzLmRhdGE9ZGF0YTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUuZGVsZXRlX2pzdHM9ZnVuY3Rpb24oKXt0aGlzLnJvdD1udWxsO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUuaXNMaXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm90IT09bnVsbDt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLnNldE5leHQ9ZnVuY3Rpb24obmV4dCl7dGhpcy5uZXh0PW5leHQ7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnByb3RvdHlwZS5pbnZSb3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3Quc3ltKCk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnByb3RvdHlwZS5zeW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3Qucm90O307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUub05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0O307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUub1ByZXY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3QubmV4dC5yb3Q7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnByb3RvdHlwZS5kTmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN5bSgpLm9OZXh0KCkuc3ltKCk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnByb3RvdHlwZS5kUHJldj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludlJvdCgpLm9OZXh0KCkuaW52Um90KCk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnByb3RvdHlwZS5sTmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludlJvdCgpLm9OZXh0KCkucm90O307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUubFByZXY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0LnN5bSgpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUuck5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3QubmV4dC5pbnZSb3QoKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLnJQcmV2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3ltKCkub05leHQoKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLnNldE9yaWc9ZnVuY3Rpb24obyl7dGhpcy52ZXJ0ZXg9bzt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLnNldERlc3Q9ZnVuY3Rpb24oZCl7dGhpcy5zeW0oKS5zZXRPcmlnKGQpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUub3JpZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnRleDt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLmRlc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zeW0oKS5vcmlnKCk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnKCkuZ2V0Q29vcmRpbmF0ZSgpLmRpc3RhbmNlKGRlc3QoKS5nZXRDb29yZGluYXRlKCkpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUuZXF1YWxzTm9uT3JpZW50ZWQ9ZnVuY3Rpb24ocWUpe2lmKHRoaXMuZXF1YWxzT3JpZW50ZWQocWUpKXtyZXR1cm4gdHJ1ZTt9XG5pZih0aGlzLmVxdWFsc09yaWVudGVkKHFlLnN5bSgpKSl7cmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5wcm90b3R5cGUuZXF1YWxzT3JpZW50ZWQ9ZnVuY3Rpb24ocWUpe2lmKHRoaXMub3JpZygpLmdldENvb3JkaW5hdGUoKS5lcXVhbHMyRChxZS5vcmlnKCkuZ2V0Q29vcmRpbmF0ZSgpKSYmdGhpcy5kZXN0KCkuZ2V0Q29vcmRpbmF0ZSgpLmVxdWFsczJEKHFlLmRlc3QoKS5nZXRDb29yZGluYXRlKCkpKXtyZXR1cm4gdHJ1ZTt9XG5yZXR1cm4gZmFsc2U7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnByb3RvdHlwZS50b0xpbmVTZWdtZW50PWZ1bmN0aW9uKClcbntyZXR1cm4gbmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCh0aGlzLnZlcnRleC5nZXRDb29yZGluYXRlKCksdGhpcy5kZXN0KCkuZ2V0Q29vcmRpbmF0ZSgpKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHAwLHAxO3AwPXRoaXMudmVydGV4LmdldENvb3JkaW5hdGUoKTtwMT10aGlzLmRlc3QoKS5nZXRDb29yZGluYXRlKCk7cmV0dXJuIGpzdHMuaW8uV0tUV3JpdGVyLnRvTGluZVN0cmluZyhwMCxwMSk7fTt9KSgpOyhmdW5jdGlvbigpe3ZhciBBc3NlcnQ9anN0cy51dGlsLkFzc2VydDtqc3RzLmdlb21ncmFwaC5FZGdlRW5kPWZ1bmN0aW9uKGVkZ2UscDAscDEsbGFiZWwpe3RoaXMuZWRnZT1lZGdlO2lmKHAwJiZwMSl7dGhpcy5pbml0KHAwLHAxKTt9XG5pZihsYWJlbCl7dGhpcy5sYWJlbD1sYWJlbHx8bnVsbDt9fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5lZGdlPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZUVuZC5wcm90b3R5cGUubGFiZWw9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5ub2RlPW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZUVuZC5wcm90b3R5cGUucDA9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5wMT1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmQucHJvdG90eXBlLmR4PW51bGw7anN0cy5nZW9tZ3JhcGguRWRnZUVuZC5wcm90b3R5cGUuZHk9bnVsbDtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5xdWFkcmFudD1udWxsO2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24ocDAscDEpe3RoaXMucDA9cDA7dGhpcy5wMT1wMTt0aGlzLmR4PXAxLngtcDAueDt0aGlzLmR5PXAxLnktcDAueTt0aGlzLnF1YWRyYW50PWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LnF1YWRyYW50KHRoaXMuZHgsdGhpcy5keSk7QXNzZXJ0LmlzVHJ1ZSghKHRoaXMuZHg9PT0wJiZ0aGlzLmR5PT09MCksJ0VkZ2VFbmQgd2l0aCBpZGVudGljYWwgZW5kcG9pbnRzIGZvdW5kJyk7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5nZXRFZGdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmQucHJvdG90eXBlLmdldExhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFiZWw7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDA7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5nZXREaXJlY3RlZENvb3JkaW5hdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wMTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmQucHJvdG90eXBlLmdldFF1YWRyYW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVhZHJhbnQ7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5nZXREeD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmR4O307anN0cy5nZW9tZ3JhcGguRWRnZUVuZC5wcm90b3R5cGUuZ2V0RHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5keTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmQucHJvdG90eXBlLnNldE5vZGU9ZnVuY3Rpb24obm9kZSl7dGhpcy5ub2RlPW5vZGU7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZTt9O2pzdHMuZ2VvbWdyYXBoLkVkZ2VFbmQucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb21wYXJlRGlyZWN0aW9uKGUpO307anN0cy5nZW9tZ3JhcGguRWRnZUVuZC5wcm90b3R5cGUuY29tcGFyZURpcmVjdGlvbj1mdW5jdGlvbihlKXtpZih0aGlzLmR4PT09ZS5keCYmdGhpcy5keT09PWUuZHkpXG5yZXR1cm4gMDtpZih0aGlzLnF1YWRyYW50PmUucXVhZHJhbnQpXG5yZXR1cm4gMTtpZih0aGlzLnF1YWRyYW50PGUucXVhZHJhbnQpXG5yZXR1cm4tMTtyZXR1cm4ganN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmNvbXB1dGVPcmllbnRhdGlvbihlLnAwLGUucDEsdGhpcy5wMSk7fTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLnByb3RvdHlwZS5jb21wdXRlTGFiZWw9ZnVuY3Rpb24oYm91bmRhcnlOb2RlUnVsZSl7fTt9KSgpO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5SaWdodG1vc3RFZGdlRmluZGVyPWZ1bmN0aW9uKCl7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuUmlnaHRtb3N0RWRnZUZpbmRlci5wcm90b3R5cGUubWluSW5kZXg9LTE7anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLm1pbkNvb3JkPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLm1pbkRlPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLm9yaWVudGVkRGU9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuUmlnaHRtb3N0RWRnZUZpbmRlci5wcm90b3R5cGUuZ2V0RWRnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWVudGVkRGU7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuUmlnaHRtb3N0RWRnZUZpbmRlci5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbkNvb3JkO307anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLmZpbmRFZGdlPWZ1bmN0aW9uKGRpckVkZ2VMaXN0KXtmb3IodmFyIGk9ZGlyRWRnZUxpc3QuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBkZT1pLm5leHQoKTtpZighZGUuaXNGb3J3YXJkKCkpXG5jb250aW51ZTt0aGlzLmNoZWNrRm9yUmlnaHRtb3N0Q29vcmRpbmF0ZShkZSk7fVxuanN0cy51dGlsLkFzc2VydC5pc1RydWUodGhpcy5taW5JbmRleCE9PTB8fHRoaXMubWluQ29vcmQuZXF1YWxzKHRoaXMubWluRGUuZ2V0Q29vcmRpbmF0ZSgpKSwnaW5jb25zaXN0ZW5jeSBpbiByaWdodG1vc3QgcHJvY2Vzc2luZycpO2lmKHRoaXMubWluSW5kZXg9PT0wKXt0aGlzLmZpbmRSaWdodG1vc3RFZGdlQXROb2RlKCk7fWVsc2V7dGhpcy5maW5kUmlnaHRtb3N0RWRnZUF0VmVydGV4KCk7fVxudGhpcy5vcmllbnRlZERlPXRoaXMubWluRGU7dmFyIHJpZ2h0bW9zdFNpZGU9dGhpcy5nZXRSaWdodG1vc3RTaWRlKHRoaXMubWluRGUsdGhpcy5taW5JbmRleCk7aWYocmlnaHRtb3N0U2lkZT09anN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCl7dGhpcy5vcmllbnRlZERlPXRoaXMubWluRGUuZ2V0U3ltKCk7fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLmZpbmRSaWdodG1vc3RFZGdlQXROb2RlPWZ1bmN0aW9uKCl7dmFyIG5vZGU9dGhpcy5taW5EZS5nZXROb2RlKCk7dmFyIHN0YXI9bm9kZS5nZXRFZGdlcygpO3RoaXMubWluRGU9c3Rhci5nZXRSaWdodG1vc3RFZGdlKCk7aWYoIXRoaXMubWluRGUuaXNGb3J3YXJkKCkpe3RoaXMubWluRGU9dGhpcy5taW5EZS5nZXRTeW0oKTt0aGlzLm1pbkluZGV4PXRoaXMubWluRGUuZ2V0RWRnZSgpLmdldENvb3JkaW5hdGVzKCkubGVuZ3RoLTE7fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLmZpbmRSaWdodG1vc3RFZGdlQXRWZXJ0ZXg9ZnVuY3Rpb24oKXt2YXIgcHRzPXRoaXMubWluRGUuZ2V0RWRnZSgpLmdldENvb3JkaW5hdGVzKCk7anN0cy51dGlsLkFzc2VydC5pc1RydWUodGhpcy5taW5JbmRleD4wJiZ0aGlzLm1pbkluZGV4PHB0cy5sZW5ndGgsJ3JpZ2h0bW9zdCBwb2ludCBleHBlY3RlZCB0byBiZSBpbnRlcmlvciB2ZXJ0ZXggb2YgZWRnZScpO3ZhciBwUHJldj1wdHNbdGhpcy5taW5JbmRleC0xXTt2YXIgcE5leHQ9cHRzW3RoaXMubWluSW5kZXgrMV07dmFyIG9yaWVudGF0aW9uPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5jb21wdXRlT3JpZW50YXRpb24odGhpcy5taW5Db29yZCxwTmV4dCxwUHJldik7dmFyIHVzZVByZXY9ZmFsc2U7aWYocFByZXYueTx0aGlzLm1pbkNvb3JkLnkmJnBOZXh0Lnk8dGhpcy5taW5Db29yZC55JiZvcmllbnRhdGlvbj09PWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5DT1VOVEVSQ0xPQ0tXSVNFKXt1c2VQcmV2PXRydWU7fWVsc2UgaWYocFByZXYueT50aGlzLm1pbkNvb3JkLnkmJnBOZXh0Lnk+dGhpcy5taW5Db29yZC55JiZvcmllbnRhdGlvbj09PWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5DTE9DS1dJU0Upe3VzZVByZXY9dHJ1ZTt9XG5pZih1c2VQcmV2KXt0aGlzLm1pbkluZGV4PXRoaXMubWluSW5kZXgtMTt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuUmlnaHRtb3N0RWRnZUZpbmRlci5wcm90b3R5cGUuY2hlY2tGb3JSaWdodG1vc3RDb29yZGluYXRlPWZ1bmN0aW9uKGRlKXt2YXIgY29vcmQ9ZGUuZ2V0RWRnZSgpLmdldENvb3JkaW5hdGVzKCk7Zm9yKHZhciBpPTA7aTxjb29yZC5sZW5ndGgtMTtpKyspe2lmKHRoaXMubWluQ29vcmQ9PT1udWxsfHxjb29yZFtpXS54PnRoaXMubWluQ29vcmQueCl7dGhpcy5taW5EZT1kZTt0aGlzLm1pbkluZGV4PWk7dGhpcy5taW5Db29yZD1jb29yZFtpXTt9fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLmdldFJpZ2h0bW9zdFNpZGU9ZnVuY3Rpb24oZGUsaW5kZXgpe3ZhciBzaWRlPXRoaXMuZ2V0UmlnaHRtb3N0U2lkZU9mU2VnbWVudChkZSxpbmRleCk7aWYoc2lkZTwwKVxuc2lkZT10aGlzLmdldFJpZ2h0bW9zdFNpZGVPZlNlZ21lbnQoZGUsaW5kZXgtMSk7aWYoc2lkZTwwKXt0aGlzLm1pbkNvb3JkPW51bGw7dGhpcy5jaGVja0ZvclJpZ2h0bW9zdENvb3JkaW5hdGUoZGUpO31cbnJldHVybiBzaWRlO307anN0cy5vcGVyYXRpb24uYnVmZmVyLlJpZ2h0bW9zdEVkZ2VGaW5kZXIucHJvdG90eXBlLmdldFJpZ2h0bW9zdFNpZGVPZlNlZ21lbnQ9ZnVuY3Rpb24oZGUsaSl7dmFyIGU9ZGUuZ2V0RWRnZSgpO3ZhciBjb29yZD1lLmdldENvb3JkaW5hdGVzKCk7aWYoaTwwfHxpKzE+PWNvb3JkLmxlbmd0aClcbnJldHVybi0xO2lmKGNvb3JkW2ldLnk9PWNvb3JkW2krMV0ueSlcbnJldHVybi0xO3ZhciBwb3M9anN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVDtpZihjb29yZFtpXS55PGNvb3JkW2krMV0ueSlcbnBvcz1qc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVDtyZXR1cm4gcG9zO307KGZ1bmN0aW9uKCl7anN0cy50cmlhbmd1bGF0ZS5JbmNyZW1lbnRhbERlbGF1bmF5VHJpYW5ndWxhdG9yPWZ1bmN0aW9uKHN1YmRpdil7dGhpcy5zdWJkaXY9c3ViZGl2O3RoaXMuaXNVc2luZ1RvbGVyYW5jZT1zdWJkaXYuZ2V0VG9sZXJhbmNlKCk+MC4wO307anN0cy50cmlhbmd1bGF0ZS5JbmNyZW1lbnRhbERlbGF1bmF5VHJpYW5ndWxhdG9yLnByb3RvdHlwZS5pbnNlcnRTaXRlcz1mdW5jdGlvbih2ZXJ0aWNlcyl7dmFyIGk9MCxpbD12ZXJ0aWNlcy5sZW5ndGgsdjtmb3IoaTtpPGlsO2krKyl7dj12ZXJ0aWNlc1tpXTt0aGlzLmluc2VydFNpdGUodik7fX07anN0cy50cmlhbmd1bGF0ZS5JbmNyZW1lbnRhbERlbGF1bmF5VHJpYW5ndWxhdG9yLnByb3RvdHlwZS5pbnNlcnRTaXRlPWZ1bmN0aW9uKHYpe3ZhciBlLGJhc2Usc3RhcnRFZGdlLHQ7ZT10aGlzLnN1YmRpdi5sb2NhdGUodik7aWYodGhpcy5zdWJkaXYuaXNWZXJ0ZXhPZkVkZ2UoZSx2KSl7cmV0dXJuIGU7fVxuZWxzZSBpZih0aGlzLnN1YmRpdi5pc09uRWRnZShlLHYuZ2V0Q29vcmRpbmF0ZSgpKSl7ZT1lLm9QcmV2KCk7dGhpcy5zdWJkaXYuZGVsZXRlX2pzdHMoZS5vTmV4dCgpKTt9XG5iYXNlPXRoaXMuc3ViZGl2Lm1ha2VFZGdlKGUub3JpZygpLHYpO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2Uuc3BsaWNlKGJhc2UsZSk7c3RhcnRFZGdlPWJhc2U7ZG97YmFzZT10aGlzLnN1YmRpdi5jb25uZWN0KGUsYmFzZS5zeW0oKSk7ZT1iYXNlLm9QcmV2KCk7fXdoaWxlKGUubE5leHQoKSE9c3RhcnRFZGdlKTtkb3t0PWUub1ByZXYoKTtpZih0LmRlc3QoKS5yaWdodE9mKGUpJiZ2LmlzSW5DaXJjbGUoZS5vcmlnKCksdC5kZXN0KCksZS5kZXN0KCkpKXtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnN3YXAoZSk7ZT1lLm9QcmV2KCk7fWVsc2UgaWYoZS5vTmV4dCgpPT1zdGFydEVkZ2Upe3JldHVybiBiYXNlO31lbHNle2U9ZS5vTmV4dCgpLmxQcmV2KCk7fX13aGlsZSh0cnVlKTt9O30oKSk7anN0cy5hbGdvcml0aG0uQ2VudHJvaWRBcmVhPWZ1bmN0aW9uKCl7dGhpcy5iYXNlUHQ9bnVsbDt0aGlzLnRyaWFuZ2xlQ2VudDM9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7dGhpcy5jZW50U3VtPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO3RoaXMuY2czPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO307anN0cy5hbGdvcml0aG0uQ2VudHJvaWRBcmVhLnByb3RvdHlwZS5iYXNlUHQ9bnVsbDtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLnRyaWFuZ2xlQ2VudDM9bnVsbDtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLmFyZWFzdW0yPTA7anN0cy5hbGdvcml0aG0uQ2VudHJvaWRBcmVhLnByb3RvdHlwZS5jZzM9bnVsbDtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLmNlbnRTdW09bnVsbDtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLnRvdGFsTGVuZ3RoPTAuMDtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihnZW9tKXtpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pe3ZhciBwb2x5PWdlb207dGhpcy5zZXRCYXNlUG9pbnQocG9seS5nZXRFeHRlcmlvclJpbmcoKS5nZXRDb29yZGluYXRlTigwKSk7dGhpcy5hZGQzKHBvbHkpO31lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9ufHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7dmFyIGdjPWdlb207Zm9yKHZhciBpPTA7aTxnYy5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt0aGlzLmFkZChnYy5nZXRHZW9tZXRyeU4oaSkpO319ZWxzZSBpZihnZW9tIGluc3RhbmNlb2YgQXJyYXkpe3RoaXMuYWRkMihnZW9tKTt9fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLmFkZDI9ZnVuY3Rpb24ocmluZyl7dGhpcy5zZXRCYXNlUG9pbnQocmluZ1swXSk7dGhpcy5hZGRTaGVsbChyaW5nKTt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkQXJlYS5wcm90b3R5cGUuZ2V0Q2VudHJvaWQ9ZnVuY3Rpb24oKXt2YXIgY2VudD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKTtpZihNYXRoLmFicyh0aGlzLmFyZWFzdW0yKT4wLjApe2NlbnQueD10aGlzLmNnMy54LzMvdGhpcy5hcmVhc3VtMjtjZW50Lnk9dGhpcy5jZzMueS8zL3RoaXMuYXJlYXN1bTI7fWVsc2V7Y2VudC54PXRoaXMuY2VudFN1bS54L3RoaXMudG90YWxMZW5ndGg7Y2VudC55PXRoaXMuY2VudFN1bS55L3RoaXMudG90YWxMZW5ndGg7fVxucmV0dXJuIGNlbnQ7fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLnNldEJhc2VQb2ludD1mdW5jdGlvbihiYXNlUHQpe2lmKHRoaXMuYmFzZVB0PT1udWxsKVxudGhpcy5iYXNlUHQ9YmFzZVB0O307anN0cy5hbGdvcml0aG0uQ2VudHJvaWRBcmVhLnByb3RvdHlwZS5hZGQzPWZ1bmN0aW9uKHBvbHkpe3RoaXMuYWRkU2hlbGwocG9seS5nZXRFeHRlcmlvclJpbmcoKS5nZXRDb29yZGluYXRlcygpKTtmb3IodmFyIGk9MDtpPHBvbHkuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7aSsrKXt0aGlzLmFkZEhvbGUocG9seS5nZXRJbnRlcmlvclJpbmdOKGkpLmdldENvb3JkaW5hdGVzKCkpO319O2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkQXJlYS5wcm90b3R5cGUuYWRkU2hlbGw9ZnVuY3Rpb24ocHRzKXt2YXIgaXNQb3NpdGl2ZUFyZWE9IWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5pc0NDVyhwdHMpO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aC0xO2krKyl7dGhpcy5hZGRUcmlhbmdsZSh0aGlzLmJhc2VQdCxwdHNbaV0scHRzW2krMV0saXNQb3NpdGl2ZUFyZWEpO31cbnRoaXMuYWRkTGluZWFyU2VnbWVudHMocHRzKTt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkQXJlYS5wcm90b3R5cGUuYWRkSG9sZT1mdW5jdGlvbihwdHMpe3ZhciBpc1Bvc2l0aXZlQXJlYT1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuaXNDQ1cocHRzKTtmb3IodmFyIGk9MDtpPHB0cy5sZW5ndGgtMTtpKyspe3RoaXMuYWRkVHJpYW5nbGUodGhpcy5iYXNlUHQscHRzW2ldLHB0c1tpKzFdLGlzUG9zaXRpdmVBcmVhKTt9XG50aGlzLmFkZExpbmVhclNlZ21lbnRzKHB0cyk7fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEucHJvdG90eXBlLmFkZFRyaWFuZ2xlPWZ1bmN0aW9uKHAwLHAxLHAyLGlzUG9zaXRpdmVBcmVhKXt2YXIgc2lnbj0oaXNQb3NpdGl2ZUFyZWEpPzEuMDotMS4wO2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkQXJlYS5jZW50cm9pZDMocDAscDEscDIsdGhpcy50cmlhbmdsZUNlbnQzKTt2YXIgYXJlYTI9anN0cy5hbGdvcml0aG0uQ2VudHJvaWRBcmVhLmFyZWEyKHAwLHAxLHAyKTt0aGlzLmNnMy54Kz1zaWduKmFyZWEyKnRoaXMudHJpYW5nbGVDZW50My54O3RoaXMuY2czLnkrPXNpZ24qYXJlYTIqdGhpcy50cmlhbmdsZUNlbnQzLnk7dGhpcy5hcmVhc3VtMis9c2lnbiphcmVhMjt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyb2lkQXJlYS5jZW50cm9pZDM9ZnVuY3Rpb24ocDEscDIscDMsYyl7Yy54PXAxLngrcDIueCtwMy54O2MueT1wMS55K3AyLnkrcDMueTtyZXR1cm47fTtqc3RzLmFsZ29yaXRobS5DZW50cm9pZEFyZWEuYXJlYTI9ZnVuY3Rpb24ocDEscDIscDMpe3JldHVybihwMi54LXAxLngpKihwMy55LXAxLnkpLShwMy54LXAxLngpKihwMi55LXAxLnkpO307anN0cy5hbGdvcml0aG0uQ2VudHJvaWRBcmVhLnByb3RvdHlwZS5hZGRMaW5lYXJTZWdtZW50cz1mdW5jdGlvbihwdHMpe2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aC0xO2krKyl7dmFyIHNlZ21lbnRMZW49cHRzW2ldLmRpc3RhbmNlKHB0c1tpKzFdKTt0aGlzLnRvdGFsTGVuZ3RoKz1zZWdtZW50TGVuO3ZhciBtaWR4PShwdHNbaV0ueCtwdHNbaSsxXS54KS8yO3RoaXMuY2VudFN1bS54Kz1zZWdtZW50TGVuKm1pZHg7dmFyIG1pZHk9KHB0c1tpXS55K3B0c1tpKzFdLnkpLzI7dGhpcy5jZW50U3VtLnkrPXNlZ21lbnRMZW4qbWlkeTt9fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVTZWdtZW50PWZ1bmN0aW9uKGVkZ2UscHRJbmRleCl7dGhpcy5lZGdlPWVkZ2U7dGhpcy5wdEluZGV4PXB0SW5kZXg7dGhpcy5wdHM9ZWRnZS5nZXRDb29yZGluYXRlcygpO307anN0cy5nZW9tZ3JhcGguaW5kZXguU3dlZXBMaW5lU2VnbWVudC5wcm90b3R5cGUuZWRnZT1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZVNlZ21lbnQucHJvdG90eXBlLnB0cz1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZVNlZ21lbnQucHJvdG90eXBlLnB0SW5kZXg9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVTZWdtZW50LnByb3RvdHlwZS5nZXRNaW5YPWZ1bmN0aW9uKCl7dmFyIHgxPXRoaXMucHRzW3RoaXMucHRJbmRleF0ueDt2YXIgeDI9dGhpcy5wdHNbdGhpcy5wdEluZGV4KzFdLng7aWYoeDE8eDIpe3JldHVybiB4MTt9XG5yZXR1cm4geDI7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVTZWdtZW50LnByb3RvdHlwZS5nZXRNYXhYPWZ1bmN0aW9uKCl7dmFyIHgxPXRoaXMucHRzW3RoaXMucHRJbmRleF0ueDt2YXIgeDI9dGhpcy5wdHNbdGhpcy5wdEluZGV4KzFdLng7aWYoeDE+eDIpe3JldHVybiB4MTt9XG5yZXR1cm4geDI7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVTZWdtZW50LnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9ucz1mdW5jdGlvbihzcyxzaSl7c2kuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmVkZ2UsdGhpcy5wdEluZGV4LHNzLmVkZ2Usc3MucHRJbmRleCk7fTtqc3RzLmluZGV4LnF1YWR0cmVlLlJvb3Q9ZnVuY3Rpb24oKXtqc3RzLmluZGV4LnF1YWR0cmVlLk5vZGVCYXNlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vcmlnaW49bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKDAuMCwwLjApO307anN0cy5pbmRleC5xdWFkdHJlZS5Sb290LnByb3RvdHlwZT1uZXcganN0cy5pbmRleC5xdWFkdHJlZS5Ob2RlQmFzZSgpO2pzdHMuaW5kZXgucXVhZHRyZWUuUm9vdC5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKGl0ZW1FbnYsaXRlbSl7dmFyIGluZGV4PXRoaXMuZ2V0U3Vibm9kZUluZGV4KGl0ZW1FbnYsdGhpcy5vcmlnaW4pO2lmKGluZGV4PT09LTEpe3RoaXMuYWRkKGl0ZW0pO3JldHVybjt9XG52YXIgbm9kZT10aGlzLnN1Ym5vZGVbaW5kZXhdO2lmKG5vZGU9PT1udWxsfHwhbm9kZS5nZXRFbnZlbG9wZSgpLmNvbnRhaW5zKGl0ZW1FbnYpKXt2YXIgbGFyZ2VyTm9kZT1qc3RzLmluZGV4LnF1YWR0cmVlLk5vZGUuY3JlYXRlRXhwYW5kZWQobm9kZSxpdGVtRW52KTt0aGlzLnN1Ym5vZGVbaW5kZXhdPWxhcmdlck5vZGU7fVxudGhpcy5pbnNlcnRDb250YWluZWQodGhpcy5zdWJub2RlW2luZGV4XSxpdGVtRW52LGl0ZW0pO307anN0cy5pbmRleC5xdWFkdHJlZS5Sb290LnByb3RvdHlwZS5pbnNlcnRDb250YWluZWQ9ZnVuY3Rpb24odHJlZSxpdGVtRW52LGl0ZW0pe3ZhciBpc1plcm9YLGlzWmVyb1ksbm9kZTtpc1plcm9YPWpzdHMuaW5kZXguSW50ZXJ2YWxTaXplLmlzWmVyb1dpZHRoKGl0ZW1FbnYuZ2V0TWluWCgpLGl0ZW1FbnYuZ2V0TWF4WCgpKTtpc1plcm9ZPWpzdHMuaW5kZXguSW50ZXJ2YWxTaXplLmlzWmVyb1dpZHRoKGl0ZW1FbnYuZ2V0TWluWSgpLGl0ZW1FbnYuZ2V0TWF4WSgpKTtpZihpc1plcm9YfHxpc1plcm9ZKXtub2RlPXRyZWUuZmluZChpdGVtRW52KTt9ZWxzZXtub2RlPXRyZWUuZ2V0Tm9kZShpdGVtRW52KTt9XG5ub2RlLmFkZChpdGVtKTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuUm9vdC5wcm90b3R5cGUuaXNTZWFyY2hNYXRjaD1mdW5jdGlvbihzZWFyY2hFbnYpe3JldHVybiB0cnVlO307anN0cy5nZW9tZ3JhcGguaW5kZXguTW9ub3RvbmVDaGFpbkluZGV4ZXI9ZnVuY3Rpb24oKXt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5JbmRleGVyLnRvSW50QXJyYXk9ZnVuY3Rpb24obGlzdCl7dmFyIGFycmF5PVtdO2Zvcih2YXIgaT1saXN0Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZWxlbWVudD1pLm5leHQoKTthcnJheS5wdXNoKGVsZW1lbnQpO31cbnJldHVybiBhcnJheTt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5JbmRleGVyLnByb3RvdHlwZS5nZXRDaGFpblN0YXJ0SW5kaWNlcz1mdW5jdGlvbihwdHMpe3ZhciBzdGFydD0wO3ZhciBzdGFydEluZGV4TGlzdD1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpO3N0YXJ0SW5kZXhMaXN0LmFkZChzdGFydCk7ZG97dmFyIGxhc3Q9dGhpcy5maW5kQ2hhaW5FbmQocHRzLHN0YXJ0KTtzdGFydEluZGV4TGlzdC5hZGQobGFzdCk7c3RhcnQ9bGFzdDt9d2hpbGUoc3RhcnQ8cHRzLmxlbmd0aC0xKTt2YXIgc3RhcnRJbmRleD1qc3RzLmdlb21ncmFwaC5pbmRleC5Nb25vdG9uZUNoYWluSW5kZXhlci50b0ludEFycmF5KHN0YXJ0SW5kZXhMaXN0KTtyZXR1cm4gc3RhcnRJbmRleDt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW5JbmRleGVyLnByb3RvdHlwZS5maW5kQ2hhaW5FbmQ9ZnVuY3Rpb24ocHRzLHN0YXJ0KXt2YXIgY2hhaW5RdWFkPWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LnF1YWRyYW50KHB0c1tzdGFydF0scHRzW3N0YXJ0KzFdKTt2YXIgbGFzdD1zdGFydCsxO3doaWxlKGxhc3Q8cHRzLmxlbmd0aCl7dmFyIHF1YWQ9anN0cy5nZW9tZ3JhcGguUXVhZHJhbnQucXVhZHJhbnQocHRzW2xhc3QtMV0scHRzW2xhc3RdKTtpZihxdWFkIT1jaGFpblF1YWQpe2JyZWFrO31cbmxhc3QrKzt9XG5yZXR1cm4gbGFzdC0xO307anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXI9ZnVuY3Rpb24obGkpe3RoaXMubGk9bGk7fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGU9bmV3IGpzdHMubm9kaW5nLlNlZ21lbnRJbnRlcnNlY3RvcigpO2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLmNvbnN0cnVjdG9yPWpzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyO2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLmlzQWRqYWNlbnRTZWdtZW50cz1mdW5jdGlvbihpMSxpMil7cmV0dXJuIE1hdGguYWJzKGkxLWkyKT09PTE7fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGUuX2hhc0ludGVyc2VjdGlvbj1mYWxzZTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGUuaGFzUHJvcGVyPWZhbHNlO2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLnByb3RvdHlwZS5oYXNQcm9wZXJJbnRlcmlvcj1mYWxzZTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGUuaGFzSW50ZXJpb3I9ZmFsc2U7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLnByb3BlckludGVyc2VjdGlvblBvaW50PW51bGw7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLmxpPW51bGw7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLmlzU2VsZkludGVyc2VjdGlvbj1udWxsO2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLnByb3RvdHlwZS5udW1JbnRlcnNlY3Rpb25zPTA7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLm51bUludGVyaW9ySW50ZXJzZWN0aW9ucz0wO2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLnByb3RvdHlwZS5udW1Qcm9wZXJJbnRlcnNlY3Rpb25zPTA7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLm51bVRlc3RzPTA7anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLmdldExpbmVJbnRlcnNlY3Rvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpO307anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLmdldFByb3BlckludGVyc2VjdGlvblBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ7fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGUuaGFzSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc0ludGVyc2VjdGlvbjt9O2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLnByb3RvdHlwZS5oYXNQcm9wZXJJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNQcm9wZXI7fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGUuaGFzUHJvcGVySW50ZXJpb3JJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNQcm9wZXJJbnRlcmlvcjt9O2pzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLnByb3RvdHlwZS5oYXNJbnRlcmlvckludGVyc2VjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGVyaW9yO307anN0cy5ub2RpbmcuSW50ZXJzZWN0aW9uQWRkZXIucHJvdG90eXBlLmlzVHJpdmlhbEludGVyc2VjdGlvbj1mdW5jdGlvbihlMCxzZWdJbmRleDAsZTEsc2VnSW5kZXgxKXtpZihlMD09ZTEpe2lmKHRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uTnVtKCk9PTEpe2lmKGpzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyLmlzQWRqYWNlbnRTZWdtZW50cyhzZWdJbmRleDAsc2VnSW5kZXgxKSlcbnJldHVybiB0cnVlO2lmKGUwLmlzQ2xvc2VkKCkpe3ZhciBtYXhTZWdJbmRleD1lMC5zaXplKCktMTtpZigoc2VnSW5kZXgwPT09MCYmc2VnSW5kZXgxPT09bWF4U2VnSW5kZXgpfHwoc2VnSW5kZXgxPT09MCYmc2VnSW5kZXgwPT09bWF4U2VnSW5kZXgpKXtyZXR1cm4gdHJ1ZTt9fX19XG5yZXR1cm4gZmFsc2U7fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGUucHJvY2Vzc0ludGVyc2VjdGlvbnM9ZnVuY3Rpb24oZTAsc2VnSW5kZXgwLGUxLHNlZ0luZGV4MSl7aWYoZTA9PT1lMSYmc2VnSW5kZXgwPT09c2VnSW5kZXgxKVxucmV0dXJuO3RoaXMubnVtVGVzdHMrKzt2YXIgcDAwPWUwLmdldENvb3JkaW5hdGVzKClbc2VnSW5kZXgwXTt2YXIgcDAxPWUwLmdldENvb3JkaW5hdGVzKClbc2VnSW5kZXgwKzFdO3ZhciBwMTA9ZTEuZ2V0Q29vcmRpbmF0ZXMoKVtzZWdJbmRleDFdO3ZhciBwMTE9ZTEuZ2V0Q29vcmRpbmF0ZXMoKVtzZWdJbmRleDErMV07dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHAwMCxwMDEscDEwLHAxMSk7aWYodGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKSl7dGhpcy5udW1JbnRlcnNlY3Rpb25zKys7aWYodGhpcy5saS5pc0ludGVyaW9ySW50ZXJzZWN0aW9uKCkpe3RoaXMubnVtSW50ZXJpb3JJbnRlcnNlY3Rpb25zKys7dGhpcy5oYXNJbnRlcmlvcj10cnVlO31cbmlmKCF0aGlzLmlzVHJpdmlhbEludGVyc2VjdGlvbihlMCxzZWdJbmRleDAsZTEsc2VnSW5kZXgxKSl7dGhpcy5faGFzSW50ZXJzZWN0aW9uPXRydWU7ZTAuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmxpLHNlZ0luZGV4MCwwKTtlMS5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksc2VnSW5kZXgxLDEpO2lmKHRoaXMubGkuaXNQcm9wZXIoKSl7dGhpcy5udW1Qcm9wZXJJbnRlcnNlY3Rpb25zKys7dGhpcy5oYXNQcm9wZXI9dHJ1ZTt0aGlzLmhhc1Byb3BlckludGVyaW9yPXRydWU7fX19fTtqc3RzLm5vZGluZy5JbnRlcnNlY3Rpb25BZGRlci5wcm90b3R5cGUuaXNEb25lPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307anN0cy5vcGVyYXRpb24udW5pb24uQ2FzY2FkZWRQb2x5Z29uVW5pb249ZnVuY3Rpb24ocG9seXMpe3RoaXMuaW5wdXRQb2x5cz1wb2x5czt9O2pzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uLnVuaW9uPWZ1bmN0aW9uKHBvbHlzKXt2YXIgb3A9bmV3IGpzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uKHBvbHlzKTtyZXR1cm4gb3AudW5pb24oKTt9O2pzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uLnByb3RvdHlwZS5pbnB1dFBvbHlzO2pzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uLnByb3RvdHlwZS5nZW9tRmFjdG9yeT1udWxsO2pzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uLnByb3RvdHlwZS5TVFJUUkVFX05PREVfQ0FQQUNJVFk9NDtqc3RzLm9wZXJhdGlvbi51bmlvbi5DYXNjYWRlZFBvbHlnb25Vbmlvbi5wcm90b3R5cGUudW5pb249ZnVuY3Rpb24oKXtpZih0aGlzLmlucHV0UG9seXMubGVuZ3RoPT09MCl7cmV0dXJuIG51bGw7fVxudGhpcy5nZW9tRmFjdG9yeT10aGlzLmlucHV0UG9seXNbMF0uZ2V0RmFjdG9yeSgpO3ZhciBpbmRleD1uZXcganN0cy5pbmRleC5zdHJ0cmVlLlNUUnRyZWUodGhpcy5TVFJUUkVFX05PREVfQ0FQQUNJVFkpO2Zvcih2YXIgaT0wLGw9dGhpcy5pbnB1dFBvbHlzLmxlbmd0aDtpPGw7aSsrKXt2YXIgaXRlbT10aGlzLmlucHV0UG9seXNbaV07aW5kZXguaW5zZXJ0KGl0ZW0uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLGl0ZW0pO31cbnZhciBpdGVtVHJlZT1pbmRleC5pdGVtc1RyZWUoKTt2YXIgdW5pb25BbGw9dGhpcy51bmlvblRyZWUoaXRlbVRyZWUpO3JldHVybiB1bmlvbkFsbDt9O2pzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uLnByb3RvdHlwZS51bmlvblRyZWU9ZnVuY3Rpb24oZ2VvbVRyZWUpe3ZhciBnZW9tcz10aGlzLnJlZHVjZVRvR2VvbWV0cmllcyhnZW9tVHJlZSk7dmFyIHVuaW9uPXRoaXMuYmluYXJ5VW5pb24oZ2VvbXMpO3JldHVybiB1bmlvbjt9O2pzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uLnByb3RvdHlwZS5iaW5hcnlVbmlvbj1mdW5jdGlvbihnZW9tcyxzdGFydCxlbmQpe3N0YXJ0PXN0YXJ0fHwwO2VuZD1lbmR8fGdlb21zLmxlbmd0aDtpZihlbmQtc3RhcnQ8PTEpe3ZhciBnMD10aGlzLmdldEdlb21ldHJ5KGdlb21zLHN0YXJ0KTtyZXR1cm4gdGhpcy51bmlvblNhZmUoZzAsbnVsbCk7fVxuZWxzZSBpZihlbmQtc3RhcnQ9PT0yKXtyZXR1cm4gdGhpcy51bmlvblNhZmUodGhpcy5nZXRHZW9tZXRyeShnZW9tcyxzdGFydCksdGhpcy5nZXRHZW9tZXRyeShnZW9tcyxzdGFydCsxKSk7fVxuZWxzZXt2YXIgbWlkPXBhcnNlSW50KChlbmQrc3RhcnQpLzIpO3ZhciBnMD10aGlzLmJpbmFyeVVuaW9uKGdlb21zLHN0YXJ0LG1pZCk7dmFyIGcxPXRoaXMuYmluYXJ5VW5pb24oZ2VvbXMsbWlkLGVuZCk7cmV0dXJuIHRoaXMudW5pb25TYWZlKGcwLGcxKTt9fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5DYXNjYWRlZFBvbHlnb25Vbmlvbi5wcm90b3R5cGUuZ2V0R2VvbWV0cnk9ZnVuY3Rpb24obGlzdCxpbmRleCl7aWYoaW5kZXg+PWxpc3QubGVuZ3RoKXtyZXR1cm4gbnVsbDt9XG5yZXR1cm4gbGlzdFtpbmRleF07fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5DYXNjYWRlZFBvbHlnb25Vbmlvbi5wcm90b3R5cGUucmVkdWNlVG9HZW9tZXRyaWVzPWZ1bmN0aW9uKGdlb21UcmVlKXt2YXIgZ2VvbXM9W107Zm9yKHZhciBpPTAsbD1nZW9tVHJlZS5sZW5ndGg7aTxsO2krKyl7dmFyIG89Z2VvbVRyZWVbaV0sZ2VvbT1udWxsO2lmKG8gaW5zdGFuY2VvZiBBcnJheSl7Z2VvbT10aGlzLnVuaW9uVHJlZShvKTt9XG5lbHNlIGlmKG8gaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnkpe2dlb209bzt9XG5nZW9tcy5wdXNoKGdlb20pO31cbnJldHVybiBnZW9tczt9O2pzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uLnByb3RvdHlwZS51bmlvblNhZmU9ZnVuY3Rpb24oZzAsZzEpe2lmKGcwPT09bnVsbCYmZzE9PT1udWxsKXtyZXR1cm4gbnVsbDt9XG5pZihnMD09PW51bGwpe3JldHVybiBnMS5jbG9uZSgpO31cbmlmKGcxPT09bnVsbCl7cmV0dXJuIGcwLmNsb25lKCk7fVxucmV0dXJuIHRoaXMudW5pb25PcHRpbWl6ZWQoZzAsZzEpO307anN0cy5vcGVyYXRpb24udW5pb24uQ2FzY2FkZWRQb2x5Z29uVW5pb24ucHJvdG90eXBlLnVuaW9uT3B0aW1pemVkPWZ1bmN0aW9uKGcwLGcxKXt2YXIgZzBFbnY9ZzAuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLGcxRW52PWcxLmdldEVudmVsb3BlSW50ZXJuYWwoKTtpZighZzBFbnYuaW50ZXJzZWN0cyhnMUVudikpe3ZhciBjb21ibz1qc3RzLmdlb20udXRpbC5HZW9tZXRyeUNvbWJpbmVyLmNvbWJpbmUoZzAsZzEpO3JldHVybiBjb21ibzt9XG5pZihnMC5nZXROdW1HZW9tZXRyaWVzPD0xJiZnMS5nZXROdW1HZW9tZXRyaWVzPD0xKXtyZXR1cm4gdGhpcy51bmlvbkFjdHVhbChnMCxnMSk7fVxudmFyIGNvbW1vbkVudj1nMEVudi5pbnRlcnNlY3Rpb24oZzFFbnYpO3JldHVybiB0aGlzLnVuaW9uVXNpbmdFbnZlbG9wZUludGVyc2VjdGlvbihnMCxnMSxjb21tb25FbnYpO307anN0cy5vcGVyYXRpb24udW5pb24uQ2FzY2FkZWRQb2x5Z29uVW5pb24ucHJvdG90eXBlLnVuaW9uVXNpbmdFbnZlbG9wZUludGVyc2VjdGlvbj1mdW5jdGlvbihnMCxnMSxjb21tb24pe3ZhciBkaXNqb2ludFBvbHlzPW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KCk7dmFyIGcwSW50PXRoaXMuZXh0cmFjdEJ5RW52ZWxvcGUoY29tbW9uLGcwLGRpc2pvaW50UG9seXMpO3ZhciBnMUludD10aGlzLmV4dHJhY3RCeUVudmVsb3BlKGNvbW1vbixnMSxkaXNqb2ludFBvbHlzKTt2YXIgdW5pb249dGhpcy51bmlvbkFjdHVhbChnMEludCxnMUludCk7ZGlzam9pbnRQb2x5cy5hZGQodW5pb24pO3ZhciBvdmVyYWxsVW5pb249anN0cy5nZW9tLnV0aWwuR2VvbWV0cnlDb21iaW5lci5jb21iaW5lKGRpc2pvaW50UG9seXMpO3JldHVybiBvdmVyYWxsVW5pb247fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5DYXNjYWRlZFBvbHlnb25Vbmlvbi5wcm90b3R5cGUuZXh0cmFjdEJ5RW52ZWxvcGU9ZnVuY3Rpb24oZW52LGdlb20sZGlzam9pbnRHZW9tcyl7dmFyIGludGVyc2VjdGluZ0dlb21zPW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KCk7Zm9yKHZhciBpPTA7aTxnZW9tLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciBlbGVtPWdlb20uZ2V0R2VvbWV0cnlOKGkpO2lmKGVsZW0uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHMoZW52KSl7aW50ZXJzZWN0aW5nR2VvbXMuYWRkKGVsZW0pO31cbmVsc2V7ZGlzam9pbnRHZW9tcy5hZGQoZWxlbSk7fX1cbnJldHVybiB0aGlzLmdlb21GYWN0b3J5LmJ1aWxkR2VvbWV0cnkoaW50ZXJzZWN0aW5nR2VvbXMpO307anN0cy5vcGVyYXRpb24udW5pb24uQ2FzY2FkZWRQb2x5Z29uVW5pb24ucHJvdG90eXBlLnVuaW9uQWN0dWFsPWZ1bmN0aW9uKGcwLGcxKXtyZXR1cm4gZzAudW5pb24oZzEpO307KGZ1bmN0aW9uKCl7anN0cy5nZW9tLk11bHRpUG9pbnQ9ZnVuY3Rpb24ocG9pbnRzLGZhY3Rvcnkpe3RoaXMuZ2VvbWV0cmllcz1wb2ludHN8fFtdO3RoaXMuZmFjdG9yeT1mYWN0b3J5O307anN0cy5nZW9tLk11bHRpUG9pbnQucHJvdG90eXBlPW5ldyBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKCk7anN0cy5nZW9tLk11bHRpUG9pbnQuY29uc3RydWN0b3I9anN0cy5nZW9tLk11bHRpUG9pbnQ7anN0cy5nZW9tLk11bHRpUG9pbnQucHJvdG90eXBlLmdldEJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKTt9O2pzdHMuZ2VvbS5NdWx0aVBvaW50LnByb3RvdHlwZS5nZXRHZW9tZXRyeU49ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZ2VvbWV0cmllc1tuXTt9O2pzdHMuZ2VvbS5NdWx0aVBvaW50LnByb3RvdHlwZS5lcXVhbHNFeGFjdD1mdW5jdGlvbihvdGhlcix0b2xlcmFuY2Upe2lmKCF0aGlzLmlzRXF1aXZhbGVudENsYXNzKG90aGVyKSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLnByb3RvdHlwZS5lcXVhbHNFeGFjdC5jYWxsKHRoaXMsb3RoZXIsdG9sZXJhbmNlKTt9O2pzdHMuZ2VvbS5NdWx0aVBvaW50LnByb3RvdHlwZS5DTEFTU19OQU1FPSdqc3RzLmdlb20uTXVsdGlQb2ludCc7fSkoKTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyPWZ1bmN0aW9uKHByZWNpc2lvbk1vZGVsLGJ1ZlBhcmFtcyl7dGhpcy5wcmVjaXNpb25Nb2RlbD1wcmVjaXNpb25Nb2RlbDt0aGlzLmJ1ZlBhcmFtcz1idWZQYXJhbXM7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnByb3RvdHlwZS5kaXN0YW5jZT0wLjA7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlci5wcm90b3R5cGUucHJlY2lzaW9uTW9kZWw9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnByb3RvdHlwZS5idWZQYXJhbXM9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnByb3RvdHlwZS5nZXRCdWZmZXJQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmUGFyYW1zO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlci5wcm90b3R5cGUuZ2V0TGluZUN1cnZlPWZ1bmN0aW9uKGlucHV0UHRzLGRpc3RhbmNlKXt0aGlzLmRpc3RhbmNlPWRpc3RhbmNlO2lmKHRoaXMuZGlzdGFuY2U8MC4wJiYhdGhpcy5idWZQYXJhbXMuaXNTaW5nbGVTaWRlZCgpKVxucmV0dXJuIG51bGw7aWYodGhpcy5kaXN0YW5jZT09MC4wKVxucmV0dXJuIG51bGw7dmFyIHBvc0Rpc3RhbmNlPU1hdGguYWJzKHRoaXMuZGlzdGFuY2UpO3ZhciBzZWdHZW49dGhpcy5nZXRTZWdHZW4ocG9zRGlzdGFuY2UpO2lmKGlucHV0UHRzLmxlbmd0aDw9MSl7dGhpcy5jb21wdXRlUG9pbnRDdXJ2ZShpbnB1dFB0c1swXSxzZWdHZW4pO31lbHNle2lmKHRoaXMuYnVmUGFyYW1zLmlzU2luZ2xlU2lkZWQoKSl7dmFyIGlzUmlnaHRTaWRlPWRpc3RhbmNlPDAuMDt0aGlzLmNvbXB1dGVTaW5nbGVTaWRlZEJ1ZmZlckN1cnZlKGlucHV0UHRzLGlzUmlnaHRTaWRlLHNlZ0dlbik7fWVsc2VcbnRoaXMuY29tcHV0ZUxpbmVCdWZmZXJDdXJ2ZShpbnB1dFB0cyxzZWdHZW4pO31cbnZhciBsaW5lQ29vcmQ9c2VnR2VuLmdldENvb3JkaW5hdGVzKCk7cmV0dXJuIGxpbmVDb29yZDt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZUJ1aWxkZXIucHJvdG90eXBlLmdldFJpbmdDdXJ2ZT1mdW5jdGlvbihpbnB1dFB0cyxzaWRlLGRpc3RhbmNlKXt0aGlzLmRpc3RhbmNlPWRpc3RhbmNlO2lmKGlucHV0UHRzLmxlbmd0aDw9MilcbnJldHVybiB0aGlzLmdldExpbmVDdXJ2ZShpbnB1dFB0cyxkaXN0YW5jZSk7aWYodGhpcy5kaXN0YW5jZT09MC4wKXtyZXR1cm4ganN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlci5jb3B5Q29vcmRpbmF0ZXMoaW5wdXRQdHMpO31cbnZhciBzZWdHZW49dGhpcy5nZXRTZWdHZW4odGhpcy5kaXN0YW5jZSk7dGhpcy5jb21wdXRlUmluZ0J1ZmZlckN1cnZlKGlucHV0UHRzLHNpZGUsc2VnR2VuKTtyZXR1cm4gc2VnR2VuLmdldENvb3JkaW5hdGVzKCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnByb3RvdHlwZS5nZXRPZmZzZXRDdXJ2ZT1mdW5jdGlvbihpbnB1dFB0cyxkaXN0YW5jZSl7dGhpcy5kaXN0YW5jZT1kaXN0YW5jZTtpZih0aGlzLmRpc3RhbmNlPT09MC4wKVxucmV0dXJuIG51bGw7dmFyIGlzUmlnaHRTaWRlPXRoaXMuZGlzdGFuY2U8MC4wO3ZhciBwb3NEaXN0YW5jZT1NYXRoLmFicyh0aGlzLmRpc3RhbmNlKTt2YXIgc2VnR2VuPXRoaXMuZ2V0U2VnR2VuKHBvc0Rpc3RhbmNlKTtpZihpbnB1dFB0cy5sZW5ndGg8PTEpe3RoaXMuY29tcHV0ZVBvaW50Q3VydmUoaW5wdXRQdHNbMF0sc2VnR2VuKTt9ZWxzZXt0aGlzLmNvbXB1dGVPZmZzZXRDdXJ2ZShpbnB1dFB0cyxpc1JpZ2h0U2lkZSxzZWdHZW4pO31cbnZhciBjdXJ2ZVB0cz1zZWdHZW4uZ2V0Q29vcmRpbmF0ZXMoKTtpZihpc1JpZ2h0U2lkZSlcbmN1cnZlUHRzLnJldmVyc2UoKTtyZXR1cm4gY3VydmVQdHM7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLmNvcHlDb29yZGluYXRlcz1mdW5jdGlvbihwdHMpe3ZhciBjb3B5PVtdO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aDtpKyspe2NvcHkucHVzaChwdHNbaV0uY2xvbmUoKSk7fVxucmV0dXJuIGNvcHk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnByb3RvdHlwZS5nZXRTZWdHZW49ZnVuY3Rpb24oZGlzdGFuY2Upe3JldHVybiBuZXcganN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRHZW5lcmF0b3IodGhpcy5wcmVjaXNpb25Nb2RlbCx0aGlzLmJ1ZlBhcmFtcyxkaXN0YW5jZSk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLlNJTVBMSUZZX0ZBQ1RPUj0xMDAuMDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnNpbXBsaWZ5VG9sZXJhbmNlPWZ1bmN0aW9uKGJ1ZkRpc3RhbmNlKXtyZXR1cm4gYnVmRGlzdGFuY2UvanN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlci5TSU1QTElGWV9GQUNUT1I7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnByb3RvdHlwZS5jb21wdXRlUG9pbnRDdXJ2ZT1mdW5jdGlvbihwdCxzZWdHZW4pe3N3aXRjaCh0aGlzLmJ1ZlBhcmFtcy5nZXRFbmRDYXBTdHlsZSgpKXtjYXNlIGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkNBUF9ST1VORDpzZWdHZW4uY3JlYXRlQ2lyY2xlKHB0KTticmVhaztjYXNlIGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkNBUF9TUVVBUkU6c2VnR2VuLmNyZWF0ZVNxdWFyZShwdCk7YnJlYWs7fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlci5wcm90b3R5cGUuY29tcHV0ZUxpbmVCdWZmZXJDdXJ2ZT1mdW5jdGlvbihpbnB1dFB0cyxzZWdHZW4pe3ZhciBkaXN0VG9sPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZUJ1aWxkZXIuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5kaXN0YW5jZSk7dmFyIHNpbXAxPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnNpbXBsaWZ5KGlucHV0UHRzLGRpc3RUb2wpO3ZhciBuMT1zaW1wMS5sZW5ndGgtMTtzZWdHZW4uaW5pdFNpZGVTZWdtZW50cyhzaW1wMVswXSxzaW1wMVsxXSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKTtmb3IodmFyIGk9MjtpPD1uMTtpKyspe3NlZ0dlbi5hZGROZXh0U2VnbWVudChzaW1wMVtpXSx0cnVlKTt9XG5zZWdHZW4uYWRkTGFzdFNlZ21lbnQoKTtzZWdHZW4uYWRkTGluZUVuZENhcChzaW1wMVtuMS0xXSxzaW1wMVtuMV0pO3ZhciBzaW1wMj1qc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5zaW1wbGlmeShpbnB1dFB0cywtZGlzdFRvbCk7dmFyIG4yPXNpbXAyLmxlbmd0aC0xO3NlZ0dlbi5pbml0U2lkZVNlZ21lbnRzKHNpbXAyW24yXSxzaW1wMltuMi0xXSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKTtmb3IodmFyIGk9bjItMjtpPj0wO2ktLSl7c2VnR2VuLmFkZE5leHRTZWdtZW50KHNpbXAyW2ldLHRydWUpO31cbnNlZ0dlbi5hZGRMYXN0U2VnbWVudCgpO3NlZ0dlbi5hZGRMaW5lRW5kQ2FwKHNpbXAyWzFdLHNpbXAyWzBdKTtzZWdHZW4uY2xvc2VSaW5nKCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVCdWlsZGVyLnByb3RvdHlwZS5jb21wdXRlU2luZ2xlU2lkZWRCdWZmZXJDdXJ2ZT1mdW5jdGlvbihpbnB1dFB0cyxpc1JpZ2h0U2lkZSxzZWdHZW4pe3ZhciBkaXN0VG9sPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZUJ1aWxkZXIuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5kaXN0YW5jZSk7aWYoaXNSaWdodFNpZGUpe3NlZ0dlbi5hZGRTZWdtZW50cyhpbnB1dFB0cyx0cnVlKTt2YXIgc2ltcDI9anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlcklucHV0TGluZVNpbXBsaWZpZXIuc2ltcGxpZnkoaW5wdXRQdHMsLWRpc3RUb2wpO3ZhciBuMj1zaW1wMi5sZW5ndGgtMTtzZWdHZW4uaW5pdFNpZGVTZWdtZW50cyhzaW1wMltuMl0sc2ltcDJbbjItMV0sanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCk7c2VnR2VuLmFkZEZpcnN0U2VnbWVudCgpO2Zvcih2YXIgaT1uMi0yO2k+PTA7aS0tKXtzZWdHZW4uYWRkTmV4dFNlZ21lbnQoc2ltcDJbaV0sdHJ1ZSk7fX1lbHNle3NlZ0dlbi5hZGRTZWdtZW50cyhpbnB1dFB0cyxmYWxzZSk7dmFyIHNpbXAxPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnNpbXBsaWZ5KGlucHV0UHRzLGRpc3RUb2wpO3ZhciBuMT1zaW1wMS5sZW5ndGgtMTtzZWdHZW4uaW5pdFNpZGVTZWdtZW50cyhzaW1wMVswXSxzaW1wMVsxXSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKTtzZWdHZW4uYWRkRmlyc3RTZWdtZW50KCk7Zm9yKHZhciBpPTI7aTw9bjE7aSsrKXtzZWdHZW4uYWRkTmV4dFNlZ21lbnQoc2ltcDFbaV0sdHJ1ZSk7fX1cbnNlZ0dlbi5hZGRMYXN0U2VnbWVudCgpO3NlZ0dlbi5jbG9zZVJpbmcoKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZUJ1aWxkZXIucHJvdG90eXBlLmNvbXB1dGVPZmZzZXRDdXJ2ZT1mdW5jdGlvbihpbnB1dFB0cyxpc1JpZ2h0U2lkZSxzZWdHZW4pe3ZhciBkaXN0VG9sPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZUJ1aWxkZXIuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5kaXN0YW5jZSk7aWYoaXNSaWdodFNpZGUpe3ZhciBzaW1wMj1qc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVySW5wdXRMaW5lU2ltcGxpZmllci5zaW1wbGlmeShpbnB1dFB0cywtZGlzdFRvbCk7dmFyIG4yPXNpbXAyLmxlbmd0aC0xO3NlZ0dlbi5pbml0U2lkZVNlZ21lbnRzKHNpbXAyW24yXSxzaW1wMltuMi0xXSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKTtzZWdHZW4uYWRkRmlyc3RTZWdtZW50KCk7Zm9yKHZhciBpPW4yLTI7aT49MDtpLS0pe3NlZ0dlbi5hZGROZXh0U2VnbWVudChzaW1wMltpXSx0cnVlKTt9fWVsc2V7dmFyIHNpbXAxPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnNpbXBsaWZ5KGlucHV0UHRzLGRpc3RUb2wpO3ZhciBuMT1zaW1wMS5sZW5ndGgtMTtzZWdHZW4uaW5pdFNpZGVTZWdtZW50cyhzaW1wMVswXSxzaW1wMVsxXSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKTtzZWdHZW4uYWRkRmlyc3RTZWdtZW50KCk7Zm9yKHZhciBpPTI7aTw9bjE7aSsrKXtzZWdHZW4uYWRkTmV4dFNlZ21lbnQoc2ltcDFbaV0sdHJ1ZSk7fX1cbnNlZ0dlbi5hZGRMYXN0U2VnbWVudCgpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlci5wcm90b3R5cGUuY29tcHV0ZVJpbmdCdWZmZXJDdXJ2ZT1mdW5jdGlvbihpbnB1dFB0cyxzaWRlLHNlZ0dlbil7dmFyIGRpc3RUb2w9anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlci5zaW1wbGlmeVRvbGVyYW5jZSh0aGlzLmRpc3RhbmNlKTtpZihzaWRlPT09anN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQpXG5kaXN0VG9sPS1kaXN0VG9sO3ZhciBzaW1wPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJJbnB1dExpbmVTaW1wbGlmaWVyLnNpbXBsaWZ5KGlucHV0UHRzLGRpc3RUb2wpO3ZhciBuPXNpbXAubGVuZ3RoLTE7c2VnR2VuLmluaXRTaWRlU2VnbWVudHMoc2ltcFtuLTFdLHNpbXBbMF0sc2lkZSk7Zm9yKHZhciBpPTE7aTw9bjtpKyspe3ZhciBhZGRTdGFydFBvaW50PWkhPT0xO3NlZ0dlbi5hZGROZXh0U2VnbWVudChzaW1wW2ldLGFkZFN0YXJ0UG9pbnQpO31cbnNlZ0dlbi5jbG9zZVJpbmcoKTt9OyhmdW5jdGlvbigpe3ZhciBIb3RQaXhlbFNuYXBBY3Rpb249ZnVuY3Rpb24oaG90UGl4ZWwscGFyZW50RWRnZSx2ZXJ0ZXhJbmRleCl7dGhpcy5ob3RQaXhlbD1ob3RQaXhlbDt0aGlzLnBhcmVudEVkZ2U9cGFyZW50RWRnZTt0aGlzLnZlcnRleEluZGV4PXZlcnRleEluZGV4O307SG90UGl4ZWxTbmFwQWN0aW9uLnByb3RvdHlwZT1uZXcganN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluU2VsZWN0QWN0aW9uKCk7SG90UGl4ZWxTbmFwQWN0aW9uLmNvbnN0cnVjdG9yPUhvdFBpeGVsU25hcEFjdGlvbjtIb3RQaXhlbFNuYXBBY3Rpb24ucHJvdG90eXBlLmhvdFBpeGVsPW51bGw7SG90UGl4ZWxTbmFwQWN0aW9uLnByb3RvdHlwZS5wYXJlbnRFZGdlPW51bGw7SG90UGl4ZWxTbmFwQWN0aW9uLnByb3RvdHlwZS52ZXJ0ZXhJbmRleD1udWxsO0hvdFBpeGVsU25hcEFjdGlvbi5wcm90b3R5cGUuX2lzTm9kZUFkZGVkPWZhbHNlO0hvdFBpeGVsU25hcEFjdGlvbi5wcm90b3R5cGUuaXNOb2RlQWRkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNOb2RlQWRkZWQ7fTtIb3RQaXhlbFNuYXBBY3Rpb24ucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbihtYyxzdGFydEluZGV4KXt2YXIgc3M9bWMuZ2V0Q29udGV4dCgpO2lmKHRoaXMucGFyZW50RWRnZSE9PW51bGwpe2lmKHNzPT09dGhpcy5wYXJlbnRFZGdlJiZzdGFydEluZGV4PT09dGhpcy52ZXJ0ZXhJbmRleClcbnJldHVybjt9XG50aGlzLl9pc05vZGVBZGRlZD10aGlzLmhvdFBpeGVsLmFkZFNuYXBwZWROb2RlKHNzLHN0YXJ0SW5kZXgpO307anN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhQb2ludFNuYXBwZXI9ZnVuY3Rpb24oaW5kZXgpe3RoaXMuaW5kZXg9aW5kZXg7fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFBvaW50U25hcHBlci5wcm90b3R5cGUuaW5kZXg9bnVsbDtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFBvaW50U25hcHBlci5wcm90b3R5cGUuc25hcD1mdW5jdGlvbihob3RQaXhlbCxwYXJlbnRFZGdlLHZlcnRleEluZGV4KXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7dGhpcy5zbmFwMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbnZhciBwaXhlbEVudj1ob3RQaXhlbC5nZXRTYWZlRW52ZWxvcGUoKTt2YXIgaG90UGl4ZWxTbmFwQWN0aW9uPW5ldyBIb3RQaXhlbFNuYXBBY3Rpb24oaG90UGl4ZWwscGFyZW50RWRnZSx2ZXJ0ZXhJbmRleCk7dGhpcy5pbmRleC5xdWVyeShwaXhlbEVudix7dmlzaXRJdGVtOmZ1bmN0aW9uKHRlc3RDaGFpbil7dGVzdENoYWluLnNlbGVjdChwaXhlbEVudixob3RQaXhlbFNuYXBBY3Rpb24pO319KTtyZXR1cm4gaG90UGl4ZWxTbmFwQWN0aW9uLmlzTm9kZUFkZGVkKCk7fTtqc3RzLm5vZGluZy5zbmFwcm91bmQuTUNJbmRleFBvaW50U25hcHBlci5wcm90b3R5cGUuc25hcDI9ZnVuY3Rpb24oaG90UGl4ZWwpe3JldHVybiB0aGlzLnNuYXAoaG90UGl4ZWwsbnVsbCwtMSk7fTt9KSgpOyhmdW5jdGlvbigpe3ZhciBOb2RlQmFzZT1mdW5jdGlvbigpe3RoaXMuaXRlbXM9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt0aGlzLnN1Ym5vZGU9W251bGwsbnVsbF07fTtOb2RlQmFzZS5nZXRTdWJub2RlSW5kZXg9ZnVuY3Rpb24oaW50ZXJ2YWwsY2VudHJlKXt2YXIgc3Vibm9kZUluZGV4PS0xO2lmKGludGVydmFsLm1pbj49Y2VudHJlKXtzdWJub2RlSW5kZXg9MTt9XG5pZihpbnRlcnZhbC5tYXg8PWNlbnRyZSl7c3Vibm9kZUluZGV4PTA7fVxucmV0dXJuIHN1Ym5vZGVJbmRleDt9O05vZGVCYXNlLnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zO307Tm9kZUJhc2UucHJvdG90eXBlLmFkZD1mdW5jdGlvbihpdGVtKXt0aGlzLml0ZW1zLmFkZChpdGVtKTt9O05vZGVCYXNlLnByb3RvdHlwZS5hZGRBbGxJdGVtcz1mdW5jdGlvbihpdGVtcyl7aXRlbXMuYWRkQWxsKHRoaXMuaXRlbXMpO3ZhciBpPTAsaWw9Mjtmb3IoaTtpPGlsO2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7dGhpcy5zdWJub2RlW2ldLmFkZEFsbEl0ZW1zKGl0ZW1zKTt9fVxucmV0dXJuIGl0ZW1zO307Tm9kZUJhc2UucHJvdG90eXBlLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nPWZ1bmN0aW9uKGludGVydmFsLHJlc3VsdEl0ZW1zKXtpZihpbnRlcnZhbCE9PW51bGwmJiF0aGlzLmlzU2VhcmNoTWF0Y2goaW50ZXJ2YWwpKXtyZXR1cm47fVxucmVzdWx0SXRlbXMuYWRkQWxsKHRoaXMuaXRlbXMpO2lmKHRoaXMuc3Vibm9kZVswXSE9PW51bGwpe3RoaXMuc3Vibm9kZVswXS5hZGRBbGxJdGVtc0Zyb21PdmVybGFwcGluZyhpbnRlcnZhbCxyZXN1bHRJdGVtcyk7fVxuaWYodGhpcy5zdWJub2RlWzFdIT09bnVsbCl7dGhpcy5zdWJub2RlWzFdLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nKGludGVydmFsLHJlc3VsdEl0ZW1zKTt9fTtOb2RlQmFzZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGl0ZW1JbnRlcnZhbCxpdGVtKXtpZighdGhpcy5pc1NlYXJjaE1hdGNoKGl0ZW1JbnRlcnZhbCkpe3JldHVybiBmYWxzZTt9XG52YXIgZm91bmQ9ZmFsc2UsaT0wLGlsPTI7Zm9yKGk7aTxpbDtpKyspe2lmKHRoaXMuc3Vibm9kZVtpXSE9PW51bGwpe2ZvdW5kPXRoaXMuc3Vibm9kZVtpXS5yZW1vdmUoaXRlbUludGVydmFsLGl0ZW0pO2lmKGZvdW5kKXtpZih0aGlzLnN1Ym5vZGVbaV0uaXNQcnVuYWJsZSgpKXt0aGlzLnN1Ym5vZGVbaV09bnVsbDt9XG5icmVhazt9fX1cbmlmKGZvdW5kKXtyZXR1cm4gZm91bmQ7fVxuZm91bmQ9dGhpcy5pdGVtcy5yZW1vdmUoaXRlbSk7cmV0dXJuIGZvdW5kO307Tm9kZUJhc2UucHJvdG90eXBlLmlzUHJ1bmFibGU9ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMuaGFzQ2hpbGRyZW4oKXx8dGhpcy5oYXNJdGVtcygpKTt9O05vZGVCYXNlLnByb3RvdHlwZS5oYXNDaGlsZHJlbj1mdW5jdGlvbigpe3ZhciBpPTAsaWw9Mjtmb3IoaTtpPGlsO2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7cmV0dXJuIHRydWU7fX1cbnJldHVybiBmYWxzZTt9O05vZGVCYXNlLnByb3RvdHlwZS5oYXNJdGVtcz1mdW5jdGlvbigpe3JldHVybiF0aGlzLml0ZW1zLmlzRW1wdHkoKTt9O05vZGVCYXNlLnByb3RvdHlwZS5kZXB0aD1mdW5jdGlvbigpe3ZhciBtYXhTdWJEZXB0aD0wLGk9MCxpbD0yLHNxZDtmb3IoaTtpPGlsO2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7c3FkPXRoaXMuc3Vibm9kZVtpXS5kZXB0aCgpO2lmKHNxZD5tYXhTdWJEZXB0aCl7bWF4U3ViRGVwdGg9c3FkO319fVxucmV0dXJuIG1heFN1YkRlcHRoKzE7fTtOb2RlQmFzZS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3ZhciBzdWJTaXplPTAsaT0wLGlsPTI7Zm9yKGk7aTxpbDtpKyspe2lmKHRoaXMuc3Vibm9kZVtpXSE9PW51bGwpe3N1YlNpemUrPXRoaXMuc3Vibm9kZVtpXS5zaXplKCk7fX1cbnJldHVybiBzdWJTaXplK3RoaXMuaXRlbXMuc2l6ZSgpO307Tm9kZUJhc2UucHJvdG90eXBlLm5vZGVTaXplPWZ1bmN0aW9uKCl7dmFyIHN1YlNpemU9MCxpPTAsaWw9Mjtmb3IoaTtpPGlsO2krKyl7aWYodGhpcy5zdWJub2RlW2ldIT09bnVsbCl7c3ViU2l6ZSs9dGhpcy5zdWJub2RlW2ldLm5vZGVTaXplKCk7fX1cbnJldHVybiBzdWJTaXplKzE7fTtqc3RzLmluZGV4LmJpbnRyZWUuTm9kZUJhc2U9Tm9kZUJhc2U7fSkoKTsoZnVuY3Rpb24oKXt2YXIgTm9kZUJhc2U9anN0cy5pbmRleC5iaW50cmVlLk5vZGVCYXNlO3ZhciBLZXk9anN0cy5pbmRleC5iaW50cmVlLktleTt2YXIgSW50ZXJ2YWw9anN0cy5pbmRleC5iaW50cmVlLkludGVydmFsO3ZhciBOb2RlPWZ1bmN0aW9uKGludGVydmFsLGxldmVsKXt0aGlzLml0ZW1zPW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KCk7dGhpcy5zdWJub2RlPVtudWxsLG51bGxdO3RoaXMuaW50ZXJ2YWw9aW50ZXJ2YWw7dGhpcy5sZXZlbD1sZXZlbDt0aGlzLmNlbnRyZT0oaW50ZXJ2YWwuZ2V0TWluKCkraW50ZXJ2YWwuZ2V0TWF4KCkpLzI7fTtOb2RlLnByb3RvdHlwZT1uZXcgTm9kZUJhc2UoKTtOb2RlLmNvbnN0cnVjdG9yPU5vZGU7Tm9kZS5jcmVhdGVOb2RlPWZ1bmN0aW9uKGl0ZW1JbnRlcnZhbCl7dmFyIGtleSxub2RlO2tleT1uZXcgS2V5KGl0ZW1JbnRlcnZhbCk7bm9kZT1uZXcgTm9kZShrZXkuZ2V0SW50ZXJ2YWwoKSxrZXkuZ2V0TGV2ZWwoKSk7cmV0dXJuIG5vZGU7fTtOb2RlLmNyZWF0ZUV4cGFuZGVkPWZ1bmN0aW9uKG5vZGUsYWRkSW50ZXJ2YWwpe3ZhciBleHBhbmRJbnQsbGFyZ2VyTm9kZTtleHBhbmRJbnQ9bmV3IEludGVydmFsKGFkZEludGVydmFsKTtpZihub2RlIT09bnVsbCl7ZXhwYW5kSW50LmV4cGFuZFRvSW5jbHVkZShub2RlLmludGVydmFsKTt9XG5sYXJnZXJOb2RlPU5vZGUuY3JlYXRlTm9kZShleHBhbmRJbnQpO2lmKG5vZGUhPT1udWxsKXtsYXJnZXJOb2RlLmluc2VydChub2RlKTt9XG5yZXR1cm4gbGFyZ2VyTm9kZTt9O05vZGUucHJvdG90eXBlLmdldEludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZXJ2YWw7fTtOb2RlLnByb3RvdHlwZS5pc1NlYXJjaE1hdGNoPWZ1bmN0aW9uKGl0ZW1JbnRlcnZhbCl7cmV0dXJuIGl0ZW1JbnRlcnZhbC5vdmVybGFwcyh0aGlzLmludGVydmFsKTt9O05vZGUucHJvdG90eXBlLmdldE5vZGU9ZnVuY3Rpb24oc2VhcmNoSW50ZXJ2YWwpe3ZhciBzdWJub2RlSW5kZXg9Tm9kZUJhc2UuZ2V0U3Vibm9kZUluZGV4KHNlYXJjaEludGVydmFsLHRoaXMuY2VudHJlKSxub2RlO2lmKHN1Ym5vZGVJbmRleCE9LTEpe25vZGU9dGhpcy5nZXRTdWJub2RlKHN1Ym5vZGVJbmRleCk7cmV0dXJuIG5vZGUuZ2V0Tm9kZShzZWFyY2hJbnRlcnZhbCk7fWVsc2V7cmV0dXJuIHRoaXM7fX07Tm9kZS5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihzZWFyY2hJbnRlcnZhbCl7dmFyIHN1Ym5vZGVJbmRleD1Ob2RlQmFzZS5nZXRTdWJub2RlSW5kZXgoc2VhcmNoSW50ZXJ2YWwsdGhpcy5jZW50cmUpLG5vZGU7aWYoc3Vibm9kZUluZGV4PT09LTEpe3JldHVybiB0aGlzO31cbmlmKHRoaXMuc3Vibm9kZVtzdWJub2RlSW5kZXhdIT09bnVsbCl7bm9kZT10aGlzLnN1Ym5vZGVbc3Vibm9kZUluZGV4XTtyZXR1cm4gbm9kZS5maW5kKHNlYXJjaEludGVydmFsKTt9XG5yZXR1cm4gdGhpczt9O05vZGUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihub2RlKXt2YXIgaW5kZXg9Tm9kZUJhc2UuZ2V0U3Vibm9kZUluZGV4KG5vZGUuaW50ZXJ2YWwsdGhpcy5jZW50cmUpLGNoaWxkTm9kZTtpZihub2RlLmxldmVsPT09dGhpcy5sZXZlbC0xKXt0aGlzLnN1Ym5vZGVbaW5kZXhdPW5vZGU7fWVsc2V7Y2hpbGROb2RlPXRoaXMuY3JlYXRlU3Vibm9kZShpbmRleCk7Y2hpbGROb2RlLmluc2VydChub2RlKTt0aGlzLnN1Ym5vZGVbaW5kZXhdPWNoaWxkTm9kZTt9fTtOb2RlLnByb3RvdHlwZS5nZXRTdWJub2RlPWZ1bmN0aW9uKGluZGV4KXtpZih0aGlzLnN1Ym5vZGVbaW5kZXhdPT09bnVsbCl7dGhpcy5zdWJub2RlW2luZGV4XT10aGlzLmNyZWF0ZVN1Ym5vZGUoaW5kZXgpO31cbnJldHVybiB0aGlzLnN1Ym5vZGVbaW5kZXhdO307Tm9kZS5wcm90b3R5cGUuY3JlYXRlU3Vibm9kZT1mdW5jdGlvbihpbmRleCl7dmFyIG1pbixtYXgsc3ViSW50LG5vZGU7bWluPTAuMDttYXg9MC4wO3N3aXRjaChpbmRleCl7Y2FzZSAwOm1pbj10aGlzLmludGVydmFsLmdldE1pbigpO21heD10aGlzLmNlbnRyZTticmVhaztjYXNlIDE6bWluPXRoaXMuY2VudHJlO21heD10aGlzLmludGVydmFsLmdldE1heCgpO2JyZWFrO31cbnN1YkludD1uZXcgSW50ZXJ2YWwobWluLG1heCk7bm9kZT1uZXcgTm9kZShzdWJJbnQsdGhpcy5sZXZlbC0xKTtyZXR1cm4gbm9kZTt9O2pzdHMuaW5kZXguYmludHJlZS5Ob2RlPU5vZGU7fSkoKTsoZnVuY3Rpb24oKXt2YXIgTm9kZT1qc3RzLmluZGV4LmJpbnRyZWUuTm9kZTt2YXIgTm9kZUJhc2U9anN0cy5pbmRleC5iaW50cmVlLk5vZGVCYXNlO3ZhciBSb290PWZ1bmN0aW9uKCl7dGhpcy5zdWJub2RlPVtudWxsLG51bGxdO3RoaXMuaXRlbXM9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt9O1Jvb3QucHJvdG90eXBlPW5ldyBqc3RzLmluZGV4LmJpbnRyZWUuTm9kZUJhc2UoKTtSb290LmNvbnN0cnVjdG9yPVJvb3Q7Um9vdC5vcmlnaW49MC4wO1Jvb3QucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihpdGVtSW50ZXJ2YWwsaXRlbSl7dmFyIGluZGV4PU5vZGVCYXNlLmdldFN1Ym5vZGVJbmRleChpdGVtSW50ZXJ2YWwsUm9vdC5vcmlnaW4pLG5vZGUsbGFyZ2VyTm9kZTtpZihpbmRleD09PS0xKXt0aGlzLmFkZChpdGVtKTtyZXR1cm47fVxubm9kZT10aGlzLnN1Ym5vZGVbaW5kZXhdO2lmKG5vZGU9PT1udWxsfHwhbm9kZS5nZXRJbnRlcnZhbCgpLmNvbnRhaW5zKGl0ZW1JbnRlcnZhbCkpe2xhcmdlck5vZGU9Tm9kZS5jcmVhdGVFeHBhbmRlZChub2RlLGl0ZW1JbnRlcnZhbCk7dGhpcy5zdWJub2RlW2luZGV4XT1sYXJnZXJOb2RlO31cbnRoaXMuaW5zZXJ0Q29udGFpbmVkKHRoaXMuc3Vibm9kZVtpbmRleF0saXRlbUludGVydmFsLGl0ZW0pO307Um9vdC5wcm90b3R5cGUuaW5zZXJ0Q29udGFpbmVkPWZ1bmN0aW9uKHRyZWUsaXRlbUludGVydmFsLGl0ZW0pe3ZhciBpc1plcm9BcmVhLG5vZGU7aXNaZXJvQXJlYT1qc3RzLmluZGV4LkludGVydmFsU2l6ZS5pc1plcm9XaWR0aChpdGVtSW50ZXJ2YWwuZ2V0TWluKCksaXRlbUludGVydmFsLmdldE1heCgpKTtub2RlPWlzWmVyb0FyZWE/dHJlZS5maW5kKGl0ZW1JbnRlcnZhbCk6dHJlZS5nZXROb2RlKGl0ZW1JbnRlcnZhbCk7bm9kZS5hZGQoaXRlbSk7fTtSb290LnByb3RvdHlwZS5pc1NlYXJjaE1hdGNoPWZ1bmN0aW9uKGludGVydmFsKXtyZXR1cm4gdHJ1ZTt9O2pzdHMuaW5kZXguYmludHJlZS5Sb290PVJvb3Q7fSkoKTtqc3RzLmdlb21ncmFwaC5RdWFkcmFudD1mdW5jdGlvbigpe307anN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuTkU9MDtqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5OVz0xO2pzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LlNXPTI7anN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuU0U9Mztqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5xdWFkcmFudD1mdW5jdGlvbihkeCxkeSl7aWYoZHggaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZSl7cmV0dXJuIGpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LnF1YWRyYW50Mi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fVxuaWYoZHg9PT0wLjAmJmR5PT09MC4wKVxudGhyb3cgbmV3IGpzdHMuZXJyb3IuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ0Nhbm5vdCBjb21wdXRlIHRoZSBxdWFkcmFudCBmb3IgcG9pbnQgKCAnK2R4KycsICcrZHkrJyApJyk7aWYoZHg+PTAuMCl7aWYoZHk+PTAuMClcbnJldHVybiBqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5ORTtlbHNlXG5yZXR1cm4ganN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuU0U7fWVsc2V7aWYoZHk+PTAuMClcbnJldHVybiBqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5OVztlbHNlXG5yZXR1cm4ganN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuU1c7fX07anN0cy5nZW9tZ3JhcGguUXVhZHJhbnQucXVhZHJhbnQyPWZ1bmN0aW9uKHAwLHAxKXtpZihwMS54PT09cDAueCYmcDEueT09PXAwLnkpXG50aHJvdyBuZXcganN0cy5lcnJvci5JbGxlZ2FsQXJndW1lbnRFcnJvcignQ2Fubm90IGNvbXB1dGUgdGhlIHF1YWRyYW50IGZvciB0d28gaWRlbnRpY2FsIHBvaW50cyAnK3AwKTtpZihwMS54Pj1wMC54KXtpZihwMS55Pj1wMC55KVxucmV0dXJuIGpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50Lk5FO2Vsc2VcbnJldHVybiBqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5TRTt9ZWxzZXtpZihwMS55Pj1wMC55KVxucmV0dXJuIGpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50Lk5XO2Vsc2VcbnJldHVybiBqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5TVzt9fTtqc3RzLmdlb21ncmFwaC5RdWFkcmFudC5pc09wcG9zaXRlPWZ1bmN0aW9uKHF1YWQxLHF1YWQyKXtpZihxdWFkMT09PXF1YWQyKVxucmV0dXJuIGZhbHNlO3ZhciBkaWZmPShxdWFkMS1xdWFkMis0KSU0O2lmKGRpZmY9PT0yKVxucmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO307anN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuY29tbW9uSGFsZlBsYW5lPWZ1bmN0aW9uKHF1YWQxLHF1YWQyKXtpZihxdWFkMT09PXF1YWQyKVxucmV0dXJuIHF1YWQxO3ZhciBkaWZmPShxdWFkMS1xdWFkMis0KSU0O2lmKGRpZmY9PT0yKVxucmV0dXJuLTE7dmFyIG1pbj0ocXVhZDE8cXVhZDIpP3F1YWQxOnF1YWQyO3ZhciBtYXg9KHF1YWQxPnF1YWQyKT9xdWFkMTpxdWFkMjtpZihtaW49PT0wJiZtYXg9PT0zKVxucmV0dXJuIDM7cmV0dXJuIG1pbjt9O2pzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LmlzSW5IYWxmUGxhbmU9ZnVuY3Rpb24ocXVhZCxoYWxmUGxhbmUpe2lmKGhhbGZQbGFuZT09PWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LlNFKXtyZXR1cm4gcXVhZD09PWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LlNFfHxxdWFkPT09anN0cy5nZW9tZ3JhcGguUXVhZHJhbnQuU1c7fVxucmV0dXJuIHF1YWQ9PT1oYWxmUGxhbmV8fHF1YWQ9PT1oYWxmUGxhbmUrMTt9O2pzdHMuZ2VvbWdyYXBoLlF1YWRyYW50LmlzTm9ydGhlcm49ZnVuY3Rpb24ocXVhZCl7cmV0dXJuIHF1YWQ9PT1qc3RzLmdlb21ncmFwaC5RdWFkcmFudC5ORXx8cXVhZD09PWpzdHMuZ2VvbWdyYXBoLlF1YWRyYW50Lk5XO307anN0cy5vcGVyYXRpb24udmFsaWQuQ29uc2lzdGVudEFyZWFUZXN0ZXI9ZnVuY3Rpb24oZ2VvbUdyYXBoKXt0aGlzLmdlb21HcmFwaD1nZW9tR3JhcGg7dGhpcy5saT1uZXcganN0cy5hbGdvcml0aG0uUm9idXN0TGluZUludGVyc2VjdG9yKCk7dGhpcy5ub2RlR3JhcGg9bmV3IGpzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVOb2RlR3JhcGgoKTt0aGlzLmludmFsaWRQb2ludD1udWxsO307anN0cy5vcGVyYXRpb24udmFsaWQuQ29uc2lzdGVudEFyZWFUZXN0ZXIucHJvdG90eXBlLmdldEludmFsaWRQb2ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludmFsaWRQb2ludDt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLkNvbnNpc3RlbnRBcmVhVGVzdGVyLnByb3RvdHlwZS5pc05vZGVDb25zaXN0ZW50QXJlYT1mdW5jdGlvbigpe3ZhciBpbnRlcnNlY3Rvcj10aGlzLmdlb21HcmFwaC5jb21wdXRlU2VsZk5vZGVzKHRoaXMubGksdHJ1ZSk7aWYoaW50ZXJzZWN0b3IuaGFzUHJvcGVySW50ZXJzZWN0aW9uKCkpe3RoaXMuaW52YWxpZFBvaW50PWludGVyc2VjdG9yLmdldFByb3BlckludGVyc2VjdGlvblBvaW50KCk7cmV0dXJuIGZhbHNlO31cbnRoaXMubm9kZUdyYXBoLmJ1aWxkKHRoaXMuZ2VvbUdyYXBoKTtyZXR1cm4gdGhpcy5pc05vZGVFZGdlQXJlYUxhYmVsc0NvbnNpc3RlbnQoKTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLkNvbnNpc3RlbnRBcmVhVGVzdGVyLnByb3RvdHlwZS5pc05vZGVFZGdlQXJlYUxhYmVsc0NvbnNpc3RlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIG5vZGVJdD10aGlzLm5vZGVHcmFwaC5nZXROb2RlSXRlcmF0b3IoKTtub2RlSXQuaGFzTmV4dCgpOyl7dmFyIG5vZGU9bm9kZUl0Lm5leHQoKTtpZighbm9kZS5nZXRFZGdlcygpLmlzQXJlYUxhYmVsc0NvbnNpc3RlbnQodGhpcy5nZW9tR3JhcGgpKXt0aGlzLmludmFsaWRQb2ludD1ub2RlLmdldENvb3JkaW5hdGUoKS5jbG9uZSgpO3JldHVybiBmYWxzZTt9fVxucmV0dXJuIHRydWU7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5Db25zaXN0ZW50QXJlYVRlc3Rlci5wcm90b3R5cGUuaGFzRHVwbGljYXRlUmluZ3M9ZnVuY3Rpb24oKXtmb3IodmFyIG5vZGVJdD10aGlzLm5vZGVHcmFwaC5nZXROb2RlSXRlcmF0b3IoKTtub2RlSXQuaGFzTmV4dCgpOyl7dmFyIG5vZGU9bm9kZUl0Lm5leHQoKTtmb3IodmFyIGk9bm9kZS5nZXRFZGdlcygpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZWViPWkubmV4dCgpO2lmKGVlYi5nZXRFZGdlRW5kcygpLmxlbmd0aD4xKXtpbnZhbGlkUG9pbnQ9ZWViLmdldEVkZ2UoKS5nZXRDb29yZGluYXRlKDApO3JldHVybiB0cnVlO319fVxucmV0dXJuIGZhbHNlO307anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGU9ZnVuY3Rpb24oY29vcmQsZWRnZXMpe2pzdHMuZ2VvbWdyYXBoLk5vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO307anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGUucHJvdG90eXBlPW5ldyBqc3RzLmdlb21ncmFwaC5Ob2RlKCk7anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGUucHJvdG90eXBlLmNvbXB1dGVJTT1mdW5jdGlvbihpbSl7aW0uc2V0QXRMZWFzdElmVmFsaWQodGhpcy5sYWJlbC5nZXRMb2NhdGlvbigwKSx0aGlzLmxhYmVsLmdldExvY2F0aW9uKDEpLDApO307anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGUucHJvdG90eXBlLnVwZGF0ZUlNRnJvbUVkZ2VzPWZ1bmN0aW9uKGltKXt0aGlzLmVkZ2VzLnVwZGF0ZUlNKGltKTt9OyhmdW5jdGlvbigpe3ZhciBMb2NhdGlvbj1qc3RzLmdlb20uTG9jYXRpb247dmFyIFBvc2l0aW9uPWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uO3ZhciBFZGdlRW5kPWpzdHMuZ2VvbWdyYXBoLkVkZ2VFbmQ7anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlPWZ1bmN0aW9uKGVkZ2UsaXNGb3J3YXJkKXtFZGdlRW5kLmNhbGwodGhpcyxlZGdlKTt0aGlzLmRlcHRoPVswLC05OTksLTk5OV07dGhpcy5faXNGb3J3YXJkPWlzRm9yd2FyZDtpZihpc0ZvcndhcmQpe3RoaXMuaW5pdChlZGdlLmdldENvb3JkaW5hdGUoMCksZWRnZS5nZXRDb29yZGluYXRlKDEpKTt9ZWxzZXt2YXIgbj1lZGdlLmdldE51bVBvaW50cygpLTE7dGhpcy5pbml0KGVkZ2UuZ2V0Q29vcmRpbmF0ZShuKSxlZGdlLmdldENvb3JkaW5hdGUobi0xKSk7fVxudGhpcy5jb21wdXRlRGlyZWN0ZWRMYWJlbCgpO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZT1uZXcgRWRnZUVuZCgpO2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5jb25zdHJ1Y3Rvcj1qc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2U7anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLmRlcHRoRmFjdG9yPWZ1bmN0aW9uKGN1cnJMb2NhdGlvbixuZXh0TG9jYXRpb24pe2lmKGN1cnJMb2NhdGlvbj09PUxvY2F0aW9uLkVYVEVSSU9SJiZuZXh0TG9jYXRpb249PT1Mb2NhdGlvbi5JTlRFUklPUilcbnJldHVybiAxO2Vsc2UgaWYoY3VyckxvY2F0aW9uPT09TG9jYXRpb24uSU5URVJJT1ImJm5leHRMb2NhdGlvbj09PUxvY2F0aW9uLkVYVEVSSU9SKVxucmV0dXJuLTE7cmV0dXJuIDA7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLl9pc0ZvcndhcmQ9bnVsbDtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLl9pc0luUmVzdWx0PWZhbHNlO2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuX2lzVmlzaXRlZD1mYWxzZTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLnN5bT1udWxsO2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUubmV4dD1udWxsO2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUubmV4dE1pbj1udWxsO2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuZWRnZVJpbmc9bnVsbDtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLm1pbkVkZ2VSaW5nPW51bGw7anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5kZXB0aD1udWxsO2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuZ2V0RWRnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2U7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLnNldEluUmVzdWx0PWZ1bmN0aW9uKGlzSW5SZXN1bHQpe3RoaXMuX2lzSW5SZXN1bHQ9aXNJblJlc3VsdDt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuaXNJblJlc3VsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luUmVzdWx0O307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5pc1Zpc2l0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWaXNpdGVkO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5zZXRWaXNpdGVkPWZ1bmN0aW9uKGlzVmlzaXRlZCl7dGhpcy5faXNWaXNpdGVkPWlzVmlzaXRlZDt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuc2V0RWRnZVJpbmc9ZnVuY3Rpb24oZWRnZVJpbmcpe3RoaXMuZWRnZVJpbmc9ZWRnZVJpbmc7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLmdldEVkZ2VSaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZVJpbmc7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLnNldE1pbkVkZ2VSaW5nPWZ1bmN0aW9uKG1pbkVkZ2VSaW5nKXt0aGlzLm1pbkVkZ2VSaW5nPW1pbkVkZ2VSaW5nO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXRNaW5FZGdlUmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbkVkZ2VSaW5nO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXREZXB0aD1mdW5jdGlvbihwb3NpdGlvbil7cmV0dXJuIHRoaXMuZGVwdGhbcG9zaXRpb25dO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5zZXREZXB0aD1mdW5jdGlvbihwb3NpdGlvbixkZXB0aFZhbCl7aWYodGhpcy5kZXB0aFtwb3NpdGlvbl0hPT0tOTk5KXtpZih0aGlzLmRlcHRoW3Bvc2l0aW9uXSE9PWRlcHRoVmFsKVxudGhyb3cgbmV3IGpzdHMuZXJyb3IuVG9wb2xvZ3lFcnJvcignYXNzaWduZWQgZGVwdGhzIGRvIG5vdCBtYXRjaCcsdGhpcy5nZXRDb29yZGluYXRlKCkpO31cbnRoaXMuZGVwdGhbcG9zaXRpb25dPWRlcHRoVmFsO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5nZXREZXB0aERlbHRhPWZ1bmN0aW9uKCl7dmFyIGRlcHRoRGVsdGE9dGhpcy5lZGdlLmdldERlcHRoRGVsdGEoKTtpZighdGhpcy5faXNGb3J3YXJkKVxuZGVwdGhEZWx0YT0tZGVwdGhEZWx0YTtyZXR1cm4gZGVwdGhEZWx0YTt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuc2V0VmlzaXRlZEVkZ2U9ZnVuY3Rpb24oaXNWaXNpdGVkKXt0aGlzLnNldFZpc2l0ZWQoaXNWaXNpdGVkKTt0aGlzLnN5bS5zZXRWaXNpdGVkKGlzVmlzaXRlZCk7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLmdldFN5bT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN5bTt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuaXNGb3J3YXJkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzRm9yd2FyZDt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuc2V0U3ltPWZ1bmN0aW9uKGRlKXt0aGlzLnN5bT1kZTt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuZ2V0TmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQ7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLnNldE5leHQ9ZnVuY3Rpb24obmV4dCl7dGhpcy5uZXh0PW5leHQ7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLmdldE5leHRNaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0TWluO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5zZXROZXh0TWluPWZ1bmN0aW9uKG5leHRNaW4pe3RoaXMubmV4dE1pbj1uZXh0TWluO307anN0cy5nZW9tZ3JhcGguRGlyZWN0ZWRFZGdlLnByb3RvdHlwZS5pc0xpbmVFZGdlPWZ1bmN0aW9uKCl7dmFyIGlzTGluZT10aGlzLmxhYmVsLmlzTGluZSgwKXx8dGhpcy5sYWJlbC5pc0xpbmUoMSk7dmFyIGlzRXh0ZXJpb3JJZkFyZWEwPSF0aGlzLmxhYmVsLmlzQXJlYSgwKXx8dGhpcy5sYWJlbC5hbGxQb3NpdGlvbnNFcXVhbCgwLExvY2F0aW9uLkVYVEVSSU9SKTt2YXIgaXNFeHRlcmlvcklmQXJlYTE9IXRoaXMubGFiZWwuaXNBcmVhKDEpfHx0aGlzLmxhYmVsLmFsbFBvc2l0aW9uc0VxdWFsKDEsTG9jYXRpb24uRVhURVJJT1IpO3JldHVybiBpc0xpbmUmJmlzRXh0ZXJpb3JJZkFyZWEwJiZpc0V4dGVyaW9ySWZBcmVhMTt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuaXNJbnRlcmlvckFyZWFFZGdlPWZ1bmN0aW9uKCl7dmFyIGlzSW50ZXJpb3JBcmVhRWRnZT10cnVlO2Zvcih2YXIgaT0wO2k8MjtpKyspe2lmKCEodGhpcy5sYWJlbC5pc0FyZWEoaSkmJnRoaXMubGFiZWwuZ2V0TG9jYXRpb24oaSxQb3NpdGlvbi5MRUZUKT09PUxvY2F0aW9uLklOVEVSSU9SJiZ0aGlzLmxhYmVsLmdldExvY2F0aW9uKGksUG9zaXRpb24uUklHSFQpPT09TG9jYXRpb24uSU5URVJJT1IpKXtpc0ludGVyaW9yQXJlYUVkZ2U9ZmFsc2U7fX1cbnJldHVybiBpc0ludGVyaW9yQXJlYUVkZ2U7fTtqc3RzLmdlb21ncmFwaC5EaXJlY3RlZEVkZ2UucHJvdG90eXBlLmNvbXB1dGVEaXJlY3RlZExhYmVsPWZ1bmN0aW9uKCl7dGhpcy5sYWJlbD1uZXcganN0cy5nZW9tZ3JhcGguTGFiZWwodGhpcy5lZGdlLmdldExhYmVsKCkpO2lmKCF0aGlzLl9pc0ZvcndhcmQpXG50aGlzLmxhYmVsLmZsaXAoKTt9O2pzdHMuZ2VvbWdyYXBoLkRpcmVjdGVkRWRnZS5wcm90b3R5cGUuc2V0RWRnZURlcHRocz1mdW5jdGlvbihwb3NpdGlvbixkZXB0aCl7dmFyIGRlcHRoRGVsdGE9dGhpcy5nZXRFZGdlKCkuZ2V0RGVwdGhEZWx0YSgpO2lmKCF0aGlzLl9pc0ZvcndhcmQpXG5kZXB0aERlbHRhPS1kZXB0aERlbHRhO3ZhciBkaXJlY3Rpb25GYWN0b3I9MTtpZihwb3NpdGlvbj09PVBvc2l0aW9uLkxFRlQpXG5kaXJlY3Rpb25GYWN0b3I9LTE7dmFyIG9wcG9zaXRlUG9zPVBvc2l0aW9uLm9wcG9zaXRlKHBvc2l0aW9uKTt2YXIgZGVsdGE9ZGVwdGhEZWx0YSpkaXJlY3Rpb25GYWN0b3I7dmFyIG9wcG9zaXRlRGVwdGg9ZGVwdGgrZGVsdGE7dGhpcy5zZXREZXB0aChwb3NpdGlvbixkZXB0aCk7dGhpcy5zZXREZXB0aChvcHBvc2l0ZVBvcyxvcHBvc2l0ZURlcHRoKTt9O30pKCk7anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcD1mdW5jdGlvbihnMCxnMSx0ZXJtaW5hdGVEaXN0YW5jZSl7dGhpcy5wdExvY2F0b3I9bmV3IGpzdHMuYWxnb3JpdGhtLlBvaW50TG9jYXRvcigpO3RoaXMuZ2VvbT1bXTt0aGlzLmdlb21bMF09ZzA7dGhpcy5nZW9tWzFdPWcxO3RoaXMudGVybWluYXRlRGlzdGFuY2U9dGVybWluYXRlRGlzdGFuY2U7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLnByb3RvdHlwZS5nZW9tPW51bGw7anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUudGVybWluYXRlRGlzdGFuY2U9MC4wO2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AucHJvdG90eXBlLnB0TG9jYXRvcj1udWxsO2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AucHJvdG90eXBlLm1pbkRpc3RhbmNlTG9jYXRpb249bnVsbDtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLnByb3RvdHlwZS5taW5EaXN0YW5jZT1OdW1iZXIuTUFYX1ZBTFVFO2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2U9ZnVuY3Rpb24oZzAsZzEpe3ZhciBkaXN0T3A9bmV3IGpzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AoZzAsZzEsMC4wKTtyZXR1cm4gZGlzdE9wLmRpc3RhbmNlKCk7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLmlzV2l0aGluRGlzdGFuY2U9ZnVuY3Rpb24oZzAsZzEsZGlzdGFuY2Upe3ZhciBkaXN0T3A9bmV3IGpzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AoZzAsZzEsZGlzdGFuY2UpO3JldHVybiBkaXN0T3AuZGlzdGFuY2UoKTw9ZGlzdGFuY2U7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLm5lYXJlc3RQb2ludHM9ZnVuY3Rpb24oZzAsZzEpe3ZhciBkaXN0T3A9bmV3IGpzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AoZzAsZzEsMC4wKTtyZXR1cm4gZGlzdE9wLm5lYXJlc3RQb2ludHMoKTt9O2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKCl7aWYodGhpcy5nZW9tWzBdPT09bnVsbHx8dGhpcy5nZW9tWzFdPT09bnVsbClcbnRocm93IG5ldyBqc3RzLmVycm9yLklsbGVnYWxBcmd1bWVudEVycm9yKCdudWxsIGdlb21ldHJpZXMgYXJlIG5vdCBzdXBwb3J0ZWQnKTtpZih0aGlzLmdlb21bMF0uaXNFbXB0eSgpfHx0aGlzLmdlb21bMV0uaXNFbXB0eSgpKVxucmV0dXJuIDAuMDt0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZSgpO3JldHVybiB0aGlzLm1pbkRpc3RhbmNlO307anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUubmVhcmVzdFBvaW50cz1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZU1pbkRpc3RhbmNlKCk7dmFyIG5lYXJlc3RQdHM9W3RoaXMubWluRGlzdGFuY2VMb2NhdGlvblswXS5nZXRDb29yZGluYXRlKCksdGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uWzFdLmdldENvb3JkaW5hdGUoKV07cmV0dXJuIG5lYXJlc3RQdHM7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLnByb3RvdHlwZS5uZWFyZXN0TG9jYXRpb25zPWZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlTWluRGlzdGFuY2UoKTtyZXR1cm4gdGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uO307anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUudXBkYXRlTWluRGlzdGFuY2U9ZnVuY3Rpb24obG9jR2VvbSxmbGlwKXtpZihsb2NHZW9tWzBdPT09bnVsbClcbnJldHVybjtpZihmbGlwKXt0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMF09bG9jR2VvbVsxXTt0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMV09bG9jR2VvbVswXTt9ZWxzZXt0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMF09bG9jR2VvbVswXTt0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMV09bG9jR2VvbVsxXTt9fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLnByb3RvdHlwZS5jb21wdXRlTWluRGlzdGFuY2U9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjApe3RoaXMuY29tcHV0ZU1pbkRpc3RhbmNlMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbmlmKHRoaXMubWluRGlzdGFuY2VMb2NhdGlvbiE9PW51bGwpXG5yZXR1cm47dGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uPVtdO3RoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UoKTtpZih0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKVxucmV0dXJuO3RoaXMuY29tcHV0ZUZhY2V0RGlzdGFuY2UoKTt9O2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AucHJvdG90eXBlLmNvbXB1dGVDb250YWlubWVudERpc3RhbmNlPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09PTMmJighYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5HZW9tZXRyeUxvY2F0aW9uKSl7dGhpcy5jb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZTMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09Myl7dGhpcy5jb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZTQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9XG52YXIgbG9jUHRQb2x5PVtdO3RoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UyKDAsbG9jUHRQb2x5KTtpZih0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKVxucmV0dXJuO3RoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UyKDEsbG9jUHRQb2x5KTt9O2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AucHJvdG90eXBlLmNvbXB1dGVDb250YWlubWVudERpc3RhbmNlMj1mdW5jdGlvbihwb2x5R2VvbUluZGV4LGxvY1B0UG9seSl7dmFyIGxvY2F0aW9uc0luZGV4PTEtcG9seUdlb21JbmRleDt2YXIgcG9seXM9anN0cy5nZW9tLnV0aWwuUG9seWdvbkV4dHJhY3Rlci5nZXRQb2x5Z29ucyh0aGlzLmdlb21bcG9seUdlb21JbmRleF0pO2lmKHBvbHlzLmxlbmd0aD4wKXt2YXIgaW5zaWRlTG9jcz1qc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5Db25uZWN0ZWRFbGVtZW50TG9jYXRpb25GaWx0ZXIuZ2V0TG9jYXRpb25zKHRoaXMuZ2VvbVtsb2NhdGlvbnNJbmRleF0pO3RoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UzKGluc2lkZUxvY3MscG9seXMsbG9jUHRQb2x5KTtpZih0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXt0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bbG9jYXRpb25zSW5kZXhdPWxvY1B0UG9seVswXTt0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bcG9seUdlb21JbmRleF09bG9jUHRQb2x5WzFdO3JldHVybjt9fX07anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UzPWZ1bmN0aW9uKGxvY3MscG9seXMsbG9jUHRQb2x5KXtmb3IodmFyIGk9MDtpPGxvY3MubGVuZ3RoO2krKyl7dmFyIGxvYz1sb2NzW2ldO2Zvcih2YXIgaj0wO2o8cG9seXMubGVuZ3RoO2orKyl7dGhpcy5jb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZTQobG9jLHBvbHlzW2pdLGxvY1B0UG9seSk7aWYodGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlcbnJldHVybjt9fX07anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2U0PWZ1bmN0aW9uKHB0TG9jLHBvbHksbG9jUHRQb2x5KXt2YXIgcHQ9cHRMb2MuZ2V0Q29vcmRpbmF0ZSgpO2lmKGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUiE9PXRoaXMucHRMb2NhdG9yLmxvY2F0ZShwdCxwb2x5KSl7dGhpcy5taW5EaXN0YW5jZT0wLjA7bG9jUHRQb2x5WzBdPXB0TG9jO2xvY1B0UG9seVsxXT1uZXcganN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbihwb2x5LHB0KTtyZXR1cm47fX07anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUuY29tcHV0ZUZhY2V0RGlzdGFuY2U9ZnVuY3Rpb24oKXt2YXIgbG9jR2VvbT1bXTt2YXIgbGluZXMwPWpzdHMuZ2VvbS51dGlsLkxpbmVhckNvbXBvbmVudEV4dHJhY3Rlci5nZXRMaW5lcyh0aGlzLmdlb21bMF0pO3ZhciBsaW5lczE9anN0cy5nZW9tLnV0aWwuTGluZWFyQ29tcG9uZW50RXh0cmFjdGVyLmdldExpbmVzKHRoaXMuZ2VvbVsxXSk7dmFyIHB0czA9anN0cy5nZW9tLnV0aWwuUG9pbnRFeHRyYWN0ZXIuZ2V0UG9pbnRzKHRoaXMuZ2VvbVswXSk7dmFyIHB0czE9anN0cy5nZW9tLnV0aWwuUG9pbnRFeHRyYWN0ZXIuZ2V0UG9pbnRzKHRoaXMuZ2VvbVsxXSk7dGhpcy5jb21wdXRlTWluRGlzdGFuY2VMaW5lcyhsaW5lczAsbGluZXMxLGxvY0dlb20pO3RoaXMudXBkYXRlTWluRGlzdGFuY2UobG9jR2VvbSxmYWxzZSk7aWYodGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlcbnJldHVybjtsb2NHZW9tWzBdPW51bGw7bG9jR2VvbVsxXT1udWxsO3RoaXMuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXNQb2ludHMobGluZXMwLHB0czEsbG9jR2VvbSk7dGhpcy51cGRhdGVNaW5EaXN0YW5jZShsb2NHZW9tLGZhbHNlKTtpZih0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKVxucmV0dXJuO2xvY0dlb21bMF09bnVsbDtsb2NHZW9tWzFdPW51bGw7dGhpcy5jb21wdXRlTWluRGlzdGFuY2VMaW5lc1BvaW50cyhsaW5lczEscHRzMCxsb2NHZW9tKTt0aGlzLnVwZGF0ZU1pbkRpc3RhbmNlKGxvY0dlb20sdHJ1ZSk7aWYodGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlcbnJldHVybjtsb2NHZW9tWzBdPW51bGw7bG9jR2VvbVsxXT1udWxsO3RoaXMuY29tcHV0ZU1pbkRpc3RhbmNlUG9pbnRzKHB0czAscHRzMSxsb2NHZW9tKTt0aGlzLnVwZGF0ZU1pbkRpc3RhbmNlKGxvY0dlb20sZmFsc2UpO307anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXM9ZnVuY3Rpb24obGluZXMwLGxpbmVzMSxsb2NHZW9tKXtmb3IodmFyIGk9MDtpPGxpbmVzMC5sZW5ndGg7aSsrKXt2YXIgbGluZTA9bGluZXMwW2ldO2Zvcih2YXIgaj0wO2o8bGluZXMxLmxlbmd0aDtqKyspe3ZhciBsaW5lMT1saW5lczFbal07dGhpcy5jb21wdXRlTWluRGlzdGFuY2UobGluZTAsbGluZTEsbG9jR2VvbSk7aWYodGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlcbnJldHVybjt9fX07anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUuY29tcHV0ZU1pbkRpc3RhbmNlUG9pbnRzPWZ1bmN0aW9uKHBvaW50czAscG9pbnRzMSxsb2NHZW9tKXtmb3IodmFyIGk9MDtpPHBvaW50czAubGVuZ3RoO2krKyl7dmFyIHB0MD1wb2ludHMwW2ldO2Zvcih2YXIgaj0wO2o8cG9pbnRzMS5sZW5ndGg7aisrKXt2YXIgcHQxPXBvaW50czFbal07dmFyIGRpc3Q9cHQwLmdldENvb3JkaW5hdGUoKS5kaXN0YW5jZShwdDEuZ2V0Q29vcmRpbmF0ZSgpKTtpZihkaXN0PHRoaXMubWluRGlzdGFuY2Upe3RoaXMubWluRGlzdGFuY2U9ZGlzdDtsb2NHZW9tWzBdPW5ldyBqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5HZW9tZXRyeUxvY2F0aW9uKHB0MCwwLHB0MC5nZXRDb29yZGluYXRlKCkpO2xvY0dlb21bMV09bmV3IGpzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkdlb21ldHJ5TG9jYXRpb24ocHQxLDAscHQxLmdldENvb3JkaW5hdGUoKSk7fVxuaWYodGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlcbnJldHVybjt9fX07anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXNQb2ludHM9ZnVuY3Rpb24obGluZXMscG9pbnRzLGxvY0dlb20pe2Zvcih2YXIgaT0wO2k8bGluZXMubGVuZ3RoO2krKyl7dmFyIGxpbmU9bGluZXNbaV07Zm9yKHZhciBqPTA7ajxwb2ludHMubGVuZ3RoO2orKyl7dmFyIHB0PXBvaW50c1tqXTt0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZShsaW5lLHB0LGxvY0dlb20pO2lmKHRoaXMubWluRGlzdGFuY2U8PXRoaXMudGVybWluYXRlRGlzdGFuY2UpXG5yZXR1cm47fX19O2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AucHJvdG90eXBlLmNvbXB1dGVNaW5EaXN0YW5jZTI9ZnVuY3Rpb24obGluZTAsbGluZTEsbG9jR2VvbSl7aWYobGluZTEgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnQpe3RoaXMuY29tcHV0ZU1pbkRpc3RhbmNlMyhsaW5lMCxsaW5lMSxsb2NHZW9tKTtyZXR1cm47fVxuaWYobGluZTAuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKGxpbmUxLmdldEVudmVsb3BlSW50ZXJuYWwoKSk+dGhpcy5taW5EaXN0YW5jZSl7cmV0dXJuO31cbnZhciBjb29yZDA9bGluZTAuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgY29vcmQxPWxpbmUxLmdldENvb3JkaW5hdGVzKCk7Zm9yKHZhciBpPTA7aTxjb29yZDAubGVuZ3RoLTE7aSsrKXtmb3IodmFyIGo9MDtqPGNvb3JkMS5sZW5ndGgtMTtqKyspe3ZhciBkaXN0PWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZUxpbmVMaW5lKGNvb3JkMFtpXSxjb29yZDBbaSsxXSxjb29yZDFbal0sY29vcmQxW2orMV0pO2lmKGRpc3Q8dGhpcy5taW5EaXN0YW5jZSl7dGhpcy5taW5EaXN0YW5jZT1kaXN0O3ZhciBzZWcwPW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoY29vcmQwW2ldLGNvb3JkMFtpKzFdKTt2YXIgc2VnMT1uZXcganN0cy5nZW9tLkxpbmVTZWdtZW50KGNvb3JkMVtqXSxjb29yZDFbaisxXSk7dmFyIGNsb3Nlc3RQdD1zZWcwLmNsb3Nlc3RQb2ludHMoc2VnMSk7bG9jR2VvbVswXT1uZXcganN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbihsaW5lMCxpLGNsb3Nlc3RQdFswXSk7bG9jR2VvbVsxXT1uZXcganN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbihsaW5lMSxqLGNsb3Nlc3RQdFsxXSk7fVxuaWYodGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSl7cmV0dXJuO319fX07anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5wcm90b3R5cGUuY29tcHV0ZU1pbkRpc3RhbmNlMz1mdW5jdGlvbihsaW5lLHB0LGxvY0dlb20pe2lmKGxpbmUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKHB0LmdldEVudmVsb3BlSW50ZXJuYWwoKSk+dGhpcy5taW5EaXN0YW5jZSl7cmV0dXJuO31cbnZhciBjb29yZDA9bGluZS5nZXRDb29yZGluYXRlcygpO3ZhciBjb29yZD1wdC5nZXRDb29yZGluYXRlKCk7Zm9yKHZhciBpPTA7aTxjb29yZDAubGVuZ3RoLTE7aSsrKXt2YXIgZGlzdD1qc3RzLmFsZ29yaXRobS5DR0FsZ29yaXRobXMuZGlzdGFuY2VQb2ludExpbmUoY29vcmQsY29vcmQwW2ldLGNvb3JkMFtpKzFdKTtpZihkaXN0PHRoaXMubWluRGlzdGFuY2Upe3RoaXMubWluRGlzdGFuY2U9ZGlzdDt2YXIgc2VnPW5ldyBqc3RzLmdlb20uTGluZVNlZ21lbnQoY29vcmQwW2ldLGNvb3JkMFtpKzFdKTt2YXIgc2VnQ2xvc2VzdFBvaW50PXNlZy5jbG9zZXN0UG9pbnQoY29vcmQpO2xvY0dlb21bMF09bmV3IGpzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkdlb21ldHJ5TG9jYXRpb24obGluZSxpLHNlZ0Nsb3Nlc3RQb2ludCk7bG9jR2VvbVsxXT1uZXcganN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbihwdCwwLGNvb3JkKTt9XG5pZih0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXtyZXR1cm47fX19O2pzdHMuaW5kZXguc3RydHJlZS5TSVJ0cmVlPWZ1bmN0aW9uKG5vZGVDYXBhY2l0eSl7bm9kZUNhcGFjaXR5PW5vZGVDYXBhY2l0eXx8MTA7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5jYWxsKHRoaXMsbm9kZUNhcGFjaXR5KTt9O2pzdHMuaW5kZXguc3RydHJlZS5TSVJ0cmVlLnByb3RvdHlwZT1uZXcganN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZSgpO2pzdHMuaW5kZXguc3RydHJlZS5TSVJ0cmVlLmNvbnN0cnVjdG9yPWpzdHMuaW5kZXguc3RydHJlZS5TSVJ0cmVlO2pzdHMuaW5kZXguc3RydHJlZS5TSVJ0cmVlLnByb3RvdHlwZS5jb21wZXJhdG9yPXtjb21wYXJlOmZ1bmN0aW9uKG8xLG8yKXtyZXR1cm4gbzEuZ2V0Qm91bmRzKCkuZ2V0Q2VudHJlKCktbzIuZ2V0Qm91bmRzKCkuZ2V0Q2VudHJlKCk7fX07anN0cy5pbmRleC5zdHJ0cmVlLlNJUnRyZWUucHJvdG90eXBlLmludGVyc2VjdGlvbk9wPXtpbnRlcnNlY3RzOmZ1bmN0aW9uKGFCb3VuZHMsYkJvdW5kcyl7cmV0dXJuIGFCb3VuZHMuaW50ZXJzZWN0cyhiQm91bmRzKTt9fTtqc3RzLmluZGV4LnN0cnRyZWUuU0lSdHJlZS5wcm90b3R5cGUuY3JlYXRlTm9kZT1mdW5jdGlvbihsZXZlbCl7dmFyIEFic3RyYWN0Tm9kZT1mdW5jdGlvbihsZXZlbCl7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0Tm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtBYnN0cmFjdE5vZGUucHJvdG90eXBlPW5ldyBqc3RzLmluZGV4LnN0cnRyZWUuQWJzdHJhY3ROb2RlKCk7QWJzdHJhY3ROb2RlLmNvbnN0cnVjdG9yPUFic3RyYWN0Tm9kZTtBYnN0cmFjdE5vZGUucHJvdG90eXBlLmNvbXB1dGVCb3VuZHM9ZnVuY3Rpb24oKXt2YXIgYm91bmRzPW51bGwsY2hpbGRCb3VuZGFibGVzPXRoaXMuZ2V0Q2hpbGRCb3VuZGFibGVzKCksY2hpbGRCb3VuZGFibGU7Zm9yKHZhciBpPTAsbD1jaGlsZEJvdW5kYWJsZXMubGVuZ3RoO2k8bDtpKyspe2NoaWxkQm91bmRhYmxlPWNoaWxkQm91bmRhYmxlc1tpXTtpZihib3VuZHM9PT1udWxsKXtib3VuZHM9bmV3IGpzdHMuaW5kZXguc3RydHJlZS5JbnRlcnZhbChjaGlsZEJvdW5kYWJsZS5nZXRCb3VuZHMoKSk7fVxuZWxzZXtib3VuZHMuZXhwYW5kVG9JbmNsdWRlKGNoaWxkQm91bmRhYmxlLmdldEJvdW5kcygpKTt9fVxucmV0dXJuIGJvdW5kczt9O3JldHVybiBBYnN0cmFjdE5vZGU7fTtqc3RzLmluZGV4LnN0cnRyZWUuU0lSdHJlZS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHgxLHgyLGl0ZW0pe2pzdHMuaW5kZXguc3RydHJlZS5BYnN0cmFjdFNUUnRyZWUucHJvdG90eXBlLmluc2VydChuZXcganN0cy5pbmRleC5zdHJ0cmVlLkludGVydmFsKE1hdGgubWluKHgxLHgyKSxNYXRoLm1heCh4MSx4MikpLGl0ZW0pO307anN0cy5pbmRleC5zdHJ0cmVlLlNJUnRyZWUucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKHgxLHgyKXt4Mj14Mnx8eDE7anN0cy5pbmRleC5zdHJ0cmVlLkFic3RyYWN0U1RSdHJlZS5wcm90b3R5cGUucXVlcnkobmV3IGpzdHMuaW5kZXguc3RydHJlZS5JbnRlcnZhbChNYXRoLm1pbih4MSx4MiksTWF0aC5tYXgoeDEseDIpKSk7fTtqc3RzLmluZGV4LnN0cnRyZWUuU0lSdHJlZS5wcm90b3R5cGUuZ2V0SW50ZXJzZWN0c09wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uT3A7fTtqc3RzLmluZGV4LnN0cnRyZWUuU0lSdHJlZS5wcm90b3R5cGUuZ2V0Q29tcGFyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXBlcmF0b3I7fTtqc3RzLnNpbXBsaWZ5LkRvdWdsYXNQZXVja2VyU2ltcGxpZmllcj1mdW5jdGlvbihpbnB1dEdlb20pe3RoaXMuaW5wdXRHZW9tPWlucHV0R2VvbTt0aGlzLmlzRW5zdXJlVmFsaWRUb3BvbG9neT10cnVlO307anN0cy5zaW1wbGlmeS5Eb3VnbGFzUGV1Y2tlclNpbXBsaWZpZXIucHJvdG90eXBlLmlucHV0R2VvbT1udWxsO2pzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJTaW1wbGlmaWVyLnByb3RvdHlwZS5kaXN0YW5jZVRvbGVyYW5jZT1udWxsO2pzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJTaW1wbGlmaWVyLnByb3RvdHlwZS5pc0Vuc3VyZVZhbGlkVG9wb2xvZ3k9bnVsbDtqc3RzLnNpbXBsaWZ5LkRvdWdsYXNQZXVja2VyU2ltcGxpZmllci5zaW1wbGlmeT1mdW5jdGlvbihnZW9tLGRpc3RhbmNlVG9sZXJhbmNlKXt2YXIgdHNzPW5ldyBqc3RzLnNpbXBsaWZ5LkRvdWdsYXNQZXVja2VyU2ltcGxpZmllcihnZW9tKTt0c3Muc2V0RGlzdGFuY2VUb2xlcmFuY2UoZGlzdGFuY2VUb2xlcmFuY2UpO3JldHVybiB0c3MuZ2V0UmVzdWx0R2VvbWV0cnkoKTt9O2pzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJTaW1wbGlmaWVyLnByb3RvdHlwZS5zZXREaXN0YW5jZVRvbGVyYW5jZT1mdW5jdGlvbihkaXN0YW5jZVRvbGVyYW5jZSl7aWYoZGlzdGFuY2VUb2xlcmFuY2U8MC4wKXt0aHJvd1wiVG9sZXJhbmNlIG11c3QgYmUgbm9uLW5lZ2F0aXZlXCI7fVxudGhpcy5kaXN0YW5jZVRvbGVyYW5jZT1kaXN0YW5jZVRvbGVyYW5jZTt9O2pzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJTaW1wbGlmaWVyLnByb3RvdHlwZS5zZXRFbnN1cmVWYWxpZD1mdW5jdGlvbihpc0Vuc3VyZVZhbGlkVG9wb2xvZ3kpe3RoaXMuaXNFbnN1cmVWYWxpZFRvcG9sb2d5PWlzRW5zdXJlVmFsaWRUb3BvbG9neTt9O2pzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJTaW1wbGlmaWVyLnByb3RvdHlwZS5nZXRSZXN1bHRHZW9tZXRyeT1mdW5jdGlvbigpe2lmKHRoaXMuaW5wdXRHZW9tLmlzRW1wdHkoKSl7cmV0dXJuIHRoaXMuaW5wdXRHZW9tLmNsb25lKCk7fVxucmV0dXJuKG5ldyBqc3RzLnNpbXBsaWZ5LkRQVHJhbnNmb3JtZXIodGhpcy5kaXN0YW5jZVRvbGVyYW5jZSx0aGlzLmlzRW5zdXJlVmFsaWRUb3BvbG9neSkpLnRyYW5zZm9ybSh0aGlzLmlucHV0R2VvbSk7fTsoZnVuY3Rpb24oKXtqc3RzLm9wZXJhdGlvbi5wcmVkaWNhdGUuUmVjdGFuZ2xlQ29udGFpbnM9ZnVuY3Rpb24ocmVjdGFuZ2xlKXt0aGlzLnJlY3RFbnY9cmVjdGFuZ2xlLmdldEVudmVsb3BlSW50ZXJuYWwoKTt9XG5qc3RzLm9wZXJhdGlvbi5wcmVkaWNhdGUuUmVjdGFuZ2xlQ29udGFpbnMuY29udGFpbnM9ZnVuY3Rpb24ocmVjdGFuZ2xlLGIpe3ZhciByYz1uZXcganN0cy5vcGVyYXRpb24ucHJlZGljYXRlLlJlY3RhbmdsZUNvbnRhaW5zKHJlY3RhbmdsZSk7cmV0dXJuIHJjLmNvbnRhaW5zKGIpO31cbmpzdHMub3BlcmF0aW9uLnByZWRpY2F0ZS5SZWN0YW5nbGVDb250YWlucy5wcm90b3R5cGUucmVjdEVudj1udWxsO2pzdHMub3BlcmF0aW9uLnByZWRpY2F0ZS5SZWN0YW5nbGVDb250YWlucy5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZ2VvbSl7aWYoIXRoaXMucmVjdEVudi5jb250YWlucyhnZW9tLmdldEVudmVsb3BlSW50ZXJuYWwoKSkpXG5yZXR1cm4gZmFsc2U7aWYodGhpcy5pc0NvbnRhaW5lZEluQm91bmRhcnkoZ2VvbSkpXG5yZXR1cm4gZmFsc2U7cmV0dXJuIHRydWU7fVxuanN0cy5vcGVyYXRpb24ucHJlZGljYXRlLlJlY3RhbmdsZUNvbnRhaW5zLnByb3RvdHlwZS5pc0NvbnRhaW5lZEluQm91bmRhcnk9ZnVuY3Rpb24oZ2VvbSl7aWYoZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29uKXJldHVybiBmYWxzZTtpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvaW50KXJldHVybiB0aGlzLmlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5KGdlb20uZ2V0Q29vcmRpbmF0ZSgpKTtpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmcpcmV0dXJuIHRoaXMuaXNMaW5lU3RyaW5nQ29udGFpbmVkSW5Cb3VuZGFyeShnZW9tKTtmb3IodmFyIGk9MDtpPGdlb20uZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIGNvbXA9Z2VvbS5nZXRHZW9tZXRyeU4oaSk7aWYoIXRoaXMuaXNDb250YWluZWRJbkJvdW5kYXJ5KGNvbXApKVxucmV0dXJuIGZhbHNlO31cbnJldHVybiB0cnVlO31cbmpzdHMub3BlcmF0aW9uLnByZWRpY2F0ZS5SZWN0YW5nbGVDb250YWlucy5wcm90b3R5cGUuaXNQb2ludENvbnRhaW5lZEluQm91bmRhcnk9ZnVuY3Rpb24ocHQpe3JldHVybiBwdC54PT10aGlzLnJlY3RFbnYuZ2V0TWluWCgpfHxwdC54PT10aGlzLnJlY3RFbnYuZ2V0TWF4WCgpfHxwdC55PT10aGlzLnJlY3RFbnYuZ2V0TWluWSgpfHxwdC55PT10aGlzLnJlY3RFbnYuZ2V0TWF4WSgpO31cbmpzdHMub3BlcmF0aW9uLnByZWRpY2F0ZS5SZWN0YW5nbGVDb250YWlucy5wcm90b3R5cGUuaXNMaW5lU3RyaW5nQ29udGFpbmVkSW5Cb3VuZGFyeT1mdW5jdGlvbihsaW5lKXt2YXIgc2VxPWxpbmUuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCk7Zm9yKHZhciBpPTA7aTxzZXEubGVuZ3RoLTE7aSsrKXt2YXIgcDA9c2VxW2ldO3ZhciBwMT1zZXFbaSsxXTtpZighdGhpcy5pc0xpbmVTZWdtZW50Q29udGFpbmVkSW5Cb3VuZGFyeShwMCxwMSkpXG5yZXR1cm4gZmFsc2U7fVxucmV0dXJuIHRydWU7fVxuanN0cy5vcGVyYXRpb24ucHJlZGljYXRlLlJlY3RhbmdsZUNvbnRhaW5zLnByb3RvdHlwZS5pc0xpbmVTZWdtZW50Q29udGFpbmVkSW5Cb3VuZGFyeT1mdW5jdGlvbihwMCxwMSl7aWYocDAuZXF1YWxzKHAxKSlcbnJldHVybiB0aGlzLmlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5KHAwKTtpZihwMC54PT1wMS54KXtpZihwMC54PT10aGlzLnJlY3RFbnYuZ2V0TWluWCgpfHxwMC54PT10aGlzLnJlY3RFbnYuZ2V0TWF4WCgpKVxucmV0dXJuIHRydWU7fVxuZWxzZSBpZihwMC55PT1wMS55KXtpZihwMC55PT10aGlzLnJlY3RFbnYuZ2V0TWluWSgpfHxwMC55PT10aGlzLnJlY3RFbnYuZ2V0TWF4WSgpKVxucmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO319KSgpOyhmdW5jdGlvbigpe3ZhciBMb2NhdGlvbj1qc3RzLmdlb20uTG9jYXRpb247dmFyIFBvc2l0aW9uPWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uO2pzdHMuZ2VvbWdyYXBoLkRlcHRoPWZ1bmN0aW9uKCl7dGhpcy5kZXB0aD1bW10sW11dO2Zvcih2YXIgaT0wO2k8MjtpKyspe2Zvcih2YXIgaj0wO2o8MztqKyspe3RoaXMuZGVwdGhbaV1bal09anN0cy5nZW9tZ3JhcGguRGVwdGguTlVMTF9WQUxVRTt9fX07anN0cy5nZW9tZ3JhcGguRGVwdGguTlVMTF9WQUxVRT0tMTtqc3RzLmdlb21ncmFwaC5EZXB0aC5kZXB0aEF0TG9jYXRpb249ZnVuY3Rpb24obG9jYXRpb24pe2lmKGxvY2F0aW9uPT09TG9jYXRpb24uRVhURVJJT1IpXG5yZXR1cm4gMDtpZihsb2NhdGlvbj09PUxvY2F0aW9uLklOVEVSSU9SKVxucmV0dXJuIDE7cmV0dXJuIGpzdHMuZ2VvbWdyYXBoLkRlcHRoLk5VTExfVkFMVUU7fTtqc3RzLmdlb21ncmFwaC5EZXB0aC5wcm90b3R5cGUuZGVwdGg9bnVsbDtqc3RzLmdlb21ncmFwaC5EZXB0aC5wcm90b3R5cGUuZ2V0RGVwdGg9ZnVuY3Rpb24oZ2VvbUluZGV4LHBvc0luZGV4KXtyZXR1cm4gdGhpcy5kZXB0aFtnZW9tSW5kZXhdW3Bvc0luZGV4XTt9O2pzdHMuZ2VvbWdyYXBoLkRlcHRoLnByb3RvdHlwZS5zZXREZXB0aD1mdW5jdGlvbihnZW9tSW5kZXgscG9zSW5kZXgsZGVwdGhWYWx1ZSl7dGhpcy5kZXB0aFtnZW9tSW5kZXhdW3Bvc0luZGV4XT1kZXB0aFZhbHVlO307anN0cy5nZW9tZ3JhcGguRGVwdGgucHJvdG90eXBlLmdldExvY2F0aW9uPWZ1bmN0aW9uKGdlb21JbmRleCxwb3NJbmRleCl7aWYodGhpcy5kZXB0aFtnZW9tSW5kZXhdW3Bvc0luZGV4XTw9MClcbnJldHVybiBMb2NhdGlvbi5FWFRFUklPUjtyZXR1cm4gTG9jYXRpb24uSU5URVJJT1I7fTtqc3RzLmdlb21ncmFwaC5EZXB0aC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGdlb21JbmRleCxwb3NJbmRleCxsb2NhdGlvbil7aWYobG9jYXRpb249PT1Mb2NhdGlvbi5JTlRFUklPUilcbnRoaXMuZGVwdGhbZ2VvbUluZGV4XVtwb3NJbmRleF0rKzt9O2pzdHMuZ2VvbWdyYXBoLkRlcHRoLnByb3RvdHlwZS5pc051bGw9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjApe3JldHVybiB0aGlzLmlzTnVsbDIuYXBwbHkodGhpcyxhcmd1bWVudHMpO31cbmZvcih2YXIgaT0wO2k8MjtpKyspe2Zvcih2YXIgaj0wO2o8MztqKyspe2lmKHRoaXMuZGVwdGhbaV1bal0hPT1qc3RzLmdlb21ncmFwaC5EZXB0aC5OVUxMX1ZBTFVFKVxucmV0dXJuIGZhbHNlO319XG5yZXR1cm4gdHJ1ZTt9O2pzdHMuZ2VvbWdyYXBoLkRlcHRoLnByb3RvdHlwZS5pc051bGwyPWZ1bmN0aW9uKGdlb21JbmRleCl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtyZXR1cm4gdGhpcy5pc051bGwzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG5yZXR1cm4gdGhpcy5kZXB0aFtnZW9tSW5kZXhdWzFdPT1qc3RzLmdlb21ncmFwaC5EZXB0aC5OVUxMX1ZBTFVFO307anN0cy5nZW9tZ3JhcGguRGVwdGgucHJvdG90eXBlLmlzTnVsbDM9ZnVuY3Rpb24oZ2VvbUluZGV4LHBvc0luZGV4KXtyZXR1cm4gdGhpcy5kZXB0aFtnZW9tSW5kZXhdW3Bvc0luZGV4XT09anN0cy5nZW9tZ3JhcGguRGVwdGguTlVMTF9WQUxVRTt9O2pzdHMuZ2VvbWdyYXBoLkRlcHRoLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24obGJsKXtmb3IodmFyIGk9MDtpPDI7aSsrKXtmb3IodmFyIGo9MTtqPDM7aisrKXt2YXIgbG9jPWxibC5nZXRMb2NhdGlvbihpLGopO2lmKGxvYz09PUxvY2F0aW9uLkVYVEVSSU9SfHxsb2M9PT1Mb2NhdGlvbi5JTlRFUklPUil7aWYodGhpcy5pc051bGwoaSxqKSl7dGhpcy5kZXB0aFtpXVtqXT1qc3RzLmdlb21ncmFwaC5EZXB0aC5kZXB0aEF0TG9jYXRpb24obG9jKTt9ZWxzZVxudGhpcy5kZXB0aFtpXVtqXSs9anN0cy5nZW9tZ3JhcGguRGVwdGguZGVwdGhBdExvY2F0aW9uKGxvYyk7fX19fTtqc3RzLmdlb21ncmFwaC5EZXB0aC5wcm90b3R5cGUuZ2V0RGVsdGE9ZnVuY3Rpb24oZ2VvbUluZGV4KXtyZXR1cm4gdGhpcy5kZXB0aFtnZW9tSW5kZXhdW1Bvc2l0aW9uLlJJR0hUXS1cbnRoaXMuZGVwdGhbZ2VvbUluZGV4XVtQb3NpdGlvbi5MRUZUXTt9O2pzdHMuZ2VvbWdyYXBoLkRlcHRoLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MDtpPDI7aSsrKXtpZighdGhpcy5pc051bGwoaSkpe3ZhciBtaW5EZXB0aD10aGlzLmRlcHRoW2ldWzFdO2lmKHRoaXMuZGVwdGhbaV1bMl08bWluRGVwdGgpXG5taW5EZXB0aD10aGlzLmRlcHRoW2ldWzJdO2lmKG1pbkRlcHRoPDApXG5taW5EZXB0aD0wO2Zvcih2YXIgaj0xO2o8MztqKyspe3ZhciBuZXdWYWx1ZT0wO2lmKHRoaXMuZGVwdGhbaV1bal0+bWluRGVwdGgpXG5uZXdWYWx1ZT0xO3RoaXMuZGVwdGhbaV1bal09bmV3VmFsdWU7fX19fTtqc3RzLmdlb21ncmFwaC5EZXB0aC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4nQTogJyt0aGlzLmRlcHRoWzBdWzFdKycsJyt0aGlzLmRlcHRoWzBdWzJdKycgQjogJytcbnRoaXMuZGVwdGhbMV1bMV0rJywnK3RoaXMuZGVwdGhbMV1bMl07fTt9KSgpO2pzdHMuYWxnb3JpdGhtLkJvdW5kYXJ5Tm9kZVJ1bGU9ZnVuY3Rpb24oKXt9O2pzdHMuYWxnb3JpdGhtLkJvdW5kYXJ5Tm9kZVJ1bGUucHJvdG90eXBlLmlzSW5Cb3VuZGFyeT1mdW5jdGlvbihib3VuZGFyeUNvdW50KXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5hbGdvcml0aG0uTW9kMkJvdW5kYXJ5Tm9kZVJ1bGU9ZnVuY3Rpb24oKXt9O2pzdHMuYWxnb3JpdGhtLk1vZDJCb3VuZGFyeU5vZGVSdWxlLnByb3RvdHlwZT1uZXcganN0cy5hbGdvcml0aG0uQm91bmRhcnlOb2RlUnVsZSgpO2pzdHMuYWxnb3JpdGhtLk1vZDJCb3VuZGFyeU5vZGVSdWxlLnByb3RvdHlwZS5pc0luQm91bmRhcnk9ZnVuY3Rpb24oYm91bmRhcnlDb3VudCl7cmV0dXJuIGJvdW5kYXJ5Q291bnQlMj09PTE7fTtqc3RzLmFsZ29yaXRobS5Cb3VuZGFyeU5vZGVSdWxlLk1PRDJfQk9VTkRBUllfUlVMRT1uZXcganN0cy5hbGdvcml0aG0uTW9kMkJvdW5kYXJ5Tm9kZVJ1bGUoKTtqc3RzLmFsZ29yaXRobS5Cb3VuZGFyeU5vZGVSdWxlLk9HQ19TRlNfQk9VTkRBUllfUlVMRT1qc3RzLmFsZ29yaXRobS5Cb3VuZGFyeU5vZGVSdWxlLk1PRDJfQk9VTkRBUllfUlVMRTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5HZW9tZXRyeUxvY2F0aW9uPWZ1bmN0aW9uKGNvbXBvbmVudCxzZWdJbmRleCxwdCl7dGhpcy5jb21wb25lbnQ9Y29tcG9uZW50O3RoaXMuc2VnSW5kZXg9c2VnSW5kZXg7dGhpcy5wdD1wdDt9O2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkdlb21ldHJ5TG9jYXRpb24uSU5TSURFX0FSRUE9LTE7anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbi5wcm90b3R5cGUuY29tcG9uZW50PW51bGw7anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbi5wcm90b3R5cGUuc2VnSW5kZXg9bnVsbDtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5HZW9tZXRyeUxvY2F0aW9uLnByb3RvdHlwZS5wdD1udWxsO2pzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkdlb21ldHJ5TG9jYXRpb24ucHJvdG90eXBlLmdldEdlb21ldHJ5Q29tcG9uZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcG9uZW50O307anN0cy5vcGVyYXRpb24uZGlzdGFuY2UuR2VvbWV0cnlMb2NhdGlvbi5wcm90b3R5cGUuZ2V0U2VnbWVudEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnSW5kZXg7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5HZW9tZXRyeUxvY2F0aW9uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHQ7fTtqc3RzLm9wZXJhdGlvbi5kaXN0YW5jZS5HZW9tZXRyeUxvY2F0aW9uLnByb3RvdHlwZS5pc0luc2lkZUFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWdJbmRleD09PWpzdHMub3BlcmF0aW9uLmRpc3RhbmNlLkdlb21ldHJ5TG9jYXRpb24uSU5TSURFX0FSRUE7fTtqc3RzLmdlb20udXRpbC5Qb2ludEV4dHJhY3Rlcj1mdW5jdGlvbihwdHMpe3RoaXMucHRzPXB0czt9O2pzdHMuZ2VvbS51dGlsLlBvaW50RXh0cmFjdGVyLnByb3RvdHlwZT1uZXcganN0cy5nZW9tLkdlb21ldHJ5RmlsdGVyKCk7anN0cy5nZW9tLnV0aWwuUG9pbnRFeHRyYWN0ZXIucHJvdG90eXBlLnB0cz1udWxsO2pzdHMuZ2VvbS51dGlsLlBvaW50RXh0cmFjdGVyLmdldFBvaW50cz1mdW5jdGlvbihnZW9tLGxpc3Qpe2lmKGxpc3Q9PT11bmRlZmluZWQpe2xpc3Q9W107fVxuaWYoZ2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2ludCl7bGlzdC5wdXNoKGdlb20pO31lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9ufHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9pbnR8fGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nfHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7Z2VvbS5hcHBseShuZXcganN0cy5nZW9tLnV0aWwuUG9pbnRFeHRyYWN0ZXIobGlzdCkpO31cbnJldHVybiBsaXN0O307anN0cy5nZW9tLnV0aWwuUG9pbnRFeHRyYWN0ZXIucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihnZW9tKXtpZihnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvaW50KVxudGhpcy5wdHMucHVzaChnZW9tKTt9OyhmdW5jdGlvbigpe3ZhciBMb2NhdGlvbj1qc3RzLmdlb20uTG9jYXRpb247anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGVHcmFwaD1mdW5jdGlvbigpe3RoaXMubm9kZXM9bmV3IGpzdHMuZ2VvbWdyYXBoLk5vZGVNYXAobmV3IGpzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVOb2RlRmFjdG9yeSgpKTt9O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVOb2RlR3JhcGgucHJvdG90eXBlLm5vZGVzPW51bGw7anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGVHcmFwaC5wcm90b3R5cGUuYnVpbGQ9ZnVuY3Rpb24oZ2VvbUdyYXBoKXt0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25Ob2RlcyhnZW9tR3JhcGgsMCk7dGhpcy5jb3B5Tm9kZXNBbmRMYWJlbHMoZ2VvbUdyYXBoLDApO3ZhciBlZUJ1aWxkZXI9bmV3IGpzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVpbGRlcigpO3ZhciBlZUxpc3Q9ZWVCdWlsZGVyLmNvbXB1dGVFZGdlRW5kcyhnZW9tR3JhcGguZ2V0RWRnZUl0ZXJhdG9yKCkpO3RoaXMuaW5zZXJ0RWRnZUVuZHMoZWVMaXN0KTt9O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVOb2RlR3JhcGgucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb25Ob2Rlcz1mdW5jdGlvbihnZW9tR3JhcGgsYXJnSW5kZXgpe2Zvcih2YXIgZWRnZUl0PWdlb21HcmFwaC5nZXRFZGdlSXRlcmF0b3IoKTtlZGdlSXQuaGFzTmV4dCgpOyl7dmFyIGU9ZWRnZUl0Lm5leHQoKTt2YXIgZUxvYz1lLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oYXJnSW5kZXgpO2Zvcih2YXIgZWlJdD1lLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCkuaXRlcmF0b3IoKTtlaUl0Lmhhc05leHQoKTspe3ZhciBlaT1laUl0Lm5leHQoKTt2YXIgbj10aGlzLm5vZGVzLmFkZE5vZGUoZWkuY29vcmQpO2lmKGVMb2M9PT1Mb2NhdGlvbi5CT1VOREFSWSlcbm4uc2V0TGFiZWxCb3VuZGFyeShhcmdJbmRleCk7ZWxzZXtpZihuLmdldExhYmVsKCkuaXNOdWxsKGFyZ0luZGV4KSlcbm4uc2V0TGFiZWwoYXJnSW5kZXgsTG9jYXRpb24uSU5URVJJT1IpO319fX07anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGVHcmFwaC5wcm90b3R5cGUuY29weU5vZGVzQW5kTGFiZWxzPWZ1bmN0aW9uKGdlb21HcmFwaCxhcmdJbmRleCl7Zm9yKHZhciBub2RlSXQ9Z2VvbUdyYXBoLmdldE5vZGVJdGVyYXRvcigpO25vZGVJdC5oYXNOZXh0KCk7KXt2YXIgZ3JhcGhOb2RlPW5vZGVJdC5uZXh0KCk7dmFyIG5ld05vZGU9dGhpcy5ub2Rlcy5hZGROb2RlKGdyYXBoTm9kZS5nZXRDb29yZGluYXRlKCkpO25ld05vZGUuc2V0TGFiZWwoYXJnSW5kZXgsZ3JhcGhOb2RlLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oYXJnSW5kZXgpKTt9fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlTm9kZUdyYXBoLnByb3RvdHlwZS5pbnNlcnRFZGdlRW5kcz1mdW5jdGlvbihlZSl7Zm9yKHZhciBpPWVlLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZT1pLm5leHQoKTt0aGlzLm5vZGVzLmFkZChlKTt9fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlTm9kZUdyYXBoLnByb3RvdHlwZS5nZXROb2RlSXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlcy5pdGVyYXRvcigpO307fSkoKTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVTd2VlcExpbmVJbnRlcnNlY3Rvcj1mdW5jdGlvbigpe307anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlU3dlZXBMaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlPW5ldyBqc3RzLmdlb21ncmFwaC5pbmRleC5FZGdlU2V0SW50ZXJzZWN0b3IoKTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVTd2VlcExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuZXZlbnRzPVtdO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZVN3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5uT3ZlcmxhcHM9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVTd2VlcExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuY29tcHV0ZUludGVyc2VjdGlvbnM9ZnVuY3Rpb24oZWRnZXMsc2ksdGVzdEFsbFNlZ21lbnRzKXtpZihzaSBpbnN0YW5jZW9mIGphdmFzY3JpcHQudXRpbC5MaXN0KXt0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25zMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbmlmKHRlc3RBbGxTZWdtZW50cyl7dGhpcy5hZGQoZWRnZXMsbnVsbCk7fWVsc2V7dGhpcy5hZGQoZWRnZXMpO31cbnRoaXMuY29tcHV0ZUludGVyc2VjdGlvbnMzKHNpKTt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZVN3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9uczI9ZnVuY3Rpb24oZWRnZXMwLGVkZ2VzMSxzaSl7dGhpcy5hZGQoZWRnZXMwLGVkZ2VzMCk7dGhpcy5hZGQoZWRnZXMxLGVkZ2VzMSk7dGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uczMoc2kpO307anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlU3dlZXBMaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlZGdlLGVkZ2VTZXQpe2lmKGVkZ2UgaW5zdGFuY2VvZiBqYXZhc2NyaXB0LnV0aWwuTGlzdCl7dGhpcy5hZGQyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm47fVxudmFyIHB0cz1lZGdlLmdldENvb3JkaW5hdGVzKCk7Zm9yKHZhciBpPTA7aTxwdHMubGVuZ3RoLTE7aSsrKXt2YXIgc3M9bmV3IGpzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZVNlZ21lbnQoZWRnZSxpKTt2YXIgaW5zZXJ0RXZlbnQ9bmV3IGpzdHMuZ2VvbWdyYXBoLmluZGV4LlN3ZWVwTGluZUV2ZW50KHNzLmdldE1pblgoKSxzcyxlZGdlU2V0KTt0aGlzLmV2ZW50cy5wdXNoKGluc2VydEV2ZW50KTt0aGlzLmV2ZW50cy5wdXNoKG5ldyBqc3RzLmdlb21ncmFwaC5pbmRleC5Td2VlcExpbmVFdmVudChzcy5nZXRNYXhYKCksaW5zZXJ0RXZlbnQpKTt9fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TaW1wbGVTd2VlcExpbmVJbnRlcnNlY3Rvci5wcm90b3R5cGUuYWRkMj1mdW5jdGlvbihlZGdlcyxlZGdlU2V0KXtmb3IodmFyIGk9ZWRnZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBlZGdlPWkubmV4dCgpO2lmKGVkZ2VTZXQpe3RoaXMuYWRkKGVkZ2UsZWRnZVNldCk7fWVsc2V7dGhpcy5hZGQoZWRnZSxlZGdlKTt9fX07anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlU3dlZXBMaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLnByZXBhcmVFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29tcGFyZVRvKGIpO30pO2Zvcih2YXIgaT0wO2k8dGhpcy5ldmVudHMubGVuZ3RoO2krKyl7dmFyIGV2PXRoaXMuZXZlbnRzW2ldO2lmKGV2LmlzRGVsZXRlKCkpe2V2LmdldEluc2VydEV2ZW50KCkuc2V0RGVsZXRlRXZlbnRJbmRleChpKTt9fX07anN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlU3dlZXBMaW5lSW50ZXJzZWN0b3IucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb25zMz1mdW5jdGlvbihzaSl7dGhpcy5uT3ZlcmxhcHM9MDt0aGlzLnByZXBhcmVFdmVudHMoKTtmb3IodmFyIGk9MDtpPHRoaXMuZXZlbnRzLmxlbmd0aDtpKyspe3ZhciBldj10aGlzLmV2ZW50c1tpXTtpZihldi5pc0luc2VydCgpKXt0aGlzLnByb2Nlc3NPdmVybGFwcyhpLGV2LmdldERlbGV0ZUV2ZW50SW5kZXgoKSxldixzaSk7fX19O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNpbXBsZVN3ZWVwTGluZUludGVyc2VjdG9yLnByb3RvdHlwZS5wcm9jZXNzT3ZlcmxhcHM9ZnVuY3Rpb24oc3RhcnQsZW5kLGV2MCxzaSl7dmFyIHNzMD1ldjAuZ2V0T2JqZWN0KCk7Zm9yKHZhciBpPXN0YXJ0O2k8ZW5kO2krKyl7dmFyIGV2MT10aGlzLmV2ZW50c1tpXTtpZihldjEuaXNJbnNlcnQoKSl7dmFyIHNzMT1ldjEuZ2V0T2JqZWN0KCk7aWYoIWV2MC5pc1NhbWVMYWJlbChldjEpKXtzczAuY29tcHV0ZUludGVyc2VjdGlvbnMoc3MxLHNpKTt0aGlzLm5PdmVybGFwcysrO319fX1cbmpzdHMudHJpYW5ndWxhdGUuVm9yb25vaURpYWdyYW1CdWlsZGVyPWZ1bmN0aW9uKCl7dGhpcy5zaXRlQ29vcmRzPW51bGw7dGhpcy50b2xlcmFuY2U9MC4wO3RoaXMuc3ViZGl2PW51bGw7dGhpcy5jbGlwRW52PW51bGw7dGhpcy5kaWFncmFtRW52PW51bGw7fTtqc3RzLnRyaWFuZ3VsYXRlLlZvcm9ub2lEaWFncmFtQnVpbGRlci5wcm90b3R5cGUuc2V0U2l0ZXM9ZnVuY3Rpb24oKXt2YXIgYXJnPWFyZ3VtZW50c1swXTtpZihhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnl8fGFyZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Db29yZGluYXRlfHxhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnR8fGFyZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvaW50fHxhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZ3x8YXJnIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpTGluZVN0cmluZ3x8YXJnIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVhclJpbmd8fGFyZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29ufHxhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2x5Z29uKXt0aGlzLnNldFNpdGVzQnlHZW9tZXRyeShhcmcpO31lbHNle3RoaXMuc2V0U2l0ZXNCeUFycmF5KGFyZyk7fX07anN0cy50cmlhbmd1bGF0ZS5Wb3Jvbm9pRGlhZ3JhbUJ1aWxkZXIucHJvdG90eXBlLnNldFNpdGVzQnlHZW9tZXRyeT1mdW5jdGlvbihnZW9tKXt0aGlzLnNpdGVDb29yZHM9anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLmV4dHJhY3RVbmlxdWVDb29yZGluYXRlcyhnZW9tKTt9O2pzdHMudHJpYW5ndWxhdGUuVm9yb25vaURpYWdyYW1CdWlsZGVyLnByb3RvdHlwZS5zZXRTaXRlc0J5QXJyYXk9ZnVuY3Rpb24oY29vcmRzKXt0aGlzLnNpdGVDb29yZHM9anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLnVuaXF1ZShjb29yZHMpO307anN0cy50cmlhbmd1bGF0ZS5Wb3Jvbm9pRGlhZ3JhbUJ1aWxkZXIucHJvdG90eXBlLnNldENsaXBFbnZlbG9wZT1mdW5jdGlvbihjbGlwRW52KXt0aGlzLmNsaXBFbnY9Y2xpcEVudjt9O2pzdHMudHJpYW5ndWxhdGUuVm9yb25vaURpYWdyYW1CdWlsZGVyLnByb3RvdHlwZS5zZXRUb2xlcmFuY2U9ZnVuY3Rpb24odG9sZXJhbmNlKVxue3RoaXMudG9sZXJhbmNlPXRvbGVyYW5jZTt9O2pzdHMudHJpYW5ndWxhdGUuVm9yb25vaURpYWdyYW1CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24oKXtpZih0aGlzLnN1YmRpdiE9PW51bGwpe3JldHVybjt9XG52YXIgc2l0ZUVudixleHBhbmRCeSx2ZXJ0aWNlcyx0cmlhbmd1bGF0b3I7c2l0ZUVudj1qc3RzLnRyaWFuZ3VsYXRlLkRlbGF1bmF5VHJpYW5ndWxhdGlvbkJ1aWxkZXIuZW52ZWxvcGUodGhpcy5zaXRlQ29vcmRzKTt0aGlzLmRpYWdyYW1FbnY9c2l0ZUVudjtleHBhbmRCeT1NYXRoLm1heCh0aGlzLmRpYWdyYW1FbnYuZ2V0V2lkdGgoKSx0aGlzLmRpYWdyYW1FbnYuZ2V0SGVpZ2h0KCkpO3RoaXMuZGlhZ3JhbUVudi5leHBhbmRCeShleHBhbmRCeSk7aWYodGhpcy5jbGlwRW52IT09bnVsbCl7dGhpcy5kaWFncmFtRW52LmV4cGFuZFRvSW5jbHVkZSh0aGlzLmNsaXBFbnYpO31cbnZlcnRpY2VzPWpzdHMudHJpYW5ndWxhdGUuRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlci50b1ZlcnRpY2VzKHRoaXMuc2l0ZUNvb3Jkcyk7dGhpcy5zdWJkaXY9bmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbihzaXRlRW52LHRoaXMudG9sZXJhbmNlKTt0cmlhbmd1bGF0b3I9bmV3IGpzdHMudHJpYW5ndWxhdGUuSW5jcmVtZW50YWxEZWxhdW5heVRyaWFuZ3VsYXRvcih0aGlzLnN1YmRpdik7dHJpYW5ndWxhdG9yLmluc2VydFNpdGVzKHZlcnRpY2VzKTt9O2pzdHMudHJpYW5ndWxhdGUuVm9yb25vaURpYWdyYW1CdWlsZGVyLnByb3RvdHlwZS5nZXRTdWJkaXZpc2lvbj1mdW5jdGlvbigpe3RoaXMuY3JlYXRlKCk7cmV0dXJuIHRoaXMuc3ViZGl2O307anN0cy50cmlhbmd1bGF0ZS5Wb3Jvbm9pRGlhZ3JhbUJ1aWxkZXIucHJvdG90eXBlLmdldERpYWdyYW09ZnVuY3Rpb24oZ2VvbUZhY3Qpe3RoaXMuY3JlYXRlKCk7dmFyIHBvbHlzPXRoaXMuc3ViZGl2LmdldFZvcm9ub2lEaWFncmFtKGdlb21GYWN0KTtyZXR1cm4gdGhpcy5jbGlwR2VvbWV0cnlDb2xsZWN0aW9uKHBvbHlzLHRoaXMuZGlhZ3JhbUVudik7fTtqc3RzLnRyaWFuZ3VsYXRlLlZvcm9ub2lEaWFncmFtQnVpbGRlci5wcm90b3R5cGUuY2xpcEdlb21ldHJ5Q29sbGVjdGlvbj1mdW5jdGlvbihnZW9tLGNsaXBFbnYpe3ZhciBjbGlwUG9seSxjbGlwcGVkLGksaWwsZyxyZXN1bHQ7Y2xpcFBvbHk9Z2VvbS5nZXRGYWN0b3J5KCkudG9HZW9tZXRyeShjbGlwRW52KTtjbGlwcGVkPVtdO2k9MCxpbD1nZW9tLmdldE51bUdlb21ldHJpZXMoKTtmb3IoaTtpPGlsO2krKyl7Zz1nZW9tLmdldEdlb21ldHJ5TihpKTtyZXN1bHQ9bnVsbDtpZihjbGlwRW52LmNvbnRhaW5zKGcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7cmVzdWx0PWc7fVxuZWxzZSBpZihjbGlwRW52LmludGVyc2VjdHMoZy5nZXRFbnZlbG9wZUludGVybmFsKCkpKXtyZXN1bHQ9Y2xpcFBvbHkuaW50ZXJzZWN0aW9uKGcpO31cbmlmKHJlc3VsdCE9PW51bGwmJiFyZXN1bHQuaXNFbXB0eSgpKXtjbGlwcGVkLnB1c2gocmVzdWx0KTt9fVxucmV0dXJuIGdlb20uZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihjbGlwcGVkKTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLkluZGV4ZWROZXN0ZWRSaW5nVGVzdGVyPWZ1bmN0aW9uKGdyYXBoKXt0aGlzLmdyYXBoPWdyYXBoO3RoaXMucmluZ3M9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt0aGlzLnRvdGFsRW52PW5ldyBqc3RzLmdlb20uRW52ZWxvcGUoKTt0aGlzLmluZGV4PW51bGw7dGhpcy5uZXN0ZWRQdD1udWxsO307anN0cy5vcGVyYXRpb24udmFsaWQuSW5kZXhlZE5lc3RlZFJpbmdUZXN0ZXIucHJvdG90eXBlLmdldE5lc3RlZFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmVzdGVkUHQ7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5JbmRleGVkTmVzdGVkUmluZ1Rlc3Rlci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHJpbmcpe3RoaXMucmluZ3MuYWRkKHJpbmcpO3RoaXMudG90YWxFbnYuZXhwYW5kVG9JbmNsdWRlKHJpbmcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKTt9O2pzdHMub3BlcmF0aW9uLnZhbGlkLkluZGV4ZWROZXN0ZWRSaW5nVGVzdGVyLnByb3RvdHlwZS5pc05vbk5lc3RlZD1mdW5jdGlvbigpe3RoaXMuYnVpbGRJbmRleCgpO2Zvcih2YXIgaT0wO2k8dGhpcy5yaW5ncy5zaXplKCk7aSsrKXt2YXIgaW5uZXJSaW5nPXRoaXMucmluZ3MuZ2V0KGkpO3ZhciBpbm5lclJpbmdQdHM9aW5uZXJSaW5nLmdldENvb3JkaW5hdGVzKCk7dmFyIHJlc3VsdHM9dGhpcy5pbmRleC5xdWVyeShpbm5lclJpbmcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKTtmb3IodmFyIGo9MDtqPHJlc3VsdHMubGVuZ3RoO2orKyl7dmFyIHNlYXJjaFJpbmc9cmVzdWx0c1tqXTt2YXIgc2VhcmNoUmluZ1B0cz1zZWFyY2hSaW5nLmdldENvb3JkaW5hdGVzKCk7aWYoaW5uZXJSaW5nPT1zZWFyY2hSaW5nKXtjb250aW51ZTt9XG5pZighaW5uZXJSaW5nLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHNlYXJjaFJpbmcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7Y29udGludWU7fVxudmFyIGlubmVyUmluZ1B0PWpzdHMub3BlcmF0aW9uLnZhbGlkLklzVmFsaWRPcC5maW5kUHROb3ROb2RlKGlubmVyUmluZ1B0cyxzZWFyY2hSaW5nLHRoaXMuZ3JhcGgpO2lmKGlubmVyUmluZ1B0PT1udWxsKXtjb250aW51ZTt9XG52YXIgaXNJbnNpZGU9anN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzUG9pbnRJblJpbmcoaW5uZXJSaW5nUHQsc2VhcmNoUmluZ1B0cyk7aWYoaXNJbnNpZGUpe3RoaXMubmVzdGVkUHQ9aW5uZXJSaW5nUHQ7cmV0dXJuIGZhbHNlO319fVxucmV0dXJuIHRydWU7fTtqc3RzLm9wZXJhdGlvbi52YWxpZC5JbmRleGVkTmVzdGVkUmluZ1Rlc3Rlci5wcm90b3R5cGUuYnVpbGRJbmRleD1mdW5jdGlvbigpe3RoaXMuaW5kZXg9bmV3IGpzdHMuaW5kZXguc3RydHJlZS5TVFJ0cmVlKCk7Zm9yKHZhciBpPTA7aTx0aGlzLnJpbmdzLnNpemUoKTtpKyspe3ZhciByaW5nPXRoaXMucmluZ3MuZ2V0KGkpO3ZhciBlbnY9cmluZy5nZXRFbnZlbG9wZUludGVybmFsKCk7dGhpcy5pbmRleC5pbnNlcnQoZW52LHJpbmcpO319O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW49ZnVuY3Rpb24obWNlLGNoYWluSW5kZXgpe3RoaXMubWNlPW1jZTt0aGlzLmNoYWluSW5kZXg9Y2hhaW5JbmRleDt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLm1jZT1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4Lk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmNoYWluSW5kZXg9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5Nb25vdG9uZUNoYWluLnByb3RvdHlwZS5jb21wdXRlSW50ZXJzZWN0aW9ucz1mdW5jdGlvbihtYyxzaSl7dGhpcy5tY2UuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbih0aGlzLmNoYWluSW5kZXgsbWMubWNlLG1jLmNoYWluSW5kZXgsc2kpO307anN0cy5ub2RpbmcuU2VnbWVudE5vZGU9ZnVuY3Rpb24oc2VnU3RyaW5nLGNvb3JkLHNlZ21lbnRJbmRleCxzZWdtZW50T2N0YW50KXt0aGlzLnNlZ1N0cmluZz1zZWdTdHJpbmc7dGhpcy5jb29yZD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoY29vcmQpO3RoaXMuc2VnbWVudEluZGV4PXNlZ21lbnRJbmRleDt0aGlzLnNlZ21lbnRPY3RhbnQ9c2VnbWVudE9jdGFudDt0aGlzLl9pc0ludGVyaW9yPSFjb29yZC5lcXVhbHMyRChzZWdTdHJpbmcuZ2V0Q29vcmRpbmF0ZShzZWdtZW50SW5kZXgpKTt9O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlLnByb3RvdHlwZS5zZWdTdHJpbmc9bnVsbDtqc3RzLm5vZGluZy5TZWdtZW50Tm9kZS5wcm90b3R5cGUuY29vcmQ9bnVsbDtqc3RzLm5vZGluZy5TZWdtZW50Tm9kZS5wcm90b3R5cGUuc2VnbWVudEluZGV4PW51bGw7anN0cy5ub2RpbmcuU2VnbWVudE5vZGUucHJvdG90eXBlLnNlZ21lbnRPY3RhbnQ9bnVsbDtqc3RzLm5vZGluZy5TZWdtZW50Tm9kZS5wcm90b3R5cGUuX2lzSW50ZXJpb3I9bnVsbDtqc3RzLm5vZGluZy5TZWdtZW50Tm9kZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb3JkO307anN0cy5ub2RpbmcuU2VnbWVudE5vZGUucHJvdG90eXBlLmlzSW50ZXJpb3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJbnRlcmlvcjt9O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlLnByb3RvdHlwZS5pc0VuZFBvaW50PWZ1bmN0aW9uKG1heFNlZ21lbnRJbmRleCl7aWYodGhpcy5zZWdtZW50SW5kZXg9PT0wJiYhdGhpcy5faXNJbnRlcmlvcilyZXR1cm4gdHJ1ZTtpZih0aGlzLnNlZ21lbnRJbmRleD09PXRoaXMubWF4U2VnbWVudEluZGV4KXJldHVybiB0cnVlO3JldHVybiBmYWxzZTt9O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24ob2JqKXt2YXIgb3RoZXI9b2JqO2lmKHRoaXMuc2VnbWVudEluZGV4PG90aGVyLnNlZ21lbnRJbmRleClyZXR1cm4tMTtpZih0aGlzLnNlZ21lbnRJbmRleD5vdGhlci5zZWdtZW50SW5kZXgpcmV0dXJuIDE7aWYodGhpcy5jb29yZC5lcXVhbHMyRChvdGhlci5jb29yZCkpcmV0dXJuIDA7cmV0dXJuIGpzdHMubm9kaW5nLlNlZ21lbnRQb2ludENvbXBhcmF0b3IuY29tcGFyZSh0aGlzLnNlZ21lbnRPY3RhbnQsdGhpcy5jb29yZCxvdGhlci5jb29yZCk7fTsoZnVuY3Rpb24oKXtqc3RzLmlvLkdlb0pTT05Xcml0ZXI9ZnVuY3Rpb24oKXt0aGlzLnBhcnNlcj1uZXcganN0cy5pby5HZW9KU09OUGFyc2VyKHRoaXMuZ2VvbWV0cnlGYWN0b3J5KTt9O2pzdHMuaW8uR2VvSlNPTldyaXRlci5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZ2VvbWV0cnkpe3ZhciBnZW9Kc29uPXRoaXMucGFyc2VyLndyaXRlKGdlb21ldHJ5KTtyZXR1cm4gZ2VvSnNvbjt9O30pKCk7anN0cy5pby5PcGVuTGF5ZXJzUGFyc2VyPWZ1bmN0aW9uKGdlb21ldHJ5RmFjdG9yeSl7dGhpcy5nZW9tZXRyeUZhY3Rvcnk9Z2VvbWV0cnlGYWN0b3J5fHxuZXcganN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeSgpO307anN0cy5pby5PcGVuTGF5ZXJzUGFyc2VyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGdlb21ldHJ5KXtpZihnZW9tZXRyeS5DTEFTU19OQU1FPT09J09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQnKXtyZXR1cm4gdGhpcy5jb252ZXJ0RnJvbVBvaW50KGdlb21ldHJ5KTt9ZWxzZSBpZihnZW9tZXRyeS5DTEFTU19OQU1FPT09J09wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZycpe3JldHVybiB0aGlzLmNvbnZlcnRGcm9tTGluZVN0cmluZyhnZW9tZXRyeSk7fWVsc2UgaWYoZ2VvbWV0cnkuQ0xBU1NfTkFNRT09PSdPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcnKXtyZXR1cm4gdGhpcy5jb252ZXJ0RnJvbUxpbmVhclJpbmcoZ2VvbWV0cnkpO31lbHNlIGlmKGdlb21ldHJ5LkNMQVNTX05BTUU9PT0nT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uJyl7cmV0dXJuIHRoaXMuY29udmVydEZyb21Qb2x5Z29uKGdlb21ldHJ5KTt9ZWxzZSBpZihnZW9tZXRyeS5DTEFTU19OQU1FPT09J09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCcpe3JldHVybiB0aGlzLmNvbnZlcnRGcm9tTXVsdGlQb2ludChnZW9tZXRyeSk7fWVsc2UgaWYoZ2VvbWV0cnkuQ0xBU1NfTkFNRT09PSdPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZycpe3JldHVybiB0aGlzLmNvbnZlcnRGcm9tTXVsdGlMaW5lU3RyaW5nKGdlb21ldHJ5KTt9ZWxzZSBpZihnZW9tZXRyeS5DTEFTU19OQU1FPT09J09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uJyl7cmV0dXJuIHRoaXMuY29udmVydEZyb21NdWx0aVBvbHlnb24oZ2VvbWV0cnkpO31lbHNlIGlmKGdlb21ldHJ5LkNMQVNTX05BTUU9PT0nT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uJyl7cmV0dXJuIHRoaXMuY29udmVydEZyb21Db2xsZWN0aW9uKGdlb21ldHJ5KTt9fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRGcm9tUG9pbnQ9ZnVuY3Rpb24ocG9pbnQpe3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2ludChuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUocG9pbnQueCxwb2ludC55KSk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRGcm9tTGluZVN0cmluZz1mdW5jdGlvbihsaW5lU3RyaW5nKXt2YXIgaTt2YXIgY29vcmRpbmF0ZXM9W107Zm9yKGk9MDtpPGxpbmVTdHJpbmcuY29tcG9uZW50cy5sZW5ndGg7aSsrKXtjb29yZGluYXRlcy5wdXNoKG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShsaW5lU3RyaW5nLmNvbXBvbmVudHNbaV0ueCxsaW5lU3RyaW5nLmNvbXBvbmVudHNbaV0ueSkpO31cbnJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKGNvb3JkaW5hdGVzKTt9O2pzdHMuaW8uT3BlbkxheWVyc1BhcnNlci5wcm90b3R5cGUuY29udmVydEZyb21MaW5lYXJSaW5nPWZ1bmN0aW9uKGxpbmVhclJpbmcpe3ZhciBpO3ZhciBjb29yZGluYXRlcz1bXTtmb3IoaT0wO2k8bGluZWFyUmluZy5jb21wb25lbnRzLmxlbmd0aDtpKyspe2Nvb3JkaW5hdGVzLnB1c2gobmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGxpbmVhclJpbmcuY29tcG9uZW50c1tpXS54LGxpbmVhclJpbmcuY29tcG9uZW50c1tpXS55KSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoY29vcmRpbmF0ZXMpO307anN0cy5pby5PcGVuTGF5ZXJzUGFyc2VyLnByb3RvdHlwZS5jb252ZXJ0RnJvbVBvbHlnb249ZnVuY3Rpb24ocG9seWdvbil7dmFyIGk7dmFyIHNoZWxsPW51bGw7dmFyIGhvbGVzPVtdO2ZvcihpPTA7aTxwb2x5Z29uLmNvbXBvbmVudHMubGVuZ3RoO2krKyl7dmFyIGxpbmVhclJpbmc9dGhpcy5jb252ZXJ0RnJvbUxpbmVhclJpbmcocG9seWdvbi5jb21wb25lbnRzW2ldKTtpZihpPT09MCl7c2hlbGw9bGluZWFyUmluZzt9ZWxzZXtob2xlcy5wdXNoKGxpbmVhclJpbmcpO319XG5yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9seWdvbihzaGVsbCxob2xlcyk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRGcm9tTXVsdGlQb2ludD1mdW5jdGlvbihtdWx0aVBvaW50KXt2YXIgaTt2YXIgcG9pbnRzPVtdO2ZvcihpPTA7aTxtdWx0aVBvaW50LmNvbXBvbmVudHMubGVuZ3RoO2krKyl7cG9pbnRzLnB1c2godGhpcy5jb252ZXJ0RnJvbVBvaW50KG11bHRpUG9pbnQuY29tcG9uZW50c1tpXSkpO31cbnJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvaW50KHBvaW50cyk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRGcm9tTXVsdGlMaW5lU3RyaW5nPWZ1bmN0aW9uKG11bHRpTGluZVN0cmluZyl7dmFyIGk7dmFyIGxpbmVTdHJpbmdzPVtdO2ZvcihpPTA7aTxtdWx0aUxpbmVTdHJpbmcuY29tcG9uZW50cy5sZW5ndGg7aSsrKXtsaW5lU3RyaW5ncy5wdXNoKHRoaXMuY29udmVydEZyb21MaW5lU3RyaW5nKG11bHRpTGluZVN0cmluZy5jb21wb25lbnRzW2ldKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyhsaW5lU3RyaW5ncyk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRGcm9tTXVsdGlQb2x5Z29uPWZ1bmN0aW9uKG11bHRpUG9seWdvbil7dmFyIGk7dmFyIHBvbHlnb25zPVtdO2ZvcihpPTA7aTxtdWx0aVBvbHlnb24uY29tcG9uZW50cy5sZW5ndGg7aSsrKXtwb2x5Z29ucy5wdXNoKHRoaXMuY29udmVydEZyb21Qb2x5Z29uKG11bHRpUG9seWdvbi5jb21wb25lbnRzW2ldKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpUG9seWdvbihwb2x5Z29ucyk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRGcm9tQ29sbGVjdGlvbj1mdW5jdGlvbihjb2xsZWN0aW9uKXt2YXIgaTt2YXIgZ2VvbWV0cmllcz1bXTtmb3IoaT0wO2k8Y29sbGVjdGlvbi5jb21wb25lbnRzLmxlbmd0aDtpKyspe2dlb21ldHJpZXMucHVzaCh0aGlzLnJlYWQoY29sbGVjdGlvbi5jb21wb25lbnRzW2ldKSk7fVxucmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihnZW9tZXRyaWVzKTt9O2pzdHMuaW8uT3BlbkxheWVyc1BhcnNlci5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZ2VvbWV0cnkpe2lmKGdlb21ldHJ5LkNMQVNTX05BTUU9PT0nanN0cy5nZW9tLlBvaW50Jyl7cmV0dXJuIHRoaXMuY29udmVydFRvUG9pbnQoZ2VvbWV0cnkuY29vcmRpbmF0ZSk7fWVsc2UgaWYoZ2VvbWV0cnkuQ0xBU1NfTkFNRT09PSdqc3RzLmdlb20uTGluZVN0cmluZycpe3JldHVybiB0aGlzLmNvbnZlcnRUb0xpbmVTdHJpbmcoZ2VvbWV0cnkpO31lbHNlIGlmKGdlb21ldHJ5LkNMQVNTX05BTUU9PT0nanN0cy5nZW9tLkxpbmVhclJpbmcnKXtyZXR1cm4gdGhpcy5jb252ZXJ0VG9MaW5lYXJSaW5nKGdlb21ldHJ5KTt9ZWxzZSBpZihnZW9tZXRyeS5DTEFTU19OQU1FPT09J2pzdHMuZ2VvbS5Qb2x5Z29uJyl7cmV0dXJuIHRoaXMuY29udmVydFRvUG9seWdvbihnZW9tZXRyeSk7fWVsc2UgaWYoZ2VvbWV0cnkuQ0xBU1NfTkFNRT09PSdqc3RzLmdlb20uTXVsdGlQb2ludCcpe3JldHVybiB0aGlzLmNvbnZlcnRUb011bHRpUG9pbnQoZ2VvbWV0cnkpO31lbHNlIGlmKGdlb21ldHJ5LkNMQVNTX05BTUU9PT0nanN0cy5nZW9tLk11bHRpTGluZVN0cmluZycpe3JldHVybiB0aGlzLmNvbnZlcnRUb011bHRpTGluZVN0cmluZyhnZW9tZXRyeSk7fWVsc2UgaWYoZ2VvbWV0cnkuQ0xBU1NfTkFNRT09PSdqc3RzLmdlb20uTXVsdGlQb2x5Z29uJyl7cmV0dXJuIHRoaXMuY29udmVydFRvTXVsdGlQb2x5Z29uKGdlb21ldHJ5KTt9ZWxzZSBpZihnZW9tZXRyeS5DTEFTU19OQU1FPT09J2pzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24nKXtyZXR1cm4gdGhpcy5jb252ZXJ0VG9Db2xsZWN0aW9uKGdlb21ldHJ5KTt9fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRUb1BvaW50PWZ1bmN0aW9uKGNvb3JkaW5hdGUpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjb29yZGluYXRlLngsY29vcmRpbmF0ZS55KTt9O2pzdHMuaW8uT3BlbkxheWVyc1BhcnNlci5wcm90b3R5cGUuY29udmVydFRvTGluZVN0cmluZz1mdW5jdGlvbihsaW5lU3RyaW5nKXt2YXIgaTt2YXIgcG9pbnRzPVtdO2ZvcihpPTA7aTxsaW5lU3RyaW5nLnBvaW50cy5sZW5ndGg7aSsrKXt2YXIgY29vcmRpbmF0ZT1saW5lU3RyaW5nLnBvaW50c1tpXTtwb2ludHMucHVzaCh0aGlzLmNvbnZlcnRUb1BvaW50KGNvb3JkaW5hdGUpKTt9XG5yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhwb2ludHMpO307anN0cy5pby5PcGVuTGF5ZXJzUGFyc2VyLnByb3RvdHlwZS5jb252ZXJ0VG9MaW5lYXJSaW5nPWZ1bmN0aW9uKGxpbmVhclJpbmcpe3ZhciBpO3ZhciBwb2ludHM9W107Zm9yKGk9MDtpPGxpbmVhclJpbmcucG9pbnRzLmxlbmd0aDtpKyspe3ZhciBjb29yZGluYXRlPWxpbmVhclJpbmcucG9pbnRzW2ldO3BvaW50cy5wdXNoKHRoaXMuY29udmVydFRvUG9pbnQoY29vcmRpbmF0ZSkpO31cbnJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKHBvaW50cyk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRUb1BvbHlnb249ZnVuY3Rpb24ocG9seWdvbil7dmFyIGk7dmFyIHJpbmdzPVtdO3JpbmdzLnB1c2godGhpcy5jb252ZXJ0VG9MaW5lYXJSaW5nKHBvbHlnb24uc2hlbGwpKTtmb3IoaT0wO2k8cG9seWdvbi5ob2xlcy5sZW5ndGg7aSsrKXt2YXIgcmluZz1wb2x5Z29uLmhvbGVzW2ldO3JpbmdzLnB1c2godGhpcy5jb252ZXJ0VG9MaW5lYXJSaW5nKHJpbmcpKTt9XG5yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihyaW5ncyk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRUb011bHRpUG9pbnQ9ZnVuY3Rpb24obXVsdGlQb2ludCl7dmFyIGk7dmFyIHBvaW50cz1bXTtmb3IoaT0wO2k8bXVsdGlQb2ludC5nZW9tZXRyaWVzLmxlbmd0aDtpKyspe3ZhciBjb29yZGluYXRlPW11bHRpUG9pbnQuZ2VvbWV0cmllc1tpXS5jb29yZGluYXRlO3BvaW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNvb3JkaW5hdGUueCxjb29yZGluYXRlLnkpKTt9XG5yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludChwb2ludHMpO307anN0cy5pby5PcGVuTGF5ZXJzUGFyc2VyLnByb3RvdHlwZS5jb252ZXJ0VG9NdWx0aUxpbmVTdHJpbmc9ZnVuY3Rpb24obXVsdGlMaW5lU3RyaW5nKXt2YXIgaTt2YXIgbGluZVN0cmluZ3M9W107Zm9yKGk9MDtpPG11bHRpTGluZVN0cmluZy5nZW9tZXRyaWVzLmxlbmd0aDtpKyspe2xpbmVTdHJpbmdzLnB1c2godGhpcy5jb252ZXJ0VG9MaW5lU3RyaW5nKG11bHRpTGluZVN0cmluZy5nZW9tZXRyaWVzW2ldKSk7fVxucmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhsaW5lU3RyaW5ncyk7fTtqc3RzLmlvLk9wZW5MYXllcnNQYXJzZXIucHJvdG90eXBlLmNvbnZlcnRUb011bHRpUG9seWdvbj1mdW5jdGlvbihtdWx0aVBvbHlnb24pe3ZhciBpO3ZhciBwb2x5Z29ucz1bXTtmb3IoaT0wO2k8bXVsdGlQb2x5Z29uLmdlb21ldHJpZXMubGVuZ3RoO2krKyl7cG9seWdvbnMucHVzaCh0aGlzLmNvbnZlcnRUb1BvbHlnb24obXVsdGlQb2x5Z29uLmdlb21ldHJpZXNbaV0pKTt9XG5yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKHBvbHlnb25zKTt9O2pzdHMuaW8uT3BlbkxheWVyc1BhcnNlci5wcm90b3R5cGUuY29udmVydFRvQ29sbGVjdGlvbj1mdW5jdGlvbihnZW9tZXRyeUNvbGxlY3Rpb24pe3ZhciBpO3ZhciBnZW9tZXRyaWVzPVtdO2ZvcihpPTA7aTxnZW9tZXRyeUNvbGxlY3Rpb24uZ2VvbWV0cmllcy5sZW5ndGg7aSsrKXt2YXIgZ2VvbWV0cnk9Z2VvbWV0cnlDb2xsZWN0aW9uLmdlb21ldHJpZXNbaV07dmFyIGdlb21ldHJ5T3BlbkxheWVycz10aGlzLndyaXRlKGdlb21ldHJ5KTtnZW9tZXRyaWVzLnB1c2goZ2VvbWV0cnlPcGVuTGF5ZXJzKTt9XG5yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbihnZW9tZXRyaWVzKTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuUXVhZHRyZWU9ZnVuY3Rpb24oKXt0aGlzLnJvb3Q9bmV3IGpzdHMuaW5kZXgucXVhZHRyZWUuUm9vdCgpO3RoaXMubWluRXh0ZW50PTEuMDt9O2pzdHMuaW5kZXgucXVhZHRyZWUuUXVhZHRyZWUuZW5zdXJlRXh0ZW50PWZ1bmN0aW9uKGl0ZW1FbnYsbWluRXh0ZW50KXt2YXIgbWlueCxtYXh4LG1pbnksbWF4eTttaW54PWl0ZW1FbnYuZ2V0TWluWCgpO21heHg9aXRlbUVudi5nZXRNYXhYKCk7bWlueT1pdGVtRW52LmdldE1pblkoKTttYXh5PWl0ZW1FbnYuZ2V0TWF4WSgpO2lmKG1pbnghPT1tYXh4JiZtaW55IT09bWF4eSl7cmV0dXJuIGl0ZW1FbnY7fVxuaWYobWlueD09PW1heHgpe21pbng9bWlueC0obWluRXh0ZW50LzIuMCk7bWF4eD1taW54KyhtaW5FeHRlbnQvMi4wKTt9XG5pZihtaW55PT09bWF4eSl7bWlueT1taW55LShtaW5FeHRlbnQvMi4wKTttYXh5PW1pbnkrKG1pbkV4dGVudC8yLjApO31cbnJldHVybiBuZXcganN0cy5nZW9tLkVudmVsb3BlKG1pbngsbWF4eCxtaW55LG1heHkpO307anN0cy5pbmRleC5xdWFkdHJlZS5RdWFkdHJlZS5wcm90b3R5cGUuZGVwdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmRlcHRoKCk7fTtqc3RzLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdC5zaXplKCk7fTtqc3RzLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24oaXRlbUVudixpdGVtKXt0aGlzLmNvbGxlY3RTdGF0cyhpdGVtRW52KTt2YXIgaW5zZXJ0RW52PWpzdHMuaW5kZXgucXVhZHRyZWUuUXVhZHRyZWUuZW5zdXJlRXh0ZW50KGl0ZW1FbnYsdGhpcy5taW5FeHRlbnQpO3RoaXMucm9vdC5pbnNlcnQoaW5zZXJ0RW52LGl0ZW0pO307anN0cy5pbmRleC5xdWFkdHJlZS5RdWFkdHJlZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGl0ZW1FbnYsaXRlbSl7dmFyIHBvc0Vudj1qc3RzLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlLmVuc3VyZUV4dGVudChpdGVtRW52LHRoaXMubWluRXh0ZW50KTtyZXR1cm4gdGhpcy5yb290LnJlbW92ZShwb3NFbnYsaXRlbSk7fTtqc3RzLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtyZXR1cm4ganN0cy5pbmRleC5xdWFkdHJlZS5RdWFkdHJlZS5wcm90b3R5cGUucXVlcnlCeUVudmVsb3BlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZWxzZXtqc3RzLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlLnByb3RvdHlwZS5xdWVyeVdpdGhWaXNpdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9fTtqc3RzLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlLnByb3RvdHlwZS5xdWVyeUJ5RW52ZWxvcGU9ZnVuY3Rpb24oc2VhcmNoRW52KXt2YXIgdmlzaXRvcj1uZXcganN0cy5pbmRleC5BcnJheUxpc3RWaXNpdG9yKCk7dGhpcy5xdWVyeShzZWFyY2hFbnYsdmlzaXRvcik7cmV0dXJuIHZpc2l0b3IuZ2V0SXRlbXMoKTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuUXVhZHRyZWUucHJvdG90eXBlLnF1ZXJ5V2l0aFZpc2l0b3I9ZnVuY3Rpb24oc2VhcmNoRW52LHZpc2l0b3Ipe3RoaXMucm9vdC52aXNpdChzZWFyY2hFbnYsdmlzaXRvcik7fTtqc3RzLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlLnByb3RvdHlwZS5xdWVyeUFsbD1mdW5jdGlvbigpe3ZhciBmb3VuZEl0ZW1zPVtdO2ZvdW5kSXRlbXM9dGhpcy5yb290LmFkZEFsbEl0ZW1zKGZvdW5kSXRlbXMpO3JldHVybiBmb3VuZEl0ZW1zO307anN0cy5pbmRleC5xdWFkdHJlZS5RdWFkdHJlZS5wcm90b3R5cGUuY29sbGVjdFN0YXRzPWZ1bmN0aW9uKGl0ZW1FbnYpe3ZhciBkZWxYPWl0ZW1FbnYuZ2V0V2lkdGgoKTtpZihkZWxYPHRoaXMubWluRXh0ZW50JiZkZWxYPjAuMCl7dGhpcy5taW5FeHRlbnQ9ZGVsWDt9XG52YXIgZGVsWT1pdGVtRW52LmdldEhlaWdodCgpO2lmKGRlbFk8dGhpcy5taW5FeHRlbnQmJmRlbFk+MC4wKXt0aGlzLm1pbkV4dGVudD1kZWxZO319O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVOb2RlRmFjdG9yeT1mdW5jdGlvbigpe307anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGVGYWN0b3J5LnByb3RvdHlwZT1uZXcganN0cy5nZW9tZ3JhcGguTm9kZUZhY3RvcnkoKTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlTm9kZUZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZU5vZGU9ZnVuY3Rpb24oY29vcmQpe3JldHVybiBuZXcganN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU5vZGUoY29vcmQsbmV3IGpzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVuZGxlU3RhcigpKTt9O2pzdHMuaW5kZXgucXVhZHRyZWUuS2V5PWZ1bmN0aW9uKGl0ZW1FbnYpe3RoaXMucHQ9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCk7dGhpcy5sZXZlbD0wO3RoaXMuZW52PW51bGw7dGhpcy5jb21wdXRlS2V5KGl0ZW1FbnYpO307anN0cy5pbmRleC5xdWFkdHJlZS5LZXkuY29tcHV0ZVF1YWRMZXZlbD1mdW5jdGlvbihlbnYpe3ZhciBkeCxkeSxkTWF4LGxldmVsO2R4PWVudi5nZXRXaWR0aCgpO2R5PWVudi5nZXRIZWlnaHQoKTtkTWF4PWR4PmR5P2R4OmR5O2xldmVsPWpzdHMuaW5kZXguRG91YmxlQml0cy5leHBvbmVudChkTWF4KSsxO3JldHVybiBsZXZlbDt9O2pzdHMuaW5kZXgucXVhZHRyZWUuS2V5LnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnB0O307anN0cy5pbmRleC5xdWFkdHJlZS5LZXkucHJvdG90eXBlLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGV2ZWw7fTtqc3RzLmluZGV4LnF1YWR0cmVlLktleS5wcm90b3R5cGUuZ2V0RW52ZWxvcGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbnY7fTtqc3RzLmluZGV4LnF1YWR0cmVlLktleS5wcm90b3R5cGUuZ2V0Q2VudHJlPWZ1bmN0aW9uKCl7dmFyIHgseTt4PSh0aGlzLmVudi5nZXRNaW5YKCkrdGhpcy5lbnYuZ2V0TWF4WCgpKS8yO3k9KHRoaXMuZW52LmdldE1pblkoKSt0aGlzLmVudi5nZXRNYXhZKCkpLzI7cmV0dXJuIG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh4LHkpO307anN0cy5pbmRleC5xdWFkdHJlZS5LZXkucHJvdG90eXBlLmNvbXB1dGVLZXk9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGpzdHMuZ2VvbS5FbnZlbG9wZSl7dGhpcy5jb21wdXRlS2V5RnJvbUVudmVsb3BlKGFyZ3VtZW50c1swXSk7fWVsc2V7dGhpcy5jb21wdXRlS2V5RnJvbUxldmVsKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pO319O2pzdHMuaW5kZXgucXVhZHRyZWUuS2V5LnByb3RvdHlwZS5jb21wdXRlS2V5RnJvbUVudmVsb3BlPWZ1bmN0aW9uKGVudil7dGhpcy5sZXZlbD1qc3RzLmluZGV4LnF1YWR0cmVlLktleS5jb21wdXRlUXVhZExldmVsKGVudik7dGhpcy5lbnY9bmV3IGpzdHMuZ2VvbS5FbnZlbG9wZSgpO3RoaXMuY29tcHV0ZUtleSh0aGlzLmxldmVsLGVudik7d2hpbGUoIXRoaXMuZW52LmNvbnRhaW5zKGVudikpe3RoaXMubGV2ZWwrPTE7dGhpcy5jb21wdXRlS2V5KHRoaXMubGV2ZWwsZW52KTt9fTtqc3RzLmluZGV4LnF1YWR0cmVlLktleS5wcm90b3R5cGUuY29tcHV0ZUtleUZyb21MZXZlbD1mdW5jdGlvbihsZXZlbCxlbnYpe3ZhciBxdWFkU2l6ZT1qc3RzLmluZGV4LkRvdWJsZUJpdHMucG93ZXJPZjIobGV2ZWwpO3RoaXMucHQueD1NYXRoLmZsb29yKGVudi5nZXRNaW5YKCkvcXVhZFNpemUpKnF1YWRTaXplO3RoaXMucHQueT1NYXRoLmZsb29yKGVudi5nZXRNaW5ZKCkvcXVhZFNpemUpKnF1YWRTaXplO3RoaXMuZW52LmluaXQodGhpcy5wdC54LHRoaXMucHQueCtxdWFkU2l6ZSx0aGlzLnB0LnksdGhpcy5wdC55K1xucXVhZFNpemUpO307anN0cy5nZW9tLkNvb3JkaW5hdGVBcnJheXM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcganN0cy5lcnJvci5BYnN0cmFjdE1ldGhvZEludm9jYXRpb25FcnJvcigpO307anN0cy5nZW9tLkNvb3JkaW5hdGVBcnJheXMuY29weURlZXA9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7cmV0dXJuIGpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLmNvcHlEZWVwMShhcmd1bWVudHNbMF0pO31lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PT01KXtqc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5jb3B5RGVlcDIoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0sYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSk7fX07anN0cy5nZW9tLkNvb3JkaW5hdGVBcnJheXMuY29weURlZXAxPWZ1bmN0aW9uKGNvb3JkaW5hdGVzKXt2YXIgY29weT1bXTtmb3IodmFyIGk9MDtpPGNvb3JkaW5hdGVzLmxlbmd0aDtpKyspe2NvcHlbaV09bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKGNvb3JkaW5hdGVzW2ldKTt9XG5yZXR1cm4gY29weTt9O2pzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLmNvcHlEZWVwMj1mdW5jdGlvbihzcmMsc3JjU3RhcnQsZGVzdCxkZXN0U3RhcnQsbGVuZ3RoKXtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe2Rlc3RbZGVzdFN0YXJ0K2ldPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShzcmNbc3JjU3RhcnQraV0pO319O2pzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnJlbW92ZVJlcGVhdGVkUG9pbnRzPWZ1bmN0aW9uKGNvb3JkKXt2YXIgY29vcmRMaXN0O2lmKCF0aGlzLmhhc1JlcGVhdGVkUG9pbnRzKGNvb3JkKSl7cmV0dXJuIGNvb3JkO31cbmNvb3JkTGlzdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0KGNvb3JkLGZhbHNlKTtyZXR1cm4gY29vcmRMaXN0LnRvQ29vcmRpbmF0ZUFycmF5KCk7fTtqc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5oYXNSZXBlYXRlZFBvaW50cz1mdW5jdGlvbihjb29yZCl7dmFyIGk7Zm9yKGk9MTtpPGNvb3JkLmxlbmd0aDtpKyspe2lmKGNvb3JkW2ktMV0uZXF1YWxzKGNvb3JkW2ldKSl7cmV0dXJuIHRydWU7fX1cbnJldHVybiBmYWxzZTt9O2pzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnB0Tm90SW5MaXN0PWZ1bmN0aW9uKHRlc3RQdHMscHRzKXtmb3IodmFyIGk9MDtpPHRlc3RQdHMubGVuZ3RoO2krKyl7dmFyIHRlc3RQdD10ZXN0UHRzW2ldO2lmKGpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLmluZGV4T2YodGVzdFB0LHB0cyk8MClcbnJldHVybiB0ZXN0UHQ7fVxucmV0dXJuIG51bGw7fTtqc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5pbmNyZWFzaW5nRGlyZWN0aW9uPWZ1bmN0aW9uKHB0cyl7Zm9yKHZhciBpPTA7aTxwYXJzZUludChwdHMubGVuZ3RoLzIpO2krKyl7dmFyIGo9cHRzLmxlbmd0aC0xLWk7dmFyIGNvbXA9cHRzW2ldLmNvbXBhcmVUbyhwdHNbal0pO2lmKGNvbXAhPTApXG5yZXR1cm4gY29tcDt9XG5yZXR1cm4gMTt9O2pzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLm1pbkNvb3JkaW5hdGU9ZnVuY3Rpb24oY29vcmRpbmF0ZXMpe3ZhciBtaW5Db29yZD1udWxsO2Zvcih2YXIgaT0wO2k8Y29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7aWYobWluQ29vcmQ9PT1udWxsfHxtaW5Db29yZC5jb21wYXJlVG8oY29vcmRpbmF0ZXNbaV0pPjApe21pbkNvb3JkPWNvb3JkaW5hdGVzW2ldO319XG5yZXR1cm4gbWluQ29vcmQ7fTtqc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5zY3JvbGw9ZnVuY3Rpb24oY29vcmRpbmF0ZXMsZmlyc3RDb29yZGluYXRlKXt2YXIgaT1qc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5pbmRleE9mKGZpcnN0Q29vcmRpbmF0ZSxjb29yZGluYXRlcyk7aWYoaTwwKVxucmV0dXJuO3ZhciBuZXdDb29yZGluYXRlcz1jb29yZGluYXRlcy5zbGljZShpKS5jb25jYXQoY29vcmRpbmF0ZXMuc2xpY2UoMCxpKSk7Zm9yKGk9MDtpPG5ld0Nvb3JkaW5hdGVzLmxlbmd0aDtpKyspe2Nvb3JkaW5hdGVzW2ldPW5ld0Nvb3JkaW5hdGVzW2ldO319O2pzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLmluZGV4T2Y9ZnVuY3Rpb24oY29vcmRpbmF0ZSxjb29yZGluYXRlcyl7Zm9yKHZhciBpPTA7aTxjb29yZGluYXRlcy5sZW5ndGg7aSsrKXtpZihjb29yZGluYXRlLmVxdWFscyhjb29yZGluYXRlc1tpXSkpe3JldHVybiBpO319XG5yZXR1cm4tMTt9O2pzdHMub3BlcmF0aW9uLm92ZXJsYXkuTWluaW1hbEVkZ2VSaW5nPWZ1bmN0aW9uKHN0YXJ0LGdlb21ldHJ5RmFjdG9yeSl7anN0cy5nZW9tZ3JhcGguRWRnZVJpbmcuY2FsbCh0aGlzLHN0YXJ0LGdlb21ldHJ5RmFjdG9yeSk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk1pbmltYWxFZGdlUmluZy5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbWdyYXBoLkVkZ2VSaW5nKCk7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5NaW5pbWFsRWRnZVJpbmcuY29uc3RydWN0b3I9anN0cy5vcGVyYXRpb24ub3ZlcmxheS5NaW5pbWFsRWRnZVJpbmc7anN0cy5vcGVyYXRpb24ub3ZlcmxheS5NaW5pbWFsRWRnZVJpbmcucHJvdG90eXBlLmdldE5leHQ9ZnVuY3Rpb24oZGUpe3JldHVybiBkZS5nZXROZXh0TWluKCk7fTtqc3RzLm9wZXJhdGlvbi5vdmVybGF5Lk1pbmltYWxFZGdlUmluZy5wcm90b3R5cGUuc2V0RWRnZVJpbmc9ZnVuY3Rpb24oZGUsZXIpe2RlLnNldE1pbkVkZ2VSaW5nKGVyKTt9O2pzdHMudHJpYW5ndWxhdGUuRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlcj1mdW5jdGlvbigpe3RoaXMuc2l0ZUNvb3Jkcz1udWxsO3RoaXMudG9sZXJhbmNlPTAuMDt0aGlzLnN1YmRpdj1udWxsO307anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLmV4dHJhY3RVbmlxdWVDb29yZGluYXRlcz1mdW5jdGlvbihnZW9tKXtpZihnZW9tPT09dW5kZWZpbmVkfHxnZW9tPT09bnVsbCl7cmV0dXJuIG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZUxpc3QoW10sZmFsc2UpLnRvQXJyYXkoKTt9XG52YXIgY29vcmRzPWdlb20uZ2V0Q29vcmRpbmF0ZXMoKTtyZXR1cm4ganN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLnVuaXF1ZShjb29yZHMpO307anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLnVuaXF1ZT1mdW5jdGlvbihjb29yZHMpe2Nvb3Jkcy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29tcGFyZVRvKGIpO30pO3ZhciBjb29yZExpc3Q9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlTGlzdChjb29yZHMsZmFsc2UpO3JldHVybiBjb29yZExpc3QudG9BcnJheSgpO307anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLnRvVmVydGljZXM9ZnVuY3Rpb24oY29vcmRzKXt2YXIgdmVydHM9bmV3IEFycmF5KGNvb3Jkcy5sZW5ndGgpLGk9MCxpbD1jb29yZHMubGVuZ3RoLGNvb3JkO2ZvcihpO2k8aWw7aSsrKXtjb29yZD1jb29yZHNbaV07dmVydHNbaV09bmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4KGNvb3JkKTt9XG5yZXR1cm4gdmVydHM7fTtqc3RzLnRyaWFuZ3VsYXRlLkRlbGF1bmF5VHJpYW5ndWxhdGlvbkJ1aWxkZXIuZW52ZWxvcGU9ZnVuY3Rpb24oY29vcmRzKXt2YXIgZW52PW5ldyBqc3RzLmdlb20uRW52ZWxvcGUoKSxpPTAsaWw9Y29vcmRzLmxlbmd0aDtmb3IoaTtpPGlsO2krKyl7ZW52LmV4cGFuZFRvSW5jbHVkZShjb29yZHNbaV0pO31cbnJldHVybiBlbnY7fTtqc3RzLnRyaWFuZ3VsYXRlLkRlbGF1bmF5VHJpYW5ndWxhdGlvbkJ1aWxkZXIucHJvdG90eXBlLnNldFNpdGVzPWZ1bmN0aW9uKCl7dmFyIGFyZz1hcmd1bWVudHNbMF07aWYoYXJnIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5fHxhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uQ29vcmRpbmF0ZXx8YXJnIGluc3RhbmNlb2YganN0cy5nZW9tLlBvaW50fHxhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2ludHx8YXJnIGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVTdHJpbmd8fGFyZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmd8fGFyZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lYXJSaW5nfHxhcmcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbnx8YXJnIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7dGhpcy5zZXRTaXRlc0Zyb21HZW9tZXRyeShhcmcpO31lbHNle3RoaXMuc2V0U2l0ZXNGcm9tQ29sbGVjdGlvbihhcmcpO319O2pzdHMudHJpYW5ndWxhdGUuRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlci5wcm90b3R5cGUuc2V0U2l0ZXNGcm9tR2VvbWV0cnk9ZnVuY3Rpb24oZ2VvbSl7dGhpcy5zaXRlQ29vcmRzPWpzdHMudHJpYW5ndWxhdGUuRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlci5leHRyYWN0VW5pcXVlQ29vcmRpbmF0ZXMoZ2VvbSk7fTtqc3RzLnRyaWFuZ3VsYXRlLkRlbGF1bmF5VHJpYW5ndWxhdGlvbkJ1aWxkZXIucHJvdG90eXBlLnNldFNpdGVzRnJvbUNvbGxlY3Rpb249ZnVuY3Rpb24oY29vcmRzKXt0aGlzLnNpdGVDb29yZHM9anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLnVuaXF1ZShjb29yZHMpO307anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLnByb3RvdHlwZS5zZXRUb2xlcmFuY2U9ZnVuY3Rpb24odG9sZXJhbmNlKXt0aGlzLnRvbGVyYW5jZT10b2xlcmFuY2U7fTtqc3RzLnRyaWFuZ3VsYXRlLkRlbGF1bmF5VHJpYW5ndWxhdGlvbkJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbigpe2lmKHRoaXMuc3ViZGl2PT09bnVsbCl7dmFyIHNpdGVFbnYsdmVydGljZXMsdHJpYW5ndWxhdG9yO3NpdGVFbnY9anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLmVudmVsb3BlKHRoaXMuc2l0ZUNvb3Jkcyk7dmVydGljZXM9anN0cy50cmlhbmd1bGF0ZS5EZWxhdW5heVRyaWFuZ3VsYXRpb25CdWlsZGVyLnRvVmVydGljZXModGhpcy5zaXRlQ29vcmRzKTt0aGlzLnN1YmRpdj1uZXcganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uKHNpdGVFbnYsdGhpcy50b2xlcmFuY2UpO3RyaWFuZ3VsYXRvcj1uZXcganN0cy50cmlhbmd1bGF0ZS5JbmNyZW1lbnRhbERlbGF1bmF5VHJpYW5ndWxhdG9yKHRoaXMuc3ViZGl2KTt0cmlhbmd1bGF0b3IuaW5zZXJ0U2l0ZXModmVydGljZXMpO319O2pzdHMudHJpYW5ndWxhdGUuRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlci5wcm90b3R5cGUuZ2V0U3ViZGl2aXNpb249ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZSgpO3JldHVybiB0aGlzLnN1YmRpdjt9O2pzdHMudHJpYW5ndWxhdGUuRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlci5wcm90b3R5cGUuZ2V0RWRnZXM9ZnVuY3Rpb24oZ2VvbUZhY3Qpe3RoaXMuY3JlYXRlKCk7cmV0dXJuIHRoaXMuc3ViZGl2LmdldEVkZ2VzKGdlb21GYWN0KTt9O2pzdHMudHJpYW5ndWxhdGUuRGVsYXVuYXlUcmlhbmd1bGF0aW9uQnVpbGRlci5wcm90b3R5cGUuZ2V0VHJpYW5nbGVzPWZ1bmN0aW9uKGdlb21GYWN0KXt0aGlzLmNyZWF0ZSgpO3JldHVybiB0aGlzLnN1YmRpdi5nZXRUcmlhbmdsZXMoZ2VvbUZhY3QpO307anN0cy5hbGdvcml0aG0uUmF5Q3Jvc3NpbmdDb3VudGVyPWZ1bmN0aW9uKHApe3RoaXMucD1wO307anN0cy5hbGdvcml0aG0uUmF5Q3Jvc3NpbmdDb3VudGVyLmxvY2F0ZVBvaW50SW5SaW5nPWZ1bmN0aW9uKHAscmluZyl7dmFyIGNvdW50ZXI9bmV3IGpzdHMuYWxnb3JpdGhtLlJheUNyb3NzaW5nQ291bnRlcihwKTtmb3IodmFyIGk9MTtpPHJpbmcubGVuZ3RoO2krKyl7dmFyIHAxPXJpbmdbaV07dmFyIHAyPXJpbmdbaS0xXTtjb3VudGVyLmNvdW50U2VnbWVudChwMSxwMik7aWYoY291bnRlci5pc09uU2VnbWVudCgpKVxucmV0dXJuIGNvdW50ZXIuZ2V0TG9jYXRpb24oKTt9XG5yZXR1cm4gY291bnRlci5nZXRMb2NhdGlvbigpO307anN0cy5hbGdvcml0aG0uUmF5Q3Jvc3NpbmdDb3VudGVyLnByb3RvdHlwZS5wPW51bGw7anN0cy5hbGdvcml0aG0uUmF5Q3Jvc3NpbmdDb3VudGVyLnByb3RvdHlwZS5jcm9zc2luZ0NvdW50PTA7anN0cy5hbGdvcml0aG0uUmF5Q3Jvc3NpbmdDb3VudGVyLnByb3RvdHlwZS5pc1BvaW50T25TZWdtZW50PWZhbHNlO2pzdHMuYWxnb3JpdGhtLlJheUNyb3NzaW5nQ291bnRlci5wcm90b3R5cGUuY291bnRTZWdtZW50PWZ1bmN0aW9uKHAxLHAyKXtpZihwMS54PHRoaXMucC54JiZwMi54PHRoaXMucC54KVxucmV0dXJuO2lmKHRoaXMucC54PT1wMi54JiZ0aGlzLnAueT09PXAyLnkpe3RoaXMuaXNQb2ludE9uU2VnbWVudD10cnVlO3JldHVybjt9XG5pZihwMS55PT09dGhpcy5wLnkmJnAyLnk9PT10aGlzLnAueSl7dmFyIG1pbng9cDEueDt2YXIgbWF4eD1wMi54O2lmKG1pbng+bWF4eCl7bWlueD1wMi54O21heHg9cDEueDt9XG5pZih0aGlzLnAueD49bWlueCYmdGhpcy5wLng8PW1heHgpe3RoaXMuaXNQb2ludE9uU2VnbWVudD10cnVlO31cbnJldHVybjt9XG5pZigoKHAxLnk+dGhpcy5wLnkpJiYocDIueTw9dGhpcy5wLnkpKXx8KChwMi55PnRoaXMucC55KSYmKHAxLnk8PXRoaXMucC55KSkpe3ZhciB4MT1wMS54LXRoaXMucC54O3ZhciB5MT1wMS55LXRoaXMucC55O3ZhciB4Mj1wMi54LXRoaXMucC54O3ZhciB5Mj1wMi55LXRoaXMucC55O3ZhciB4SW50U2lnbj1qc3RzLmFsZ29yaXRobS5Sb2J1c3REZXRlcm1pbmFudC5zaWduT2ZEZXQyeDIoeDEseTEseDIseTIpO2lmKHhJbnRTaWduPT09MC4wKXt0aGlzLmlzUG9pbnRPblNlZ21lbnQ9dHJ1ZTtyZXR1cm47fVxuaWYoeTI8eTEpXG54SW50U2lnbj0teEludFNpZ247aWYoeEludFNpZ24+MC4wKXt0aGlzLmNyb3NzaW5nQ291bnQrKzt9fX07anN0cy5hbGdvcml0aG0uUmF5Q3Jvc3NpbmdDb3VudGVyLnByb3RvdHlwZS5pc09uU2VnbWVudD1mdW5jdGlvbigpe3JldHVybiBqc3RzLmdlb20uaXNQb2ludE9uU2VnbWVudDt9O2pzdHMuYWxnb3JpdGhtLlJheUNyb3NzaW5nQ291bnRlci5wcm90b3R5cGUuZ2V0TG9jYXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLmlzUG9pbnRPblNlZ21lbnQpXG5yZXR1cm4ganN0cy5nZW9tLkxvY2F0aW9uLkJPVU5EQVJZO2lmKCh0aGlzLmNyb3NzaW5nQ291bnQlMik9PT0xKXtyZXR1cm4ganN0cy5nZW9tLkxvY2F0aW9uLklOVEVSSU9SO31cbnJldHVybiBqc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1I7fTtqc3RzLmFsZ29yaXRobS5SYXlDcm9zc2luZ0NvdW50ZXIucHJvdG90eXBlLmlzUG9pbnRJblBvbHlnb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMb2NhdGlvbigpIT09anN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SO307anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcD1mdW5jdGlvbihnZW9tLGJuUnVsZSl7dGhpcy5nZW9tPWdlb207dGhpcy5nZW9tRmFjdD1nZW9tLmdldEZhY3RvcnkoKTt0aGlzLmJuUnVsZT1iblJ1bGV8fGpzdHMuYWxnb3JpdGhtLkJvdW5kYXJ5Tm9kZVJ1bGUuTU9EMl9CT1VOREFSWV9SVUxFO307anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcC5wcm90b3R5cGUuZ2VvbT1udWxsO2pzdHMub3BlcmF0aW9uLkJvdW5kYXJ5T3AucHJvdG90eXBlLmdlb21GYWN0PW51bGw7anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcC5wcm90b3R5cGUuYm5SdWxlPW51bGw7anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcC5wcm90b3R5cGUuZ2V0Qm91bmRhcnk9ZnVuY3Rpb24oKXtpZih0aGlzLmdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZylyZXR1cm4gdGhpcy5ib3VuZGFyeUxpbmVTdHJpbmcodGhpcy5nZW9tKTtpZih0aGlzLmdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nKXJldHVybiB0aGlzLmJvdW5kYXJ5TXVsdGlMaW5lU3RyaW5nKHRoaXMuZ2VvbSk7cmV0dXJuIHRoaXMuZ2VvbS5nZXRCb3VuZGFyeSgpO307anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcC5wcm90b3R5cGUuZ2V0RW1wdHlNdWx0aVBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2VvbUZhY3QuY3JlYXRlTXVsdGlQb2ludChudWxsKTt9O2pzdHMub3BlcmF0aW9uLkJvdW5kYXJ5T3AucHJvdG90eXBlLmJvdW5kYXJ5TXVsdGlMaW5lU3RyaW5nPWZ1bmN0aW9uKG1MaW5lKXtpZih0aGlzLmdlb20uaXNFbXB0eSgpKXtyZXR1cm4gdGhpcy5nZXRFbXB0eU11bHRpUG9pbnQoKTt9XG52YXIgYmR5UHRzPXRoaXMuY29tcHV0ZUJvdW5kYXJ5Q29vcmRpbmF0ZXMobUxpbmUpO2lmKGJkeVB0cy5sZW5ndGg9PTEpe3JldHVybiB0aGlzLmdlb21GYWN0LmNyZWF0ZVBvaW50KGJkeVB0c1swXSk7fVxucmV0dXJuIHRoaXMuZ2VvbUZhY3QuY3JlYXRlTXVsdGlQb2ludChiZHlQdHMpO307anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcC5wcm90b3R5cGUuZW5kcG9pbnRzPW51bGw7anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcC5wcm90b3R5cGUuY29tcHV0ZUJvdW5kYXJ5Q29vcmRpbmF0ZXM9ZnVuY3Rpb24obUxpbmUpe3ZhciBpLGxpbmUsZW5kcG9pbnQsYmR5UHRzPVtdO3RoaXMuZW5kcG9pbnRzPVtdO2ZvcihpPTA7aTxtTGluZS5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXtsaW5lPW1MaW5lLmdldEdlb21ldHJ5TihpKTtpZihsaW5lLmdldE51bVBvaW50cygpPT0wKVxuY29udGludWU7dGhpcy5hZGRFbmRwb2ludChsaW5lLmdldENvb3JkaW5hdGVOKDApKTt0aGlzLmFkZEVuZHBvaW50KGxpbmUuZ2V0Q29vcmRpbmF0ZU4obGluZS5nZXROdW1Qb2ludHMoKS0xKSk7fVxuZm9yKGk9MDtpPHRoaXMuZW5kcG9pbnRzLmxlbmd0aDtpKyspe2VuZHBvaW50PXRoaXMuZW5kcG9pbnRzW2ldO2lmKHRoaXMuYm5SdWxlLmlzSW5Cb3VuZGFyeShlbmRwb2ludC5jb3VudCkpe2JkeVB0cy5wdXNoKGVuZHBvaW50LmNvb3JkaW5hdGUpO319XG5yZXR1cm4gYmR5UHRzO307anN0cy5vcGVyYXRpb24uQm91bmRhcnlPcC5wcm90b3R5cGUuYWRkRW5kcG9pbnQ9ZnVuY3Rpb24ocHQpe3ZhciBpLGVuZHBvaW50LGZvdW5kPWZhbHNlO2ZvcihpPTA7aTx0aGlzLmVuZHBvaW50cy5sZW5ndGg7aSsrKXtlbmRwb2ludD10aGlzLmVuZHBvaW50c1tpXTtpZihlbmRwb2ludC5jb29yZGluYXRlLmVxdWFscyhwdCkpe2ZvdW5kPXRydWU7YnJlYWs7fX1cbmlmKCFmb3VuZCl7ZW5kcG9pbnQ9e307ZW5kcG9pbnQuY29vcmRpbmF0ZT1wdDtlbmRwb2ludC5jb3VudD0wO3RoaXMuZW5kcG9pbnRzLnB1c2goZW5kcG9pbnQpO31cbmVuZHBvaW50LmNvdW50Kys7fTtqc3RzLm9wZXJhdGlvbi5Cb3VuZGFyeU9wLnByb3RvdHlwZS5ib3VuZGFyeUxpbmVTdHJpbmc9ZnVuY3Rpb24obGluZSl7aWYodGhpcy5nZW9tLmlzRW1wdHkoKSl7cmV0dXJuIHRoaXMuZ2V0RW1wdHlNdWx0aVBvaW50KCk7fVxuaWYobGluZS5pc0Nsb3NlZCgpKXt2YXIgY2xvc2VkRW5kcG9pbnRPbkJvdW5kYXJ5PXRoaXMuYm5SdWxlLmlzSW5Cb3VuZGFyeSgyKTtpZihjbG9zZWRFbmRwb2ludE9uQm91bmRhcnkpe3JldHVybiBsaW5lLmdldFN0YXJ0UG9pbnQoKTt9XG5lbHNle3JldHVybiB0aGlzLmdlb21GYWN0LmNyZWF0ZU11bHRpUG9pbnQobnVsbCk7fX1cbnJldHVybiB0aGlzLmdlb21GYWN0LmNyZWF0ZU11bHRpUG9pbnQoW2xpbmUuZ2V0U3RhcnRQb2ludCgpLGxpbmUuZ2V0RW5kUG9pbnQoKV0pO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlU2V0QnVpbGRlcj1mdW5jdGlvbihpbnB1dEdlb20sZGlzdGFuY2UsY3VydmVCdWlsZGVyKXt0aGlzLmlucHV0R2VvbT1pbnB1dEdlb207dGhpcy5kaXN0YW5jZT1kaXN0YW5jZTt0aGlzLmN1cnZlQnVpbGRlcj1jdXJ2ZUJ1aWxkZXI7dGhpcy5jdXJ2ZUxpc3Q9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZVNldEJ1aWxkZXIucHJvdG90eXBlLmlucHV0R2VvbT1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZVNldEJ1aWxkZXIucHJvdG90eXBlLmRpc3RhbmNlPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlU2V0QnVpbGRlci5wcm90b3R5cGUuY3VydmVCdWlsZGVyPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlU2V0QnVpbGRlci5wcm90b3R5cGUuY3VydmVMaXN0PW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlU2V0QnVpbGRlci5wcm90b3R5cGUuZ2V0Q3VydmVzPWZ1bmN0aW9uKCl7dGhpcy5hZGQodGhpcy5pbnB1dEdlb20pO3JldHVybiB0aGlzLmN1cnZlTGlzdDt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZVNldEJ1aWxkZXIucHJvdG90eXBlLmFkZEN1cnZlPWZ1bmN0aW9uKGNvb3JkLGxlZnRMb2MscmlnaHRMb2Mpe2lmKGNvb3JkPT1udWxsfHxjb29yZC5sZW5ndGg8MilcbnJldHVybjt2YXIgZT1uZXcganN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nKGNvb3JkLG5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbCgwLGpzdHMuZ2VvbS5Mb2NhdGlvbi5CT1VOREFSWSxsZWZ0TG9jLHJpZ2h0TG9jKSk7dGhpcy5jdXJ2ZUxpc3QuYWRkKGUpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlU2V0QnVpbGRlci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGcpe2lmKGcuaXNFbXB0eSgpKVxucmV0dXJuO2lmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbilcbnRoaXMuYWRkUG9seWdvbihnKTtlbHNlIGlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTGluZVN0cmluZylcbnRoaXMuYWRkTGluZVN0cmluZyhnKTtlbHNlIGlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9pbnQpXG50aGlzLmFkZFBvaW50KGcpO2Vsc2UgaWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvaW50KVxudGhpcy5hZGRDb2xsZWN0aW9uKGcpO2Vsc2UgaWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcpXG50aGlzLmFkZENvbGxlY3Rpb24oZyk7ZWxzZSBpZihnIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbilcbnRoaXMuYWRkQ29sbGVjdGlvbihnKTtlbHNlIGlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKVxudGhpcy5hZGRDb2xsZWN0aW9uKGcpO2Vsc2VcbnRocm93IG5ldyBqc3RzLmVycm9yLklsbGVnYWxBcmd1bWVudEVycm9yKCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVTZXRCdWlsZGVyLnByb3RvdHlwZS5hZGRDb2xsZWN0aW9uPWZ1bmN0aW9uKGdjKXtmb3IodmFyIGk9MDtpPGdjLmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciBnPWdjLmdldEdlb21ldHJ5TihpKTt0aGlzLmFkZChnKTt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVTZXRCdWlsZGVyLnByb3RvdHlwZS5hZGRQb2ludD1mdW5jdGlvbihwKXtpZih0aGlzLmRpc3RhbmNlPD0wLjApXG5yZXR1cm47dmFyIGNvb3JkPXAuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgY3VydmU9dGhpcy5jdXJ2ZUJ1aWxkZXIuZ2V0TGluZUN1cnZlKGNvb3JkLHRoaXMuZGlzdGFuY2UpO3RoaXMuYWRkQ3VydmUoY3VydmUsanN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SLGpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUik7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVTZXRCdWlsZGVyLnByb3RvdHlwZS5hZGRMaW5lU3RyaW5nPWZ1bmN0aW9uKGxpbmUpe2lmKHRoaXMuZGlzdGFuY2U8PTAuMCYmIXRoaXMuY3VydmVCdWlsZGVyLmdldEJ1ZmZlclBhcmFtZXRlcnMoKS5pc1NpbmdsZVNpZGVkKCkpXG5yZXR1cm47dmFyIGNvb3JkPWpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnJlbW92ZVJlcGVhdGVkUG9pbnRzKGxpbmUuZ2V0Q29vcmRpbmF0ZXMoKSk7dmFyIGN1cnZlPXRoaXMuY3VydmVCdWlsZGVyLmdldExpbmVDdXJ2ZShjb29yZCx0aGlzLmRpc3RhbmNlKTt0aGlzLmFkZEN1cnZlKGN1cnZlLGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUixqc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1IpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlU2V0QnVpbGRlci5wcm90b3R5cGUuYWRkUG9seWdvbj1mdW5jdGlvbihwKXt2YXIgb2Zmc2V0RGlzdGFuY2U9dGhpcy5kaXN0YW5jZTt2YXIgb2Zmc2V0U2lkZT1qc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUO2lmKHRoaXMuZGlzdGFuY2U8MC4wKXtvZmZzZXREaXN0YW5jZT0tdGhpcy5kaXN0YW5jZTtvZmZzZXRTaWRlPWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLlJJR0hUO31cbnZhciBzaGVsbD1wLmdldEV4dGVyaW9yUmluZygpO3ZhciBzaGVsbENvb3JkPWpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnJlbW92ZVJlcGVhdGVkUG9pbnRzKHNoZWxsLmdldENvb3JkaW5hdGVzKCkpO2lmKHRoaXMuZGlzdGFuY2U8MC4wJiZ0aGlzLmlzRXJvZGVkQ29tcGxldGVseShzaGVsbCx0aGlzLmRpc3RhbmNlKSlcbnJldHVybjtpZih0aGlzLmRpc3RhbmNlPD0wLjAmJnNoZWxsQ29vcmQubGVuZ3RoPDMpXG5yZXR1cm47dGhpcy5hZGRQb2x5Z29uUmluZyhzaGVsbENvb3JkLG9mZnNldERpc3RhbmNlLG9mZnNldFNpZGUsanN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SLGpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUik7Zm9yKHZhciBpPTA7aTxwLmdldE51bUludGVyaW9yUmluZygpO2krKyl7dmFyIGhvbGU9cC5nZXRJbnRlcmlvclJpbmdOKGkpO3ZhciBob2xlQ29vcmQ9anN0cy5nZW9tLkNvb3JkaW5hdGVBcnJheXMucmVtb3ZlUmVwZWF0ZWRQb2ludHMoaG9sZS5nZXRDb29yZGluYXRlcygpKTtpZih0aGlzLmRpc3RhbmNlPjAuMCYmdGhpcy5pc0Vyb2RlZENvbXBsZXRlbHkoaG9sZSwtdGhpcy5kaXN0YW5jZSkpXG5jb250aW51ZTt0aGlzLmFkZFBvbHlnb25SaW5nKGhvbGVDb29yZCxvZmZzZXREaXN0YW5jZSxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5vcHBvc2l0ZShvZmZzZXRTaWRlKSxqc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1IsanN0cy5nZW9tLkxvY2F0aW9uLkVYVEVSSU9SKTt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVTZXRCdWlsZGVyLnByb3RvdHlwZS5hZGRQb2x5Z29uUmluZz1mdW5jdGlvbihjb29yZCxvZmZzZXREaXN0YW5jZSxzaWRlLGN3TGVmdExvYyxjd1JpZ2h0TG9jKXtpZihvZmZzZXREaXN0YW5jZT09MC4wJiZjb29yZC5sZW5ndGg8anN0cy5nZW9tLkxpbmVhclJpbmcuTUlOSU1VTV9WQUxJRF9TSVpFKVxucmV0dXJuO3ZhciBsZWZ0TG9jPWN3TGVmdExvYzt2YXIgcmlnaHRMb2M9Y3dSaWdodExvYztpZihjb29yZC5sZW5ndGg+PWpzdHMuZ2VvbS5MaW5lYXJSaW5nLk1JTklNVU1fVkFMSURfU0laRSYmanN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzQ0NXKGNvb3JkKSl7bGVmdExvYz1jd1JpZ2h0TG9jO3JpZ2h0TG9jPWN3TGVmdExvYztzaWRlPWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLm9wcG9zaXRlKHNpZGUpO31cbnZhciBjdXJ2ZT10aGlzLmN1cnZlQnVpbGRlci5nZXRSaW5nQ3VydmUoY29vcmQsc2lkZSxvZmZzZXREaXN0YW5jZSk7dGhpcy5hZGRDdXJ2ZShjdXJ2ZSxsZWZ0TG9jLHJpZ2h0TG9jKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRDdXJ2ZVNldEJ1aWxkZXIucHJvdG90eXBlLmlzRXJvZGVkQ29tcGxldGVseT1mdW5jdGlvbihyaW5nLGJ1ZmZlckRpc3RhbmNlKXt2YXIgcmluZ0Nvb3JkPXJpbmcuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgbWluRGlhbT0wLjA7aWYocmluZ0Nvb3JkLmxlbmd0aDw0KVxucmV0dXJuIGJ1ZmZlckRpc3RhbmNlPDA7aWYocmluZ0Nvb3JkLmxlbmd0aD09NClcbnJldHVybiB0aGlzLmlzVHJpYW5nbGVFcm9kZWRDb21wbGV0ZWx5KHJpbmdDb29yZCxidWZmZXJEaXN0YW5jZSk7dmFyIGVudj1yaW5nLmdldEVudmVsb3BlSW50ZXJuYWwoKTt2YXIgZW52TWluRGltZW5zaW9uPU1hdGgubWluKGVudi5nZXRIZWlnaHQoKSxlbnYuZ2V0V2lkdGgoKSk7aWYoYnVmZmVyRGlzdGFuY2U8MC4wJiYyKk1hdGguYWJzKGJ1ZmZlckRpc3RhbmNlKT5lbnZNaW5EaW1lbnNpb24pXG5yZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2U7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0Q3VydmVTZXRCdWlsZGVyLnByb3RvdHlwZS5pc1RyaWFuZ2xlRXJvZGVkQ29tcGxldGVseT1mdW5jdGlvbih0cmlhbmdsZUNvb3JkLGJ1ZmZlckRpc3RhbmNlKXt2YXIgdHJpPW5ldyBqc3RzLmdlb20uVHJpYW5nbGUodHJpYW5nbGVDb29yZFswXSx0cmlhbmdsZUNvb3JkWzFdLHRyaWFuZ2xlQ29vcmRbMl0pO3ZhciBpbkNlbnRyZT10cmkuaW5DZW50cmUoKTt2YXIgZGlzdFRvQ2VudHJlPWpzdHMuYWxnb3JpdGhtLkNHQWxnb3JpdGhtcy5kaXN0YW5jZVBvaW50TGluZShpbkNlbnRyZSx0cmkucDAsdHJpLnAxKTtyZXR1cm4gZGlzdFRvQ2VudHJlPE1hdGguYWJzKGJ1ZmZlckRpc3RhbmNlKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJTdWJncmFwaD1mdW5jdGlvbigpe3RoaXMuZGlyRWRnZUxpc3Q9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt0aGlzLm5vZGVzPW5ldyBqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0KCk7dGhpcy5maW5kZXI9bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5SaWdodG1vc3RFZGdlRmluZGVyKCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLmZpbmRlcj1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJTdWJncmFwaC5wcm90b3R5cGUuZGlyRWRnZUxpc3Q9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLm5vZGVzPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclN1YmdyYXBoLnByb3RvdHlwZS5yaWdodE1vc3RDb29yZD1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJTdWJncmFwaC5wcm90b3R5cGUuZW52PW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclN1YmdyYXBoLnByb3RvdHlwZS5nZXREaXJlY3RlZEVkZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyRWRnZUxpc3Q7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLmdldE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXM7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLmdldEVudmVsb3BlPWZ1bmN0aW9uKCl7aWYodGhpcy5lbnY9PT1udWxsKXt2YXIgZWRnZUVudj1uZXcganN0cy5nZW9tLkVudmVsb3BlKCk7Zm9yKHZhciBpdD10aGlzLmRpckVkZ2VMaXN0Lml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGRpckVkZ2U9aXQubmV4dCgpO3ZhciBwdHM9ZGlyRWRnZS5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKTtmb3IodmFyIGo9MDtqPHB0cy5sZW5ndGgtMTtqKyspe2VkZ2VFbnYuZXhwYW5kVG9JbmNsdWRlKHB0c1tqXSk7fX1cbnRoaXMuZW52PWVkZ2VFbnY7fVxucmV0dXJuIHRoaXMuZW52O307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclN1YmdyYXBoLnByb3RvdHlwZS5nZXRSaWdodG1vc3RDb29yZGluYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmlnaHRNb3N0Q29vcmQ7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbihub2RlKXt0aGlzLmFkZFJlYWNoYWJsZShub2RlKTt0aGlzLmZpbmRlci5maW5kRWRnZSh0aGlzLmRpckVkZ2VMaXN0KTt0aGlzLnJpZ2h0TW9zdENvb3JkPXRoaXMuZmluZGVyLmdldENvb3JkaW5hdGUoKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJTdWJncmFwaC5wcm90b3R5cGUuYWRkUmVhY2hhYmxlPWZ1bmN0aW9uKHN0YXJ0Tm9kZSl7dmFyIG5vZGVTdGFjaz1bXTtub2RlU3RhY2sucHVzaChzdGFydE5vZGUpO3doaWxlKG5vZGVTdGFjay5sZW5ndGghPT0wKXt2YXIgbm9kZT1ub2RlU3RhY2sucG9wKCk7dGhpcy5hZGQobm9kZSxub2RlU3RhY2spO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJTdWJncmFwaC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKG5vZGUsbm9kZVN0YWNrKXtub2RlLnNldFZpc2l0ZWQodHJ1ZSk7dGhpcy5ub2Rlcy5hZGQobm9kZSk7Zm9yKHZhciBpPW5vZGUuZ2V0RWRnZXMoKS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGRlPWkubmV4dCgpO3RoaXMuZGlyRWRnZUxpc3QuYWRkKGRlKTt2YXIgc3ltPWRlLmdldFN5bSgpO3ZhciBzeW1Ob2RlPXN5bS5nZXROb2RlKCk7aWYoIXN5bU5vZGUuaXNWaXNpdGVkKCkpXG5ub2RlU3RhY2sucHVzaChzeW1Ob2RlKTt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLmNsZWFyVmlzaXRlZEVkZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciBpdD10aGlzLmRpckVkZ2VMaXN0Lml0ZXJhdG9yKCk7aXQuaGFzTmV4dCgpOyl7dmFyIGRlPWl0Lm5leHQoKTtkZS5zZXRWaXNpdGVkKGZhbHNlKTt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLmNvbXB1dGVEZXB0aD1mdW5jdGlvbihvdXRzaWRlRGVwdGgpe3RoaXMuY2xlYXJWaXNpdGVkRWRnZXMoKTt2YXIgZGU9dGhpcy5maW5kZXIuZ2V0RWRnZSgpO3ZhciBuPWRlLmdldE5vZGUoKTt2YXIgbGFiZWw9ZGUuZ2V0TGFiZWwoKTtkZS5zZXRFZGdlRGVwdGhzKGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLlJJR0hULG91dHNpZGVEZXB0aCk7dGhpcy5jb3B5U3ltRGVwdGhzKGRlKTt0aGlzLmNvbXB1dGVEZXB0aHMoZGUpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclN1YmdyYXBoLnByb3RvdHlwZS5jb21wdXRlRGVwdGhzPWZ1bmN0aW9uKHN0YXJ0RWRnZSl7dmFyIG5vZGVzVmlzaXRlZD1bXTt2YXIgbm9kZVF1ZXVlPVtdO3ZhciBzdGFydE5vZGU9c3RhcnRFZGdlLmdldE5vZGUoKTtub2RlUXVldWUucHVzaChzdGFydE5vZGUpO25vZGVzVmlzaXRlZC5wdXNoKHN0YXJ0Tm9kZSk7c3RhcnRFZGdlLnNldFZpc2l0ZWQodHJ1ZSk7d2hpbGUobm9kZVF1ZXVlLmxlbmd0aCE9PTApe3ZhciBuPW5vZGVRdWV1ZS5zaGlmdCgpO25vZGVzVmlzaXRlZC5wdXNoKG4pO3RoaXMuY29tcHV0ZU5vZGVEZXB0aChuKTtmb3IodmFyIGk9bi5nZXRFZGdlcygpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZGU9aS5uZXh0KCk7dmFyIHN5bT1kZS5nZXRTeW0oKTtpZihzeW0uaXNWaXNpdGVkKCkpXG5jb250aW51ZTt2YXIgYWRqTm9kZT1zeW0uZ2V0Tm9kZSgpO2lmKG5vZGVzVmlzaXRlZC5pbmRleE9mKGFkak5vZGUpPT09LTEpe25vZGVRdWV1ZS5wdXNoKGFkak5vZGUpO25vZGVzVmlzaXRlZC5wdXNoKGFkak5vZGUpO319fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclN1YmdyYXBoLnByb3RvdHlwZS5jb21wdXRlTm9kZURlcHRoPWZ1bmN0aW9uKG4pe3ZhciBzdGFydEVkZ2U9bnVsbDtmb3IodmFyIGk9bi5nZXRFZGdlcygpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZGU9aS5uZXh0KCk7aWYoZGUuaXNWaXNpdGVkKCl8fGRlLmdldFN5bSgpLmlzVmlzaXRlZCgpKXtzdGFydEVkZ2U9ZGU7YnJlYWs7fX1cbmlmKHN0YXJ0RWRnZT09bnVsbClcbnRocm93IG5ldyBqc3RzLmVycm9yLlRvcG9sb2d5RXJyb3IoJ3VuYWJsZSB0byBmaW5kIGVkZ2UgdG8gY29tcHV0ZSBkZXB0aHMgYXQgJytuLmdldENvb3JkaW5hdGUoKSk7bi5nZXRFZGdlcygpLmNvbXB1dGVEZXB0aHMoc3RhcnRFZGdlKTtmb3IodmFyIGk9bi5nZXRFZGdlcygpLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZGU9aS5uZXh0KCk7ZGUuc2V0VmlzaXRlZCh0cnVlKTt0aGlzLmNvcHlTeW1EZXB0aHMoZGUpO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJTdWJncmFwaC5wcm90b3R5cGUuY29weVN5bURlcHRocz1mdW5jdGlvbihkZSl7dmFyIHN5bT1kZS5nZXRTeW0oKTtzeW0uc2V0RGVwdGgoanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCxkZS5nZXREZXB0aChqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCkpO3N5bS5zZXREZXB0aChqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCxkZS5nZXREZXB0aChqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKSk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyU3ViZ3JhcGgucHJvdG90eXBlLmZpbmRSZXN1bHRFZGdlcz1mdW5jdGlvbigpe2Zvcih2YXIgaXQ9dGhpcy5kaXJFZGdlTGlzdC5pdGVyYXRvcigpO2l0Lmhhc05leHQoKTspe3ZhciBkZT1pdC5uZXh0KCk7aWYoZGUuZ2V0RGVwdGgoanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQpPj0xJiZkZS5nZXREZXB0aChqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5MRUZUKTw9MCYmIWRlLmlzSW50ZXJpb3JBcmVhRWRnZSgpKXtkZS5zZXRJblJlc3VsdCh0cnVlKTt9fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclN1YmdyYXBoLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24obyl7dmFyIGdyYXBoPW87aWYodGhpcy5yaWdodE1vc3RDb29yZC54PGdyYXBoLnJpZ2h0TW9zdENvb3JkLngpe3JldHVybi0xO31cbmlmKHRoaXMucmlnaHRNb3N0Q29vcmQueD5ncmFwaC5yaWdodE1vc3RDb29yZC54KXtyZXR1cm4gMTt9XG5yZXR1cm4gMDt9O2pzdHMuc2ltcGxpZnkuRFBUcmFuc2Zvcm1lcj1mdW5jdGlvbihkaXN0YW5jZVRvbGVyYW5jZSxpc0Vuc3VyZVZhbGlkVG9wb2xvZ3kpe3RoaXMuZGlzdGFuY2VUb2xlcmFuY2U9ZGlzdGFuY2VUb2xlcmFuY2U7dGhpcy5pc0Vuc3VyZVZhbGlkVG9wb2xvZ3k9aXNFbnN1cmVWYWxpZFRvcG9sb2d5O307anN0cy5zaW1wbGlmeS5EUFRyYW5zZm9ybWVyLnByb3RvdHlwZT1uZXcganN0cy5nZW9tLnV0aWwuR2VvbWV0cnlUcmFuc2Zvcm1lcigpO2pzdHMuc2ltcGxpZnkuRFBUcmFuc2Zvcm1lci5wcm90b3R5cGUuZGlzdGFuY2VUb2xlcmFuY2U9bnVsbDtqc3RzLnNpbXBsaWZ5LkRQVHJhbnNmb3JtZXIucHJvdG90eXBlLmlzRW5zdXJlVmFsaWRUb3BvbG9neT1udWxsO2pzdHMuc2ltcGxpZnkuRFBUcmFuc2Zvcm1lci5wcm90b3R5cGUudHJhbnNmb3JtQ29vcmRpbmF0ZXM9ZnVuY3Rpb24oY29vcmRzLHBhcmVudCl7dmFyIGlucHV0UHRzPWNvb3Jkczt2YXIgbmV3UHRzPW51bGw7aWYoaW5wdXRQdHMubGVuZ3RoPT0wKXtuZXdQdHM9W107fWVsc2V7bmV3UHRzPWpzdHMuc2ltcGxpZnkuRG91Z2xhc1BldWNrZXJMaW5lU2ltcGxpZmllci5zaW1wbGlmeShpbnB1dFB0cyx0aGlzLmRpc3RhbmNlVG9sZXJhbmNlKTt9XG5yZXR1cm4gbmV3UHRzO307anN0cy5zaW1wbGlmeS5EUFRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2x5Z29uPWZ1bmN0aW9uKGdlb20scGFyZW50KXtpZihnZW9tLmlzRW1wdHkoKSl7cmV0dXJuIG51bGw7fVxudmFyIHJhd0dlb209anN0cy5nZW9tLnV0aWwuR2VvbWV0cnlUcmFuc2Zvcm1lci5wcm90b3R5cGUudHJhbnNmb3JtUG9seWdvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYocGFyZW50IGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7cmV0dXJuIHJhd0dlb207fVxucmV0dXJuIHRoaXMuY3JlYXRlVmFsaWRBcmVhKHJhd0dlb20pO307anN0cy5zaW1wbGlmeS5EUFRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1MaW5lYXJSaW5nPWZ1bmN0aW9uKGdlb20scGFyZW50KXt2YXIgcmVtb3ZlRGVnZW5lcmF0ZVJpbmdzPXBhcmVudCBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29uO3ZhciBzaW1wUmVzdWx0PWpzdHMuZ2VvbS51dGlsLkdlb21ldHJ5VHJhbnNmb3JtZXIucHJvdG90eXBlLnRyYW5zZm9ybUxpbmVhclJpbmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHJlbW92ZURlZ2VuZXJhdGVSaW5ncyYmIShzaW1wUmVzdWx0IGluc3RhbmNlb2YganN0cy5nZW9tLkxpbmVhclJpbmcpKXtyZXR1cm4gbnVsbDt9XG5yZXR1cm4gc2ltcFJlc3VsdDt9O2pzdHMuc2ltcGxpZnkuRFBUcmFuc2Zvcm1lci5wcm90b3R5cGUudHJhbnNmb3JtTXVsdGlQb2x5Z29uPWZ1bmN0aW9uKGdlb20scGFyZW50KXt2YXIgcmF3R2VvbT1qc3RzLmdlb20udXRpbC5HZW9tZXRyeVRyYW5zZm9ybWVyLnByb3RvdHlwZS50cmFuc2Zvcm1NdWx0aVBvbHlnb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzLmNyZWF0ZVZhbGlkQXJlYShyYXdHZW9tKTt9O2pzdHMuc2ltcGxpZnkuRFBUcmFuc2Zvcm1lci5wcm90b3R5cGUuY3JlYXRlVmFsaWRBcmVhPWZ1bmN0aW9uKHJhd0FyZWFHZW9tKXtpZih0aGlzLmlzRW5zdXJlVmFsaWRUb3BvbG9neSl7cmV0dXJuIHJhd0FyZWFHZW9tLmJ1ZmZlcigwLjApO31cbnJldHVybiByYXdBcmVhR2VvbTt9O2pzdHMuZ2VvbS51dGlsLkdlb21ldHJ5RXh0cmFjdGVyPWZ1bmN0aW9uKGNseixjb21wcyl7dGhpcy5jbHo9Y2x6O3RoaXMuY29tcHM9Y29tcHM7fTtqc3RzLmdlb20udXRpbC5HZW9tZXRyeUV4dHJhY3Rlci5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbS5HZW9tZXRyeUZpbHRlcigpO2pzdHMuZ2VvbS51dGlsLkdlb21ldHJ5RXh0cmFjdGVyLnByb3RvdHlwZS5jbHo9bnVsbDtqc3RzLmdlb20udXRpbC5HZW9tZXRyeUV4dHJhY3Rlci5wcm90b3R5cGUuY29tcHM9bnVsbDtqc3RzLmdlb20udXRpbC5HZW9tZXRyeUV4dHJhY3Rlci5leHRyYWN0PWZ1bmN0aW9uKGdlb20sY2x6LGxpc3Qpe2xpc3Q9bGlzdHx8bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTtpZihnZW9tIGluc3RhbmNlb2YgY2x6KXtsaXN0LmFkZChnZW9tKTt9XG5lbHNlIGlmKGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9ufHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9pbnR8fGdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nfHxnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbil7Z2VvbS5hcHBseShuZXcganN0cy5nZW9tLnV0aWwuR2VvbWV0cnlFeHRyYWN0ZXIoY2x6LGxpc3QpKTt9XG5yZXR1cm4gbGlzdDt9O2pzdHMuZ2VvbS51dGlsLkdlb21ldHJ5RXh0cmFjdGVyLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZ2VvbSl7aWYodGhpcy5jbHo9PT1udWxsfHxnZW9tIGluc3RhbmNlb2YgdGhpcy5jbHope3RoaXMuY29tcHMuYWRkKGdlb20pO319OyhmdW5jdGlvbigpe3ZhciBPdmVybGF5T3A9anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3A7dmFyIFNuYXBPdmVybGF5T3A9anN0cy5vcGVyYXRpb24ub3ZlcmxheS5zbmFwLlNuYXBPdmVybGF5T3A7dmFyIFNuYXBJZk5lZWRlZE92ZXJsYXlPcD1mdW5jdGlvbihnMSxnMil7dGhpcy5nZW9tPVtdO3RoaXMuZ2VvbVswXT1nMTt0aGlzLmdlb21bMV09ZzI7fTtTbmFwSWZOZWVkZWRPdmVybGF5T3Aub3ZlcmxheU9wPWZ1bmN0aW9uKGcwLGcxLG9wQ29kZSl7dmFyIG9wPW5ldyBTbmFwSWZOZWVkZWRPdmVybGF5T3AoZzAsZzEpO3JldHVybiBvcC5nZXRSZXN1bHRHZW9tZXRyeShvcENvZGUpO307U25hcElmTmVlZGVkT3ZlcmxheU9wLmludGVyc2VjdGlvbj1mdW5jdGlvbihnMCxnMSl7cmV0dXJuIG92ZXJsYXlPcChnMCxnMSxPdmVybGF5T3AuSU5URVJTRUNUSU9OKTt9O1NuYXBJZk5lZWRlZE92ZXJsYXlPcC51bmlvbj1mdW5jdGlvbihnMCxnMSl7cmV0dXJuIG92ZXJsYXlPcChnMCxnMSxPdmVybGF5T3AuVU5JT04pO307U25hcElmTmVlZGVkT3ZlcmxheU9wLmRpZmZlcmVuY2U9ZnVuY3Rpb24oZzAsZzEpe3JldHVybiBvdmVybGF5T3AoZzAsZzEsT3ZlcmxheU9wLkRJRkZFUkVOQ0UpO307U25hcElmTmVlZGVkT3ZlcmxheU9wLnN5bURpZmZlcmVuY2U9ZnVuY3Rpb24oZzAsZzEpe3JldHVybiBvdmVybGF5T3AoZzAsZzEsT3ZlcmxheU9wLlNZTURJRkZFUkVOQ0UpO307U25hcElmTmVlZGVkT3ZlcmxheU9wLnByb3RvdHlwZS5nZW9tPW51bGw7U25hcElmTmVlZGVkT3ZlcmxheU9wLnByb3RvdHlwZS5nZXRSZXN1bHRHZW9tZXRyeT1mdW5jdGlvbihvcENvZGUpe3ZhciByZXN1bHQ9bnVsbDt2YXIgaXNTdWNjZXNzPWZhbHNlO3ZhciBzYXZlZEV4Y2VwdGlvbj1udWxsO3RyeXtyZXN1bHQ9T3ZlcmxheU9wLm92ZXJsYXlPcCh0aGlzLmdlb21bMF0sdGhpcy5nZW9tWzFdLG9wQ29kZSk7dmFyIGlzVmFsaWQ9dHJ1ZTtpZihpc1ZhbGlkKVxuaXNTdWNjZXNzPXRydWU7fWNhdGNoKGV4KXtzYXZlZEV4Y2VwdGlvbj1leDt9XG5pZighaXNTdWNjZXNzKXt0cnl7cmVzdWx0PVNuYXBPdmVybGF5T3Aub3ZlcmxheU9wKHRoaXMuZ2VvbVswXSx0aGlzLmdlb21bMV0sb3BDb2RlKTt9Y2F0Y2goZXgpe3Rocm93IHNhdmVkRXhjZXB0aW9uO319XG5yZXR1cm4gcmVzdWx0O307anN0cy5vcGVyYXRpb24ub3ZlcmxheS5zbmFwLlNuYXBJZk5lZWRlZE92ZXJsYXlPcD1TbmFwSWZOZWVkZWRPdmVybGF5T3A7fSkoKTsoZnVuY3Rpb24oKXt2YXIgR2VvbWV0cnlFeHRyYWN0ZXI9anN0cy5nZW9tLnV0aWwuR2VvbWV0cnlFeHRyYWN0ZXI7dmFyIENhc2NhZGVkUG9seWdvblVuaW9uPWpzdHMub3BlcmF0aW9uLnVuaW9uLkNhc2NhZGVkUG9seWdvblVuaW9uO3ZhciBQb2ludEdlb21ldHJ5VW5pb249anN0cy5vcGVyYXRpb24udW5pb24uUG9pbnRHZW9tZXRyeVVuaW9uO3ZhciBPdmVybGF5T3A9anN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5T3A7dmFyIFNuYXBJZk5lZWRlZE92ZXJsYXlPcD1qc3RzLm9wZXJhdGlvbi5vdmVybGF5LnNuYXAuU25hcElmTmVlZGVkT3ZlcmxheU9wO3ZhciBBcnJheUxpc3Q9amF2YXNjcmlwdC51dGlsLkFycmF5TGlzdDtqc3RzLm9wZXJhdGlvbi51bmlvbi5VbmFyeVVuaW9uT3A9ZnVuY3Rpb24oZ2VvbXMsZ2VvbUZhY3Qpe3RoaXMucG9seWdvbnM9bmV3IEFycmF5TGlzdCgpO3RoaXMubGluZXM9bmV3IEFycmF5TGlzdCgpO3RoaXMucG9pbnRzPW5ldyBBcnJheUxpc3QoKTtpZihnZW9tRmFjdCl7dGhpcy5nZW9tRmFjdD1nZW9tRmFjdDt9XG50aGlzLmV4dHJhY3QoZ2VvbXMpO307anN0cy5vcGVyYXRpb24udW5pb24uVW5hcnlVbmlvbk9wLnVuaW9uPWZ1bmN0aW9uKGdlb21zLGdlb21GYWN0KXt2YXIgb3A9bmV3IGpzdHMub3BlcmF0aW9uLnVuaW9uLlVuYXJ5VW5pb25PcChnZW9tcyxnZW9tRmFjdCk7cmV0dXJuIG9wLnVuaW9uKCk7fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5VbmFyeVVuaW9uT3AucHJvdG90eXBlLnBvbHlnb25zPW51bGw7anN0cy5vcGVyYXRpb24udW5pb24uVW5hcnlVbmlvbk9wLnByb3RvdHlwZS5saW5lcz1udWxsO2pzdHMub3BlcmF0aW9uLnVuaW9uLlVuYXJ5VW5pb25PcC5wcm90b3R5cGUucG9pbnRzPW51bGw7anN0cy5vcGVyYXRpb24udW5pb24uVW5hcnlVbmlvbk9wLnByb3RvdHlwZS5nZW9tRmFjdD1udWxsO2pzdHMub3BlcmF0aW9uLnVuaW9uLlVuYXJ5VW5pb25PcC5wcm90b3R5cGUuZXh0cmFjdD1mdW5jdGlvbihnZW9tcyl7aWYoZ2VvbXMgaW5zdGFuY2VvZiBBcnJheUxpc3Qpe2Zvcih2YXIgaT1nZW9tcy5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIGdlb209aS5uZXh0KCk7dGhpcy5leHRyYWN0KGdlb20pO319ZWxzZXtpZih0aGlzLmdlb21GYWN0PT09bnVsbCl7dGhpcy5nZW9tRmFjdD1nZW9tcy5nZXRGYWN0b3J5KCk7fVxuR2VvbWV0cnlFeHRyYWN0ZXIuZXh0cmFjdChnZW9tcyxqc3RzLmdlb20uUG9seWdvbix0aGlzLnBvbHlnb25zKTtHZW9tZXRyeUV4dHJhY3Rlci5leHRyYWN0KGdlb21zLGpzdHMuZ2VvbS5MaW5lU3RyaW5nLHRoaXMubGluZXMpO0dlb21ldHJ5RXh0cmFjdGVyLmV4dHJhY3QoZ2VvbXMsanN0cy5nZW9tLlBvaW50LHRoaXMucG9pbnRzKTt9fTtqc3RzLm9wZXJhdGlvbi51bmlvbi5VbmFyeVVuaW9uT3AucHJvdG90eXBlLnVuaW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5nZW9tRmFjdD09PW51bGwpe3JldHVybiBudWxsO31cbnZhciB1bmlvblBvaW50cz1udWxsO2lmKHRoaXMucG9pbnRzLnNpemUoKT4wKXt2YXIgcHRHZW9tPXRoaXMuZ2VvbUZhY3QuYnVpbGRHZW9tZXRyeSh0aGlzLnBvaW50cyk7dW5pb25Qb2ludHM9dGhpcy51bmlvbk5vT3B0KHB0R2VvbSk7fVxudmFyIHVuaW9uTGluZXM9bnVsbDtpZih0aGlzLmxpbmVzLnNpemUoKT4wKXt2YXIgbGluZUdlb209dGhpcy5nZW9tRmFjdC5idWlsZEdlb21ldHJ5KHRoaXMubGluZXMpO3VuaW9uTGluZXM9dGhpcy51bmlvbk5vT3B0KGxpbmVHZW9tKTt9XG52YXIgdW5pb25Qb2x5Z29ucz1udWxsO2lmKHRoaXMucG9seWdvbnMuc2l6ZSgpPjApe3VuaW9uUG9seWdvbnM9Q2FzY2FkZWRQb2x5Z29uVW5pb24udW5pb24odGhpcy5wb2x5Z29ucyk7fVxudmFyIHVuaW9uTEE9dGhpcy51bmlvbldpdGhOdWxsKHVuaW9uTGluZXMsdW5pb25Qb2x5Z29ucyk7dmFyIHVuaW9uPW51bGw7aWYodW5pb25Qb2ludHM9PT1udWxsKXt1bmlvbj11bmlvbkxBO31lbHNlIGlmKHVuaW9uTEE9PT1udWxsKXt1bmlvbj11bmlvblBvaW50czt9ZWxzZXt1bmlvbj1Qb2ludEdlb21ldHJ5VW5pb24odW5pb25Qb2ludHMsdW5pb25MQSk7fVxuaWYodW5pb249PT1udWxsKXtyZXR1cm4gdGhpcy5nZW9tRmFjdC5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obnVsbCk7fVxucmV0dXJuIHVuaW9uO307anN0cy5vcGVyYXRpb24udW5pb24uVW5hcnlVbmlvbk9wLnByb3RvdHlwZS51bmlvbldpdGhOdWxsPWZ1bmN0aW9uKGcwLGcxKXtpZihnMD09PW51bGwmJmcxPT09bnVsbCl7cmV0dXJuIG51bGw7fVxuaWYoZzE9PT1udWxsKXtyZXR1cm4gZzA7fVxuaWYoZzA9PT1udWxsKXtyZXR1cm4gZzE7fVxucmV0dXJuIGcwLnVuaW9uKGcxKTt9O2pzdHMub3BlcmF0aW9uLnVuaW9uLlVuYXJ5VW5pb25PcC5wcm90b3R5cGUudW5pb25Ob09wdD1mdW5jdGlvbihnMCl7dmFyIGVtcHR5PXRoaXMuZ2VvbUZhY3QuY3JlYXRlUG9pbnQobnVsbCk7cmV0dXJuIFNuYXBJZk5lZWRlZE92ZXJsYXlPcC5vdmVybGF5T3AoZzAsZW1wdHksT3ZlcmxheU9wLlVOSU9OKTt9O30oKSk7anN0cy5pbmRleC5rZHRyZWUuS2ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5sZWZ0PW51bGw7dGhpcy5yaWdodD1udWxsO3RoaXMuY291bnQ9MTtpZihhcmd1bWVudHMubGVuZ3RoPT09Mil7dGhpcy5pbml0aWFsaXplRnJvbUNvb3JkaW5hdGUuYXBwbHkodGhpcyxhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT09Myl7dGhpcy5pbml0aWFsaXplRnJvbVhZLmFwcGx5KHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pO319O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuaW5pdGlhbGl6ZUZyb21YWT1mdW5jdGlvbih4LHksZGF0YSl7dGhpcy5wPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh4LHkpO3RoaXMuZGF0YT1kYXRhO307anN0cy5pbmRleC5rZHRyZWUuS2ROb2RlLnByb3RvdHlwZS5pbml0aWFsaXplRnJvbUNvb3JkaW5hdGU9ZnVuY3Rpb24ocCxkYXRhKXt0aGlzLnA9cDt0aGlzLmRhdGE9ZGF0YTt9O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuZ2V0WD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnAueDt9O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuZ2V0WT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnAueTt9O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnA7fTtqc3RzLmluZGV4LmtkdHJlZS5LZE5vZGUucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhO307anN0cy5pbmRleC5rZHRyZWUuS2ROb2RlLnByb3RvdHlwZS5nZXRMZWZ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdDt9O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuZ2V0UmlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yaWdodDt9O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuaW5jcmVtZW50PWZ1bmN0aW9uKCl7dGhpcy5jb3VudCs9MTt9O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuZ2V0Q291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb3VudDt9O2pzdHMuaW5kZXgua2R0cmVlLktkTm9kZS5wcm90b3R5cGUuaXNSZXBlYXRlZD1mdW5jdGlvbigpe3JldHVybiBjb3VudD4xO307anN0cy5pbmRleC5rZHRyZWUuS2ROb2RlLnByb3RvdHlwZS5zZXRMZWZ0PWZ1bmN0aW9uKGxlZnQpe3RoaXMubGVmdD1sZWZ0O307anN0cy5pbmRleC5rZHRyZWUuS2ROb2RlLnByb3RvdHlwZS5zZXRSaWdodD1mdW5jdGlvbihyaWdodCl7dGhpcy5yaWdodD1yaWdodDt9O2pzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRQb2ludD1mdW5jdGlvbihnZW9tZXRyeSl7dGhpcy5taW5EaXN0YW5jZT1OdW1iZXIuTUFYX1ZBTFVFO3RoaXMuaW50ZXJpb3JQb2ludD1udWxsO3RoaXMuY2VudHJvaWQ9Z2VvbWV0cnkuZ2V0Q2VudHJvaWQoKS5nZXRDb29yZGluYXRlKCk7dGhpcy5hZGQoZ2VvbWV0cnkpO307anN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludFBvaW50LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZ2VvbWV0cnkpe2lmKGdlb21ldHJ5IGluc3RhbmNlb2YganN0cy5nZW9tLlBvaW50KXt0aGlzLmFkZFBvaW50KGdlb21ldHJ5LmdldENvb3JkaW5hdGUoKSk7fWVsc2UgaWYoZ2VvbWV0cnkgaW5zdGFuY2VvZiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uKXtmb3IodmFyIGk9MDtpPGdlb21ldHJ5LmdldE51bUdlb21ldHJpZXMoKTtpKyspe3RoaXMuYWRkKGdlb21ldHJ5LmdldEdlb21ldHJ5TihpKSk7fX19O2pzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRQb2ludC5wcm90b3R5cGUuYWRkUG9pbnQ9ZnVuY3Rpb24ocG9pbnQpe3ZhciBkaXN0PXBvaW50LmRpc3RhbmNlKHRoaXMuY2VudHJvaWQpO2lmKGRpc3Q8dGhpcy5taW5EaXN0YW5jZSl7dGhpcy5pbnRlcmlvclBvaW50PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShwb2ludCk7dGhpcy5taW5EaXN0YW5jZT1kaXN0O319O2pzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRQb2ludC5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyaW9yUG9pbnQ7fTsoZnVuY3Rpb24oKXtqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nPWZ1bmN0aW9uKGdlb21ldHJpZXMsZmFjdG9yeSl7dGhpcy5nZW9tZXRyaWVzPWdlb21ldHJpZXN8fFtdO3RoaXMuZmFjdG9yeT1mYWN0b3J5O307anN0cy5nZW9tLk11bHRpTGluZVN0cmluZy5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24oKTtqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nLmNvbnN0cnVjdG9yPWpzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmc7anN0cy5nZW9tLk11bHRpTGluZVN0cmluZy5wcm90b3R5cGUuZ2V0Qm91bmRhcnk9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IGpzdHMub3BlcmF0aW9uLkJvdW5kYXJ5T3AodGhpcykpLmdldEJvdW5kYXJ5KCk7fTtqc3RzLmdlb20uTXVsdGlMaW5lU3RyaW5nLnByb3RvdHlwZS5lcXVhbHNFeGFjdD1mdW5jdGlvbihvdGhlcix0b2xlcmFuY2Upe2lmKCF0aGlzLmlzRXF1aXZhbGVudENsYXNzKG90aGVyKSl7cmV0dXJuIGZhbHNlO31cbnJldHVybiBqc3RzLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uLnByb3RvdHlwZS5lcXVhbHNFeGFjdC5jYWxsKHRoaXMsb3RoZXIsdG9sZXJhbmNlKTt9O2pzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcucHJvdG90eXBlLkNMQVNTX05BTUU9J2pzdHMuZ2VvbS5NdWx0aUxpbmVTdHJpbmcnO30pKCk7KGZ1bmN0aW9uKCl7dmFyIEludGVydmFsPWpzdHMuaW5kZXguYmludHJlZS5JbnRlcnZhbDt2YXIgUm9vdD1qc3RzLmluZGV4LmJpbnRyZWUuUm9vdDt2YXIgQmludHJlZT1mdW5jdGlvbigpe3RoaXMucm9vdD1uZXcgUm9vdCgpO3RoaXMubWluRXh0ZW50PTEuMDt9O0JpbnRyZWUuZW5zdXJlRXh0ZW50PWZ1bmN0aW9uKGl0ZW1JbnRlcnZhbCxtaW5FeHRlbnQpe3ZhciBtaW4sbWF4O21pbj1pdGVtSW50ZXJ2YWwuZ2V0TWluKCk7bWF4PWl0ZW1JbnRlcnZhbC5nZXRNYXgoKTtpZihtaW4hPT1tYXgpe3JldHVybiBpdGVtSW50ZXJ2YWw7fVxuaWYobWluPT09bWF4KXttaW49bWluLShtaW5FeHRlbnQvMi4wKTttYXg9bWluKyhtaW5FeHRlbnQvMi4wKTt9XG5yZXR1cm4gbmV3IEludGVydmFsKG1pbixtYXgpO307QmludHJlZS5wcm90b3R5cGUuZGVwdGg9ZnVuY3Rpb24oKXtpZih0aGlzLnJvb3QhPT1udWxsKXtyZXR1cm4gdGhpcy5yb290LmRlcHRoKCk7fVxucmV0dXJuIDA7fTtCaW50cmVlLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5yb290IT09bnVsbCl7cmV0dXJuIHRoaXMucm9vdC5zaXplKCk7fVxucmV0dXJuIDA7fTtCaW50cmVlLnByb3RvdHlwZS5ub2RlU2l6ZT1mdW5jdGlvbigpe2lmKHRoaXMucm9vdCE9PW51bGwpe3JldHVybiB0aGlzLnJvb3Qubm9kZVNpemUoKTt9XG5yZXR1cm4gMDt9O0JpbnRyZWUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihpdGVtSW50ZXJ2YWwsaXRlbSl7dGhpcy5jb2xsZWN0U3RhdHMoaXRlbUludGVydmFsKTt2YXIgaW5zZXJ0SW50ZXJ2YWw9QmludHJlZS5lbnN1cmVFeHRlbnQoaXRlbUludGVydmFsLHRoaXMubWluRXh0ZW50KTt0aGlzLnJvb3QuaW5zZXJ0KGluc2VydEludGVydmFsLGl0ZW0pO307QmludHJlZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGl0ZW1JbnRlcnZhbCxpdGVtKXt2YXIgaW5zZXJ0SW50ZXJ2YWw9QmludHJlZS5lbnN1cmVFeHRlbnQoaXRlbUludGVydmFsLHRoaXMubWluRXh0ZW50KTtyZXR1cm4gdGhpcy5yb290LnJlbW92ZShpbnNlcnRJbnRlcnZhbCxpdGVtKTt9O0JpbnRyZWUucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIGZvdW5kSXRlbXM9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTt0aGlzLnJvb3QuYWRkQWxsSXRlbXMoZm91bmRJdGVtcyk7cmV0dXJuIGZvdW5kSXRlbXMuaXRlcmF0b3IoKTt9O0JpbnRyZWUucHJvdG90eXBlLnF1ZXJ5PWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMucXVlcnlBbmRBZGQoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7fWVsc2V7dmFyIHg9YXJndW1lbnRzWzBdO2lmKCF4IGluc3RhbmNlb2YgSW50ZXJ2YWwpe3g9bmV3IEludGVydmFsKHgseCk7fVxucmV0dXJuIHRoaXMucXVlcnlJbnRlcnZhbCh4KTt9fTtCaW50cmVlLnByb3RvdHlwZS5xdWVyeUludGVydmFsPWZ1bmN0aW9uKGludGVydmFsKXt2YXIgZm91bmRJdGVtcz1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpO3RoaXMucXVlcnkoaW50ZXJ2YWwsZm91bmRJdGVtcyk7cmV0dXJuIGZvdW5kSXRlbXM7fTtCaW50cmVlLnByb3RvdHlwZS5xdWVyeUFuZEFkZD1mdW5jdGlvbihpbnRlcnZhbCxmb3VuZEl0ZW1zKXt0aGlzLnJvb3QuYWRkQWxsSXRlbXNGcm9tT3ZlcmxhcHBpbmcoaW50ZXJ2YWwsZm91bmRJdGVtcyk7fTtCaW50cmVlLnByb3RvdHlwZS5jb2xsZWN0U3RhdHM9ZnVuY3Rpb24oaW50ZXJ2YWwpe3ZhciBkZWw9aW50ZXJ2YWwuZ2V0V2lkdGgoKTtpZihkZWw8dGhpcy5taW5FeHRlbnQmJmRlbD4wLjApe3RoaXMubWluRXh0ZW50PWRlbDt9fTtqc3RzLmluZGV4LmJpbnRyZWUuQmludHJlZT1CaW50cmVlO30pKCk7anN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludEFyZWE9ZnVuY3Rpb24oZ2VvbWV0cnkpe3RoaXMuZmFjdG9yeTt0aGlzLmludGVyaW9yUG9pbnQ9bnVsbDt0aGlzLm1heFdpZHRoPTA7dGhpcy5mYWN0b3J5PWdlb21ldHJ5LmdldEZhY3RvcnkoKTt0aGlzLmFkZChnZW9tZXRyeSk7fTtqc3RzLmFsZ29yaXRobS5JbnRlcmlvclBvaW50QXJlYS5hdmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYStiKS8yO307anN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludEFyZWEucHJvdG90eXBlLmdldEludGVyaW9yUG9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcmlvclBvaW50O307anN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludEFyZWEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihnZW9tZXRyeSl7aWYoZ2VvbWV0cnkgaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbil7dGhpcy5hZGRQb2x5Z29uKGdlb21ldHJ5KTt9ZWxzZSBpZihnZW9tZXRyeSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24pe2Zvcih2YXIgaT0wO2k8Z2VvbWV0cnkuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dGhpcy5hZGQoZ2VvbWV0cnkuZ2V0R2VvbWV0cnlOKGkpKTt9fX07anN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludEFyZWEucHJvdG90eXBlLmFkZFBvbHlnb249ZnVuY3Rpb24oZ2VvbWV0cnkpe2lmKGdlb21ldHJ5LmlzRW1wdHkoKSl7cmV0dXJuO31cbnZhciBpbnRQdDt2YXIgd2lkdGg9MDt2YXIgYmlzZWN0b3I9dGhpcy5ob3Jpem9udGFsQmlzZWN0b3IoZ2VvbWV0cnkpO2lmKGJpc2VjdG9yLmdldExlbmd0aCgpPT0wLjApe3dpZHRoPTA7aW50UHQ9YmlzZWN0b3IuZ2V0Q29vcmRpbmF0ZSgpO31lbHNle3ZhciBpbnRlcnNlY3Rpb25zPWJpc2VjdG9yLmludGVyc2VjdGlvbihnZW9tZXRyeSk7dmFyIHdpZGVzdEludGVyc2VjdGlvbj10aGlzLndpZGVzdEdlb21ldHJ5KGludGVyc2VjdGlvbnMpO3dpZHRoPXdpZGVzdEludGVyc2VjdGlvbi5nZXRFbnZlbG9wZUludGVybmFsKCkuZ2V0V2lkdGgoKTtpbnRQdD10aGlzLmNlbnRyZSh3aWRlc3RJbnRlcnNlY3Rpb24uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKTt9XG5pZih0aGlzLmludGVyaW9yUG9pbnQ9PW51bGx8fHdpZHRoPnRoaXMubWF4V2lkdGgpe3RoaXMuaW50ZXJpb3JQb2ludD1pbnRQdDt0aGlzLm1heFdpZHRoPXdpZHRoO319O2pzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRBcmVhLnByb3RvdHlwZS53aWRlc3RHZW9tZXRyeT1mdW5jdGlvbihvYmope2lmKG9iaiBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24pe3ZhciBnYz1vYmo7aWYoZ2MuaXNFbXB0eSgpKXtyZXR1cm4gZ2M7fVxudmFyIHdpZGVzdEdlb21ldHJ5PWdjLmdldEdlb21ldHJ5TigwKTtmb3IodmFyIGk9MTtpPGdjLmdldE51bUdlb21ldHJpZXMoKTtpKyspe2lmKGdjLmdldEdlb21ldHJ5TihpKS5nZXRFbnZlbG9wZUludGVybmFsKCkuZ2V0V2lkdGgoKT53aWRlc3RHZW9tZXRyeS5nZXRFbnZlbG9wZUludGVybmFsKCkuZ2V0V2lkdGgoKSl7d2lkZXN0R2VvbWV0cnk9Z2MuZ2V0R2VvbWV0cnlOKGkpO319XG5yZXR1cm4gd2lkZXN0R2VvbWV0cnk7fWVsc2UgaWYob2JqIGluc3RhbmNlb2YganN0cy5nZW9tLkdlb21ldHJ5KXtyZXR1cm4gb2JqO319O2pzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRBcmVhLnByb3RvdHlwZS5ob3Jpem9udGFsQmlzZWN0b3I9ZnVuY3Rpb24oZ2VvbWV0cnkpe3ZhciBlbnZlbG9wZT1nZW9tZXRyeS5nZXRFbnZlbG9wZUludGVybmFsKCk7dmFyIGJpc2VjdFk9anN0cy5hbGdvcml0aG0uU2FmZUJpc2VjdG9yRmluZGVyLmdldEJpc2VjdG9yWShnZW9tZXRyeSk7cmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKFtuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoZW52ZWxvcGUuZ2V0TWluWCgpLGJpc2VjdFkpLG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShlbnZlbG9wZS5nZXRNYXhYKCksYmlzZWN0WSldKTt9O2pzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRBcmVhLnByb3RvdHlwZS5jZW50cmU9ZnVuY3Rpb24oZW52ZWxvcGUpe3JldHVybiBuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoanN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludEFyZWEuYXZnKGVudmVsb3BlLmdldE1pblgoKSxlbnZlbG9wZS5nZXRNYXhYKCkpLGpzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRBcmVhLmF2ZyhlbnZlbG9wZS5nZXRNaW5ZKCksZW52ZWxvcGUuZ2V0TWF4WSgpKSk7fTtqc3RzLmFsZ29yaXRobS5TYWZlQmlzZWN0b3JGaW5kZXI9ZnVuY3Rpb24ocG9seSl7dGhpcy5wb2x5O3RoaXMuY2VudHJlWTt0aGlzLmhpWT1OdW1iZXIuTUFYX1ZBTFVFO3RoaXMubG9ZPS1OdW1iZXIuTUFYX1ZBTFVFO3RoaXMucG9seT1wb2x5O3RoaXMuaGlZPXBvbHkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmdldE1heFkoKTt0aGlzLmxvWT1wb2x5LmdldEVudmVsb3BlSW50ZXJuYWwoKS5nZXRNaW5ZKCk7dGhpcy5jZW50cmVZPWpzdHMuYWxnb3JpdGhtLkludGVyaW9yUG9pbnRBcmVhLmF2Zyh0aGlzLmxvWSx0aGlzLmhpWSk7fTtqc3RzLmFsZ29yaXRobS5TYWZlQmlzZWN0b3JGaW5kZXIuZ2V0QmlzZWN0b3JZPWZ1bmN0aW9uKHBvbHkpe3ZhciBmaW5kZXI9bmV3IGpzdHMuYWxnb3JpdGhtLlNhZmVCaXNlY3RvckZpbmRlcihwb2x5KTtyZXR1cm4gZmluZGVyLmdldEJpc2VjdG9yWSgpO307anN0cy5hbGdvcml0aG0uU2FmZUJpc2VjdG9yRmluZGVyLnByb3RvdHlwZS5nZXRCaXNlY3Rvclk9ZnVuY3Rpb24oKXt0aGlzLnByb2Nlc3ModGhpcy5wb2x5LmdldEV4dGVyaW9yUmluZygpKTtmb3IodmFyIGk9MDtpPHRoaXMucG9seS5nZXROdW1JbnRlcmlvclJpbmcoKTtpKyspe3RoaXMucHJvY2Vzcyh0aGlzLnBvbHkuZ2V0SW50ZXJpb3JSaW5nTihpKSk7fVxudmFyIGJpc2VjdFk9anN0cy5hbGdvcml0aG0uSW50ZXJpb3JQb2ludEFyZWEuYXZnKHRoaXMuaGlZLHRoaXMubG9ZKTtyZXR1cm4gYmlzZWN0WTt9O2pzdHMuYWxnb3JpdGhtLlNhZmVCaXNlY3RvckZpbmRlci5wcm90b3R5cGUucHJvY2Vzcz1mdW5jdGlvbihsaW5lKXt2YXIgc2VxPWxpbmUuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCk7Zm9yKHZhciBpPTA7aTxzZXEubGVuZ3RoO2krKyl7dmFyIHk9c2VxW2ldLnk7dGhpcy51cGRhdGVJbnRlcnZhbCh5KTt9fTtqc3RzLmFsZ29yaXRobS5TYWZlQmlzZWN0b3JGaW5kZXIucHJvdG90eXBlLnVwZGF0ZUludGVydmFsPWZ1bmN0aW9uKHkpe2lmKHk8PXRoaXMuY2VudHJlWSl7aWYoeT50aGlzLmxvWSl7dGhpcy5sb1k9eTt9fWVsc2UgaWYoeT50aGlzLmNlbnRyZVkpe2lmKHk8dGhpcy5oaVkpe3RoaXMuaGlZPXk7fX19O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzPWZ1bmN0aW9uKHF1YWRyYW50U2VnbWVudHMsZW5kQ2FwU3R5bGUsam9pblN0eWxlLG1pdHJlTGltaXQpe2lmKHF1YWRyYW50U2VnbWVudHMpXG50aGlzLnNldFF1YWRyYW50U2VnbWVudHMocXVhZHJhbnRTZWdtZW50cyk7aWYoZW5kQ2FwU3R5bGUpXG50aGlzLnNldEVuZENhcFN0eWxlKGVuZENhcFN0eWxlKTtpZihqb2luU3R5bGUpXG50aGlzLnNldEpvaW5TdHlsZShqb2luU3R5bGUpO2lmKG1pdHJlTGltaXQpXG50aGlzLnNldE1pdHJlTGltaXQobWl0cmVMaW1pdCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5DQVBfUk9VTkQ9MTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5DQVBfRkxBVD0yO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkNBUF9TUVVBUkU9Mztqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5KT0lOX1JPVU5EPTE7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuSk9JTl9NSVRSRT0yO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkpPSU5fQkVWRUw9Mztqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5ERUZBVUxUX1FVQURSQU5UX1NFR01FTlRTPTg7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuREVGQVVMVF9NSVRSRV9MSU1JVD01LjA7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMucHJvdG90eXBlLnF1YWRyYW50U2VnbWVudHM9anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuREVGQVVMVF9RVUFEUkFOVF9TRUdNRU5UUztqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5wcm90b3R5cGUuZW5kQ2FwU3R5bGU9anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuQ0FQX1JPVU5EO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLnByb3RvdHlwZS5qb2luU3R5bGU9anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuSk9JTl9ST1VORDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5wcm90b3R5cGUubWl0cmVMaW1pdD1qc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5ERUZBVUxUX01JVFJFX0xJTUlUO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLnByb3RvdHlwZS5faXNTaW5nbGVTaWRlZD1mYWxzZTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5wcm90b3R5cGUuZ2V0UXVhZHJhbnRTZWdtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnF1YWRyYW50U2VnbWVudHM7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5wcm90b3R5cGUuc2V0UXVhZHJhbnRTZWdtZW50cz1mdW5jdGlvbihxdWFkcmFudFNlZ21lbnRzKXt0aGlzLnF1YWRyYW50U2VnbWVudHM9cXVhZHJhbnRTZWdtZW50czt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLnByb3RvdHlwZS5zZXRRdWFkcmFudFNlZ21lbnRzPWZ1bmN0aW9uKHF1YWRTZWdzKXt0aGlzLnF1YWRyYW50U2VnbWVudHM9cXVhZFNlZ3M7aWYodGhpcy5xdWFkcmFudFNlZ21lbnRzPT09MClcbnRoaXMuam9pblN0eWxlPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkpPSU5fQkVWRUw7aWYodGhpcy5xdWFkcmFudFNlZ21lbnRzPDApe3RoaXMuam9pblN0eWxlPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkpPSU5fTUlUUkU7dGhpcy5taXRyZUxpbWl0PU1hdGguYWJzKHRoaXMucXVhZHJhbnRTZWdtZW50cyk7fVxuaWYocXVhZFNlZ3M8PTApe3RoaXMucXVhZHJhbnRTZWdtZW50cz0xO31cbmlmKHRoaXMuam9pblN0eWxlIT09anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuSk9JTl9ST1VORCl7dGhpcy5xdWFkcmFudFNlZ21lbnRzPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLkRFRkFVTFRfUVVBRFJBTlRfU0VHTUVOVFM7fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMuYnVmZmVyRGlzdGFuY2VFcnJvcj1mdW5jdGlvbihxdWFkU2Vncyl7dmFyIGFscGhhPU1hdGguUEkvMi4wL3F1YWRTZWdzO3JldHVybiAxLU1hdGguY29zKGFscGhhLzIuMCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5wcm90b3R5cGUuZ2V0RW5kQ2FwU3R5bGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmRDYXBTdHlsZTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLnByb3RvdHlwZS5zZXRFbmRDYXBTdHlsZT1mdW5jdGlvbihlbmRDYXBTdHlsZSl7dGhpcy5lbmRDYXBTdHlsZT1lbmRDYXBTdHlsZTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzLnByb3RvdHlwZS5nZXRKb2luU3R5bGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luU3R5bGU7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5wcm90b3R5cGUuc2V0Sm9pblN0eWxlPWZ1bmN0aW9uKGpvaW5TdHlsZSl7dGhpcy5qb2luU3R5bGU9am9pblN0eWxlO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMucHJvdG90eXBlLmdldE1pdHJlTGltaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taXRyZUxpbWl0O307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMucHJvdG90eXBlLnNldE1pdHJlTGltaXQ9ZnVuY3Rpb24obWl0cmVMaW1pdCl7dGhpcy5taXRyZUxpbWl0PW1pdHJlTGltaXQ7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyUGFyYW1ldGVycy5wcm90b3R5cGUuc2V0U2luZ2xlU2lkZWQ9ZnVuY3Rpb24oaXNTaW5nbGVTaWRlZCl7dGhpcy5faXNTaW5nbGVTaWRlZD1pc1NpbmdsZVNpZGVkO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlclBhcmFtZXRlcnMucHJvdG90eXBlLmlzU2luZ2xlU2lkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNTaW5nbGVTaWRlZDt9OyhmdW5jdGlvbigpe2pzdHMuZ2VvbS51dGlsLlNob3J0Q2lyY3VpdGVkR2VvbWV0cnlWaXNpdG9yPWZ1bmN0aW9uKCl7fTtqc3RzLmdlb20udXRpbC5TaG9ydENpcmN1aXRlZEdlb21ldHJ5VmlzaXRvci5wcm90b3R5cGUuaXNEb25lPWZhbHNlO2pzdHMuZ2VvbS51dGlsLlNob3J0Q2lyY3VpdGVkR2VvbWV0cnlWaXNpdG9yLnByb3RvdHlwZS5hcHBseVRvPWZ1bmN0aW9uKGdlb20pe2Zvcih2YXIgaT0wO2k8Z2VvbS5nZXROdW1HZW9tZXRyaWVzKCkmJiF0aGlzLmlzRG9uZTtpKyspe3ZhciBlbGVtZW50PWdlb20uZ2V0R2VvbWV0cnlOKGkpO2lmKCEoZWxlbWVudCBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24pKXt0aGlzLnZpc2l0KGVsZW1lbnQpO2lmKHRoaXMuaXNEb25lKCkpe3RoaXMuaXNEb25lPXRydWU7cmV0dXJuO319XG5lbHNlXG50aGlzLmFwcGx5VG8oZWxlbWVudCk7fX1cbmpzdHMuZ2VvbS51dGlsLlNob3J0Q2lyY3VpdGVkR2VvbWV0cnlWaXNpdG9yLnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbihlbGVtZW50KXt9O2pzdHMuZ2VvbS51dGlsLlNob3J0Q2lyY3VpdGVkR2VvbWV0cnlWaXNpdG9yLnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXt9O30pKCk7KGZ1bmN0aW9uKCl7dmFyIEVudmVsb3BlSW50ZXJzZWN0c1Zpc2l0b3I9ZnVuY3Rpb24ocmVjdEVudil7dGhpcy5yZWN0RW52PXJlY3RFbnY7fTtFbnZlbG9wZUludGVyc2VjdHNWaXNpdG9yLnByb3RvdHlwZT1uZXcganN0cy5nZW9tLnV0aWwuU2hvcnRDaXJjdWl0ZWRHZW9tZXRyeVZpc2l0b3IoKTtFbnZlbG9wZUludGVyc2VjdHNWaXNpdG9yLmNvbnN0cnVjdG9yPUVudmVsb3BlSW50ZXJzZWN0c1Zpc2l0b3I7RW52ZWxvcGVJbnRlcnNlY3RzVmlzaXRvci5wcm90b3R5cGUucmVjdEVudj1udWxsO0VudmVsb3BlSW50ZXJzZWN0c1Zpc2l0b3IucHJvdG90eXBlLmludGVyc2VjdHM9ZmFsc2U7RW52ZWxvcGVJbnRlcnNlY3RzVmlzaXRvci5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyc2VjdHM7fVxuRW52ZWxvcGVJbnRlcnNlY3RzVmlzaXRvci5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24oZWxlbWVudCl7dmFyIGVsZW1lbnRFbnY9ZWxlbWVudC5nZXRFbnZlbG9wZUludGVybmFsKCk7aWYoIXRoaXMucmVjdEVudi5pbnRlcnNlY3RzKGVsZW1lbnRFbnYpKXtyZXR1cm47fVxuaWYodGhpcy5yZWN0RW52LmNvbnRhaW5zKGVsZW1lbnRFbnYpKXt0aGlzLmludGVyc2VjdHM9dHJ1ZTtyZXR1cm47fVxuaWYoZWxlbWVudEVudi5nZXRNaW5YKCk+PXJlY3RFbnYuZ2V0TWluWCgpJiZlbGVtZW50RW52LmdldE1heFgoKTw9cmVjdEVudi5nZXRNYXhYKCkpe3RoaXMuaW50ZXJzZWN0cz10cnVlO3JldHVybjt9XG5pZihlbGVtZW50RW52LmdldE1pblkoKT49cmVjdEVudi5nZXRNaW5ZKCkmJmVsZW1lbnRFbnYuZ2V0TWF4WSgpPD1yZWN0RW52LmdldE1heFkoKSl7dGhpcy5pbnRlcnNlY3RzPXRydWU7cmV0dXJuO319XG5FbnZlbG9wZUludGVyc2VjdHNWaXNpdG9yLnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzPT10cnVlO31cbnZhciBHZW9tZXRyeUNvbnRhaW5zUG9pbnRWaXNpdG9yPWZ1bmN0aW9uKHJlY3RhbmdsZSl7dGhpcy5yZWN0U2VxPXJlY3RhbmdsZS5nZXRFeHRlcmlvclJpbmcoKS5nZXRDb29yZGluYXRlU2VxdWVuY2UoKTt0aGlzLnJlY3RFbnY9cmVjdGFuZ2xlLmdldEVudmVsb3BlSW50ZXJuYWwoKTt9O0dlb21ldHJ5Q29udGFpbnNQb2ludFZpc2l0b3IucHJvdG90eXBlPW5ldyBqc3RzLmdlb20udXRpbC5TaG9ydENpcmN1aXRlZEdlb21ldHJ5VmlzaXRvcigpO0dlb21ldHJ5Q29udGFpbnNQb2ludFZpc2l0b3IuY29uc3RydWN0b3I9R2VvbWV0cnlDb250YWluc1BvaW50VmlzaXRvcjtHZW9tZXRyeUNvbnRhaW5zUG9pbnRWaXNpdG9yLnByb3RvdHlwZS5yZWN0U2VxPW51bGw7R2VvbWV0cnlDb250YWluc1BvaW50VmlzaXRvci5wcm90b3R5cGUucmVjdEVudj1udWxsO0dlb21ldHJ5Q29udGFpbnNQb2ludFZpc2l0b3IucHJvdG90eXBlLmNvbnRhaW5zUG9pbnQ9ZmFsc2U7R2VvbWV0cnlDb250YWluc1BvaW50VmlzaXRvci5wcm90b3R5cGUuY29udGFpbnNQb2ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5zUG9pbnQ7fVxuR2VvbWV0cnlDb250YWluc1BvaW50VmlzaXRvci5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24oZ2VvbSl7aWYoIShnZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLlBvbHlnb24pKVxucmV0dXJuO3ZhciBlbGVtZW50RW52PWdlb20uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO2lmKCF0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyhlbGVtZW50RW52KSlcbnJldHVybjt2YXIgcmVjdFB0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO2Zvcih2YXIgaT0wO2k8NDtpKyspe3RoaXMucmVjdFNlcS5nZXRDb29yZGluYXRlKGkscmVjdFB0KTtpZighZWxlbWVudEVudi5jb250YWlucyhyZWN0UHQpKVxuY29udGludWU7aWYoU2ltcGxlUG9pbnRJbkFyZWFMb2NhdG9yLmNvbnRhaW5zUG9pbnRJblBvbHlnb24ocmVjdFB0LGdlb20pKXt0aGlzLmNvbnRhaW5zUG9pbnQ9dHJ1ZTtyZXR1cm47fX19XG5HZW9tZXRyeUNvbnRhaW5zUG9pbnRWaXNpdG9yLnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250YWluc1BvaW50PT10cnVlO31cbnZhciBSZWN0YW5nbGVJbnRlcnNlY3RzU2VnbWVudFZpc2l0b3I9ZnVuY3Rpb24ocmVjdGFuZ2xlKXt0aGlzLnJlY3RFbnY9cmVjdGFuZ2xlLmdldEVudmVsb3BlSW50ZXJuYWwoKTt0aGlzLnJlY3RJbnRlcnNlY3Rvcj1uZXcgUmVjdGFuZ2xlTGluZUludGVyc2VjdG9yKHJlY3RFbnYpO307UmVjdGFuZ2xlSW50ZXJzZWN0c1NlZ21lbnRWaXNpdG9yLnByb3RvdHlwZT1uZXcganN0cy5nZW9tLnV0aWwuU2hvcnRDaXJjdWl0ZWRHZW9tZXRyeVZpc2l0b3IoKTtSZWN0YW5nbGVJbnRlcnNlY3RzU2VnbWVudFZpc2l0b3IuY29uc3RydWN0b3I9UmVjdGFuZ2xlSW50ZXJzZWN0c1NlZ21lbnRWaXNpdG9yO1JlY3RhbmdsZUludGVyc2VjdHNTZWdtZW50VmlzaXRvci5wcm90b3R5cGUucmVjdEVudj1udWxsO1JlY3RhbmdsZUludGVyc2VjdHNTZWdtZW50VmlzaXRvci5wcm90b3R5cGUucmVjdEludGVyc2VjdG9yPW51bGw7UmVjdGFuZ2xlSW50ZXJzZWN0c1NlZ21lbnRWaXNpdG9yLnByb3RvdHlwZS5oYXNJbnRlcnNlY3Rpb249ZmFsc2U7UmVjdGFuZ2xlSW50ZXJzZWN0c1NlZ21lbnRWaXNpdG9yLnByb3RvdHlwZS5wMD1udWxsO1JlY3RhbmdsZUludGVyc2VjdHNTZWdtZW50VmlzaXRvci5wcm90b3R5cGUucDE9bnVsbDtSZWN0YW5nbGVJbnRlcnNlY3RzU2VnbWVudFZpc2l0b3IucHJvdG90eXBlLmludGVyc2VjdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNJbnRlcnNlY3Rpb247fVxuUmVjdGFuZ2xlSW50ZXJzZWN0c1NlZ21lbnRWaXNpdG9yLnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbihnZW9tKXt2YXIgZWxlbWVudEVudj1nZW9tLmdldEVudmVsb3BlSW50ZXJuYWwoKTtpZighdGhpcy5yZWN0RW52LmludGVyc2VjdHMoZWxlbWVudEVudikpXG5yZXR1cm47dmFyIGxpbmVzPUxpbmVhckNvbXBvbmVudEV4dHJhY3Rlci5nZXRMaW5lcyhnZW9tKTt0aGlzLmNoZWNrSW50ZXJzZWN0aW9uV2l0aExpbmVTdHJpbmdzKGxpbmVzKTt9XG5SZWN0YW5nbGVJbnRlcnNlY3RzU2VnbWVudFZpc2l0b3IucHJvdG90eXBlLmNoZWNrSW50ZXJzZWN0aW9uV2l0aExpbmVTdHJpbmdzPWZ1bmN0aW9uKGxpbmVzKXtmb3IodmFyIGk9bGluZXMuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciB0ZXN0TGluZT1pLm5leHQoKTt0aGlzLmNoZWNrSW50ZXJzZWN0aW9uV2l0aFNlZ21lbnRzKHRlc3RMaW5lKTtpZih0aGlzLmhhc0ludGVyc2VjdGlvbilcbnJldHVybjt9fVxuUmVjdGFuZ2xlSW50ZXJzZWN0c1NlZ21lbnRWaXNpdG9yLnByb3RvdHlwZS5jaGVja0ludGVyc2VjdGlvbldpdGhTZWdtZW50cz1mdW5jdGlvbih0ZXN0TGluZSl7dmFyIHNlcTE9dGVzdExpbmUuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCk7Zm9yKHZhciBqPTE7ajxzZXExLmxlbmd0aDtqKyspe3RoaXMucDA9c2VxMVtqLTFdO3RoaXMucDE9c2VxMVtqXTtpZihyZWN0SW50ZXJzZWN0b3IuaW50ZXJzZWN0cyhwMCxwMSkpe3RoaXMuaGFzSW50ZXJzZWN0aW9uPXRydWU7cmV0dXJuO319fVxuUmVjdGFuZ2xlSW50ZXJzZWN0c1NlZ21lbnRWaXNpdG9yLnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNJbnRlcnNlY3Rpb249PXRydWU7fVxuanN0cy5vcGVyYXRpb24ucHJlZGljYXRlLlJlY3RhbmdsZUludGVyc2VjdHM9ZnVuY3Rpb24ocmVjdGFuZ2xlKXt0aGlzLnJlY3RhbmdsZT1yZWN0YW5nbGU7dGhpcy5yZWN0RW52PXJlY3RhbmdsZS5nZXRFbnZlbG9wZUludGVybmFsKCk7fVxuanN0cy5vcGVyYXRpb24ucHJlZGljYXRlLlJlY3RhbmdsZUludGVyc2VjdHMuaW50ZXJzZWN0cz1mdW5jdGlvbihyZWN0YW5nbGUsYil7dmFyIHJwPW5ldyBqc3RzLm9wZXJhdGlvbi5wcmVkaWNhdGUuUmVjdGFuZ2xlSW50ZXJzZWN0cyhyZWN0YW5nbGUpO3JldHVybiBycC5pbnRlcnNlY3RzKGIpO31cbmpzdHMub3BlcmF0aW9uLnByZWRpY2F0ZS5SZWN0YW5nbGVJbnRlcnNlY3RzLnByb3RvdHlwZS5yZWN0YW5nbGU9bnVsbDtqc3RzLm9wZXJhdGlvbi5wcmVkaWNhdGUuUmVjdGFuZ2xlSW50ZXJzZWN0cy5wcm90b3R5cGUucmVjdEVudj1udWxsO2pzdHMub3BlcmF0aW9uLnByZWRpY2F0ZS5SZWN0YW5nbGVJbnRlcnNlY3RzLnByb3RvdHlwZS5pbnRlcnNlY3RzPWZ1bmN0aW9uKGdlb20pe2lmKCF0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyhnZW9tLmdldEVudmVsb3BlSW50ZXJuYWwoKSkpXG5yZXR1cm4gZmFsc2U7dmFyIHZpc2l0b3I9bmV3IEVudmVsb3BlSW50ZXJzZWN0c1Zpc2l0b3IodGhpcy5yZWN0RW52KTt2aXNpdG9yLmFwcGx5VG8oZ2VvbSk7aWYodmlzaXRvci5pbnRlcnNlY3RzKCkpXG5yZXR1cm4gdHJ1ZTt2YXIgZWNwVmlzaXRvcj1uZXcgR2VvbWV0cnlDb250YWluc1BvaW50VmlzaXRvcihyZWN0YW5nbGUpO2VjcFZpc2l0b3IuYXBwbHlUbyhnZW9tKTtpZihlY3BWaXNpdG9yLmNvbnRhaW5zUG9pbnQoKSlcbnJldHVybiB0cnVlO3ZhciByaVZpc2l0b3I9bmV3IFJlY3RhbmdsZUludGVyc2VjdHNTZWdtZW50VmlzaXRvcihyZWN0YW5nbGUpO3JpVmlzaXRvci5hcHBseVRvKGdlb20pO2lmKHJpVmlzaXRvci5pbnRlcnNlY3RzKCkpXG5yZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2U7fX0pKCk7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXI9ZnVuY3Rpb24oYnVmUGFyYW1zKXt0aGlzLmJ1ZlBhcmFtcz1idWZQYXJhbXM7dGhpcy5lZGdlTGlzdD1uZXcganN0cy5nZW9tZ3JhcGguRWRnZUxpc3QoKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJCdWlsZGVyLmRlcHRoRGVsdGE9ZnVuY3Rpb24obGFiZWwpe3ZhciBsTG9jPWxhYmVsLmdldExvY2F0aW9uKDAsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uTEVGVCk7dmFyIHJMb2M9bGFiZWwuZ2V0TG9jYXRpb24oMCxqc3RzLmdlb21ncmFwaC5Qb3NpdGlvbi5SSUdIVCk7aWYobExvYz09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUiYmckxvYz09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUilcbnJldHVybiAxO2Vsc2UgaWYobExvYz09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUiYmckxvYz09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUilcbnJldHVybi0xO3JldHVybiAwO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmJ1ZlBhcmFtcz1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJCdWlsZGVyLnByb3RvdHlwZS53b3JraW5nUHJlY2lzaW9uTW9kZWw9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyQnVpbGRlci5wcm90b3R5cGUud29ya2luZ05vZGVyPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmdlb21GYWN0PW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmdyYXBoPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmVkZ2VMaXN0PW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLnNldFdvcmtpbmdQcmVjaXNpb25Nb2RlbD1mdW5jdGlvbihwbSl7dGhpcy53b3JraW5nUHJlY2lzaW9uTW9kZWw9cG07fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyQnVpbGRlci5wcm90b3R5cGUuc2V0Tm9kZXI9ZnVuY3Rpb24obm9kZXIpe3RoaXMud29ya2luZ05vZGVyPW5vZGVyO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmJ1ZmZlcj1mdW5jdGlvbihnLGRpc3RhbmNlKXt2YXIgcHJlY2lzaW9uTW9kZWw9dGhpcy53b3JraW5nUHJlY2lzaW9uTW9kZWw7aWYocHJlY2lzaW9uTW9kZWw9PT1udWxsKVxucHJlY2lzaW9uTW9kZWw9Zy5nZXRQcmVjaXNpb25Nb2RlbCgpO3RoaXMuZ2VvbUZhY3Q9Zy5nZXRGYWN0b3J5KCk7dmFyIGN1cnZlQnVpbGRlcj1uZXcganN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlQnVpbGRlcihwcmVjaXNpb25Nb2RlbCx0aGlzLmJ1ZlBhcmFtcyk7dmFyIGN1cnZlU2V0QnVpbGRlcj1uZXcganN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldEN1cnZlU2V0QnVpbGRlcihnLGRpc3RhbmNlLGN1cnZlQnVpbGRlcik7dmFyIGJ1ZmZlclNlZ1N0ckxpc3Q9Y3VydmVTZXRCdWlsZGVyLmdldEN1cnZlcygpO2lmKGJ1ZmZlclNlZ1N0ckxpc3Quc2l6ZSgpPD0wKXtyZXR1cm4gdGhpcy5jcmVhdGVFbXB0eVJlc3VsdEdlb21ldHJ5KCk7fVxudGhpcy5jb21wdXRlTm9kZWRFZGdlcyhidWZmZXJTZWdTdHJMaXN0LHByZWNpc2lvbk1vZGVsKTt0aGlzLmdyYXBoPW5ldyBqc3RzLmdlb21ncmFwaC5QbGFuYXJHcmFwaChuZXcganN0cy5vcGVyYXRpb24ub3ZlcmxheS5PdmVybGF5Tm9kZUZhY3RvcnkoKSk7dGhpcy5ncmFwaC5hZGRFZGdlcyh0aGlzLmVkZ2VMaXN0LmdldEVkZ2VzKCkpO3ZhciBzdWJncmFwaExpc3Q9dGhpcy5jcmVhdGVTdWJncmFwaHModGhpcy5ncmFwaCk7dmFyIHBvbHlCdWlsZGVyPW5ldyBqc3RzLm9wZXJhdGlvbi5vdmVybGF5LlBvbHlnb25CdWlsZGVyKHRoaXMuZ2VvbUZhY3QpO3RoaXMuYnVpbGRTdWJncmFwaHMoc3ViZ3JhcGhMaXN0LHBvbHlCdWlsZGVyKTt2YXIgcmVzdWx0UG9seUxpc3Q9cG9seUJ1aWxkZXIuZ2V0UG9seWdvbnMoKTtpZihyZXN1bHRQb2x5TGlzdC5zaXplKCk8PTApe3JldHVybiB0aGlzLmNyZWF0ZUVtcHR5UmVzdWx0R2VvbWV0cnkoKTt9XG52YXIgcmVzdWx0R2VvbT10aGlzLmdlb21GYWN0LmJ1aWxkR2VvbWV0cnkocmVzdWx0UG9seUxpc3QpO3JldHVybiByZXN1bHRHZW9tO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmdldE5vZGVyPWZ1bmN0aW9uKHByZWNpc2lvbk1vZGVsKXtpZih0aGlzLndvcmtpbmdOb2RlciE9PW51bGwpXG5yZXR1cm4gdGhpcy53b3JraW5nTm9kZXI7dmFyIG5vZGVyPW5ldyBqc3RzLm5vZGluZy5NQ0luZGV4Tm9kZXIoKTt2YXIgbGk9bmV3IGpzdHMuYWxnb3JpdGhtLlJvYnVzdExpbmVJbnRlcnNlY3RvcigpO2xpLnNldFByZWNpc2lvbk1vZGVsKHByZWNpc2lvbk1vZGVsKTtub2Rlci5zZXRTZWdtZW50SW50ZXJzZWN0b3IobmV3IGpzdHMubm9kaW5nLkludGVyc2VjdGlvbkFkZGVyKGxpKSk7cmV0dXJuIG5vZGVyO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmNvbXB1dGVOb2RlZEVkZ2VzPWZ1bmN0aW9uKGJ1ZmZlclNlZ1N0ckxpc3QscHJlY2lzaW9uTW9kZWwpe3ZhciBub2Rlcj10aGlzLmdldE5vZGVyKHByZWNpc2lvbk1vZGVsKTtub2Rlci5jb21wdXRlTm9kZXMoYnVmZmVyU2VnU3RyTGlzdCk7dmFyIG5vZGVkU2VnU3RyaW5ncz1ub2Rlci5nZXROb2RlZFN1YnN0cmluZ3MoKTtmb3IodmFyIGk9bm9kZWRTZWdTdHJpbmdzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgc2VnU3RyPWkubmV4dCgpO3ZhciBvbGRMYWJlbD1zZWdTdHIuZ2V0RGF0YSgpO3ZhciBlZGdlPW5ldyBqc3RzLmdlb21ncmFwaC5FZGdlKHNlZ1N0ci5nZXRDb29yZGluYXRlcygpLG5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbChvbGRMYWJlbCkpO3RoaXMuaW5zZXJ0VW5pcXVlRWRnZShlZGdlKTt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyQnVpbGRlci5wcm90b3R5cGUuaW5zZXJ0VW5pcXVlRWRnZT1mdW5jdGlvbihlKXt2YXIgZXhpc3RpbmdFZGdlPXRoaXMuZWRnZUxpc3QuZmluZEVxdWFsRWRnZShlKTtpZihleGlzdGluZ0VkZ2UhPW51bGwpe3ZhciBleGlzdGluZ0xhYmVsPWV4aXN0aW5nRWRnZS5nZXRMYWJlbCgpO3ZhciBsYWJlbFRvTWVyZ2U9ZS5nZXRMYWJlbCgpO2lmKCFleGlzdGluZ0VkZ2UuaXNQb2ludHdpc2VFcXVhbChlKSl7bGFiZWxUb01lcmdlPW5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbChlLmdldExhYmVsKCkpO2xhYmVsVG9NZXJnZS5mbGlwKCk7fVxuZXhpc3RpbmdMYWJlbC5tZXJnZShsYWJlbFRvTWVyZ2UpO3ZhciBtZXJnZURlbHRhPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJCdWlsZGVyLmRlcHRoRGVsdGEobGFiZWxUb01lcmdlKTt2YXIgZXhpc3RpbmdEZWx0YT1leGlzdGluZ0VkZ2UuZ2V0RGVwdGhEZWx0YSgpO3ZhciBuZXdEZWx0YT1leGlzdGluZ0RlbHRhK21lcmdlRGVsdGE7ZXhpc3RpbmdFZGdlLnNldERlcHRoRGVsdGEobmV3RGVsdGEpO31lbHNle3RoaXMuZWRnZUxpc3QuYWRkKGUpO2Uuc2V0RGVwdGhEZWx0YShqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyQnVpbGRlci5kZXB0aERlbHRhKGUuZ2V0TGFiZWwoKSkpO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJCdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVTdWJncmFwaHM9ZnVuY3Rpb24oZ3JhcGgpe3ZhciBzdWJncmFwaExpc3Q9W107Zm9yKHZhciBpPWdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciBub2RlPWkubmV4dCgpO2lmKCFub2RlLmlzVmlzaXRlZCgpKXt2YXIgc3ViZ3JhcGg9bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJTdWJncmFwaCgpO3N1YmdyYXBoLmNyZWF0ZShub2RlKTtzdWJncmFwaExpc3QucHVzaChzdWJncmFwaCk7fX1cbnZhciBjb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29tcGFyZVRvKGIpO307c3ViZ3JhcGhMaXN0LnNvcnQoY29tcGFyZSk7c3ViZ3JhcGhMaXN0LnJldmVyc2UoKTtyZXR1cm4gc3ViZ3JhcGhMaXN0O307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkU3ViZ3JhcGhzPWZ1bmN0aW9uKHN1YmdyYXBoTGlzdCxwb2x5QnVpbGRlcil7dmFyIHByb2Nlc3NlZEdyYXBocz1bXTtmb3IodmFyIGk9MDtpPHN1YmdyYXBoTGlzdC5sZW5ndGg7aSsrKXt2YXIgc3ViZ3JhcGg9c3ViZ3JhcGhMaXN0W2ldO3ZhciBwPXN1YmdyYXBoLmdldFJpZ2h0bW9zdENvb3JkaW5hdGUoKTt2YXIgbG9jYXRlcj1uZXcganN0cy5vcGVyYXRpb24uYnVmZmVyLlN1YmdyYXBoRGVwdGhMb2NhdGVyKHByb2Nlc3NlZEdyYXBocyk7dmFyIG91dHNpZGVEZXB0aD1sb2NhdGVyLmdldERlcHRoKHApO3N1YmdyYXBoLmNvbXB1dGVEZXB0aChvdXRzaWRlRGVwdGgpO3N1YmdyYXBoLmZpbmRSZXN1bHRFZGdlcygpO3Byb2Nlc3NlZEdyYXBocy5wdXNoKHN1YmdyYXBoKTtwb2x5QnVpbGRlci5hZGQoc3ViZ3JhcGguZ2V0RGlyZWN0ZWRFZGdlcygpLHN1YmdyYXBoLmdldE5vZGVzKCkpO319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJCdWlsZGVyLmNvbnZlcnRTZWdTdHJpbmdzPWZ1bmN0aW9uKGl0KXt2YXIgZmFjdD1uZXcganN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeSgpO3ZhciBsaW5lcz1uZXcgamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdCgpO3doaWxlKGl0Lmhhc05leHQoKSl7dmFyIHNzPWl0Lm5leHQoKTt2YXIgbGluZT1mYWN0LmNyZWF0ZUxpbmVTdHJpbmcoc3MuZ2V0Q29vcmRpbmF0ZXMoKSk7bGluZXMuYWRkKGxpbmUpO31cbnJldHVybiBmYWN0LmJ1aWxkR2VvbWV0cnkobGluZXMpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlckJ1aWxkZXIucHJvdG90eXBlLmNyZWF0ZUVtcHR5UmVzdWx0R2VvbWV0cnk9ZnVuY3Rpb24oKXt2YXIgZW1wdHlHZW9tPXRoaXMuZ2VvbUZhY3QuY3JlYXRlUG9seWdvbihudWxsLG51bGwpO3JldHVybiBlbXB0eUdlb207fTtqc3RzLm5vZGluZy5TZWdtZW50UG9pbnRDb21wYXJhdG9yPWZ1bmN0aW9uKCl7fTtqc3RzLm5vZGluZy5TZWdtZW50UG9pbnRDb21wYXJhdG9yLmNvbXBhcmU9ZnVuY3Rpb24ob2N0YW50LHAwLHAxKXtpZihwMC5lcXVhbHMyRChwMSkpXG5yZXR1cm4gMDt2YXIgeFNpZ249anN0cy5ub2RpbmcuU2VnbWVudFBvaW50Q29tcGFyYXRvci5yZWxhdGl2ZVNpZ24ocDAueCxwMS54KTt2YXIgeVNpZ249anN0cy5ub2RpbmcuU2VnbWVudFBvaW50Q29tcGFyYXRvci5yZWxhdGl2ZVNpZ24ocDAueSxwMS55KTtzd2l0Y2gob2N0YW50KXtjYXNlIDA6cmV0dXJuIGpzdHMubm9kaW5nLlNlZ21lbnRQb2ludENvbXBhcmF0b3IuY29tcGFyZVZhbHVlKHhTaWduLHlTaWduKTtjYXNlIDE6cmV0dXJuIGpzdHMubm9kaW5nLlNlZ21lbnRQb2ludENvbXBhcmF0b3IuY29tcGFyZVZhbHVlKHlTaWduLHhTaWduKTtjYXNlIDI6cmV0dXJuIGpzdHMubm9kaW5nLlNlZ21lbnRQb2ludENvbXBhcmF0b3IuY29tcGFyZVZhbHVlKHlTaWduLC14U2lnbik7Y2FzZSAzOnJldHVybiBqc3RzLm5vZGluZy5TZWdtZW50UG9pbnRDb21wYXJhdG9yLmNvbXBhcmVWYWx1ZSgteFNpZ24seVNpZ24pO2Nhc2UgNDpyZXR1cm4ganN0cy5ub2RpbmcuU2VnbWVudFBvaW50Q29tcGFyYXRvci5jb21wYXJlVmFsdWUoLXhTaWduLC15U2lnbik7Y2FzZSA1OnJldHVybiBqc3RzLm5vZGluZy5TZWdtZW50UG9pbnRDb21wYXJhdG9yLmNvbXBhcmVWYWx1ZSgteVNpZ24sLXhTaWduKTtjYXNlIDY6cmV0dXJuIGpzdHMubm9kaW5nLlNlZ21lbnRQb2ludENvbXBhcmF0b3IuY29tcGFyZVZhbHVlKC15U2lnbix4U2lnbik7Y2FzZSA3OnJldHVybiBqc3RzLm5vZGluZy5TZWdtZW50UG9pbnRDb21wYXJhdG9yLmNvbXBhcmVWYWx1ZSh4U2lnbiwteVNpZ24pO31cbnJldHVybiAwO307anN0cy5ub2RpbmcuU2VnbWVudFBvaW50Q29tcGFyYXRvci5yZWxhdGl2ZVNpZ249ZnVuY3Rpb24oeDAseDEpe2lmKHgwPHgxKVxucmV0dXJuLTE7aWYoeDA+eDEpXG5yZXR1cm4gMTtyZXR1cm4gMDt9O2pzdHMubm9kaW5nLlNlZ21lbnRQb2ludENvbXBhcmF0b3IuY29tcGFyZVZhbHVlPWZ1bmN0aW9uKGNvbXBhcmVTaWduMCxjb21wYXJlU2lnbjEpe2lmKGNvbXBhcmVTaWduMDwwKVxucmV0dXJuLTE7aWYoY29tcGFyZVNpZ24wPjApXG5yZXR1cm4gMTtpZihjb21wYXJlU2lnbjE8MClcbnJldHVybi0xO2lmKGNvbXBhcmVTaWduMT4wKVxucmV0dXJuIDE7cmV0dXJuIDA7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlT3A9ZnVuY3Rpb24oKXtqc3RzLm9wZXJhdGlvbi5HZW9tZXRyeUdyYXBoT3BlcmF0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9yZWxhdGU9bmV3IGpzdHMub3BlcmF0aW9uLnJlbGF0ZS5SZWxhdGVDb21wdXRlcih0aGlzLmFyZyk7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlT3AucHJvdG90eXBlPW5ldyBqc3RzLm9wZXJhdGlvbi5HZW9tZXRyeUdyYXBoT3BlcmF0aW9uKCk7anN0cy5vcGVyYXRpb24ucmVsYXRlLlJlbGF0ZU9wLnJlbGF0ZT1mdW5jdGlvbihhLGIsYm91bmRhcnlOb2RlUnVsZSl7dmFyIHJlbE9wPW5ldyBqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlT3AoYSxiLGJvdW5kYXJ5Tm9kZVJ1bGUpO3ZhciBpbT1yZWxPcC5nZXRJbnRlcnNlY3Rpb25NYXRyaXgoKTtyZXR1cm4gaW07fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlT3AucHJvdG90eXBlLl9yZWxhdGU9bnVsbDtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuUmVsYXRlT3AucHJvdG90eXBlLmdldEludGVyc2VjdGlvbk1hdHJpeD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWxhdGUuY29tcHV0ZUlNKCk7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW49ZnVuY3Rpb24ocHRzLHN0YXJ0LGVuZCxjb250ZXh0KXt0aGlzLnB0cz1wdHM7dGhpcy5zdGFydD1zdGFydDt0aGlzLmVuZD1lbmQ7dGhpcy5jb250ZXh0PWNvbnRleHQ7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLnB0cz1udWxsO2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbi5wcm90b3R5cGUuc3RhcnQ9bnVsbDtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmVuZD1udWxsO2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbi5wcm90b3R5cGUuZW52PW51bGw7anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluLnByb3RvdHlwZS5jb250ZXh0PW51bGw7anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluLnByb3RvdHlwZS5pZD1udWxsO2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbi5wcm90b3R5cGUuc2V0SWQ9ZnVuY3Rpb24oaWQpe3RoaXMuaWQ9aWQ7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWQ7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0O307anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluLnByb3RvdHlwZS5nZXRFbnZlbG9wZT1mdW5jdGlvbigpe2lmKHRoaXMuZW52PT1udWxsKXt2YXIgcDA9dGhpcy5wdHNbdGhpcy5zdGFydF07dmFyIHAxPXRoaXMucHRzW3RoaXMuZW5kXTt0aGlzLmVudj1uZXcganN0cy5nZW9tLkVudmVsb3BlKHAwLHAxKTt9XG5yZXR1cm4gdGhpcy5lbnY7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmdldFN0YXJ0SW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydDt9O2pzdHMuaW5kZXguY2hhaW4uTW9ub3RvbmVDaGFpbi5wcm90b3R5cGUuZ2V0RW5kSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmQ7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmdldExpbmVTZWdtZW50PWZ1bmN0aW9uKGluZGV4LGxzKXtscy5wMD10aGlzLnB0c1tpbmRleF07bHMucDE9dGhpcy5wdHNbaW5kZXgrMV07fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7dmFyIGNvb3JkPVtdO3ZhciBpbmRleD0wO2Zvcih2YXIgaT10aGlzLnN0YXJ0O2k8PXRoaXMuZW5kO2krKyl7Y29vcmRbaW5kZXgrK109dGhpcy5wdHNbaV07fVxucmV0dXJuIGNvb3JkO307anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oc2VhcmNoRW52LG1jcyl7dGhpcy5jb21wdXRlU2VsZWN0MihzZWFyY2hFbnYsdGhpcy5zdGFydCx0aGlzLmVuZCxtY3MpO307anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluLnByb3RvdHlwZS5jb21wdXRlU2VsZWN0Mj1mdW5jdGlvbihzZWFyY2hFbnYsc3RhcnQwLGVuZDAsbWNzKXt2YXIgcDA9dGhpcy5wdHNbc3RhcnQwXTt2YXIgcDE9dGhpcy5wdHNbZW5kMF07bWNzLnRlbXBFbnYxLmluaXQocDAscDEpO2lmKGVuZDAtc3RhcnQwPT09MSl7bWNzLnNlbGVjdCh0aGlzLHN0YXJ0MCk7cmV0dXJuO31cbmlmKCFzZWFyY2hFbnYuaW50ZXJzZWN0cyhtY3MudGVtcEVudjEpKVxucmV0dXJuO3ZhciBtaWQ9cGFyc2VJbnQoKHN0YXJ0MCtlbmQwKS8yKTtpZihzdGFydDA8bWlkKXt0aGlzLmNvbXB1dGVTZWxlY3QyKHNlYXJjaEVudixzdGFydDAsbWlkLG1jcyk7fVxuaWYobWlkPGVuZDApe3RoaXMuY29tcHV0ZVNlbGVjdDIoc2VhcmNoRW52LG1pZCxlbmQwLG1jcyk7fX07anN0cy5pbmRleC5jaGFpbi5Nb25vdG9uZUNoYWluLnByb3RvdHlwZS5jb21wdXRlT3ZlcmxhcHM9ZnVuY3Rpb24obWMsbWNvKXtpZihhcmd1bWVudHMubGVuZ3RoPT09Nil7cmV0dXJuIHRoaXMuY29tcHV0ZU92ZXJsYXBzMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fVxudGhpcy5jb21wdXRlT3ZlcmxhcHMyKHRoaXMuc3RhcnQsdGhpcy5lbmQsbWMsbWMuc3RhcnQsbWMuZW5kLG1jbyk7fTtqc3RzLmluZGV4LmNoYWluLk1vbm90b25lQ2hhaW4ucHJvdG90eXBlLmNvbXB1dGVPdmVybGFwczI9ZnVuY3Rpb24oc3RhcnQwLGVuZDAsbWMsc3RhcnQxLGVuZDEsbWNvKXt2YXIgcDAwPXRoaXMucHRzW3N0YXJ0MF07dmFyIHAwMT10aGlzLnB0c1tlbmQwXTt2YXIgcDEwPW1jLnB0c1tzdGFydDFdO3ZhciBwMTE9bWMucHRzW2VuZDFdO2lmKGVuZDAtc3RhcnQwPT09MSYmZW5kMS1zdGFydDE9PT0xKXttY28ub3ZlcmxhcCh0aGlzLHN0YXJ0MCxtYyxzdGFydDEpO3JldHVybjt9XG5tY28udGVtcEVudjEuaW5pdChwMDAscDAxKTttY28udGVtcEVudjIuaW5pdChwMTAscDExKTtpZighbWNvLnRlbXBFbnYxLmludGVyc2VjdHMobWNvLnRlbXBFbnYyKSlcbnJldHVybjt2YXIgbWlkMD1wYXJzZUludCgoc3RhcnQwK2VuZDApLzIpO3ZhciBtaWQxPXBhcnNlSW50KChzdGFydDErZW5kMSkvMik7aWYoc3RhcnQwPG1pZDApe2lmKHN0YXJ0MTxtaWQxKVxudGhpcy5jb21wdXRlT3ZlcmxhcHMyKHN0YXJ0MCxtaWQwLG1jLHN0YXJ0MSxtaWQxLG1jbyk7aWYobWlkMTxlbmQxKVxudGhpcy5jb21wdXRlT3ZlcmxhcHMyKHN0YXJ0MCxtaWQwLG1jLG1pZDEsZW5kMSxtY28pO31cbmlmKG1pZDA8ZW5kMCl7aWYoc3RhcnQxPG1pZDEpXG50aGlzLmNvbXB1dGVPdmVybGFwczIobWlkMCxlbmQwLG1jLHN0YXJ0MSxtaWQxLG1jbyk7aWYobWlkMTxlbmQxKVxudGhpcy5jb21wdXRlT3ZlcmxhcHMyKG1pZDAsZW5kMCxtYyxtaWQxLGVuZDEsbWNvKTt9fTsoZnVuY3Rpb24oKXt2YXIgTG9jYXRpb249anN0cy5nZW9tLkxvY2F0aW9uO3ZhciBEaW1lbnNpb249anN0cy5nZW9tLkRpbWVuc2lvbjtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4PWZ1bmN0aW9uKGVsZW1lbnRzKXt2YXIgb3RoZXI9ZWxlbWVudHM7aWYoZWxlbWVudHM9PT11bmRlZmluZWR8fGVsZW1lbnRzPT09bnVsbCl7dGhpcy5tYXRyaXg9W1tdLFtdLFtdXTt0aGlzLnNldEFsbChEaW1lbnNpb24uRkFMU0UpO31lbHNlIGlmKHR5cGVvZiBlbGVtZW50cz09PSdzdHJpbmcnKXt0aGlzLnNldChlbGVtZW50cyk7fWVsc2UgaWYob3RoZXIgaW5zdGFuY2VvZiBqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4KXt0aGlzLm1hdHJpeFtMb2NhdGlvbi5JTlRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdPW90aGVyLm1hdHJpeFtMb2NhdGlvbi5JTlRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdO3RoaXMubWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5CT1VOREFSWV09b3RoZXIubWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5CT1VOREFSWV07dGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXT1vdGhlci5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXTt0aGlzLm1hdHJpeFtMb2NhdGlvbi5CT1VOREFSWV1bTG9jYXRpb24uSU5URVJJT1JdPW90aGVyLm1hdHJpeFtMb2NhdGlvbi5CT1VOREFSWV1bTG9jYXRpb24uSU5URVJJT1JdO3RoaXMubWF0cml4W0xvY2F0aW9uLkJPVU5EQVJZXVtMb2NhdGlvbi5CT1VOREFSWV09b3RoZXIubWF0cml4W0xvY2F0aW9uLkJPVU5EQVJZXVtMb2NhdGlvbi5CT1VOREFSWV07dGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLkVYVEVSSU9SXT1vdGhlci5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLkVYVEVSSU9SXTt0aGlzLm1hdHJpeFtMb2NhdGlvbi5FWFRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdPW90aGVyLm1hdHJpeFtMb2NhdGlvbi5FWFRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdO3RoaXMubWF0cml4W0xvY2F0aW9uLkVYVEVSSU9SXVtMb2NhdGlvbi5CT1VOREFSWV09b3RoZXIubWF0cml4W0xvY2F0aW9uLkVYVEVSSU9SXVtMb2NhdGlvbi5CT1VOREFSWV07dGhpcy5tYXRyaXhbTG9jYXRpb24uRVhURVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXT1vdGhlci5tYXRyaXhbTG9jYXRpb24uRVhURVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXTt9fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5tYXRyaXg9bnVsbDtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oaW0pe3ZhciBpLGo7Zm9yKGk9MDtpPDM7aSsrKXtmb3Ioaj0wO2o8MztqKyspe3RoaXMuc2V0QXRMZWFzdChpLGosaW0uZ2V0KGksaikpO319fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXM9ZnVuY3Rpb24oYWN0dWFsRGltZW5zaW9uVmFsdWUscmVxdWlyZWREaW1lbnNpb25TeW1ib2wpe2lmKHR5cGVvZiBhY3R1YWxEaW1lbnNpb25WYWx1ZT09PSdzdHJpbmcnKXtyZXR1cm4ganN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzMi5jYWxsKHRoaXMsYXJndW1lbnRzKTt9XG5pZihyZXF1aXJlZERpbWVuc2lvblN5bWJvbD09PScqJyl7cmV0dXJuIHRydWU7fVxuaWYocmVxdWlyZWREaW1lbnNpb25TeW1ib2w9PT0nVCcmJihhY3R1YWxEaW1lbnNpb25WYWx1ZT49MHx8YWN0dWFsRGltZW5zaW9uVmFsdWU9PT1EaW1lbnNpb24uVFJVRSkpe3JldHVybiB0cnVlO31cbmlmKHJlcXVpcmVkRGltZW5zaW9uU3ltYm9sPT09J0YnJiZhY3R1YWxEaW1lbnNpb25WYWx1ZT09PURpbWVuc2lvbi5GQUxTRSl7cmV0dXJuIHRydWU7fVxuaWYocmVxdWlyZWREaW1lbnNpb25TeW1ib2w9PT0nMCcmJmFjdHVhbERpbWVuc2lvblZhbHVlPT09RGltZW5zaW9uLlApe3JldHVybiB0cnVlO31cbmlmKHJlcXVpcmVkRGltZW5zaW9uU3ltYm9sPT09JzEnJiZhY3R1YWxEaW1lbnNpb25WYWx1ZT09PURpbWVuc2lvbi5MKXtyZXR1cm4gdHJ1ZTt9XG5pZihyZXF1aXJlZERpbWVuc2lvblN5bWJvbD09PScyJyYmYWN0dWFsRGltZW5zaW9uVmFsdWU9PT1EaW1lbnNpb24uQSl7cmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzMj1mdW5jdGlvbihhY3R1YWxEaW1lbnNpb25TeW1ib2xzLHJlcXVpcmVkRGltZW5zaW9uU3ltYm9scyl7dmFyIG09bmV3IGpzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgoYWN0dWFsRGltZW5zaW9uU3ltYm9scyk7cmV0dXJuIG0ubWF0Y2hlcyhyZXF1aXJlZERpbWVuc2lvblN5bWJvbHMpO307anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHJvdyxjb2x1bW4sZGltZW5zaW9uVmFsdWUpe2lmKHR5cGVvZiByb3c9PT0nc3RyaW5nJyl7dGhpcy5zZXQyKHJvdyk7cmV0dXJuO31cbnRoaXMubWF0cml4W3Jvd11bY29sdW1uXT1kaW1lbnNpb25WYWx1ZTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLnNldDI9ZnVuY3Rpb24oZGltZW5zaW9uU3ltYm9scyl7Zm9yKHZhciBpPTA7aTxkaW1lbnNpb25TeW1ib2xzLmxlbmd0aCgpO2krKyl7dmFyIHJvdz1pLzM7dmFyIGNvbD1pJTM7dGhpcy5tYXRyaXhbcm93XVtjb2xdPURpbWVuc2lvbi50b0RpbWVuc2lvblZhbHVlKGRpbWVuc2lvblN5bWJvbHMuY2hhckF0KGkpKTt9fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5zZXRBdExlYXN0PWZ1bmN0aW9uKHJvdyxjb2x1bW4sbWluaW11bURpbWVuc2lvblZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7dGhpcy5zZXRBdExlYXN0Mihhcmd1bWVudHNbMF0pO3JldHVybjt9XG5pZih0aGlzLm1hdHJpeFtyb3ddW2NvbHVtbl08bWluaW11bURpbWVuc2lvblZhbHVlKXt0aGlzLm1hdHJpeFtyb3ddW2NvbHVtbl09bWluaW11bURpbWVuc2lvblZhbHVlO319O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLnNldEF0TGVhc3RJZlZhbGlkPWZ1bmN0aW9uKHJvdyxjb2x1bW4sbWluaW11bURpbWVuc2lvblZhbHVlKXtpZihyb3c+PTAmJmNvbHVtbj49MCl7dGhpcy5zZXRBdExlYXN0KHJvdyxjb2x1bW4sbWluaW11bURpbWVuc2lvblZhbHVlKTt9fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5zZXRBdExlYXN0Mj1mdW5jdGlvbihtaW5pbXVtRGltZW5zaW9uU3ltYm9scyl7dmFyIGk7Zm9yKGk9MDtpPG1pbmltdW1EaW1lbnNpb25TeW1ib2xzLmxlbmd0aDtpKyspe3ZhciByb3c9cGFyc2VJbnQoaS8zKTt2YXIgY29sPXBhcnNlSW50KGklMyk7dGhpcy5zZXRBdExlYXN0KHJvdyxjb2wsanN0cy5nZW9tLkRpbWVuc2lvbi50b0RpbWVuc2lvblZhbHVlKG1pbmltdW1EaW1lbnNpb25TeW1ib2xzLmNoYXJBdChpKSkpO319O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLnNldEFsbD1mdW5jdGlvbihkaW1lbnNpb25WYWx1ZSl7dmFyIGFpLGJpO2ZvcihhaT0wO2FpPDM7YWkrKyl7Zm9yKGJpPTA7Ymk8MztiaSsrKXt0aGlzLm1hdHJpeFthaV1bYmldPWRpbWVuc2lvblZhbHVlO319fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24ocm93LGNvbHVtbil7cmV0dXJuIHRoaXMubWF0cml4W3Jvd11bY29sdW1uXTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLmlzRGlzam9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLklOVEVSSU9SXT09PURpbWVuc2lvbi5GQUxTRSYmdGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkJPVU5EQVJZXT09PURpbWVuc2lvbi5GQUxTRSYmdGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLklOVEVSSU9SXT09PURpbWVuc2lvbi5GQUxTRSYmdGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLkJPVU5EQVJZXT09PURpbWVuc2lvbi5GQUxTRTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLmlzSW50ZXJzZWN0cz1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRGlzam9pbnQoKTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLmlzVG91Y2hlcz1mdW5jdGlvbihkaW1lbnNpb25PZkdlb21ldHJ5QSxkaW1lbnNpb25PZkdlb21ldHJ5Qil7aWYoZGltZW5zaW9uT2ZHZW9tZXRyeUE+ZGltZW5zaW9uT2ZHZW9tZXRyeUIpe3JldHVybiB0aGlzLmlzVG91Y2hlcyhkaW1lbnNpb25PZkdlb21ldHJ5QixkaW1lbnNpb25PZkdlb21ldHJ5QSk7fVxuaWYoKGRpbWVuc2lvbk9mR2VvbWV0cnlBPT1EaW1lbnNpb24uQSYmZGltZW5zaW9uT2ZHZW9tZXRyeUI9PURpbWVuc2lvbi5BKXx8KGRpbWVuc2lvbk9mR2VvbWV0cnlBPT1EaW1lbnNpb24uTCYmZGltZW5zaW9uT2ZHZW9tZXRyeUI9PURpbWVuc2lvbi5MKXx8KGRpbWVuc2lvbk9mR2VvbWV0cnlBPT1EaW1lbnNpb24uTCYmZGltZW5zaW9uT2ZHZW9tZXRyeUI9PURpbWVuc2lvbi5BKXx8KGRpbWVuc2lvbk9mR2VvbWV0cnlBPT1EaW1lbnNpb24uUCYmZGltZW5zaW9uT2ZHZW9tZXRyeUI9PURpbWVuc2lvbi5BKXx8KGRpbWVuc2lvbk9mR2VvbWV0cnlBPT1EaW1lbnNpb24uUCYmZGltZW5zaW9uT2ZHZW9tZXRyeUI9PURpbWVuc2lvbi5MKSl7cmV0dXJuIHRoaXMubWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5JTlRFUklPUl09PT1EaW1lbnNpb24uRkFMU0UmJihqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkJPVU5EQVJZXSwnVCcpfHxqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLklOVEVSSU9SXSwnVCcpfHxqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLkJPVU5EQVJZXSwnVCcpKTt9XG5yZXR1cm4gZmFsc2U7fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5pc0Nyb3NzZXM9ZnVuY3Rpb24oZGltZW5zaW9uT2ZHZW9tZXRyeUEsZGltZW5zaW9uT2ZHZW9tZXRyeUIpe2lmKChkaW1lbnNpb25PZkdlb21ldHJ5QT09RGltZW5zaW9uLlAmJmRpbWVuc2lvbk9mR2VvbWV0cnlCPT1EaW1lbnNpb24uTCl8fChkaW1lbnNpb25PZkdlb21ldHJ5QT09RGltZW5zaW9uLlAmJmRpbWVuc2lvbk9mR2VvbWV0cnlCPT1EaW1lbnNpb24uQSl8fChkaW1lbnNpb25PZkdlb21ldHJ5QT09RGltZW5zaW9uLkwmJmRpbWVuc2lvbk9mR2VvbWV0cnlCPT1EaW1lbnNpb24uQSkpe3JldHVybiBqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLklOVEVSSU9SXSwnVCcpJiZqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXSwnVCcpO31cbmlmKChkaW1lbnNpb25PZkdlb21ldHJ5QT09RGltZW5zaW9uLkwmJmRpbWVuc2lvbk9mR2VvbWV0cnlCPT1EaW1lbnNpb24uUCl8fChkaW1lbnNpb25PZkdlb21ldHJ5QT09RGltZW5zaW9uLkEmJmRpbWVuc2lvbk9mR2VvbWV0cnlCPT1EaW1lbnNpb24uUCl8fChkaW1lbnNpb25PZkdlb21ldHJ5QT09RGltZW5zaW9uLkEmJmRpbWVuc2lvbk9mR2VvbWV0cnlCPT1EaW1lbnNpb24uTCkpe3JldHVybiBqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXMobWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5JTlRFUklPUl0sJ1QnKSYmanN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzKHRoaXMubWF0cml4W0xvY2F0aW9uLkVYVEVSSU9SXVtMb2NhdGlvbi5JTlRFUklPUl0sJ1QnKTt9XG5pZihkaW1lbnNpb25PZkdlb21ldHJ5QT09PURpbWVuc2lvbi5MJiZkaW1lbnNpb25PZkdlb21ldHJ5Qj09PURpbWVuc2lvbi5MKXtyZXR1cm4gdGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLklOVEVSSU9SXT09PTA7fVxucmV0dXJuIGZhbHNlO307anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5wcm90b3R5cGUuaXNXaXRoaW49ZnVuY3Rpb24oKXtyZXR1cm4ganN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzKHRoaXMubWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5JTlRFUklPUl0sJ1QnKSYmdGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXT09RGltZW5zaW9uLkZBTFNFJiZ0aGlzLm1hdHJpeFtMb2NhdGlvbi5CT1VOREFSWV1bTG9jYXRpb24uRVhURVJJT1JdPT1EaW1lbnNpb24uRkFMU0U7fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5pc0NvbnRhaW5zPWZ1bmN0aW9uKCl7cmV0dXJuIGpzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgubWF0Y2hlcyh0aGlzLm1hdHJpeFtMb2NhdGlvbi5JTlRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdLCdUJykmJnRoaXMubWF0cml4W0xvY2F0aW9uLkVYVEVSSU9SXVtMb2NhdGlvbi5JTlRFUklPUl09PURpbWVuc2lvbi5GQUxTRSYmdGhpcy5tYXRyaXhbTG9jYXRpb24uRVhURVJJT1JdW0xvY2F0aW9uLkJPVU5EQVJZXT09RGltZW5zaW9uLkZBTFNFO307anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5wcm90b3R5cGUuaXNDb3ZlcnM9ZnVuY3Rpb24oKXt2YXIgaGFzUG9pbnRJbkNvbW1vbj1qc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLklOVEVSSU9SXSwnVCcpfHxqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkJPVU5EQVJZXSwnVCcpfHxqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLklOVEVSSU9SXSwnVCcpfHxqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLkJPVU5EQVJZXSwnVCcpO3JldHVybiBoYXNQb2ludEluQ29tbW9uJiZ0aGlzLm1hdHJpeFtMb2NhdGlvbi5FWFRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdPT1EaW1lbnNpb24uRkFMU0UmJnRoaXMubWF0cml4W0xvY2F0aW9uLkVYVEVSSU9SXVtMb2NhdGlvbi5CT1VOREFSWV09PURpbWVuc2lvbi5GQUxTRTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLmlzQ292ZXJlZEJ5PWZ1bmN0aW9uKCl7dmFyIGhhc1BvaW50SW5Db21tb249anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzKHRoaXMubWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5JTlRFUklPUl0sJ1QnKXx8anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzKHRoaXMubWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5CT1VOREFSWV0sJ1QnKXx8anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzKHRoaXMubWF0cml4W0xvY2F0aW9uLkJPVU5EQVJZXVtMb2NhdGlvbi5JTlRFUklPUl0sJ1QnKXx8anN0cy5nZW9tLkludGVyc2VjdGlvbk1hdHJpeC5tYXRjaGVzKHRoaXMubWF0cml4W0xvY2F0aW9uLkJPVU5EQVJZXVtMb2NhdGlvbi5CT1VOREFSWV0sJ1QnKTtyZXR1cm4gaGFzUG9pbnRJbkNvbW1vbiYmdGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXT09PURpbWVuc2lvbi5GQUxTRSYmdGhpcy5tYXRyaXhbTG9jYXRpb24uQk9VTkRBUlldW0xvY2F0aW9uLkVYVEVSSU9SXT09PURpbWVuc2lvbi5GQUxTRTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLmlzRXF1YWxzPWZ1bmN0aW9uKGRpbWVuc2lvbk9mR2VvbWV0cnlBLGRpbWVuc2lvbk9mR2VvbWV0cnlCKXtpZihkaW1lbnNpb25PZkdlb21ldHJ5QSE9PWRpbWVuc2lvbk9mR2VvbWV0cnlCKXtyZXR1cm4gZmFsc2U7fVxucmV0dXJuIGpzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgubWF0Y2hlcyh0aGlzLm1hdHJpeFtMb2NhdGlvbi5JTlRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdLCdUJykmJnRoaXMubWF0cml4W0xvY2F0aW9uLkVYVEVSSU9SXVtMb2NhdGlvbi5JTlRFUklPUl09PT1EaW1lbnNpb24uRkFMU0UmJnRoaXMubWF0cml4W0xvY2F0aW9uLklOVEVSSU9SXVtMb2NhdGlvbi5FWFRFUklPUl09PT1EaW1lbnNpb24uRkFMU0UmJnRoaXMubWF0cml4W0xvY2F0aW9uLkVYVEVSSU9SXVtMb2NhdGlvbi5CT1VOREFSWV09PT1EaW1lbnNpb24uRkFMU0UmJnRoaXMubWF0cml4W0xvY2F0aW9uLkJPVU5EQVJZXVtMb2NhdGlvbi5FWFRFUklPUl09PT1EaW1lbnNpb24uRkFMU0U7fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS5pc092ZXJsYXBzPWZ1bmN0aW9uKGRpbWVuc2lvbk9mR2VvbWV0cnlBLGRpbWVuc2lvbk9mR2VvbWV0cnlCKXtpZigoZGltZW5zaW9uT2ZHZW9tZXRyeUE9PURpbWVuc2lvbi5QJiZkaW1lbnNpb25PZkdlb21ldHJ5Qj09PURpbWVuc2lvbi5QKXx8KGRpbWVuc2lvbk9mR2VvbWV0cnlBPT1EaW1lbnNpb24uQSYmZGltZW5zaW9uT2ZHZW9tZXRyeUI9PT1EaW1lbnNpb24uQSkpe3JldHVybiBqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLklOVEVSSU9SXSwnVCcpJiZqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXSwnVCcpJiZqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uRVhURVJJT1JdW0xvY2F0aW9uLklOVEVSSU9SXSwnVCcpO31cbmlmKGRpbWVuc2lvbk9mR2VvbWV0cnlBPT09RGltZW5zaW9uLkwmJmRpbWVuc2lvbk9mR2VvbWV0cnlCPT09RGltZW5zaW9uLkwpe3JldHVybiB0aGlzLm1hdHJpeFtMb2NhdGlvbi5JTlRFUklPUl1bTG9jYXRpb24uSU5URVJJT1JdPT0xJiZqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uSU5URVJJT1JdW0xvY2F0aW9uLkVYVEVSSU9SXSwnVCcpJiZqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4Lm1hdGNoZXModGhpcy5tYXRyaXhbTG9jYXRpb24uRVhURVJJT1JdW0xvY2F0aW9uLklOVEVSSU9SXSwnVCcpO31cbnJldHVybiBmYWxzZTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24ocmVxdWlyZWREaW1lbnNpb25TeW1ib2xzKXtpZihyZXF1aXJlZERpbWVuc2lvblN5bWJvbHMubGVuZ3RoIT05KXt0aHJvdyBuZXcganN0cy5lcnJvci5JbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ1Nob3VsZCBiZSBsZW5ndGggOTogJytcbnJlcXVpcmVkRGltZW5zaW9uU3ltYm9scyk7fVxuZm9yKHZhciBhaT0wO2FpPDM7YWkrKyl7Zm9yKHZhciBiaT0wO2JpPDM7YmkrKyl7aWYoIWpzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgubWF0Y2hlcyh0aGlzLm1hdHJpeFthaV1bYmldLHJlcXVpcmVkRGltZW5zaW9uU3ltYm9scy5jaGFyQXQoMyphaStiaSkpKXtyZXR1cm4gZmFsc2U7fX19XG5yZXR1cm4gdHJ1ZTt9O2pzdHMuZ2VvbS5JbnRlcnNlY3Rpb25NYXRyaXgucHJvdG90eXBlLnRyYW5zcG9zZT1mdW5jdGlvbigpe3ZhciB0ZW1wPW1hdHJpeFsxXVswXTt0aGlzLm1hdHJpeFsxXVswXT10aGlzLm1hdHJpeFswXVsxXTt0aGlzLm1hdHJpeFswXVsxXT10ZW1wO3RlbXA9dGhpcy5tYXRyaXhbMl1bMF07dGhpcy5tYXRyaXhbMl1bMF09dGhpcy5tYXRyaXhbMF1bMl07dGhpcy5tYXRyaXhbMF1bMl09dGVtcDt0ZW1wPXRoaXMubWF0cml4WzJdWzFdO3RoaXMubWF0cml4WzJdWzFdPXRoaXMubWF0cml4WzFdWzJdO3RoaXMubWF0cml4WzFdWzJdPXRlbXA7cmV0dXJuIHRoaXM7fTtqc3RzLmdlb20uSW50ZXJzZWN0aW9uTWF0cml4LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhaSxiaSxidWY9Jyc7Zm9yKGFpPTA7YWk8MzthaSsrKXtmb3IoYmk9MDtiaTwzO2JpKyspe2J1Zis9RGltZW5zaW9uLnRvRGltZW5zaW9uU3ltYm9sKHRoaXMubWF0cml4W2FpXVtiaV0pO319XG5yZXR1cm4gYnVmO307fSkoKTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLkxhc3RGb3VuZFF1YWRFZGdlTG9jYXRvcj1mdW5jdGlvbihzdWJkaXYpe3RoaXMuc3ViZGl2PXN1YmRpdjt0aGlzLmxhc3RFZGdlPW51bGw7dGhpcy5pbml0KCk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLkxhc3RGb3VuZFF1YWRFZGdlTG9jYXRvci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMubGFzdEVkZ2U9dGhpcy5maW5kRWRnZSgpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5MYXN0Rm91bmRRdWFkRWRnZUxvY2F0b3IucHJvdG90eXBlLmZpbmRFZGdlPWZ1bmN0aW9uKCl7dmFyIGVkZ2VzPXRoaXMuc3ViZGl2LmdldEVkZ2VzKCk7cmV0dXJuIGVkZ2VzWzBdO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5MYXN0Rm91bmRRdWFkRWRnZUxvY2F0b3IucHJvdG90eXBlLmxvY2F0ZT1mdW5jdGlvbih2KXtpZighdGhpcy5sYXN0RWRnZS5pc0xpdmUoKSl7dGhpcy5pbml0KCk7fVxudmFyIGU9dGhpcy5zdWJkaXYubG9jYXRlRnJvbUVkZ2Uodix0aGlzLmxhc3RFZGdlKTt0aGlzLmxhc3RFZGdlPWU7cmV0dXJuIGU7fTtqc3RzLm5vZGluZy5TZWdtZW50Tm9kZUxpc3Q9ZnVuY3Rpb24oZWRnZSl7dGhpcy5ub2RlTWFwPW5ldyBqYXZhc2NyaXB0LnV0aWwuVHJlZU1hcCgpO3RoaXMuZWRnZT1lZGdlO307anN0cy5ub2RpbmcuU2VnbWVudE5vZGVMaXN0LnByb3RvdHlwZS5ub2RlTWFwPW51bGw7anN0cy5ub2RpbmcuU2VnbWVudE5vZGVMaXN0LnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKTt9O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlTGlzdC5wcm90b3R5cGUuZWRnZT1udWxsO2pzdHMubm9kaW5nLlNlZ21lbnROb2RlTGlzdC5wcm90b3R5cGUuZ2V0RWRnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2U7fTtqc3RzLm5vZGluZy5TZWdtZW50Tm9kZUxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbihpbnRQdCxzZWdtZW50SW5kZXgpe3ZhciBlaU5ldz1uZXcganN0cy5ub2RpbmcuU2VnbWVudE5vZGUodGhpcy5lZGdlLGludFB0LHNlZ21lbnRJbmRleCx0aGlzLmVkZ2UuZ2V0U2VnbWVudE9jdGFudChzZWdtZW50SW5kZXgpKTt2YXIgZWk9dGhpcy5ub2RlTWFwLmdldChlaU5ldyk7aWYoZWkhPT1udWxsKXtqc3RzLnV0aWwuQXNzZXJ0LmlzVHJ1ZShlaS5jb29yZC5lcXVhbHMyRChpbnRQdCksJ0ZvdW5kIGVxdWFsIG5vZGVzIHdpdGggZGlmZmVyZW50IGNvb3JkaW5hdGVzJyk7cmV0dXJuIGVpO31cbnRoaXMubm9kZU1hcC5wdXQoZWlOZXcsZWlOZXcpO3JldHVybiBlaU5ldzt9O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlTGlzdC5wcm90b3R5cGUuYWRkRW5kcG9pbnRzPWZ1bmN0aW9uKCl7dmFyIG1heFNlZ0luZGV4PXRoaXMuZWRnZS5zaXplKCktMTt0aGlzLmFkZCh0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZSgwKSwwKTt0aGlzLmFkZCh0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShtYXhTZWdJbmRleCksbWF4U2VnSW5kZXgpO307anN0cy5ub2RpbmcuU2VnbWVudE5vZGVMaXN0LnByb3RvdHlwZS5hZGRDb2xsYXBzZWROb2Rlcz1mdW5jdGlvbigpe3ZhciBjb2xsYXBzZWRWZXJ0ZXhJbmRleGVzPVtdO3RoaXMuZmluZENvbGxhcHNlc0Zyb21JbnNlcnRlZE5vZGVzKGNvbGxhcHNlZFZlcnRleEluZGV4ZXMpO3RoaXMuZmluZENvbGxhcHNlc0Zyb21FeGlzdGluZ1ZlcnRpY2VzKGNvbGxhcHNlZFZlcnRleEluZGV4ZXMpO2Zvcih2YXIgaT0wO2k8Y29sbGFwc2VkVmVydGV4SW5kZXhlcy5sZW5ndGg7aSsrKXt2YXIgdmVydGV4SW5kZXg9Y29sbGFwc2VkVmVydGV4SW5kZXhlc1tpXTt0aGlzLmFkZCh0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZSh2ZXJ0ZXhJbmRleCksdmVydGV4SW5kZXgpO319O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlTGlzdC5wcm90b3R5cGUuZmluZENvbGxhcHNlc0Zyb21FeGlzdGluZ1ZlcnRpY2VzPWZ1bmN0aW9uKGNvbGxhcHNlZFZlcnRleEluZGV4ZXMpe2Zvcih2YXIgaT0wO2k8dGhpcy5lZGdlLnNpemUoKS0yO2krKyl7dmFyIHAwPXRoaXMuZWRnZS5nZXRDb29yZGluYXRlKGkpO3ZhciBwMT10aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShpKzEpO3ZhciBwMj10aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShpKzIpO2lmKHAwLmVxdWFsczJEKHAyKSl7Y29sbGFwc2VkVmVydGV4SW5kZXhlcy5wdXNoKGkrMSk7fX19O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlTGlzdC5wcm90b3R5cGUuZmluZENvbGxhcHNlc0Zyb21JbnNlcnRlZE5vZGVzPWZ1bmN0aW9uKGNvbGxhcHNlZFZlcnRleEluZGV4ZXMpe3ZhciBjb2xsYXBzZWRWZXJ0ZXhJbmRleD1bbnVsbF07dmFyIGl0PXRoaXMuaXRlcmF0b3IoKTt2YXIgZWlQcmV2PWl0Lm5leHQoKTt3aGlsZShpdC5oYXNOZXh0KCkpe3ZhciBlaT1pdC5uZXh0KCk7dmFyIGlzQ29sbGFwc2VkPXRoaXMuZmluZENvbGxhcHNlSW5kZXgoZWlQcmV2LGVpLGNvbGxhcHNlZFZlcnRleEluZGV4KTtpZihpc0NvbGxhcHNlZClcbmNvbGxhcHNlZFZlcnRleEluZGV4ZXMucHVzaChjb2xsYXBzZWRWZXJ0ZXhJbmRleFswXSk7ZWlQcmV2PWVpO319O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlTGlzdC5wcm90b3R5cGUuZmluZENvbGxhcHNlSW5kZXg9ZnVuY3Rpb24oZWkwLGVpMSxjb2xsYXBzZWRWZXJ0ZXhJbmRleCl7aWYoIWVpMC5jb29yZC5lcXVhbHMyRChlaTEuY29vcmQpKVxucmV0dXJuIGZhbHNlO3ZhciBudW1WZXJ0aWNlc0JldHdlZW49ZWkxLnNlZ21lbnRJbmRleC1laTAuc2VnbWVudEluZGV4O2lmKCFlaTEuaXNJbnRlcmlvcigpKXtudW1WZXJ0aWNlc0JldHdlZW4tLTt9XG5pZihudW1WZXJ0aWNlc0JldHdlZW49PT0xKXtjb2xsYXBzZWRWZXJ0ZXhJbmRleFswXT1laTAuc2VnbWVudEluZGV4KzE7cmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy5ub2RpbmcuU2VnbWVudE5vZGVMaXN0LnByb3RvdHlwZS5hZGRTcGxpdEVkZ2VzPWZ1bmN0aW9uKGVkZ2VMaXN0KXt0aGlzLmFkZEVuZHBvaW50cygpO3RoaXMuYWRkQ29sbGFwc2VkTm9kZXMoKTt2YXIgaXQ9dGhpcy5pdGVyYXRvcigpO3ZhciBlaVByZXY9aXQubmV4dCgpO3doaWxlKGl0Lmhhc05leHQoKSl7dmFyIGVpPWl0Lm5leHQoKTt2YXIgbmV3RWRnZT10aGlzLmNyZWF0ZVNwbGl0RWRnZShlaVByZXYsZWkpO2VkZ2VMaXN0LmFkZChuZXdFZGdlKTtlaVByZXY9ZWk7fX07anN0cy5ub2RpbmcuU2VnbWVudE5vZGVMaXN0LnByb3RvdHlwZS5jaGVja1NwbGl0RWRnZXNDb3JyZWN0bmVzcz1mdW5jdGlvbihzcGxpdEVkZ2VzKXt2YXIgZWRnZVB0cz1lZGdlLmdldENvb3JkaW5hdGVzKCk7dmFyIHNwbGl0MD1zcGxpdEVkZ2VzWzBdO3ZhciBwdDA9c3BsaXQwLmdldENvb3JkaW5hdGUoMCk7aWYoIXB0MC5lcXVhbHMyRChlZGdlUHRzWzBdKSlcbnRocm93IG5ldyBFcnJvcignYmFkIHNwbGl0IGVkZ2Ugc3RhcnQgcG9pbnQgYXQgJytwdDApO3ZhciBzcGxpdG49c3BsaXRFZGdlc1tzcGxpdEVkZ2VzLmxlbmd0aC0xXTt2YXIgc3BsaXRuUHRzPXNwbGl0bi5nZXRDb29yZGluYXRlcygpO3ZhciBwdG49c3BsaXRuUHRzW3NwbGl0blB0cy5sZW5ndGgtMV07aWYoIXB0bi5lcXVhbHMyRChlZGdlUHRzW2VkZ2VQdHMubGVuZ3RoLTFdKSlcbnRocm93IG5ldyBFcnJvcignYmFkIHNwbGl0IGVkZ2UgZW5kIHBvaW50IGF0ICcrcHRuKTt9O2pzdHMubm9kaW5nLlNlZ21lbnROb2RlTGlzdC5wcm90b3R5cGUuY3JlYXRlU3BsaXRFZGdlPWZ1bmN0aW9uKGVpMCxlaTEpe3ZhciBucHRzPWVpMS5zZWdtZW50SW5kZXgtZWkwLnNlZ21lbnRJbmRleCsyO3ZhciBsYXN0U2VnU3RhcnRQdD10aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShlaTEuc2VnbWVudEluZGV4KTt2YXIgdXNlSW50UHQxPWVpMS5pc0ludGVyaW9yKCl8fCFlaTEuY29vcmQuZXF1YWxzMkQobGFzdFNlZ1N0YXJ0UHQpO2lmKCF1c2VJbnRQdDEpe25wdHMtLTt9XG52YXIgcHRzPVtdO3ZhciBpcHQ9MDtwdHNbaXB0KytdPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShlaTAuY29vcmQpO2Zvcih2YXIgaT1laTAuc2VnbWVudEluZGV4KzE7aTw9ZWkxLnNlZ21lbnRJbmRleDtpKyspe3B0c1tpcHQrK109dGhpcy5lZGdlLmdldENvb3JkaW5hdGUoaSk7fVxuaWYodXNlSW50UHQxKVxucHRzW2lwdF09ZWkxLmNvb3JkO3JldHVybiBuZXcganN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nKHB0cyx0aGlzLmVkZ2UuZ2V0RGF0YSgpKTt9O2pzdHMuaW8uV0tUV3JpdGVyPWZ1bmN0aW9uKCl7dGhpcy5wYXJzZXI9bmV3IGpzdHMuaW8uV0tUUGFyc2VyKHRoaXMuZ2VvbWV0cnlGYWN0b3J5KTt9O2pzdHMuaW8uV0tUV3JpdGVyLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihnZW9tZXRyeSl7dmFyIHdrdD10aGlzLnBhcnNlci53cml0ZShnZW9tZXRyeSk7cmV0dXJuIHdrdDt9O2pzdHMuaW8uV0tUV3JpdGVyLnRvTGluZVN0cmluZz1mdW5jdGlvbihwMCxwMSl7aWYoYXJndW1lbnRzLmxlbmd0aCE9PTIpe3Rocm93IG5ldyBqc3RzLmVycm9yLk5vdEltcGxlbWVudGVkRXJyb3IoKTt9XG5yZXR1cm4nTElORVNUUklORyAoICcrcDAueCsnICcrcDAueSsnLCAnK3AxLngrJyAnK3AxLnkrJyApJzt9O2pzdHMuaW8uV0tUUmVhZGVyPWZ1bmN0aW9uKGdlb21ldHJ5RmFjdG9yeSl7dGhpcy5nZW9tZXRyeUZhY3Rvcnk9Z2VvbWV0cnlGYWN0b3J5fHxuZXcganN0cy5nZW9tLkdlb21ldHJ5RmFjdG9yeSgpO3RoaXMucHJlY2lzaW9uTW9kZWw9dGhpcy5nZW9tZXRyeUZhY3RvcnkuZ2V0UHJlY2lzaW9uTW9kZWwoKTt0aGlzLnBhcnNlcj1uZXcganN0cy5pby5XS1RQYXJzZXIodGhpcy5nZW9tZXRyeUZhY3RvcnkpO307anN0cy5pby5XS1RSZWFkZXIucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24od2t0KXt2YXIgZ2VvbWV0cnk9dGhpcy5wYXJzZXIucmVhZCh3a3QpO2lmKHRoaXMucHJlY2lzaW9uTW9kZWwuZ2V0VHlwZSgpPT09anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLkZJWEVEKXt0aGlzLnJlZHVjZVByZWNpc2lvbihnZW9tZXRyeSk7fVxucmV0dXJuIGdlb21ldHJ5O307anN0cy5pby5XS1RSZWFkZXIucHJvdG90eXBlLnJlZHVjZVByZWNpc2lvbj1mdW5jdGlvbihnZW9tZXRyeSl7dmFyIGksbGVuO2lmKGdlb21ldHJ5LmNvb3JkaW5hdGUpe3RoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2UoZ2VvbWV0cnkuY29vcmRpbmF0ZSk7fWVsc2UgaWYoZ2VvbWV0cnkucG9pbnRzKXtmb3IoaT0wLGxlbj1nZW9tZXRyeS5wb2ludHMubGVuZ3RoO2k8bGVuO2krKyl7dGhpcy5wcmVjaXNpb25Nb2RlbC5tYWtlUHJlY2lzZShnZW9tZXRyeS5wb2ludHNbaV0pO319ZWxzZSBpZihnZW9tZXRyeS5nZW9tZXRyaWVzKXtmb3IoaT0wLGxlbj1nZW9tZXRyeS5nZW9tZXRyaWVzLmxlbmd0aDtpPGxlbjtpKyspe3RoaXMucmVkdWNlUHJlY2lzaW9uKGdlb21ldHJ5Lmdlb21ldHJpZXNbaV0pO319fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb249ZnVuY3Rpb24oZW52LHRvbGVyYW5jZSl7dGhpcy50b2xlcmFuY2U9dG9sZXJhbmNlO3RoaXMuZWRnZUNvaW5jaWRlbmNlVG9sZXJhbmNlPXRvbGVyYW5jZS9qc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb24uRURHRV9DT0lOQ0lERU5DRV9UT0xfRkFDVE9SO3RoaXMudmlzaXRlZEtleT0wO3RoaXMucXVhZEVkZ2VzPVtdO3RoaXMuc3RhcnRpbmdFZGdlO3RoaXMudG9sZXJhbmNlO3RoaXMuZWRnZUNvaW5jaWRlbmNlVG9sZXJhbmNlO3RoaXMuZnJhbWVFbnY7dGhpcy5sb2NhdG9yPW51bGw7dGhpcy5zZWc9bmV3IGpzdHMuZ2VvbS5MaW5lU2VnbWVudCgpO3RoaXMudHJpRWRnZXM9bmV3IEFycmF5KDMpO3RoaXMuZnJhbWVWZXJ0ZXg9bmV3IEFycmF5KDMpO3RoaXMuY3JlYXRlRnJhbWUoZW52KTt0aGlzLnN0YXJ0aW5nRWRnZT10aGlzLmluaXRTdWJkaXYoKTt0aGlzLmxvY2F0b3I9bmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuTGFzdEZvdW5kUXVhZEVkZ2VMb2NhdG9yKHRoaXMpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLkVER0VfQ09JTkNJREVOQ0VfVE9MX0ZBQ1RPUj0xMDAwO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5nZXRUcmlhbmdsZUVkZ2VzPWZ1bmN0aW9uKHN0YXJ0UUUsdHJpRWRnZSl7dHJpRWRnZVswXT1zdGFydFFFO3RyaUVkZ2VbMV09dHJpRWRnZVswXS5sTmV4dCgpO3RyaUVkZ2VbMl09dHJpRWRnZVsxXS5sTmV4dCgpO2lmKHRyaUVkZ2VbMl0ubE5leHQoKSE9dHJpRWRnZVswXSl7dGhyb3cgbmV3IGpzdHMuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ0VkZ2VzIGRvIG5vdCBmb3JtIGEgdHJpYW5nbGUnKTt9fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb24ucHJvdG90eXBlLmNyZWF0ZUZyYW1lPWZ1bmN0aW9uKGVudil7dmFyIGRlbHRhWCxkZWx0YVksb2Zmc2V0O2RlbHRhWD1lbnYuZ2V0V2lkdGgoKTtkZWx0YVk9ZW52LmdldEhlaWdodCgpO29mZnNldD0wLjA7aWYoZGVsdGFYPmRlbHRhWSl7b2Zmc2V0PWRlbHRhWCoxMC4wO31lbHNle29mZnNldD1kZWx0YVkqMTAuMDt9XG50aGlzLmZyYW1lVmVydGV4WzBdPW5ldyBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleCgoZW52LmdldE1heFgoKStlbnYuZ2V0TWluWCgpKS8yLjAsZW52LmdldE1heFkoKVxuK29mZnNldCk7dGhpcy5mcmFtZVZlcnRleFsxXT1uZXcganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5WZXJ0ZXgoZW52LmdldE1pblgoKS1vZmZzZXQsZW52LmdldE1pblkoKS1vZmZzZXQpO3RoaXMuZnJhbWVWZXJ0ZXhbMl09bmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4KGVudi5nZXRNYXhYKCkrb2Zmc2V0LGVudi5nZXRNaW5ZKCktb2Zmc2V0KTt0aGlzLmZyYW1lRW52PW5ldyBqc3RzLmdlb20uRW52ZWxvcGUodGhpcy5mcmFtZVZlcnRleFswXS5nZXRDb29yZGluYXRlKCksdGhpcy5mcmFtZVZlcnRleFsxXS5nZXRDb29yZGluYXRlKCkpO3RoaXMuZnJhbWVFbnYuZXhwYW5kVG9JbmNsdWRlKHRoaXMuZnJhbWVWZXJ0ZXhbMl0uZ2V0Q29vcmRpbmF0ZSgpKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuaW5pdFN1YmRpdj1mdW5jdGlvbigpe3ZhciBlYSxlYixlYztlYT10aGlzLm1ha2VFZGdlKHRoaXMuZnJhbWVWZXJ0ZXhbMF0sdGhpcy5mcmFtZVZlcnRleFsxXSk7ZWI9dGhpcy5tYWtlRWRnZSh0aGlzLmZyYW1lVmVydGV4WzFdLHRoaXMuZnJhbWVWZXJ0ZXhbMl0pO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2Uuc3BsaWNlKGVhLnN5bSgpLGViKTtlYz10aGlzLm1ha2VFZGdlKHRoaXMuZnJhbWVWZXJ0ZXhbMl0sdGhpcy5mcmFtZVZlcnRleFswXSk7anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZS5zcGxpY2UoZWIuc3ltKCksZWMpO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2Uuc3BsaWNlKGVjLnN5bSgpLGVhKTtyZXR1cm4gZWE7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb24ucHJvdG90eXBlLmdldFRvbGVyYW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvbGVyYW5jZTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZ2V0RW52ZWxvcGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGpzdHMuZ2VvbS5FbnZlbG9wZSh0aGlzLmZyYW1lRW52KTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZ2V0RWRnZXM9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjApe3JldHVybiB0aGlzLmdldEVkZ2VzQnlGYWN0b3J5KGFyZ3VtZW50c1swXSk7fWVsc2V7cmV0dXJuIHRoaXMucXVhZEVkZ2VzO319O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuc2V0TG9jYXRvcj1mdW5jdGlvbihsb2NhdG9yKXt0aGlzLmxvY2F0b3I9bG9jYXRvcjt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUubWFrZUVkZ2U9ZnVuY3Rpb24obyxkKXt2YXIgcT1qc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLm1ha2VFZGdlKG8sZCk7dGhpcy5xdWFkRWRnZXMucHVzaChxKTtyZXR1cm4gcTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihhLGIpe3ZhciBxPWpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2UuY29ubmVjdChhLGIpO3RoaXMucXVhZEVkZ2VzLnB1c2gocSk7cmV0dXJuIHE7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb24ucHJvdG90eXBlLmRlbGV0ZV9qc3RzPWZ1bmN0aW9uKGUpe2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2Uuc3BsaWNlKGUsZS5vUHJldigpKTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlLnNwbGljZShlLnN5bSgpLGUuc3ltKCkub1ByZXYoKSk7dmFyIGVTeW0sZVJvdCxlUm90U3ltO2UuZVN5bT1lLnN5bSgpO2VSb3Q9ZS5yb3Q7ZVJvdFN5bT1lLnJvdC5zeW0oKTt2YXIgaWR4PXRoaXMucXVhZEVkZ2VzLmluZGV4T2YoZSk7aWYoaWR4IT09LTEpe3RoaXMucXVhZEVkZ2VzLnNwbGljZShpZHgsMSk7fVxuaWR4PXRoaXMucXVhZEVkZ2VzLmluZGV4T2YoZVN5bSk7aWYoaWR4IT09LTEpe3RoaXMucXVhZEVkZ2VzLnNwbGljZShpZHgsMSk7fVxuaWR4PXRoaXMucXVhZEVkZ2VzLmluZGV4T2YoZVJvdCk7aWYoaWR4IT09LTEpe3RoaXMucXVhZEVkZ2VzLnNwbGljZShpZHgsMSk7fVxuaWR4PXRoaXMucXVhZEVkZ2VzLmluZGV4T2YoZVJvdFN5bSk7aWYoaWR4IT09LTEpe3RoaXMucXVhZEVkZ2VzLnNwbGljZShpZHgsMSk7fVxuZS5kZWxldGVfanN0cygpO2VTeW0uZGVsZXRlX2pzdHMoKTtlUm90LmRlbGV0ZV9qc3RzKCk7ZVJvdFN5bS5kZWxldGVfanN0cygpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5sb2NhdGVGcm9tRWRnZT1mdW5jdGlvbih2LHN0YXJ0RWRnZSl7dmFyIGl0ZXI9MCxtYXhJdGVyPXRoaXMucXVhZEVkZ2VzLmxlbmd0aCxlO2U9c3RhcnRFZGdlO3doaWxlKHRydWUpe2l0ZXIrKztpZihpdGVyPm1heEl0ZXIpe3Rocm93IG5ldyBqc3RzLmVycm9yLkxvY2F0ZUZhaWx1cmVFcnJvcihlLnRvTGluZVNlZ21lbnQoKSk7fVxuaWYoKHYuZXF1YWxzKGUub3JpZygpKSl8fCh2LmVxdWFscyhlLmRlc3QoKSkpKXticmVhazt9ZWxzZSBpZih2LnJpZ2h0T2YoZSkpe2U9ZS5zeW0oKTt9ZWxzZSBpZighdi5yaWdodE9mKGUub05leHQoKSkpe2U9ZS5vTmV4dCgpO31lbHNlIGlmKCF2LnJpZ2h0T2YoZS5kUHJldigpKSl7ZT1lLmRQcmV2KCk7fWVsc2V7YnJlYWs7fX1cbnJldHVybiBlO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5sb2NhdGU9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleCl7cmV0dXJuIHRoaXMubG9jYXRlQnlWZXJ0ZXgoYXJndW1lbnRzWzBdKTt9ZWxzZXtyZXR1cm4gdGhpcy5sb2NhdGVCeUNvb3JkaW5hdGUoYXJndW1lbnRzWzBdKTt9fWVsc2V7cmV0dXJuIHRoaXMubG9jYXRlQnlDb29yZGluYXRlcyhhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTt9fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb24ucHJvdG90eXBlLmxvY2F0ZUJ5VmVydGV4PWZ1bmN0aW9uKHYpe3JldHVybiB0aGlzLmxvY2F0b3IubG9jYXRlKHYpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5sb2NhdGVCeUNvb3JkaW5hdGU9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMubG9jYXRvci5sb2NhdGUobmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4KHApKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUubG9jYXRlQnlDb29yZGluYXRlcz1mdW5jdGlvbihwMCxwMSl7dmFyIGUsYmFzZSxsb2NFZGdlO3ZhciBlPXRoaXMubG9jYXRvci5sb2NhdGUobmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVmVydGV4KHAwKSk7aWYoZT09PW51bGwpe3JldHVybiBudWxsO31cbmJhc2U9ZTtpZihlLmRlc3QoKS5nZXRDb29yZGluYXRlKCkuZXF1YWxzMkQocDApKXtiYXNlPWUuc3ltKCk7fVxubG9jRWRnZT1iYXNlO2Rve2lmKGxvY0VkZ2UuZGVzdCgpLmdldENvb3JkaW5hdGUoKS5lcXVhbHMyRChwMSkpe3JldHVybiBsb2NFZGdlO31cbmxvY0VkZ2U9bG9jRWRnZS5vTmV4dCgpO313aGlsZShsb2NFZGdlIT1iYXNlKTtyZXR1cm4gbnVsbDt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuaW5zZXJ0U2l0ZT1mdW5jdGlvbih2KXt2YXIgZSxiYXNlLHN0YXJ0RWRnZTtlPXRoaXMubG9jYXRlKHYpO2lmKCh2LmVxdWFscyhlLm9yaWcoKSx0aGlzLnRvbGVyYW5jZSkpfHwodi5lcXVhbHMoZS5kZXN0KCksdGhpcy50b2xlcmFuY2UpKSl7cmV0dXJuIGU7fVxuYmFzZT10aGlzLm1ha2VFZGdlKGUub3JpZygpLHYpO2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2Uuc3BsaWNlKGJhc2UsZSk7c3RhcnRFZGdlPWJhc2U7ZG97YmFzZT10aGlzLmNvbm5lY3QoZSxiYXNlLnN5bSgpKTtlPWJhc2Uub1ByZXYoKTt9d2hpbGUoZS5sTmV4dCgpIT1zdGFydEVkZ2UpO3JldHVybiBzdGFydEVkZ2U7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb24ucHJvdG90eXBlLmlzRnJhbWVFZGdlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNGcmFtZVZlcnRleChlLm9yaWcoKSl8fHRoaXMuaXNGcmFtZVZlcnRleChlLmRlc3QoKSkpe3JldHVybiB0cnVlO31cbnJldHVybiBmYWxzZTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuaXNGcmFtZUJvcmRlckVkZ2U9ZnVuY3Rpb24oZSl7dmFyIGxlZnRUcmkscmlnaHRUcmksdkxlZnRUcmlPdGhlcix2UmlnaHRUcmlPdGhlcjtsZWZ0VHJpPW5ldyBBcnJheSgzKTt0aGlzLmdldFRyaWFuZ2xlRWRnZXMoZSxsZWZ0VHJpKTtyaWdodFRyaT1uZXcgQXJyYXkoMyk7dGhpcy5nZXRUcmlhbmdsZUVkZ2VzKGUuc3ltKCkscmlnaHRUcmkpO3ZMZWZ0VHJpT3RoZXI9ZS5sTmV4dCgpLmRlc3QoKTtpZih0aGlzLmlzRnJhbWVWZXJ0ZXgodkxlZnRUcmlPdGhlcikpe3JldHVybiB0cnVlO31cbnZSaWdodFRyaU90aGVyPWUuc3ltKCkubE5leHQoKS5kZXN0KCk7aWYodGhpcy5pc0ZyYW1lVmVydGV4KHZSaWdodFRyaU90aGVyKSl7cmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5pc0ZyYW1lVmVydGV4PWZ1bmN0aW9uKHYpe2lmKHYuZXF1YWxzKHRoaXMuZnJhbWVWZXJ0ZXhbMF0pKXtyZXR1cm4gdHJ1ZTt9XG5pZih2LmVxdWFscyh0aGlzLmZyYW1lVmVydGV4WzFdKSl7cmV0dXJuIHRydWU7fVxuaWYodi5lcXVhbHModGhpcy5mcmFtZVZlcnRleFsyXSkpe3JldHVybiB0cnVlO31cbnJldHVybiBmYWxzZTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuaXNPbkVkZ2U9ZnVuY3Rpb24oZSxwKXt0aGlzLnNlZy5zZXRDb29yZGluYXRlcyhlLm9yaWcoKS5nZXRDb29yZGluYXRlKCksZS5kZXN0KCkuZ2V0Q29vcmRpbmF0ZSgpKTt2YXIgZGlzdD10aGlzLnNlZy5kaXN0YW5jZShwKTtyZXR1cm4gZGlzdDx0aGlzLmVkZ2VDb2luY2lkZW5jZVRvbGVyYW5jZTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuaXNWZXJ0ZXhPZkVkZ2U9ZnVuY3Rpb24oZSx2KXtpZigodi5lcXVhbHMoZS5vcmlnKCksdGhpcy50b2xlcmFuY2UpKXx8KHYuZXF1YWxzKGUuZGVzdCgpLHRoaXMudG9sZXJhbmNlKSkpe3JldHVybiB0cnVlO31cbnJldHVybiBmYWxzZTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZ2V0VmVydGljZXM9ZnVuY3Rpb24oaW5jbHVkZUZyYW1lKVxue3ZhciB2ZXJ0aWNlcz1bXSxpLGlsLHFlLHYsdmQ7aT0wLGlsPXRoaXMucXVhZEVkZ2VzLmxlbmd0aDtmb3IoaTtpPGlsO2krKyl7cWU9dGhpcy5xdWFkRWRnZXNbaV07dj1xZS5vcmlnKCk7aWYoaW5jbHVkZUZyYW1lfHwhdGhpcy5pc0ZyYW1lVmVydGV4KHYpKXt2ZXJ0aWNlcy5wdXNoKHYpO31cbnZkPXFlLmRlc3QoKTtpZihpbmNsdWRlRnJhbWV8fCF0aGlzLmlzRnJhbWVWZXJ0ZXgodmQpKXt2ZXJ0aWNlcy5wdXNoKHZkKTt9fVxucmV0dXJuIHZlcnRpY2VzO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5nZXRWZXJ0ZXhVbmlxdWVFZGdlcz1mdW5jdGlvbihpbmNsdWRlRnJhbWUpXG57dmFyIGVkZ2VzLHZpc2l0ZWRWZXJ0aWNlcyxpLGlsLHFlLHYscWQsdmQ7ZWRnZXM9W107dmlzaXRlZFZlcnRpY2VzPVtdO2k9MCxpbD10aGlzLnF1YWRFZGdlcy5sZW5ndGg7Zm9yKGk7aTxpbDtpKyspe3FlPXRoaXMucXVhZEVkZ2VzW2ldO3Y9cWUub3JpZygpO2lmKHZpc2l0ZWRWZXJ0aWNlcy5pbmRleE9mKHYpPT09LTEpe3Zpc2l0ZWRWZXJ0aWNlcy5wdXNoKHYpO2lmKGluY2x1ZGVGcmFtZXx8IXRoaXMuaXNGcmFtZVZlcnRleCh2KSl7ZWRnZXMucHVzaChxZSk7fX1cbnFkPXFlLnN5bSgpO3ZkPXFkLm9yaWcoKTtpZih2aXNpdGVkVmVydGljZXMuaW5kZXhPZih2ZCk9PT0tMSl7dmlzaXRlZFZlcnRpY2VzLnB1c2godmQpO2lmKGluY2x1ZGVGcmFtZXx8IXRoaXMuaXNGcmFtZVZlcnRleCh2ZCkpe2VkZ2VzLnB1c2gocWQpO319fVxucmV0dXJuIGVkZ2VzO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5nZXRQcmltYXJ5RWRnZXM9ZnVuY3Rpb24oaW5jbHVkZUZyYW1lKXt0aGlzLnZpc2l0ZWRLZXkrKzt2YXIgZWRnZXMsZWRnZVN0YWNrLHZpc2l0ZWRFZGdlcyxlZGdlLHByaVFFO2VkZ2VzPVtdO2VkZ2VTdGFjaz1bXTtlZGdlU3RhY2sucHVzaCh0aGlzLnN0YXJ0aW5nRWRnZSk7dmlzaXRlZEVkZ2VzPVtdO3doaWxlKGVkZ2VTdGFjay5sZW5ndGg+MCl7ZWRnZT1lZGdlU3RhY2sucG9wKCk7aWYodmlzaXRlZEVkZ2VzLmluZGV4T2YoZWRnZSk9PT0tMSl7cHJpUUU9ZWRnZS5nZXRQcmltYXJ5KCk7aWYoaW5jbHVkZUZyYW1lfHwhdGhpcy5pc0ZyYW1lRWRnZShwcmlRRSkpe2VkZ2VzLnB1c2gocHJpUUUpO31cbmVkZ2VTdGFjay5wdXNoKGVkZ2Uub05leHQoKSk7ZWRnZVN0YWNrLnB1c2goZWRnZS5zeW0oKS5vTmV4dCgpKTt2aXNpdGVkRWRnZXMucHVzaChlZGdlKTt2aXNpdGVkRWRnZXMucHVzaChlZGdlLnN5bSgpKTt9fVxucmV0dXJuIGVkZ2VzO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS52aXNpdFRyaWFuZ2xlcz1mdW5jdGlvbih0cmlWaXNpdG9yLGluY2x1ZGVGcmFtZSl7dGhpcy52aXNpdGVkS2V5Kys7dmFyIGVkZ2VTdGFjayx2aXNpdGVkRWRnZXMsZWRnZSx0cmlFZGdlcztlZGdlU3RhY2s9W107ZWRnZVN0YWNrLnB1c2godGhpcy5zdGFydGluZ0VkZ2UpO3Zpc2l0ZWRFZGdlcz1bXTt3aGlsZShlZGdlU3RhY2subGVuZ3RoPjApe2VkZ2U9ZWRnZVN0YWNrLnBvcCgpO2lmKHZpc2l0ZWRFZGdlcy5pbmRleE9mKGVkZ2UpPT09LTEpe3RyaUVkZ2VzPXRoaXMuZmV0Y2hUcmlhbmdsZVRvVmlzaXQoZWRnZSxlZGdlU3RhY2ssaW5jbHVkZUZyYW1lLHZpc2l0ZWRFZGdlcyk7aWYodHJpRWRnZXMhPT1udWxsKVxudHJpVmlzaXRvci52aXNpdCh0cmlFZGdlcyk7fX19O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZmV0Y2hUcmlhbmdsZVRvVmlzaXQ9ZnVuY3Rpb24oZWRnZSxlZGdlU3RhY2ssaW5jbHVkZUZyYW1lLHZpc2l0ZWRFZGdlcyl7dmFyIGN1cnIsZWRnZUNvdW50LGlzRnJhbWUsc3ltO2N1cnI9ZWRnZTtlZGdlQ291bnQ9MDtpc0ZyYW1lPWZhbHNlO2Rve3RoaXMudHJpRWRnZXNbZWRnZUNvdW50XT1jdXJyO2lmKHRoaXMuaXNGcmFtZUVkZ2UoY3Vycikpe2lzRnJhbWU9dHJ1ZTt9XG5zeW09Y3Vyci5zeW0oKTtpZih2aXNpdGVkRWRnZXMuaW5kZXhPZihzeW0pPT09LTEpe2VkZ2VTdGFjay5wdXNoKHN5bSk7fVxudmlzaXRlZEVkZ2VzLnB1c2goY3Vycik7ZWRnZUNvdW50Kys7Y3Vycj1jdXJyLmxOZXh0KCk7fXdoaWxlKGN1cnIhPT1lZGdlKTtpZihpc0ZyYW1lJiYhaW5jbHVkZUZyYW1lKXtyZXR1cm4gbnVsbDt9XG5yZXR1cm4gdGhpcy50cmlFZGdlczt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZ2V0VHJpYW5nbGVFZGdlcz1mdW5jdGlvbihpbmNsdWRlRnJhbWUpe3ZhciB2aXNpdG9yPW5ldyBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlRWRnZXNMaXN0VmlzaXRvcigpO3RoaXMudmlzaXRUcmlhbmdsZXModmlzaXRvcixpbmNsdWRlRnJhbWUpO3JldHVybiB2aXNpdG9yLmdldFRyaWFuZ2xlRWRnZXMoKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZ2V0VHJpYW5nbGVWZXJ0aWNlcz1mdW5jdGlvbihpbmNsdWRlRnJhbWUpe3ZhciB2aXNpdG9yPW5ldyBUcmlhbmdsZVZlcnRleExpc3RWaXNpdG9yKCk7dGhpcy52aXNpdFRyaWFuZ2xlcyh2aXNpdG9yLGluY2x1ZGVGcmFtZSk7cmV0dXJuIHZpc2l0b3IuZ2V0VHJpYW5nbGVWZXJ0aWNlcygpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5nZXRUcmlhbmdsZUNvb3JkaW5hdGVzPWZ1bmN0aW9uKGluY2x1ZGVGcmFtZSl7dmFyIHZpc2l0b3I9bmV3IGpzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVDb29yZGluYXRlc1Zpc2l0b3IoKTt0aGlzLnZpc2l0VHJpYW5nbGVzKHZpc2l0b3IsaW5jbHVkZUZyYW1lKTtyZXR1cm4gdmlzaXRvci5nZXRUcmlhbmdsZXMoKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZ2V0RWRnZXNCeUZhY3Rvcnk9ZnVuY3Rpb24oZ2VvbUZhY3Qpe3ZhciBxdWFkRWRnZXMsZWRnZXMsaSxpbCxxZSxjb29yZHM7cXVhZEVkZ2VzPXRoaXMuZ2V0UHJpbWFyeUVkZ2VzKGZhbHNlKTtlZGdlcz1bXTtpPTA7aWw9cXVhZEVkZ2VzLmxlbmd0aDtmb3IoaTtpPGlsO2krKyl7cWU9cXVhZEVkZ2VzW2ldO2Nvb3Jkcz1bXTtjb29yZHNbMF09KHFlLm9yaWcoKS5nZXRDb29yZGluYXRlKCkpO2Nvb3Jkc1sxXT0ocWUuZGVzdCgpLmdldENvb3JkaW5hdGUoKSk7ZWRnZXNbaV09Z2VvbUZhY3QuY3JlYXRlTGluZVN0cmluZyhjb29yZHMpO31cbnJldHVybiBnZW9tRmFjdC5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoZWRnZXMpO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5nZXRUcmlhbmdsZXM9ZnVuY3Rpb24oZ2VvbUZhY3Qpe3ZhciB0cmlQdHNMaXN0LHRyaXMsdHJpUHQsaSxpbDt0cmlQdHNMaXN0PXRoaXMuZ2V0VHJpYW5nbGVDb29yZGluYXRlcyhmYWxzZSk7dHJpcz1uZXcgQXJyYXkodHJpUHRzTGlzdC5sZW5ndGgpO2k9MCxpbD10cmlQdHNMaXN0Lmxlbmd0aDtmb3IoaTtpPGlsO2krKyl7dHJpUHQ9dHJpUHRzTGlzdFtpXTt0cmlzW2ldPWdlb21GYWN0LmNyZWF0ZVBvbHlnb24oZ2VvbUZhY3QuY3JlYXRlTGluZWFyUmluZyh0cmlQdCxudWxsKSk7fVxucmV0dXJuIGdlb21GYWN0LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbih0cmlzKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuUXVhZEVkZ2VTdWJkaXZpc2lvbi5wcm90b3R5cGUuZ2V0Vm9yb25vaURpYWdyYW09ZnVuY3Rpb24oZ2VvbUZhY3QpXG57dmFyIHZvckNlbGxzPXRoaXMuZ2V0Vm9yb25vaUNlbGxQb2x5Z29ucyhnZW9tRmFjdCk7cmV0dXJuIGdlb21GYWN0LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbih2b3JDZWxscyk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlF1YWRFZGdlU3ViZGl2aXNpb24ucHJvdG90eXBlLmdldFZvcm9ub2lDZWxsUG9seWdvbnM9ZnVuY3Rpb24oZ2VvbUZhY3QpXG57dGhpcy52aXNpdFRyaWFuZ2xlcyhuZXcganN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZUNpcmN1bWNlbnRyZVZpc2l0b3IoKSx0cnVlKTt2YXIgY2VsbHMsZWRnZXMsaSxpbCxxZTtjZWxscz1bXTtlZGdlcz10aGlzLmdldFZlcnRleFVuaXF1ZUVkZ2VzKGZhbHNlKTtpPTAsaWw9ZWRnZXMubGVuZ3RoO2ZvcihpO2k8aWw7aSsrKXtxZT1lZGdlc1tpXTtjZWxscy5wdXNoKHRoaXMuZ2V0Vm9yb25vaUNlbGxQb2x5Z29uKHFlLGdlb21GYWN0KSk7fVxucmV0dXJuIGNlbGxzO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5RdWFkRWRnZVN1YmRpdmlzaW9uLnByb3RvdHlwZS5nZXRWb3Jvbm9pQ2VsbFBvbHlnb249ZnVuY3Rpb24ocWUsZ2VvbUZhY3QpXG57dmFyIGNlbGxQdHMsc3RhcnRRZSxjYyxjb29yZExpc3QsY2VsbFBvbHksdjtjZWxsUHRzPVtdO3N0YXJ0UUU9cWU7ZG97Y2M9cWUucm90Lm9yaWcoKS5nZXRDb29yZGluYXRlKCk7Y2VsbFB0cy5wdXNoKGNjKTtxZT1xZS5vUHJldigpO313aGlsZShxZSE9PXN0YXJ0UUUpO2Nvb3JkTGlzdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGVMaXN0KFtdLGZhbHNlKTtjb29yZExpc3QuYWRkKGNlbGxQdHMsZmFsc2UpO2Nvb3JkTGlzdC5jbG9zZVJpbmcoKTtpZihjb29yZExpc3Quc2l6ZSgpPDQpe2Nvb3JkTGlzdC5hZGQoY29vcmRMaXN0LmdldChjb29yZExpc3Quc2l6ZSgpLTEpLHRydWUpO31cbmNlbGxQb2x5PWdlb21GYWN0LmNyZWF0ZVBvbHlnb24oZ2VvbUZhY3QuY3JlYXRlTGluZWFyUmluZyhjb29yZExpc3QudG9BcnJheSgpKSxudWxsKTt2PXN0YXJ0UUUub3JpZygpO3JldHVybiBjZWxsUG9seTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVDaXJjdW1jZW50cmVWaXNpdG9yPWZ1bmN0aW9uKCl7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlQ2lyY3VtY2VudHJlVmlzaXRvci5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24odHJpRWRnZXMpe3ZhciBhLGIsYyxjYyxjY1ZlcnRleCxpO2E9dHJpRWRnZXNbMF0ub3JpZygpLmdldENvb3JkaW5hdGUoKTtiPXRyaUVkZ2VzWzFdLm9yaWcoKS5nZXRDb29yZGluYXRlKCk7Yz10cmlFZGdlc1syXS5vcmlnKCkuZ2V0Q29vcmRpbmF0ZSgpO2NjPWpzdHMuZ2VvbS5UcmlhbmdsZS5jaXJjdW1jZW50cmUoYSxiLGMpO2NjVmVydGV4PW5ldyBqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlZlcnRleChjYyk7aT0wO2ZvcihpO2k8MztpKyspe3RyaUVkZ2VzW2ldLnJvdC5zZXRPcmlnKGNjVmVydGV4KTt9fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlRWRnZXNMaXN0VmlzaXRvcj1mdW5jdGlvbigpe3RoaXMudHJpTGlzdD1bXTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVFZGdlc0xpc3RWaXNpdG9yLnByb3RvdHlwZS52aXNpdD1mdW5jdGlvbih0cmlFZGdlcyl7dmFyIGNsb25lPXRyaUVkZ2VzLmNvbmNhdCgpO3RoaXMudHJpTGlzdC5wdXNoKGNsb25lKTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVFZGdlc0xpc3RWaXNpdG9yLnByb3RvdHlwZS5nZXRUcmlhbmdsZUVkZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpTGlzdDt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVWZXJ0ZXhMaXN0VmlzaXRvcj1mdW5jdGlvbigpe3RoaXMudHJpTGlzdD1bXTt9O2pzdHMudHJpYW5ndWxhdGUucXVhZGVkZ2UuVHJpYW5nbGVWZXJ0ZXhMaXN0VmlzaXRvci5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24odHJpRWRnZXMpe3ZhciB2ZXJ0aWNlcz1bXTt2ZXJ0aWNlcy5wdXNoKHRyaWVFZGdlc1swXS5vcmlnKCkpO3ZlcnRpY2VzLnB1c2godHJpZUVkZ2VzWzFdLm9yaWcoKSk7dmVydGljZXMucHVzaCh0cmllRWRnZXNbMl0ub3JpZygpKTt0aGlzLnRyaUxpc3QucHVzaCh2ZXJ0aWNlcyk7fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlVmVydGV4TGlzdFZpc2l0b3IucHJvdG90eXBlLmdldFRyaWFuZ2xlVmVydGljZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmlMaXN0O307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZUNvb3JkaW5hdGVzVmlzaXRvcj1mdW5jdGlvbigpe3RoaXMuY29vcmRMaXN0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZUxpc3QoW10sZmFsc2UpO3RoaXMudHJpQ29vcmRzPVtdO307anN0cy50cmlhbmd1bGF0ZS5xdWFkZWRnZS5UcmlhbmdsZUNvb3JkaW5hdGVzVmlzaXRvci5wcm90b3R5cGUudmlzaXQ9ZnVuY3Rpb24odHJpRWRnZXMpe3RoaXMuY29vcmRMaXN0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZUxpc3QoW10sZmFsc2UpO3ZhciBpPTAsdixwdHM7Zm9yKGk7aTwzO2krKyl7dj10cmlFZGdlc1tpXS5vcmlnKCk7dGhpcy5jb29yZExpc3QuYWRkKHYuZ2V0Q29vcmRpbmF0ZSgpKTt9XG5pZih0aGlzLmNvb3JkTGlzdC5zaXplKCk+MCl7dGhpcy5jb29yZExpc3QuY2xvc2VSaW5nKCk7cHRzPXRoaXMuY29vcmRMaXN0LnRvQXJyYXkoKTtpZihwdHMubGVuZ3RoIT09NCl7cmV0dXJuO31cbnRoaXMudHJpQ29vcmRzLnB1c2gocHRzKTt9fTtqc3RzLnRyaWFuZ3VsYXRlLnF1YWRlZGdlLlRyaWFuZ2xlQ29vcmRpbmF0ZXNWaXNpdG9yLnByb3RvdHlwZS5nZXRUcmlhbmdsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmlDb29yZHM7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1bmRsZT1mdW5jdGlvbigpe3RoaXMuZWRnZUVuZHM9W107dmFyIGU9YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBqc3RzLmdlb21ncmFwaC5FZGdlRW5kP2FyZ3VtZW50c1swXTphcmd1bWVudHNbMV07dmFyIGVkZ2U9ZS5nZXRFZGdlKCk7dmFyIGNvb3JkPWUuZ2V0Q29vcmRpbmF0ZSgpO3ZhciBkaXJDb29yZD1lLmdldERpcmVjdGVkQ29vcmRpbmF0ZSgpO3ZhciBsYWJlbD1uZXcganN0cy5nZW9tZ3JhcGguTGFiZWwoZS5nZXRMYWJlbCgpKTtqc3RzLmdlb21ncmFwaC5FZGdlRW5kLmNhbGwodGhpcyxlZGdlLGNvb3JkLGRpckNvb3JkLGxhYmVsKTt0aGlzLmluc2VydChlKTt9O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVuZGxlLnByb3RvdHlwZT1uZXcganN0cy5nZW9tZ3JhcGguRWRnZUVuZCgpO2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVuZGxlLnByb3RvdHlwZS5lZGdlRW5kcz1udWxsO2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVuZGxlLnByb3RvdHlwZS5nZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxhYmVsO307anN0cy5vcGVyYXRpb24ucmVsYXRlLkVkZ2VFbmRCdW5kbGUucHJvdG90eXBlLmdldEVkZ2VFbmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZUVuZHM7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1bmRsZS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKGUpe3RoaXMuZWRnZUVuZHMucHVzaChlKTt9O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVuZGxlLnByb3RvdHlwZS5jb21wdXRlTGFiZWw9ZnVuY3Rpb24oYm91bmRhcnlOb2RlUnVsZSl7dmFyIGlzQXJlYT1mYWxzZTtmb3IodmFyIGk9MDtpPHRoaXMuZWRnZUVuZHMubGVuZ3RoO2krKyl7dmFyIGU9dGhpcy5lZGdlRW5kc1tpXTtpZihlLmdldExhYmVsKCkuaXNBcmVhKCkpXG5pc0FyZWE9dHJ1ZTt9XG5pZihpc0FyZWEpXG50aGlzLmxhYmVsPW5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbChqc3RzLmdlb20uTG9jYXRpb24uTk9ORSxqc3RzLmdlb20uTG9jYXRpb24uTk9ORSxqc3RzLmdlb20uTG9jYXRpb24uTk9ORSk7ZWxzZVxudGhpcy5sYWJlbD1uZXcganN0cy5nZW9tZ3JhcGguTGFiZWwoanN0cy5nZW9tLkxvY2F0aW9uLk5PTkUpO2Zvcih2YXIgaT0wO2k8MjtpKyspe3RoaXMuY29tcHV0ZUxhYmVsT24oaSxib3VuZGFyeU5vZGVSdWxlKTtpZihpc0FyZWEpXG50aGlzLmNvbXB1dGVMYWJlbFNpZGVzKGkpO319O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVuZGxlLnByb3RvdHlwZS5jb21wdXRlTGFiZWxPbj1mdW5jdGlvbihnZW9tSW5kZXgsYm91bmRhcnlOb2RlUnVsZSl7dmFyIGJvdW5kYXJ5Q291bnQ9MDt2YXIgZm91bmRJbnRlcmlvcj1mYWxzZTtmb3IodmFyIGk9MDtpPHRoaXMuZWRnZUVuZHMubGVuZ3RoO2krKyl7dmFyIGU9dGhpcy5lZGdlRW5kc1tpXTt2YXIgbG9jPWUuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbihnZW9tSW5kZXgpO2lmKGxvYz09anN0cy5nZW9tLkxvY2F0aW9uLkJPVU5EQVJZKVxuYm91bmRhcnlDb3VudCsrO2lmKGxvYz09anN0cy5nZW9tLkxvY2F0aW9uLklOVEVSSU9SKVxuZm91bmRJbnRlcmlvcj10cnVlO31cbnZhciBsb2M9anN0cy5nZW9tLkxvY2F0aW9uLk5PTkU7aWYoZm91bmRJbnRlcmlvcilcbmxvYz1qc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1I7aWYoYm91bmRhcnlDb3VudD4wKXtsb2M9anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5kZXRlcm1pbmVCb3VuZGFyeShib3VuZGFyeU5vZGVSdWxlLGJvdW5kYXJ5Q291bnQpO31cbnRoaXMubGFiZWwuc2V0TG9jYXRpb24oZ2VvbUluZGV4LGxvYyk7fTtqc3RzLm9wZXJhdGlvbi5yZWxhdGUuRWRnZUVuZEJ1bmRsZS5wcm90b3R5cGUuY29tcHV0ZUxhYmVsU2lkZXM9ZnVuY3Rpb24oZ2VvbUluZGV4KXt0aGlzLmNvbXB1dGVMYWJlbFNpZGUoZ2VvbUluZGV4LGpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uLkxFRlQpO3RoaXMuY29tcHV0ZUxhYmVsU2lkZShnZW9tSW5kZXgsanN0cy5nZW9tZ3JhcGguUG9zaXRpb24uUklHSFQpO307anN0cy5vcGVyYXRpb24ucmVsYXRlLkVkZ2VFbmRCdW5kbGUucHJvdG90eXBlLmNvbXB1dGVMYWJlbFNpZGU9ZnVuY3Rpb24oZ2VvbUluZGV4LHNpZGUpe2Zvcih2YXIgaT0wO2k8dGhpcy5lZGdlRW5kcy5sZW5ndGg7aSsrKXt2YXIgZT10aGlzLmVkZ2VFbmRzW2ldO2lmKGUuZ2V0TGFiZWwoKS5pc0FyZWEoKSl7dmFyIGxvYz1lLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oZ2VvbUluZGV4LHNpZGUpO2lmKGxvYz09PWpzdHMuZ2VvbS5Mb2NhdGlvbi5JTlRFUklPUil7dGhpcy5sYWJlbC5zZXRMb2NhdGlvbihnZW9tSW5kZXgsc2lkZSxqc3RzLmdlb20uTG9jYXRpb24uSU5URVJJT1IpO3JldHVybjt9ZWxzZSBpZihsb2M9PT1qc3RzLmdlb20uTG9jYXRpb24uRVhURVJJT1IpXG50aGlzLmxhYmVsLnNldExvY2F0aW9uKGdlb21JbmRleCxzaWRlLGpzdHMuZ2VvbS5Mb2NhdGlvbi5FWFRFUklPUik7fX19O2pzdHMub3BlcmF0aW9uLnJlbGF0ZS5FZGdlRW5kQnVuZGxlLnByb3RvdHlwZS51cGRhdGVJTT1mdW5jdGlvbihpbSl7anN0cy5nZW9tZ3JhcGguRWRnZS51cGRhdGVJTSh0aGlzLmxhYmVsLGltKTt9O2pzdHMuaW5kZXgua2R0cmVlLktkVHJlZT1mdW5jdGlvbih0b2xlcmFuY2Upe3ZhciB0b2w9MC4wO2lmKHRvbGVyYW5jZSE9PXVuZGVmaW5lZCl7dG9sPXRvbGVyYW5jZTt9XG50aGlzLnJvb3Q9bnVsbDt0aGlzLmxhc3Q9bnVsbDt0aGlzLm51bWJlck9mTm9kZXM9MDt0aGlzLnRvbGVyYW5jZT10b2w7fTtqc3RzLmluZGV4LmtkdHJlZS5LZFRyZWUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtyZXR1cm4gdGhpcy5pbnNlcnRDb29yZGluYXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzWzBdKTt9ZWxzZXtyZXR1cm4gdGhpcy5pbnNlcnRXaXRoRGF0YS5hcHBseSh0aGlzLGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pO319O2pzdHMuaW5kZXgua2R0cmVlLktkVHJlZS5wcm90b3R5cGUuaW5zZXJ0Q29vcmRpbmF0ZT1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5pbnNlcnRXaXRoRGF0YShwLG51bGwpO307anN0cy5pbmRleC5rZHRyZWUuS2RUcmVlLnByb3RvdHlwZS5pbnNlcnRXaXRoRGF0YT1mdW5jdGlvbihwLGRhdGEpe2lmKHRoaXMucm9vdD09PW51bGwpe3RoaXMucm9vdD1uZXcganN0cy5pbmRleC5rZHRyZWUuS2ROb2RlKHAsZGF0YSk7cmV0dXJuIHRoaXMucm9vdDt9XG52YXIgY3VycmVudE5vZGU9dGhpcy5yb290LGxlYWZOb2RlPXRoaXMucm9vdCxpc09kZExldmVsPXRydWUsaXNMZXNzVGhhbj10cnVlO3doaWxlKGN1cnJlbnROb2RlIT09bGFzdCl7aWYoaXNPZGRMZXZlbCl7aXNMZXNzVGhhbj1wLng8Y3VycmVudE5vZGUuZ2V0WCgpO31lbHNle2lzTGVzc1RoYW49cC55PGN1cnJlbnROb2RlLmdldFkoKTt9XG5sZWFmTm9kZT1jdXJyZW50Tm9kZTtpZihpc0xlc3NUaGFuKXtjdXJyZW50Tm9kZT1jdXJyZW50Tm9kZS5nZXRMZWZ0KCk7fWVsc2V7Y3VycmVudE5vZGU9Y3VycmVudE5vZGUuZ2V0UmlnaHQoKTt9XG5pZihjdXJyZW50Tm9kZSE9PW51bGwpe3ZhciBpc0luVG9sZXJhbmNlPXAuZGlzdGFuY2UoY3VycmVudE5vZGUuZ2V0Q29vcmRpbmF0ZSgpKTw9dGhpcy50b2xlcmFuY2U7aWYoaXNJblRvbGVyYW5jZSl7Y3VycmVudE5vZGUuaW5jcmVtZW50KCk7cmV0dXJuIGN1cnJlbnROb2RlO319XG5pc09kZExldmVsPSFpc09kZExldmVsO31cbnRoaXMubnVtYmVyT2ZOb2Rlcz1udW1iZXJPZk5vZGVzKzE7dmFyIG5vZGU9bmV3IGpzdHMuaW5kZXgua2R0cmVlLktkTm9kZShwLGRhdGEpO25vZGUuc2V0TGVmdCh0aGlzLmxhc3QpO25vZGUuc2V0UmlnaHQodGhpcy5sYXN0KTtpZihpc0xlc3NUaGFuKXtsZWFmTm9kZS5zZXRMZWZ0KG5vZGUpO31lbHNle2xlYWZOb2RlLnNldFJpZ2h0KG5vZGUpO31cbnJldHVybiBub2RlO307anN0cy5pbmRleC5rZHRyZWUuS2RUcmVlLnByb3RvdHlwZS5xdWVyeU5vZGU9ZnVuY3Rpb24oY3VycmVudE5vZGUsYm90dG9tTm9kZSxxdWVyeUVudixvZGQscmVzdWx0KXtpZihjdXJyZW50Tm9kZT09PWJvdHRvbU5vZGUpe3JldHVybjt9XG52YXIgbWluLG1heCxkaXNjcmltaW5hbnQ7aWYob2RkKXttaW49cXVlcnlFbnYuZ2V0TWluWCgpO21heD1xdWVyeUVudi5nZXRNYXhYKCk7ZGlzY3JpbWluYW50PWN1cnJlbnROb2RlLmdldFgoKTt9ZWxzZXttaW49cXVlcnlFbnYuZ2V0TWluWSgpO21heD1xdWVyeUVudi5nZXRNYXhZKCk7ZGlzY3JpbWluYW50PWN1cnJlbnROb2RlLmdldFkoKTt9XG52YXIgc2VhcmNoTGVmdD1taW48ZGlzY3JpbWluYW50O3ZhciBzZWFyY2hSaWdodD1kaXNjcmltaW5hbnQ8PW1heDtpZihzZWFyY2hMZWZ0KXt0aGlzLnF1ZXJ5Tm9kZShjdXJyZW50Tm9kZS5nZXRMZWZ0KCksYm90dG9tTm9kZSxxdWVyeUVudiwhb2RkLHJlc3VsdCk7fVxuaWYocXVlcnlFbnYuY29udGFpbnMoY3VycmVudE5vZGUuZ2V0Q29vcmRpbmF0ZSgpKSl7cmVzdWx0LmFkZChjdXJyZW50Tm9kZSk7fVxuaWYoc2VhcmNoUmlnaHQpe3RoaXMucXVlcnlOb2RlKGN1cnJlbnROb2RlLmdldFJpZ2h0KCksYm90dG9tTm9kZSxxdWVyeUVudiwhb2RkLHJlc3VsdCk7fX07anN0cy5pbmRleC5rZHRyZWUuS2RUcmVlLnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtyZXR1cm4gdGhpcy5xdWVyeUJ5RW52ZWxvcGUuYXBwbHkodGhpcyxhcmd1bWVudHNbMF0pO31lbHNle3JldHVybiB0aGlzLnF1ZXJ5V2l0aEFycmF5LmFwcGx5KHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7fX07anN0cy5pbmRleC5rZHRyZWUuS2RUcmVlLnByb3RvdHlwZS5xdWVyeUJ5RW52ZWxvcGU9ZnVuY3Rpb24ocXVlcnlFbnYpe3ZhciByZXN1bHQ9W107dGhpcy5xdWVyeU5vZGUodGhpcy5yb290LHRoaXMubGFzdCxxdWVyeUVudix0cnVlLHJlc3VsdCk7cmV0dXJuIHJlc3VsdDt9O2pzdHMuaW5kZXgua2R0cmVlLktkVHJlZS5wcm90b3R5cGUucXVlcnlXaXRoQXJyYXk9ZnVuY3Rpb24ocXVlcnlFbnYscmVzdWx0KXt0aGlzLnF1ZXJ5Tm9kZSh0aGlzLnJvb3QsdGhpcy5sYXN0LHF1ZXJ5RW52LHRydWUscmVzdWx0KTt9O2pzdHMuZ2VvbS5UcmlhbmdsZT1mdW5jdGlvbihwMCxwMSxwMil7dGhpcy5wMD1wMDt0aGlzLnAxPXAxO3RoaXMucDI9cDI7fTtqc3RzLmdlb20uVHJpYW5nbGUuaXNBY3V0ZT1mdW5jdGlvbihhLGIsYyl7aWYoIWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmlzQWN1dGUoYSxiLGMpKXtyZXR1cm4gZmFsc2U7fVxuaWYoIWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmlzQWN1dGUoYixjLGEpKXtyZXR1cm4gZmFsc2U7fVxuaWYoIWpzdHMuYWxnb3JpdGhtLkFuZ2xlLmlzQWN1dGUoYyxhLGIpKXtyZXR1cm4gZmFsc2U7fVxucmV0dXJuIHRydWU7fTtqc3RzLmdlb20uVHJpYW5nbGUucGVycGVuZGljdWxhckJpc2VjdG9yPWZ1bmN0aW9uKGEsYil7dmFyIGR4LGR5LGwxLGwyO2R4PWIueC1hLng7ZHk9Yi55LWEueTtsMT1uZXcganN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUoYS54K2R4LzIuMCxhLnkrZHkvMi4wLDEuMCk7bDI9bmV3IGpzdHMuYWxnb3JpdGhtLkhDb29yZGluYXRlKGEueC1keStkeC8yLjAsYS55K2R4K2R5LzIuMCwxLjApO3JldHVybiBuZXcganN0cy5hbGdvcml0aG0uSENvb3JkaW5hdGUobDEsbDIpO307anN0cy5nZW9tLlRyaWFuZ2xlLmNpcmN1bWNlbnRyZT1mdW5jdGlvbihhLGIsYyl7dmFyIGN4LGN5LGF4LGF5LGJ4LGJ5LGRlbm9tLG51bXgsbnVteSxjY3gsY2N5O2N4PWMueDtjeT1jLnk7YXg9YS54LWN4O2F5PWEueS1jeTtieD1iLngtY3g7Ynk9Yi55LWN5O2Rlbm9tPTIqanN0cy5nZW9tLlRyaWFuZ2xlLmRldChheCxheSxieCxieSk7bnVteD1qc3RzLmdlb20uVHJpYW5nbGUuZGV0KGF5LGF4KmF4K2F5KmF5LGJ5LGJ4KmJ4K2J5KmJ5KTtudW15PWpzdHMuZ2VvbS5UcmlhbmdsZS5kZXQoYXgsYXgqYXgrYXkqYXksYngsYngqYngrYnkqYnkpO2NjeD1jeC1udW14L2Rlbm9tO2NjeT1jeStudW15L2Rlbm9tO3JldHVybiBuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoY2N4LGNjeSk7fTtqc3RzLmdlb20uVHJpYW5nbGUuZGV0PWZ1bmN0aW9uKG0wMCxtMDEsbTEwLG0xMSl7cmV0dXJuIG0wMCptMTEtbTAxKm0xMDt9O2pzdHMuZ2VvbS5UcmlhbmdsZS5pbkNlbnRyZT1mdW5jdGlvbihhLGIsYyl7dmFyIGxlbjAsbGVuMSxsZW4yLGNpcmN1bSxpbkNlbnRyZVgsaW5DZW50cmVZO2xlbjA9Yi5kaXN0YW5jZShjKTtsZW4xPWEuZGlzdGFuY2UoYyk7bGVuMj1hLmRpc3RhbmNlKGIpO2NpcmN1bT1sZW4wK2xlbjErbGVuMjtpbkNlbnRyZVg9KGxlbjAqYS54K2xlbjEqYi54K2xlbjIqYy54KS9jaXJjdW07aW5DZW50cmVZPShsZW4wKmEueStsZW4xKmIueStsZW4yKmMueSkvY2lyY3VtO3JldHVybiBuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoaW5DZW50cmVYLGluQ2VudHJlWSk7fTtqc3RzLmdlb20uVHJpYW5nbGUuY2VudHJvaWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciB4LHk7eD0oYS54K2IueCtjLngpLzM7eT0oYS55K2IueStjLnkpLzM7cmV0dXJuIG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh4LHkpO307anN0cy5nZW9tLlRyaWFuZ2xlLmxvbmdlc3RTaWRlTGVuZ3RoPWZ1bmN0aW9uKGEsYixjKXt2YXIgbGVuQUIsbGVuQkMsbGVuQ0EsbWF4TGVuO2xlbkFCPWEuZGlzdGFuY2UoYik7bGVuQkM9Yi5kaXN0YW5jZShjKTtsZW5DQT1jLmRpc3RhbmNlKGEpO21heExlbj1sZW5BQjtpZihsZW5CQz5tYXhMZW4pe21heExlbj1sZW5CQzt9XG5pZihsZW5DQT5tYXhMZW4pe21heExlbj1sZW5DQTt9XG5yZXR1cm4gbWF4TGVuO307anN0cy5nZW9tLlRyaWFuZ2xlLmFuZ2xlQmlzZWN0b3I9ZnVuY3Rpb24oYSxiLGMpe3ZhciBsZW4wLGxlbjIsZnJhYyxkeCxkeSxzcGxpdFB0O2xlbjA9Yi5kaXN0YW5jZShhKTtsZW4yPWIuZGlzdGFuY2UoYyk7ZnJhYz1sZW4wLyhsZW4wK2xlbjIpO2R4PWMueC1hLng7ZHk9Yy55LWEueTtzcGxpdFB0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShhLngrZnJhYypkeCxhLnkrZnJhYypkeSk7cmV0dXJuIHNwbGl0UHQ7fTtqc3RzLmdlb20uVHJpYW5nbGUuYXJlYT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIE1hdGguYWJzKCgoYy54LWEueCkqKGIueS1hLnkpLShiLngtYS54KSooYy55LWEueSkpLzIuMCk7fTtqc3RzLmdlb20uVHJpYW5nbGUuc2lnbmVkQXJlYT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuKChjLngtYS54KSooYi55LWEueSktKGIueC1hLngpKihjLnktYS55KSkvMi4wO307anN0cy5nZW9tLlRyaWFuZ2xlLnByb3RvdHlwZS5pbkNlbnRyZT1mdW5jdGlvbigpe3JldHVybiBqc3RzLmdlb20uVHJpYW5nbGUuaW5DZW50cmUodGhpcy5wMCx0aGlzLnAxLHRoaXMucDIpO307anN0cy5ub2RpbmcuT3JpZW50ZWRDb29yZGluYXRlQXJyYXk9ZnVuY3Rpb24ocHRzKXt0aGlzLnB0cz1wdHM7dGhpcy5fb3JpZW50YXRpb249anN0cy5ub2RpbmcuT3JpZW50ZWRDb29yZGluYXRlQXJyYXkub3JpZW50YXRpb24ocHRzKTt9O2pzdHMubm9kaW5nLk9yaWVudGVkQ29vcmRpbmF0ZUFycmF5LnByb3RvdHlwZS5wdHM9bnVsbDtqc3RzLm5vZGluZy5PcmllbnRlZENvb3JkaW5hdGVBcnJheS5wcm90b3R5cGUuX29yaWVudGF0aW9uPXVuZGVmaW5lZDtqc3RzLm5vZGluZy5PcmllbnRlZENvb3JkaW5hdGVBcnJheS5vcmllbnRhdGlvbj1mdW5jdGlvbihwdHMpe3JldHVybiBqc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5pbmNyZWFzaW5nRGlyZWN0aW9uKHB0cyk9PT0xO307anN0cy5ub2RpbmcuT3JpZW50ZWRDb29yZGluYXRlQXJyYXkucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbihvMSl7dmFyIG9jYT1vMTt2YXIgY29tcD1qc3RzLm5vZGluZy5PcmllbnRlZENvb3JkaW5hdGVBcnJheS5jb21wYXJlT3JpZW50ZWQodGhpcy5wdHMsdGhpcy5fb3JpZW50YXRpb24sb2NhLnB0cyxvY2EuX29yaWVudGF0aW9uKTtyZXR1cm4gY29tcDt9O2pzdHMubm9kaW5nLk9yaWVudGVkQ29vcmRpbmF0ZUFycmF5LmNvbXBhcmVPcmllbnRlZD1mdW5jdGlvbihwdHMxLG9yaWVudGF0aW9uMSxwdHMyLG9yaWVudGF0aW9uMil7dmFyIGRpcjE9b3JpZW50YXRpb24xPzE6LTE7dmFyIGRpcjI9b3JpZW50YXRpb24yPzE6LTE7dmFyIGxpbWl0MT1vcmllbnRhdGlvbjE/cHRzMS5sZW5ndGg6LTE7dmFyIGxpbWl0Mj1vcmllbnRhdGlvbjI/cHRzMi5sZW5ndGg6LTE7dmFyIGkxPW9yaWVudGF0aW9uMT8wOnB0czEubGVuZ3RoLTE7dmFyIGkyPW9yaWVudGF0aW9uMj8wOnB0czIubGVuZ3RoLTE7dmFyIGNvbXA9MDt3aGlsZSh0cnVlKXt2YXIgY29tcFB0PXB0czFbaTFdLmNvbXBhcmVUbyhwdHMyW2kyXSk7aWYoY29tcFB0IT09MClcbnJldHVybiBjb21wUHQ7aTErPWRpcjE7aTIrPWRpcjI7dmFyIGRvbmUxPWkxPT09bGltaXQxO3ZhciBkb25lMj1pMj09PWxpbWl0MjtpZihkb25lMSYmIWRvbmUyKVxucmV0dXJuLTE7aWYoIWRvbmUxJiZkb25lMilcbnJldHVybiAxO2lmKGRvbmUxJiZkb25lMilcbnJldHVybiAwO319O2pzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yPWZ1bmN0aW9uKHAwMCxwMDEscDEwLHAxMSl7dGhpcy5wdHM9W3AwMCxwMDEscDEwLHAxMV07dGhpcy5jb21wdXRlKCk7fTtqc3RzLmFsZ29yaXRobS5DZW50cmFsRW5kcG9pbnRJbnRlcnNlY3Rvci5nZXRJbnRlcnNlY3Rpb249ZnVuY3Rpb24ocDAwLHAwMSxwMTAscDExKXt2YXIgaW50b3I9bmV3IGpzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yKHAwMCxwMDEscDEwLHAxMSk7cmV0dXJuIGludG9yLmdldEludGVyc2VjdGlvbigpO307anN0cy5hbGdvcml0aG0uQ2VudHJhbEVuZHBvaW50SW50ZXJzZWN0b3IucHJvdG90eXBlLnB0cz1udWxsO2pzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yLnByb3RvdHlwZS5pbnRQdD1udWxsO2pzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yLnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKCl7dmFyIGNlbnRyb2lkPWpzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yLmF2ZXJhZ2UodGhpcy5wdHMpO3RoaXMuaW50UHQ9dGhpcy5maW5kTmVhcmVzdFBvaW50KGNlbnRyb2lkLHRoaXMucHRzKTt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yLnByb3RvdHlwZS5nZXRJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRQdDt9O2pzdHMuYWxnb3JpdGhtLkNlbnRyYWxFbmRwb2ludEludGVyc2VjdG9yLmF2ZXJhZ2U9ZnVuY3Rpb24ocHRzKXt2YXIgYXZnPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSgpO3ZhciBpLG49cHRzLmxlbmd0aDtmb3IoaT0wO2k8bjtpKyspe2F2Zy54Kz1wdHNbaV0ueDthdmcueSs9cHRzW2ldLnk7fVxuaWYobj4wKXthdmcueC89bjthdmcueS89bjt9XG5yZXR1cm4gYXZnO307anN0cy5hbGdvcml0aG0uQ2VudHJhbEVuZHBvaW50SW50ZXJzZWN0b3IucHJvdG90eXBlLmZpbmROZWFyZXN0UG9pbnQ9ZnVuY3Rpb24ocCxwdHMpe3ZhciBtaW5EaXN0PU51bWJlci5NQVhfVkFMVUU7dmFyIGkscmVzdWx0PW51bGwsZGlzdDtmb3IoaT0wO2k8cHRzLmxlbmd0aDtpKyspe2Rpc3Q9cC5kaXN0YW5jZShwdHNbaV0pO2lmKGRpc3Q8bWluRGlzdCl7bWluRGlzdD1kaXN0O3Jlc3VsdD1wdHNbaV07fX1cbnJldHVybiByZXN1bHQ7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3A9ZnVuY3Rpb24oZyxidWZQYXJhbXMpe3RoaXMuYXJnR2VvbT1nO3RoaXMuYnVmUGFyYW1zPWJ1ZlBhcmFtcz9idWZQYXJhbXM6bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJQYXJhbWV0ZXJzKCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AuTUFYX1BSRUNJU0lPTl9ESUdJVFM9MTI7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLnByZWNpc2lvblNjYWxlRmFjdG9yPWZ1bmN0aW9uKGcsZGlzdGFuY2UsbWF4UHJlY2lzaW9uRGlnaXRzKXt2YXIgZW52PWcuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3ZhciBlbnZTaXplPU1hdGgubWF4KGVudi5nZXRIZWlnaHQoKSxlbnYuZ2V0V2lkdGgoKSk7dmFyIGV4cGFuZEJ5RGlzdGFuY2U9ZGlzdGFuY2U+MC4wP2Rpc3RhbmNlOjAuMDt2YXIgYnVmRW52U2l6ZT1lbnZTaXplKzIqZXhwYW5kQnlEaXN0YW5jZTt2YXIgYnVmRW52TG9nMTA9KE1hdGgubG9nKGJ1ZkVudlNpemUpL01hdGgubG9nKDEwKSsxLjApO3ZhciBtaW5Vbml0TG9nMTA9YnVmRW52TG9nMTAtbWF4UHJlY2lzaW9uRGlnaXRzO3ZhciBzY2FsZUZhY3Rvcj1NYXRoLnBvdygxMC4wLC1taW5Vbml0TG9nMTApO3JldHVybiBzY2FsZUZhY3Rvcjt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcC5idWZmZXJPcD1mdW5jdGlvbihnLGRpc3RhbmNlKXtpZihhcmd1bWVudHMubGVuZ3RoPjIpe3JldHVybiBqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AuYnVmZmVyT3AyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG52YXIgZ0J1Zj1uZXcganN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wKGcpO3ZhciBnZW9tQnVmPWdCdWYuZ2V0UmVzdWx0R2VvbWV0cnkoZGlzdGFuY2UpO3JldHVybiBnZW9tQnVmO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLmJ1ZmZlck9wMj1mdW5jdGlvbihnLGRpc3RhbmNlLHBhcmFtcyl7aWYoYXJndW1lbnRzLmxlbmd0aD4zKXtyZXR1cm4ganN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLmJ1ZmZlck9wMy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fVxudmFyIGJ1Zk9wPW5ldyBqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AoZyxwYXJhbXMpO3ZhciBnZW9tQnVmPWJ1Zk9wLmdldFJlc3VsdEdlb21ldHJ5KGRpc3RhbmNlKTtyZXR1cm4gZ2VvbUJ1Zjt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcC5idWZmZXJPcDM9ZnVuY3Rpb24oZyxkaXN0YW5jZSxxdWFkcmFudFNlZ21lbnRzKXtpZihhcmd1bWVudHMubGVuZ3RoPjQpe3JldHVybiBqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AuYnVmZmVyT3A0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9XG52YXIgYnVmT3A9bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcChnKTtidWZPcC5zZXRRdWFkcmFudFNlZ21lbnRzKHF1YWRyYW50U2VnbWVudHMpO3ZhciBnZW9tQnVmPWJ1Zk9wLmdldFJlc3VsdEdlb21ldHJ5KGRpc3RhbmNlKTtyZXR1cm4gZ2VvbUJ1Zjt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcC5idWZmZXJPcDQ9ZnVuY3Rpb24oZyxkaXN0YW5jZSxxdWFkcmFudFNlZ21lbnRzLGVuZENhcFN0eWxlKXt2YXIgYnVmT3A9bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcChnKTtidWZPcC5zZXRRdWFkcmFudFNlZ21lbnRzKHF1YWRyYW50U2VnbWVudHMpO2J1Zk9wLnNldEVuZENhcFN0eWxlKGVuZENhcFN0eWxlKTt2YXIgZ2VvbUJ1Zj1idWZPcC5nZXRSZXN1bHRHZW9tZXRyeShkaXN0YW5jZSk7cmV0dXJuIGdlb21CdWY7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AucHJvdG90eXBlLmFyZ0dlb209bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AucHJvdG90eXBlLmRpc3RhbmNlPW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLnByb3RvdHlwZS5idWZQYXJhbXM9bnVsbDtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AucHJvdG90eXBlLnJlc3VsdEdlb21ldHJ5PW51bGw7anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLnByb3RvdHlwZS5zZXRFbmRDYXBTdHlsZT1mdW5jdGlvbihlbmRDYXBTdHlsZSl7dGhpcy5idWZQYXJhbXMuc2V0RW5kQ2FwU3R5bGUoZW5kQ2FwU3R5bGUpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLnByb3RvdHlwZS5zZXRRdWFkcmFudFNlZ21lbnRzPWZ1bmN0aW9uKHF1YWRyYW50U2VnbWVudHMpe3RoaXMuYnVmUGFyYW1zLnNldFF1YWRyYW50U2VnbWVudHMocXVhZHJhbnRTZWdtZW50cyk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AucHJvdG90eXBlLmdldFJlc3VsdEdlb21ldHJ5PWZ1bmN0aW9uKGRpc3Qpe3RoaXMuZGlzdGFuY2U9ZGlzdDt0aGlzLmNvbXB1dGVHZW9tZXRyeSgpO3JldHVybiB0aGlzLnJlc3VsdEdlb21ldHJ5O307anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLnByb3RvdHlwZS5jb21wdXRlR2VvbWV0cnk9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlck9yaWdpbmFsUHJlY2lzaW9uKCk7aWYodGhpcy5yZXN1bHRHZW9tZXRyeSE9PW51bGwpe3JldHVybjt9XG52YXIgYXJnUE09dGhpcy5hcmdHZW9tLmdldFByZWNpc2lvbk1vZGVsKCk7aWYoYXJnUE0uZ2V0VHlwZSgpPT09anN0cy5nZW9tLlByZWNpc2lvbk1vZGVsLkZJWEVEKXt0aGlzLmJ1ZmZlckZpeGVkUHJlY2lzaW9uKGFyZ1BNKTt9ZWxzZXt0aGlzLmJ1ZmZlclJlZHVjZWRQcmVjaXNpb24oKTt9fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AucHJvdG90eXBlLmJ1ZmZlclJlZHVjZWRQcmVjaXNpb249ZnVuY3Rpb24oKXt2YXIgcHJlY0RpZ2l0czt2YXIgc2F2ZUV4Y2VwdGlvbj1udWxsO2ZvcihwcmVjRGlnaXRzPWpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcC5NQVhfUFJFQ0lTSU9OX0RJR0lUUztwcmVjRGlnaXRzPj0wO3ByZWNEaWdpdHMtLSl7dHJ5e3RoaXMuYnVmZmVyUmVkdWNlZFByZWNpc2lvbjIocHJlY0RpZ2l0cyk7fWNhdGNoKGV4KXtzYXZlRXhjZXB0aW9uPWV4O31cbmlmKHRoaXMucmVzdWx0R2VvbWV0cnkhPT1udWxsKXtyZXR1cm47fX1cbnRocm93IHNhdmVFeGNlcHRpb247fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyT3AucHJvdG90eXBlLmJ1ZmZlck9yaWdpbmFsUHJlY2lzaW9uPWZ1bmN0aW9uKCl7dHJ5e3ZhciBidWZCdWlsZGVyPW5ldyBqc3RzLm9wZXJhdGlvbi5idWZmZXIuQnVmZmVyQnVpbGRlcih0aGlzLmJ1ZlBhcmFtcyk7dGhpcy5yZXN1bHRHZW9tZXRyeT1idWZCdWlsZGVyLmJ1ZmZlcih0aGlzLmFyZ0dlb20sdGhpcy5kaXN0YW5jZSk7fWNhdGNoKGUpe319O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcC5wcm90b3R5cGUuYnVmZmVyUmVkdWNlZFByZWNpc2lvbjI9ZnVuY3Rpb24ocHJlY2lzaW9uRGlnaXRzKXt2YXIgc2l6ZUJhc2VkU2NhbGVGYWN0b3I9anN0cy5vcGVyYXRpb24uYnVmZmVyLkJ1ZmZlck9wLnByZWNpc2lvblNjYWxlRmFjdG9yKHRoaXMuYXJnR2VvbSx0aGlzLmRpc3RhbmNlLHByZWNpc2lvbkRpZ2l0cyk7dmFyIGZpeGVkUE09bmV3IGpzdHMuZ2VvbS5QcmVjaXNpb25Nb2RlbChzaXplQmFzZWRTY2FsZUZhY3Rvcik7dGhpcy5idWZmZXJGaXhlZFByZWNpc2lvbihmaXhlZFBNKTt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJPcC5wcm90b3R5cGUuYnVmZmVyRml4ZWRQcmVjaXNpb249ZnVuY3Rpb24oZml4ZWRQTSl7dmFyIG5vZGVyPW5ldyBqc3RzLm5vZGluZy5TY2FsZWROb2RlcihuZXcganN0cy5ub2Rpbmcuc25hcHJvdW5kLk1DSW5kZXhTbmFwUm91bmRlcihuZXcganN0cy5nZW9tLlByZWNpc2lvbk1vZGVsKDEuMCkpLGZpeGVkUE0uZ2V0U2NhbGUoKSk7dmFyIGJ1ZkJ1aWxkZXI9bmV3IGpzdHMub3BlcmF0aW9uLmJ1ZmZlci5CdWZmZXJCdWlsZGVyKHRoaXMuYnVmUGFyYW1zKTtidWZCdWlsZGVyLnNldFdvcmtpbmdQcmVjaXNpb25Nb2RlbChmaXhlZFBNKTtidWZCdWlsZGVyLnNldE5vZGVyKG5vZGVyKTt0aGlzLnJlc3VsdEdlb21ldHJ5PWJ1ZkJ1aWxkZXIuYnVmZmVyKHRoaXMuYXJnR2VvbSx0aGlzLmRpc3RhbmNlKTt9OyhmdW5jdGlvbigpe3ZhciBMb2NhdGlvbj1qc3RzLmdlb20uTG9jYXRpb247dmFyIFBvc2l0aW9uPWpzdHMuZ2VvbWdyYXBoLlBvc2l0aW9uO3ZhciBBc3NlcnQ9anN0cy51dGlsLkFzc2VydDtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoPWZ1bmN0aW9uKGFyZ0luZGV4LHBhcmVudEdlb20sYm91bmRhcnlOb2RlUnVsZSl7anN0cy5nZW9tZ3JhcGguUGxhbmFyR3JhcGguY2FsbCh0aGlzKTt0aGlzLmxpbmVFZGdlTWFwPW5ldyBqYXZhc2NyaXB0LnV0aWwuSGFzaE1hcCgpO3RoaXMucHRMb2NhdG9yPW5ldyBqc3RzLmFsZ29yaXRobS5Qb2ludExvY2F0b3IoKTt0aGlzLmFyZ0luZGV4PWFyZ0luZGV4O3RoaXMucGFyZW50R2VvbT1wYXJlbnRHZW9tO3RoaXMuYm91bmRhcnlOb2RlUnVsZT1ib3VuZGFyeU5vZGVSdWxlfHxqc3RzLmFsZ29yaXRobS5Cb3VuZGFyeU5vZGVSdWxlLk9HQ19TRlNfQk9VTkRBUllfUlVMRTtpZihwYXJlbnRHZW9tIT09bnVsbCl7dGhpcy5hZGQocGFyZW50R2VvbSk7fX07anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGU9bmV3IGpzdHMuZ2VvbWdyYXBoLlBsYW5hckdyYXBoKCk7anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5jb25zdHJ1Y3Rvcj1qc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoO2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmNyZWF0ZUVkZ2VTZXRJbnRlcnNlY3Rvcj1mdW5jdGlvbigpe3JldHVybiBuZXcganN0cy5nZW9tZ3JhcGguaW5kZXguU2ltcGxlTUNTd2VlcExpbmVJbnRlcnNlY3RvcigpO307anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5kZXRlcm1pbmVCb3VuZGFyeT1mdW5jdGlvbihib3VuZGFyeU5vZGVSdWxlLGJvdW5kYXJ5Q291bnQpe3JldHVybiBib3VuZGFyeU5vZGVSdWxlLmlzSW5Cb3VuZGFyeShib3VuZGFyeUNvdW50KT9Mb2NhdGlvbi5CT1VOREFSWTpMb2NhdGlvbi5JTlRFUklPUjt9O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLnBhcmVudEdlb209bnVsbDtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5saW5lRWRnZU1hcD1udWxsO2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmJvdW5kYXJ5Tm9kZVJ1bGU9bnVsbDtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS51c2VCb3VuZGFyeURldGVybWluYXRpb25SdWxlPXRydWU7anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuYXJnSW5kZXg9bnVsbDtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5ib3VuZGFyeU5vZGVzPW51bGw7anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuaGFzVG9vRmV3UG9pbnRzPWZhbHNlO2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmludmFsaWRQb2ludD1udWxsO2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmFyZWFQdExvY2F0b3I9bnVsbDtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5wdExvY2F0b3I9bnVsbDtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5nZXRHZW9tZXRyeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudEdlb207fTtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5nZXRCb3VuZGFyeU5vZGVzPWZ1bmN0aW9uKCl7aWYodGhpcy5ib3VuZGFyeU5vZGVzPT09bnVsbClcbnRoaXMuYm91bmRhcnlOb2Rlcz10aGlzLm5vZGVzLmdldEJvdW5kYXJ5Tm9kZXModGhpcy5hcmdJbmRleCk7cmV0dXJuIHRoaXMuYm91bmRhcnlOb2Rlczt9O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmdldEJvdW5kYXJ5Tm9kZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib3VuZGFyeU5vZGVSdWxlO307anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuZmluZEVkZ2U9ZnVuY3Rpb24obGluZSl7cmV0dXJuIHRoaXMubGluZUVkZ2VNYXAuZ2V0KGxpbmUpO307anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuY29tcHV0ZVNwbGl0RWRnZXM9ZnVuY3Rpb24oZWRnZWxpc3Qpe2Zvcih2YXIgaT10aGlzLmVkZ2VzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZT1pLm5leHQoKTtlLmVpTGlzdC5hZGRTcGxpdEVkZ2VzKGVkZ2VsaXN0KTt9fVxuanN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGcpe2lmKGcuaXNFbXB0eSgpKXtyZXR1cm47fVxuaWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5NdWx0aVBvbHlnb24pXG50aGlzLnVzZUJvdW5kYXJ5RGV0ZXJtaW5hdGlvblJ1bGU9ZmFsc2U7aWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2x5Z29uKVxudGhpcy5hZGRQb2x5Z29uKGcpO2Vsc2UgaWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lU3RyaW5nKVxudGhpcy5hZGRMaW5lU3RyaW5nKGcpO2Vsc2UgaWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5Qb2ludClcbnRoaXMuYWRkUG9pbnQoZyk7ZWxzZSBpZihnIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9pbnQpXG50aGlzLmFkZENvbGxlY3Rpb24oZyk7ZWxzZSBpZihnIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpTGluZVN0cmluZylcbnRoaXMuYWRkQ29sbGVjdGlvbihnKTtlbHNlIGlmKGcgaW5zdGFuY2VvZiBqc3RzLmdlb20uTXVsdGlQb2x5Z29uKVxudGhpcy5hZGRDb2xsZWN0aW9uKGcpO2Vsc2UgaWYoZyBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb24pXG50aGlzLmFkZENvbGxlY3Rpb24oZyk7ZWxzZVxudGhyb3cgbmV3IGpzdHMuZXJyb3IuSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ0dlb21ldHJ5IHR5cGUgbm90IHN1cHBvcnRlZC4nKTt9O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmFkZENvbGxlY3Rpb249ZnVuY3Rpb24oZ2Mpe2Zvcih2YXIgaT0wO2k8Z2MuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIGc9Z2MuZ2V0R2VvbWV0cnlOKGkpO3RoaXMuYWRkKGcpO319O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmFkZEVkZ2U9ZnVuY3Rpb24oZSl7dGhpcy5pbnNlcnRFZGdlKGUpO3ZhciBjb29yZD1lLmdldENvb3JkaW5hdGVzKCk7dGhpcy5pbnNlcnRQb2ludCh0aGlzLmFyZ0luZGV4LGNvb3JkWzBdLExvY2F0aW9uLkJPVU5EQVJZKTt0aGlzLmluc2VydFBvaW50KHRoaXMuYXJnSW5kZXgsY29vcmRbY29vcmQubGVuZ3RoLTFdLExvY2F0aW9uLkJPVU5EQVJZKTt9O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmFkZFBvaW50PWZ1bmN0aW9uKHApe3ZhciBjb29yZD1wLmdldENvb3JkaW5hdGUoKTt0aGlzLmluc2VydFBvaW50KHRoaXMuYXJnSW5kZXgsY29vcmQsTG9jYXRpb24uSU5URVJJT1IpO307anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuYWRkTGluZVN0cmluZz1mdW5jdGlvbihsaW5lKXt2YXIgY29vcmQ9anN0cy5nZW9tLkNvb3JkaW5hdGVBcnJheXMucmVtb3ZlUmVwZWF0ZWRQb2ludHMobGluZS5nZXRDb29yZGluYXRlcygpKTtpZihjb29yZC5sZW5ndGg8Mil7dGhpcy5oYXNUb29GZXdQb2ludHM9dHJ1ZTt0aGlzLmludmFsaWRQb2ludD1jb29yZHNbMF07cmV0dXJuO31cbnZhciBlPW5ldyBqc3RzLmdlb21ncmFwaC5FZGdlKGNvb3JkLG5ldyBqc3RzLmdlb21ncmFwaC5MYWJlbCh0aGlzLmFyZ0luZGV4LExvY2F0aW9uLklOVEVSSU9SKSk7dGhpcy5saW5lRWRnZU1hcC5wdXQobGluZSxlKTt0aGlzLmluc2VydEVkZ2UoZSk7QXNzZXJ0LmlzVHJ1ZShjb29yZC5sZW5ndGg+PTIsJ2ZvdW5kIExpbmVTdHJpbmcgd2l0aCBzaW5nbGUgcG9pbnQnKTt0aGlzLmluc2VydEJvdW5kYXJ5UG9pbnQodGhpcy5hcmdJbmRleCxjb29yZFswXSk7dGhpcy5pbnNlcnRCb3VuZGFyeVBvaW50KHRoaXMuYXJnSW5kZXgsY29vcmRbY29vcmQubGVuZ3RoLTFdKTt9O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmFkZFBvbHlnb25SaW5nPWZ1bmN0aW9uKGxyLGN3TGVmdCxjd1JpZ2h0KXtpZihsci5pc0VtcHR5KCkpXG5yZXR1cm47dmFyIGNvb3JkPWpzdHMuZ2VvbS5Db29yZGluYXRlQXJyYXlzLnJlbW92ZVJlcGVhdGVkUG9pbnRzKGxyLmdldENvb3JkaW5hdGVzKCkpO2lmKGNvb3JkLmxlbmd0aDw0KXt0aGlzLmhhc1Rvb0Zld1BvaW50cz10cnVlO3RoaXMuaW52YWxpZFBvaW50PWNvb3JkWzBdO3JldHVybjt9XG52YXIgbGVmdD1jd0xlZnQ7dmFyIHJpZ2h0PWN3UmlnaHQ7aWYoanN0cy5hbGdvcml0aG0uQ0dBbGdvcml0aG1zLmlzQ0NXKGNvb3JkKSl7bGVmdD1jd1JpZ2h0O3JpZ2h0PWN3TGVmdDt9XG52YXIgZT1uZXcganN0cy5nZW9tZ3JhcGguRWRnZShjb29yZCxuZXcganN0cy5nZW9tZ3JhcGguTGFiZWwodGhpcy5hcmdJbmRleCxMb2NhdGlvbi5CT1VOREFSWSxsZWZ0LHJpZ2h0KSk7dGhpcy5saW5lRWRnZU1hcC5wdXQobHIsZSk7dGhpcy5pbnNlcnRFZGdlKGUpO3RoaXMuaW5zZXJ0UG9pbnQodGhpcy5hcmdJbmRleCxjb29yZFswXSxMb2NhdGlvbi5CT1VOREFSWSk7fTtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5hZGRQb2x5Z29uPWZ1bmN0aW9uKHApe3RoaXMuYWRkUG9seWdvblJpbmcocC5nZXRFeHRlcmlvclJpbmcoKSxMb2NhdGlvbi5FWFRFUklPUixMb2NhdGlvbi5JTlRFUklPUik7Zm9yKHZhciBpPTA7aTxwLmdldE51bUludGVyaW9yUmluZygpO2krKyl7dmFyIGhvbGU9cC5nZXRJbnRlcmlvclJpbmdOKGkpO3RoaXMuYWRkUG9seWdvblJpbmcoaG9sZSxMb2NhdGlvbi5JTlRFUklPUixMb2NhdGlvbi5FWFRFUklPUik7fX07anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuY29tcHV0ZUVkZ2VJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKGcsbGksaW5jbHVkZVByb3Blcil7dmFyIHNpPW5ldyBqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IobGksaW5jbHVkZVByb3Blcix0cnVlKTtzaS5zZXRCb3VuZGFyeU5vZGVzKHRoaXMuZ2V0Qm91bmRhcnlOb2RlcygpLGcuZ2V0Qm91bmRhcnlOb2RlcygpKTt2YXIgZXNpPXRoaXMuY3JlYXRlRWRnZVNldEludGVyc2VjdG9yKCk7ZXNpLmNvbXB1dGVJbnRlcnNlY3Rpb25zKHRoaXMuZWRnZXMsZy5lZGdlcyxzaSk7cmV0dXJuIHNpO307anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuY29tcHV0ZVNlbGZOb2Rlcz1mdW5jdGlvbihsaSxjb21wdXRlUmluZ1NlbGZOb2Rlcyl7dmFyIHNpPW5ldyBqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IobGksdHJ1ZSxmYWxzZSk7dmFyIGVzaT10aGlzLmNyZWF0ZUVkZ2VTZXRJbnRlcnNlY3RvcigpO2lmKCFjb21wdXRlUmluZ1NlbGZOb2RlcyYmKHRoaXMucGFyZW50R2VvbSBpbnN0YW5jZW9mIGpzdHMuZ2VvbS5MaW5lYXJSaW5nfHx0aGlzLnBhcmVudEdlb20gaW5zdGFuY2VvZiBqc3RzLmdlb20uUG9seWdvbnx8dGhpcy5wYXJlbnRHZW9tIGluc3RhbmNlb2YganN0cy5nZW9tLk11bHRpUG9seWdvbikpe2VzaS5jb21wdXRlSW50ZXJzZWN0aW9ucyh0aGlzLmVkZ2VzLHNpLGZhbHNlKTt9ZWxzZXtlc2kuY29tcHV0ZUludGVyc2VjdGlvbnModGhpcy5lZGdlcyxzaSx0cnVlKTt9XG50aGlzLmFkZFNlbGZJbnRlcnNlY3Rpb25Ob2Rlcyh0aGlzLmFyZ0luZGV4KTtyZXR1cm4gc2k7fTtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5pbnNlcnRQb2ludD1mdW5jdGlvbihhcmdJbmRleCxjb29yZCxvbkxvY2F0aW9uKXt2YXIgbj10aGlzLm5vZGVzLmFkZE5vZGUoY29vcmQpO3ZhciBsYmw9bi5nZXRMYWJlbCgpO2lmKGxibD09bnVsbCl7bi5sYWJlbD1uZXcganN0cy5nZW9tZ3JhcGguTGFiZWwoYXJnSW5kZXgsb25Mb2NhdGlvbik7fWVsc2VcbmxibC5zZXRMb2NhdGlvbihhcmdJbmRleCxvbkxvY2F0aW9uKTt9O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmluc2VydEJvdW5kYXJ5UG9pbnQ9ZnVuY3Rpb24oYXJnSW5kZXgsY29vcmQpe3ZhciBuPXRoaXMubm9kZXMuYWRkTm9kZShjb29yZCk7dmFyIGxibD1uLmdldExhYmVsKCk7dmFyIGJvdW5kYXJ5Q291bnQ9MTt2YXIgbG9jPUxvY2F0aW9uLk5PTkU7aWYobGJsIT09bnVsbClcbmxvYz1sYmwuZ2V0TG9jYXRpb24oYXJnSW5kZXgsUG9zaXRpb24uT04pO2lmKGxvYz09PUxvY2F0aW9uLkJPVU5EQVJZKVxuYm91bmRhcnlDb3VudCsrO3ZhciBuZXdMb2M9anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5kZXRlcm1pbmVCb3VuZGFyeSh0aGlzLmJvdW5kYXJ5Tm9kZVJ1bGUsYm91bmRhcnlDb3VudCk7bGJsLnNldExvY2F0aW9uKGFyZ0luZGV4LG5ld0xvYyk7fTtqc3RzLmdlb21ncmFwaC5HZW9tZXRyeUdyYXBoLnByb3RvdHlwZS5hZGRTZWxmSW50ZXJzZWN0aW9uTm9kZXM9ZnVuY3Rpb24oYXJnSW5kZXgpe2Zvcih2YXIgaT10aGlzLmVkZ2VzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgZT1pLm5leHQoKTt2YXIgZUxvYz1lLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oYXJnSW5kZXgpO2Zvcih2YXIgZWlJdD1lLmVpTGlzdC5pdGVyYXRvcigpO2VpSXQuaGFzTmV4dCgpOyl7dmFyIGVpPWVpSXQubmV4dCgpO3RoaXMuYWRkU2VsZkludGVyc2VjdGlvbk5vZGUoYXJnSW5kZXgsZWkuY29vcmQsZUxvYyk7fX19O2pzdHMuZ2VvbWdyYXBoLkdlb21ldHJ5R3JhcGgucHJvdG90eXBlLmFkZFNlbGZJbnRlcnNlY3Rpb25Ob2RlPWZ1bmN0aW9uKGFyZ0luZGV4LGNvb3JkLGxvYyl7aWYodGhpcy5pc0JvdW5kYXJ5Tm9kZShhcmdJbmRleCxjb29yZCkpXG5yZXR1cm47aWYobG9jPT09TG9jYXRpb24uQk9VTkRBUlkmJnRoaXMudXNlQm91bmRhcnlEZXRlcm1pbmF0aW9uUnVsZSlcbnRoaXMuaW5zZXJ0Qm91bmRhcnlQb2ludChhcmdJbmRleCxjb29yZCk7ZWxzZVxudGhpcy5pbnNlcnRQb2ludChhcmdJbmRleCxjb29yZCxsb2MpO307anN0cy5nZW9tZ3JhcGguR2VvbWV0cnlHcmFwaC5wcm90b3R5cGUuZ2V0SW52YWxpZFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZFBvaW50O307fSkoKTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudFN0cmluZz1mdW5jdGlvbigpe3RoaXMucHRMaXN0PVtdO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLnB0TGlzdD1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5wcmVjaXNpb25Nb2RlbD1udWxsO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5taW5pbWltVmVydGV4RGlzdGFuY2U9MC4wO2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5zZXRQcmVjaXNpb25Nb2RlbD1mdW5jdGlvbihwcmVjaXNpb25Nb2RlbCl7dGhpcy5wcmVjaXNpb25Nb2RlbD1wcmVjaXNpb25Nb2RlbDt9O2pzdHMub3BlcmF0aW9uLmJ1ZmZlci5PZmZzZXRTZWdtZW50U3RyaW5nLnByb3RvdHlwZS5zZXRNaW5pbXVtVmVydGV4RGlzdGFuY2U9ZnVuY3Rpb24obWluaW1pbVZlcnRleERpc3RhbmNlKXt0aGlzLm1pbmltaW1WZXJ0ZXhEaXN0YW5jZT1taW5pbWltVmVydGV4RGlzdGFuY2U7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudFN0cmluZy5wcm90b3R5cGUuYWRkUHQ9ZnVuY3Rpb24ocHQpe3ZhciBidWZQdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUocHQpO3RoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2UoYnVmUHQpO2lmKHRoaXMuaXNSZWR1bmRhbnQoYnVmUHQpKVxucmV0dXJuO3RoaXMucHRMaXN0LnB1c2goYnVmUHQpO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmFkZFB0cz1mdW5jdGlvbihwdCxpc0ZvcndhcmQpe2lmKGlzRm9yd2FyZCl7Zm9yKHZhciBpPTA7aTxwdC5sZW5ndGg7aSsrKXt0aGlzLmFkZFB0KHB0W2ldKTt9fWVsc2V7Zm9yKHZhciBpPXB0Lmxlbmd0aC0xO2k+PTA7aS0tKXt0aGlzLmFkZFB0KHB0W2ldKTt9fX07anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmlzUmVkdW5kYW50PWZ1bmN0aW9uKHB0KXtpZih0aGlzLnB0TGlzdC5sZW5ndGg8MSlcbnJldHVybiBmYWxzZTt2YXIgbGFzdFB0PXRoaXMucHRMaXN0W3RoaXMucHRMaXN0Lmxlbmd0aC0xXTt2YXIgcHREaXN0PXB0LmRpc3RhbmNlKGxhc3RQdCk7aWYocHREaXN0PHRoaXMubWluaW1pbVZlcnRleERpc3RhbmNlKVxucmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmNsb3NlUmluZz1mdW5jdGlvbigpe2lmKHRoaXMucHRMaXN0Lmxlbmd0aDwxKVxucmV0dXJuO3ZhciBzdGFydFB0PW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZSh0aGlzLnB0TGlzdFswXSk7dmFyIGxhc3RQdD10aGlzLnB0TGlzdFt0aGlzLnB0TGlzdC5sZW5ndGgtMV07dmFyIGxhc3QyUHQ9bnVsbDtpZih0aGlzLnB0TGlzdC5sZW5ndGg+PTIpXG5sYXN0MlB0PXRoaXMucHRMaXN0W3RoaXMucHRMaXN0Lmxlbmd0aC0yXTtpZihzdGFydFB0LmVxdWFscyhsYXN0UHQpKVxucmV0dXJuO3RoaXMucHRMaXN0LnB1c2goc3RhcnRQdCk7fTtqc3RzLm9wZXJhdGlvbi5idWZmZXIuT2Zmc2V0U2VnbWVudFN0cmluZy5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe307anN0cy5vcGVyYXRpb24uYnVmZmVyLk9mZnNldFNlZ21lbnRTdHJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRMaXN0O307anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuUG9pbnRQYWlyRGlzdGFuY2U9ZnVuY3Rpb24oKXt0aGlzLnB0PVtuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKSxuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoKV07fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5Qb2ludFBhaXJEaXN0YW5jZS5wcm90b3R5cGUucHQ9bnVsbDtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5Qb2ludFBhaXJEaXN0YW5jZS5wcm90b3R5cGUuZGlzdGFuY2U9TmFOO2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLlBvaW50UGFpckRpc3RhbmNlLnByb3RvdHlwZS5pc051bGw9dHJ1ZTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5Qb2ludFBhaXJEaXN0YW5jZS5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbihwMCxwMSxkaXN0YW5jZSl7aWYocDA9PT11bmRlZmluZWQpe3RoaXMuaXNOdWxsPXRydWU7cmV0dXJuO31cbnRoaXMucHRbMF0uc2V0Q29vcmRpbmF0ZShwMCk7dGhpcy5wdFsxXS5zZXRDb29yZGluYXRlKHAxKTt0aGlzLmRpc3RhbmNlPWRpc3RhbmNlIT09dW5kZWZpbmVkP2Rpc3RhbmNlOnAwLmRpc3RhbmNlKHAxKTt0aGlzLmlzTnVsbD1mYWxzZTt9O2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLlBvaW50UGFpckRpc3RhbmNlLnByb3RvdHlwZS5nZXREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3RhbmNlO307anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuUG9pbnRQYWlyRGlzdGFuY2UucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHQ7fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5Qb2ludFBhaXJEaXN0YW5jZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZT1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5wdFtpXTt9O2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLlBvaW50UGFpckRpc3RhbmNlLnByb3RvdHlwZS5zZXRNYXhpbXVtPWZ1bmN0aW9uKHB0RGlzdCl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTIpe3RoaXMuc2V0TWF4aW11bTIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybjt9XG50aGlzLnNldE1heGltdW0ocHREaXN0LnB0WzBdLHB0RGlzdC5wdFsxXSk7fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5Qb2ludFBhaXJEaXN0YW5jZS5wcm90b3R5cGUuc2V0TWF4aW11bTI9ZnVuY3Rpb24ocDAscDEpe2lmKHRoaXMuaXNOdWxsKXt0aGlzLmluaXRpYWxpemUocDAscDEpO3JldHVybjt9XG52YXIgZGlzdD1wMC5kaXN0YW5jZShwMSk7aWYoZGlzdD50aGlzLmRpc3RhbmNlKVxudGhpcy5pbml0aWFsaXplKHAwLHAxLGRpc3QpO307anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuUG9pbnRQYWlyRGlzdGFuY2UucHJvdG90eXBlLnNldE1pbmltdW09ZnVuY3Rpb24ocHREaXN0KXtpZihhcmd1bWVudHMubGVuZ3RoPT09Mil7dGhpcy5zZXRNaW5pbXVtMi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuO31cbnRoaXMuc2V0TWluaW11bShwdERpc3QucHRbMF0scHREaXN0LnB0WzFdKTt9O2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLlBvaW50UGFpckRpc3RhbmNlLnByb3RvdHlwZS5zZXRNaW5pbXVtMj1mdW5jdGlvbihwMCxwMSl7aWYodGhpcy5pc051bGwpe3RoaXMuaW5pdGlhbGl6ZShwMCxwMSk7cmV0dXJuO31cbnZhciBkaXN0PXAwLmRpc3RhbmNlKHAxKTtpZihkaXN0PHRoaXMuZGlzdGFuY2UpXG50aGlzLmluaXRpYWxpemUocDAscDEsZGlzdCk7fTsoZnVuY3Rpb24oKXt2YXIgUG9pbnRQYWlyRGlzdGFuY2U9anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuUG9pbnRQYWlyRGlzdGFuY2U7dmFyIERpc3RhbmNlVG9Qb2ludD1qc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXN0YW5jZVRvUG9pbnQ7dmFyIE1heFBvaW50RGlzdGFuY2VGaWx0ZXI9ZnVuY3Rpb24oZ2VvbSl7dGhpcy5tYXhQdERpc3Q9bmV3IFBvaW50UGFpckRpc3RhbmNlKCk7dGhpcy5taW5QdERpc3Q9bmV3IFBvaW50UGFpckRpc3RhbmNlKCk7dGhpcy5ldWNsaWRlYW5EaXN0PW5ldyBEaXN0YW5jZVRvUG9pbnQoKTt0aGlzLmdlb209Z2VvbTt9O01heFBvaW50RGlzdGFuY2VGaWx0ZXIucHJvdG90eXBlPW5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZUZpbHRlcigpO01heFBvaW50RGlzdGFuY2VGaWx0ZXIucHJvdG90eXBlLm1heFB0RGlzdD1uZXcgUG9pbnRQYWlyRGlzdGFuY2UoKTtNYXhQb2ludERpc3RhbmNlRmlsdGVyLnByb3RvdHlwZS5taW5QdERpc3Q9bmV3IFBvaW50UGFpckRpc3RhbmNlKCk7TWF4UG9pbnREaXN0YW5jZUZpbHRlci5wcm90b3R5cGUuZXVjbGlkZWFuRGlzdD1uZXcgRGlzdGFuY2VUb1BvaW50KCk7TWF4UG9pbnREaXN0YW5jZUZpbHRlci5wcm90b3R5cGUuZ2VvbTtNYXhQb2ludERpc3RhbmNlRmlsdGVyLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24ocHQpe3RoaXMubWluUHREaXN0LmluaXRpYWxpemUoKTtEaXN0YW5jZVRvUG9pbnQuY29tcHV0ZURpc3RhbmNlKHRoaXMuZ2VvbSxwdCx0aGlzLm1pblB0RGlzdCk7dGhpcy5tYXhQdERpc3Quc2V0TWF4aW11bSh0aGlzLm1pblB0RGlzdCk7fTtNYXhQb2ludERpc3RhbmNlRmlsdGVyLnByb3RvdHlwZS5nZXRNYXhQb2ludERpc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4UHREaXN0O307dmFyIE1heERlbnNpZmllZEJ5RnJhY3Rpb25EaXN0YW5jZUZpbHRlcj1mdW5jdGlvbihnZW9tLGZyYWN0aW9uKXt0aGlzLm1heFB0RGlzdD1uZXcgUG9pbnRQYWlyRGlzdGFuY2UoKTt0aGlzLm1pblB0RGlzdD1uZXcgUG9pbnRQYWlyRGlzdGFuY2UoKTt0aGlzLmdlb209Z2VvbTt0aGlzLm51bVN1YlNlZ3M9TWF0aC5yb3VuZCgxLjAvZnJhY3Rpb24pO307TWF4RGVuc2lmaWVkQnlGcmFjdGlvbkRpc3RhbmNlRmlsdGVyLnByb3RvdHlwZT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGVTZXF1ZW5jZUZpbHRlcigpO01heERlbnNpZmllZEJ5RnJhY3Rpb25EaXN0YW5jZUZpbHRlci5wcm90b3R5cGUubWF4UHREaXN0PW5ldyBQb2ludFBhaXJEaXN0YW5jZSgpO01heERlbnNpZmllZEJ5RnJhY3Rpb25EaXN0YW5jZUZpbHRlci5wcm90b3R5cGUubWluUHREaXN0PW5ldyBQb2ludFBhaXJEaXN0YW5jZSgpO01heERlbnNpZmllZEJ5RnJhY3Rpb25EaXN0YW5jZUZpbHRlci5wcm90b3R5cGUuZ2VvbTtNYXhEZW5zaWZpZWRCeUZyYWN0aW9uRGlzdGFuY2VGaWx0ZXIucHJvdG90eXBlLm51bVN1YlNlZ3M9MDtNYXhEZW5zaWZpZWRCeUZyYWN0aW9uRGlzdGFuY2VGaWx0ZXIucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihzZXEsaW5kZXgpe2lmKGluZGV4PT0wKVxucmV0dXJuO3ZhciBwMD1zZXFbaW5kZXgtMV07dmFyIHAxPXNlcVtpbmRleF07dmFyIGRlbHg9KHAxLngtcDAueCkvdGhpcy5udW1TdWJTZWdzO3ZhciBkZWx5PShwMS55LXAwLnkpL3RoaXMubnVtU3ViU2Vncztmb3IodmFyIGk9MDtpPHRoaXMubnVtU3ViU2VncztpKyspe3ZhciB4PXAwLngraSpkZWx4O3ZhciB5PXAwLnkraSpkZWx5O3ZhciBwdD1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoeCx5KTt0aGlzLm1pblB0RGlzdC5pbml0aWFsaXplKCk7RGlzdGFuY2VUb1BvaW50LmNvbXB1dGVEaXN0YW5jZSh0aGlzLmdlb20scHQsdGhpcy5taW5QdERpc3QpO3RoaXMubWF4UHREaXN0LnNldE1heGltdW0odGhpcy5taW5QdERpc3QpO319O01heERlbnNpZmllZEJ5RnJhY3Rpb25EaXN0YW5jZUZpbHRlci5wcm90b3R5cGUuaXNHZW9tZXRyeUNoYW5nZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7fTtNYXhEZW5zaWZpZWRCeUZyYWN0aW9uRGlzdGFuY2VGaWx0ZXIucHJvdG90eXBlLmlzRG9uZT1mdW5jdGlvbigpe3JldHVybiBmYWxzZTt9O01heERlbnNpZmllZEJ5RnJhY3Rpb25EaXN0YW5jZUZpbHRlci5wcm90b3R5cGUuZ2V0TWF4UG9pbnREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1heFB0RGlzdDt9O2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLkRpc2NyZXRlSGF1c2RvcmZmRGlzdGFuY2U9ZnVuY3Rpb24oZzAsZzEpe3RoaXMuZzA9ZzA7dGhpcy5nMT1nMTt0aGlzLnB0RGlzdD1uZXcganN0cy5hbGdvcml0aG0uZGlzdGFuY2UuUG9pbnRQYWlyRGlzdGFuY2UoKTt9O2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLkRpc2NyZXRlSGF1c2RvcmZmRGlzdGFuY2UucHJvdG90eXBlLmcwPW51bGw7anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzY3JldGVIYXVzZG9yZmZEaXN0YW5jZS5wcm90b3R5cGUuZzE9bnVsbDtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXNjcmV0ZUhhdXNkb3JmZkRpc3RhbmNlLnByb3RvdHlwZS5wdERpc3Q9bnVsbDtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXNjcmV0ZUhhdXNkb3JmZkRpc3RhbmNlLnByb3RvdHlwZS5kZW5zaWZ5RnJhYz0wLjA7anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzY3JldGVIYXVzZG9yZmZEaXN0YW5jZS5kaXN0YW5jZT1mdW5jdGlvbihnMCxnMSxkZW5zaWZ5RnJhYyl7dmFyIGRpc3Q9bmV3IGpzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLkRpc2NyZXRlSGF1c2RvcmZmRGlzdGFuY2UoZzAsZzEpO2lmKGRlbnNpZnlGcmFjIT09dW5kZWZpbmVkKVxuZGlzdC5zZXREZW5zaWZ5RnJhY3Rpb24oZGVuc2lmeUZyYWMpO3JldHVybiBkaXN0LmRpc3RhbmNlKCk7fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXNjcmV0ZUhhdXNkb3JmZkRpc3RhbmNlLnByb3RvdHlwZS5zZXREZW5zaWZ5RnJhY3Rpb249ZnVuY3Rpb24oZGVuc2lmeUZyYWMpe2lmKGRlbnNpZnlGcmFjPjEuMHx8ZGVuc2lmeUZyYWM8PTAuMClcbnRocm93IG5ldyBqc3RzLmVycm9yLklsbGVnYWxBcmd1bWVudEVycm9yKCdGcmFjdGlvbiBpcyBub3QgaW4gcmFuZ2UgKDAuMCAtIDEuMF0nKTt0aGlzLmRlbnNpZnlGcmFjPWRlbnNpZnlGcmFjO307anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzY3JldGVIYXVzZG9yZmZEaXN0YW5jZS5wcm90b3R5cGUuZGlzdGFuY2U9ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGUodGhpcy5nMCx0aGlzLmcxKTtyZXR1cm4gcHREaXN0LmdldERpc3RhbmNlKCk7fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXNjcmV0ZUhhdXNkb3JmZkRpc3RhbmNlLnByb3RvdHlwZS5vcmllbnRlZERpc3RhbmNlPWZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlT3JpZW50ZWREaXN0YW5jZSh0aGlzLmcwLHRoaXMuZzEsdGhpcy5wdERpc3QpO3JldHVybiB0aGlzLnB0RGlzdC5nZXREaXN0YW5jZSgpO307anN0cy5hbGdvcml0aG0uZGlzdGFuY2UuRGlzY3JldGVIYXVzZG9yZmZEaXN0YW5jZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gcHREaXN0LmdldENvb3JkaW5hdGVzKCk7fTtqc3RzLmFsZ29yaXRobS5kaXN0YW5jZS5EaXNjcmV0ZUhhdXNkb3JmZkRpc3RhbmNlLnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKGcwLGcxKXt0aGlzLmNvbXB1dGVPcmllbnRlZERpc3RhbmNlKGcwLGcxLHRoaXMucHREaXN0KTt0aGlzLmNvbXB1dGVPcmllbnRlZERpc3RhbmNlKGcxLGcwLHRoaXMucHREaXN0KTt9O2pzdHMuYWxnb3JpdGhtLmRpc3RhbmNlLkRpc2NyZXRlSGF1c2RvcmZmRGlzdGFuY2UucHJvdG90eXBlLmNvbXB1dGVPcmllbnRlZERpc3RhbmNlPWZ1bmN0aW9uKGRpc2NyZXRlR2VvbSxnZW9tLHB0RGlzdCl7dmFyIGRpc3RGaWx0ZXI9bmV3IE1heFBvaW50RGlzdGFuY2VGaWx0ZXIoZ2VvbSk7ZGlzY3JldGVHZW9tLmFwcGx5KGRpc3RGaWx0ZXIpO3B0RGlzdC5zZXRNYXhpbXVtKGRpc3RGaWx0ZXIuZ2V0TWF4UG9pbnREaXN0YW5jZSgpKTtpZih0aGlzLmRlbnNpZnlGcmFjPjApe3ZhciBmcmFjRmlsdGVyPW5ldyBNYXhEZW5zaWZpZWRCeUZyYWN0aW9uRGlzdGFuY2VGaWx0ZXIoZ2VvbSx0aGlzLmRlbnNpZnlGcmFjKTtkaXNjcmV0ZUdlb20uYXBwbHkoZnJhY0ZpbHRlcik7cHREaXN0LnNldE1heGltdW0oZnJhY0ZpbHRlci5nZXRNYXhQb2ludERpc3RhbmNlKCkpO319O30pKCk7anN0cy5hbGdvcml0aG0uTWluaW11bUJvdW5kaW5nQ2lyY2xlPWZ1bmN0aW9uKGdlb20pe3RoaXMuaW5wdXQ9bnVsbDt0aGlzLmV4dHJlbWFsUHRzPW51bGw7dGhpcy5jZW50cmU9bnVsbDt0aGlzLnJhZGl1cz0wO3RoaXMuaW5wdXQ9Z2VvbTt9O2pzdHMuYWxnb3JpdGhtLk1pbmltdW1Cb3VuZGluZ0NpcmNsZS5wcm90b3R5cGUuZ2V0Q2lyY2xlPWZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlKCk7aWYodGhpcy5jZW50cmU9PT1udWxsKXtyZXR1cm4gdGhpcy5pbnB1dC5nZXRGYWN0b3J5KCkuY3JlYXRlUG9seWdvbihudWxsLG51bGwpO31cbnZhciBjZW50cmVQb2ludD10aGlzLmlucHV0LmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0aGlzLmNlbnRyZSk7aWYodGhpcy5yYWRpdXM9PT0wKXtyZXR1cm4gY2VudHJlUG9pbnQ7fVxucmV0dXJuIGNlbnRyZVBvaW50LmJ1ZmZlcih0aGlzLnJhZGl1cyk7fTtqc3RzLmFsZ29yaXRobS5NaW5pbXVtQm91bmRpbmdDaXJjbGUucHJvdG90eXBlLmdldEV4dHJlbWFsUG9pbnRzPWZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlKCk7cmV0dXJuIHRoaXMuZXh0cmVtYWxQdHM7fTtqc3RzLmFsZ29yaXRobS5NaW5pbXVtQm91bmRpbmdDaXJjbGUucHJvdG90eXBlLmdldENlbnRyZT1mdW5jdGlvbigpe3RoaXMuY29tcHV0ZSgpO3JldHVybiB0aGlzLmNlbnRyZTt9O2pzdHMuYWxnb3JpdGhtLk1pbmltdW1Cb3VuZGluZ0NpcmNsZS5wcm90b3R5cGUuZ2V0UmFkaXVzPWZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlKCk7cmV0dXJuIHRoaXMucmFkaXVzO307anN0cy5hbGdvcml0aG0uTWluaW11bUJvdW5kaW5nQ2lyY2xlLnByb3RvdHlwZS5jb21wdXRlQ2VudHJlPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZXh0cmVtYWxQdHMubGVuZ3RoKXtjYXNlIDA6dGhpcy5jZW50cmU9bnVsbDticmVhaztjYXNlIDE6dGhpcy5jZW50cmU9dGhpcy5leHRyZW1hbFB0c1swXTticmVhaztjYXNlIDI6dGhpcy5jZW50cmU9bmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKCh0aGlzLmV4dHJlbWFsUHRzWzBdLngrdGhpcy5leHRyZW1hbFB0c1sxXS54KS8yLCh0aGlzLmV4dHJlbWFsUHRzWzBdLnkrdGhpcy5leHRyZW1hbFB0c1sxXS55KS8yKTticmVhaztjYXNlIDM6dGhpcy5jZW50cmU9anN0cy5nZW9tLlRyaWFuZ2xlLmNpcmN1bWNlbnRyZSh0aGlzLmV4dHJlbWFsUHRzWzBdLHRoaXMuZXh0cmVtYWxQdHNbMV0sdGhpcy5leHRyZW1hbFB0c1syXSk7YnJlYWs7fX07anN0cy5hbGdvcml0aG0uTWluaW11bUJvdW5kaW5nQ2lyY2xlLnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5leHRyZW1hbFB0cyE9PW51bGwpe3JldHVybjt9XG50aGlzLmNvbXB1dGVDaXJjbGVQb2ludHMoKTt0aGlzLmNvbXB1dGVDZW50cmUoKTtpZih0aGlzLmNlbnRyZSE9PW51bGwpe3RoaXMucmFkaXVzPXRoaXMuY2VudHJlLmRpc3RhbmNlKHRoaXMuZXh0cmVtYWxQdHNbMF0pO319O2pzdHMuYWxnb3JpdGhtLk1pbmltdW1Cb3VuZGluZ0NpcmNsZS5wcm90b3R5cGUuY29tcHV0ZUNpcmNsZVBvaW50cz1mdW5jdGlvbigpe2lmKHRoaXMuaW5wdXQuaXNFbXB0eSgpKXt0aGlzLmV4dHJlbWFsUHRzPVtdO3JldHVybjt9XG52YXIgcHRzO2lmKHRoaXMuaW5wdXQuZ2V0TnVtUG9pbnRzKCk9PT0xKXtwdHM9dGhpcy5pbnB1dC5nZXRDb29yZGluYXRlcygpO3RoaXMuZXh0cmVtYWxQdHM9W25ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShwdHNbMF0pXTtyZXR1cm47fVxudmFyIGNvbnZleEh1bGw9dGhpcy5pbnB1dC5jb252ZXhIdWxsKCk7dmFyIGh1bGxQdHM9Y29udmV4SHVsbC5nZXRDb29yZGluYXRlcygpO3B0cz1odWxsUHRzO2lmKGh1bGxQdHNbMF0uZXF1YWxzMkQoaHVsbFB0c1todWxsUHRzLmxlbmd0aC0xXSkpe3B0cz1bXTtqc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5jb3B5RGVlcChodWxsUHRzLDAscHRzLDAsaHVsbFB0cy5sZW5ndGgtMSk7fVxuaWYocHRzLmxlbmd0aDw9Mil7dGhpcy5leHRyZW1hbFB0cz1qc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5jb3B5RGVlcChwdHMpO3JldHVybjt9XG52YXIgUD1qc3RzLmFsZ29yaXRobS5NaW5pbXVtQm91bmRpbmdDaXJjbGUubG93ZXN0UG9pbnQocHRzKTt2YXIgUT1qc3RzLmFsZ29yaXRobS5NaW5pbXVtQm91bmRpbmdDaXJjbGUucG9pbnRXaXRNaW5BbmdsZVdpdGhYKHB0cyxQKTtmb3IodmFyIGk9MDtpPHB0cy5sZW5ndGg7aSsrKXt2YXIgUj1qc3RzLmFsZ29yaXRobS5NaW5pbXVtQm91bmRpbmdDaXJjbGUucG9pbnRXaXRoTWluQW5nbGVXaXRoU2VnbWVudChwdHMsUCxRKTtpZihqc3RzLmFsZ29yaXRobS5BbmdsZS5pc09idHVzZShQLFIsUSkpe3RoaXMuZXh0cmVtYWxQdHM9W25ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShQKSxuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoUSldO3JldHVybjt9XG5pZihqc3RzLmFsZ29yaXRobS5BbmdsZS5pc09idHVzZShSLFAsUSkpe1A9Ujtjb250aW51ZTt9XG5pZihqc3RzLmFsZ29yaXRobS5BbmdsZS5pc09idHVzZShSLFEsUCkpe1E9Ujtjb250aW51ZTt9XG50aGlzLmV4dHJlbWFsUHRzPVtuZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoUCksbmV3IGpzdHMuZ2VvbS5Db29yZGluYXRlKFEpLG5ldyBqc3RzLmdlb20uQ29vcmRpbmF0ZShSKV07cmV0dXJuO31cbnRocm93IG5ldyBFcnJvcihcIkxvZ2ljIGZhaWx1cmUgaW4gTWluaW11bSBCb3VuZGluZyBDaXJjbGUgYWxnb3JpdGhtIVwiKTt9O2pzdHMuYWxnb3JpdGhtLk1pbmltdW1Cb3VuZGluZ0NpcmNsZS5sb3dlc3RQb2ludD1mdW5jdGlvbihwdHMpe3ZhciBtaW49cHRzWzBdO2Zvcih2YXIgaT0xO2k8cHRzLmxlbmd0aDtpKyspe2lmKHB0c1tpXS55PG1pbi55KXttaW49cHRzW2ldO319XG5yZXR1cm4gbWluO307anN0cy5hbGdvcml0aG0uTWluaW11bUJvdW5kaW5nQ2lyY2xlLnBvaW50V2l0TWluQW5nbGVXaXRoWD1mdW5jdGlvbihwdHMsUCl7dmFyIG1pblNpbj1OdW1iZXIuTUFYX1ZBTFVFO3ZhciBtaW5BbmdQdD1udWxsO2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aDtpKyspe3ZhciBwPXB0c1tpXTtpZihwPT09UCljb250aW51ZTt2YXIgZHg9cC54LVAueDt2YXIgZHk9cC55LVAueTtpZihkeTwwKWR5PS1keTt2YXIgbGVuPU1hdGguc3FydChkeCpkeCtkeSpkeSk7dmFyIHNpbj1keS9sZW47aWYoc2luPG1pblNpbil7bWluU2luPXNpbjttaW5BbmdQdD1wO319XG5yZXR1cm4gbWluQW5nUHQ7fTtqc3RzLmFsZ29yaXRobS5NaW5pbXVtQm91bmRpbmdDaXJjbGUucG9pbnRXaXRoTWluQW5nbGVXaXRoU2VnbWVudD1mdW5jdGlvbihwdHMsUCxRKXt2YXIgbWluQW5nPU51bWJlci5NQVhfVkFMVUU7dmFyIG1pbkFuZ1B0PW51bGw7Zm9yKHZhciBpPTA7aTxwdHMubGVuZ3RoO2krKyl7dmFyIHA9cHRzW2ldO2lmKHA9PT1QKWNvbnRpbnVlO2lmKHA9PT1RKWNvbnRpbnVlO3ZhciBhbmc9anN0cy5hbGdvcml0aG0uQW5nbGUuYW5nbGVCZXR3ZWVuKFAscCxRKTtpZihhbmc8bWluQW5nKXttaW5Bbmc9YW5nO21pbkFuZ1B0PXA7fX1cbnJldHVybiBtaW5BbmdQdDt9O2pzdHMubm9kaW5nLlNjYWxlZE5vZGVyPWZ1bmN0aW9uKG5vZGVyLHNjYWxlRmFjdG9yLG9mZnNldFgsb2Zmc2V0WSl7dGhpcy5vZmZzZXRYPW9mZnNldFg/b2Zmc2V0WDowO3RoaXMub2Zmc2V0WT1vZmZzZXRZP29mZnNldFk6MDt0aGlzLm5vZGVyPW5vZGVyO3RoaXMuc2NhbGVGYWN0b3I9c2NhbGVGYWN0b3I7dGhpcy5pc1NjYWxlZD0hdGhpcy5pc0ludGVnZXJQcmVjaXNpb24oKTt9O2pzdHMubm9kaW5nLlNjYWxlZE5vZGVyLnByb3RvdHlwZT1uZXcganN0cy5ub2RpbmcuTm9kZXIoKTtqc3RzLm5vZGluZy5TY2FsZWROb2Rlci5jb25zdHJ1Y3Rvcj1qc3RzLm5vZGluZy5TY2FsZWROb2Rlcjtqc3RzLm5vZGluZy5TY2FsZWROb2Rlci5wcm90b3R5cGUubm9kZXI9bnVsbDtqc3RzLm5vZGluZy5TY2FsZWROb2Rlci5wcm90b3R5cGUuc2NhbGVGYWN0b3I9dW5kZWZpbmVkO2pzdHMubm9kaW5nLlNjYWxlZE5vZGVyLnByb3RvdHlwZS5vZmZzZXRYPXVuZGVmaW5lZDtqc3RzLm5vZGluZy5TY2FsZWROb2Rlci5wcm90b3R5cGUub2Zmc2V0WT11bmRlZmluZWQ7anN0cy5ub2RpbmcuU2NhbGVkTm9kZXIucHJvdG90eXBlLmlzU2NhbGVkPWZhbHNlO2pzdHMubm9kaW5nLlNjYWxlZE5vZGVyLnByb3RvdHlwZS5pc0ludGVnZXJQcmVjaXNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY2FsZUZhY3Rvcj09PTEuMDt9O2pzdHMubm9kaW5nLlNjYWxlZE5vZGVyLnByb3RvdHlwZS5nZXROb2RlZFN1YnN0cmluZ3M9ZnVuY3Rpb24oKXt2YXIgc3BsaXRTUz10aGlzLm5vZGVyLmdldE5vZGVkU3Vic3RyaW5ncygpO2lmKHRoaXMuaXNTY2FsZWQpXG50aGlzLnJlc2NhbGUoc3BsaXRTUyk7cmV0dXJuIHNwbGl0U1M7fTtqc3RzLm5vZGluZy5TY2FsZWROb2Rlci5wcm90b3R5cGUuY29tcHV0ZU5vZGVzPWZ1bmN0aW9uKGlucHV0U2VnU3RyaW5ncyl7dmFyIGludFNlZ1N0cmluZ3M9aW5wdXRTZWdTdHJpbmdzO2lmKHRoaXMuaXNTY2FsZWQpXG5pbnRTZWdTdHJpbmdzPXRoaXMuc2NhbGUoaW5wdXRTZWdTdHJpbmdzKTt0aGlzLm5vZGVyLmNvbXB1dGVOb2RlcyhpbnRTZWdTdHJpbmdzKTt9O2pzdHMubm9kaW5nLlNjYWxlZE5vZGVyLnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbihzZWdTdHJpbmdzKXtpZihzZWdTdHJpbmdzIGluc3RhbmNlb2YgQXJyYXkpe3JldHVybiB0aGlzLnNjYWxlMihzZWdTdHJpbmdzKTt9XG52YXIgdHJhbnNmb3JtZWQ9bmV3IGphdmFzY3JpcHQudXRpbC5BcnJheUxpc3QoKTtmb3IodmFyIGk9c2VnU3RyaW5ncy5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHNzPWkubmV4dCgpO3RyYW5zZm9ybWVkLmFkZChuZXcganN0cy5ub2RpbmcuTm9kZWRTZWdtZW50U3RyaW5nKHRoaXMuc2NhbGUoc3MuZ2V0Q29vcmRpbmF0ZXMoKSksc3MuZ2V0RGF0YSgpKSk7fVxucmV0dXJuIHRyYW5zZm9ybWVkO307anN0cy5ub2RpbmcuU2NhbGVkTm9kZXIucHJvdG90eXBlLnNjYWxlMj1mdW5jdGlvbihwdHMpe3ZhciByb3VuZFB0cz1bXTtmb3IodmFyIGk9MDtpPHB0cy5sZW5ndGg7aSsrKXtyb3VuZFB0c1tpXT1uZXcganN0cy5nZW9tLkNvb3JkaW5hdGUoTWF0aC5yb3VuZCgocHRzW2ldLngtdGhpcy5vZmZzZXRYKSp0aGlzLnNjYWxlRmFjdG9yKSxNYXRoLnJvdW5kKChwdHNbaV0ueS10aGlzLm9mZnNldFkpKnRoaXMuc2NhbGVGYWN0b3IpKTt9XG52YXIgcm91bmRQdHNOb0R1cD1qc3RzLmdlb20uQ29vcmRpbmF0ZUFycmF5cy5yZW1vdmVSZXBlYXRlZFBvaW50cyhyb3VuZFB0cyk7cmV0dXJuIHJvdW5kUHRzTm9EdXA7fTtqc3RzLm5vZGluZy5TY2FsZWROb2Rlci5wcm90b3R5cGUucmVzY2FsZT1mdW5jdGlvbihzZWdTdHJpbmdzKXtpZihzZWdTdHJpbmdzIGluc3RhbmNlb2YgQXJyYXkpe3RoaXMucmVzY2FsZTIoc2VnU3RyaW5ncyk7cmV0dXJuO31cbmZvcih2YXIgaT1zZWdTdHJpbmdzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgc3M9aS5uZXh0KCk7dGhpcy5yZXNjYWxlKHNzLmdldENvb3JkaW5hdGVzKCkpO319O2pzdHMubm9kaW5nLlNjYWxlZE5vZGVyLnByb3RvdHlwZS5yZXNjYWxlMj1mdW5jdGlvbihwdHMpe2Zvcih2YXIgaT0wO2k8cHRzLmxlbmd0aDtpKyspe3B0c1tpXS54PXB0c1tpXS54L3RoaXMuc2NhbGVGYWN0b3IrdGhpcy5vZmZzZXRYO3B0c1tpXS55PXB0c1tpXS55L3RoaXMuc2NhbGVGYWN0b3IrdGhpcy5vZmZzZXRZO319OyhmdW5jdGlvbigpe3ZhciBBcnJheUxpc3Q9amF2YXNjcmlwdC51dGlsLkFycmF5TGlzdDtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3I9ZnVuY3Rpb24obGksaW5jbHVkZVByb3BlcixyZWNvcmRJc29sYXRlZCl7dGhpcy5saT1saTt0aGlzLmluY2x1ZGVQcm9wZXI9aW5jbHVkZVByb3Blcjt0aGlzLnJlY29yZElzb2xhdGVkPXJlY29yZElzb2xhdGVkO307anN0cy5nZW9tZ3JhcGguaW5kZXguU2VnbWVudEludGVyc2VjdG9yLmlzQWRqYWNlbnRTZWdtZW50cz1mdW5jdGlvbihpMSxpMil7cmV0dXJuIE1hdGguYWJzKGkxLWkyKT09PTE7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IucHJvdG90eXBlLl9oYXNJbnRlcnNlY3Rpb249ZmFsc2U7anN0cy5nZW9tZ3JhcGguaW5kZXguU2VnbWVudEludGVyc2VjdG9yLnByb3RvdHlwZS5oYXNQcm9wZXI9ZmFsc2U7anN0cy5nZW9tZ3JhcGguaW5kZXguU2VnbWVudEludGVyc2VjdG9yLnByb3RvdHlwZS5oYXNQcm9wZXJJbnRlcmlvcj1mYWxzZTtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IucHJvdG90eXBlLnByb3BlckludGVyc2VjdGlvblBvaW50PW51bGw7anN0cy5nZW9tZ3JhcGguaW5kZXguU2VnbWVudEludGVyc2VjdG9yLnByb3RvdHlwZS5saT1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNlZ21lbnRJbnRlcnNlY3Rvci5wcm90b3R5cGUuaW5jbHVkZVByb3Blcj1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNlZ21lbnRJbnRlcnNlY3Rvci5wcm90b3R5cGUucmVjb3JkSXNvbGF0ZWQ9bnVsbDtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IucHJvdG90eXBlLmlzU2VsZkludGVyc2VjdGlvbj1udWxsO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNlZ21lbnRJbnRlcnNlY3Rvci5wcm90b3R5cGUubnVtSW50ZXJzZWN0aW9ucz0wO2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNlZ21lbnRJbnRlcnNlY3Rvci5wcm90b3R5cGUubnVtVGVzdHM9MDtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IucHJvdG90eXBlLmJkeU5vZGVzPW51bGw7anN0cy5nZW9tZ3JhcGguaW5kZXguU2VnbWVudEludGVyc2VjdG9yLnByb3RvdHlwZS5zZXRCb3VuZGFyeU5vZGVzPWZ1bmN0aW9uKGJkeU5vZGVzMCxiZHlOb2RlczEpe3RoaXMuYmR5Tm9kZXM9W107dGhpcy5iZHlOb2Rlc1swXT1iZHlOb2RlczA7dGhpcy5iZHlOb2Rlc1sxXT1iZHlOb2RlczE7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IucHJvdG90eXBlLmdldFByb3BlckludGVyc2VjdGlvblBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ7fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IucHJvdG90eXBlLmhhc0ludGVyc2VjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNJbnRlcnNlY3Rpb247fTtqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IucHJvdG90eXBlLmhhc1Byb3BlckludGVyc2VjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc1Byb3Blcjt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNlZ21lbnRJbnRlcnNlY3Rvci5wcm90b3R5cGUuaGFzUHJvcGVySW50ZXJpb3JJbnRlcnNlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNQcm9wZXJJbnRlcmlvcjt9O2pzdHMuZ2VvbWdyYXBoLmluZGV4LlNlZ21lbnRJbnRlcnNlY3Rvci5wcm90b3R5cGUuaXNUcml2aWFsSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGUwLHNlZ0luZGV4MCxlMSxzZWdJbmRleDEpe2lmKGUwPT09ZTEpe2lmKHRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uTnVtKCk9PT0xKXtpZihqc3RzLmdlb21ncmFwaC5pbmRleC5TZWdtZW50SW50ZXJzZWN0b3IuaXNBZGphY2VudFNlZ21lbnRzKHNlZ0luZGV4MCxzZWdJbmRleDEpKVxucmV0dXJuIHRydWU7aWYoZTAuaXNDbG9zZWQoKSl7dmFyIG1heFNlZ0luZGV4PWUwLmdldE51bVBvaW50cygpLTE7aWYoKHNlZ0luZGV4MD09PTAmJnNlZ0luZGV4MT09PW1heFNlZ0luZGV4KXx8KHNlZ0luZGV4MT09PTAmJnNlZ0luZGV4MD09PW1heFNlZ0luZGV4KSl7cmV0dXJuIHRydWU7fX19fVxucmV0dXJuIGZhbHNlO307anN0cy5nZW9tZ3JhcGguaW5kZXguU2VnbWVudEludGVyc2VjdG9yLnByb3RvdHlwZS5hZGRJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKGUwLHNlZ0luZGV4MCxlMSxzZWdJbmRleDEpe2lmKGUwPT09ZTEmJnNlZ0luZGV4MD09PXNlZ0luZGV4MSlcbnJldHVybjt0aGlzLm51bVRlc3RzKys7dmFyIHAwMD1lMC5nZXRDb29yZGluYXRlcygpW3NlZ0luZGV4MF07dmFyIHAwMT1lMC5nZXRDb29yZGluYXRlcygpW3NlZ0luZGV4MCsxXTt2YXIgcDEwPWUxLmdldENvb3JkaW5hdGVzKClbc2VnSW5kZXgxXTt2YXIgcDExPWUxLmdldENvb3JkaW5hdGVzKClbc2VnSW5kZXgxKzFdO3RoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbihwMDAscDAxLHAxMCxwMTEpO2lmKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpe2lmKHRoaXMucmVjb3JkSXNvbGF0ZWQpe2UwLnNldElzb2xhdGVkKGZhbHNlKTtlMS5zZXRJc29sYXRlZChmYWxzZSk7fVxudGhpcy5udW1JbnRlcnNlY3Rpb25zKys7aWYoIXRoaXMuaXNUcml2aWFsSW50ZXJzZWN0aW9uKGUwLHNlZ0luZGV4MCxlMSxzZWdJbmRleDEpKXt0aGlzLl9oYXNJbnRlcnNlY3Rpb249dHJ1ZTtpZih0aGlzLmluY2x1ZGVQcm9wZXJ8fCF0aGlzLmxpLmlzUHJvcGVyKCkpe2UwLmFkZEludGVyc2VjdGlvbnModGhpcy5saSxzZWdJbmRleDAsMCk7ZTEuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmxpLHNlZ0luZGV4MSwxKTt9XG5pZih0aGlzLmxpLmlzUHJvcGVyKCkpe3RoaXMucHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ9dGhpcy5saS5nZXRJbnRlcnNlY3Rpb24oMCkuY2xvbmUoKTt0aGlzLmhhc1Byb3Blcj10cnVlO2lmKCF0aGlzLmlzQm91bmRhcnlQb2ludCh0aGlzLmxpLHRoaXMuYmR5Tm9kZXMpKVxudGhpcy5oYXNQcm9wZXJJbnRlcmlvcj10cnVlO319fX07anN0cy5nZW9tZ3JhcGguaW5kZXguU2VnbWVudEludGVyc2VjdG9yLnByb3RvdHlwZS5pc0JvdW5kYXJ5UG9pbnQ9ZnVuY3Rpb24obGksYmR5Tm9kZXMpe2lmKGJkeU5vZGVzPT09bnVsbClcbnJldHVybiBmYWxzZTtpZihiZHlOb2RlcyBpbnN0YW5jZW9mIEFycmF5KXtpZih0aGlzLmlzQm91bmRhcnlQb2ludChsaSxiZHlOb2Rlc1swXSkpXG5yZXR1cm4gdHJ1ZTtpZih0aGlzLmlzQm91bmRhcnlQb2ludChsaSxiZHlOb2Rlc1sxXSkpXG5yZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2U7fWVsc2V7Zm9yKHZhciBpPWJkeU5vZGVzLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgbm9kZT1pLm5leHQoKTt2YXIgcHQ9bm9kZS5nZXRDb29yZGluYXRlKCk7aWYobGkuaXNJbnRlcnNlY3Rpb24ocHQpKVxucmV0dXJuIHRydWU7fVxucmV0dXJuIGZhbHNlO319O30pKCk7IiwiLypcbiAgamF2YXNjcmlwdC51dGlsIGlzIGEgcG9ydCBvZiBzZWxlY3RlZCBwYXJ0cyBvZiBqYXZhLnV0aWwgdG8gSmF2YVNjcmlwdCB3aGljaFxuICBtYWluIHB1cnBvc2UgaXMgdG8gZWFzZSBwb3J0aW5nIEphdmEgY29kZSB0byBKYXZhU2NyaXB0LlxuICBcbiAgVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbiAgQ29weXJpZ2h0IChDKSAyMDExLTIwMTQgYnkgVGhlIEF1dGhvcnNcblxuICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4gIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiAgVEhFIFNPRlRXQVJFLlxuKi9cbjsoZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Z1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLnNwbGl0KFwiLlwiKSxkPWU7Y1swXWluIGR8fCFkLmV4ZWNTY3JpcHR8fGQuZXhlY1NjcmlwdChcInZhciBcIitjWzBdKTtmb3IodmFyIHQ7Yy5sZW5ndGgmJih0PWMuc2hpZnQoKSk7KWMubGVuZ3RofHx2b2lkIDA9PT1iP2Q9ZFt0XT9kW3RdOmRbdF09e306ZFt0XT1ifWZ1bmN0aW9uIGcoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EucT1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EucD1mdW5jdGlvbihhLGMsTyl7dmFyIE09QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBiLnByb3RvdHlwZVtjXS5hcHBseShhLE0pfX07ZnVuY3Rpb24gaChhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKGgsRXJyb3IpO2YoXCJqYXZhc2NyaXB0LnV0aWwuRW1wdHlTdGFja0V4Y2VwdGlvblwiLGgpO2gucHJvdG90eXBlLm5hbWU9XCJFbXB0eVN0YWNrRXhjZXB0aW9uXCI7ZnVuY3Rpb24gayhhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKGssRXJyb3IpO2YoXCJqYXZhc2NyaXB0LnV0aWwuSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvblwiLGspO2sucHJvdG90eXBlLm5hbWU9XCJJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXCI7ZnVuY3Rpb24gbCgpe31mKFwiamF2YXNjcmlwdC51dGlsLkl0ZXJhdG9yXCIsbCk7bC5wcm90b3R5cGUuaGFzTmV4dD1sLnByb3RvdHlwZS5jO2wucHJvdG90eXBlLm5leHQ9bC5wcm90b3R5cGUubmV4dDtsLnByb3RvdHlwZS5yZW1vdmU9bC5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIG0oKXt9ZihcImphdmFzY3JpcHQudXRpbC5Db2xsZWN0aW9uXCIsbSk7ZnVuY3Rpb24gbigpe31nKG4sbSk7ZihcImphdmFzY3JpcHQudXRpbC5MaXN0XCIsbik7ZnVuY3Rpb24gcCgpe31mKFwiamF2YXNjcmlwdC51dGlsLk1hcFwiLHApO2Z1bmN0aW9uIHEoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhxLEVycm9yKTtmKFwiamF2YXNjcmlwdC51dGlsLk5vU3VjaEVsZW1lbnRFeGNlcHRpb25cIixxKTtxLnByb3RvdHlwZS5uYW1lPVwiTm9TdWNoRWxlbWVudEV4Y2VwdGlvblwiO2Z1bmN0aW9uIHIoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhyLEVycm9yKTtyLnByb3RvdHlwZS5uYW1lPVwiT3BlcmF0aW9uTm90U3VwcG9ydGVkXCI7ZnVuY3Rpb24gcyhhKXt0aGlzLmE9W107YSBpbnN0YW5jZW9mIG0mJnRoaXMuZShhKX1nKHMsbik7ZihcImphdmFzY3JpcHQudXRpbC5BcnJheUxpc3RcIixzKTtzLnByb3RvdHlwZS5hPW51bGw7cy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe3RoaXMuYS5wdXNoKGEpO3JldHVybiEwfTtzLnByb3RvdHlwZS5hZGQ9cy5wcm90b3R5cGUuYWRkO3MucHJvdG90eXBlLmU9ZnVuY3Rpb24oYSl7Zm9yKGE9YS5mKCk7YS5jKCk7KXRoaXMuYWRkKGEubmV4dCgpKTtyZXR1cm4hMH07cy5wcm90b3R5cGUuYWRkQWxsPXMucHJvdG90eXBlLmU7cy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hW2FdO3RoaXMuYVthXT1iO3JldHVybiBjfTtzLnByb3RvdHlwZS5zZXQ9cy5wcm90b3R5cGUuc2V0O3MucHJvdG90eXBlLmY9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHUodGhpcyl9O3MucHJvdG90eXBlLml0ZXJhdG9yPXMucHJvdG90eXBlLmY7XG5zLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7aWYoMD5hfHxhPj10aGlzLnNpemUoKSl0aHJvdyBuZXcgaztyZXR1cm4gdGhpcy5hW2FdfTtzLnByb3RvdHlwZS5nZXQ9cy5wcm90b3R5cGUuZ2V0O3MucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGh9O3MucHJvdG90eXBlLmlzRW1wdHk9cy5wcm90b3R5cGUuZztzLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O3MucHJvdG90eXBlLnNpemU9cy5wcm90b3R5cGUuc2l6ZTtzLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07cy5wcm90b3R5cGUudG9BcnJheT1zLnByb3RvdHlwZS5oO1xucy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxjPTAsZD10aGlzLmEubGVuZ3RoO2M8ZDtjKyspaWYodGhpcy5hW2NdPT09YSl7dGhpcy5hLnNwbGljZShjLDEpO2I9ITA7YnJlYWt9cmV0dXJuIGJ9O3MucHJvdG90eXBlLnJlbW92ZT1zLnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gdShhKXt0aGlzLmo9YX1mKFwiJGpzY29tcC5zY29wZS5JdGVyYXRvcl9cIix1KTt1LnByb3RvdHlwZS5qPW51bGw7dS5wcm90b3R5cGUuYj0wO3UucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmI9PT10aGlzLmouc2l6ZSgpKXRocm93IG5ldyBxO3JldHVybiB0aGlzLmouZ2V0KHRoaXMuYisrKX07dS5wcm90b3R5cGUubmV4dD11LnByb3RvdHlwZS5uZXh0O3UucHJvdG90eXBlLmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iPHRoaXMuai5zaXplKCk/ITA6ITF9O3UucHJvdG90eXBlLmhhc05leHQ9dS5wcm90b3R5cGUuYztcbnUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307dS5wcm90b3R5cGUucmVtb3ZlPXUucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiB2KCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuQXJyYXlzXCIsdik7XG52LnNvcnQ9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF0sYixjLGQ7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpYS5zb3J0KCk7ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCljPWFyZ3VtZW50c1sxXSxkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuY29tcGFyZShhLGIpfSxhLnNvcnQoZCk7ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aClmb3IoYj1hLnNsaWNlKGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pLGIuc29ydCgpLGQ9YS5zbGljZSgwLGFyZ3VtZW50c1sxXSkuY29uY2F0KGIsYS5zbGljZShhcmd1bWVudHNbMl0sYS5sZW5ndGgpKSxhLnNwbGljZSgwLGEubGVuZ3RoKSxiPTA7YjxkLmxlbmd0aDtiKyspYS5wdXNoKGRbYl0pO2Vsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGI9YS5zbGljZShhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKSxjPWFyZ3VtZW50c1szXSxkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuY29tcGFyZShhLGIpfSxiLnNvcnQoZCksXG5kPWEuc2xpY2UoMCxhcmd1bWVudHNbMV0pLmNvbmNhdChiLGEuc2xpY2UoYXJndW1lbnRzWzJdLGEubGVuZ3RoKSksYS5zcGxpY2UoMCxhLmxlbmd0aCksYj0wO2I8ZC5sZW5ndGg7YisrKWEucHVzaChkW2JdKX07di5hc0xpc3Q9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW5ldyBzLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYi5hZGQoYVtjXSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIHcoKXt0aGlzLmk9e319Zyh3LHApO2YoXCJqYXZhc2NyaXB0LnV0aWwuSGFzaE1hcFwiLHcpO3cucHJvdG90eXBlLmk9bnVsbDt3LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaVthXXx8bnVsbH07dy5wcm90b3R5cGUuZ2V0PXcucHJvdG90eXBlLmdldDt3LnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pW2FdPWJ9O3cucHJvdG90eXBlLnB1dD13LnByb3RvdHlwZS5wdXQ7dy5wcm90b3R5cGUubT1mdW5jdGlvbigpe3ZhciBhPW5ldyBzLGI7Zm9yKGIgaW4gdGhpcy5pKXRoaXMuaS5oYXNPd25Qcm9wZXJ0eShiKSYmYS5hZGQodGhpcy5pW2JdKTtyZXR1cm4gYX07dy5wcm90b3R5cGUudmFsdWVzPXcucHJvdG90eXBlLm07dy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm0oKS5zaXplKCl9O3cucHJvdG90eXBlLnNpemU9dy5wcm90b3R5cGUuc2l6ZTtmdW5jdGlvbiB4KCl7fWcoeCxtKTtmKFwiamF2YXNjcmlwdC51dGlsLlNldFwiLHgpO2Z1bmN0aW9uIHkoYSl7dGhpcy5hPVtdO2EgaW5zdGFuY2VvZiBtJiZ0aGlzLmUoYSl9Zyh5LHgpO2YoXCJqYXZhc2NyaXB0LnV0aWwuSGFzaFNldFwiLHkpO3kucHJvdG90eXBlLmE9bnVsbDt5LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylpZih0aGlzLmFbYl09PT1hKXJldHVybiEwO3JldHVybiExfTt5LnByb3RvdHlwZS5jb250YWlucz15LnByb3RvdHlwZS5jb250YWluczt5LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5jb250YWlucyhhKSlyZXR1cm4hMTt0aGlzLmEucHVzaChhKTtyZXR1cm4hMH07eS5wcm90b3R5cGUuYWRkPXkucHJvdG90eXBlLmFkZDt5LnByb3RvdHlwZS5lPWZ1bmN0aW9uKGEpe2ZvcihhPWEuZigpO2EuYygpOyl0aGlzLmFkZChhLm5leHQoKSk7cmV0dXJuITB9O3kucHJvdG90eXBlLmFkZEFsbD15LnByb3RvdHlwZS5lO1xueS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTt5LnByb3RvdHlwZS5yZW1vdmU9eS5wcm90b3R5cGUucmVtb3ZlO3kucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07eS5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aH07eS5wcm90b3R5cGUuaXNFbXB0eT15LnByb3RvdHlwZS5nO3kucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTt5LnByb3RvdHlwZS50b0FycmF5PXkucHJvdG90eXBlLmg7eS5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3JldHVybiBuZXcgeih0aGlzKX07eS5wcm90b3R5cGUuaXRlcmF0b3I9eS5wcm90b3R5cGUuZjtmdW5jdGlvbiB6KGEpe3RoaXMuaz1hfWYoXCIkanNjb21wLnNjb3BlLkl0ZXJhdG9yXyQxXCIseik7ei5wcm90b3R5cGUuaz1udWxsO1xuei5wcm90b3R5cGUuYj0wO3oucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmI9PT10aGlzLmsuc2l6ZSgpKXRocm93IG5ldyBxO3JldHVybiB0aGlzLmsuYVt0aGlzLmIrK119O3oucHJvdG90eXBlLm5leHQ9ei5wcm90b3R5cGUubmV4dDt6LnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYjx0aGlzLmsuc2l6ZSgpPyEwOiExfTt6LnByb3RvdHlwZS5oYXNOZXh0PXoucHJvdG90eXBlLmM7ei5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTt6LnByb3RvdHlwZS5yZW1vdmU9ei5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIEEoKXt9ZyhBLHApO2YoXCJqYXZhc2NyaXB0LnV0aWwuU29ydGVkTWFwXCIsQSk7ZnVuY3Rpb24gQigpe31nKEIseCk7ZihcImphdmFzY3JpcHQudXRpbC5Tb3J0ZWRTZXRcIixCKTtmdW5jdGlvbiBDKCl7dGhpcy5hPVtdfWcoQyxuKTtmKFwiamF2YXNjcmlwdC51dGlsLlN0YWNrXCIsQyk7Qy5wcm90b3R5cGUuYT1udWxsO0MucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYSl7dGhpcy5hLnB1c2goYSk7cmV0dXJuIGF9O0MucHJvdG90eXBlLnB1c2g9Qy5wcm90b3R5cGUucHVzaDtDLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hLmxlbmd0aCl0aHJvdyBuZXcgaDtyZXR1cm4gdGhpcy5hLnBvcCgpfTtDLnByb3RvdHlwZS5wb3A9Qy5wcm90b3R5cGUucG9wO0MucHJvdG90eXBlLm89ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hLmxlbmd0aCl0aHJvdyBuZXcgaDtyZXR1cm4gdGhpcy5hW3RoaXMuYS5sZW5ndGgtMV19O0MucHJvdG90eXBlLnBlZWs9Qy5wcm90b3R5cGUubztDLnByb3RvdHlwZS5lbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aD8hMDohMX07Qy5wcm90b3R5cGUuZW1wdHk9Qy5wcm90b3R5cGUuZW1wdHk7XG5DLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW1wdHkoKX07Qy5wcm90b3R5cGUuaXNFbXB0eT1DLnByb3RvdHlwZS5nO0MucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hLmluZGV4T2YoYSl9O0MucHJvdG90eXBlLnNlYXJjaD1DLnByb3RvdHlwZS5zZWFyY2g7Qy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTtDLnByb3RvdHlwZS5zaXplPUMucHJvdG90eXBlLnNpemU7Qy5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O0MucHJvdG90eXBlLnRvQXJyYXk9Qy5wcm90b3R5cGUuaDtmdW5jdGlvbiBEKGEpe3JldHVybiBudWxsPT1hP251bGw6YS5wYXJlbnR9ZnVuY3Rpb24gRShhLGIpe251bGwhPT1hJiYoYS5jb2xvcj1iKX1mdW5jdGlvbiBGKGEpe3JldHVybiBudWxsPT1hP251bGw6YS5sZWZ0fWZ1bmN0aW9uIEcoYSl7cmV0dXJuIG51bGw9PWE/bnVsbDphLnJpZ2h0fWZ1bmN0aW9uIEgoKXt0aGlzLmQ9bnVsbDt0aGlzLm49MH1nKEgsQSk7ZihcImphdmFzY3JpcHQudXRpbC5UcmVlTWFwXCIsSCk7SC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmQ7bnVsbCE9PWI7KXt2YXIgYz1hLmNvbXBhcmVUbyhiLmtleSk7aWYoMD5jKWI9Yi5sZWZ0O2Vsc2UgaWYoMDxjKWI9Yi5yaWdodDtlbHNlIHJldHVybiBiLnZhbHVlfXJldHVybiBudWxsfTtILnByb3RvdHlwZS5nZXQ9SC5wcm90b3R5cGUuZ2V0O1xuSC5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGEsYil7aWYobnVsbD09PXRoaXMuZClyZXR1cm4gdGhpcy5kPXtrZXk6YSx2YWx1ZTpiLGxlZnQ6bnVsbCxyaWdodDpudWxsLHBhcmVudDpudWxsLGNvbG9yOjB9LHRoaXMubj0xLG51bGw7dmFyIGM9dGhpcy5kLGQsdDtkbyBpZihkPWMsdD1hLmNvbXBhcmVUbyhjLmtleSksMD50KWM9Yy5sZWZ0O2Vsc2UgaWYoMDx0KWM9Yy5yaWdodDtlbHNlIHJldHVybiBkPWMudmFsdWUsYy52YWx1ZT1iLGQ7d2hpbGUobnVsbCE9PWMpO2M9e2tleTphLGxlZnQ6bnVsbCxyaWdodDpudWxsLHZhbHVlOmIscGFyZW50OmQsY29sb3I6MH07MD50P2QubGVmdD1jOmQucmlnaHQ9Yztmb3IoYy5jb2xvcj0xO251bGwhPWMmJmMhPXRoaXMuZCYmMT09Yy5wYXJlbnQuY29sb3I7KUQoYyk9PUYoRChEKGMpKSk/KGQ9RyhEKEQoYykpKSwxPT0obnVsbD09ZD8wOmQuY29sb3IpPyhFKEQoYyksMCksRShkLDApLEUoRChEKGMpKSwxKSxjPUQoRChjKSkpOihjPT1HKEQoYykpJiZcbihjPUQoYyksSSh0aGlzLGMpKSxFKEQoYyksMCksRShEKEQoYykpLDEpLEoodGhpcyxEKEQoYykpKSkpOihkPUYoRChEKGMpKSksMT09KG51bGw9PWQ/MDpkLmNvbG9yKT8oRShEKGMpLDApLEUoZCwwKSxFKEQoRChjKSksMSksYz1EKEQoYykpKTooYz09RihEKGMpKSYmKGM9RChjKSxKKHRoaXMsYykpLEUoRChjKSwwKSxFKEQoRChjKSksMSksSSh0aGlzLEQoRChjKSkpKSk7dGhpcy5kLmNvbG9yPTA7dGhpcy5uKys7cmV0dXJuIG51bGx9O0gucHJvdG90eXBlLnB1dD1ILnByb3RvdHlwZS5wdXQ7SC5wcm90b3R5cGUubT1mdW5jdGlvbigpe3ZhciBhPW5ldyBzLGI7Yj10aGlzLmQ7aWYobnVsbCE9Yilmb3IoO251bGwhPWIubGVmdDspYj1iLmxlZnQ7aWYobnVsbCE9PWIpZm9yKGEuYWRkKGIudmFsdWUpO251bGwhPT0oYj1LKGIpKTspYS5hZGQoYi52YWx1ZSk7cmV0dXJuIGF9O0gucHJvdG90eXBlLnZhbHVlcz1ILnByb3RvdHlwZS5tO1xuZnVuY3Rpb24gSShhLGIpe2lmKG51bGwhPWIpe3ZhciBjPWIucmlnaHQ7Yi5yaWdodD1jLmxlZnQ7bnVsbCE9Yy5sZWZ0JiYoYy5sZWZ0LnBhcmVudD1iKTtjLnBhcmVudD1iLnBhcmVudDtudWxsPT1iLnBhcmVudD9hLmQ9YzpiLnBhcmVudC5sZWZ0PT1iP2IucGFyZW50LmxlZnQ9YzpiLnBhcmVudC5yaWdodD1jO2MubGVmdD1iO2IucGFyZW50PWN9fWZ1bmN0aW9uIEooYSxiKXtpZihudWxsIT1iKXt2YXIgYz1iLmxlZnQ7Yi5sZWZ0PWMucmlnaHQ7bnVsbCE9Yy5yaWdodCYmKGMucmlnaHQucGFyZW50PWIpO2MucGFyZW50PWIucGFyZW50O251bGw9PWIucGFyZW50P2EuZD1jOmIucGFyZW50LnJpZ2h0PT1iP2IucGFyZW50LnJpZ2h0PWM6Yi5wYXJlbnQubGVmdD1jO2MucmlnaHQ9YjtiLnBhcmVudD1jfX1cbmZ1bmN0aW9uIEsoYSl7aWYobnVsbD09PWEpcmV0dXJuIG51bGw7aWYobnVsbCE9PWEucmlnaHQpZm9yKHZhciBiPWEucmlnaHQ7bnVsbCE9PWIubGVmdDspYj1iLmxlZnQ7ZWxzZSBmb3IoYj1hLnBhcmVudDtudWxsIT09YiYmYT09PWIucmlnaHQ7KWE9YixiPWIucGFyZW50O3JldHVybiBifUgucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ufTtILnByb3RvdHlwZS5zaXplPUgucHJvdG90eXBlLnNpemU7ZnVuY3Rpb24gTChhKXt0aGlzLmE9W107YSBpbnN0YW5jZW9mIG0mJnRoaXMuZShhKX1nKEwsQik7ZihcImphdmFzY3JpcHQudXRpbC5UcmVlU2V0XCIsTCk7TC5wcm90b3R5cGUuYT1udWxsO0wucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWlmKDA9PT10aGlzLmFbYl0uY29tcGFyZVRvKGEpKXJldHVybiEwO3JldHVybiExfTtMLnByb3RvdHlwZS5jb250YWlucz1MLnByb3RvdHlwZS5jb250YWlucztMLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5jb250YWlucyhhKSlyZXR1cm4hMTtmb3IodmFyIGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylpZigxPT09dGhpcy5hW2JdLmNvbXBhcmVUbyhhKSlyZXR1cm4gdGhpcy5hLnNwbGljZShiLDAsYSksITA7dGhpcy5hLnB1c2goYSk7cmV0dXJuITB9O0wucHJvdG90eXBlLmFkZD1MLnByb3RvdHlwZS5hZGQ7XG5MLnByb3RvdHlwZS5lPWZ1bmN0aW9uKGEpe2ZvcihhPWEuZigpO2EuYygpOyl0aGlzLmFkZChhLm5leHQoKSk7cmV0dXJuITB9O0wucHJvdG90eXBlLmFkZEFsbD1MLnByb3RvdHlwZS5lO0wucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307TC5wcm90b3R5cGUucmVtb3ZlPUwucHJvdG90eXBlLnJlbW92ZTtMLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O0wucHJvdG90eXBlLnNpemU9TC5wcm90b3R5cGUuc2l6ZTtMLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RofTtMLnByb3RvdHlwZS5pc0VtcHR5PUwucHJvdG90eXBlLmc7TC5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O0wucHJvdG90eXBlLnRvQXJyYXk9TC5wcm90b3R5cGUuaDtMLnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBOKHRoaXMpfTtcbkwucHJvdG90eXBlLml0ZXJhdG9yPUwucHJvdG90eXBlLmY7ZnVuY3Rpb24gTihhKXt0aGlzLmw9YX1mKFwiJGpzY29tcC5zY29wZS5JdGVyYXRvcl8kMlwiLE4pO04ucHJvdG90eXBlLmw9bnVsbDtOLnByb3RvdHlwZS5iPTA7Ti5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuYj09PXRoaXMubC5zaXplKCkpdGhyb3cgbmV3IHE7cmV0dXJuIHRoaXMubC5hW3RoaXMuYisrXX07Ti5wcm90b3R5cGUubmV4dD1OLnByb3RvdHlwZS5uZXh0O04ucHJvdG90eXBlLmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iPHRoaXMubC5zaXplKCk/ITA6ITF9O04ucHJvdG90eXBlLmhhc05leHQ9Ti5wcm90b3R5cGUuYztOLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O04ucHJvdG90eXBlLnJlbW92ZT1OLnByb3RvdHlwZS5yZW1vdmU7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBnbG9iYWwmJihnbG9iYWwuamF2YXNjcmlwdD17fSxnbG9iYWwuamF2YXNjcmlwdC51dGlsPXt9LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0PXMsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5BcnJheXM9dixnbG9iYWwuamF2YXNjcmlwdC51dGlsLkNvbGxlY3Rpb249bSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkVtcHR5U3RhY2tFeGNlcHRpb249aCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkhhc2hNYXA9dyxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkhhc2hTZXQ9eSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb249ayxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkl0ZXJhdG9yPWwsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5MaXN0PW4sZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5NYXA9cCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLk5vU3VjaEVsZW1lbnRFeGNlcHRpb249cSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLk9wZXJhdGlvbk5vdFN1cHBvcnRlZD1cbnIsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5TZXQ9eCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlNvcnRlZE1hcD1BLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU29ydGVkU2V0PUIsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5TdGFjaz1DLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuVHJlZU1hcD1ILGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuVHJlZVNldD1MKTt9KS5jYWxsKHRoaXMpO1xuIiwicmVxdWlyZSgnLi9kaXN0L2phdmFzY3JpcHQudXRpbC1ub2RlLm1pbi5qcycpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmYyl7XG4gIHZhciB0eXBlID0gZmMuZmVhdHVyZXNbMF0uZ2VvbWV0cnkudHlwZTtcbiAgdmFyIGVycjtcbiAgdmFyIGdlb21ldHJpZXMgPSBmYy5mZWF0dXJlcy5tYXAoZnVuY3Rpb24oZil7XG4gICAgcmV0dXJuIGYuZ2VvbWV0cnk7XG4gIH0pXG5cbiAgc3dpdGNoKHR5cGUpe1xuICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgIHZhciBtdWx0aVBvaW50ID0ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgdHlwZTogJ011bHRpUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbXVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbXVsdGlQb2ludC5nZW9tZXRyeS5jb29yZGluYXRlcyA9IHBsdWNrQ29vZHMoZ2VvbWV0cmllcyk7XG4gICAgICByZXR1cm4gbXVsdGlQb2ludDtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICB2YXIgbXVsdGlMaW5lU3RyaW5nID0ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgdHlwZTogJ011bHRpTGluZVN0cmluZycsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IFtdXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBtdWx0aUxpbmVTdHJpbmcuZ2VvbWV0cnkuY29vcmRpbmF0ZXMgPSBwbHVja0Nvb2RzKGdlb21ldHJpZXMpXG4gICAgICByZXR1cm4gbXVsdGlMaW5lU3RyaW5nO1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdQb2x5Z29uJzpcbiAgICAgIHZhciBtdWx0aVBvbHlnb24gPSB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiAnTXVsdGlQb2x5Z29uJyxcbiAgICAgICAgICBjb29yZGluYXRlczogW11cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG11bHRpUG9seWdvbi5nZW9tZXRyeS5jb29yZGluYXRlcyA9IHBsdWNrQ29vZHMoZ2VvbWV0cmllcylcbiAgICAgIHJldHVybiBtdWx0aVBvbHlnb247XG4gICAgICBicmVha1xuICB9XG59XG5cbmZ1bmN0aW9uIHBsdWNrQ29vZHMobXVsdGkpe1xuICByZXR1cm4gbXVsdGkubWFwKGZ1bmN0aW9uKGdlb20pe1xuICAgIHJldHVybiBnZW9tLmNvb3JkaW5hdGVzO1xuICB9KTtcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZlYXR1cmVzKXtcbiAgdmFyIGZjID0ge1xuICAgIFwidHlwZVwiOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXG4gICAgXCJmZWF0dXJlc1wiOiBmZWF0dXJlc1xuICB9O1xuXG4gIHJldHVybiBmYztcbn0iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJib3gtcG9seWdvbi9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsInZhciBleHRlbnQgPSByZXF1aXJlKCd0dXJmLWV4dGVudCcpLFxuICAgIHBvaW50ID0gcmVxdWlyZSgndHVyZi1wb2ludCcpO1xuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBvZiBhbnkgdHlwZSBhbmQgcmV0dXJucyB0aGUgYWJzb2x1dGUgY2VudGVyIHBvaW50IG9mIGFsbCBmZWF0dXJlcy5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvY2VudGVyXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBmZWF0dXJlcyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGFueSB0eXBlXG4gKiBAcmV0dXJuIHtQb2ludH0gYSBQb2ludCBmZWF0dXJlIGF0IHRoZVxuICogYWJzb2x1dGUgY2VudGVyIHBvaW50IG9mIGFsbCBpbnB1dCBmZWF0dXJlc1xuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogICAgIHR1cmYucG9pbnQoWy05Ny41MjIyNTksIDM1LjQ2OTEwMF0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MDI3NTQsIDM1LjQ2MzQ1NV0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MDgyNjksIDM1LjQ2MzI0NV0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MTY4MDksIDM1LjQ2NTc3OV0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MTUzNzIsIDM1LjQ2NzA3Ml0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MDkzNjMsIDM1LjQ2MzA1M10pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MTExMjMsIDM1LjQ2NjYwMV0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MTg1NDcsIDM1LjQ2OTMyN10pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MTk3MDYsIDM1LjQ2OTY1OV0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MTc4MzksIDM1LjQ2Njk5OF0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MDg2NzgsIDM1LjQ2NDk0Ml0pLFxuICogICAgIHR1cmYucG9pbnQoWy05Ny41MTQ5MTQsIDM1LjQ2MzQ1M10pXG4gKiBdKTtcbiAqXG4gKiB2YXIgY2VudGVyUHQgPSB0dXJmLmNlbnRlcihmZWF0dXJlcyk7XG4gKiBjZW50ZXJQdC5wcm9wZXJ0aWVzWydtYXJrZXItc2l6ZSddID0gJ2xhcmdlJztcbiAqIGNlbnRlclB0LnByb3BlcnRpZXNbJ21hcmtlci1jb2xvciddID0gJyMwMDAnO1xuICpcbiAqIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKGZlYXR1cmVzLmZlYXR1cmVzLmNvbmNhdChjZW50ZXJQdCkpO1xuICpcbiAqIC8vPXJlc3VsdFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGF5ZXIsIGRvbmUpe1xuICB2YXIgZXh0ID0gZXh0ZW50KGxheWVyKTtcbiAgdmFyIHggPSAoZXh0WzBdICsgZXh0WzJdKS8yO1xuICB2YXIgeSA9IChleHRbMV0gKyBleHRbM10pLzI7XG4gIHJldHVybiBwb2ludChbeCwgeV0pO1xufTtcbiIsInZhciBmbGF0dGVuID0gcmVxdWlyZSgnZmxhdHRlbicpO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGV4dGVudCBvZiBhbGwgZmVhdHVyZXMgYW5kIHJldHVybnMgYSBib3VuZGluZyBib3guXG4gKlxuICogQG1vZHVsZSB0dXJmL2V4dGVudFxuICogQHBhcmFtIHtHZW9KU09OLU9iamVjdH0gaW5wdXQgLSBhbnkgdmFsaWQgR2VvSlNPTiBPYmplY3RcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IGV4dGVudCAtIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIEdlb0pTT04gZ2l2ZW5cbiAqIGFzIGFuIGFycmF5IGluIFdTRU4gb3JkZXIuXG4gKiBAZXhhbXBsZVxuICogdmFyIGV4dGVudCA9IHJlcXVpcmUoJ3R1cmYtZXh0ZW50JylcbiAqIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJylcbiAqIHZhciBmYyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKCcvcGF0aC90by9teUZlYXR1cmVDb2xsZWN0aW9uLmdlb2pzb24nKSlcbiAqIHZhciBiYm94ID0gZXh0ZW50KGZjKVxuICogY29uc29sZS5sb2coYmJveCkgLy8gW21pblgsIG1pblksIG1heFgsIG1heFldXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGF5ZXIpe1xuICB2YXIgZXh0ZW50ID0gW0luZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHldO1xuXG4gIHZhciBmZWF0dXJlcyA9IFtdO1xuICBpZiAobGF5ZXIudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykgZmVhdHVyZXMgPSBsYXllci5mZWF0dXJlcztcbiAgZWxzZSBpZiAobGF5ZXIudHlwZSA9PT0gJ0ZlYXR1cmUnKSBmZWF0dXJlcyA9IFtsYXllcl07XG4gIGVsc2UgZmVhdHVyZXMgPSBbeyBnZW9tZXRyeTogbGF5ZXIgfV07XG5cbiAgZm9yKHZhciBpID0gMDsgaSA8IGZlYXR1cmVzLmxlbmd0aDsgaSsrKXtcbiAgICB2YXIgY29vcmRzID0gZmVhdHVyZXNbaV0uZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgc3dpdGNoKGZlYXR1cmVzW2ldLmdlb21ldHJ5LnR5cGUpe1xuICAgICAgY2FzZSAnUG9pbnQnOlxuICAgICAgICBleHRlbnQwKGNvb3JkcywgZXh0ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdMaW5lU3RyaW5nJzpcbiAgICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICBleHRlbnQxKGNvb3JkcywgZXh0ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdQb2x5Z29uJzpcbiAgICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgICAgIGV4dGVudDIoY29vcmRzLCBleHRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgIGV4dGVudDMoY29vcmRzLCBleHRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ1Vua25vd24gR2VvbWV0cnkgVHlwZScpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufTtcblxuZnVuY3Rpb24gZXh0ZW50MChjb29yZCwgZXh0ZW50KSB7XG4gIGlmKGV4dGVudFswXSA+IGNvb3JkWzBdKSBleHRlbnRbMF0gPSBjb29yZFswXTtcbiAgaWYoZXh0ZW50WzFdID4gY29vcmRbMV0pIGV4dGVudFsxXSA9IGNvb3JkWzFdO1xuICBpZihleHRlbnRbMl0gPCBjb29yZFswXSkgZXh0ZW50WzJdID0gY29vcmRbMF07XG4gIGlmKGV4dGVudFszXSA8IGNvb3JkWzFdKSBleHRlbnRbM10gPSBjb29yZFsxXTtcbn1cblxuZnVuY3Rpb24gZXh0ZW50MShjb29yZHMsIGV4dGVudCkge1xuICBmb3IodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKXtcbiAgICB2YXIgY29vcmQgPSBjb29yZHNbaV07XG4gICAgaWYoZXh0ZW50WzBdID4gY29vcmRbMF0pIGV4dGVudFswXSA9IGNvb3JkWzBdO1xuICAgIGlmKGV4dGVudFsxXSA+IGNvb3JkWzFdKSBleHRlbnRbMV0gPSBjb29yZFsxXTtcbiAgICBpZihleHRlbnRbMl0gPCBjb29yZFswXSkgZXh0ZW50WzJdID0gY29vcmRbMF07XG4gICAgaWYoZXh0ZW50WzNdIDwgY29vcmRbMV0pIGV4dGVudFszXSA9IGNvb3JkWzFdO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV4dGVudDIoY29vcmRzLCBleHRlbnQpIHtcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKyl7XG4gICAgZm9yKHZhciBqID0gMDsgaiA8IGNvb3Jkc1tpXS5sZW5ndGg7IGorKyl7XG4gICAgICB2YXIgY29vcmQgPSBjb29yZHNbaV1bal07XG4gICAgICBpZihleHRlbnRbMF0gPiBjb29yZFswXSkgZXh0ZW50WzBdID0gY29vcmRbMF07XG4gICAgICBpZihleHRlbnRbMV0gPiBjb29yZFsxXSkgZXh0ZW50WzFdID0gY29vcmRbMV07XG4gICAgICBpZihleHRlbnRbMl0gPCBjb29yZFswXSkgZXh0ZW50WzJdID0gY29vcmRbMF07XG4gICAgICBpZihleHRlbnRbM10gPCBjb29yZFsxXSkgZXh0ZW50WzNdID0gY29vcmRbMV07XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGV4dGVudDMoY29vcmRzLCBleHRlbnQpIHtcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKyl7XG4gICAgZm9yKHZhciBqID0gMDsgaiA8IGNvb3Jkc1tpXS5sZW5ndGg7IGorKyl7XG4gICAgICBmb3IodmFyIGsgPSAwOyBrIDwgY29vcmRzW2ldW2pdLmxlbmd0aDsgaysrKXtcbiAgICAgICAgdmFyIGNvb3JkID0gY29vcmRzW2ldW2pdW2tdO1xuICAgICAgICBpZihleHRlbnRbMF0gPiBjb29yZFswXSkgZXh0ZW50WzBdID0gY29vcmRbMF07XG4gICAgICAgIGlmKGV4dGVudFsxXSA+IGNvb3JkWzFdKSBleHRlbnRbMV0gPSBjb29yZFsxXTtcbiAgICAgICAgaWYoZXh0ZW50WzJdIDwgY29vcmRbMF0pIGV4dGVudFsyXSA9IGNvb3JkWzBdO1xuICAgICAgICBpZihleHRlbnRbM10gPCBjb29yZFsxXSkgZXh0ZW50WzNdID0gY29vcmRbMV07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZsYXR0ZW4obGlzdCwgZGVwdGgpIHtcbiAgZGVwdGggPSAodHlwZW9mIGRlcHRoID09ICdudW1iZXInKSA/IGRlcHRoIDogSW5maW5pdHk7XG5cbiAgcmV0dXJuIF9mbGF0dGVuKGxpc3QsIDEpO1xuXG4gIGZ1bmN0aW9uIF9mbGF0dGVuKGxpc3QsIGQpIHtcbiAgICByZXR1cm4gbGlzdC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaXRlbSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgZCA8IGRlcHRoKSB7XG4gICAgICAgIHJldHVybiBhY2MuY29uY2F0KF9mbGF0dGVuKGl0ZW0sIGQgKyAxKSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoaXRlbSk7XG4gICAgICB9XG4gICAgfSwgW10pO1xuICB9XG59O1xuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hbG9uZy9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgZWFjaCA9IHJlcXVpcmUoJ3R1cmYtbWV0YScpLmNvb3JkRWFjaDtcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBGZWF0dXJlfSBvciB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IG9mIGFueSB0eXBlIGFuZCBjYWxjdWxhdGVzIHRoZSBjZW50cm9pZCB1c2luZyB0aGUgYXJpdGhtZXRpYyBtZWFuIG9mIGFsbCB2ZXJ0aWNlcy5cbiAqIFRoaXMgbGVzc2VucyB0aGUgZWZmZWN0IG9mIHNtYWxsIGlzbGFuZHMgYW5kIGFydGlmYWN0cyB3aGVuIGNhbGN1bGF0aW5nXG4gKiB0aGUgY2VudHJvaWQgb2YgYSBzZXQgb2YgcG9seWdvbnMuXG4gKlxuICogQG1vZHVsZSB0dXJmL2NlbnRyb2lkXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBmYyBhIHtAbGluayBGZWF0dXJlfSBvciBGZWF0dXJlQ29sbGVjdGlvbiBvZiBhbnkgdHlwZVxuICogQHJldHVybiB7UG9pbnR9IGEgUG9pbnQgZmVhdHVyZSBhdCB0aGUgY2VudHJvaWQgb2YgdGhlIGlucHV0IGZlYXR1cmUocylcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seSA9IHR1cmYucG9seWdvbihbW1xuICogXHRbMTA1LjgxODkzOSwyMS4wMDQ3MTRdLFxuICogXHRbMTA1LjgxODkzOSwyMS4wNjE3NTRdLFxuICogXHRbMTA1Ljg5MDAwNywyMS4wNjE3NTRdLFxuICogXHRbMTA1Ljg5MDAwNywyMS4wMDQ3MTRdLFxuICogXHRbMTA1LjgxODkzOSwyMS4wMDQ3MTRdXG4gKiBdXSk7XG4gKlxuICogdmFyIGNlbnRyb2lkUHQgPSB0dXJmLmNlbnRyb2lkKHBvbHkpO1xuICpcbiAqIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtwb2x5LCBjZW50cm9pZFB0XSk7XG4gKlxuICogLy89cmVzdWx0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmVhdHVyZXMpe1xuICB2YXIgeFN1bSA9IDAsIHlTdW0gPSAwLCBsZW4gPSAwO1xuICBlYWNoKGZlYXR1cmVzLCBmdW5jdGlvbihjb29yZCkge1xuICAgIHhTdW0gKz0gY29vcmRbMF07XG4gICAgeVN1bSArPSBjb29yZFsxXTtcbiAgICBsZW4rKztcbiAgfSk7XG4gIHJldHVybiBwb2ludChbeFN1bSAvIGxlbiwgeVN1bSAvIGxlbl0pO1xufTtcbiIsIi8qKlxuICogTGF6aWx5IGl0ZXJhdGUgb3ZlciBjb29yZGluYXRlcyBpbiBhbnkgR2VvSlNPTiBvYmplY3QsIHNpbWlsYXIgdG9cbiAqIEFycmF5LmZvckVhY2guXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGxheWVyIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAodmFsdWUpXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0geyB0eXBlOiAnUG9pbnQnLCBjb29yZGluYXRlczogWzAsIDBdIH07XG4gKiBjb29yZEVhY2gocG9pbnQsIGZ1bmN0aW9uKGNvb3Jkcykge1xuICogICAvLyBjb29yZHMgaXMgZXF1YWwgdG8gWzAsIDBdXG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gY29vcmRFYWNoKGxheWVyLCBjYWxsYmFjaykge1xuICB2YXIgZmVhdHVyZXMgPSBbXSwgaSwgaiwgaywgZztcblxuICBzd2l0Y2ggKGxheWVyLnR5cGUpIHtcbiAgICAgIGNhc2UgJ0ZlYXR1cmVDb2xsZWN0aW9uJzpcbiAgICAgICAgZmVhdHVyZXMgPSBsYXllci5mZWF0dXJlcztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGZWF0dXJlJzpcbiAgICAgICAgZmVhdHVyZXMgPSBbbGF5ZXJdO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZlYXR1cmVzID0gW3sgZ2VvbWV0cnk6IGxheWVyIH1dO1xuICAgICAgICBicmVhaztcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCBmZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBnZW9tZXRyaWVzID0gKGZlYXR1cmVzW2ldLmdlb21ldHJ5LnR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nKSA/XG4gICAgICAgIGZlYXR1cmVzW2ldLmdlb21ldHJ5Lmdlb21ldHJpZXMgOlxuICAgICAgICBbZmVhdHVyZXNbaV0uZ2VvbWV0cnldO1xuICAgIGZvciAoZyA9IDA7IGcgPCBnZW9tZXRyaWVzLmxlbmd0aDsgZysrKSB7XG4gICAgICB2YXIgY29vcmRzID0gZ2VvbWV0cmllc1tnXS5jb29yZGluYXRlcztcbiAgICAgIHN3aXRjaCAoZ2VvbWV0cmllc1tnXS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgICBjYWxsYmFjayhjb29yZHMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdMaW5lU3RyaW5nJzpcbiAgICAgICAgY2FzZSAnTXVsdGlQb2ludCc6XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IGNvb3Jkcy5sZW5ndGg7IGorKykgY2FsbGJhY2soY29vcmRzW2pdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnUG9seWdvbic6XG4gICAgICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IGNvb3Jkcy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBjb29yZHNbal0ubGVuZ3RoOyBrKyspXG4gICAgICAgICAgICAgIGNhbGxiYWNrKGNvb3Jkc1tqXVtrXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IGNvb3Jkcy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBjb29yZHNbal0ubGVuZ3RoOyBrKyspXG4gICAgICAgICAgICAgIGZvciAobCA9IDA7IGwgPCBjb29yZHNbal1ba10ubGVuZ3RoOyBsKyspXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY29vcmRzW2pdW2tdW2xdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gR2VvbWV0cnkgVHlwZScpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxubW9kdWxlLmV4cG9ydHMuY29vcmRFYWNoID0gY29vcmRFYWNoO1xuXG4vKipcbiAqIExhemlseSByZWR1Y2UgY29vcmRpbmF0ZXMgaW4gYW55IEdlb0pTT04gb2JqZWN0IGludG8gYSBzaW5nbGUgdmFsdWUsXG4gKiBzaW1pbGFyIHRvIGhvdyBBcnJheS5yZWR1Y2Ugd29ya3MuIEhvd2V2ZXIsIGluIHRoaXMgY2FzZSB3ZSBsYXppbHkgcnVuXG4gKiB0aGUgcmVkdWN0aW9uLCBzbyBhbiBhcnJheSBvZiBhbGwgY29vcmRpbmF0ZXMgaXMgdW5uZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGxheWVyIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAobWVtbywgdmFsdWUpIGFuZCByZXR1cm5zXG4gKiBhIG5ldyBtZW1vXG4gKiBAcGFyYW0geyp9IG1lbW8gdGhlIHN0YXJ0aW5nIHZhbHVlIG9mIG1lbW86IGNhbiBiZSBhbnkgdHlwZS5cbiAqL1xuZnVuY3Rpb24gY29vcmRSZWR1Y2UobGF5ZXIsIGNhbGxiYWNrLCBtZW1vKSB7XG4gIGNvb3JkRWFjaChsYXllciwgZnVuY3Rpb24oY29vcmQpIHtcbiAgICBtZW1vID0gY2FsbGJhY2sobWVtbywgY29vcmQpO1xuICB9KTtcbiAgcmV0dXJuIG1lbW87XG59XG5tb2R1bGUuZXhwb3J0cy5jb29yZFJlZHVjZSA9IGNvb3JkUmVkdWNlO1xuXG4vKipcbiAqIExhemlseSBpdGVyYXRlIG92ZXIgcHJvcGVydHkgb2JqZWN0cyBpbiBhbnkgR2VvSlNPTiBvYmplY3QsIHNpbWlsYXIgdG9cbiAqIEFycmF5LmZvckVhY2guXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGxheWVyIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAodmFsdWUpXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0geyB0eXBlOiAnRmVhdHVyZScsIGdlb21ldHJ5OiBudWxsLCBwcm9wZXJ0aWVzOiB7IGZvbzogMSB9IH07XG4gKiBwcm9wRWFjaChwb2ludCwgZnVuY3Rpb24ocHJvcHMpIHtcbiAqICAgLy8gcHJvcHMgaXMgZXF1YWwgdG8geyBmb286IDF9XG4gKiB9KTtcbiAqL1xuZnVuY3Rpb24gcHJvcEVhY2gobGF5ZXIsIGNhbGxiYWNrKSB7XG4gIHZhciBpO1xuICBzd2l0Y2ggKGxheWVyLnR5cGUpIHtcbiAgICAgIGNhc2UgJ0ZlYXR1cmVDb2xsZWN0aW9uJzpcbiAgICAgICAgZmVhdHVyZXMgPSBsYXllci5mZWF0dXJlcztcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxheWVyLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhsYXllci5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZlYXR1cmUnOlxuICAgICAgICBjYWxsYmFjayhsYXllci5wcm9wZXJ0aWVzKTtcbiAgICAgICAgYnJlYWs7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzLnByb3BFYWNoID0gcHJvcEVhY2g7XG5cbi8qKlxuICogTGF6aWx5IHJlZHVjZSBwcm9wZXJ0aWVzIGluIGFueSBHZW9KU09OIG9iamVjdCBpbnRvIGEgc2luZ2xlIHZhbHVlLFxuICogc2ltaWxhciB0byBob3cgQXJyYXkucmVkdWNlIHdvcmtzLiBIb3dldmVyLCBpbiB0aGlzIGNhc2Ugd2UgbGF6aWx5IHJ1blxuICogdGhlIHJlZHVjdGlvbiwgc28gYW4gYXJyYXkgb2YgYWxsIHByb3BlcnRpZXMgaXMgdW5uZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGxheWVyIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgYSBtZXRob2QgdGhhdCB0YWtlcyAobWVtbywgY29vcmQpIGFuZCByZXR1cm5zXG4gKiBhIG5ldyBtZW1vXG4gKiBAcGFyYW0geyp9IG1lbW8gdGhlIHN0YXJ0aW5nIHZhbHVlIG9mIG1lbW86IGNhbiBiZSBhbnkgdHlwZS5cbiAqL1xuZnVuY3Rpb24gcHJvcFJlZHVjZShsYXllciwgY2FsbGJhY2ssIG1lbW8pIHtcbiAgcHJvcEVhY2gobGF5ZXIsIGZ1bmN0aW9uKHByb3ApIHtcbiAgICBtZW1vID0gY2FsbGJhY2sobWVtbywgcHJvcCk7XG4gIH0pO1xuICByZXR1cm4gbWVtbztcbn1cbm1vZHVsZS5leHBvcnRzLnByb3BSZWR1Y2UgPSBwcm9wUmVkdWNlO1xuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jZW50ZXIvbm9kZV9tb2R1bGVzL3R1cmYtcG9pbnQvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiLyoqXG4qIENvbWJpbmVzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBvZiB7QGxpbmsgUG9pbnR9LCB7QGxpbmsgTGluZVN0cmluZ30sIG9yIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyBpbnRvIHtAbGluayBNdWx0aVBvaW50fSwge0BsaW5rIE11bHRpTGluZVN0cmluZ30sIG9yIHtAbGluayBNdWx0aVBvbHlnb259IGZlYXR1cmVzLlxuKlxuKiBAbW9kdWxlIHR1cmYvY29tYmluZVxuKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBmYyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGFueSB0eXBlXG4qIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGNvcnJlc3BvbmRpbmcgdHlwZSB0byBpbnB1dFxuKiBAZXhhbXBsZVxuKiB2YXIgZmMgPSB7XG4qICAgXCJ0eXBlXCI6IFwiRmVhdHVyZUNvbGxlY3Rpb25cIixcbiogICBcImZlYXR1cmVzXCI6IFtcbiogICAgIHtcbiogICAgICAgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxuKiAgICAgICBcInByb3BlcnRpZXNcIjoge30sXG4qICAgICAgIFwiZ2VvbWV0cnlcIjoge1xuKiAgICAgICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4qICAgICAgICAgXCJjb29yZGluYXRlc1wiOiBbMTkuMDI2NDMyLCA0Ny40OTEzNF1cbiogICAgICAgfVxuKiAgICAgfSwge1xuKiAgICAgICBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4qICAgICAgIFwicHJvcGVydGllc1wiOiB7fSxcbiogICAgICAgXCJnZW9tZXRyeVwiOiB7XG4qICAgICAgICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiogICAgICAgICBcImNvb3JkaW5hdGVzXCI6IFsxOS4wNzQ0OTcsIDQ3LjUwOTU0OF1cbiogICAgICAgfVxuKiAgICAgfVxuKiAgIF1cbiogfTtcbipcbiogdmFyIGNvbWJpbmVkID0gdHVyZi5jb21iaW5lKGZjKTtcbipcbiogLy89Y29tYmluZWRcbiovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmMpIHtcbiAgdmFyIHR5cGUgPSBmYy5mZWF0dXJlc1swXS5nZW9tZXRyeS50eXBlO1xuICB2YXIgZ2VvbWV0cmllcyA9IGZjLmZlYXR1cmVzLm1hcChmdW5jdGlvbihmKSB7XG4gICAgcmV0dXJuIGYuZ2VvbWV0cnk7XG4gIH0pO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgdHlwZTogJ011bHRpUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBwbHVja0Nvb2RzKGdlb21ldHJpZXMpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgIHR5cGU6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBwbHVja0Nvb2RzKGdlb21ldHJpZXMpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgY2FzZSAnUG9seWdvbic6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgIHR5cGU6ICdNdWx0aVBvbHlnb24nLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBwbHVja0Nvb2RzKGdlb21ldHJpZXMpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYztcbiAgfVxufTtcblxuZnVuY3Rpb24gcGx1Y2tDb29kcyhtdWx0aSl7XG4gIHJldHVybiBtdWx0aS5tYXAoZnVuY3Rpb24oZ2VvbSl7XG4gICAgcmV0dXJuIGdlb20uY29vcmRpbmF0ZXM7XG4gIH0pO1xufVxuIiwiLy8gMS4gcnVuIHRpbiBvbiBwb2ludHNcbi8vIDIuIGNhbGN1bGF0ZSBsZW50aCBvZiBhbGwgZWRnZXMgYW5kIGFyZWEgb2YgYWxsIHRyaWFuZ2xlc1xuLy8gMy4gcmVtb3ZlIHRyaWFuZ2xlcyB0aGF0IGZhaWwgdGhlIG1heCBsZW5ndGggdGVzdFxuLy8gNC4gYnVmZmVyIHRoZSByZXN1bHRzIHNsaWdodGx5XG4vLyA1LiBtZXJnZSB0aGUgcmVzdWx0c1xudmFyIHQgPSB7fTtcbnQudGluID0gcmVxdWlyZSgndHVyZi10aW4nKTtcbnQubWVyZ2UgPSByZXF1aXJlKCd0dXJmLW1lcmdlJyk7XG50LmRpc3RhbmNlID0gcmVxdWlyZSgndHVyZi1kaXN0YW5jZScpO1xudC5wb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlcyBhbmRcbiAqIHJldHVybnMgYSBjb25jYXZlIGh1bGwuXG4gKlxuICogSW50ZXJuYWxseSwgdGhpcyBpbXBsZW1lbnRzXG4gKiBhIFtNb25vdG9uZSBjaGFpbiBhbGdvcml0aG1dKGh0dHA6Ly9lbi53aWtpYm9va3Mub3JnL3dpa2kvQWxnb3JpdGhtX0ltcGxlbWVudGF0aW9uL0dlb21ldHJ5L0NvbnZleF9odWxsL01vbm90b25lX2NoYWluI0phdmFTY3JpcHQpLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9jb25jYXZlXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2ludHMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RWRnZSB0aGUgc2l6ZSBvZiBhbiBlZGdlIG5lY2Vzc2FyeSBmb3IgcGFydCBvZiB0aGVcbiAqIGh1bGwgdG8gYmVjb21lIGNvbmNhdmUgKGluIG1pbGVzKVxuICogQHJldHVybnMge0ZlYXR1cmV9IGEge0BsaW5rIFBvbHlnb259IGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBtYXhFZGdlIHBhcmFtZXRlciBpcyBtaXNzaW5nXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogIHR1cmYucG9pbnQoWy02My42MDEyMjYsIDQ0LjY0MjY0M10pLFxuICogIHR1cmYucG9pbnQoWy02My41OTE0NDIsIDQ0LjY1MTQzNl0pLFxuICogIHR1cmYucG9pbnQoWy02My41ODA3OTksIDQ0LjY0ODc0OV0pLFxuICogIHR1cmYucG9pbnQoWy02My41NzM1ODksIDQ0LjY0MTc4OF0pLFxuICogIHR1cmYucG9pbnQoWy02My41ODc2NjUsIDQ0LjY0NTMzXSksXG4gKiAgdHVyZi5wb2ludChbLTYzLjU5NTIxOCwgNDQuNjQ3NjVdKVxuICogXSk7XG4gKlxuICogdmFyIGh1bGwgPSB0dXJmLmNvbmNhdmUocG9pbnRzLCAxKTtcbiAqXG4gKiB2YXIgcmVzdWx0ID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihcbiAqICBwb2ludHMuZmVhdHVyZXMuY29uY2F0KGh1bGwpKTtcbiAqXG4gKiAvLz1yZXN1bHRcbiAqL1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9pbnRzLCBtYXhFZGdlKSB7XG4gIGlmICh0eXBlb2YgbWF4RWRnZSAhPT0gJ251bWJlcicpIHRocm93IG5ldyBFcnJvcignbWF4RWRnZSBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQnKTtcblxuICB2YXIgdGluUG9seXMgPSB0LnRpbihwb2ludHMsIG51bGwpO1xuICB2YXIgZmlsdGVyZWRQb2x5cyA9IHRpblBvbHlzLmZlYXR1cmVzLmZpbHRlcihmaWx0ZXJUcmlhbmdsZXMpO1xuICB0aW5Qb2x5cy5mZWF0dXJlcyA9IGZpbHRlcmVkUG9seXM7XG5cbiAgZnVuY3Rpb24gZmlsdGVyVHJpYW5nbGVzKHRyaWFuZ2xlKSB7XG4gICAgdmFyIHB0MSA9IHQucG9pbnQodHJpYW5nbGUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF0pO1xuICAgIHZhciBwdDIgPSB0LnBvaW50KHRyaWFuZ2xlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzFdKTtcbiAgICB2YXIgcHQzID0gdC5wb2ludCh0cmlhbmdsZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsyXSk7XG4gICAgdmFyIGRpc3QxID0gdC5kaXN0YW5jZShwdDEsIHB0MiwgJ21pbGVzJyk7XG4gICAgdmFyIGRpc3QyID0gdC5kaXN0YW5jZShwdDIsIHB0MywgJ21pbGVzJyk7XG4gICAgdmFyIGRpc3QzID0gdC5kaXN0YW5jZShwdDEsIHB0MywgJ21pbGVzJyk7XG4gICAgcmV0dXJuIChkaXN0MSA8PSBtYXhFZGdlICYmIGRpc3QyIDw9IG1heEVkZ2UgJiYgZGlzdDMgPD0gbWF4RWRnZSk7XG4gIH1cblxuICByZXR1cm4gdC5tZXJnZSh0aW5Qb2x5cyk7XG59O1xuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1hbG9uZy9ub2RlX21vZHVsZXMvdHVyZi1kaXN0YW5jZS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgY2xvbmUgPSByZXF1aXJlKCdjbG9uZScpO1xudmFyIHVuaW9uID0gcmVxdWlyZSgndHVyZi11bmlvbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvbHlnb25zLCBkb25lKXtcblxuICB2YXIgbWVyZ2VkID0gY2xvbmUocG9seWdvbnMuZmVhdHVyZXNbMF0pLFxuICAgIGZlYXR1cmVzID0gcG9seWdvbnMuZmVhdHVyZXM7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGZlYXR1cmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIHBvbHkgPSBmZWF0dXJlc1tpXTtcblxuICAgIGlmKHBvbHkuZ2VvbWV0cnkpe1xuICAgICAgbWVyZ2VkID0gdW5pb24obWVyZ2VkLCBwb2x5KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWVyZ2VkO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cbi8vIHNoaW0gZm9yIE5vZGUncyAndXRpbCcgcGFja2FnZVxuLy8gRE8gTk9UIFJFTU9WRSBUSElTISBJdCBpcyByZXF1aXJlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEVuZGVySlMgKGh0dHA6Ly9lbmRlcmpzLmNvbS8pLlxudmFyIHV0aWwgPSB7XG4gIGlzQXJyYXk6IGZ1bmN0aW9uIChhcikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKSB8fCAodHlwZW9mIGFyID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhhcikgPT09ICdbb2JqZWN0IEFycmF5XScpO1xuICB9LFxuICBpc0RhdGU6IGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuICB9LFxuICBpc1JlZ0V4cDogZnVuY3Rpb24gKHJlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiByZSA9PT0gJ29iamVjdCcgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbiAgfSxcbiAgZ2V0UmVnRXhwRmxhZ3M6IGZ1bmN0aW9uIChyZSkge1xuICAgIHZhciBmbGFncyA9ICcnO1xuICAgIHJlLmdsb2JhbCAmJiAoZmxhZ3MgKz0gJ2cnKTtcbiAgICByZS5pZ25vcmVDYXNlICYmIChmbGFncyArPSAnaScpO1xuICAgIHJlLm11bHRpbGluZSAmJiAoZmxhZ3MgKz0gJ20nKTtcbiAgICByZXR1cm4gZmxhZ3M7XG4gIH1cbn07XG5cblxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuICBtb2R1bGUuZXhwb3J0cyA9IGNsb25lO1xuXG4vKipcbiAqIENsb25lcyAoY29waWVzKSBhbiBPYmplY3QgdXNpbmcgZGVlcCBjb3B5aW5nLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gc3VwcG9ydHMgY2lyY3VsYXIgcmVmZXJlbmNlcyBieSBkZWZhdWx0LCBidXQgaWYgeW91IGFyZSBjZXJ0YWluXG4gKiB0aGVyZSBhcmUgbm8gY2lyY3VsYXIgcmVmZXJlbmNlcyBpbiB5b3VyIG9iamVjdCwgeW91IGNhbiBzYXZlIHNvbWUgQ1BVIHRpbWVcbiAqIGJ5IGNhbGxpbmcgY2xvbmUob2JqLCBmYWxzZSkuXG4gKlxuICogQ2F1dGlvbjogaWYgYGNpcmN1bGFyYCBpcyBmYWxzZSBhbmQgYHBhcmVudGAgY29udGFpbnMgY2lyY3VsYXIgcmVmZXJlbmNlcyxcbiAqIHlvdXIgcHJvZ3JhbSBtYXkgZW50ZXIgYW4gaW5maW5pdGUgbG9vcCBhbmQgY3Jhc2guXG4gKlxuICogQHBhcmFtIGBwYXJlbnRgIC0gdGhlIG9iamVjdCB0byBiZSBjbG9uZWRcbiAqIEBwYXJhbSBgY2lyY3VsYXJgIC0gc2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdCB0byBiZSBjbG9uZWQgbWF5IGNvbnRhaW5cbiAqICAgIGNpcmN1bGFyIHJlZmVyZW5jZXMuIChvcHRpb25hbCAtIHRydWUgYnkgZGVmYXVsdClcbiAqIEBwYXJhbSBgZGVwdGhgIC0gc2V0IHRvIGEgbnVtYmVyIGlmIHRoZSBvYmplY3QgaXMgb25seSB0byBiZSBjbG9uZWQgdG9cbiAqICAgIGEgcGFydGljdWxhciBkZXB0aC4gKG9wdGlvbmFsIC0gZGVmYXVsdHMgdG8gSW5maW5pdHkpXG4gKiBAcGFyYW0gYHByb3RvdHlwZWAgLSBzZXRzIHRoZSBwcm90b3R5cGUgdG8gYmUgdXNlZCB3aGVuIGNsb25pbmcgYW4gb2JqZWN0LlxuICogICAgKG9wdGlvbmFsIC0gZGVmYXVsdHMgdG8gcGFyZW50IHByb3RvdHlwZSkuXG4qL1xuXG5mdW5jdGlvbiBjbG9uZShwYXJlbnQsIGNpcmN1bGFyLCBkZXB0aCwgcHJvdG90eXBlKSB7XG4gIC8vIG1haW50YWluIHR3byBhcnJheXMgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMsIHdoZXJlIGNvcnJlc3BvbmRpbmcgcGFyZW50c1xuICAvLyBhbmQgY2hpbGRyZW4gaGF2ZSB0aGUgc2FtZSBpbmRleFxuICB2YXIgYWxsUGFyZW50cyA9IFtdO1xuICB2YXIgYWxsQ2hpbGRyZW4gPSBbXTtcblxuICB2YXIgdXNlQnVmZmVyID0gdHlwZW9mIEJ1ZmZlciAhPSAndW5kZWZpbmVkJztcblxuICBpZiAodHlwZW9mIGNpcmN1bGFyID09ICd1bmRlZmluZWQnKVxuICAgIGNpcmN1bGFyID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGRlcHRoID09ICd1bmRlZmluZWQnKVxuICAgIGRlcHRoID0gSW5maW5pdHk7XG5cbiAgLy8gcmVjdXJzZSB0aGlzIGZ1bmN0aW9uIHNvIHdlIGRvbid0IHJlc2V0IGFsbFBhcmVudHMgYW5kIGFsbENoaWxkcmVuXG4gIGZ1bmN0aW9uIF9jbG9uZShwYXJlbnQsIGRlcHRoKSB7XG4gICAgLy8gY2xvbmluZyBudWxsIGFsd2F5cyByZXR1cm5zIG51bGxcbiAgICBpZiAocGFyZW50ID09PSBudWxsKVxuICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAoZGVwdGggPT0gMClcbiAgICAgIHJldHVybiBwYXJlbnQ7XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgdmFyIHByb3RvO1xuICAgIGlmICh0eXBlb2YgcGFyZW50ICE9ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cblxuICAgIGlmICh1dGlsLmlzQXJyYXkocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBbXTtcbiAgICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBuZXcgUmVnRXhwKHBhcmVudC5zb3VyY2UsIHV0aWwuZ2V0UmVnRXhwRmxhZ3MocGFyZW50KSk7XG4gICAgICBpZiAocGFyZW50Lmxhc3RJbmRleCkgY2hpbGQubGFzdEluZGV4ID0gcGFyZW50Lmxhc3RJbmRleDtcbiAgICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKHBhcmVudCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IERhdGUocGFyZW50LmdldFRpbWUoKSk7XG4gICAgfSBlbHNlIGlmICh1c2VCdWZmZXIgJiYgQnVmZmVyLmlzQnVmZmVyKHBhcmVudCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IEJ1ZmZlcihwYXJlbnQubGVuZ3RoKTtcbiAgICAgIHBhcmVudC5jb3B5KGNoaWxkKTtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBwcm90b3R5cGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGFyZW50KTtcbiAgICAgICAgY2hpbGQgPSBPYmplY3QuY3JlYXRlKHByb3RvKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjaGlsZCA9IE9iamVjdC5jcmVhdGUocHJvdG90eXBlKTtcbiAgICAgICAgcHJvdG8gPSBwcm90b3R5cGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNpcmN1bGFyKSB7XG4gICAgICB2YXIgaW5kZXggPSBhbGxQYXJlbnRzLmluZGV4T2YocGFyZW50KTtcblxuICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgIHJldHVybiBhbGxDaGlsZHJlbltpbmRleF07XG4gICAgICB9XG4gICAgICBhbGxQYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIGFsbENoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgaW4gcGFyZW50KSB7XG4gICAgICB2YXIgYXR0cnM7XG4gICAgICBpZiAocHJvdG8pIHtcbiAgICAgICAgYXR0cnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGF0dHJzICYmIGF0dHJzLnNldCA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY2hpbGRbaV0gPSBfY2xvbmUocGFyZW50W2ldLCBkZXB0aCAtIDEpO1xuICAgIH1cblxuICAgIHJldHVybiBjaGlsZDtcbiAgfVxuXG4gIHJldHVybiBfY2xvbmUocGFyZW50LCBkZXB0aCk7XG59XG5cbi8qKlxuICogU2ltcGxlIGZsYXQgY2xvbmUgdXNpbmcgcHJvdG90eXBlLCBhY2NlcHRzIG9ubHkgb2JqZWN0cywgdXNlZnVsbCBmb3IgcHJvcGVydHlcbiAqIG92ZXJyaWRlIG9uIEZMQVQgY29uZmlndXJhdGlvbiBvYmplY3QgKG5vIG5lc3RlZCBwcm9wcykuXG4gKlxuICogVVNFIFdJVEggQ0FVVElPTiEgVGhpcyBtYXkgbm90IGJlaGF2ZSBhcyB5b3Ugd2lzaCBpZiB5b3UgZG8gbm90IGtub3cgaG93IHRoaXNcbiAqIHdvcmtzLlxuICovXG5jbG9uZS5jbG9uZVByb3RvdHlwZSA9IGZ1bmN0aW9uKHBhcmVudCkge1xuICBpZiAocGFyZW50ID09PSBudWxsKVxuICAgIHJldHVybiBudWxsO1xuXG4gIHZhciBjID0gZnVuY3Rpb24gKCkge307XG4gIGMucHJvdG90eXBlID0gcGFyZW50O1xuICByZXR1cm4gbmV3IGMoKTtcbn07XG4iLCIvLyBsb29rIGhlcmUgZm9yIGhlbHAgaHR0cDovL3N2bi5vc2dlby5vcmcvZ3Jhc3MvZ3Jhc3MvYnJhbmNoZXMvcmVsZWFzZWJyYW5jaF82XzQvdmVjdG9yL3Yub3ZlcmxheS9tYWluLmNcbi8vbXVzdCBiZSBhcnJheSBvZiBwb2x5Z29uc1xuXG4vLyBkZXBlbmQgb24ganN0cyBmb3Igbm93IGh0dHBzOi8vZ2l0aHViLmNvbS9iam9ybmhhcnJ0ZWxsL2pzdHMvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvb3ZlcmxheS5odG1sXG5cbnZhciBqc3RzID0gcmVxdWlyZSgnanN0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvbHkxLCBwb2x5Mil7XG4gIHZhciByZWFkZXIgPSBuZXcganN0cy5pby5HZW9KU09OUmVhZGVyKCk7XG4gIHZhciBhID0gcmVhZGVyLnJlYWQoSlNPTi5zdHJpbmdpZnkocG9seTEuZ2VvbWV0cnkpKTtcbiAgdmFyIGIgPSByZWFkZXIucmVhZChKU09OLnN0cmluZ2lmeShwb2x5Mi5nZW9tZXRyeSkpO1xuICB2YXIgdW5pb24gPSBhLnVuaW9uKGIpO1xuICB2YXIgcGFyc2VyID0gbmV3IGpzdHMuaW8uR2VvSlNPTlBhcnNlcigpO1xuXG4gIHVuaW9uID0gcGFyc2VyLndyaXRlKHVuaW9uKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgZ2VvbWV0cnk6IHVuaW9uLFxuICAgIHByb3BlcnRpZXM6IHBvbHkxLnByb3BlcnRpZXNcbiAgfTtcbn1cbiIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYnVmZmVyL25vZGVfbW9kdWxlcy9qc3RzL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYnVmZmVyL25vZGVfbW9kdWxlcy9qc3RzL2xpYi9qc3RzLmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsIi8qXG4gIGphdmFzY3JpcHQudXRpbCBpcyBhIHBvcnQgb2Ygc2VsZWN0ZWQgcGFydHMgb2YgamF2YS51dGlsIHRvIEphdmFTY3JpcHQgd2hpY2hcbiAgbWFpbiBwdXJwb3NlIGlzIHRvIGVhc2UgcG9ydGluZyBKYXZhIGNvZGUgdG8gSmF2YVNjcmlwdC5cbiAgXG4gIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG4gIENvcHlyaWdodCAoQykgMjAxMS0yMDE0IGJ5IFRoZSBBdXRob3JzXG5cbiAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gIFRIRSBTT0ZUV0FSRS5cbiovXG47KGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztmdW5jdGlvbiBmKGEsYil7dmFyIGM9YS5zcGxpdChcIi5cIiksZD1lO2NbMF1pbiBkfHwhZC5leGVjU2NyaXB0fHxkLmV4ZWNTY3JpcHQoXCJ2YXIgXCIrY1swXSk7Zm9yKHZhciB0O2MubGVuZ3RoJiYodD1jLnNoaWZ0KCkpOyljLmxlbmd0aHx8dm9pZCAwPT09Yj9kPWRbdF0/ZFt0XTpkW3RdPXt9OmRbdF09Yn1mdW5jdGlvbiBnKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLnE9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLnA9ZnVuY3Rpb24oYSxjLE8pe3ZhciBNPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gYi5wcm90b3R5cGVbY10uYXBwbHkoYSxNKX19O2Z1bmN0aW9uIGgoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhoLEVycm9yKTtmKFwiamF2YXNjcmlwdC51dGlsLkVtcHR5U3RhY2tFeGNlcHRpb25cIixoKTtoLnByb3RvdHlwZS5uYW1lPVwiRW1wdHlTdGFja0V4Y2VwdGlvblwiO2Z1bmN0aW9uIGsoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhrLEVycm9yKTtmKFwiamF2YXNjcmlwdC51dGlsLkluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25cIixrKTtrLnByb3RvdHlwZS5uYW1lPVwiSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvblwiO2Z1bmN0aW9uIGwoKXt9ZihcImphdmFzY3JpcHQudXRpbC5JdGVyYXRvclwiLGwpO2wucHJvdG90eXBlLmhhc05leHQ9bC5wcm90b3R5cGUuYztsLnByb3RvdHlwZS5uZXh0PWwucHJvdG90eXBlLm5leHQ7bC5wcm90b3R5cGUucmVtb3ZlPWwucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiBtKCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuQ29sbGVjdGlvblwiLG0pO2Z1bmN0aW9uIG4oKXt9ZyhuLG0pO2YoXCJqYXZhc2NyaXB0LnV0aWwuTGlzdFwiLG4pO2Z1bmN0aW9uIHAoKXt9ZihcImphdmFzY3JpcHQudXRpbC5NYXBcIixwKTtmdW5jdGlvbiBxKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcocSxFcnJvcik7ZihcImphdmFzY3JpcHQudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uXCIscSk7cS5wcm90b3R5cGUubmFtZT1cIk5vU3VjaEVsZW1lbnRFeGNlcHRpb25cIjtmdW5jdGlvbiByKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcocixFcnJvcik7ci5wcm90b3R5cGUubmFtZT1cIk9wZXJhdGlvbk5vdFN1cHBvcnRlZFwiO2Z1bmN0aW9uIHMoYSl7dGhpcy5hPVtdO2EgaW5zdGFuY2VvZiBtJiZ0aGlzLmUoYSl9ZyhzLG4pO2YoXCJqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0XCIscyk7cy5wcm90b3R5cGUuYT1udWxsO3MucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXt0aGlzLmEucHVzaChhKTtyZXR1cm4hMH07cy5wcm90b3R5cGUuYWRkPXMucHJvdG90eXBlLmFkZDtzLnByb3RvdHlwZS5lPWZ1bmN0aW9uKGEpe2ZvcihhPWEuZigpO2EuYygpOyl0aGlzLmFkZChhLm5leHQoKSk7cmV0dXJuITB9O3MucHJvdG90eXBlLmFkZEFsbD1zLnByb3RvdHlwZS5lO3MucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYVthXTt0aGlzLmFbYV09YjtyZXR1cm4gY307cy5wcm90b3R5cGUuc2V0PXMucHJvdG90eXBlLnNldDtzLnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMpfTtzLnByb3RvdHlwZS5pdGVyYXRvcj1zLnByb3RvdHlwZS5mO1xucy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe2lmKDA+YXx8YT49dGhpcy5zaXplKCkpdGhyb3cgbmV3IGs7cmV0dXJuIHRoaXMuYVthXX07cy5wcm90b3R5cGUuZ2V0PXMucHJvdG90eXBlLmdldDtzLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RofTtzLnByb3RvdHlwZS5pc0VtcHR5PXMucHJvdG90eXBlLmc7cy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTtzLnByb3RvdHlwZS5zaXplPXMucHJvdG90eXBlLnNpemU7cy5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O3MucHJvdG90eXBlLnRvQXJyYXk9cy5wcm90b3R5cGUuaDtcbnMucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGQ9dGhpcy5hLmxlbmd0aDtjPGQ7YysrKWlmKHRoaXMuYVtjXT09PWEpe3RoaXMuYS5zcGxpY2UoYywxKTtiPSEwO2JyZWFrfXJldHVybiBifTtzLnByb3RvdHlwZS5yZW1vdmU9cy5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIHUoYSl7dGhpcy5qPWF9ZihcIiRqc2NvbXAuc2NvcGUuSXRlcmF0b3JfXCIsdSk7dS5wcm90b3R5cGUuaj1udWxsO3UucHJvdG90eXBlLmI9MDt1LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5iPT09dGhpcy5qLnNpemUoKSl0aHJvdyBuZXcgcTtyZXR1cm4gdGhpcy5qLmdldCh0aGlzLmIrKyl9O3UucHJvdG90eXBlLm5leHQ9dS5wcm90b3R5cGUubmV4dDt1LnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYjx0aGlzLmouc2l6ZSgpPyEwOiExfTt1LnByb3RvdHlwZS5oYXNOZXh0PXUucHJvdG90eXBlLmM7XG51LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O3UucHJvdG90eXBlLnJlbW92ZT11LnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gdigpe31mKFwiamF2YXNjcmlwdC51dGlsLkFycmF5c1wiLHYpO1xudi5zb3J0PWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdLGIsYyxkO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWEuc29ydCgpO2Vsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpYz1hcmd1bWVudHNbMV0sZD1mdW5jdGlvbihhLGIpe3JldHVybiBjLmNvbXBhcmUoYSxiKX0sYS5zb3J0KGQpO2Vsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGI9YS5zbGljZShhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKSxiLnNvcnQoKSxkPWEuc2xpY2UoMCxhcmd1bWVudHNbMV0pLmNvbmNhdChiLGEuc2xpY2UoYXJndW1lbnRzWzJdLGEubGVuZ3RoKSksYS5zcGxpY2UoMCxhLmxlbmd0aCksYj0wO2I8ZC5sZW5ndGg7YisrKWEucHVzaChkW2JdKTtlbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKWZvcihiPWEuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSksYz1hcmd1bWVudHNbM10sZD1mdW5jdGlvbihhLGIpe3JldHVybiBjLmNvbXBhcmUoYSxiKX0sYi5zb3J0KGQpLFxuZD1hLnNsaWNlKDAsYXJndW1lbnRzWzFdKS5jb25jYXQoYixhLnNsaWNlKGFyZ3VtZW50c1syXSxhLmxlbmd0aCkpLGEuc3BsaWNlKDAsYS5sZW5ndGgpLGI9MDtiPGQubGVuZ3RoO2IrKylhLnB1c2goZFtiXSl9O3YuYXNMaXN0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgcyxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIuYWRkKGFbY10pO3JldHVybiBifTtmdW5jdGlvbiB3KCl7dGhpcy5pPXt9fWcodyxwKTtmKFwiamF2YXNjcmlwdC51dGlsLkhhc2hNYXBcIix3KTt3LnByb3RvdHlwZS5pPW51bGw7dy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlbYV18fG51bGx9O3cucHJvdG90eXBlLmdldD13LnByb3RvdHlwZS5nZXQ7dy5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaVthXT1ifTt3LnByb3RvdHlwZS5wdXQ9dy5wcm90b3R5cGUucHV0O3cucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcyxiO2ZvcihiIGluIHRoaXMuaSl0aGlzLmkuaGFzT3duUHJvcGVydHkoYikmJmEuYWRkKHRoaXMuaVtiXSk7cmV0dXJuIGF9O3cucHJvdG90eXBlLnZhbHVlcz13LnByb3RvdHlwZS5tO3cucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tKCkuc2l6ZSgpfTt3LnByb3RvdHlwZS5zaXplPXcucHJvdG90eXBlLnNpemU7ZnVuY3Rpb24geCgpe31nKHgsbSk7ZihcImphdmFzY3JpcHQudXRpbC5TZXRcIix4KTtmdW5jdGlvbiB5KGEpe3RoaXMuYT1bXTthIGluc3RhbmNlb2YgbSYmdGhpcy5lKGEpfWcoeSx4KTtmKFwiamF2YXNjcmlwdC51dGlsLkhhc2hTZXRcIix5KTt5LnByb3RvdHlwZS5hPW51bGw7eS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspaWYodGhpcy5hW2JdPT09YSlyZXR1cm4hMDtyZXR1cm4hMX07eS5wcm90b3R5cGUuY29udGFpbnM9eS5wcm90b3R5cGUuY29udGFpbnM7eS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY29udGFpbnMoYSkpcmV0dXJuITE7dGhpcy5hLnB1c2goYSk7cmV0dXJuITB9O3kucHJvdG90eXBlLmFkZD15LnByb3RvdHlwZS5hZGQ7eS5wcm90b3R5cGUuZT1mdW5jdGlvbihhKXtmb3IoYT1hLmYoKTthLmMoKTspdGhpcy5hZGQoYS5uZXh0KCkpO3JldHVybiEwfTt5LnByb3RvdHlwZS5hZGRBbGw9eS5wcm90b3R5cGUuZTtcbnkucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307eS5wcm90b3R5cGUucmVtb3ZlPXkucHJvdG90eXBlLnJlbW92ZTt5LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O3kucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGh9O3kucHJvdG90eXBlLmlzRW1wdHk9eS5wcm90b3R5cGUuZzt5LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07eS5wcm90b3R5cGUudG9BcnJheT15LnByb3RvdHlwZS5oO3kucHJvdG90eXBlLmY9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHoodGhpcyl9O3kucHJvdG90eXBlLml0ZXJhdG9yPXkucHJvdG90eXBlLmY7ZnVuY3Rpb24geihhKXt0aGlzLms9YX1mKFwiJGpzY29tcC5zY29wZS5JdGVyYXRvcl8kMVwiLHopO3oucHJvdG90eXBlLms9bnVsbDtcbnoucHJvdG90eXBlLmI9MDt6LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5iPT09dGhpcy5rLnNpemUoKSl0aHJvdyBuZXcgcTtyZXR1cm4gdGhpcy5rLmFbdGhpcy5iKytdfTt6LnByb3RvdHlwZS5uZXh0PXoucHJvdG90eXBlLm5leHQ7ei5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmI8dGhpcy5rLnNpemUoKT8hMDohMX07ei5wcm90b3R5cGUuaGFzTmV4dD16LnByb3RvdHlwZS5jO3oucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307ei5wcm90b3R5cGUucmVtb3ZlPXoucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiBBKCl7fWcoQSxwKTtmKFwiamF2YXNjcmlwdC51dGlsLlNvcnRlZE1hcFwiLEEpO2Z1bmN0aW9uIEIoKXt9ZyhCLHgpO2YoXCJqYXZhc2NyaXB0LnV0aWwuU29ydGVkU2V0XCIsQik7ZnVuY3Rpb24gQygpe3RoaXMuYT1bXX1nKEMsbik7ZihcImphdmFzY3JpcHQudXRpbC5TdGFja1wiLEMpO0MucHJvdG90eXBlLmE9bnVsbDtDLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGEpe3RoaXMuYS5wdXNoKGEpO3JldHVybiBhfTtDLnByb3RvdHlwZS5wdXNoPUMucHJvdG90eXBlLnB1c2g7Qy5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuYS5sZW5ndGgpdGhyb3cgbmV3IGg7cmV0dXJuIHRoaXMuYS5wb3AoKX07Qy5wcm90b3R5cGUucG9wPUMucHJvdG90eXBlLnBvcDtDLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuYS5sZW5ndGgpdGhyb3cgbmV3IGg7cmV0dXJuIHRoaXMuYVt0aGlzLmEubGVuZ3RoLTFdfTtDLnByb3RvdHlwZS5wZWVrPUMucHJvdG90eXBlLm87Qy5wcm90b3R5cGUuZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGg/ITA6ITF9O0MucHJvdG90eXBlLmVtcHR5PUMucHJvdG90eXBlLmVtcHR5O1xuQy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVtcHR5KCl9O0MucHJvdG90eXBlLmlzRW1wdHk9Qy5wcm90b3R5cGUuZztDLnByb3RvdHlwZS5zZWFyY2g9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYS5pbmRleE9mKGEpfTtDLnByb3RvdHlwZS5zZWFyY2g9Qy5wcm90b3R5cGUuc2VhcmNoO0MucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07Qy5wcm90b3R5cGUuc2l6ZT1DLnByb3RvdHlwZS5zaXplO0MucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTtDLnByb3RvdHlwZS50b0FycmF5PUMucHJvdG90eXBlLmg7ZnVuY3Rpb24gRChhKXtyZXR1cm4gbnVsbD09YT9udWxsOmEucGFyZW50fWZ1bmN0aW9uIEUoYSxiKXtudWxsIT09YSYmKGEuY29sb3I9Yil9ZnVuY3Rpb24gRihhKXtyZXR1cm4gbnVsbD09YT9udWxsOmEubGVmdH1mdW5jdGlvbiBHKGEpe3JldHVybiBudWxsPT1hP251bGw6YS5yaWdodH1mdW5jdGlvbiBIKCl7dGhpcy5kPW51bGw7dGhpcy5uPTB9ZyhILEEpO2YoXCJqYXZhc2NyaXB0LnV0aWwuVHJlZU1hcFwiLEgpO0gucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5kO251bGwhPT1iOyl7dmFyIGM9YS5jb21wYXJlVG8oYi5rZXkpO2lmKDA+YyliPWIubGVmdDtlbHNlIGlmKDA8YyliPWIucmlnaHQ7ZWxzZSByZXR1cm4gYi52YWx1ZX1yZXR1cm4gbnVsbH07SC5wcm90b3R5cGUuZ2V0PUgucHJvdG90eXBlLmdldDtcbkgucHJvdG90eXBlLnB1dD1mdW5jdGlvbihhLGIpe2lmKG51bGw9PT10aGlzLmQpcmV0dXJuIHRoaXMuZD17a2V5OmEsdmFsdWU6YixsZWZ0Om51bGwscmlnaHQ6bnVsbCxwYXJlbnQ6bnVsbCxjb2xvcjowfSx0aGlzLm49MSxudWxsO3ZhciBjPXRoaXMuZCxkLHQ7ZG8gaWYoZD1jLHQ9YS5jb21wYXJlVG8oYy5rZXkpLDA+dCljPWMubGVmdDtlbHNlIGlmKDA8dCljPWMucmlnaHQ7ZWxzZSByZXR1cm4gZD1jLnZhbHVlLGMudmFsdWU9YixkO3doaWxlKG51bGwhPT1jKTtjPXtrZXk6YSxsZWZ0Om51bGwscmlnaHQ6bnVsbCx2YWx1ZTpiLHBhcmVudDpkLGNvbG9yOjB9OzA+dD9kLmxlZnQ9YzpkLnJpZ2h0PWM7Zm9yKGMuY29sb3I9MTtudWxsIT1jJiZjIT10aGlzLmQmJjE9PWMucGFyZW50LmNvbG9yOylEKGMpPT1GKEQoRChjKSkpPyhkPUcoRChEKGMpKSksMT09KG51bGw9PWQ/MDpkLmNvbG9yKT8oRShEKGMpLDApLEUoZCwwKSxFKEQoRChjKSksMSksYz1EKEQoYykpKTooYz09RyhEKGMpKSYmXG4oYz1EKGMpLEkodGhpcyxjKSksRShEKGMpLDApLEUoRChEKGMpKSwxKSxKKHRoaXMsRChEKGMpKSkpKTooZD1GKEQoRChjKSkpLDE9PShudWxsPT1kPzA6ZC5jb2xvcik/KEUoRChjKSwwKSxFKGQsMCksRShEKEQoYykpLDEpLGM9RChEKGMpKSk6KGM9PUYoRChjKSkmJihjPUQoYyksSih0aGlzLGMpKSxFKEQoYyksMCksRShEKEQoYykpLDEpLEkodGhpcyxEKEQoYykpKSkpO3RoaXMuZC5jb2xvcj0wO3RoaXMubisrO3JldHVybiBudWxsfTtILnByb3RvdHlwZS5wdXQ9SC5wcm90b3R5cGUucHV0O0gucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcyxiO2I9dGhpcy5kO2lmKG51bGwhPWIpZm9yKDtudWxsIT1iLmxlZnQ7KWI9Yi5sZWZ0O2lmKG51bGwhPT1iKWZvcihhLmFkZChiLnZhbHVlKTtudWxsIT09KGI9SyhiKSk7KWEuYWRkKGIudmFsdWUpO3JldHVybiBhfTtILnByb3RvdHlwZS52YWx1ZXM9SC5wcm90b3R5cGUubTtcbmZ1bmN0aW9uIEkoYSxiKXtpZihudWxsIT1iKXt2YXIgYz1iLnJpZ2h0O2IucmlnaHQ9Yy5sZWZ0O251bGwhPWMubGVmdCYmKGMubGVmdC5wYXJlbnQ9Yik7Yy5wYXJlbnQ9Yi5wYXJlbnQ7bnVsbD09Yi5wYXJlbnQ/YS5kPWM6Yi5wYXJlbnQubGVmdD09Yj9iLnBhcmVudC5sZWZ0PWM6Yi5wYXJlbnQucmlnaHQ9YztjLmxlZnQ9YjtiLnBhcmVudD1jfX1mdW5jdGlvbiBKKGEsYil7aWYobnVsbCE9Yil7dmFyIGM9Yi5sZWZ0O2IubGVmdD1jLnJpZ2h0O251bGwhPWMucmlnaHQmJihjLnJpZ2h0LnBhcmVudD1iKTtjLnBhcmVudD1iLnBhcmVudDtudWxsPT1iLnBhcmVudD9hLmQ9YzpiLnBhcmVudC5yaWdodD09Yj9iLnBhcmVudC5yaWdodD1jOmIucGFyZW50LmxlZnQ9YztjLnJpZ2h0PWI7Yi5wYXJlbnQ9Y319XG5mdW5jdGlvbiBLKGEpe2lmKG51bGw9PT1hKXJldHVybiBudWxsO2lmKG51bGwhPT1hLnJpZ2h0KWZvcih2YXIgYj1hLnJpZ2h0O251bGwhPT1iLmxlZnQ7KWI9Yi5sZWZ0O2Vsc2UgZm9yKGI9YS5wYXJlbnQ7bnVsbCE9PWImJmE9PT1iLnJpZ2h0OylhPWIsYj1iLnBhcmVudDtyZXR1cm4gYn1ILnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubn07SC5wcm90b3R5cGUuc2l6ZT1ILnByb3RvdHlwZS5zaXplO2Z1bmN0aW9uIEwoYSl7dGhpcy5hPVtdO2EgaW5zdGFuY2VvZiBtJiZ0aGlzLmUoYSl9ZyhMLEIpO2YoXCJqYXZhc2NyaXB0LnV0aWwuVHJlZVNldFwiLEwpO0wucHJvdG90eXBlLmE9bnVsbDtMLnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylpZigwPT09dGhpcy5hW2JdLmNvbXBhcmVUbyhhKSlyZXR1cm4hMDtyZXR1cm4hMX07TC5wcm90b3R5cGUuY29udGFpbnM9TC5wcm90b3R5cGUuY29udGFpbnM7TC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY29udGFpbnMoYSkpcmV0dXJuITE7Zm9yKHZhciBiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspaWYoMT09PXRoaXMuYVtiXS5jb21wYXJlVG8oYSkpcmV0dXJuIHRoaXMuYS5zcGxpY2UoYiwwLGEpLCEwO3RoaXMuYS5wdXNoKGEpO3JldHVybiEwfTtMLnByb3RvdHlwZS5hZGQ9TC5wcm90b3R5cGUuYWRkO1xuTC5wcm90b3R5cGUuZT1mdW5jdGlvbihhKXtmb3IoYT1hLmYoKTthLmMoKTspdGhpcy5hZGQoYS5uZXh0KCkpO3JldHVybiEwfTtMLnByb3RvdHlwZS5hZGRBbGw9TC5wcm90b3R5cGUuZTtMLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O0wucHJvdG90eXBlLnJlbW92ZT1MLnByb3RvdHlwZS5yZW1vdmU7TC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTtMLnByb3RvdHlwZS5zaXplPUwucHJvdG90eXBlLnNpemU7TC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aH07TC5wcm90b3R5cGUuaXNFbXB0eT1MLnByb3RvdHlwZS5nO0wucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTtMLnByb3RvdHlwZS50b0FycmF5PUwucHJvdG90eXBlLmg7TC5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3JldHVybiBuZXcgTih0aGlzKX07XG5MLnByb3RvdHlwZS5pdGVyYXRvcj1MLnByb3RvdHlwZS5mO2Z1bmN0aW9uIE4oYSl7dGhpcy5sPWF9ZihcIiRqc2NvbXAuc2NvcGUuSXRlcmF0b3JfJDJcIixOKTtOLnByb3RvdHlwZS5sPW51bGw7Ti5wcm90b3R5cGUuYj0wO04ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmI9PT10aGlzLmwuc2l6ZSgpKXRocm93IG5ldyBxO3JldHVybiB0aGlzLmwuYVt0aGlzLmIrK119O04ucHJvdG90eXBlLm5leHQ9Ti5wcm90b3R5cGUubmV4dDtOLnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYjx0aGlzLmwuc2l6ZSgpPyEwOiExfTtOLnByb3RvdHlwZS5oYXNOZXh0PU4ucHJvdG90eXBlLmM7Ti5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTtOLnByb3RvdHlwZS5yZW1vdmU9Ti5wcm90b3R5cGUucmVtb3ZlO1widW5kZWZpbmVkXCIhPT10eXBlb2YgZ2xvYmFsJiYoZ2xvYmFsLmphdmFzY3JpcHQ9e30sZ2xvYmFsLmphdmFzY3JpcHQudXRpbD17fSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdD1zLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuQXJyYXlzPXYsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Db2xsZWN0aW9uPW0sZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5FbXB0eVN0YWNrRXhjZXB0aW9uPWgsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5IYXNoTWFwPXcsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5IYXNoU2V0PXksZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5JbmRleE91dE9mQm91bmRzRXhjZXB0aW9uPWssZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5JdGVyYXRvcj1sLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuTGlzdD1uLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuTWFwPXAsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uPXEsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5PcGVyYXRpb25Ob3RTdXBwb3J0ZWQ9XG5yLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU2V0PXgsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Tb3J0ZWRNYXA9QSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlNvcnRlZFNldD1CLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU3RhY2s9QyxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlRyZWVNYXA9SCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlRyZWVTZXQ9TCk7fSkuY2FsbCh0aGlzKTtcbiIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtYnVmZmVyL25vZGVfbW9kdWxlcy9qc3RzL25vZGVfbW9kdWxlcy9qYXZhc2NyaXB0LnV0aWwvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jZW50cm9pZC9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCIvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGVsYXVuYXlfdHJpYW5ndWxhdGlvblxuLy9odHRwczovL2dpdGh1Yi5jb20vaXJvbndhbGxhYnkvZGVsYXVuYXlcbnZhciBwb2x5Z29uID0gcmVxdWlyZSgndHVyZi1wb2x5Z29uJyk7XG52YXIgbmVhcmVzdCA9IHJlcXVpcmUoJ3R1cmYtbmVhcmVzdCcpO1xudmFyIHBvaW50ID0gcmVxdWlyZSgndHVyZi1wb2ludCcpO1xuXG4vKipcbiAqIFRha2VzIGEgc2V0IG9mIHBvaW50cyBhbmQgdGhlIG5hbWUgb2YgYSB6LXZhbHVlIHByb3BlcnR5IGFuZFxuICogY3JlYXRlcyBhIFtUcmlhbmd1bGF0ZWQgSXJyZWd1bGFyIE5ldHdvcmtdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJpYW5ndWxhdGVkX2lycmVndWxhcl9uZXR3b3JrKSxcbiAqIG9yIGEgVElOIGZvciBzaG9ydC4gVGhlc2UgYXJlIG9mdGVuIHVzZWRcbiAqIGZvciBkZXZlbG9waW5nIGVsZXZhdGlvbiBjb250b3VyIG1hcHMgb3Igc3RlcHBlZCBoZWF0IHZpc3VhbGl6YXRpb25zLlxuICpcbiAqIEBtb2R1bGUgdHVyZi90aW5cbiAqIEBwYXJhbSB7R2VvSlNPTkZlYXR1cmVDb2xsZWN0aW9ufSBwb2ludHMgLSBhIEdlb0pTT04gRmVhdHVyZUNvbGxlY3Rpb24gY29udGFpbmluZ1xuICogRmVhdHVyZXMgd2l0aCBQb2ludCBnZW9tZXRyaWVzXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlOYW1lIC0gbmFtZSBvZiB0aGUgcHJvcGVydHkgZnJvbSB3aGljaCB0byBwdWxsIHogdmFsdWVzXG4gKiBAcmV0dXJuIHtHZW9KU09ORmVhdHVyZUNvbGxlY3Rpb259IG91dHB1dFxuICogQGV4YW1wbGVcbiAqIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJylcbiAqIHZhciB6ID0gJ2VsZXZhdGlvbidcbiAqIHZhciBwdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYygnL3BhdGgvdG8vcHRzLmdlb2pzb24nKSlcbiAqIHZhciB0aW5Qb2x5cyA9IHR1cmYudGluKHB0cywgeilcbiAqIGNvbnNvbGUubG9nKHRpblBvbHlzKVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50cywgeil7XG4gIC8vYnJlYWsgZG93biBwb2ludHNcbiAgdmFyIHZlcnRpY2VzID0gW107XG4gIHBvaW50cy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHApe1xuICAgIHZlcnRpY2VzLnB1c2goe3g6cC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSwgeTpwLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdfSk7XG4gIH0pXG5cbiAgdmFyIHRyaWFuZ3VsYXRlZCA9IHRyaWFuZ3VsYXRlKHZlcnRpY2VzKTtcbiAgdmFyIHRyaWFuZ2xlcyA9IHtcbiAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgIGZlYXR1cmVzOiBbXVxuICB9O1xuXG4gIHRyaWFuZ3VsYXRlZC5mb3JFYWNoKGZ1bmN0aW9uKHRyaWFuZ2xlKXtcbiAgICB2YXIgY29vcmRzID0gW1tbdHJpYW5nbGUuYS54LCB0cmlhbmdsZS5hLnldLCBbdHJpYW5nbGUuYi54LCB0cmlhbmdsZS5iLnldLCBbdHJpYW5nbGUuYy54LCB0cmlhbmdsZS5jLnldXV07XG4gICAgdmFyIHBvbHkgPSBwb2x5Z29uKGNvb3Jkcywge2E6IG51bGwsIGI6IG51bGwsIGM6IG51bGx9KTtcblxuICAgIHRyaWFuZ2xlcy5mZWF0dXJlcy5wdXNoKHBvbHkpO1xuICB9KTtcbiAgaWYoeil7XG4gICAgLy8gYWRkIHZhbHVlcyBmcm9tIHZlcnRpY2VzXG4gICAgdHJpYW5nbGVzLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24odHJpKXtcbiAgICAgIHZhciBjb29yZGluYXRlTnVtYmVyID0gMTtcbiAgICAgIHRyaS5nZW9tZXRyeS5jb29yZGluYXRlc1swXS5mb3JFYWNoKGZ1bmN0aW9uKGMpe1xuICAgICAgICB2YXIgY2xvc2VzdCA9IG5lYXJlc3QocG9pbnQoY1swXSwgY1sxXSksIHBvaW50cyk7XG5cbiAgICAgICAgaWYoY29vcmRpbmF0ZU51bWJlciA9PT0gMSl7XG4gICAgICAgICAgdHJpLnByb3BlcnRpZXMuYSA9IGNsb3Nlc3QucHJvcGVydGllc1t6XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGNvb3JkaW5hdGVOdW1iZXIgPT09IDIpe1xuICAgICAgICAgIHRyaS5wcm9wZXJ0aWVzLmIgPSBjbG9zZXN0LnByb3BlcnRpZXNbel07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihjb29yZGluYXRlTnVtYmVyID09PSAzKXtcbiAgICAgICAgICB0cmkucHJvcGVydGllcy5jID0gY2xvc2VzdC5wcm9wZXJ0aWVzW3pdO1xuICAgICAgICB9XG4gICAgICAgIGNvb3JkaW5hdGVOdW1iZXIrKztcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdHJpYW5nbGVzLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24odHJpKXtcbiAgICB0cmkgPSBjb3JyZWN0UmluZ3ModHJpKTtcbiAgfSk7XG4gIFxuICByZXR1cm4gdHJpYW5nbGVzO1xufVxuXG5mdW5jdGlvbiBjb3JyZWN0UmluZ3MocG9seSl7XG4gIHBvbHkuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuZm9yRWFjaChmdW5jdGlvbihyaW5nKXtcbiAgICB2YXIgaXNXcmFwcGVkID0gIHJpbmdbMF0gPT09IHJpbmcuc2xpY2UoLTEpWzBdO1xuICAgIGlmKCFpc1dyYXBwZWQpe1xuICAgICAgcmluZy5wdXNoKHJpbmdbMF0pO1xuICAgIH1cbiAgfSlcbiAgcmV0dXJuIHBvbHk7XG59XG5cbmZ1bmN0aW9uIFRyaWFuZ2xlKGEsIGIsIGMpIHtcbiAgdGhpcy5hID0gYVxuICB0aGlzLmIgPSBiXG4gIHRoaXMuYyA9IGNcblxuICB2YXIgQSA9IGIueCAtIGEueCxcbiAgICAgIEIgPSBiLnkgLSBhLnksXG4gICAgICBDID0gYy54IC0gYS54LFxuICAgICAgRCA9IGMueSAtIGEueSxcbiAgICAgIEUgPSBBICogKGEueCArIGIueCkgKyBCICogKGEueSArIGIueSksXG4gICAgICBGID0gQyAqIChhLnggKyBjLngpICsgRCAqIChhLnkgKyBjLnkpLFxuICAgICAgRyA9IDIgKiAoQSAqIChjLnkgLSBiLnkpIC0gQiAqIChjLnggLSBiLngpKSxcbiAgICAgIG1pbngsIG1pbnksIGR4LCBkeVxuXG4gIC8qIElmIHRoZSBwb2ludHMgb2YgdGhlIHRyaWFuZ2xlIGFyZSBjb2xsaW5lYXIsIHRoZW4ganVzdCBmaW5kIHRoZVxuICAgKiBleHRyZW1lcyBhbmQgdXNlIHRoZSBtaWRwb2ludCBhcyB0aGUgY2VudGVyIG9mIHRoZSBjaXJjdW1jaXJjbGUuICovXG4gIGlmKE1hdGguYWJzKEcpIDwgMC4wMDAwMDEpIHtcbiAgICBtaW54ID0gTWF0aC5taW4oYS54LCBiLngsIGMueClcbiAgICBtaW55ID0gTWF0aC5taW4oYS55LCBiLnksIGMueSlcbiAgICBkeCAgID0gKE1hdGgubWF4KGEueCwgYi54LCBjLngpIC0gbWlueCkgKiAwLjVcbiAgICBkeSAgID0gKE1hdGgubWF4KGEueSwgYi55LCBjLnkpIC0gbWlueSkgKiAwLjVcblxuICAgIHRoaXMueCA9IG1pbnggKyBkeFxuICAgIHRoaXMueSA9IG1pbnkgKyBkeVxuICAgIHRoaXMuciA9IGR4ICogZHggKyBkeSAqIGR5XG4gIH1cblxuICBlbHNlIHtcbiAgICB0aGlzLnggPSAoRCpFIC0gQipGKSAvIEdcbiAgICB0aGlzLnkgPSAoQSpGIC0gQypFKSAvIEdcbiAgICBkeCA9IHRoaXMueCAtIGEueFxuICAgIGR5ID0gdGhpcy55IC0gYS55XG4gICAgdGhpcy5yID0gZHggKiBkeCArIGR5ICogZHlcbiAgfVxufVxuXG5UcmlhbmdsZS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGN0eCkge1xuICBjdHguYmVnaW5QYXRoKClcbiAgY3R4Lm1vdmVUbyh0aGlzLmEueCwgdGhpcy5hLnkpXG4gIGN0eC5saW5lVG8odGhpcy5iLngsIHRoaXMuYi55KVxuICBjdHgubGluZVRvKHRoaXMuYy54LCB0aGlzLmMueSlcbiAgY3R4LmNsb3NlUGF0aCgpXG4gIGN0eC5zdHJva2UoKVxufVxuXG5mdW5jdGlvbiBieVgoYSwgYikge1xuICByZXR1cm4gYi54IC0gYS54XG59XG5cbmZ1bmN0aW9uIGRlZHVwKGVkZ2VzKSB7XG4gIHZhciBqID0gZWRnZXMubGVuZ3RoLFxuICAgICAgYSwgYiwgaSwgbSwgblxuXG4gIG91dGVyOiB3aGlsZShqKSB7XG4gICAgYiA9IGVkZ2VzWy0tal1cbiAgICBhID0gZWRnZXNbLS1qXVxuICAgIGkgPSBqXG4gICAgd2hpbGUoaSkge1xuICAgICAgbiA9IGVkZ2VzWy0taV1cbiAgICAgIG0gPSBlZGdlc1stLWldXG4gICAgICBpZigoYSA9PT0gbSAmJiBiID09PSBuKSB8fCAoYSA9PT0gbiAmJiBiID09PSBtKSkge1xuICAgICAgICBlZGdlcy5zcGxpY2UoaiwgMilcbiAgICAgICAgZWRnZXMuc3BsaWNlKGksIDIpXG4gICAgICAgIGogLT0gMlxuICAgICAgICBjb250aW51ZSBvdXRlclxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB0cmlhbmd1bGF0ZSh2ZXJ0aWNlcykge1xuICAvKiBCYWlsIGlmIHRoZXJlIGFyZW4ndCBlbm91Z2ggdmVydGljZXMgdG8gZm9ybSBhbnkgdHJpYW5nbGVzLiAqL1xuICBpZih2ZXJ0aWNlcy5sZW5ndGggPCAzKVxuICAgIHJldHVybiBbXVxuXG4gIC8qIEVuc3VyZSB0aGUgdmVydGV4IGFycmF5IGlzIGluIG9yZGVyIG9mIGRlc2NlbmRpbmcgWCBjb29yZGluYXRlXG4gICAqICh3aGljaCBpcyBuZWVkZWQgdG8gZW5zdXJlIGEgc3VicXVhZHJhdGljIHJ1bnRpbWUpLCBhbmQgdGhlbiBmaW5kXG4gICAqIHRoZSBib3VuZGluZyBib3ggYXJvdW5kIHRoZSBwb2ludHMuICovXG4gIHZlcnRpY2VzLnNvcnQoYnlYKVxuXG4gIHZhciBpICAgID0gdmVydGljZXMubGVuZ3RoIC0gMSxcbiAgICAgIHhtaW4gPSB2ZXJ0aWNlc1tpXS54LFxuICAgICAgeG1heCA9IHZlcnRpY2VzWzBdLngsXG4gICAgICB5bWluID0gdmVydGljZXNbaV0ueSxcbiAgICAgIHltYXggPSB5bWluXG5cbiAgd2hpbGUoaS0tKSB7XG4gICAgaWYodmVydGljZXNbaV0ueSA8IHltaW4pIHltaW4gPSB2ZXJ0aWNlc1tpXS55XG4gICAgaWYodmVydGljZXNbaV0ueSA+IHltYXgpIHltYXggPSB2ZXJ0aWNlc1tpXS55XG4gIH1cblxuICAvKiBGaW5kIGEgc3VwZXJ0cmlhbmdsZSwgd2hpY2ggaXMgYSB0cmlhbmdsZSB0aGF0IHN1cnJvdW5kcyBhbGwgdGhlXG4gICAqIHZlcnRpY2VzLiBUaGlzIGlzIHVzZWQgbGlrZSBzb21ldGhpbmcgb2YgYSBzZW50aW5lbCB2YWx1ZSB0byByZW1vdmVcbiAgICogY2FzZXMgaW4gdGhlIG1haW4gYWxnb3JpdGhtLCBhbmQgaXMgcmVtb3ZlZCBiZWZvcmUgd2UgcmV0dXJuIGFueVxuICAgKiByZXN1bHRzLlxuICAgKlxuICAgKiBPbmNlIGZvdW5kLCBwdXQgaXQgaW4gdGhlIFwib3BlblwiIGxpc3QuIChUaGUgXCJvcGVuXCIgbGlzdCBpcyBmb3JcbiAgICogdHJpYW5nbGVzIHdobyBtYXkgc3RpbGwgbmVlZCB0byBiZSBjb25zaWRlcmVkOyB0aGUgXCJjbG9zZWRcIiBsaXN0IGlzXG4gICAqIGZvciB0cmlhbmdsZXMgd2hpY2ggZG8gbm90LikgKi9cbiAgdmFyIGR4ICAgICA9IHhtYXggLSB4bWluLFxuICAgICAgZHkgICAgID0geW1heCAtIHltaW4sXG4gICAgICBkbWF4ICAgPSAoZHggPiBkeSkgPyBkeCA6IGR5LFxuICAgICAgeG1pZCAgID0gKHhtYXggKyB4bWluKSAqIDAuNSxcbiAgICAgIHltaWQgICA9ICh5bWF4ICsgeW1pbikgKiAwLjUsXG4gICAgICBvcGVuICAgPSBbXG4gICAgICAgIG5ldyBUcmlhbmdsZShcbiAgICAgICAgICB7eDogeG1pZCAtIDIwICogZG1heCwgeTogeW1pZCAtICAgICAgZG1heCwgX19zZW50aW5lbDogdHJ1ZX0sXG4gICAgICAgICAge3g6IHhtaWQgICAgICAgICAgICAsIHk6IHltaWQgKyAyMCAqIGRtYXgsIF9fc2VudGluZWw6IHRydWV9LFxuICAgICAgICAgIHt4OiB4bWlkICsgMjAgKiBkbWF4LCB5OiB5bWlkIC0gICAgICBkbWF4LCBfX3NlbnRpbmVsOiB0cnVlfVxuICAgICAgICApXG4gICAgICBdLFxuICAgICAgY2xvc2VkID0gW10sXG4gICAgICBlZGdlcyA9IFtdLFxuICAgICAgaiwgYSwgYlxuXG4gIC8qIEluY3JlbWVudGFsbHkgYWRkIGVhY2ggdmVydGV4IHRvIHRoZSBtZXNoLiAqL1xuICBpID0gdmVydGljZXMubGVuZ3RoXG4gIHdoaWxlKGktLSkge1xuICAgIC8qIEZvciBlYWNoIG9wZW4gdHJpYW5nbGUsIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCBwb2ludCBpc1xuICAgICAqIGluc2lkZSBpdCdzIGNpcmN1bWNpcmNsZS4gSWYgaXQgaXMsIHJlbW92ZSB0aGUgdHJpYW5nbGUgYW5kIGFkZFxuICAgICAqIGl0J3MgZWRnZXMgdG8gYW4gZWRnZSBsaXN0LiAqL1xuICAgIGVkZ2VzLmxlbmd0aCA9IDBcbiAgICBqID0gb3Blbi5sZW5ndGhcbiAgICB3aGlsZShqLS0pIHtcbiAgICAgIC8qIElmIHRoaXMgcG9pbnQgaXMgdG8gdGhlIHJpZ2h0IG9mIHRoaXMgdHJpYW5nbGUncyBjaXJjdW1jaXJjbGUsXG4gICAgICAgKiB0aGVuIHRoaXMgdHJpYW5nbGUgc2hvdWxkIG5ldmVyIGdldCBjaGVja2VkIGFnYWluLiBSZW1vdmUgaXRcbiAgICAgICAqIGZyb20gdGhlIG9wZW4gbGlzdCwgYWRkIGl0IHRvIHRoZSBjbG9zZWQgbGlzdCwgYW5kIHNraXAuICovXG4gICAgICBkeCA9IHZlcnRpY2VzW2ldLnggLSBvcGVuW2pdLnhcbiAgICAgIGlmKGR4ID4gMCAmJiBkeCAqIGR4ID4gb3BlbltqXS5yKSB7XG4gICAgICAgIGNsb3NlZC5wdXNoKG9wZW5bal0pXG4gICAgICAgIG9wZW4uc3BsaWNlKGosIDEpXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8qIElmIG5vdCwgc2tpcCB0aGlzIHRyaWFuZ2xlLiAqL1xuICAgICAgZHkgPSB2ZXJ0aWNlc1tpXS55IC0gb3BlbltqXS55XG4gICAgICBpZihkeCAqIGR4ICsgZHkgKiBkeSA+IG9wZW5bal0ucilcbiAgICAgICAgY29udGludWVcblxuICAgICAgLyogUmVtb3ZlIHRoZSB0cmlhbmdsZSBhbmQgYWRkIGl0J3MgZWRnZXMgdG8gdGhlIGVkZ2UgbGlzdC4gKi9cbiAgICAgIGVkZ2VzLnB1c2goXG4gICAgICAgIG9wZW5bal0uYSwgb3BlbltqXS5iLFxuICAgICAgICBvcGVuW2pdLmIsIG9wZW5bal0uYyxcbiAgICAgICAgb3BlbltqXS5jLCBvcGVuW2pdLmFcbiAgICAgIClcbiAgICAgIG9wZW4uc3BsaWNlKGosIDEpXG4gICAgfVxuXG4gICAgLyogUmVtb3ZlIGFueSBkb3VibGVkIGVkZ2VzLiAqL1xuICAgIGRlZHVwKGVkZ2VzKVxuXG4gICAgLyogQWRkIGEgbmV3IHRyaWFuZ2xlIGZvciBlYWNoIGVkZ2UuICovXG4gICAgaiA9IGVkZ2VzLmxlbmd0aFxuICAgIHdoaWxlKGopIHtcbiAgICAgIGIgPSBlZGdlc1stLWpdXG4gICAgICBhID0gZWRnZXNbLS1qXVxuICAgICAgb3Blbi5wdXNoKG5ldyBUcmlhbmdsZShhLCBiLCB2ZXJ0aWNlc1tpXSkpXG4gICAgfVxuICB9XG5cbiAgLyogQ29weSBhbnkgcmVtYWluaW5nIG9wZW4gdHJpYW5nbGVzIHRvIHRoZSBjbG9zZWQgbGlzdCwgYW5kIHRoZW5cbiAgICogcmVtb3ZlIGFueSB0cmlhbmdsZXMgdGhhdCBzaGFyZSBhIHZlcnRleCB3aXRoIHRoZSBzdXBlcnRyaWFuZ2xlLiAqL1xuICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjbG9zZWQsIG9wZW4pXG5cbiAgaSA9IGNsb3NlZC5sZW5ndGhcbiAgd2hpbGUoaS0tKVxuICAgIGlmKGNsb3NlZFtpXS5hLl9fc2VudGluZWwgfHxcbiAgICAgICBjbG9zZWRbaV0uYi5fX3NlbnRpbmVsIHx8XG4gICAgICAgY2xvc2VkW2ldLmMuX19zZW50aW5lbClcbiAgICAgIGNsb3NlZC5zcGxpY2UoaSwgMSlcblxuICAvKiBZYXksIHdlJ3JlIGRvbmUhICovXG4gIHJldHVybiBjbG9zZWRcbn1cblxuLyppZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgVHJpYW5nbGU6IFRyaWFuZ2xlLFxuICAgICAgICB0cmlhbmd1bGF0ZTogdHJpYW5ndWxhdGVcbiAgICB9XG59Ki9cbiIsImRpc3RhbmNlID0gcmVxdWlyZSgndHVyZi1kaXN0YW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldFBvaW50LCBwb2ludHMpe1xuICB2YXIgbmVhcmVzdFBvaW50O1xuICB2YXIgY291bnQgPSAwO1xuICB2YXIgZGlzdCA9IEluZmluaXR5O1xuICBwb2ludHMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgaWYoIW5lYXJlc3RQb2ludCl7XG4gICAgICBuZWFyZXN0UG9pbnQgPSBwdDtcbiAgICAgIHZhciBkaXN0ID0gZGlzdGFuY2UodGFyZ2V0UG9pbnQsIHB0LCAnbWlsZXMnKTtcbiAgICAgIG5lYXJlc3RQb2ludC5wcm9wZXJ0aWVzLmRpc3RhbmNlID0gZGlzdDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHZhciBkaXN0ID0gZGlzdGFuY2UodGFyZ2V0UG9pbnQsIHB0LCAnbWlsZXMnKTtcbiAgICAgIGlmKGRpc3QgPCBuZWFyZXN0UG9pbnQucHJvcGVydGllcy5kaXN0YW5jZSl7XG4gICAgICAgIG5lYXJlc3RQb2ludCA9IHB0O1xuICAgICAgICBuZWFyZXN0UG9pbnQucHJvcGVydGllcy5kaXN0YW5jZSA9IGRpc3Q7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgZGVsZXRlIG5lYXJlc3RQb2ludC5wcm9wZXJ0aWVzLmRpc3RhbmNlO1xuICByZXR1cm4gbmVhcmVzdFBvaW50O1xufSIsIi8qKlxuICogR2VuZXJhdGVzIGEgbmV3IEdlb0pTT04gUG9pbnQgZmVhdHVyZSwgZ2l2ZW4gY29vcmRpbmF0ZXNcbiAqIGFuZCwgb3B0aW9uYWxseSwgcHJvcGVydGllcy5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvcG9pbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBsb25naXR1ZGUgLSBwb3NpdGlvbiB3ZXN0IHRvIGVhc3QgaW4gZGVjaW1hbCBkZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gbGF0aXR1ZGUgLSBwb3NpdGlvbiBzb3V0aCB0byBub3J0aCBpbiBkZWNpbWFsIGRlZ3JlZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzXG4gKiBAcmV0dXJuIHtHZW9KU09OUG9pbnR9IG91dHB1dFxuICogQGV4YW1wbGVcbiAqIHZhciBwdDEgPSB0dXJmLnBvaW50KC03NS4zNDMsIDM5Ljk4NClcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4LCB5LCBwcm9wZXJ0aWVzKXtcbiAgaWYoeCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gIFx0cHJvcGVydGllcyA9IHk7XG4gIFx0eSA9IHhbMV07XG4gIFx0eCA9IHhbMF07XG4gIH0gZWxzZSBpZihpc05hTih4KSB8fCBpc05hTih5KSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvb3JkaW5hdGVzJylcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIkZlYXR1cmVcIixcbiAgICBnZW9tZXRyeToge1xuICAgICAgdHlwZTogXCJQb2ludFwiLFxuICAgICAgY29vcmRpbmF0ZXM6IFt4LCB5XVxuICAgIH0sXG4gICAgcHJvcGVydGllczogcHJvcGVydGllcyB8fCB7fVxuICB9O1xufVxuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1idWZmZXIvbm9kZV9tb2R1bGVzL3R1cmYtcG9seWdvbi9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgZWFjaCA9IHJlcXVpcmUoJ3R1cmYtbWV0YScpLmNvb3JkRWFjaCxcbiAgICBjb252ZXhIdWxsID0gcmVxdWlyZSgnY29udmV4LWh1bGwnKSxcbiAgICBwb2x5Z29uID0gcmVxdWlyZSgndHVyZi1wb2x5Z29uJyk7XG5cbi8qKlxuICogVGFrZXMgYW55IHtAbGluayBHZW9KU09OfSBvYmplY3QgYW5kIHJldHVybnMgYVxuICogW2NvbnZleCBodWxsXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbnZleF9odWxsKSBwb2x5Z29uLlxuICpcbiAqIEludGVybmFsbHkgdGhpcyB1c2VzXG4gKiB0aGUgW2NvbnZleC1odWxsXShodHRwczovL2dpdGh1Yi5jb20vbWlrb2xhbHlzZW5rby9jb252ZXgtaHVsbCkgbW9kdWxlIHRoYXRcbiAqIGltcGxlbWVudHMgYSBbbW9ub3RvbmUgY2hhaW4gaHVsbF0oaHR0cDovL2VuLndpa2lib29rcy5vcmcvd2lraS9BbGdvcml0aG1fSW1wbGVtZW50YXRpb24vR2VvbWV0cnkvQ29udmV4X2h1bGwvTW9ub3RvbmVfY2hhaW4pLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9jb252ZXhcbiAqIEBwYXJhbSB7R2VvSlNPTn0gaW5wdXQgYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcmV0dXJucyB7RmVhdHVyZX0gYSB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludHMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiAqICAgdHVyZi5wb2ludChbMTAuMTk1MzEyLCA0My43NTUyMjVdKSxcbiAqICAgdHVyZi5wb2ludChbMTAuNDA0MDUyLCA0My44NDI0NTExXSksXG4gKiAgIHR1cmYucG9pbnQoWzEwLjU3OTgzMywgNDMuNjU5OTI0XSksXG4gKiAgIHR1cmYucG9pbnQoWzEwLjM2MDEwNywgNDMuNTE2Njg4XSksXG4gKiAgIHR1cmYucG9pbnQoWzEwLjE0MDM4LCA0My41ODgzNDhdKSxcbiAqICAgdHVyZi5wb2ludChbMTAuMTk1MzEyLCA0My43NTUyMjVdKV0pO1xuICpcbiAqIHZhciBodWxsID0gdHVyZi5jb252ZXgocG9pbnRzKTtcbiAqXG4gKiB2YXIgcmVzdWx0ID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihcbiAqICAgcG9pbnRzLmZlYXR1cmVzLmNvbmNhdChodWxsKSk7XG4gKlxuICogLy89cmVzdWx0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmMpIHtcbiAgdmFyIHBvaW50cyA9IFtdO1xuICBlYWNoKGZjLCBmdW5jdGlvbihjb29yZCkgeyBwb2ludHMucHVzaChjb29yZCk7IH0pO1xuICB2YXIgaHVsbCA9IGNvbnZleEh1bGwocG9pbnRzKTtcbiAgdmFyIHJpbmcgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBodWxsLmxlbmd0aDsgaSsrKSB7XG4gICAgICByaW5nLnB1c2gocG9pbnRzW2h1bGxbaV1bMF1dKTtcbiAgfVxuICByaW5nLnB1c2gocG9pbnRzW2h1bGxbaHVsbC5sZW5ndGggLSAxXVsxXV0pO1xuICByZXR1cm4gcG9seWdvbihbcmluZ10pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiXG5cbnZhciBjb252ZXhIdWxsMWQgPSByZXF1aXJlKCcuL2xpYi9jaDFkJylcbnZhciBjb252ZXhIdWxsMmQgPSByZXF1aXJlKCcuL2xpYi9jaDJkJylcbnZhciBjb252ZXhIdWxsbmQgPSByZXF1aXJlKCcuL2xpYi9jaG5kJylcblxubW9kdWxlLmV4cG9ydHMgPSBjb252ZXhIdWxsXG5cbmZ1bmN0aW9uIGNvbnZleEh1bGwocG9pbnRzKSB7XG4gIHZhciBuID0gcG9pbnRzLmxlbmd0aFxuICBpZihuID09PSAwKSB7XG4gICAgcmV0dXJuIFtdXG4gIH0gZWxzZSBpZihuID09PSAxKSB7XG4gICAgcmV0dXJuIFtbMF1dXG4gIH1cbiAgdmFyIGQgPSBwb2ludHNbMF0ubGVuZ3RoXG4gIGlmKGQgPT09IDApIHtcbiAgICByZXR1cm4gW11cbiAgfSBlbHNlIGlmKGQgPT09IDEpIHtcbiAgICByZXR1cm4gY29udmV4SHVsbDFkKHBvaW50cylcbiAgfSBlbHNlIGlmKGQgPT09IDIpIHtcbiAgICByZXR1cm4gY29udmV4SHVsbDJkKHBvaW50cylcbiAgfVxuICByZXR1cm4gY29udmV4SHVsbG5kKHBvaW50cywgZClcbn0iLCJcInVzZSBzdHJpY3RcIlxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnZleEh1bGwxZFxuXG5mdW5jdGlvbiBjb252ZXhIdWxsMWQocG9pbnRzKSB7XG4gIHZhciBsbyA9IDBcbiAgdmFyIGhpID0gMFxuICBmb3IodmFyIGk9MTsgaTxwb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICBpZihwb2ludHNbaV1bMF0gPCBwb2ludHNbbG9dWzBdKSB7XG4gICAgICBsbyA9IGlcbiAgICB9XG4gICAgaWYocG9pbnRzW2ldWzBdID4gcG9pbnRzW2hpXVswXSkge1xuICAgICAgaGkgPSBpXG4gICAgfVxuICB9XG4gIGlmKGxvIDwgaGkpIHtcbiAgICByZXR1cm4gW1tsb10sIFtoaV1dXG4gIH0gZWxzZSBpZihsbyA+IGhpKSB7XG4gICAgcmV0dXJuIFtbaGldLCBbbG9dXVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbW2xvXV1cbiAgfVxufSIsIid1c2Ugc3RyaWN0J1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnZleEh1bGwyRFxuXG52YXIgbW9ub3RvbmVIdWxsID0gcmVxdWlyZSgnbW9ub3RvbmUtY29udmV4LWh1bGwtMmQnKVxuXG5mdW5jdGlvbiBjb252ZXhIdWxsMkQocG9pbnRzKSB7XG4gIHZhciBodWxsID0gbW9ub3RvbmVIdWxsKHBvaW50cylcbiAgdmFyIGggPSBodWxsLmxlbmd0aFxuICBpZihoIDw9IDIpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICB2YXIgZWRnZXMgPSBuZXcgQXJyYXkoaClcbiAgdmFyIGEgPSBodWxsW2gtMV1cbiAgZm9yKHZhciBpPTA7IGk8aDsgKytpKSB7XG4gICAgdmFyIGIgPSBodWxsW2ldXG4gICAgZWRnZXNbaV0gPSBbYSxiXVxuICAgIGEgPSBiXG4gIH1cbiAgcmV0dXJuIGVkZ2VzXG59XG4iLCIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSBjb252ZXhIdWxsbkRcblxudmFyIGljaCA9IHJlcXVpcmUoJ2luY3JlbWVudGFsLWNvbnZleC1odWxsJylcbnZhciBhZmYgPSByZXF1aXJlKCdhZmZpbmUtaHVsbCcpXG5cbmZ1bmN0aW9uIHBlcm11dGUocG9pbnRzLCBmcm9udCkge1xuICB2YXIgbiA9IHBvaW50cy5sZW5ndGhcbiAgdmFyIG5wb2ludHMgPSBuZXcgQXJyYXkobilcbiAgZm9yKHZhciBpPTA7IGk8ZnJvbnQubGVuZ3RoOyArK2kpIHtcbiAgICBucG9pbnRzW2ldID0gcG9pbnRzW2Zyb250W2ldXVxuICB9XG4gIHZhciBwdHIgPSBmcm9udC5sZW5ndGhcbiAgZm9yKHZhciBpPTA7IGk8bjsgKytpKSB7XG4gICAgaWYoZnJvbnQuaW5kZXhPZihpKSA8IDApIHtcbiAgICAgIG5wb2ludHNbcHRyKytdID0gcG9pbnRzW2ldXG4gICAgfVxuICB9XG4gIHJldHVybiBucG9pbnRzXG59XG5cbmZ1bmN0aW9uIGludlBlcm11dGUoY2VsbHMsIGZyb250KSB7XG4gIHZhciBuYyA9IGNlbGxzLmxlbmd0aFxuICB2YXIgbmYgPSBmcm9udC5sZW5ndGhcbiAgZm9yKHZhciBpPTA7IGk8bmM7ICsraSkge1xuICAgIHZhciBjID0gY2VsbHNbaV1cbiAgICBmb3IodmFyIGo9MDsgajxjLmxlbmd0aDsgKytqKSB7XG4gICAgICB2YXIgeCA9IGNbal1cbiAgICAgIGlmKHggPCBuZikge1xuICAgICAgICBjW2pdID0gZnJvbnRbeF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSB4IC0gbmZcbiAgICAgICAgZm9yKHZhciBrPTA7IGs8bmY7ICsraykge1xuICAgICAgICAgIGlmKHggPj0gZnJvbnRba10pIHtcbiAgICAgICAgICAgIHggKz0gMVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjW2pdID0geFxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gY2VsbHNcbn1cblxuZnVuY3Rpb24gY29udmV4SHVsbG5EKHBvaW50cywgZCkge1xuICB0cnkge1xuICAgIHJldHVybiBpY2gocG9pbnRzLCB0cnVlKVxuICB9IGNhdGNoKGUpIHtcbiAgICAvL0lmIHBvaW50IHNldCBpcyBkZWdlbmVyYXRlLCB0cnkgdG8gZmluZCBhIGJhc2lzIGFuZCByZXJ1biBpdFxuICAgIHZhciBhaCA9IGFmZihwb2ludHMpXG4gICAgaWYoYWgubGVuZ3RoIDw9IGQpIHtcbiAgICAgIC8vTm8gYmFzaXMsIG5vIHRyeVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIHZhciBucG9pbnRzID0gcGVybXV0ZShwb2ludHMsIGFoKVxuICAgIHZhciBuaHVsbCAgID0gaWNoKG5wb2ludHMsIHRydWUpXG4gICAgcmV0dXJuIGludlBlcm11dGUobmh1bGwsIGFoKVxuICB9XG59IiwiJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0gYWZmaW5lSHVsbFxuXG52YXIgb3JpZW50ID0gcmVxdWlyZSgncm9idXN0LW9yaWVudGF0aW9uJylcblxuZnVuY3Rpb24gbGluZWFybHlJbmRlcGVuZGVudChwb2ludHMsIGQpIHtcbiAgdmFyIG5odWxsID0gbmV3IEFycmF5KGQrMSlcbiAgZm9yKHZhciBpPTA7IGk8cG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgbmh1bGxbaV0gPSBwb2ludHNbaV1cbiAgfVxuICBmb3IodmFyIGk9MDsgaTw9cG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgZm9yKHZhciBqPXBvaW50cy5sZW5ndGg7IGo8PWQ7ICsraikge1xuICAgICAgdmFyIHggPSBuZXcgQXJyYXkoZClcbiAgICAgIGZvcih2YXIgaz0wOyBrPGQ7ICsraykge1xuICAgICAgICB4W2tdID0gTWF0aC5wb3coaisxLWksIGspXG4gICAgICB9XG4gICAgICBuaHVsbFtqXSA9IHhcbiAgICB9XG4gICAgdmFyIG8gPSBvcmllbnQuYXBwbHkodm9pZCAwLCBuaHVsbClcbiAgICBpZihvKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gYWZmaW5lSHVsbChwb2ludHMpIHtcbiAgdmFyIG4gPSBwb2ludHMubGVuZ3RoXG4gIGlmKG4gPT09IDApIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBpZihuID09PSAxKSB7XG4gICAgcmV0dXJuIFswXVxuICB9XG4gIHZhciBkID0gcG9pbnRzWzBdLmxlbmd0aFxuICB2YXIgZnJhbWUgPSBbIHBvaW50c1swXSBdXG4gIHZhciBpbmRleCA9IFsgMCBdXG4gIGZvcih2YXIgaT0xOyBpPG47ICsraSkge1xuICAgIGZyYW1lLnB1c2gocG9pbnRzW2ldKVxuICAgIGlmKCFsaW5lYXJseUluZGVwZW5kZW50KGZyYW1lLCBkKSkge1xuICAgICAgZnJhbWUucG9wKClcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGluZGV4LnB1c2goaSlcbiAgICBpZihpbmRleC5sZW5ndGggPT09IGQrMSkge1xuICAgICAgcmV0dXJuIGluZGV4XG4gICAgfVxuICB9XG4gIHJldHVybiBpbmRleFxufSIsIlwidXNlIHN0cmljdFwiXG5cbm1vZHVsZS5leHBvcnRzID0gZmFzdFR3b1N1bVxuXG5mdW5jdGlvbiBmYXN0VHdvU3VtKGEsIGIsIHJlc3VsdCkge1xuXHR2YXIgeCA9IGEgKyBiXG5cdHZhciBidiA9IHggLSBhXG5cdHZhciBhdiA9IHggLSBidlxuXHR2YXIgYnIgPSBiIC0gYnZcblx0dmFyIGFyID0gYSAtIGF2XG5cdGlmKHJlc3VsdCkge1xuXHRcdHJlc3VsdFswXSA9IGFyICsgYnJcblx0XHRyZXN1bHRbMV0gPSB4XG5cdFx0cmV0dXJuIHJlc3VsdFxuXHR9XG5cdHJldHVybiBbYXIrYnIsIHhdXG59IiwiXCJ1c2Ugc3RyaWN0XCJcblxudmFyIHR3b1Byb2R1Y3QgPSByZXF1aXJlKFwidHdvLXByb2R1Y3RcIilcbnZhciB0d29TdW0gPSByZXF1aXJlKFwidHdvLXN1bVwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNjYWxlTGluZWFyRXhwYW5zaW9uXG5cbmZ1bmN0aW9uIHNjYWxlTGluZWFyRXhwYW5zaW9uKGUsIHNjYWxlKSB7XG4gIHZhciBuID0gZS5sZW5ndGhcbiAgaWYobiA9PT0gMSkge1xuICAgIHZhciB0cyA9IHR3b1Byb2R1Y3QoZVswXSwgc2NhbGUpXG4gICAgaWYodHNbMF0pIHtcbiAgICAgIHJldHVybiB0c1xuICAgIH1cbiAgICByZXR1cm4gWyB0c1sxXSBdXG4gIH1cbiAgdmFyIGcgPSBuZXcgQXJyYXkoMiAqIG4pXG4gIHZhciBxID0gWzAuMSwgMC4xXVxuICB2YXIgdCA9IFswLjEsIDAuMV1cbiAgdmFyIGNvdW50ID0gMFxuICB0d29Qcm9kdWN0KGVbMF0sIHNjYWxlLCBxKVxuICBpZihxWzBdKSB7XG4gICAgZ1tjb3VudCsrXSA9IHFbMF1cbiAgfVxuICBmb3IodmFyIGk9MTsgaTxuOyArK2kpIHtcbiAgICB0d29Qcm9kdWN0KGVbaV0sIHNjYWxlLCB0KVxuICAgIHZhciBwcSA9IHFbMV1cbiAgICB0d29TdW0ocHEsIHRbMF0sIHEpXG4gICAgaWYocVswXSkge1xuICAgICAgZ1tjb3VudCsrXSA9IHFbMF1cbiAgICB9XG4gICAgdmFyIGEgPSB0WzFdXG4gICAgdmFyIGIgPSBxWzFdXG4gICAgdmFyIHggPSBhICsgYlxuICAgIHZhciBidiA9IHggLSBhXG4gICAgdmFyIHkgPSBiIC0gYnZcbiAgICBxWzFdID0geFxuICAgIGlmKHkpIHtcbiAgICAgIGdbY291bnQrK10gPSB5XG4gICAgfVxuICB9XG4gIGlmKHFbMV0pIHtcbiAgICBnW2NvdW50KytdID0gcVsxXVxuICB9XG4gIGlmKGNvdW50ID09PSAwKSB7XG4gICAgZ1tjb3VudCsrXSA9IDAuMFxuICB9XG4gIGcubGVuZ3RoID0gY291bnRcbiAgcmV0dXJuIGdcbn0iLCJcInVzZSBzdHJpY3RcIlxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvYnVzdFN1YnRyYWN0XG5cbi8vRWFzeSBjYXNlOiBBZGQgdHdvIHNjYWxhcnNcbmZ1bmN0aW9uIHNjYWxhclNjYWxhcihhLCBiKSB7XG4gIHZhciB4ID0gYSArIGJcbiAgdmFyIGJ2ID0geCAtIGFcbiAgdmFyIGF2ID0geCAtIGJ2XG4gIHZhciBiciA9IGIgLSBidlxuICB2YXIgYXIgPSBhIC0gYXZcbiAgdmFyIHkgPSBhciArIGJyXG4gIGlmKHkpIHtcbiAgICByZXR1cm4gW3ksIHhdXG4gIH1cbiAgcmV0dXJuIFt4XVxufVxuXG5mdW5jdGlvbiByb2J1c3RTdWJ0cmFjdChlLCBmKSB7XG4gIHZhciBuZSA9IGUubGVuZ3RofDBcbiAgdmFyIG5mID0gZi5sZW5ndGh8MFxuICBpZihuZSA9PT0gMSAmJiBuZiA9PT0gMSkge1xuICAgIHJldHVybiBzY2FsYXJTY2FsYXIoZVswXSwgLWZbMF0pXG4gIH1cbiAgdmFyIG4gPSBuZSArIG5mXG4gIHZhciBnID0gbmV3IEFycmF5KG4pXG4gIHZhciBjb3VudCA9IDBcbiAgdmFyIGVwdHIgPSAwXG4gIHZhciBmcHRyID0gMFxuICB2YXIgYWJzID0gTWF0aC5hYnNcbiAgdmFyIGVpID0gZVtlcHRyXVxuICB2YXIgZWEgPSBhYnMoZWkpXG4gIHZhciBmaSA9IC1mW2ZwdHJdXG4gIHZhciBmYSA9IGFicyhmaSlcbiAgdmFyIGEsIGJcbiAgaWYoZWEgPCBmYSkge1xuICAgIGIgPSBlaVxuICAgIGVwdHIgKz0gMVxuICAgIGlmKGVwdHIgPCBuZSkge1xuICAgICAgZWkgPSBlW2VwdHJdXG4gICAgICBlYSA9IGFicyhlaSlcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYiA9IGZpXG4gICAgZnB0ciArPSAxXG4gICAgaWYoZnB0ciA8IG5mKSB7XG4gICAgICBmaSA9IC1mW2ZwdHJdXG4gICAgICBmYSA9IGFicyhmaSlcbiAgICB9XG4gIH1cbiAgaWYoKGVwdHIgPCBuZSAmJiBlYSA8IGZhKSB8fCAoZnB0ciA+PSBuZikpIHtcbiAgICBhID0gZWlcbiAgICBlcHRyICs9IDFcbiAgICBpZihlcHRyIDwgbmUpIHtcbiAgICAgIGVpID0gZVtlcHRyXVxuICAgICAgZWEgPSBhYnMoZWkpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGEgPSBmaVxuICAgIGZwdHIgKz0gMVxuICAgIGlmKGZwdHIgPCBuZikge1xuICAgICAgZmkgPSAtZltmcHRyXVxuICAgICAgZmEgPSBhYnMoZmkpXG4gICAgfVxuICB9XG4gIHZhciB4ID0gYSArIGJcbiAgdmFyIGJ2ID0geCAtIGFcbiAgdmFyIHkgPSBiIC0gYnZcbiAgdmFyIHEwID0geVxuICB2YXIgcTEgPSB4XG4gIHZhciBfeCwgX2J2LCBfYXYsIF9iciwgX2FyXG4gIHdoaWxlKGVwdHIgPCBuZSAmJiBmcHRyIDwgbmYpIHtcbiAgICBpZihlYSA8IGZhKSB7XG4gICAgICBhID0gZWlcbiAgICAgIGVwdHIgKz0gMVxuICAgICAgaWYoZXB0ciA8IG5lKSB7XG4gICAgICAgIGVpID0gZVtlcHRyXVxuICAgICAgICBlYSA9IGFicyhlaSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYSA9IGZpXG4gICAgICBmcHRyICs9IDFcbiAgICAgIGlmKGZwdHIgPCBuZikge1xuICAgICAgICBmaSA9IC1mW2ZwdHJdXG4gICAgICAgIGZhID0gYWJzKGZpKVxuICAgICAgfVxuICAgIH1cbiAgICBiID0gcTBcbiAgICB4ID0gYSArIGJcbiAgICBidiA9IHggLSBhXG4gICAgeSA9IGIgLSBidlxuICAgIGlmKHkpIHtcbiAgICAgIGdbY291bnQrK10gPSB5XG4gICAgfVxuICAgIF94ID0gcTEgKyB4XG4gICAgX2J2ID0gX3ggLSBxMVxuICAgIF9hdiA9IF94IC0gX2J2XG4gICAgX2JyID0geCAtIF9idlxuICAgIF9hciA9IHExIC0gX2F2XG4gICAgcTAgPSBfYXIgKyBfYnJcbiAgICBxMSA9IF94XG4gIH1cbiAgd2hpbGUoZXB0ciA8IG5lKSB7XG4gICAgYSA9IGVpXG4gICAgYiA9IHEwXG4gICAgeCA9IGEgKyBiXG4gICAgYnYgPSB4IC0gYVxuICAgIHkgPSBiIC0gYnZcbiAgICBpZih5KSB7XG4gICAgICBnW2NvdW50KytdID0geVxuICAgIH1cbiAgICBfeCA9IHExICsgeFxuICAgIF9idiA9IF94IC0gcTFcbiAgICBfYXYgPSBfeCAtIF9idlxuICAgIF9iciA9IHggLSBfYnZcbiAgICBfYXIgPSBxMSAtIF9hdlxuICAgIHEwID0gX2FyICsgX2JyXG4gICAgcTEgPSBfeFxuICAgIGVwdHIgKz0gMVxuICAgIGlmKGVwdHIgPCBuZSkge1xuICAgICAgZWkgPSBlW2VwdHJdXG4gICAgfVxuICB9XG4gIHdoaWxlKGZwdHIgPCBuZikge1xuICAgIGEgPSBmaVxuICAgIGIgPSBxMFxuICAgIHggPSBhICsgYlxuICAgIGJ2ID0geCAtIGFcbiAgICB5ID0gYiAtIGJ2XG4gICAgaWYoeSkge1xuICAgICAgZ1tjb3VudCsrXSA9IHlcbiAgICB9IFxuICAgIF94ID0gcTEgKyB4XG4gICAgX2J2ID0gX3ggLSBxMVxuICAgIF9hdiA9IF94IC0gX2J2XG4gICAgX2JyID0geCAtIF9idlxuICAgIF9hciA9IHExIC0gX2F2XG4gICAgcTAgPSBfYXIgKyBfYnJcbiAgICBxMSA9IF94XG4gICAgZnB0ciArPSAxXG4gICAgaWYoZnB0ciA8IG5mKSB7XG4gICAgICBmaSA9IC1mW2ZwdHJdXG4gICAgfVxuICB9XG4gIGlmKHEwKSB7XG4gICAgZ1tjb3VudCsrXSA9IHEwXG4gIH1cbiAgaWYocTEpIHtcbiAgICBnW2NvdW50KytdID0gcTFcbiAgfVxuICBpZighY291bnQpIHtcbiAgICBnW2NvdW50KytdID0gMC4wICBcbiAgfVxuICBnLmxlbmd0aCA9IGNvdW50XG4gIHJldHVybiBnXG59IiwiXCJ1c2Ugc3RyaWN0XCJcblxubW9kdWxlLmV4cG9ydHMgPSBsaW5lYXJFeHBhbnNpb25TdW1cblxuLy9FYXN5IGNhc2U6IEFkZCB0d28gc2NhbGFyc1xuZnVuY3Rpb24gc2NhbGFyU2NhbGFyKGEsIGIpIHtcbiAgdmFyIHggPSBhICsgYlxuICB2YXIgYnYgPSB4IC0gYVxuICB2YXIgYXYgPSB4IC0gYnZcbiAgdmFyIGJyID0gYiAtIGJ2XG4gIHZhciBhciA9IGEgLSBhdlxuICB2YXIgeSA9IGFyICsgYnJcbiAgaWYoeSkge1xuICAgIHJldHVybiBbeSwgeF1cbiAgfVxuICByZXR1cm4gW3hdXG59XG5cbmZ1bmN0aW9uIGxpbmVhckV4cGFuc2lvblN1bShlLCBmKSB7XG4gIHZhciBuZSA9IGUubGVuZ3RofDBcbiAgdmFyIG5mID0gZi5sZW5ndGh8MFxuICBpZihuZSA9PT0gMSAmJiBuZiA9PT0gMSkge1xuICAgIHJldHVybiBzY2FsYXJTY2FsYXIoZVswXSwgZlswXSlcbiAgfVxuICB2YXIgbiA9IG5lICsgbmZcbiAgdmFyIGcgPSBuZXcgQXJyYXkobilcbiAgdmFyIGNvdW50ID0gMFxuICB2YXIgZXB0ciA9IDBcbiAgdmFyIGZwdHIgPSAwXG4gIHZhciBhYnMgPSBNYXRoLmFic1xuICB2YXIgZWkgPSBlW2VwdHJdXG4gIHZhciBlYSA9IGFicyhlaSlcbiAgdmFyIGZpID0gZltmcHRyXVxuICB2YXIgZmEgPSBhYnMoZmkpXG4gIHZhciBhLCBiXG4gIGlmKGVhIDwgZmEpIHtcbiAgICBiID0gZWlcbiAgICBlcHRyICs9IDFcbiAgICBpZihlcHRyIDwgbmUpIHtcbiAgICAgIGVpID0gZVtlcHRyXVxuICAgICAgZWEgPSBhYnMoZWkpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGIgPSBmaVxuICAgIGZwdHIgKz0gMVxuICAgIGlmKGZwdHIgPCBuZikge1xuICAgICAgZmkgPSBmW2ZwdHJdXG4gICAgICBmYSA9IGFicyhmaSlcbiAgICB9XG4gIH1cbiAgaWYoKGVwdHIgPCBuZSAmJiBlYSA8IGZhKSB8fCAoZnB0ciA+PSBuZikpIHtcbiAgICBhID0gZWlcbiAgICBlcHRyICs9IDFcbiAgICBpZihlcHRyIDwgbmUpIHtcbiAgICAgIGVpID0gZVtlcHRyXVxuICAgICAgZWEgPSBhYnMoZWkpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGEgPSBmaVxuICAgIGZwdHIgKz0gMVxuICAgIGlmKGZwdHIgPCBuZikge1xuICAgICAgZmkgPSBmW2ZwdHJdXG4gICAgICBmYSA9IGFicyhmaSlcbiAgICB9XG4gIH1cbiAgdmFyIHggPSBhICsgYlxuICB2YXIgYnYgPSB4IC0gYVxuICB2YXIgeSA9IGIgLSBidlxuICB2YXIgcTAgPSB5XG4gIHZhciBxMSA9IHhcbiAgdmFyIF94LCBfYnYsIF9hdiwgX2JyLCBfYXJcbiAgd2hpbGUoZXB0ciA8IG5lICYmIGZwdHIgPCBuZikge1xuICAgIGlmKGVhIDwgZmEpIHtcbiAgICAgIGEgPSBlaVxuICAgICAgZXB0ciArPSAxXG4gICAgICBpZihlcHRyIDwgbmUpIHtcbiAgICAgICAgZWkgPSBlW2VwdHJdXG4gICAgICAgIGVhID0gYWJzKGVpKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhID0gZmlcbiAgICAgIGZwdHIgKz0gMVxuICAgICAgaWYoZnB0ciA8IG5mKSB7XG4gICAgICAgIGZpID0gZltmcHRyXVxuICAgICAgICBmYSA9IGFicyhmaSlcbiAgICAgIH1cbiAgICB9XG4gICAgYiA9IHEwXG4gICAgeCA9IGEgKyBiXG4gICAgYnYgPSB4IC0gYVxuICAgIHkgPSBiIC0gYnZcbiAgICBpZih5KSB7XG4gICAgICBnW2NvdW50KytdID0geVxuICAgIH1cbiAgICBfeCA9IHExICsgeFxuICAgIF9idiA9IF94IC0gcTFcbiAgICBfYXYgPSBfeCAtIF9idlxuICAgIF9iciA9IHggLSBfYnZcbiAgICBfYXIgPSBxMSAtIF9hdlxuICAgIHEwID0gX2FyICsgX2JyXG4gICAgcTEgPSBfeFxuICB9XG4gIHdoaWxlKGVwdHIgPCBuZSkge1xuICAgIGEgPSBlaVxuICAgIGIgPSBxMFxuICAgIHggPSBhICsgYlxuICAgIGJ2ID0geCAtIGFcbiAgICB5ID0gYiAtIGJ2XG4gICAgaWYoeSkge1xuICAgICAgZ1tjb3VudCsrXSA9IHlcbiAgICB9XG4gICAgX3ggPSBxMSArIHhcbiAgICBfYnYgPSBfeCAtIHExXG4gICAgX2F2ID0gX3ggLSBfYnZcbiAgICBfYnIgPSB4IC0gX2J2XG4gICAgX2FyID0gcTEgLSBfYXZcbiAgICBxMCA9IF9hciArIF9iclxuICAgIHExID0gX3hcbiAgICBlcHRyICs9IDFcbiAgICBpZihlcHRyIDwgbmUpIHtcbiAgICAgIGVpID0gZVtlcHRyXVxuICAgIH1cbiAgfVxuICB3aGlsZShmcHRyIDwgbmYpIHtcbiAgICBhID0gZmlcbiAgICBiID0gcTBcbiAgICB4ID0gYSArIGJcbiAgICBidiA9IHggLSBhXG4gICAgeSA9IGIgLSBidlxuICAgIGlmKHkpIHtcbiAgICAgIGdbY291bnQrK10gPSB5XG4gICAgfSBcbiAgICBfeCA9IHExICsgeFxuICAgIF9idiA9IF94IC0gcTFcbiAgICBfYXYgPSBfeCAtIF9idlxuICAgIF9iciA9IHggLSBfYnZcbiAgICBfYXIgPSBxMSAtIF9hdlxuICAgIHEwID0gX2FyICsgX2JyXG4gICAgcTEgPSBfeFxuICAgIGZwdHIgKz0gMVxuICAgIGlmKGZwdHIgPCBuZikge1xuICAgICAgZmkgPSBmW2ZwdHJdXG4gICAgfVxuICB9XG4gIGlmKHEwKSB7XG4gICAgZ1tjb3VudCsrXSA9IHEwXG4gIH1cbiAgaWYocTEpIHtcbiAgICBnW2NvdW50KytdID0gcTFcbiAgfVxuICBpZighY291bnQpIHtcbiAgICBnW2NvdW50KytdID0gMC4wICBcbiAgfVxuICBnLmxlbmd0aCA9IGNvdW50XG4gIHJldHVybiBnXG59IiwiXCJ1c2Ugc3RyaWN0XCJcblxubW9kdWxlLmV4cG9ydHMgPSB0d29Qcm9kdWN0XG5cbnZhciBTUExJVFRFUiA9ICsoTWF0aC5wb3coMiwgMjcpICsgMS4wKVxuXG5mdW5jdGlvbiB0d29Qcm9kdWN0KGEsIGIsIHJlc3VsdCkge1xuICB2YXIgeCA9IGEgKiBiXG5cbiAgdmFyIGMgPSBTUExJVFRFUiAqIGFcbiAgdmFyIGFiaWcgPSBjIC0gYVxuICB2YXIgYWhpID0gYyAtIGFiaWdcbiAgdmFyIGFsbyA9IGEgLSBhaGlcblxuICB2YXIgZCA9IFNQTElUVEVSICogYlxuICB2YXIgYmJpZyA9IGQgLSBiXG4gIHZhciBiaGkgPSBkIC0gYmJpZ1xuICB2YXIgYmxvID0gYiAtIGJoaVxuXG4gIHZhciBlcnIxID0geCAtIChhaGkgKiBiaGkpXG4gIHZhciBlcnIyID0gZXJyMSAtIChhbG8gKiBiaGkpXG4gIHZhciBlcnIzID0gZXJyMiAtIChhaGkgKiBibG8pXG5cbiAgdmFyIHkgPSBhbG8gKiBibG8gLSBlcnIzXG5cbiAgaWYocmVzdWx0KSB7XG4gICAgcmVzdWx0WzBdID0geVxuICAgIHJlc3VsdFsxXSA9IHhcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICByZXR1cm4gWyB5LCB4IF1cbn0iLCJcInVzZSBzdHJpY3RcIlxuXG52YXIgdHdvUHJvZHVjdCA9IHJlcXVpcmUoXCJ0d28tcHJvZHVjdFwiKVxudmFyIHJvYnVzdFN1bSA9IHJlcXVpcmUoXCJyb2J1c3Qtc3VtXCIpXG52YXIgcm9idXN0U2NhbGUgPSByZXF1aXJlKFwicm9idXN0LXNjYWxlXCIpXG52YXIgcm9idXN0U3VidHJhY3QgPSByZXF1aXJlKFwicm9idXN0LXN1YnRyYWN0XCIpXG5cbnZhciBOVU1fRVhQQU5EID0gNVxuXG52YXIgRVBTSUxPTiAgICAgPSAxLjExMDIyMzAyNDYyNTE1NjVlLTE2XG52YXIgRVJSQk9VTkQzICAgPSAoMy4wICsgMTYuMCAqIEVQU0lMT04pICogRVBTSUxPTlxudmFyIEVSUkJPVU5ENCAgID0gKDcuMCArIDU2LjAgKiBFUFNJTE9OKSAqIEVQU0lMT05cblxuZnVuY3Rpb24gY29mYWN0b3IobSwgYykge1xuICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KG0ubGVuZ3RoLTEpXG4gIGZvcih2YXIgaT0xOyBpPG0ubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgciA9IHJlc3VsdFtpLTFdID0gbmV3IEFycmF5KG0ubGVuZ3RoLTEpXG4gICAgZm9yKHZhciBqPTAsaz0wOyBqPG0ubGVuZ3RoOyArK2opIHtcbiAgICAgIGlmKGogPT09IGMpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHJbaysrXSA9IG1baV1bal1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5mdW5jdGlvbiBtYXRyaXgobikge1xuICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KG4pXG4gIGZvcih2YXIgaT0wOyBpPG47ICsraSkge1xuICAgIHJlc3VsdFtpXSA9IG5ldyBBcnJheShuKVxuICAgIGZvcih2YXIgaj0wOyBqPG47ICsraikge1xuICAgICAgcmVzdWx0W2ldW2pdID0gW1wibVwiLCBqLCBcIltcIiwgKG4taS0xKSwgXCJdXCJdLmpvaW4oXCJcIilcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5mdW5jdGlvbiBzaWduKG4pIHtcbiAgaWYobiAmIDEpIHtcbiAgICByZXR1cm4gXCItXCJcbiAgfVxuICByZXR1cm4gXCJcIlxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVN1bShleHByKSB7XG4gIGlmKGV4cHIubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGV4cHJbMF1cbiAgfSBlbHNlIGlmKGV4cHIubGVuZ3RoID09PSAyKSB7XG4gICAgcmV0dXJuIFtcInN1bShcIiwgZXhwclswXSwgXCIsXCIsIGV4cHJbMV0sIFwiKVwiXS5qb2luKFwiXCIpXG4gIH0gZWxzZSB7XG4gICAgdmFyIG0gPSBleHByLmxlbmd0aD4+MVxuICAgIHJldHVybiBbXCJzdW0oXCIsIGdlbmVyYXRlU3VtKGV4cHIuc2xpY2UoMCwgbSkpLCBcIixcIiwgZ2VuZXJhdGVTdW0oZXhwci5zbGljZShtKSksIFwiKVwiXS5qb2luKFwiXCIpXG4gIH1cbn1cblxuZnVuY3Rpb24gZGV0ZXJtaW5hbnQobSkge1xuICBpZihtLmxlbmd0aCA9PT0gMikge1xuICAgIHJldHVybiBbW1wic3VtKHByb2QoXCIsIG1bMF1bMF0sIFwiLFwiLCBtWzFdWzFdLCBcIikscHJvZCgtXCIsIG1bMF1bMV0sIFwiLFwiLCBtWzFdWzBdLCBcIikpXCJdLmpvaW4oXCJcIildXG4gIH0gZWxzZSB7XG4gICAgdmFyIGV4cHIgPSBbXVxuICAgIGZvcih2YXIgaT0wOyBpPG0ubGVuZ3RoOyArK2kpIHtcbiAgICAgIGV4cHIucHVzaChbXCJzY2FsZShcIiwgZ2VuZXJhdGVTdW0oZGV0ZXJtaW5hbnQoY29mYWN0b3IobSwgaSkpKSwgXCIsXCIsIHNpZ24oaSksIG1bMF1baV0sIFwiKVwiXS5qb2luKFwiXCIpKVxuICAgIH1cbiAgICByZXR1cm4gZXhwclxuICB9XG59XG5cbmZ1bmN0aW9uIG9yaWVudGF0aW9uKG4pIHtcbiAgdmFyIHBvcyA9IFtdXG4gIHZhciBuZWcgPSBbXVxuICB2YXIgbSA9IG1hdHJpeChuKVxuICB2YXIgYXJncyA9IFtdXG4gIGZvcih2YXIgaT0wOyBpPG47ICsraSkge1xuICAgIGlmKChpJjEpPT09MCkge1xuICAgICAgcG9zLnB1c2guYXBwbHkocG9zLCBkZXRlcm1pbmFudChjb2ZhY3RvcihtLCBpKSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIG5lZy5wdXNoLmFwcGx5KG5lZywgZGV0ZXJtaW5hbnQoY29mYWN0b3IobSwgaSkpKVxuICAgIH1cbiAgICBhcmdzLnB1c2goXCJtXCIgKyBpKVxuICB9XG4gIHZhciBwb3NFeHByID0gZ2VuZXJhdGVTdW0ocG9zKVxuICB2YXIgbmVnRXhwciA9IGdlbmVyYXRlU3VtKG5lZylcbiAgdmFyIGZ1bmNOYW1lID0gXCJvcmllbnRhdGlvblwiICsgbiArIFwiRXhhY3RcIlxuICB2YXIgY29kZSA9IFtcImZ1bmN0aW9uIFwiLCBmdW5jTmFtZSwgXCIoXCIsIGFyZ3Muam9pbigpLCBcIil7dmFyIHA9XCIsIHBvc0V4cHIsIFwiLG49XCIsIG5lZ0V4cHIsIFwiLGQ9c3ViKHAsbik7XFxcbnJldHVybiBkW2QubGVuZ3RoLTFdO307cmV0dXJuIFwiLCBmdW5jTmFtZV0uam9pbihcIlwiKVxuICB2YXIgcHJvYyA9IG5ldyBGdW5jdGlvbihcInN1bVwiLCBcInByb2RcIiwgXCJzY2FsZVwiLCBcInN1YlwiLCBjb2RlKVxuICByZXR1cm4gcHJvYyhyb2J1c3RTdW0sIHR3b1Byb2R1Y3QsIHJvYnVzdFNjYWxlLCByb2J1c3RTdWJ0cmFjdClcbn1cblxudmFyIG9yaWVudGF0aW9uM0V4YWN0ID0gb3JpZW50YXRpb24oMylcbnZhciBvcmllbnRhdGlvbjRFeGFjdCA9IG9yaWVudGF0aW9uKDQpXG5cbnZhciBDQUNIRUQgPSBbXG4gIGZ1bmN0aW9uIG9yaWVudGF0aW9uMCgpIHsgcmV0dXJuIDAgfSxcbiAgZnVuY3Rpb24gb3JpZW50YXRpb24xKCkgeyByZXR1cm4gMCB9LFxuICBmdW5jdGlvbiBvcmllbnRhdGlvbjIoYSwgYikgeyBcbiAgICByZXR1cm4gYlswXSAtIGFbMF1cbiAgfSxcbiAgZnVuY3Rpb24gb3JpZW50YXRpb24zKGEsIGIsIGMpIHtcbiAgICB2YXIgbCA9IChhWzFdIC0gY1sxXSkgKiAoYlswXSAtIGNbMF0pXG4gICAgdmFyIHIgPSAoYVswXSAtIGNbMF0pICogKGJbMV0gLSBjWzFdKVxuICAgIHZhciBkZXQgPSBsIC0gclxuICAgIHZhciBzXG4gICAgaWYobCA+IDApIHtcbiAgICAgIGlmKHIgPD0gMCkge1xuICAgICAgICByZXR1cm4gZGV0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzID0gbCArIHJcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYobCA8IDApIHtcbiAgICAgIGlmKHIgPj0gMCkge1xuICAgICAgICByZXR1cm4gZGV0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzID0gLShsICsgcilcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRldFxuICAgIH1cbiAgICB2YXIgdG9sID0gRVJSQk9VTkQzICogc1xuICAgIGlmKGRldCA+PSB0b2wgfHwgZGV0IDw9IC10b2wpIHtcbiAgICAgIHJldHVybiBkZXRcbiAgICB9XG4gICAgcmV0dXJuIG9yaWVudGF0aW9uM0V4YWN0KGEsIGIsIGMpXG4gIH0sXG4gIGZ1bmN0aW9uIG9yaWVudGF0aW9uNChhLGIsYyxkKSB7XG4gICAgdmFyIGFkeCA9IGFbMF0gLSBkWzBdXG4gICAgdmFyIGJkeCA9IGJbMF0gLSBkWzBdXG4gICAgdmFyIGNkeCA9IGNbMF0gLSBkWzBdXG4gICAgdmFyIGFkeSA9IGFbMV0gLSBkWzFdXG4gICAgdmFyIGJkeSA9IGJbMV0gLSBkWzFdXG4gICAgdmFyIGNkeSA9IGNbMV0gLSBkWzFdXG4gICAgdmFyIGFkeiA9IGFbMl0gLSBkWzJdXG4gICAgdmFyIGJkeiA9IGJbMl0gLSBkWzJdXG4gICAgdmFyIGNkeiA9IGNbMl0gLSBkWzJdXG4gICAgdmFyIGJkeGNkeSA9IGJkeCAqIGNkeVxuICAgIHZhciBjZHhiZHkgPSBjZHggKiBiZHlcbiAgICB2YXIgY2R4YWR5ID0gY2R4ICogYWR5XG4gICAgdmFyIGFkeGNkeSA9IGFkeCAqIGNkeVxuICAgIHZhciBhZHhiZHkgPSBhZHggKiBiZHlcbiAgICB2YXIgYmR4YWR5ID0gYmR4ICogYWR5XG4gICAgdmFyIGRldCA9IGFkeiAqIChiZHhjZHkgLSBjZHhiZHkpIFxuICAgICAgICAgICAgKyBiZHogKiAoY2R4YWR5IC0gYWR4Y2R5KVxuICAgICAgICAgICAgKyBjZHogKiAoYWR4YmR5IC0gYmR4YWR5KVxuICAgIHZhciBwZXJtYW5lbnQgPSAoTWF0aC5hYnMoYmR4Y2R5KSArIE1hdGguYWJzKGNkeGJkeSkpICogTWF0aC5hYnMoYWR6KVxuICAgICAgICAgICAgICAgICAgKyAoTWF0aC5hYnMoY2R4YWR5KSArIE1hdGguYWJzKGFkeGNkeSkpICogTWF0aC5hYnMoYmR6KVxuICAgICAgICAgICAgICAgICAgKyAoTWF0aC5hYnMoYWR4YmR5KSArIE1hdGguYWJzKGJkeGFkeSkpICogTWF0aC5hYnMoY2R6KVxuICAgIHZhciB0b2wgPSBFUlJCT1VORDQgKiBwZXJtYW5lbnRcbiAgICBpZiAoKGRldCA+IHRvbCkgfHwgKC1kZXQgPiB0b2wpKSB7XG4gICAgICByZXR1cm4gZGV0XG4gICAgfVxuICAgIHJldHVybiBvcmllbnRhdGlvbjRFeGFjdChhLGIsYyxkKVxuICB9XG5dXG5cbmZ1bmN0aW9uIHNsb3dPcmllbnQoYXJncykge1xuICB2YXIgcHJvYyA9IENBQ0hFRFthcmdzLmxlbmd0aF1cbiAgaWYoIXByb2MpIHtcbiAgICBwcm9jID0gQ0FDSEVEW2FyZ3MubGVuZ3RoXSA9IG9yaWVudGF0aW9uKGFyZ3MubGVuZ3RoKVxuICB9XG4gIHJldHVybiBwcm9jLmFwcGx5KHVuZGVmaW5lZCwgYXJncylcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVPcmllbnRhdGlvblByb2MoKSB7XG4gIHdoaWxlKENBQ0hFRC5sZW5ndGggPD0gTlVNX0VYUEFORCkge1xuICAgIENBQ0hFRC5wdXNoKG9yaWVudGF0aW9uKENBQ0hFRC5sZW5ndGgpKVxuICB9XG4gIHZhciBhcmdzID0gW11cbiAgdmFyIHByb2NBcmdzID0gW1wic2xvd1wiXVxuICBmb3IodmFyIGk9MDsgaTw9TlVNX0VYUEFORDsgKytpKSB7XG4gICAgYXJncy5wdXNoKFwiYVwiICsgaSlcbiAgICBwcm9jQXJncy5wdXNoKFwib1wiICsgaSlcbiAgfVxuICB2YXIgY29kZSA9IFtcbiAgICBcImZ1bmN0aW9uIGdldE9yaWVudGF0aW9uKFwiLCBhcmdzLmpvaW4oKSwgXCIpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6Y2FzZSAxOnJldHVybiAwO1wiXG4gIF1cbiAgZm9yKHZhciBpPTI7IGk8PU5VTV9FWFBBTkQ7ICsraSkge1xuICAgIGNvZGUucHVzaChcImNhc2UgXCIsIGksIFwiOnJldHVybiBvXCIsIGksIFwiKFwiLCBhcmdzLnNsaWNlKDAsIGkpLmpvaW4oKSwgXCIpO1wiKVxuICB9XG4gIGNvZGUucHVzaChcIn12YXIgcz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoOysraSl7c1tpXT1hcmd1bWVudHNbaV19O3JldHVybiBzbG93KHMpO31yZXR1cm4gZ2V0T3JpZW50YXRpb25cIilcbiAgcHJvY0FyZ3MucHVzaChjb2RlLmpvaW4oXCJcIikpXG5cbiAgdmFyIHByb2MgPSBGdW5jdGlvbi5hcHBseSh1bmRlZmluZWQsIHByb2NBcmdzKVxuICBtb2R1bGUuZXhwb3J0cyA9IHByb2MuYXBwbHkodW5kZWZpbmVkLCBbc2xvd09yaWVudF0uY29uY2F0KENBQ0hFRCkpXG4gIGZvcih2YXIgaT0wOyBpPD1OVU1fRVhQQU5EOyArK2kpIHtcbiAgICBtb2R1bGUuZXhwb3J0c1tpXSA9IENBQ0hFRFtpXVxuICB9XG59XG5cbmdlbmVyYXRlT3JpZW50YXRpb25Qcm9jKCkiLCJcInVzZSBzdHJpY3RcIlxuXG4vL0hpZ2ggbGV2ZWwgaWRlYTpcbi8vIDEuIFVzZSBDbGFya3NvbidzIGluY3JlbWVudGFsIGNvbnN0cnVjdGlvbiB0byBmaW5kIGNvbnZleCBodWxsXG4vLyAyLiBQb2ludCBsb2NhdGlvbiBpbiB0cmlhbmd1bGF0aW9uIGJ5IGp1bXAgYW5kIHdhbGtcblxubW9kdWxlLmV4cG9ydHMgPSBpbmNyZW1lbnRhbENvbnZleEh1bGxcblxudmFyIG9yaWVudCA9IHJlcXVpcmUoXCJyb2J1c3Qtb3JpZW50YXRpb25cIilcbnZhciBjb21wYXJlQ2VsbCA9IHJlcXVpcmUoXCJzaW1wbGljaWFsLWNvbXBsZXhcIikuY29tcGFyZUNlbGxzXG5cbmZ1bmN0aW9uIGNvbXBhcmVJbnQoYSwgYikge1xuICByZXR1cm4gYSAtIGJcbn1cblxuZnVuY3Rpb24gU2ltcGxleCh2ZXJ0aWNlcywgYWRqYWNlbnQsIGJvdW5kYXJ5KSB7XG4gIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlc1xuICB0aGlzLmFkamFjZW50ID0gYWRqYWNlbnRcbiAgdGhpcy5ib3VuZGFyeSA9IGJvdW5kYXJ5XG4gIHRoaXMubGFzdFZpc2l0ZWQgPSAtMVxufVxuXG5TaW1wbGV4LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24oKSB7XG4gIHZhciB0ID0gdGhpcy52ZXJ0aWNlc1swXVxuICB0aGlzLnZlcnRpY2VzWzBdID0gdGhpcy52ZXJ0aWNlc1sxXVxuICB0aGlzLnZlcnRpY2VzWzFdID0gdFxuICB2YXIgdSA9IHRoaXMuYWRqYWNlbnRbMF1cbiAgdGhpcy5hZGphY2VudFswXSA9IHRoaXMuYWRqYWNlbnRbMV1cbiAgdGhpcy5hZGphY2VudFsxXSA9IHVcbn1cblxuZnVuY3Rpb24gR2x1ZUZhY2V0KHZlcnRpY2VzLCBjZWxsLCBpbmRleCkge1xuICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXNcbiAgdGhpcy5jZWxsID0gY2VsbFxuICB0aGlzLmluZGV4ID0gaW5kZXhcbn1cblxuZnVuY3Rpb24gY29tcGFyZUdsdWUoYSwgYikge1xuICByZXR1cm4gY29tcGFyZUNlbGwoYS52ZXJ0aWNlcywgYi52ZXJ0aWNlcylcbn1cblxuZnVuY3Rpb24gYmFrZU9yaWVudChkKSB7XG4gIHZhciBjb2RlID0gW1wiZnVuY3Rpb24gb3JpZW50KCl7dmFyIHR1cGxlPXRoaXMudHVwbGU7cmV0dXJuIHRlc3QoXCJdXG4gIGZvcih2YXIgaT0wOyBpPD1kOyArK2kpIHtcbiAgICBpZihpID4gMCkge1xuICAgICAgY29kZS5wdXNoKFwiLFwiKVxuICAgIH1cbiAgICBjb2RlLnB1c2goXCJ0dXBsZVtcIiwgaSwgXCJdXCIpXG4gIH1cbiAgY29kZS5wdXNoKFwiKX1yZXR1cm4gb3JpZW50XCIpXG4gIHZhciBwcm9jID0gbmV3IEZ1bmN0aW9uKFwidGVzdFwiLCBjb2RlLmpvaW4oXCJcIikpXG4gIHZhciB0ZXN0ID0gb3JpZW50W2QrMV1cbiAgaWYoIXRlc3QpIHtcbiAgICB0ZXN0ID0gb3JpZW50XG4gIH1cbiAgcmV0dXJuIHByb2ModGVzdClcbn1cblxudmFyIEJBS0VEID0gW11cblxuZnVuY3Rpb24gVHJpYW5ndWxhdGlvbihkaW1lbnNpb24sIHZlcnRpY2VzLCBzaW1wbGljZXMpIHtcbiAgdGhpcy5kaW1lbnNpb24gPSBkaW1lbnNpb25cbiAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzXG4gIHRoaXMuc2ltcGxpY2VzID0gc2ltcGxpY2VzXG4gIHRoaXMuaW50ZXJpb3IgPSBzaW1wbGljZXMuZmlsdGVyKGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gIWMuYm91bmRhcnlcbiAgfSlcblxuICB0aGlzLnR1cGxlID0gbmV3IEFycmF5KGRpbWVuc2lvbisxKVxuICBmb3IodmFyIGk9MDsgaTw9ZGltZW5zaW9uOyArK2kpIHtcbiAgICB0aGlzLnR1cGxlW2ldID0gdGhpcy52ZXJ0aWNlc1tpXVxuICB9XG5cbiAgdmFyIG8gPSBCQUtFRFtkaW1lbnNpb25dXG4gIGlmKCFvKSB7XG4gICAgbyA9IEJBS0VEW2RpbWVuc2lvbl0gPSBiYWtlT3JpZW50KGRpbWVuc2lvbilcbiAgfVxuICB0aGlzLm9yaWVudCA9IG9cbn1cblxudmFyIHByb3RvID0gVHJpYW5ndWxhdGlvbi5wcm90b3R5cGVcblxuLy9EZWdlbmVyYXRlIHNpdHVhdGlvbiB3aGVyZSB3ZSBhcmUgb24gYm91bmRhcnksIGJ1dCBjb3BsYW5hciB0byBmYWNlXG5wcm90by5oYW5kbGVCb3VuZGFyeURlZ2VuZXJhY3kgPSBmdW5jdGlvbihjZWxsLCBwb2ludCkge1xuICB2YXIgZCA9IHRoaXMuZGltZW5zaW9uXG4gIHZhciBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLSAxXG4gIHZhciB0dXBsZSA9IHRoaXMudHVwbGVcbiAgdmFyIHZlcnRzID0gdGhpcy52ZXJ0aWNlc1xuXG4gIC8vRHVtYiBzb2x1dGlvbjogSnVzdCBkbyBkZnMgZnJvbSBib3VuZGFyeSBjZWxsIHVudGlsIHdlIGZpbmQgYW55IHBlYWssIG9yIHRlcm1pbmF0ZVxuICB2YXIgdG9WaXNpdCA9IFsgY2VsbCBdXG4gIGNlbGwubGFzdFZpc2l0ZWQgPSAtblxuICB3aGlsZSh0b1Zpc2l0Lmxlbmd0aCA+IDApIHtcbiAgICBjZWxsID0gdG9WaXNpdC5wb3AoKVxuICAgIHZhciBjZWxsVmVydHMgPSBjZWxsLnZlcnRpY2VzXG4gICAgdmFyIGNlbGxBZGogPSBjZWxsLmFkamFjZW50XG4gICAgZm9yKHZhciBpPTA7IGk8PWQ7ICsraSkge1xuICAgICAgdmFyIG5laWdoYm9yID0gY2VsbEFkaltpXVxuICAgICAgaWYoIW5laWdoYm9yLmJvdW5kYXJ5IHx8IG5laWdoYm9yLmxhc3RWaXNpdGVkIDw9IC1uKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICB2YXIgbnYgPSBuZWlnaGJvci52ZXJ0aWNlc1xuICAgICAgZm9yKHZhciBqPTA7IGo8PWQ7ICsraikge1xuICAgICAgICB2YXIgdnYgPSBudltqXVxuICAgICAgICBpZih2diA8IDApIHtcbiAgICAgICAgICB0dXBsZVtqXSA9IHBvaW50XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHVwbGVbal0gPSB2ZXJ0c1t2dl1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIG8gPSB0aGlzLm9yaWVudCgpXG4gICAgICBpZihvID4gMCkge1xuICAgICAgICByZXR1cm4gbmVpZ2hib3JcbiAgICAgIH1cbiAgICAgIG5laWdoYm9yLmxhc3RWaXNpdGVkID0gLW5cbiAgICAgIGlmKG8gPT09IDApIHtcbiAgICAgICAgdG9WaXNpdC5wdXNoKG5laWdoYm9yKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5wcm90by53YWxrID0gZnVuY3Rpb24ocG9pbnQsIHJhbmRvbSkge1xuICAvL0FsaWFzIGxvY2FsIHByb3BlcnRpZXNcbiAgdmFyIG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAtIDFcbiAgdmFyIGQgPSB0aGlzLmRpbWVuc2lvblxuICB2YXIgdmVydHMgPSB0aGlzLnZlcnRpY2VzXG4gIHZhciB0dXBsZSA9IHRoaXMudHVwbGVcblxuICAvL0NvbXB1dGUgaW5pdGlhbCBqdW1wIGNlbGxcbiAgdmFyIGluaXRJbmRleCA9IHJhbmRvbSA/ICh0aGlzLmludGVyaW9yLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkpfDAgOiAodGhpcy5pbnRlcmlvci5sZW5ndGgtMSlcbiAgdmFyIGNlbGwgPSB0aGlzLmludGVyaW9yWyBpbml0SW5kZXggXVxuXG4gIC8vU3RhcnQgd2Fsa2luZ1xub3V0ZXJMb29wOlxuICB3aGlsZSghY2VsbC5ib3VuZGFyeSkge1xuICAgIHZhciBjZWxsVmVydHMgPSBjZWxsLnZlcnRpY2VzXG4gICAgdmFyIGNlbGxBZGogPSBjZWxsLmFkamFjZW50XG5cbiAgICBmb3IodmFyIGk9MDsgaTw9ZDsgKytpKSB7XG4gICAgICB0dXBsZVtpXSA9IHZlcnRzW2NlbGxWZXJ0c1tpXV1cbiAgICB9XG4gICAgY2VsbC5sYXN0VmlzaXRlZCA9IG5cblxuICAgIC8vRmluZCBmYXJ0aGVzdCBhZGphY2VudCBjZWxsXG4gICAgZm9yKHZhciBpPTA7IGk8PWQ7ICsraSkge1xuICAgICAgdmFyIG5laWdoYm9yID0gY2VsbEFkaltpXVxuICAgICAgaWYobmVpZ2hib3IubGFzdFZpc2l0ZWQgPj0gbikge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgdmFyIHByZXYgPSB0dXBsZVtpXVxuICAgICAgdHVwbGVbaV0gPSBwb2ludFxuICAgICAgdmFyIG8gPSB0aGlzLm9yaWVudCgpXG4gICAgICB0dXBsZVtpXSA9IHByZXZcbiAgICAgIGlmKG8gPCAwKSB7XG4gICAgICAgIGNlbGwgPSBuZWlnaGJvclxuICAgICAgICBjb250aW51ZSBvdXRlckxvb3BcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKCFuZWlnaGJvci5ib3VuZGFyeSkge1xuICAgICAgICAgIG5laWdoYm9yLmxhc3RWaXNpdGVkID0gblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5laWdoYm9yLmxhc3RWaXNpdGVkID0gLW5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuXG4gIHJldHVybiBjZWxsXG59XG5cbnByb3RvLmFkZFBlYWtzID0gZnVuY3Rpb24ocG9pbnQsIGNlbGwpIHtcbiAgdmFyIG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAtIDFcbiAgdmFyIGQgPSB0aGlzLmRpbWVuc2lvblxuICB2YXIgdmVydHMgPSB0aGlzLnZlcnRpY2VzXG4gIHZhciB0dXBsZSA9IHRoaXMudHVwbGVcbiAgdmFyIGludGVyaW9yID0gdGhpcy5pbnRlcmlvclxuICB2YXIgc2ltcGxpY2VzID0gdGhpcy5zaW1wbGljZXNcblxuICAvL1dhbGtpbmcgZmluaXNoZWQgYXQgYm91bmRhcnksIHRpbWUgdG8gYWRkIHBlYWtzXG4gIHZhciB0b3Zpc2l0ID0gWyBjZWxsIF1cblxuICAvL1N0cmV0Y2ggaW5pdGlhbCBib3VuZGFyeSBjZWxsIGludG8gYSBwZWFrXG4gIGNlbGwubGFzdFZpc2l0ZWQgPSBuXG4gIGNlbGwudmVydGljZXNbY2VsbC52ZXJ0aWNlcy5pbmRleE9mKC0xKV0gPSBuXG4gIGNlbGwuYm91bmRhcnkgPSBmYWxzZVxuICBpbnRlcmlvci5wdXNoKGNlbGwpXG5cbiAgLy9SZWNvcmQgYSBsaXN0IG9mIGFsbCBuZXcgYm91bmRhcmllcyBjcmVhdGVkIGJ5IGFkZGVkIHBlYWtzIHNvIHdlIGNhbiBnbHVlIHRoZW0gdG9nZXRoZXIgd2hlbiB3ZSBhcmUgYWxsIGRvbmVcbiAgdmFyIGdsdWVGYWNldHMgPSBbXVxuXG4gIC8vRG8gYSB0cmF2ZXJzYWwgb2YgdGhlIGJvdW5kYXJ5IHdhbGtpbmcgb3V0d2FyZCBmcm9tIHN0YXJ0aW5nIHBlYWtcbiAgd2hpbGUodG92aXNpdC5sZW5ndGggPiAwKSB7XG4gICAgLy9Qb3Agb2ZmIHBlYWsgYW5kIHdhbGsgb3ZlciBhZGphY2VudCBjZWxsc1xuICAgIHZhciBjZWxsID0gdG92aXNpdC5wb3AoKVxuICAgIHZhciBjZWxsVmVydHMgPSBjZWxsLnZlcnRpY2VzXG4gICAgdmFyIGNlbGxBZGogPSBjZWxsLmFkamFjZW50XG4gICAgdmFyIGluZGV4T2ZOID0gY2VsbFZlcnRzLmluZGV4T2YobilcbiAgICBpZihpbmRleE9mTiA8IDApIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgZm9yKHZhciBpPTA7IGk8PWQ7ICsraSkge1xuICAgICAgaWYoaSA9PT0gaW5kZXhPZk4pIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy9Gb3IgZWFjaCBib3VuZGFyeSBuZWlnaGJvciBvZiB0aGUgY2VsbFxuICAgICAgdmFyIG5laWdoYm9yID0gY2VsbEFkaltpXVxuICAgICAgaWYoIW5laWdoYm9yLmJvdW5kYXJ5IHx8IG5laWdoYm9yLmxhc3RWaXNpdGVkID49IG4pIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgdmFyIG52ID0gbmVpZ2hib3IudmVydGljZXNcblxuICAgICAgLy9UZXN0IGlmIG5laWdoYm9yIGlzIGEgcGVha1xuICAgICAgaWYobmVpZ2hib3IubGFzdFZpc2l0ZWQgIT09IC1uKSB7ICAgICAgXG4gICAgICAgIC8vQ29tcHV0ZSBvcmllbnRhdGlvbiBvZiBwIHJlbGF0aXZlIHRvIGVhY2ggYm91bmRhcnkgcGVha1xuICAgICAgICB2YXIgaW5kZXhPZk5lZzEgPSAwXG4gICAgICAgIGZvcih2YXIgaj0wOyBqPD1kOyArK2opIHtcbiAgICAgICAgICBpZihudltqXSA8IDApIHtcbiAgICAgICAgICAgIGluZGV4T2ZOZWcxID0galxuICAgICAgICAgICAgdHVwbGVbal0gPSBwb2ludFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dXBsZVtqXSA9IHZlcnRzW252W2pdXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgbyA9IHRoaXMub3JpZW50KClcblxuICAgICAgICAvL1Rlc3QgaWYgbmVpZ2hib3IgY2VsbCBpcyBhbHNvIGEgcGVha1xuICAgICAgICBpZihvID4gMCkge1xuICAgICAgICAgIG52W2luZGV4T2ZOZWcxXSA9IG5cbiAgICAgICAgICBuZWlnaGJvci5ib3VuZGFyeSA9IGZhbHNlXG4gICAgICAgICAgaW50ZXJpb3IucHVzaChuZWlnaGJvcilcbiAgICAgICAgICB0b3Zpc2l0LnB1c2gobmVpZ2hib3IpXG4gICAgICAgICAgbmVpZ2hib3IubGFzdFZpc2l0ZWQgPSBuXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZWlnaGJvci5sYXN0VmlzaXRlZCA9IC1uXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIG5hID0gbmVpZ2hib3IuYWRqYWNlbnRcblxuICAgICAgLy9PdGhlcndpc2UsIHJlcGxhY2UgbmVpZ2hib3Igd2l0aCBuZXcgZmFjZVxuICAgICAgdmFyIHZ2ZXJ0cyA9IGNlbGxWZXJ0cy5zbGljZSgpXG4gICAgICB2YXIgdmFkaiA9IGNlbGxBZGouc2xpY2UoKVxuICAgICAgdmFyIG5jZWxsID0gbmV3IFNpbXBsZXgodnZlcnRzLCB2YWRqLCB0cnVlKVxuICAgICAgc2ltcGxpY2VzLnB1c2gobmNlbGwpXG5cbiAgICAgIC8vQ29ubmVjdCB0byBuZWlnaGJvclxuICAgICAgdmFyIG9wcG9zaXRlID0gbmEuaW5kZXhPZihjZWxsKVxuICAgICAgaWYob3Bwb3NpdGUgPCAwKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBuYVtvcHBvc2l0ZV0gPSBuY2VsbFxuICAgICAgdmFkaltpbmRleE9mTl0gPSBuZWlnaGJvclxuXG4gICAgICAvL0Nvbm5lY3QgdG8gY2VsbFxuICAgICAgdnZlcnRzW2ldID0gLTFcbiAgICAgIHZhZGpbaV0gPSBjZWxsXG4gICAgICBjZWxsQWRqW2ldID0gbmNlbGxcblxuICAgICAgLy9GbGlwIGZhY2V0XG4gICAgICBuY2VsbC5mbGlwKClcblxuICAgICAgLy9BZGQgdG8gZ2x1ZSBsaXN0XG4gICAgICBmb3IodmFyIGo9MDsgajw9ZDsgKytqKSB7XG4gICAgICAgIHZhciB1dSA9IHZ2ZXJ0c1tqXVxuICAgICAgICBpZih1dSA8IDAgfHwgdXUgPT09IG4pIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIHZhciBuZmFjZSA9IG5ldyBBcnJheShkLTEpXG4gICAgICAgIHZhciBucHRyID0gMFxuICAgICAgICBmb3IodmFyIGs9MDsgazw9ZDsgKytrKSB7XG4gICAgICAgICAgdmFyIHZ2ID0gdnZlcnRzW2tdXG4gICAgICAgICAgaWYodnYgPCAwIHx8IGsgPT09IGopIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIG5mYWNlW25wdHIrK10gPSB2dlxuICAgICAgICB9XG4gICAgICAgIGdsdWVGYWNldHMucHVzaChuZXcgR2x1ZUZhY2V0KG5mYWNlLCBuY2VsbCwgaikpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy9HbHVlIGJvdW5kYXJ5IGZhY2V0cyB0b2dldGhlclxuICBnbHVlRmFjZXRzLnNvcnQoY29tcGFyZUdsdWUpXG5cbiAgZm9yKHZhciBpPTA7IGkrMTxnbHVlRmFjZXRzLmxlbmd0aDsgaSs9Mikge1xuICAgIHZhciBhID0gZ2x1ZUZhY2V0c1tpXVxuICAgIHZhciBiID0gZ2x1ZUZhY2V0c1tpKzFdXG4gICAgdmFyIGFpID0gYS5pbmRleFxuICAgIHZhciBiaSA9IGIuaW5kZXhcbiAgICBpZihhaSA8IDAgfHwgYmkgPCAwKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBhLmNlbGwuYWRqYWNlbnRbYS5pbmRleF0gPSBiLmNlbGxcbiAgICBiLmNlbGwuYWRqYWNlbnRbYi5pbmRleF0gPSBhLmNlbGxcbiAgfVxufVxuXG5wcm90by5pbnNlcnQgPSBmdW5jdGlvbihwb2ludCwgcmFuZG9tKSB7XG4gIC8vQWRkIHBvaW50XG4gIHZhciB2ZXJ0cyA9IHRoaXMudmVydGljZXNcbiAgdmVydHMucHVzaChwb2ludClcblxuICB2YXIgY2VsbCA9IHRoaXMud2Fsayhwb2ludCwgcmFuZG9tKVxuICBpZighY2VsbCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy9BbGlhcyBsb2NhbCBwcm9wZXJ0aWVzXG4gIHZhciBkID0gdGhpcy5kaW1lbnNpb25cbiAgdmFyIHR1cGxlID0gdGhpcy50dXBsZVxuXG4gIC8vRGVnZW5lcmF0ZSBjYXNlOiBJZiBwb2ludCBpcyBjb3BsYW5hciB0byBjZWxsLCB0aGVuIHdhbGsgdW50aWwgd2UgZmluZCBhIG5vbi1kZWdlbmVyYXRlIGJvdW5kYXJ5XG4gIGZvcih2YXIgaT0wOyBpPD1kOyArK2kpIHtcbiAgICB2YXIgdnYgPSBjZWxsLnZlcnRpY2VzW2ldXG4gICAgaWYodnYgPCAwKSB7XG4gICAgICB0dXBsZVtpXSA9IHBvaW50XG4gICAgfSBlbHNlIHtcbiAgICAgIHR1cGxlW2ldID0gdmVydHNbdnZdXG4gICAgfVxuICB9XG4gIHZhciBvID0gdGhpcy5vcmllbnQodHVwbGUpXG4gIGlmKG8gPCAwKSB7XG4gICAgcmV0dXJuXG4gIH0gZWxzZSBpZihvID09PSAwKSB7XG4gICAgY2VsbCA9IHRoaXMuaGFuZGxlQm91bmRhcnlEZWdlbmVyYWN5KGNlbGwsIHBvaW50KVxuICAgIGlmKCFjZWxsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cblxuICAvL0FkZCBwZWFrc1xuICB0aGlzLmFkZFBlYWtzKHBvaW50LCBjZWxsKVxufVxuXG4vL0V4dHJhY3QgYWxsIGJvdW5kYXJ5IGNlbGxzXG5wcm90by5ib3VuZGFyeSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZCA9IHRoaXMuZGltZW5zaW9uXG4gIHZhciBib3VuZGFyeSA9IFtdXG4gIHZhciBjZWxscyA9IHRoaXMuc2ltcGxpY2VzXG4gIHZhciBuYyA9IGNlbGxzLmxlbmd0aFxuICBmb3IodmFyIGk9MDsgaTxuYzsgKytpKSB7XG4gICAgdmFyIGMgPSBjZWxsc1tpXVxuICAgIGlmKGMuYm91bmRhcnkpIHtcbiAgICAgIHZhciBiY2VsbCA9IG5ldyBBcnJheShkKVxuICAgICAgdmFyIGN2ID0gYy52ZXJ0aWNlc1xuICAgICAgdmFyIHB0ciA9IDBcbiAgICAgIHZhciBwYXJpdHkgPSAwXG4gICAgICBmb3IodmFyIGo9MDsgajw9ZDsgKytqKSB7XG4gICAgICAgIGlmKGN2W2pdID49IDApIHtcbiAgICAgICAgICBiY2VsbFtwdHIrK10gPSBjdltqXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcml0eSA9IGomMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZihwYXJpdHkgPT09IChkJjEpKSB7XG4gICAgICAgIHZhciB0ID0gYmNlbGxbMF1cbiAgICAgICAgYmNlbGxbMF0gPSBiY2VsbFsxXVxuICAgICAgICBiY2VsbFsxXSA9IHRcbiAgICAgIH1cbiAgICAgIGJvdW5kYXJ5LnB1c2goYmNlbGwpXG4gICAgfVxuICB9XG4gIHJldHVybiBib3VuZGFyeVxufVxuXG5mdW5jdGlvbiBpbmNyZW1lbnRhbENvbnZleEh1bGwocG9pbnRzLCByYW5kb21TZWFyY2gpIHtcbiAgdmFyIG4gPSBwb2ludHMubGVuZ3RoXG4gIGlmKG4gPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IGhhdmUgYXQgbGVhc3QgZCsxIHBvaW50c1wiKVxuICB9XG4gIHZhciBkID0gcG9pbnRzWzBdLmxlbmd0aFxuICBpZihuIDw9IGQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IGlucHV0IGF0IGxlYXN0IGQrMSBwb2ludHNcIilcbiAgfVxuXG4gIC8vRklYTUU6IFRoaXMgY291bGQgYmUgZGVnZW5lcmF0ZSwgYnV0IG5lZWQgdG8gc2VsZWN0IGQrMSBub24tY29wbGFuYXIgcG9pbnRzIHRvIGJvb3RzdHJhcCBwcm9jZXNzXG4gIHZhciBpbml0aWFsU2ltcGxleCA9IHBvaW50cy5zbGljZSgwLCBkKzEpXG5cbiAgLy9NYWtlIHN1cmUgaW5pdGlhbCBzaW1wbGV4IGlzIHBvc2l0aXZlbHkgb3JpZW50ZWRcbiAgdmFyIG8gPSBvcmllbnQuYXBwbHkodm9pZCAwLCBpbml0aWFsU2ltcGxleClcbiAgaWYobyA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIklucHV0IG5vdCBpbiBnZW5lcmFsIHBvc2l0aW9uXCIpXG4gIH1cbiAgdmFyIGluaXRpYWxDb29yZHMgPSBuZXcgQXJyYXkoZCsxKVxuICBmb3IodmFyIGk9MDsgaTw9ZDsgKytpKSB7XG4gICAgaW5pdGlhbENvb3Jkc1tpXSA9IGlcbiAgfVxuICBpZihvIDwgMCkge1xuICAgIGluaXRpYWxDb29yZHNbMF0gPSAxXG4gICAgaW5pdGlhbENvb3Jkc1sxXSA9IDBcbiAgfVxuXG4gIC8vQ3JlYXRlIGluaXRpYWwgdG9wb2xvZ2ljYWwgaW5kZXgsIGdsdWUgcG9pbnRlcnMgdG9nZXRoZXIgKGtpbmQgb2YgbWVzc3kpXG4gIHZhciBpbml0aWFsQ2VsbCA9IG5ldyBTaW1wbGV4KGluaXRpYWxDb29yZHMsIG5ldyBBcnJheShkKzEpLCBmYWxzZSlcbiAgdmFyIGJvdW5kYXJ5ID0gaW5pdGlhbENlbGwuYWRqYWNlbnRcbiAgdmFyIGxpc3QgPSBuZXcgQXJyYXkoZCsyKVxuICBmb3IodmFyIGk9MDsgaTw9ZDsgKytpKSB7XG4gICAgdmFyIHZlcnRzID0gaW5pdGlhbENvb3Jkcy5zbGljZSgpXG4gICAgZm9yKHZhciBqPTA7IGo8PWQ7ICsraikge1xuICAgICAgaWYoaiA9PT0gaSkge1xuICAgICAgICB2ZXJ0c1tqXSA9IC0xXG4gICAgICB9XG4gICAgfVxuICAgIHZhciB0ID0gdmVydHNbMF1cbiAgICB2ZXJ0c1swXSA9IHZlcnRzWzFdXG4gICAgdmVydHNbMV0gPSB0XG4gICAgdmFyIGNlbGwgPSBuZXcgU2ltcGxleCh2ZXJ0cywgbmV3IEFycmF5KGQrMSksIHRydWUpXG4gICAgYm91bmRhcnlbaV0gPSBjZWxsXG4gICAgbGlzdFtpXSA9IGNlbGxcbiAgfVxuICBsaXN0W2QrMV0gPSBpbml0aWFsQ2VsbFxuICBmb3IodmFyIGk9MDsgaTw9ZDsgKytpKSB7XG4gICAgdmFyIHZlcnRzID0gYm91bmRhcnlbaV0udmVydGljZXNcbiAgICB2YXIgYWRqID0gYm91bmRhcnlbaV0uYWRqYWNlbnRcbiAgICBmb3IodmFyIGo9MDsgajw9ZDsgKytqKSB7XG4gICAgICB2YXIgdiA9IHZlcnRzW2pdXG4gICAgICBpZih2IDwgMCkge1xuICAgICAgICBhZGpbal0gPSBpbml0aWFsQ2VsbFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgZm9yKHZhciBrPTA7IGs8PWQ7ICsraykge1xuICAgICAgICBpZihib3VuZGFyeVtrXS52ZXJ0aWNlcy5pbmRleE9mKHYpIDwgMCkge1xuICAgICAgICAgIGFkaltqXSA9IGJvdW5kYXJ5W2tdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvL0luaXRpYWxpemUgdHJpYW5nbGVzXG4gIHZhciB0cmlhbmdsZXMgPSBuZXcgVHJpYW5ndWxhdGlvbihkLCBpbml0aWFsU2ltcGxleCwgbGlzdClcblxuICAvL0luc2VydCByZW1haW5pbmcgcG9pbnRzXG4gIHZhciB1c2VSYW5kb20gPSAhIXJhbmRvbVNlYXJjaFxuICBmb3IodmFyIGk9ZCsxOyBpPG47ICsraSkge1xuICAgIHRyaWFuZ2xlcy5pbnNlcnQocG9pbnRzW2ldLCB1c2VSYW5kb20pXG4gIH1cbiAgXG4gIC8vRXh0cmFjdCBib3VuZGFyeSBjZWxsc1xuICByZXR1cm4gdHJpYW5nbGVzLmJvdW5kYXJ5KClcbn0iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL2FmZmluZS1odWxsL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vbm9kZV9tb2R1bGVzL3JvYnVzdC1zY2FsZS9ub2RlX21vZHVsZXMvdHdvLXN1bS90d28tc3VtLmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvYWZmaW5lLWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9ub2RlX21vZHVsZXMvcm9idXN0LXNjYWxlL3JvYnVzdC1zY2FsZS5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL2FmZmluZS1odWxsL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vbm9kZV9tb2R1bGVzL3JvYnVzdC1zdWJ0cmFjdC9yb2J1c3QtZGlmZi5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL2FmZmluZS1odWxsL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vbm9kZV9tb2R1bGVzL3JvYnVzdC1zdW0vcm9idXN0LXN1bS5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL2FmZmluZS1odWxsL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vbm9kZV9tb2R1bGVzL3R3by1wcm9kdWN0L3R3by1wcm9kdWN0LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29udmV4L25vZGVfbW9kdWxlcy9jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvYWZmaW5lLWh1bGwvbm9kZV9tb2R1bGVzL3JvYnVzdC1vcmllbnRhdGlvbi9vcmllbnRhdGlvbi5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCIvKipcbiAqIEJpdCB0d2lkZGxpbmcgaGFja3MgZm9yIEphdmFTY3JpcHQuXG4gKlxuICogQXV0aG9yOiBNaWtvbGEgTHlzZW5rb1xuICpcbiAqIFBvcnRlZCBmcm9tIFN0YW5mb3JkIGJpdCB0d2lkZGxpbmcgaGFjayBsaWJyYXJ5OlxuICogICAgaHR0cDovL2dyYXBoaWNzLnN0YW5mb3JkLmVkdS9+c2VhbmRlci9iaXRoYWNrcy5odG1sXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7IFwidXNlIHJlc3RyaWN0XCI7XG5cbi8vTnVtYmVyIG9mIGJpdHMgaW4gYW4gaW50ZWdlclxudmFyIElOVF9CSVRTID0gMzI7XG5cbi8vQ29uc3RhbnRzXG5leHBvcnRzLklOVF9CSVRTICA9IElOVF9CSVRTO1xuZXhwb3J0cy5JTlRfTUFYICAgPSAgMHg3ZmZmZmZmZjtcbmV4cG9ydHMuSU5UX01JTiAgID0gLTE8PChJTlRfQklUUy0xKTtcblxuLy9SZXR1cm5zIC0xLCAwLCArMSBkZXBlbmRpbmcgb24gc2lnbiBvZiB4XG5leHBvcnRzLnNpZ24gPSBmdW5jdGlvbih2KSB7XG4gIHJldHVybiAodiA+IDApIC0gKHYgPCAwKTtcbn1cblxuLy9Db21wdXRlcyBhYnNvbHV0ZSB2YWx1ZSBvZiBpbnRlZ2VyXG5leHBvcnRzLmFicyA9IGZ1bmN0aW9uKHYpIHtcbiAgdmFyIG1hc2sgPSB2ID4+IChJTlRfQklUUy0xKTtcbiAgcmV0dXJuICh2IF4gbWFzaykgLSBtYXNrO1xufVxuXG4vL0NvbXB1dGVzIG1pbmltdW0gb2YgaW50ZWdlcnMgeCBhbmQgeVxuZXhwb3J0cy5taW4gPSBmdW5jdGlvbih4LCB5KSB7XG4gIHJldHVybiB5IF4gKCh4IF4geSkgJiAtKHggPCB5KSk7XG59XG5cbi8vQ29tcHV0ZXMgbWF4aW11bSBvZiBpbnRlZ2VycyB4IGFuZCB5XG5leHBvcnRzLm1heCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgcmV0dXJuIHggXiAoKHggXiB5KSAmIC0oeCA8IHkpKTtcbn1cblxuLy9DaGVja3MgaWYgYSBudW1iZXIgaXMgYSBwb3dlciBvZiB0d29cbmV4cG9ydHMuaXNQb3cyID0gZnVuY3Rpb24odikge1xuICByZXR1cm4gISh2ICYgKHYtMSkpICYmICghIXYpO1xufVxuXG4vL0NvbXB1dGVzIGxvZyBiYXNlIDIgb2YgdlxuZXhwb3J0cy5sb2cyID0gZnVuY3Rpb24odikge1xuICB2YXIgciwgc2hpZnQ7XG4gIHIgPSAgICAgKHYgPiAweEZGRkYpIDw8IDQ7IHYgPj4+PSByO1xuICBzaGlmdCA9ICh2ID4gMHhGRiAgKSA8PCAzOyB2ID4+Pj0gc2hpZnQ7IHIgfD0gc2hpZnQ7XG4gIHNoaWZ0ID0gKHYgPiAweEYgICApIDw8IDI7IHYgPj4+PSBzaGlmdDsgciB8PSBzaGlmdDtcbiAgc2hpZnQgPSAodiA+IDB4MyAgICkgPDwgMTsgdiA+Pj49IHNoaWZ0OyByIHw9IHNoaWZ0O1xuICByZXR1cm4gciB8ICh2ID4+IDEpO1xufVxuXG4vL0NvbXB1dGVzIGxvZyBiYXNlIDEwIG9mIHZcbmV4cG9ydHMubG9nMTAgPSBmdW5jdGlvbih2KSB7XG4gIHJldHVybiAgKHYgPj0gMTAwMDAwMDAwMCkgPyA5IDogKHYgPj0gMTAwMDAwMDAwKSA/IDggOiAodiA+PSAxMDAwMDAwMCkgPyA3IDpcbiAgICAgICAgICAodiA+PSAxMDAwMDAwKSA/IDYgOiAodiA+PSAxMDAwMDApID8gNSA6ICh2ID49IDEwMDAwKSA/IDQgOlxuICAgICAgICAgICh2ID49IDEwMDApID8gMyA6ICh2ID49IDEwMCkgPyAyIDogKHYgPj0gMTApID8gMSA6IDA7XG59XG5cbi8vQ291bnRzIG51bWJlciBvZiBiaXRzXG5leHBvcnRzLnBvcENvdW50ID0gZnVuY3Rpb24odikge1xuICB2ID0gdiAtICgodiA+Pj4gMSkgJiAweDU1NTU1NTU1KTtcbiAgdiA9ICh2ICYgMHgzMzMzMzMzMykgKyAoKHYgPj4+IDIpICYgMHgzMzMzMzMzMyk7XG4gIHJldHVybiAoKHYgKyAodiA+Pj4gNCkgJiAweEYwRjBGMEYpICogMHgxMDEwMTAxKSA+Pj4gMjQ7XG59XG5cbi8vQ291bnRzIG51bWJlciBvZiB0cmFpbGluZyB6ZXJvc1xuZnVuY3Rpb24gY291bnRUcmFpbGluZ1plcm9zKHYpIHtcbiAgdmFyIGMgPSAzMjtcbiAgdiAmPSAtdjtcbiAgaWYgKHYpIGMtLTtcbiAgaWYgKHYgJiAweDAwMDBGRkZGKSBjIC09IDE2O1xuICBpZiAodiAmIDB4MDBGRjAwRkYpIGMgLT0gODtcbiAgaWYgKHYgJiAweDBGMEYwRjBGKSBjIC09IDQ7XG4gIGlmICh2ICYgMHgzMzMzMzMzMykgYyAtPSAyO1xuICBpZiAodiAmIDB4NTU1NTU1NTUpIGMgLT0gMTtcbiAgcmV0dXJuIGM7XG59XG5leHBvcnRzLmNvdW50VHJhaWxpbmdaZXJvcyA9IGNvdW50VHJhaWxpbmdaZXJvcztcblxuLy9Sb3VuZHMgdG8gbmV4dCBwb3dlciBvZiAyXG5leHBvcnRzLm5leHRQb3cyID0gZnVuY3Rpb24odikge1xuICB2ICs9IHYgPT09IDA7XG4gIC0tdjtcbiAgdiB8PSB2ID4+PiAxO1xuICB2IHw9IHYgPj4+IDI7XG4gIHYgfD0gdiA+Pj4gNDtcbiAgdiB8PSB2ID4+PiA4O1xuICB2IHw9IHYgPj4+IDE2O1xuICByZXR1cm4gdiArIDE7XG59XG5cbi8vUm91bmRzIGRvd24gdG8gcHJldmlvdXMgcG93ZXIgb2YgMlxuZXhwb3J0cy5wcmV2UG93MiA9IGZ1bmN0aW9uKHYpIHtcbiAgdiB8PSB2ID4+PiAxO1xuICB2IHw9IHYgPj4+IDI7XG4gIHYgfD0gdiA+Pj4gNDtcbiAgdiB8PSB2ID4+PiA4O1xuICB2IHw9IHYgPj4+IDE2O1xuICByZXR1cm4gdiAtICh2Pj4+MSk7XG59XG5cbi8vQ29tcHV0ZXMgcGFyaXR5IG9mIHdvcmRcbmV4cG9ydHMucGFyaXR5ID0gZnVuY3Rpb24odikge1xuICB2IF49IHYgPj4+IDE2O1xuICB2IF49IHYgPj4+IDg7XG4gIHYgXj0gdiA+Pj4gNDtcbiAgdiAmPSAweGY7XG4gIHJldHVybiAoMHg2OTk2ID4+PiB2KSAmIDE7XG59XG5cbnZhciBSRVZFUlNFX1RBQkxFID0gbmV3IEFycmF5KDI1Nik7XG5cbihmdW5jdGlvbih0YWIpIHtcbiAgZm9yKHZhciBpPTA7IGk8MjU2OyArK2kpIHtcbiAgICB2YXIgdiA9IGksIHIgPSBpLCBzID0gNztcbiAgICBmb3IgKHYgPj4+PSAxOyB2OyB2ID4+Pj0gMSkge1xuICAgICAgciA8PD0gMTtcbiAgICAgIHIgfD0gdiAmIDE7XG4gICAgICAtLXM7XG4gICAgfVxuICAgIHRhYltpXSA9IChyIDw8IHMpICYgMHhmZjtcbiAgfVxufSkoUkVWRVJTRV9UQUJMRSk7XG5cbi8vUmV2ZXJzZSBiaXRzIGluIGEgMzIgYml0IHdvcmRcbmV4cG9ydHMucmV2ZXJzZSA9IGZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuICAoUkVWRVJTRV9UQUJMRVsgdiAgICAgICAgICYgMHhmZl0gPDwgMjQpIHxcbiAgICAgICAgICAoUkVWRVJTRV9UQUJMRVsodiA+Pj4gOCkgICYgMHhmZl0gPDwgMTYpIHxcbiAgICAgICAgICAoUkVWRVJTRV9UQUJMRVsodiA+Pj4gMTYpICYgMHhmZl0gPDwgOCkgIHxcbiAgICAgICAgICAgUkVWRVJTRV9UQUJMRVsodiA+Pj4gMjQpICYgMHhmZl07XG59XG5cbi8vSW50ZXJsZWF2ZSBiaXRzIG9mIDIgY29vcmRpbmF0ZXMgd2l0aCAxNiBiaXRzLiAgVXNlZnVsIGZvciBmYXN0IHF1YWR0cmVlIGNvZGVzXG5leHBvcnRzLmludGVybGVhdmUyID0gZnVuY3Rpb24oeCwgeSkge1xuICB4ICY9IDB4RkZGRjtcbiAgeCA9ICh4IHwgKHggPDwgOCkpICYgMHgwMEZGMDBGRjtcbiAgeCA9ICh4IHwgKHggPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgeCA9ICh4IHwgKHggPDwgMikpICYgMHgzMzMzMzMzMztcbiAgeCA9ICh4IHwgKHggPDwgMSkpICYgMHg1NTU1NTU1NTtcblxuICB5ICY9IDB4RkZGRjtcbiAgeSA9ICh5IHwgKHkgPDwgOCkpICYgMHgwMEZGMDBGRjtcbiAgeSA9ICh5IHwgKHkgPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgeSA9ICh5IHwgKHkgPDwgMikpICYgMHgzMzMzMzMzMztcbiAgeSA9ICh5IHwgKHkgPDwgMSkpICYgMHg1NTU1NTU1NTtcblxuICByZXR1cm4geCB8ICh5IDw8IDEpO1xufVxuXG4vL0V4dHJhY3RzIHRoZSBudGggaW50ZXJsZWF2ZWQgY29tcG9uZW50XG5leHBvcnRzLmRlaW50ZXJsZWF2ZTIgPSBmdW5jdGlvbih2LCBuKSB7XG4gIHYgPSAodiA+Pj4gbikgJiAweDU1NTU1NTU1O1xuICB2ID0gKHYgfCAodiA+Pj4gMSkpICAmIDB4MzMzMzMzMzM7XG4gIHYgPSAodiB8ICh2ID4+PiAyKSkgICYgMHgwRjBGMEYwRjtcbiAgdiA9ICh2IHwgKHYgPj4+IDQpKSAgJiAweDAwRkYwMEZGO1xuICB2ID0gKHYgfCAodiA+Pj4gMTYpKSAmIDB4MDAwRkZGRjtcbiAgcmV0dXJuICh2IDw8IDE2KSA+PiAxNjtcbn1cblxuXG4vL0ludGVybGVhdmUgYml0cyBvZiAzIGNvb3JkaW5hdGVzLCBlYWNoIHdpdGggMTAgYml0cy4gIFVzZWZ1bCBmb3IgZmFzdCBvY3RyZWUgY29kZXNcbmV4cG9ydHMuaW50ZXJsZWF2ZTMgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gIHggJj0gMHgzRkY7XG4gIHggID0gKHggfCAoeDw8MTYpKSAmIDQyNzgxOTAzMzU7XG4gIHggID0gKHggfCAoeDw8OCkpICAmIDI1MTcxOTY5NTtcbiAgeCAgPSAoeCB8ICh4PDw0KSkgICYgMzI3MjM1NjAzNTtcbiAgeCAgPSAoeCB8ICh4PDwyKSkgICYgMTIyNzEzMzUxMztcblxuICB5ICY9IDB4M0ZGO1xuICB5ICA9ICh5IHwgKHk8PDE2KSkgJiA0Mjc4MTkwMzM1O1xuICB5ICA9ICh5IHwgKHk8PDgpKSAgJiAyNTE3MTk2OTU7XG4gIHkgID0gKHkgfCAoeTw8NCkpICAmIDMyNzIzNTYwMzU7XG4gIHkgID0gKHkgfCAoeTw8MikpICAmIDEyMjcxMzM1MTM7XG4gIHggfD0gKHkgPDwgMSk7XG4gIFxuICB6ICY9IDB4M0ZGO1xuICB6ICA9ICh6IHwgKHo8PDE2KSkgJiA0Mjc4MTkwMzM1O1xuICB6ICA9ICh6IHwgKHo8PDgpKSAgJiAyNTE3MTk2OTU7XG4gIHogID0gKHogfCAoejw8NCkpICAmIDMyNzIzNTYwMzU7XG4gIHogID0gKHogfCAoejw8MikpICAmIDEyMjcxMzM1MTM7XG4gIFxuICByZXR1cm4geCB8ICh6IDw8IDIpO1xufVxuXG4vL0V4dHJhY3RzIG50aCBpbnRlcmxlYXZlZCBjb21wb25lbnQgb2YgYSAzLXR1cGxlXG5leHBvcnRzLmRlaW50ZXJsZWF2ZTMgPSBmdW5jdGlvbih2LCBuKSB7XG4gIHYgPSAodiA+Pj4gbikgICAgICAgJiAxMjI3MTMzNTEzO1xuICB2ID0gKHYgfCAodj4+PjIpKSAgICYgMzI3MjM1NjAzNTtcbiAgdiA9ICh2IHwgKHY+Pj40KSkgICAmIDI1MTcxOTY5NTtcbiAgdiA9ICh2IHwgKHY+Pj44KSkgICAmIDQyNzgxOTAzMzU7XG4gIHYgPSAodiB8ICh2Pj4+MTYpKSAgJiAweDNGRjtcbiAgcmV0dXJuICh2PDwyMik+PjIyO1xufVxuXG4vL0NvbXB1dGVzIG5leHQgY29tYmluYXRpb24gaW4gY29sZXhpY29ncmFwaGljIG9yZGVyICh0aGlzIGlzIG1pc3Rha2VubHkgY2FsbGVkIG5leHRQZXJtdXRhdGlvbiBvbiB0aGUgYml0IHR3aWRkbGluZyBoYWNrcyBwYWdlKVxuZXhwb3J0cy5uZXh0Q29tYmluYXRpb24gPSBmdW5jdGlvbih2KSB7XG4gIHZhciB0ID0gdiB8ICh2IC0gMSk7XG4gIHJldHVybiAodCArIDEpIHwgKCgofnQgJiAtfnQpIC0gMSkgPj4+IChjb3VudFRyYWlsaW5nWmVyb3ModikgKyAxKSk7XG59XG5cbiIsIlwidXNlIHN0cmljdFwiOyBcInVzZSByZXN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFVuaW9uRmluZDtcblxuZnVuY3Rpb24gVW5pb25GaW5kKGNvdW50KSB7XG4gIHRoaXMucm9vdHMgPSBuZXcgQXJyYXkoY291bnQpO1xuICB0aGlzLnJhbmtzID0gbmV3IEFycmF5KGNvdW50KTtcbiAgXG4gIGZvcih2YXIgaT0wOyBpPGNvdW50OyArK2kpIHtcbiAgICB0aGlzLnJvb3RzW2ldID0gaTtcbiAgICB0aGlzLnJhbmtzW2ldID0gMDtcbiAgfVxufVxuXG52YXIgcHJvdG8gPSBVbmlvbkZpbmQucHJvdG90eXBlXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgXCJsZW5ndGhcIiwge1xuICBcImdldFwiOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5yb290cy5sZW5ndGhcbiAgfVxufSlcblxucHJvdG8ubWFrZVNldCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgbiA9IHRoaXMucm9vdHMubGVuZ3RoO1xuICB0aGlzLnJvb3RzLnB1c2gobik7XG4gIHRoaXMucmFua3MucHVzaCgwKTtcbiAgcmV0dXJuIG47XG59XG5cbnByb3RvLmZpbmQgPSBmdW5jdGlvbih4KSB7XG4gIHZhciByb290cyA9IHRoaXMucm9vdHM7XG4gIHdoaWxlKHJvb3RzW3hdICE9PSB4KSB7XG4gICAgdmFyIHkgPSByb290c1t4XTtcbiAgICByb290c1t4XSA9IHJvb3RzW3ldO1xuICAgIHggPSB5O1xuICB9XG4gIHJldHVybiB4O1xufVxuXG5wcm90by5saW5rID0gZnVuY3Rpb24oeCwgeSkge1xuICB2YXIgeHIgPSB0aGlzLmZpbmQoeClcbiAgICAsIHlyID0gdGhpcy5maW5kKHkpO1xuICBpZih4ciA9PT0geXIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJhbmtzID0gdGhpcy5yYW5rc1xuICAgICwgcm9vdHMgPSB0aGlzLnJvb3RzXG4gICAgLCB4ZCAgICA9IHJhbmtzW3hyXVxuICAgICwgeWQgICAgPSByYW5rc1t5cl07XG4gIGlmKHhkIDwgeWQpIHtcbiAgICByb290c1t4cl0gPSB5cjtcbiAgfSBlbHNlIGlmKHlkIDwgeGQpIHtcbiAgICByb290c1t5cl0gPSB4cjtcbiAgfSBlbHNlIHtcbiAgICByb290c1t5cl0gPSB4cjtcbiAgICArK3JhbmtzW3hyXTtcbiAgfVxufSIsIlwidXNlIHN0cmljdFwiOyBcInVzZSByZXN0cmljdFwiO1xuXG52YXIgYml0cyAgICAgID0gcmVxdWlyZShcImJpdC10d2lkZGxlXCIpXG4gICwgVW5pb25GaW5kID0gcmVxdWlyZShcInVuaW9uLWZpbmRcIilcblxuLy9SZXR1cm5zIHRoZSBkaW1lbnNpb24gb2YgYSBjZWxsIGNvbXBsZXhcbmZ1bmN0aW9uIGRpbWVuc2lvbihjZWxscykge1xuICB2YXIgZCA9IDBcbiAgICAsIG1heCA9IE1hdGgubWF4XG4gIGZvcih2YXIgaT0wLCBpbD1jZWxscy5sZW5ndGg7IGk8aWw7ICsraSkge1xuICAgIGQgPSBtYXgoZCwgY2VsbHNbaV0ubGVuZ3RoKVxuICB9XG4gIHJldHVybiBkLTFcbn1cbmV4cG9ydHMuZGltZW5zaW9uID0gZGltZW5zaW9uXG5cbi8vQ291bnRzIHRoZSBudW1iZXIgb2YgdmVydGljZXMgaW4gZmFjZXNcbmZ1bmN0aW9uIGNvdW50VmVydGljZXMoY2VsbHMpIHtcbiAgdmFyIHZjID0gLTFcbiAgICAsIG1heCA9IE1hdGgubWF4XG4gIGZvcih2YXIgaT0wLCBpbD1jZWxscy5sZW5ndGg7IGk8aWw7ICsraSkge1xuICAgIHZhciBjID0gY2VsbHNbaV1cbiAgICBmb3IodmFyIGo9MCwgamw9Yy5sZW5ndGg7IGo8amw7ICsraikge1xuICAgICAgdmMgPSBtYXgodmMsIGNbal0pXG4gICAgfVxuICB9XG4gIHJldHVybiB2YysxXG59XG5leHBvcnRzLmNvdW50VmVydGljZXMgPSBjb3VudFZlcnRpY2VzXG5cbi8vUmV0dXJucyBhIGRlZXAgY29weSBvZiBjZWxsc1xuZnVuY3Rpb24gY2xvbmVDZWxscyhjZWxscykge1xuICB2YXIgbmNlbGxzID0gbmV3IEFycmF5KGNlbGxzLmxlbmd0aClcbiAgZm9yKHZhciBpPTAsIGlsPWNlbGxzLmxlbmd0aDsgaTxpbDsgKytpKSB7XG4gICAgbmNlbGxzW2ldID0gY2VsbHNbaV0uc2xpY2UoMClcbiAgfVxuICByZXR1cm4gbmNlbGxzXG59XG5leHBvcnRzLmNsb25lQ2VsbHMgPSBjbG9uZUNlbGxzXG5cbi8vUmFua3MgYSBwYWlyIG9mIGNlbGxzIHVwIHRvIHBlcm11dGF0aW9uXG5mdW5jdGlvbiBjb21wYXJlQ2VsbHMoYSwgYikge1xuICB2YXIgbiA9IGEubGVuZ3RoXG4gICAgLCB0ID0gYS5sZW5ndGggLSBiLmxlbmd0aFxuICAgICwgbWluID0gTWF0aC5taW5cbiAgaWYodCkge1xuICAgIHJldHVybiB0XG4gIH1cbiAgc3dpdGNoKG4pIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gMDtcbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4gYVswXSAtIGJbMF07XG4gICAgY2FzZSAyOlxuICAgICAgdmFyIGQgPSBhWzBdK2FbMV0tYlswXS1iWzFdXG4gICAgICBpZihkKSB7XG4gICAgICAgIHJldHVybiBkXG4gICAgICB9XG4gICAgICByZXR1cm4gbWluKGFbMF0sYVsxXSkgLSBtaW4oYlswXSxiWzFdKVxuICAgIGNhc2UgMzpcbiAgICAgIHZhciBsMSA9IGFbMF0rYVsxXVxuICAgICAgICAsIG0xID0gYlswXStiWzFdXG4gICAgICBkID0gbDErYVsyXSAtIChtMStiWzJdKVxuICAgICAgaWYoZCkge1xuICAgICAgICByZXR1cm4gZFxuICAgICAgfVxuICAgICAgdmFyIGwwID0gbWluKGFbMF0sIGFbMV0pXG4gICAgICAgICwgbTAgPSBtaW4oYlswXSwgYlsxXSlcbiAgICAgICAgLCBkICA9IG1pbihsMCwgYVsyXSkgLSBtaW4obTAsIGJbMl0pXG4gICAgICBpZihkKSB7XG4gICAgICAgIHJldHVybiBkXG4gICAgICB9XG4gICAgICByZXR1cm4gbWluKGwwK2FbMl0sIGwxKSAtIG1pbihtMCtiWzJdLCBtMSlcbiAgICBcbiAgICAvL1RPRE86IE1heWJlIG9wdGltaXplIG49NCBhcyB3ZWxsP1xuICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgYXMgPSBhLnNsaWNlKDApXG4gICAgICBhcy5zb3J0KClcbiAgICAgIHZhciBicyA9IGIuc2xpY2UoMClcbiAgICAgIGJzLnNvcnQoKVxuICAgICAgZm9yKHZhciBpPTA7IGk8bjsgKytpKSB7XG4gICAgICAgIHQgPSBhc1tpXSAtIGJzW2ldXG4gICAgICAgIGlmKHQpIHtcbiAgICAgICAgICByZXR1cm4gdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gMFxuICB9XG59XG5leHBvcnRzLmNvbXBhcmVDZWxscyA9IGNvbXBhcmVDZWxsc1xuXG5mdW5jdGlvbiBjb21wYXJlWmlwcGVkKGEsIGIpIHtcbiAgcmV0dXJuIGNvbXBhcmVDZWxscyhhWzBdLCBiWzBdKVxufVxuXG4vL1B1dHMgYSBjZWxsIGNvbXBsZXggaW50byBub3JtYWwgb3JkZXIgZm9yIHRoZSBwdXJwb3NlcyBvZiBmaW5kQ2VsbCBxdWVyaWVzXG5mdW5jdGlvbiBub3JtYWxpemUoY2VsbHMsIGF0dHIpIHtcbiAgaWYoYXR0cikge1xuICAgIHZhciBsZW4gPSBjZWxscy5sZW5ndGhcbiAgICB2YXIgemlwcGVkID0gbmV3IEFycmF5KGxlbilcbiAgICBmb3IodmFyIGk9MDsgaTxsZW47ICsraSkge1xuICAgICAgemlwcGVkW2ldID0gW2NlbGxzW2ldLCBhdHRyW2ldXVxuICAgIH1cbiAgICB6aXBwZWQuc29ydChjb21wYXJlWmlwcGVkKVxuICAgIGZvcih2YXIgaT0wOyBpPGxlbjsgKytpKSB7XG4gICAgICBjZWxsc1tpXSA9IHppcHBlZFtpXVswXVxuICAgICAgYXR0cltpXSA9IHppcHBlZFtpXVsxXVxuICAgIH1cbiAgICByZXR1cm4gY2VsbHNcbiAgfSBlbHNlIHtcbiAgICBjZWxscy5zb3J0KGNvbXBhcmVDZWxscylcbiAgICByZXR1cm4gY2VsbHNcbiAgfVxufVxuZXhwb3J0cy5ub3JtYWxpemUgPSBub3JtYWxpemVcblxuLy9SZW1vdmVzIGFsbCBkdXBsaWNhdGUgY2VsbHMgaW4gdGhlIGNvbXBsZXhcbmZ1bmN0aW9uIHVuaXF1ZShjZWxscykge1xuICBpZihjZWxscy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICB2YXIgcHRyID0gMVxuICAgICwgbGVuID0gY2VsbHMubGVuZ3RoXG4gIGZvcih2YXIgaT0xOyBpPGxlbjsgKytpKSB7XG4gICAgdmFyIGEgPSBjZWxsc1tpXVxuICAgIGlmKGNvbXBhcmVDZWxscyhhLCBjZWxsc1tpLTFdKSkge1xuICAgICAgaWYoaSA9PT0gcHRyKSB7XG4gICAgICAgIHB0cisrXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjZWxsc1twdHIrK10gPSBhXG4gICAgfVxuICB9XG4gIGNlbGxzLmxlbmd0aCA9IHB0clxuICByZXR1cm4gY2VsbHNcbn1cbmV4cG9ydHMudW5pcXVlID0gdW5pcXVlO1xuXG4vL0ZpbmRzIGEgY2VsbCBpbiBhIG5vcm1hbGl6ZWQgY2VsbCBjb21wbGV4XG5mdW5jdGlvbiBmaW5kQ2VsbChjZWxscywgYykge1xuICB2YXIgbG8gPSAwXG4gICAgLCBoaSA9IGNlbGxzLmxlbmd0aC0xXG4gICAgLCByICA9IC0xXG4gIHdoaWxlIChsbyA8PSBoaSkge1xuICAgIHZhciBtaWQgPSAobG8gKyBoaSkgPj4gMVxuICAgICAgLCBzICAgPSBjb21wYXJlQ2VsbHMoY2VsbHNbbWlkXSwgYylcbiAgICBpZihzIDw9IDApIHtcbiAgICAgIGlmKHMgPT09IDApIHtcbiAgICAgICAgciA9IG1pZFxuICAgICAgfVxuICAgICAgbG8gPSBtaWQgKyAxXG4gICAgfSBlbHNlIGlmKHMgPiAwKSB7XG4gICAgICBoaSA9IG1pZCAtIDFcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJcbn1cbmV4cG9ydHMuZmluZENlbGwgPSBmaW5kQ2VsbDtcblxuLy9CdWlsZHMgYW4gaW5kZXggZm9yIGFuIG4tY2VsbC4gIFRoaXMgaXMgbW9yZSBnZW5lcmFsIHRoYW4gZHVhbCwgYnV0IGxlc3MgZWZmaWNpZW50XG5mdW5jdGlvbiBpbmNpZGVuY2UoZnJvbV9jZWxscywgdG9fY2VsbHMpIHtcbiAgdmFyIGluZGV4ID0gbmV3IEFycmF5KGZyb21fY2VsbHMubGVuZ3RoKVxuICBmb3IodmFyIGk9MCwgaWw9aW5kZXgubGVuZ3RoOyBpPGlsOyArK2kpIHtcbiAgICBpbmRleFtpXSA9IFtdXG4gIH1cbiAgdmFyIGIgPSBbXVxuICBmb3IodmFyIGk9MCwgbj10b19jZWxscy5sZW5ndGg7IGk8bjsgKytpKSB7XG4gICAgdmFyIGMgPSB0b19jZWxsc1tpXVxuICAgIHZhciBjbCA9IGMubGVuZ3RoXG4gICAgZm9yKHZhciBrPTEsIGtuPSgxPDxjbCk7IGs8a247ICsraykge1xuICAgICAgYi5sZW5ndGggPSBiaXRzLnBvcENvdW50KGspXG4gICAgICB2YXIgbCA9IDBcbiAgICAgIGZvcih2YXIgaj0wOyBqPGNsOyArK2opIHtcbiAgICAgICAgaWYoayAmICgxPDxqKSkge1xuICAgICAgICAgIGJbbCsrXSA9IGNbal1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGlkeD1maW5kQ2VsbChmcm9tX2NlbGxzLCBiKVxuICAgICAgaWYoaWR4IDwgMCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgd2hpbGUodHJ1ZSkge1xuICAgICAgICBpbmRleFtpZHgrK10ucHVzaChpKVxuICAgICAgICBpZihpZHggPj0gZnJvbV9jZWxscy5sZW5ndGggfHwgY29tcGFyZUNlbGxzKGZyb21fY2VsbHNbaWR4XSwgYikgIT09IDApIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBpbmRleFxufVxuZXhwb3J0cy5pbmNpZGVuY2UgPSBpbmNpZGVuY2VcblxuLy9Db21wdXRlcyB0aGUgZHVhbCBvZiB0aGUgbWVzaC4gIFRoaXMgaXMgYmFzaWNhbGx5IGFuIG9wdGltaXplZCB2ZXJzaW9uIG9mIGJ1aWxkSW5kZXggZm9yIHRoZSBzaXR1YXRpb24gd2hlcmUgZnJvbV9jZWxscyBpcyBqdXN0IHRoZSBsaXN0IG9mIHZlcnRpY2VzXG5mdW5jdGlvbiBkdWFsKGNlbGxzLCB2ZXJ0ZXhfY291bnQpIHtcbiAgaWYoIXZlcnRleF9jb3VudCkge1xuICAgIHJldHVybiBpbmNpZGVuY2UodW5pcXVlKHNrZWxldG9uKGNlbGxzLCAwKSksIGNlbGxzLCAwKVxuICB9XG4gIHZhciByZXMgPSBuZXcgQXJyYXkodmVydGV4X2NvdW50KVxuICBmb3IodmFyIGk9MDsgaTx2ZXJ0ZXhfY291bnQ7ICsraSkge1xuICAgIHJlc1tpXSA9IFtdXG4gIH1cbiAgZm9yKHZhciBpPTAsIGxlbj1jZWxscy5sZW5ndGg7IGk8bGVuOyArK2kpIHtcbiAgICB2YXIgYyA9IGNlbGxzW2ldXG4gICAgZm9yKHZhciBqPTAsIGNsPWMubGVuZ3RoOyBqPGNsOyArK2opIHtcbiAgICAgIHJlc1tjW2pdXS5wdXNoKGkpXG4gICAgfVxuICB9XG4gIHJldHVybiByZXNcbn1cbmV4cG9ydHMuZHVhbCA9IGR1YWxcblxuLy9FbnVtZXJhdGVzIGFsbCBjZWxscyBpbiB0aGUgY29tcGxleFxuZnVuY3Rpb24gZXhwbG9kZShjZWxscykge1xuICB2YXIgcmVzdWx0ID0gW11cbiAgZm9yKHZhciBpPTAsIGlsPWNlbGxzLmxlbmd0aDsgaTxpbDsgKytpKSB7XG4gICAgdmFyIGMgPSBjZWxsc1tpXVxuICAgICAgLCBjbCA9IGMubGVuZ3RofDBcbiAgICBmb3IodmFyIGo9MSwgamw9KDE8PGNsKTsgajxqbDsgKytqKSB7XG4gICAgICB2YXIgYiA9IFtdXG4gICAgICBmb3IodmFyIGs9MDsgazxjbDsgKytrKSB7XG4gICAgICAgIGlmKChqID4+PiBrKSAmIDEpIHtcbiAgICAgICAgICBiLnB1c2goY1trXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzdWx0LnB1c2goYilcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZShyZXN1bHQpXG59XG5leHBvcnRzLmV4cGxvZGUgPSBleHBsb2RlXG5cbi8vRW51bWVyYXRlcyBhbGwgb2YgdGhlIG4tY2VsbHMgb2YgYSBjZWxsIGNvbXBsZXhcbmZ1bmN0aW9uIHNrZWxldG9uKGNlbGxzLCBuKSB7XG4gIGlmKG4gPCAwKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdXG4gICAgLCBrMCAgICAgPSAoMTw8KG4rMSkpLTFcbiAgZm9yKHZhciBpPTA7IGk8Y2VsbHMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYyA9IGNlbGxzW2ldXG4gICAgZm9yKHZhciBrPWswOyBrPCgxPDxjLmxlbmd0aCk7IGs9Yml0cy5uZXh0Q29tYmluYXRpb24oaykpIHtcbiAgICAgIHZhciBiID0gbmV3IEFycmF5KG4rMSlcbiAgICAgICAgLCBsID0gMFxuICAgICAgZm9yKHZhciBqPTA7IGo8Yy5sZW5ndGg7ICsraikge1xuICAgICAgICBpZihrICYgKDE8PGopKSB7XG4gICAgICAgICAgYltsKytdID0gY1tqXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXN1bHQucHVzaChiKVxuICAgIH1cbiAgfVxuICByZXR1cm4gbm9ybWFsaXplKHJlc3VsdClcbn1cbmV4cG9ydHMuc2tlbGV0b24gPSBza2VsZXRvbjtcblxuLy9Db21wdXRlcyB0aGUgYm91bmRhcnkgb2YgYWxsIGNlbGxzLCBkb2VzIG5vdCByZW1vdmUgZHVwbGljYXRlc1xuZnVuY3Rpb24gYm91bmRhcnkoY2VsbHMpIHtcbiAgdmFyIHJlcyA9IFtdXG4gIGZvcih2YXIgaT0wLGlsPWNlbGxzLmxlbmd0aDsgaTxpbDsgKytpKSB7XG4gICAgdmFyIGMgPSBjZWxsc1tpXVxuICAgIGZvcih2YXIgaj0wLGNsPWMubGVuZ3RoOyBqPGNsOyArK2opIHtcbiAgICAgIHZhciBiID0gbmV3IEFycmF5KGMubGVuZ3RoLTEpXG4gICAgICBmb3IodmFyIGs9MCwgbD0wOyBrPGNsOyArK2spIHtcbiAgICAgICAgaWYoayAhPT0gaikge1xuICAgICAgICAgIGJbbCsrXSA9IGNba11cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzLnB1c2goYilcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZShyZXMpXG59XG5leHBvcnRzLmJvdW5kYXJ5ID0gYm91bmRhcnk7XG5cbi8vQ29tcHV0ZXMgY29ubmVjdGVkIGNvbXBvbmVudHMgZm9yIGEgZGVuc2UgY2VsbCBjb21wbGV4XG5mdW5jdGlvbiBjb25uZWN0ZWRDb21wb25lbnRzX2RlbnNlKGNlbGxzLCB2ZXJ0ZXhfY291bnQpIHtcbiAgdmFyIGxhYmVscyA9IG5ldyBVbmlvbkZpbmQodmVydGV4X2NvdW50KVxuICBmb3IodmFyIGk9MDsgaTxjZWxscy5sZW5ndGg7ICsraSkge1xuICAgIHZhciBjID0gY2VsbHNbaV1cbiAgICBmb3IodmFyIGo9MDsgajxjLmxlbmd0aDsgKytqKSB7XG4gICAgICBmb3IodmFyIGs9aisxOyBrPGMubGVuZ3RoOyArK2spIHtcbiAgICAgICAgbGFiZWxzLmxpbmsoY1tqXSwgY1trXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdmFyIGNvbXBvbmVudHMgPSBbXVxuICAgICwgY29tcG9uZW50X2xhYmVscyA9IGxhYmVscy5yYW5rc1xuICBmb3IodmFyIGk9MDsgaTxjb21wb25lbnRfbGFiZWxzLmxlbmd0aDsgKytpKSB7XG4gICAgY29tcG9uZW50X2xhYmVsc1tpXSA9IC0xXG4gIH1cbiAgZm9yKHZhciBpPTA7IGk8Y2VsbHMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgbCA9IGxhYmVscy5maW5kKGNlbGxzW2ldWzBdKVxuICAgIGlmKGNvbXBvbmVudF9sYWJlbHNbbF0gPCAwKSB7XG4gICAgICBjb21wb25lbnRfbGFiZWxzW2xdID0gY29tcG9uZW50cy5sZW5ndGhcbiAgICAgIGNvbXBvbmVudHMucHVzaChbY2VsbHNbaV0uc2xpY2UoMCldKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb21wb25lbnRzW2NvbXBvbmVudF9sYWJlbHNbbF1dLnB1c2goY2VsbHNbaV0uc2xpY2UoMCkpXG4gICAgfVxuICB9XG4gIHJldHVybiBjb21wb25lbnRzXG59XG5cbi8vQ29tcHV0ZXMgY29ubmVjdGVkIGNvbXBvbmVudHMgZm9yIGEgc3BhcnNlIGdyYXBoXG5mdW5jdGlvbiBjb25uZWN0ZWRDb21wb25lbnRzX3NwYXJzZShjZWxscykge1xuICB2YXIgdmVydGljZXMgID0gdW5pcXVlKG5vcm1hbGl6ZShza2VsZXRvbihjZWxscywgMCkpKVxuICAgICwgbGFiZWxzICAgID0gbmV3IFVuaW9uRmluZCh2ZXJ0aWNlcy5sZW5ndGgpXG4gIGZvcih2YXIgaT0wOyBpPGNlbGxzLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGMgPSBjZWxsc1tpXVxuICAgIGZvcih2YXIgaj0wOyBqPGMubGVuZ3RoOyArK2opIHtcbiAgICAgIHZhciB2aiA9IGZpbmRDZWxsKHZlcnRpY2VzLCBbY1tqXV0pXG4gICAgICBmb3IodmFyIGs9aisxOyBrPGMubGVuZ3RoOyArK2spIHtcbiAgICAgICAgbGFiZWxzLmxpbmsodmosIGZpbmRDZWxsKHZlcnRpY2VzLCBbY1trXV0pKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICB2YXIgY29tcG9uZW50cyAgICAgICAgPSBbXVxuICAgICwgY29tcG9uZW50X2xhYmVscyAgPSBsYWJlbHMucmFua3NcbiAgZm9yKHZhciBpPTA7IGk8Y29tcG9uZW50X2xhYmVscy5sZW5ndGg7ICsraSkge1xuICAgIGNvbXBvbmVudF9sYWJlbHNbaV0gPSAtMVxuICB9XG4gIGZvcih2YXIgaT0wOyBpPGNlbGxzLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGwgPSBsYWJlbHMuZmluZChmaW5kQ2VsbCh2ZXJ0aWNlcywgW2NlbGxzW2ldWzBdXSkpO1xuICAgIGlmKGNvbXBvbmVudF9sYWJlbHNbbF0gPCAwKSB7XG4gICAgICBjb21wb25lbnRfbGFiZWxzW2xdID0gY29tcG9uZW50cy5sZW5ndGhcbiAgICAgIGNvbXBvbmVudHMucHVzaChbY2VsbHNbaV0uc2xpY2UoMCldKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb21wb25lbnRzW2NvbXBvbmVudF9sYWJlbHNbbF1dLnB1c2goY2VsbHNbaV0uc2xpY2UoMCkpXG4gICAgfVxuICB9XG4gIHJldHVybiBjb21wb25lbnRzXG59XG5cbi8vQ29tcHV0ZXMgY29ubmVjdGVkIGNvbXBvbmVudHMgZm9yIGEgY2VsbCBjb21wbGV4XG5mdW5jdGlvbiBjb25uZWN0ZWRDb21wb25lbnRzKGNlbGxzLCB2ZXJ0ZXhfY291bnQpIHtcbiAgaWYodmVydGV4X2NvdW50KSB7XG4gICAgcmV0dXJuIGNvbm5lY3RlZENvbXBvbmVudHNfZGVuc2UoY2VsbHMsIHZlcnRleF9jb3VudClcbiAgfVxuICByZXR1cm4gY29ubmVjdGVkQ29tcG9uZW50c19zcGFyc2UoY2VsbHMpXG59XG5leHBvcnRzLmNvbm5lY3RlZENvbXBvbmVudHMgPSBjb25uZWN0ZWRDb21wb25lbnRzXG4iLCIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSBtb25vdG9uZUNvbnZleEh1bGwyRFxuXG52YXIgb3JpZW50ID0gcmVxdWlyZSgncm9idXN0LW9yaWVudGF0aW9uJylbM11cblxuZnVuY3Rpb24gbW9ub3RvbmVDb252ZXhIdWxsMkQocG9pbnRzKSB7XG4gIHZhciBuID0gcG9pbnRzLmxlbmd0aFxuXG4gIGlmKG4gPCAzKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShuKVxuICAgIGZvcih2YXIgaT0wOyBpPG47ICsraSkge1xuICAgICAgcmVzdWx0W2ldID0gaVxuICAgIH1cblxuICAgIGlmKG4gPT09IDIgJiZcbiAgICAgICBwb2ludHNbMF1bMF0gPT09IHBvaW50c1sxXVswXSAmJlxuICAgICAgIHBvaW50c1swXVsxXSA9PT0gcG9pbnRzWzFdWzFdKSB7XG4gICAgICByZXR1cm4gWzBdXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy9Tb3J0IHBvaW50IGluZGljZXMgYWxvbmcgeC1heGlzXG4gIHZhciBzb3J0ZWQgPSBuZXcgQXJyYXkobilcbiAgZm9yKHZhciBpPTA7IGk8bjsgKytpKSB7XG4gICAgc29ydGVkW2ldID0gaVxuICB9XG4gIHNvcnRlZC5zb3J0KGZ1bmN0aW9uKGEsYikge1xuICAgIHZhciBkID0gcG9pbnRzW2FdWzBdLXBvaW50c1tiXVswXVxuICAgIGlmKGQpIHtcbiAgICAgIHJldHVybiBkXG4gICAgfVxuICAgIHJldHVybiBwb2ludHNbYV1bMV0gLSBwb2ludHNbYl1bMV1cbiAgfSlcblxuICAvL0NvbnN0cnVjdCB1cHBlciBhbmQgbG93ZXIgaHVsbHNcbiAgdmFyIGxvd2VyID0gW3NvcnRlZFswXSwgc29ydGVkWzFdXVxuICB2YXIgdXBwZXIgPSBbc29ydGVkWzBdLCBzb3J0ZWRbMV1dXG5cbiAgZm9yKHZhciBpPTI7IGk8bjsgKytpKSB7XG4gICAgdmFyIGlkeCA9IHNvcnRlZFtpXVxuICAgIHZhciBwICAgPSBwb2ludHNbaWR4XVxuXG4gICAgLy9JbnNlcnQgaW50byBsb3dlciBsaXN0XG4gICAgdmFyIG0gPSBsb3dlci5sZW5ndGhcbiAgICB3aGlsZShtID4gMSAmJiBvcmllbnQoXG4gICAgICAgIHBvaW50c1tsb3dlclttLTJdXSwgXG4gICAgICAgIHBvaW50c1tsb3dlclttLTFdXSwgXG4gICAgICAgIHApIDw9IDApIHtcbiAgICAgIG0gLT0gMVxuICAgICAgbG93ZXIucG9wKClcbiAgICB9XG4gICAgbG93ZXIucHVzaChpZHgpXG5cbiAgICAvL0luc2VydCBpbnRvIHVwcGVyIGxpc3RcbiAgICBtID0gdXBwZXIubGVuZ3RoXG4gICAgd2hpbGUobSA+IDEgJiYgb3JpZW50KFxuICAgICAgICBwb2ludHNbdXBwZXJbbS0yXV0sIFxuICAgICAgICBwb2ludHNbdXBwZXJbbS0xXV0sIFxuICAgICAgICBwKSA+PSAwKSB7XG4gICAgICBtIC09IDFcbiAgICAgIHVwcGVyLnBvcCgpXG4gICAgfVxuICAgIHVwcGVyLnB1c2goaWR4KVxuICB9XG5cbiAgLy9NZXJnZSBsaXN0cyB0b2dldGhlclxuICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KHVwcGVyLmxlbmd0aCArIGxvd2VyLmxlbmd0aCAtIDIpXG4gIHZhciBwdHIgICAgPSAwXG4gIGZvcih2YXIgaT0wLCBubD1sb3dlci5sZW5ndGg7IGk8bmw7ICsraSkge1xuICAgIHJlc3VsdFtwdHIrK10gPSBsb3dlcltpXVxuICB9XG4gIGZvcih2YXIgaj11cHBlci5sZW5ndGgtMjsgaj4wOyAtLWopIHtcbiAgICByZXN1bHRbcHRyKytdID0gdXBwZXJbal1cbiAgfVxuXG4gIC8vUmV0dXJuIHJlc3VsdFxuICByZXR1cm4gcmVzdWx0XG59IiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9pbmNyZW1lbnRhbC1jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc2NhbGUvbm9kZV9tb2R1bGVzL3R3by1zdW0vdHdvLXN1bS5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL2luY3JlbWVudGFsLWNvbnZleC1odWxsL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vbm9kZV9tb2R1bGVzL3JvYnVzdC1zY2FsZS9yb2J1c3Qtc2NhbGUuanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9pbmNyZW1lbnRhbC1jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc3VidHJhY3Qvcm9idXN0LWRpZmYuanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9pbmNyZW1lbnRhbC1jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy9yb2J1c3Qtc3VtL3JvYnVzdC1zdW0uanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL2NvbnZleC1odWxsL25vZGVfbW9kdWxlcy9pbmNyZW1lbnRhbC1jb252ZXgtaHVsbC9ub2RlX21vZHVsZXMvcm9idXN0LW9yaWVudGF0aW9uL25vZGVfbW9kdWxlcy90d28tcHJvZHVjdC90d28tcHJvZHVjdC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvY29udmV4LWh1bGwvbm9kZV9tb2R1bGVzL2luY3JlbWVudGFsLWNvbnZleC1odWxsL25vZGVfbW9kdWxlcy9yb2J1c3Qtb3JpZW50YXRpb24vb3JpZW50YXRpb24uanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jZW50cm9pZC9ub2RlX21vZHVsZXMvdHVyZi1tZXRhL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsIi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgTGluZWFyUmluZ3MgYW5kIG9wdGlvbmFsbHkgYW4ge0BsaW5rIE9iamVjdH0gd2l0aCBwcm9wZXJ0aWVzIGFuZCByZXR1cm5zIGEgR2VvSlNPTiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZS5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvcG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxOdW1iZXI+Pn0gcmluZ3MgYW4gYXJyYXkgb2YgTGluZWFyUmluZ3NcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIGFuIG9wdGlvbmFsIHByb3BlcnRpZXMgb2JqZWN0XG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBhIFBvbHlnb24gZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIGEgTGluZWFyUmluZyBvZiB0aGUgcG9seWdvbiBoYXMgdG9vIGZldyBwb3NpdGlvbnNcbiAqIG9yIGlmIGEgTGluZWFyUmluZyBvZiB0aGUgUG9seWdvbiBkb2VzIG5vdCBoYXZlIG1hdGNoaW5nIFBvc2l0aW9ucyBhdCB0aGVcbiAqIGJlZ2lubmluZyAmIGVuZC5cbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWdvbiA9IHR1cmYucG9seWdvbihbW1xuICogIFstMi4yNzU1NDMsIDUzLjQ2NDU0N10sXG4gKiAgWy0yLjI3NTU0MywgNTMuNDg5MjcxXSxcbiAqICBbLTIuMjE1MTE4LCA1My40ODkyNzFdLFxuICogIFstMi4yMTUxMTgsIDUzLjQ2NDU0N10sXG4gKiAgWy0yLjI3NTU0MywgNTMuNDY0NTQ3XVxuICogXV0sIHsgbmFtZTogJ3BvbHkxJywgcG9wdWxhdGlvbjogNDAwfSk7XG4gKlxuICogLy89cG9seWdvblxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzKXtcblxuICBpZiAoY29vcmRpbmF0ZXMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciByaW5nID0gY29vcmRpbmF0ZXNbaV07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCByaW5nW3JpbmcubGVuZ3RoIC0gMV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChyaW5nLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFYWNoIExpbmVhclJpbmcgb2YgYSBQb2x5Z29uIG11c3QgaGF2ZSA0IG9yIG1vcmUgUG9zaXRpb25zLicpO1xuICAgICAgfVxuICAgICAgaWYgKHJpbmdbcmluZy5sZW5ndGggLSAxXVtqXSAhPT0gcmluZ1swXVtqXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcnN0IGFuZCBsYXN0IFBvc2l0aW9uIGFyZSBub3QgZXF1aXZhbGVudC4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgcG9seWdvbiA9IHtcbiAgICBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gICAgXCJnZW9tZXRyeVwiOiB7XG4gICAgICBcInR5cGVcIjogXCJQb2x5Z29uXCIsXG4gICAgICBcImNvb3JkaW5hdGVzXCI6IGNvb3JkaW5hdGVzXG4gICAgfSxcbiAgICBcInByb3BlcnRpZXNcIjogcHJvcGVydGllc1xuICB9O1xuXG4gIGlmICghcG9seWdvbi5wcm9wZXJ0aWVzKSB7XG4gICAgcG9seWdvbi5wcm9wZXJ0aWVzID0ge307XG4gIH1cblxuICByZXR1cm4gcG9seWdvbjtcbn07XG4iLCJ2YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlcyBhbmQgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyBhbmQgY2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHBvaW50cyB0aGF0IGZhbGwgd2l0aGluIHRoZSBzZXQgb2YgcG9seWdvbnMuXG4gKlxuICogQG1vZHVsZSB0dXJmL2NvdW50XG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2x5Z29ucyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlc1xuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9pbnRzIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlc1xuICogQHBhcmFtIHtTdHJpbmd9IGNvdW50RmllbGQgYSBmaWVsZCB0byBhcHBlbmQgdG8gdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIFBvbHlnb24gZmVhdHVyZXMgcmVwcmVzZW50aW5nIFBvaW50IGNvdW50c1xuICogQHJldHVybiB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgUG9seWdvbiBmZWF0dXJlcyB3aXRoIGBjb3VudEZpZWxkYCBhcHBlbmRlZFxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5Z29ucyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogIHR1cmYucG9seWdvbihbW1xuICogICAgWy0xMTIuMDcyMzkxLDQ2LjU4NjU5MV0sXG4gKiAgICBbLTExMi4wNzIzOTEsNDYuNjE3NjFdLFxuICogICAgWy0xMTIuMDI4MTAyLDQ2LjYxNzYxXSxcbiAqICAgIFstMTEyLjAyODEwMiw0Ni41ODY1OTFdLFxuICogICAgWy0xMTIuMDcyMzkxLDQ2LjU4NjU5MV1cbiAqICBdXSksXG4gKiAgdHVyZi5wb2x5Z29uKFtbXG4gKiAgICBbLTExMi4wMjM5ODMsNDYuNTcwNDI2XSxcbiAqICAgIFstMTEyLjAyMzk4Myw0Ni42MTUwMTZdLFxuICogICAgWy0xMTEuOTY2MTMzLDQ2LjYxNTAxNl0sXG4gKiAgICBbLTExMS45NjYxMzMsNDYuNTcwNDI2XSxcbiAqICAgIFstMTEyLjAyMzk4Myw0Ni41NzA0MjZdXG4gKiAgXV0pXG4gKiBdKTtcbiAqIHZhciBwb2ludHMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiAqICB0dXJmLnBvaW50KFstMTEyLjAzNzIsIDQ2LjYwODA1OF0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiAqICB0dXJmLnBvaW50KFstMTEyLjA0NTk1NSwgNDYuNTk2MjY0XSxcbiAqICAgIHtwb3B1bGF0aW9uOiA2MDB9KVxuICogXSk7XG4gKlxuICogdmFyIGNvdW50ZWQgPSB0dXJmLmNvdW50KHBvbHlnb25zLCBwb2ludHMsICdwdF9jb3VudCcpO1xuICpcbiAqIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFxuICogICBwb2ludHMuZmVhdHVyZXMuY29uY2F0KGNvdW50ZWQuZmVhdHVyZXMpKTtcbiAqXG4gKiAvLz1yZXN1bHRcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvbHlGQywgcHRGQywgb3V0RmllbGQsIGRvbmUpe1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlGQy5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwb2x5ID0gcG9seUZDLmZlYXR1cmVzW2ldO1xuICAgIGlmKCFwb2x5LnByb3BlcnRpZXMpIHBvbHkucHJvcGVydGllcyA9IHt9O1xuICAgIHZhciB2YWx1ZXMgPSAwO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcHRGQy5mZWF0dXJlcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIHB0ID0gcHRGQy5mZWF0dXJlc1tqXTtcbiAgICAgIGlmIChpbnNpZGUocHQsIHBvbHkpKSB7XG4gICAgICAgIHZhbHVlcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBwb2x5LnByb3BlcnRpZXNbb3V0RmllbGRdID0gdmFsdWVzO1xuICB9XG5cbiAgcmV0dXJuIHBvbHlGQztcbn07XG4iLCIvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGF2ZXJzaW5lX2Zvcm11bGFcbi8vaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBQb2ludH0gZmVhdHVyZSBhbmQgY2FsY3VsYXRlcyB0aGUgbG9jYXRpb24gb2YgYSBkZXN0aW5hdGlvbiBwb2ludCBnaXZlbiBhIGRpc3RhbmNlIGluIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzOyBhbmQgYmVhcmluZyBpbiBkZWdyZWVzLiBUaGlzIHVzZXMgdGhlIFtIYXZlcnNpbmUgZm9ybXVsYV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IYXZlcnNpbmVfZm9ybXVsYSkgdG8gYWNjb3VudCBmb3IgZ2xvYmFsIGN1cnZhdHVyZS5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvZGVzdGluYXRpb25cbiAqIEBwYXJhbSB7UG9pbnR9IHN0YXJ0IGEgUG9pbnQgZmVhdHVyZSBhdCB0aGUgc3RhcnRpbmcgcG9pbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSBkaXN0YW5jZSBkaXN0YW5jZSBmcm9tIHRoZSBzdGFydGluZyBwb2ludFxuICogQHBhcmFtIHtOdW1iZXJ9IGJlYXJpbmcgcmFuZ2luZyBmcm9tIC0xODAgdG8gMTgwXG4gKiBAcGFyYW0ge1N0cmluZ30gdW5pdHMgbWlsZXMsIGtpbG9tZXRlcnMsIGRlZ3JlZXMsIG9yIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtQb2ludH0gYSBQb2ludCBmZWF0dXJlIGF0IHRoZSBkZXN0aW5hdGlvblxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludDEgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdKTtcbiAqIHZhciBkaXN0YW5jZSA9IDUwO1xuICogdmFyIGJlYXJpbmcgPSA5MDtcbiAqIHZhciB1bml0cyA9ICdtaWxlcyc7XG4gKlxuICogdmFyIGRlc3RpbmF0aW9uID0gdHVyZi5kZXN0aW5hdGlvbihwb2ludDEsIGRpc3RhbmNlLCBiZWFyaW5nLCB1bml0cyk7XG4gKiBwb2ludDEucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnIzBmMCc7XG4gKiBkZXN0aW5hdGlvbi5wcm9wZXJ0aWVzWydtYXJrZXItY29sb3InXSA9ICcjZjAwJztcbiAqXG4gKiB2YXIgcmVzdWx0ID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbcG9pbnQxLCBkZXN0aW5hdGlvbl0pO1xuICpcbiAqIC8vPXJlc3VsdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwb2ludDEsIGRpc3RhbmNlLCBiZWFyaW5nLCB1bml0cykge1xuICAgIHZhciBjb29yZGluYXRlczEgPSBwb2ludDEuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgdmFyIGxvbmdpdHVkZTEgPSB0b1JhZChjb29yZGluYXRlczFbMF0pO1xuICAgIHZhciBsYXRpdHVkZTEgPSB0b1JhZChjb29yZGluYXRlczFbMV0pO1xuICAgIHZhciBiZWFyaW5nX3JhZCA9IHRvUmFkKGJlYXJpbmcpO1xuXG4gICAgdmFyIFIgPSAwO1xuICAgIHN3aXRjaCAodW5pdHMpIHtcbiAgICBjYXNlICdtaWxlcyc6XG4gICAgICAgIFIgPSAzOTYwO1xuICAgICAgICBicmVha1xuICAgIGNhc2UgJ2tpbG9tZXRlcnMnOlxuICAgICAgICBSID0gNjM3MztcbiAgICAgICAgYnJlYWtcbiAgICBjYXNlICdkZWdyZWVzJzpcbiAgICAgICAgUiA9IDU3LjI5NTc3OTU7XG4gICAgICAgIGJyZWFrXG4gICAgY2FzZSAncmFkaWFucyc6XG4gICAgICAgIFIgPSAxO1xuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIHZhciBsYXRpdHVkZTIgPSBNYXRoLmFzaW4oTWF0aC5zaW4obGF0aXR1ZGUxKSAqIE1hdGguY29zKGRpc3RhbmNlIC8gUikgK1xuICAgICAgICBNYXRoLmNvcyhsYXRpdHVkZTEpICogTWF0aC5zaW4oZGlzdGFuY2UgLyBSKSAqIE1hdGguY29zKGJlYXJpbmdfcmFkKSk7XG4gICAgdmFyIGxvbmdpdHVkZTIgPSBsb25naXR1ZGUxICsgTWF0aC5hdGFuMihNYXRoLnNpbihiZWFyaW5nX3JhZCkgKiBNYXRoLnNpbihkaXN0YW5jZSAvIFIpICogTWF0aC5jb3MobGF0aXR1ZGUxKSxcbiAgICAgICAgTWF0aC5jb3MoZGlzdGFuY2UgLyBSKSAtIE1hdGguc2luKGxhdGl0dWRlMSkgKiBNYXRoLnNpbihsYXRpdHVkZTIpKTtcblxuICAgIHJldHVybiBwb2ludChbdG9EZWcobG9uZ2l0dWRlMiksIHRvRGVnKGxhdGl0dWRlMildKTtcbn07XG5cbmZ1bmN0aW9uIHRvUmFkKGRlZ3JlZSkge1xuICAgIHJldHVybiBkZWdyZWUgKiBNYXRoLlBJIC8gMTgwO1xufVxuXG5mdW5jdGlvbiB0b0RlZyhyYWQpIHtcbiAgICByZXR1cm4gcmFkICogMTgwIC8gTWF0aC5QSTtcbn1cbiIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29uY2F2ZS9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgc3MgPSByZXF1aXJlKCdzaW1wbGUtc3RhdGlzdGljcycpO1xudmFyIGluc2lkZSA9IHJlcXVpcmUoJ3R1cmYtaW5zaWRlJyk7XG5cbi8qKlxuKiBDYWxjdWxhdGVzIHRoZSBzdGFuZGFyZCBkZXZpYXRpb24gdmFsdWUgb2YgYSBmaWVsZCBmb3IgcG9pbnRzIHdpdGhpbiBhIHNldCBvZiBwb2x5Z29ucy5cbipcbiogQG1vZHVsZSB0dXJmL2RldmlhdGlvblxuKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2x5Z29ucyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlc1xuKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2ludHMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzXG4qIEBwYXJhbSB7U3RyaW5nfSBpbkZpZWxkIHRoZSBmaWVsZCBpbiBgcG9pbnRzYCBmcm9tIHdoaWNoIHRvIGFnZ3JlZ2F0ZVxuKiBAcGFyYW0ge1N0cmluZ30gb3V0RmllbGQgdGhlIGZpZWxkIHRvIGFwcGVuZCB0byBgcG9seWdvbnNgIHJlcHJlc2VudGluZyBkZXZpYXRpb25cbiogQHJldHVybiB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgUG9seWdvbiBmZWF0dXJlcyB3aXRoIGFwcGVuZGVkIGZpZWxkIHJlcHJlc2VudGluZyBkZXZpYXRpb25cbiogQGV4YW1wbGVcbiogdmFyIHBvbHlnb25zID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4qICAgdHVyZi5wb2x5Z29uKFtbXG4qICAgICBbLTk3LjgwNzE1OSwgMzAuMjcwMzM1XSxcbiogICAgIFstOTcuODA3MTU5LCAzMC4zNjk5MTNdLFxuKiAgICAgWy05Ny42MTI4MzgsIDMwLjM2OTkxM10sXG4qICAgICBbLTk3LjYxMjgzOCwgMzAuMjcwMzM1XSxcbiogICAgIFstOTcuODA3MTU5LCAzMC4yNzAzMzVdXG4qICAgXV0pLFxuKiAgIHR1cmYucG9seWdvbihbW1xuKiAgICAgWy05Ny44MjU2OTgsIDMwLjE3NTQwNV0sXG4qICAgICBbLTk3LjgyNTY5OCwgMzAuMjY0NDA0XSxcbiogICAgIFstOTcuNjMwNjkxLCAzMC4yNjQ0MDRdLFxuKiAgICAgWy05Ny42MzA2OTEsIDMwLjE3NTQwNV0sXG4qICAgICBbLTk3LjgyNTY5OCwgMzAuMTc1NDA1XVxuKiAgIF1dKVxuKiBdKTtcbiogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuKiAgIHR1cmYucG9pbnQoWy05Ny43MDk2NTUsIDMwLjMxMTI0NV0sXG4qICAgICB7cG9wdWxhdGlvbjogNTAwfSksXG4qICAgdHVyZi5wb2ludChbLTk3Ljc2NjY0NywgMzAuMzQ1MDI4XSxcbiogICAgIHtwb3B1bGF0aW9uOiA0MDB9KSxcbiogICB0dXJmLnBvaW50KFstOTcuNzY1Mjc0LCAzMC4yOTQ2NDZdLFxuKiAgICAge3BvcHVsYXRpb246IDYwMH0pLFxuKiAgIHR1cmYucG9pbnQoWy05Ny43NTM2MDEsIDMwLjIxNjM1NV0sXG4qICAgICB7cG9wdWxhdGlvbjogNTAwfSksXG4qICAgdHVyZi5wb2ludChbLTk3LjY2NzA4MywgMzAuMjA4MDQ3XSxcbiogICB7cG9wdWxhdGlvbjogMjAwfSlcbiogXSk7XG4qXG4qIHZhciBpbkZpZWxkID0gJ3BvcHVsYXRpb24nO1xuKiB2YXIgb3V0RmllbGQgPSAncG9wX2RldmlhdGlvbic7XG4qXG4qIHZhciBkZXZpYXRlZCA9IHR1cmYuZGV2aWF0aW9uKFxuKiAgIHBvbHlnb25zLCBwb2ludHMsIGluRmllbGQsIG91dEZpZWxkKTtcbipcbiogdmFyIHJlc3VsdCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oXG4qICAgcG9pbnRzLmZlYXR1cmVzLmNvbmNhdChkZXZpYXRlZC5mZWF0dXJlcykpO1xuKlxuKiAvLz1yZXN1bHRcbiovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seUZDLCBwdEZDLCBpbkZpZWxkLCBvdXRGaWVsZCwgZG9uZSl7XG4gIHBvbHlGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHBvbHkpe1xuICAgIGlmKCFwb2x5LnByb3BlcnRpZXMpe1xuICAgICAgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgfVxuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBwdEZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocHQpe1xuICAgICAgaWYgKGluc2lkZShwdCwgcG9seSkpIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IHNzLnN0YW5kYXJkX2RldmlhdGlvbih2YWx1ZXMpO1xuICB9KVxuXG4gIHJldHVybiBwb2x5RkM7XG59XG4iLCJ2YXIgaW52YXJpYW50ID0gcmVxdWlyZSgndHVyZi1pbnZhcmlhbnQnKTtcbi8vaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IYXZlcnNpbmVfZm9ybXVsYVxuLy9odHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL2xhdGxvbmcuaHRtbFxuXG4vKipcbiAqIFRha2VzIHR3byB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIGFuZCBjYWxjdWxhdGVzXG4gKiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGVtIGluIGRlZ3Jlc3MsIHJhZGlhbnMsXG4gKiBtaWxlcywgb3Iga2lsb21ldGVycy4gVGhpcyB1c2VzIHRoZVxuICogW0hhdmVyc2luZSBmb3JtdWxhXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hhdmVyc2luZV9mb3JtdWxhKVxuICogdG8gYWNjb3VudCBmb3IgZ2xvYmFsIGN1cnZhdHVyZS5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvZGlzdGFuY2VcbiAqIEBwYXJhbSB7RmVhdHVyZX0gZnJvbSBvcmlnaW4gcG9pbnRcbiAqIEBwYXJhbSB7RmVhdHVyZX0gdG8gZGVzdGluYXRpb24gcG9pbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdW5pdHM9a2lsb21ldGVyc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byBwb2ludHNcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQxID0gdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSk7XG4gKiB2YXIgcG9pbnQyID0gdHVyZi5wb2ludChbLTc1LjUzNCwgMzkuMTIzXSk7XG4gKiB2YXIgdW5pdHMgPSAnbWlsZXMnO1xuICpcbiAqIHZhciBwb2ludHMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtwb2ludDEsIHBvaW50Ml0pO1xuICpcbiAqIC8vPXBvaW50c1xuICpcbiAqIHZhciBkaXN0YW5jZSA9IHR1cmYuZGlzdGFuY2UocG9pbnQxLCBwb2ludDIsIHVuaXRzKTtcbiAqXG4gKiAvLz1kaXN0YW5jZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50MSwgcG9pbnQyLCB1bml0cyl7XG4gIGludmFyaWFudC5mZWF0dXJlT2YocG9pbnQxLCAnUG9pbnQnLCAnZGlzdGFuY2UnKTtcbiAgaW52YXJpYW50LmZlYXR1cmVPZihwb2ludDIsICdQb2ludCcsICdkaXN0YW5jZScpO1xuICB2YXIgY29vcmRpbmF0ZXMxID0gcG9pbnQxLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICB2YXIgY29vcmRpbmF0ZXMyID0gcG9pbnQyLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuXG4gIHZhciBkTGF0ID0gdG9SYWQoY29vcmRpbmF0ZXMyWzFdIC0gY29vcmRpbmF0ZXMxWzFdKTtcbiAgdmFyIGRMb24gPSB0b1JhZChjb29yZGluYXRlczJbMF0gLSBjb29yZGluYXRlczFbMF0pO1xuICB2YXIgbGF0MSA9IHRvUmFkKGNvb3JkaW5hdGVzMVsxXSk7XG4gIHZhciBsYXQyID0gdG9SYWQoY29vcmRpbmF0ZXMyWzFdKTtcbiAgdmFyIGEgPSBNYXRoLnNpbihkTGF0LzIpICogTWF0aC5zaW4oZExhdC8yKSArXG4gICAgICAgICAgTWF0aC5zaW4oZExvbi8yKSAqIE1hdGguc2luKGRMb24vMikgKiBNYXRoLmNvcyhsYXQxKSAqIE1hdGguY29zKGxhdDIpO1xuICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpO1xuXG4gIHZhciBSO1xuICBzd2l0Y2godW5pdHMpe1xuICAgIGNhc2UgJ21pbGVzJzpcbiAgICAgIFIgPSAzOTYwO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAna2lsb21ldGVycyc6XG4gICAgICBSID0gNjM3MztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2RlZ3JlZXMnOlxuICAgICAgUiA9IDU3LjI5NTc3OTU7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdyYWRpYW5zJzpcbiAgICAgIFIgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICBSID0gNjM3MztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gb3B0aW9uIGdpdmVuIHRvIFwidW5pdHNcIicpO1xuICB9XG5cbiAgdmFyIGRpc3RhbmNlID0gUiAqIGM7XG4gIHJldHVybiBkaXN0YW5jZTtcbn07XG5cbmZ1bmN0aW9uIHRvUmFkKGRlZ3JlZSkge1xuICByZXR1cm4gZGVncmVlICogTWF0aC5QSSAvIDE4MDtcbn1cbiIsInZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXMtYXJyYXknKTtcblxubW9kdWxlLmV4cG9ydHMuZ2VvanNvblR5cGUgPSBnZW9qc29uVHlwZTtcbm1vZHVsZS5leHBvcnRzLmNvbGxlY3Rpb25PZiA9IGNvbGxlY3Rpb25PZjtcbm1vZHVsZS5leHBvcnRzLmZlYXR1cmVPZiA9IGZlYXR1cmVPZjtcblxuLyoqXG4gKiBFbmZvcmNlIGV4cGVjdGF0aW9ucyBhYm91dCB0eXBlcyBvZiBHZW9KU09OIG9iamVjdHMgZm9yIFR1cmYuXG4gKlxuICogQGFsaWFzIGdlb2pzb25UeXBlXG4gKiBAcGFyYW0ge0dlb0pTT059IHZhbHVlIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3MgRXJyb3IgaWYgdmFsdWUgaXMgbm90IHRoZSBleHBlY3RlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBnZW9qc29uVHlwZSh2YWx1ZSwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghdHlwZSB8fCAhbmFtZSkgdGhyb3cgbmV3IEVycm9yKCd0eXBlIGFuZCBuYW1lIHJlcXVpcmVkJyk7XG5cbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJzogbXVzdCBiZSBhICcgKyB0eXBlICsgJywgZ2l2ZW4gJyArIHZhbHVlLnR5cGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmZvcmNlIGV4cGVjdGF0aW9ucyBhYm91dCB0eXBlcyBvZiB7QGxpbmsgRmVhdHVyZX0gaW5wdXRzIGZvciBUdXJmLlxuICogSW50ZXJuYWxseSB0aGlzIHVzZXMge0BsaW5rIGdlb2pzb25UeXBlfSB0byBqdWRnZSBnZW9tZXRyeSB0eXBlcy5cbiAqXG4gKiBAYWxpYXMgZmVhdHVyZU9mXG4gKiBAcGFyYW0ge0ZlYXR1cmV9IGZlYXR1cmUgYSBmZWF0dXJlIHdpdGggYW4gZXhwZWN0ZWQgZ2VvbWV0cnkgdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVzIGV4cGVjdGVkIEdlb0pTT04gdHlwZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbmFtZSBvZiBjYWxsaW5nIGZ1bmN0aW9uXG4gKiBAdGhyb3dzIEVycm9yIGlmIHZhbHVlIGlzIG5vdCB0aGUgZXhwZWN0ZWQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZmVhdHVyZU9mKHZhbHVlLCB0eXBlLCBuYW1lKSB7XG4gICAgaWYgKCFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJy5mZWF0dXJlT2YoKSByZXF1aXJlcyBhIG5hbWUnKTtcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLnR5cGUgIT09ICdGZWF0dXJlJyB8fCAhdmFsdWUuZ2VvbWV0cnkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJywgRmVhdHVyZSB3aXRoIGdlb21ldHJ5IHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIGlmICghdmFsdWUuZ2VvbWV0cnkgfHwgdmFsdWUuZ2VvbWV0cnkudHlwZSAhPT0gdHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnOiBtdXN0IGJlIGEgJyArIHR5cGUgKyAnLCBnaXZlbiAnICsgdmFsdWUuZ2VvbWV0cnkudHlwZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuZm9yY2UgZXhwZWN0YXRpb25zIGFib3V0IHR5cGVzIG9mIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gaW5wdXRzIGZvciBUdXJmLlxuICogSW50ZXJuYWxseSB0aGlzIHVzZXMge0BsaW5rIGdlb2pzb25UeXBlfSB0byBqdWRnZSBnZW9tZXRyeSB0eXBlcy5cbiAqXG4gKiBAYWxpYXMgY29sbGVjdGlvbk9mXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBmZWF0dXJlY29sbGVjdGlvbiBhIGZlYXR1cmVjb2xsZWN0aW9uIGZvciB3aGljaCBmZWF0dXJlcyB3aWxsIGJlIGp1ZGdlZFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3MgRXJyb3IgaWYgdmFsdWUgaXMgbm90IHRoZSBleHBlY3RlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBjb2xsZWN0aW9uT2YodmFsdWUsIHR5cGUsIG5hbWUpIHtcbiAgICBpZiAoIW5hbWUpIHRocm93IG5ldyBFcnJvcignLmNvbGxlY3Rpb25PZigpIHJlcXVpcmVzIGEgbmFtZScpO1xuICAgIGlmICghdmFsdWUgfHwgdmFsdWUudHlwZSAhPT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnLCBGZWF0dXJlQ29sbGVjdGlvbiByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBmZWF0dXJlID0gdmFsdWUuZmVhdHVyZXNbaV07XG4gICAgICAgIGlmICghZmVhdHVyZSB8fCBmZWF0dXJlLnR5cGUgIT09ICdGZWF0dXJlJyB8fCAhZmVhdHVyZS5nZW9tZXRyeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJywgRmVhdHVyZSB3aXRoIGdlb21ldHJ5IHJlcXVpcmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmZWF0dXJlLmdlb21ldHJ5IHx8IGZlYXR1cmUuZ2VvbWV0cnkudHlwZSAhPT0gdHlwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJzogbXVzdCBiZSBhICcgKyB0eXBlICsgJywgZ2l2ZW4gJyArIGZlYXR1cmUuZ2VvbWV0cnkudHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJ2YXIgZXh0ZW50ID0gcmVxdWlyZSgndHVyZi1leHRlbnQnKTtcbnZhciBiYm94UG9seWdvbiA9IHJlcXVpcmUoJ3R1cmYtYmJveC1wb2x5Z29uJyk7XG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgRmVhdHVyZX0gb3Ige0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBhbmQgcmV0dXJucyBhIHJlY3Rhbmd1bGFyIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlIHRoYXQgZW5jb21wYXNzZXMgYWxsIHZlcnRpY2VzLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9lbnZlbG9wZVxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gZmMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBhbnkgdHlwZVxuICogQHJldHVybiB7UG9seWdvbn0gYSByZWN0YW5ndWxhciBQb2x5Z29uIGZlYXR1cmUgdGhhdCBlbmNvbXBhc3NlcyBhbGwgdmVydGljZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgZmMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiAqICB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdLCB7bmFtZTogJ0xvY2F0aW9uIEEnfSksXG4gKiAgdHVyZi5wb2ludChbLTc1LjgzMywgMzkuMjg0XSwge25hbWU6ICdMb2NhdGlvbiBCJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS41MzQsIDM5LjEyM10sIHtuYW1lOiAnTG9jYXRpb24gQyd9KVxuICogXSk7XG4gKlxuICogdmFyIGVudmVsb3BlZCA9IHR1cmYuZW52ZWxvcGUoZmMpO1xuICpcbiAqIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFxuICogXHRmYy5mZWF0dXJlcy5jb25jYXQoZW52ZWxvcGVkKSk7XG4gKlxuICogLy89cmVzdWx0XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmZWF0dXJlcywgZG9uZSl7XG4gIHZhciBiYm94ID0gZXh0ZW50KGZlYXR1cmVzKTtcbiAgdmFyIHBvbHkgPSBiYm94UG9seWdvbihiYm94KTtcbiAgcmV0dXJuIHBvbHk7XG59XG4iLCJ2YXIgcG9seWdvbiA9IHJlcXVpcmUoJ3R1cmYtcG9seWdvbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGJib3gpe1xuICB2YXIgbG93TGVmdCA9IFtiYm94WzBdLCBiYm94WzFdXTtcbiAgdmFyIHRvcExlZnQgPSBbYmJveFswXSwgYmJveFszXV07XG4gIHZhciB0b3BSaWdodCA9IFtiYm94WzJdLCBiYm94WzNdXTtcbiAgdmFyIGxvd1JpZ2h0ID0gW2Jib3hbMl0sIGJib3hbMV1dO1xuXG4gIHZhciBwb2x5ID0gcG9seWdvbihbW1xuICAgIGxvd0xlZnQsXG4gICAgbG93UmlnaHQsXG4gICAgdG9wUmlnaHQsXG4gICAgdG9wTGVmdCxcbiAgICBsb3dMZWZ0XG4gIF1dKTtcbiAgcmV0dXJuIHBvbHk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzKXtcbiAgaWYoY29vcmRpbmF0ZXMgPT09IG51bGwpIHJldHVybiBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpXG4gIHZhciBwb2x5Z29uID0geyBcbiAgICBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gICAgXCJnZW9tZXRyeVwiOiB7XG4gICAgICBcInR5cGVcIjogXCJQb2x5Z29uXCIsXG4gICAgICBcImNvb3JkaW5hdGVzXCI6IGNvb3JkaW5hdGVzXG4gICAgfSxcbiAgICBcInByb3BlcnRpZXNcIjogcHJvcGVydGllc1xuICB9XG5cbiAgaWYoIXBvbHlnb24ucHJvcGVydGllcyl7XG4gICAgcG9seWdvbi5wcm9wZXJ0aWVzID0ge31cbiAgfVxuICBcbiAgcmV0dXJuIHBvbHlnb25cbn0iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNlbnRlci9ub2RlX21vZHVsZXMvdHVyZi1leHRlbnQvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jZW50ZXIvbm9kZV9tb2R1bGVzL3R1cmYtZXh0ZW50L25vZGVfbW9kdWxlcy9mbGF0dGVuL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsIi8vIGRlcGVuZCBvbiBqc3RzIGZvciBub3cgaHR0cHM6Ly9naXRodWIuY29tL2Jqb3JuaGFycnRlbGwvanN0cy9ibG9iL21hc3Rlci9leGFtcGxlcy9vdmVybGF5Lmh0bWxcbnZhciBqc3RzID0gcmVxdWlyZSgnanN0cycpO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIHBvbHlnb25zIGJ5IGNsaXBwaW5nIHRoZSBzZWNvbmRcbiAqIHBvbHlnb24gZnJvbSB0aGUgZmlyc3QuXG4gKlxuICogQG1vZHVsZSB0dXJmL2VyYXNlXG4gKiBAcGFyYW0ge1BvbHlnb259IHBvbHkxIGlucHV0IFBvbHlnb24gZmVhdXJlXG4gKiBAcGFyYW0ge1BvbHlnb259IHBvbHkyIFBvbHlnb24gZmVhdHVyZSB0byBlcmFzZSBmcm9tIGBwb2x5MWBcbiAqIEByZXR1cm4ge1BvbHlnb259IGEgUG9seWdvbiBmZWF0dXJlIHNob3dpbmcgdGhlIGFyZWEgb2YgYHBvbHkxYCBleGNsdWRpbmcgdGhlIGFyZWEgb2YgYHBvbHkyYFxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5MSA9IHR1cmYucG9seWdvbihbW1xuICogIFstNDYuNzM4NTg2LCAtMjMuNTk2NzExXSxcbiAqICBbLTQ2LjczODU4NiwgLTIzLjQ1ODIwN10sXG4gKiAgWy00Ni41NjAwNTgsIC0yMy40NTgyMDddLFxuICogIFstNDYuNTYwMDU4LCAtMjMuNTk2NzExXSxcbiAqICBbLTQ2LjczODU4NiwgLTIzLjU5NjcxMV1cbiAqIF1dKTtcbiAqIHBvbHkxLnByb3BlcnRpZXMuZmlsbCA9ICcjMGYwJztcbiAqIHZhciBwb2x5MiA9IHR1cmYucG9seWdvbihbW1xuICogIFstNDYuNjUwMDA5LCAtMjMuNjMxMzE0XSxcbiAqICBbLTQ2LjY1MDAwOSwgLTIzLjUyMzddLFxuICogIFstNDYuNTA5MjQ2LCAtMjMuNTIzN10sXG4gKiAgWy00Ni41MDkyNDYsIC0yMy42MzEzMTRdLFxuICogIFstNDYuNjUwMDA5LCAtMjMuNjMxMzE0XVxuICogXV0pO1xuICogcG9seTIucHJvcGVydGllcy5maWxsID0gJyMwMGYnO1xuICpcbiAqIHZhciBlcmFzZWQgPSB0dXJmLmVyYXNlKHBvbHkxLCBwb2x5Mik7XG4gKiBlcmFzZWQucHJvcGVydGllcy5maWxsID0gJyNmMDAnO1xuICpcbiAqIHZhciBwb2x5Z29ucyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW3BvbHkxLCBwb2x5Ml0pO1xuICpcbiAqIC8vPXBvbHlnb25zXG4gKlxuICogLy89ZXJhc2VkXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwMSwgcDIsIGRvbmUpe1xuICB2YXIgcG9seTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHAxKSk7XG4gIHZhciBwb2x5MiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocDIpKTtcbiAgaWYocG9seTEudHlwZSAhPT0gJ0ZlYXR1cmUnKSB7XG4gICAgcG9seTEgPSB7XG4gICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgIGdlb21ldHJ5OiBwb2x5MVxuICAgIH07XG4gIH1cbiAgaWYocG9seTIudHlwZSAhPT0gJ0ZlYXR1cmUnKSB7XG4gICAgcG9seTIgPSB7XG4gICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgIGdlb21ldHJ5OiBwb2x5MlxuICAgIH07XG4gIH1cblxuICB2YXIgcmVhZGVyID0gbmV3IGpzdHMuaW8uR2VvSlNPTlJlYWRlcigpO1xuICB2YXIgYSA9IHJlYWRlci5yZWFkKEpTT04uc3RyaW5naWZ5KHBvbHkxLmdlb21ldHJ5KSk7XG4gIHZhciBiID0gcmVhZGVyLnJlYWQoSlNPTi5zdHJpbmdpZnkocG9seTIuZ2VvbWV0cnkpKTtcbiAgdmFyIGVyYXNlZCA9IGEuZGlmZmVyZW5jZShiKTtcbiAgdmFyIHBhcnNlciA9IG5ldyBqc3RzLmlvLkdlb0pTT05QYXJzZXIoKTtcbiAgZXJhc2VkID0gcGFyc2VyLndyaXRlKGVyYXNlZCk7XG5cbiAgcG9seTEuZ2VvbWV0cnkgPSBlcmFzZWQ7XG5cbiAgaWYgKHBvbHkxLmdlb21ldHJ5LnR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nICYmIHBvbHkxLmdlb21ldHJ5Lmdlb21ldHJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICBwcm9wZXJ0aWVzOiBwb2x5MS5wcm9wZXJ0aWVzLFxuICAgICAgZ2VvbWV0cnk6IGVyYXNlZFxuICAgIH07XG4gIH1cbn07XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtbWVyZ2Uvbm9kZV9tb2R1bGVzL3R1cmYtdW5pb24vbm9kZV9tb2R1bGVzL2pzdHMvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLW1lcmdlL25vZGVfbW9kdWxlcy90dXJmLXVuaW9uL25vZGVfbW9kdWxlcy9qc3RzL2xpYi9qc3RzLmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsIi8qXG4gIGphdmFzY3JpcHQudXRpbCBpcyBhIHBvcnQgb2Ygc2VsZWN0ZWQgcGFydHMgb2YgamF2YS51dGlsIHRvIEphdmFTY3JpcHQgd2hpY2hcbiAgbWFpbiBwdXJwb3NlIGlzIHRvIGVhc2UgcG9ydGluZyBKYXZhIGNvZGUgdG8gSmF2YVNjcmlwdC5cbiAgXG4gIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG4gIENvcHlyaWdodCAoQykgMjAxMS0yMDE0IGJ5IFRoZSBBdXRob3JzXG5cbiAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gIFRIRSBTT0ZUV0FSRS5cbiovXG47KGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztmdW5jdGlvbiBmKGEsYil7dmFyIGM9YS5zcGxpdChcIi5cIiksZD1lO2NbMF1pbiBkfHwhZC5leGVjU2NyaXB0fHxkLmV4ZWNTY3JpcHQoXCJ2YXIgXCIrY1swXSk7Zm9yKHZhciB0O2MubGVuZ3RoJiYodD1jLnNoaWZ0KCkpOyljLmxlbmd0aHx8dm9pZCAwPT09Yj9kPWRbdF0/ZFt0XTpkW3RdPXt9OmRbdF09Yn1mdW5jdGlvbiBnKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLnE9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLnA9ZnVuY3Rpb24oYSxjLE8pe3ZhciBNPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gYi5wcm90b3R5cGVbY10uYXBwbHkoYSxNKX19O2Z1bmN0aW9uIGgoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhoLEVycm9yKTtmKFwiamF2YXNjcmlwdC51dGlsLkVtcHR5U3RhY2tFeGNlcHRpb25cIixoKTtoLnByb3RvdHlwZS5uYW1lPVwiRW1wdHlTdGFja0V4Y2VwdGlvblwiO2Z1bmN0aW9uIGsoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhrLEVycm9yKTtmKFwiamF2YXNjcmlwdC51dGlsLkluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25cIixrKTtrLnByb3RvdHlwZS5uYW1lPVwiSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvblwiO2Z1bmN0aW9uIGwoKXt9ZihcImphdmFzY3JpcHQudXRpbC5JdGVyYXRvclwiLGwpO2wucHJvdG90eXBlLmhhc05leHQ9bC5wcm90b3R5cGUuYztsLnByb3RvdHlwZS5uZXh0PWwucHJvdG90eXBlLm5leHQ7bC5wcm90b3R5cGUucmVtb3ZlPWwucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiBtKCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuQ29sbGVjdGlvblwiLG0pO2Z1bmN0aW9uIG4oKXt9ZyhuLG0pO2YoXCJqYXZhc2NyaXB0LnV0aWwuTGlzdFwiLG4pO2Z1bmN0aW9uIHAoKXt9ZihcImphdmFzY3JpcHQudXRpbC5NYXBcIixwKTtmdW5jdGlvbiBxKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcocSxFcnJvcik7ZihcImphdmFzY3JpcHQudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uXCIscSk7cS5wcm90b3R5cGUubmFtZT1cIk5vU3VjaEVsZW1lbnRFeGNlcHRpb25cIjtmdW5jdGlvbiByKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcocixFcnJvcik7ci5wcm90b3R5cGUubmFtZT1cIk9wZXJhdGlvbk5vdFN1cHBvcnRlZFwiO2Z1bmN0aW9uIHMoYSl7dGhpcy5hPVtdO2EgaW5zdGFuY2VvZiBtJiZ0aGlzLmUoYSl9ZyhzLG4pO2YoXCJqYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0XCIscyk7cy5wcm90b3R5cGUuYT1udWxsO3MucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXt0aGlzLmEucHVzaChhKTtyZXR1cm4hMH07cy5wcm90b3R5cGUuYWRkPXMucHJvdG90eXBlLmFkZDtzLnByb3RvdHlwZS5lPWZ1bmN0aW9uKGEpe2ZvcihhPWEuZigpO2EuYygpOyl0aGlzLmFkZChhLm5leHQoKSk7cmV0dXJuITB9O3MucHJvdG90eXBlLmFkZEFsbD1zLnByb3RvdHlwZS5lO3MucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYVthXTt0aGlzLmFbYV09YjtyZXR1cm4gY307cy5wcm90b3R5cGUuc2V0PXMucHJvdG90eXBlLnNldDtzLnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMpfTtzLnByb3RvdHlwZS5pdGVyYXRvcj1zLnByb3RvdHlwZS5mO1xucy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe2lmKDA+YXx8YT49dGhpcy5zaXplKCkpdGhyb3cgbmV3IGs7cmV0dXJuIHRoaXMuYVthXX07cy5wcm90b3R5cGUuZ2V0PXMucHJvdG90eXBlLmdldDtzLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RofTtzLnByb3RvdHlwZS5pc0VtcHR5PXMucHJvdG90eXBlLmc7cy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTtzLnByb3RvdHlwZS5zaXplPXMucHJvdG90eXBlLnNpemU7cy5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O3MucHJvdG90eXBlLnRvQXJyYXk9cy5wcm90b3R5cGUuaDtcbnMucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGQ9dGhpcy5hLmxlbmd0aDtjPGQ7YysrKWlmKHRoaXMuYVtjXT09PWEpe3RoaXMuYS5zcGxpY2UoYywxKTtiPSEwO2JyZWFrfXJldHVybiBifTtzLnByb3RvdHlwZS5yZW1vdmU9cy5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIHUoYSl7dGhpcy5qPWF9ZihcIiRqc2NvbXAuc2NvcGUuSXRlcmF0b3JfXCIsdSk7dS5wcm90b3R5cGUuaj1udWxsO3UucHJvdG90eXBlLmI9MDt1LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5iPT09dGhpcy5qLnNpemUoKSl0aHJvdyBuZXcgcTtyZXR1cm4gdGhpcy5qLmdldCh0aGlzLmIrKyl9O3UucHJvdG90eXBlLm5leHQ9dS5wcm90b3R5cGUubmV4dDt1LnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYjx0aGlzLmouc2l6ZSgpPyEwOiExfTt1LnByb3RvdHlwZS5oYXNOZXh0PXUucHJvdG90eXBlLmM7XG51LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O3UucHJvdG90eXBlLnJlbW92ZT11LnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gdigpe31mKFwiamF2YXNjcmlwdC51dGlsLkFycmF5c1wiLHYpO1xudi5zb3J0PWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdLGIsYyxkO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWEuc29ydCgpO2Vsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpYz1hcmd1bWVudHNbMV0sZD1mdW5jdGlvbihhLGIpe3JldHVybiBjLmNvbXBhcmUoYSxiKX0sYS5zb3J0KGQpO2Vsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGI9YS5zbGljZShhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKSxiLnNvcnQoKSxkPWEuc2xpY2UoMCxhcmd1bWVudHNbMV0pLmNvbmNhdChiLGEuc2xpY2UoYXJndW1lbnRzWzJdLGEubGVuZ3RoKSksYS5zcGxpY2UoMCxhLmxlbmd0aCksYj0wO2I8ZC5sZW5ndGg7YisrKWEucHVzaChkW2JdKTtlbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKWZvcihiPWEuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSksYz1hcmd1bWVudHNbM10sZD1mdW5jdGlvbihhLGIpe3JldHVybiBjLmNvbXBhcmUoYSxiKX0sYi5zb3J0KGQpLFxuZD1hLnNsaWNlKDAsYXJndW1lbnRzWzFdKS5jb25jYXQoYixhLnNsaWNlKGFyZ3VtZW50c1syXSxhLmxlbmd0aCkpLGEuc3BsaWNlKDAsYS5sZW5ndGgpLGI9MDtiPGQubGVuZ3RoO2IrKylhLnB1c2goZFtiXSl9O3YuYXNMaXN0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgcyxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIuYWRkKGFbY10pO3JldHVybiBifTtmdW5jdGlvbiB3KCl7dGhpcy5pPXt9fWcodyxwKTtmKFwiamF2YXNjcmlwdC51dGlsLkhhc2hNYXBcIix3KTt3LnByb3RvdHlwZS5pPW51bGw7dy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlbYV18fG51bGx9O3cucHJvdG90eXBlLmdldD13LnByb3RvdHlwZS5nZXQ7dy5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaVthXT1ifTt3LnByb3RvdHlwZS5wdXQ9dy5wcm90b3R5cGUucHV0O3cucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcyxiO2ZvcihiIGluIHRoaXMuaSl0aGlzLmkuaGFzT3duUHJvcGVydHkoYikmJmEuYWRkKHRoaXMuaVtiXSk7cmV0dXJuIGF9O3cucHJvdG90eXBlLnZhbHVlcz13LnByb3RvdHlwZS5tO3cucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tKCkuc2l6ZSgpfTt3LnByb3RvdHlwZS5zaXplPXcucHJvdG90eXBlLnNpemU7ZnVuY3Rpb24geCgpe31nKHgsbSk7ZihcImphdmFzY3JpcHQudXRpbC5TZXRcIix4KTtmdW5jdGlvbiB5KGEpe3RoaXMuYT1bXTthIGluc3RhbmNlb2YgbSYmdGhpcy5lKGEpfWcoeSx4KTtmKFwiamF2YXNjcmlwdC51dGlsLkhhc2hTZXRcIix5KTt5LnByb3RvdHlwZS5hPW51bGw7eS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspaWYodGhpcy5hW2JdPT09YSlyZXR1cm4hMDtyZXR1cm4hMX07eS5wcm90b3R5cGUuY29udGFpbnM9eS5wcm90b3R5cGUuY29udGFpbnM7eS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY29udGFpbnMoYSkpcmV0dXJuITE7dGhpcy5hLnB1c2goYSk7cmV0dXJuITB9O3kucHJvdG90eXBlLmFkZD15LnByb3RvdHlwZS5hZGQ7eS5wcm90b3R5cGUuZT1mdW5jdGlvbihhKXtmb3IoYT1hLmYoKTthLmMoKTspdGhpcy5hZGQoYS5uZXh0KCkpO3JldHVybiEwfTt5LnByb3RvdHlwZS5hZGRBbGw9eS5wcm90b3R5cGUuZTtcbnkucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307eS5wcm90b3R5cGUucmVtb3ZlPXkucHJvdG90eXBlLnJlbW92ZTt5LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O3kucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGh9O3kucHJvdG90eXBlLmlzRW1wdHk9eS5wcm90b3R5cGUuZzt5LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07eS5wcm90b3R5cGUudG9BcnJheT15LnByb3RvdHlwZS5oO3kucHJvdG90eXBlLmY9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHoodGhpcyl9O3kucHJvdG90eXBlLml0ZXJhdG9yPXkucHJvdG90eXBlLmY7ZnVuY3Rpb24geihhKXt0aGlzLms9YX1mKFwiJGpzY29tcC5zY29wZS5JdGVyYXRvcl8kMVwiLHopO3oucHJvdG90eXBlLms9bnVsbDtcbnoucHJvdG90eXBlLmI9MDt6LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5iPT09dGhpcy5rLnNpemUoKSl0aHJvdyBuZXcgcTtyZXR1cm4gdGhpcy5rLmFbdGhpcy5iKytdfTt6LnByb3RvdHlwZS5uZXh0PXoucHJvdG90eXBlLm5leHQ7ei5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmI8dGhpcy5rLnNpemUoKT8hMDohMX07ei5wcm90b3R5cGUuaGFzTmV4dD16LnByb3RvdHlwZS5jO3oucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307ei5wcm90b3R5cGUucmVtb3ZlPXoucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiBBKCl7fWcoQSxwKTtmKFwiamF2YXNjcmlwdC51dGlsLlNvcnRlZE1hcFwiLEEpO2Z1bmN0aW9uIEIoKXt9ZyhCLHgpO2YoXCJqYXZhc2NyaXB0LnV0aWwuU29ydGVkU2V0XCIsQik7ZnVuY3Rpb24gQygpe3RoaXMuYT1bXX1nKEMsbik7ZihcImphdmFzY3JpcHQudXRpbC5TdGFja1wiLEMpO0MucHJvdG90eXBlLmE9bnVsbDtDLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGEpe3RoaXMuYS5wdXNoKGEpO3JldHVybiBhfTtDLnByb3RvdHlwZS5wdXNoPUMucHJvdG90eXBlLnB1c2g7Qy5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuYS5sZW5ndGgpdGhyb3cgbmV3IGg7cmV0dXJuIHRoaXMuYS5wb3AoKX07Qy5wcm90b3R5cGUucG9wPUMucHJvdG90eXBlLnBvcDtDLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuYS5sZW5ndGgpdGhyb3cgbmV3IGg7cmV0dXJuIHRoaXMuYVt0aGlzLmEubGVuZ3RoLTFdfTtDLnByb3RvdHlwZS5wZWVrPUMucHJvdG90eXBlLm87Qy5wcm90b3R5cGUuZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGg/ITA6ITF9O0MucHJvdG90eXBlLmVtcHR5PUMucHJvdG90eXBlLmVtcHR5O1xuQy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVtcHR5KCl9O0MucHJvdG90eXBlLmlzRW1wdHk9Qy5wcm90b3R5cGUuZztDLnByb3RvdHlwZS5zZWFyY2g9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYS5pbmRleE9mKGEpfTtDLnByb3RvdHlwZS5zZWFyY2g9Qy5wcm90b3R5cGUuc2VhcmNoO0MucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07Qy5wcm90b3R5cGUuc2l6ZT1DLnByb3RvdHlwZS5zaXplO0MucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTtDLnByb3RvdHlwZS50b0FycmF5PUMucHJvdG90eXBlLmg7ZnVuY3Rpb24gRChhKXtyZXR1cm4gbnVsbD09YT9udWxsOmEucGFyZW50fWZ1bmN0aW9uIEUoYSxiKXtudWxsIT09YSYmKGEuY29sb3I9Yil9ZnVuY3Rpb24gRihhKXtyZXR1cm4gbnVsbD09YT9udWxsOmEubGVmdH1mdW5jdGlvbiBHKGEpe3JldHVybiBudWxsPT1hP251bGw6YS5yaWdodH1mdW5jdGlvbiBIKCl7dGhpcy5kPW51bGw7dGhpcy5uPTB9ZyhILEEpO2YoXCJqYXZhc2NyaXB0LnV0aWwuVHJlZU1hcFwiLEgpO0gucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5kO251bGwhPT1iOyl7dmFyIGM9YS5jb21wYXJlVG8oYi5rZXkpO2lmKDA+YyliPWIubGVmdDtlbHNlIGlmKDA8YyliPWIucmlnaHQ7ZWxzZSByZXR1cm4gYi52YWx1ZX1yZXR1cm4gbnVsbH07SC5wcm90b3R5cGUuZ2V0PUgucHJvdG90eXBlLmdldDtcbkgucHJvdG90eXBlLnB1dD1mdW5jdGlvbihhLGIpe2lmKG51bGw9PT10aGlzLmQpcmV0dXJuIHRoaXMuZD17a2V5OmEsdmFsdWU6YixsZWZ0Om51bGwscmlnaHQ6bnVsbCxwYXJlbnQ6bnVsbCxjb2xvcjowfSx0aGlzLm49MSxudWxsO3ZhciBjPXRoaXMuZCxkLHQ7ZG8gaWYoZD1jLHQ9YS5jb21wYXJlVG8oYy5rZXkpLDA+dCljPWMubGVmdDtlbHNlIGlmKDA8dCljPWMucmlnaHQ7ZWxzZSByZXR1cm4gZD1jLnZhbHVlLGMudmFsdWU9YixkO3doaWxlKG51bGwhPT1jKTtjPXtrZXk6YSxsZWZ0Om51bGwscmlnaHQ6bnVsbCx2YWx1ZTpiLHBhcmVudDpkLGNvbG9yOjB9OzA+dD9kLmxlZnQ9YzpkLnJpZ2h0PWM7Zm9yKGMuY29sb3I9MTtudWxsIT1jJiZjIT10aGlzLmQmJjE9PWMucGFyZW50LmNvbG9yOylEKGMpPT1GKEQoRChjKSkpPyhkPUcoRChEKGMpKSksMT09KG51bGw9PWQ/MDpkLmNvbG9yKT8oRShEKGMpLDApLEUoZCwwKSxFKEQoRChjKSksMSksYz1EKEQoYykpKTooYz09RyhEKGMpKSYmXG4oYz1EKGMpLEkodGhpcyxjKSksRShEKGMpLDApLEUoRChEKGMpKSwxKSxKKHRoaXMsRChEKGMpKSkpKTooZD1GKEQoRChjKSkpLDE9PShudWxsPT1kPzA6ZC5jb2xvcik/KEUoRChjKSwwKSxFKGQsMCksRShEKEQoYykpLDEpLGM9RChEKGMpKSk6KGM9PUYoRChjKSkmJihjPUQoYyksSih0aGlzLGMpKSxFKEQoYyksMCksRShEKEQoYykpLDEpLEkodGhpcyxEKEQoYykpKSkpO3RoaXMuZC5jb2xvcj0wO3RoaXMubisrO3JldHVybiBudWxsfTtILnByb3RvdHlwZS5wdXQ9SC5wcm90b3R5cGUucHV0O0gucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcyxiO2I9dGhpcy5kO2lmKG51bGwhPWIpZm9yKDtudWxsIT1iLmxlZnQ7KWI9Yi5sZWZ0O2lmKG51bGwhPT1iKWZvcihhLmFkZChiLnZhbHVlKTtudWxsIT09KGI9SyhiKSk7KWEuYWRkKGIudmFsdWUpO3JldHVybiBhfTtILnByb3RvdHlwZS52YWx1ZXM9SC5wcm90b3R5cGUubTtcbmZ1bmN0aW9uIEkoYSxiKXtpZihudWxsIT1iKXt2YXIgYz1iLnJpZ2h0O2IucmlnaHQ9Yy5sZWZ0O251bGwhPWMubGVmdCYmKGMubGVmdC5wYXJlbnQ9Yik7Yy5wYXJlbnQ9Yi5wYXJlbnQ7bnVsbD09Yi5wYXJlbnQ/YS5kPWM6Yi5wYXJlbnQubGVmdD09Yj9iLnBhcmVudC5sZWZ0PWM6Yi5wYXJlbnQucmlnaHQ9YztjLmxlZnQ9YjtiLnBhcmVudD1jfX1mdW5jdGlvbiBKKGEsYil7aWYobnVsbCE9Yil7dmFyIGM9Yi5sZWZ0O2IubGVmdD1jLnJpZ2h0O251bGwhPWMucmlnaHQmJihjLnJpZ2h0LnBhcmVudD1iKTtjLnBhcmVudD1iLnBhcmVudDtudWxsPT1iLnBhcmVudD9hLmQ9YzpiLnBhcmVudC5yaWdodD09Yj9iLnBhcmVudC5yaWdodD1jOmIucGFyZW50LmxlZnQ9YztjLnJpZ2h0PWI7Yi5wYXJlbnQ9Y319XG5mdW5jdGlvbiBLKGEpe2lmKG51bGw9PT1hKXJldHVybiBudWxsO2lmKG51bGwhPT1hLnJpZ2h0KWZvcih2YXIgYj1hLnJpZ2h0O251bGwhPT1iLmxlZnQ7KWI9Yi5sZWZ0O2Vsc2UgZm9yKGI9YS5wYXJlbnQ7bnVsbCE9PWImJmE9PT1iLnJpZ2h0OylhPWIsYj1iLnBhcmVudDtyZXR1cm4gYn1ILnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubn07SC5wcm90b3R5cGUuc2l6ZT1ILnByb3RvdHlwZS5zaXplO2Z1bmN0aW9uIEwoYSl7dGhpcy5hPVtdO2EgaW5zdGFuY2VvZiBtJiZ0aGlzLmUoYSl9ZyhMLEIpO2YoXCJqYXZhc2NyaXB0LnV0aWwuVHJlZVNldFwiLEwpO0wucHJvdG90eXBlLmE9bnVsbDtMLnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylpZigwPT09dGhpcy5hW2JdLmNvbXBhcmVUbyhhKSlyZXR1cm4hMDtyZXR1cm4hMX07TC5wcm90b3R5cGUuY29udGFpbnM9TC5wcm90b3R5cGUuY29udGFpbnM7TC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY29udGFpbnMoYSkpcmV0dXJuITE7Zm9yKHZhciBiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspaWYoMT09PXRoaXMuYVtiXS5jb21wYXJlVG8oYSkpcmV0dXJuIHRoaXMuYS5zcGxpY2UoYiwwLGEpLCEwO3RoaXMuYS5wdXNoKGEpO3JldHVybiEwfTtMLnByb3RvdHlwZS5hZGQ9TC5wcm90b3R5cGUuYWRkO1xuTC5wcm90b3R5cGUuZT1mdW5jdGlvbihhKXtmb3IoYT1hLmYoKTthLmMoKTspdGhpcy5hZGQoYS5uZXh0KCkpO3JldHVybiEwfTtMLnByb3RvdHlwZS5hZGRBbGw9TC5wcm90b3R5cGUuZTtMLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O0wucHJvdG90eXBlLnJlbW92ZT1MLnByb3RvdHlwZS5yZW1vdmU7TC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTtMLnByb3RvdHlwZS5zaXplPUwucHJvdG90eXBlLnNpemU7TC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aH07TC5wcm90b3R5cGUuaXNFbXB0eT1MLnByb3RvdHlwZS5nO0wucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTtMLnByb3RvdHlwZS50b0FycmF5PUwucHJvdG90eXBlLmg7TC5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3JldHVybiBuZXcgTih0aGlzKX07XG5MLnByb3RvdHlwZS5pdGVyYXRvcj1MLnByb3RvdHlwZS5mO2Z1bmN0aW9uIE4oYSl7dGhpcy5sPWF9ZihcIiRqc2NvbXAuc2NvcGUuSXRlcmF0b3JfJDJcIixOKTtOLnByb3RvdHlwZS5sPW51bGw7Ti5wcm90b3R5cGUuYj0wO04ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmI9PT10aGlzLmwuc2l6ZSgpKXRocm93IG5ldyBxO3JldHVybiB0aGlzLmwuYVt0aGlzLmIrK119O04ucHJvdG90eXBlLm5leHQ9Ti5wcm90b3R5cGUubmV4dDtOLnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYjx0aGlzLmwuc2l6ZSgpPyEwOiExfTtOLnByb3RvdHlwZS5oYXNOZXh0PU4ucHJvdG90eXBlLmM7Ti5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTtOLnByb3RvdHlwZS5yZW1vdmU9Ti5wcm90b3R5cGUucmVtb3ZlO1widW5kZWZpbmVkXCIhPT10eXBlb2YgZ2xvYmFsJiYoZ2xvYmFsLmphdmFzY3JpcHQ9e30sZ2xvYmFsLmphdmFzY3JpcHQudXRpbD17fSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdD1zLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuQXJyYXlzPXYsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Db2xsZWN0aW9uPW0sZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5FbXB0eVN0YWNrRXhjZXB0aW9uPWgsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5IYXNoTWFwPXcsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5IYXNoU2V0PXksZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5JbmRleE91dE9mQm91bmRzRXhjZXB0aW9uPWssZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5JdGVyYXRvcj1sLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuTGlzdD1uLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuTWFwPXAsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uPXEsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5PcGVyYXRpb25Ob3RTdXBwb3J0ZWQ9XG5yLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU2V0PXgsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Tb3J0ZWRNYXA9QSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlNvcnRlZFNldD1CLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU3RhY2s9QyxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlRyZWVNYXA9SCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlRyZWVTZXQ9TCk7fSkuY2FsbCh0aGlzKTtcbiIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtY29uY2F2ZS9ub2RlX21vZHVsZXMvdHVyZi1tZXJnZS9ub2RlX21vZHVsZXMvdHVyZi11bmlvbi9ub2RlX21vZHVsZXMvanN0cy9ub2RlX21vZHVsZXMvamF2YXNjcmlwdC51dGlsL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsInZhciBmZWF0dXJlQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24nKTtcbnZhciBlYWNoID0gcmVxdWlyZSgndHVyZi1tZXRhJykuY29vcmRFYWNoO1xudmFyIHBvaW50ID0gcmVxdWlyZSgndHVyZi1wb2ludCcpO1xuXG4vKipcbiAqIFRha2VzIGFueSB7QGxpbmsgR2VvSlNPTn0gb2JqZWN0IGFuZCByZXR1cm4gYWxsIHBvc2l0aW9ucyBhc1xuICogYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXMuXG4gKlxuICogQG1vZHVsZSB0dXJmL2V4cGxvZGVcbiAqIEBwYXJhbSB7R2VvSlNPTn0gaW5wdXQgaW5wdXQgZmVhdHVyZXNcbiAqIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXMgcmVwcmVzZW50aW5nIHRoZSBleHBsb2RlZCBpbnB1dCBmZWF0dXJlc1xuICogQHRocm93cyB7RXJyb3J9IGlmIGl0IGVuY291bnRlcnMgYW4gdW5rbm93biBnZW9tZXRyeSB0eXBlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHkgPSB7XG4gKiAgIFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAqICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICogICBcImdlb21ldHJ5XCI6IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2x5Z29uXCIsXG4gKiAgICAgXCJjb29yZGluYXRlc1wiOiBbW1xuICogICAgICAgWzE3Ny40MzQ2OTIsIC0xNy43NzUxN10sXG4gKiAgICAgICBbMTc3LjQwMjA3NiwgLTE3Ljc3OTA5M10sXG4gKiAgICAgICBbMTc3LjM4MDc5LCAtMTcuODAzOTM3XSxcbiAqICAgICAgIFsxNzcuNDAyNDIsIC0xNy44MjYxNjRdLFxuICogICAgICAgWzE3Ny40Mzg0NjgsIC0xNy44MjQ4NTddLFxuICogICAgICAgWzE3Ny40NTQ5NDgsIC0xNy43OTY3NDZdLFxuICogICAgICAgWzE3Ny40MzQ2OTIsIC0xNy43NzUxN11cbiAqICAgICBdXVxuICogICB9XG4gKiB9O1xuICpcbiAqIHZhciBwb2ludHMgPSB0dXJmLmV4cGxvZGUocG9seSk7XG4gKlxuICogLy89cG9seVxuICpcbiAqIC8vPXBvaW50c1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gIHZhciBwb2ludHMgPSBbXTtcbiAgZWFjaChsYXllciwgZnVuY3Rpb24oY29vcmQpIHtcbiAgICBwb2ludHMucHVzaChwb2ludChjb29yZCkpO1xuICB9KTtcbiAgcmV0dXJuIGZlYXR1cmVDb2xsZWN0aW9uKHBvaW50cyk7XG59O1xuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1idWZmZXIvbm9kZV9tb2R1bGVzL3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24vaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb252ZXgvbm9kZV9tb2R1bGVzL3R1cmYtbWV0YS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgZWFjaCA9IHJlcXVpcmUoJ3R1cmYtbWV0YScpLmNvb3JkRWFjaDtcblxuLyoqXG4gKiBUYWtlcyBhbnkge0BsaW5rIEdlb0pTT059IG9iamVjdCwgY2FsY3VsYXRlcyB0aGUgZXh0ZW50IG9mIGFsbCBpbnB1dCBmZWF0dXJlcywgYW5kIHJldHVybnMgYSBib3VuZGluZyBib3guXG4gKlxuICogQG1vZHVsZSB0dXJmL2V4dGVudFxuICogQHBhcmFtIHtHZW9KU09OfSBpbnB1dCBhbnkgdmFsaWQgR2VvSlNPTiBPYmplY3RcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IHRoZSBib3VuZGluZyBib3ggb2YgYGlucHV0YCBnaXZlblxuICogYXMgYW4gYXJyYXkgaW4gV1NFTiBvcmRlciAod2VzdCwgc291dGgsIGVhc3QsIG5vcnRoKVxuICogQGV4YW1wbGVcbiAqIHZhciBpbnB1dCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogIHR1cmYucG9pbnQoWzExNC4xNzUzMjksIDIyLjI1MjRdKSxcbiAqICB0dXJmLnBvaW50KFsxMTQuMTcwMDA3LCAyMi4yNjc5NjldKSxcbiAqICB0dXJmLnBvaW50KFsxMTQuMjAwNjQ5LCAyMi4yNzQ2NDFdKSxcbiAqICB0dXJmLnBvaW50KFsxMTQuMTg2NzQ0LCAyMi4yNjU3NDVdKVxuICogXSk7XG4gKlxuICogdmFyIGJib3ggPSB0dXJmLmV4dGVudChpbnB1dCk7XG4gKlxuICogdmFyIGJib3hQb2x5Z29uID0gdHVyZi5iYm94UG9seWdvbihiYm94KTtcbiAqIGJib3hQb2x5Z29uLnByb3BlcnRpZXMuZmlsbCA9ICcjMDBmJztcbiAqXG4gKiB2YXIgcmVzdWx0ID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihcbiAqICBpbnB1dC5mZWF0dXJlcy5jb25jYXQoYmJveFBvbHlnb24pKTtcbiAqXG4gKiAvLz1yZXN1bHRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsYXllcikge1xuICAgIHZhciBleHRlbnQgPSBbSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eV07XG4gICAgZWFjaChsYXllciwgZnVuY3Rpb24oY29vcmQpIHtcbiAgICAgIGlmIChleHRlbnRbMF0gPiBjb29yZFswXSkgZXh0ZW50WzBdID0gY29vcmRbMF07XG4gICAgICBpZiAoZXh0ZW50WzFdID4gY29vcmRbMV0pIGV4dGVudFsxXSA9IGNvb3JkWzFdO1xuICAgICAgaWYgKGV4dGVudFsyXSA8IGNvb3JkWzBdKSBleHRlbnRbMl0gPSBjb29yZFswXTtcbiAgICAgIGlmIChleHRlbnRbM10gPCBjb29yZFsxXSkgZXh0ZW50WzNdID0gY29vcmRbMV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGV4dGVudDtcbn07XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWV4cGxvZGUvbm9kZV9tb2R1bGVzL3R1cmYtbWV0YS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCIvKipcbiAqIFRha2VzIG9uZSBvciBtb3JlIHtAbGluayBGZWF0dXJlfEZlYXR1cmVzfSBhbmQgY3JlYXRlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn1cbiAqXG4gKiBAbW9kdWxlIHR1cmYvZmVhdHVyZWNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7RmVhdHVyZX0gZmVhdHVyZXMgaW5wdXQgRmVhdHVyZXNcbiAqIEByZXR1cm5zIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBpbnB1dCBmZWF0dXJlc1xuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IFtcbiAqICB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdLCB7bmFtZTogJ0xvY2F0aW9uIEEnfSksXG4gKiAgdHVyZi5wb2ludChbLTc1LjgzMywgMzkuMjg0XSwge25hbWU6ICdMb2NhdGlvbiBCJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS41MzQsIDM5LjEyM10sIHtuYW1lOiAnTG9jYXRpb24gQyd9KVxuICogXTtcbiAqXG4gKiB2YXIgZmMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKGZlYXR1cmVzKTtcbiAqXG4gKiAvLz1mY1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZlYXR1cmVzKXtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXG4gICAgZmVhdHVyZXM6IGZlYXR1cmVzXG4gIH07XG59O1xuIiwidmFyIGZlYXR1cmVDb2xsZWN0aW9uID0gcmVxdWlyZSgndHVyZi1mZWF0dXJlY29sbGVjdGlvbicpO1xuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBhbmQgZmlsdGVycyBpdCBieSBhIGdpdmVuIHByb3BlcnR5IGFuZCB2YWx1ZVxuICpcbiAqIEBtb2R1bGUgdHVyZi9maWx0ZXJcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IGZlYXR1cmVzIGlucHV0IEZlYXR1cmVDb2xsZWN0aW9uIG9mIGFueSB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9wZXJ0eSBvbiB3aGljaCB0byBmaWx0ZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSB0aGUgdmFsdWUgb2YgdGhhdCBwcm9wZXJ0eSBvbiB3aGljaCB0byBmaWx0ZXJcbiAqIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIGZpbHRlcmVkIGNvbGxlY3Rpb24gd2l0aCBvbmx5IGZlYXR1cmVzIHRoYXQgbWF0Y2ggaW5wdXQgYGtleWAgYW5kIGB2YWx1ZWBcbiAqIEBleGFtcGxlXG4gKiB2YXIgZmVhdHVyZXMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiAqICB0dXJmLnBvaW50KFstNzIuNTgxNzc3LCA0NC4yNjA4NzVdLCB7c3BlY2llczogJ29hayd9KSxcbiAqICB0dXJmLnBvaW50KFstNzIuNTcwMDE4LCA0NC4yNjA2OTFdLCB7c3BlY2llczogJ2JpcmNoJ30pLFxuICogIHR1cmYucG9pbnQoWy03Mi41NzYyODQsIDQ0LjI1NzkyNV0sIHtzcGVjaWVzOiAnb2FrJ30pLFxuICogIHR1cmYucG9pbnQoWy03Mi41NjkxNiwgNDQuMjU0NjA1XSwge3NwZWNpZXM6ICdyZWR3b29kJ30pLFxuICogIHR1cmYucG9pbnQoWy03Mi41ODE2OTEsIDQ0LjI0ODU4XSwge3NwZWNpZXM6ICdtYXBsZSd9KSxcbiAqICB0dXJmLnBvaW50KFstNzIuNTgzODM3LCA0NC4yNTU3NzNdLCB7c3BlY2llczogJ29hayd9KVxuICogXSk7XG4gKlxuICogdmFyIGtleSA9ICdzcGVjaWVzJztcbiAqIHZhciB2YWx1ZSA9ICdvYWsnO1xuICpcbiAqIHZhciBmaWx0ZXJlZCA9IHR1cmYuZmlsdGVyKGZlYXR1cmVzLCBrZXksIHZhbHVlKTtcbiAqXG4gKiAvLz1mZWF0dXJlc1xuICpcbiAqIC8vPWZpbHRlcmVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY29sbGVjdGlvbiwga2V5LCB2YWwpIHtcbiAgdmFyIG5ld0ZDID0gZmVhdHVyZUNvbGxlY3Rpb24oW10pO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmKGNvbGxlY3Rpb24uZmVhdHVyZXNbaV0ucHJvcGVydGllc1trZXldID09PSB2YWwpIHtcbiAgICAgIG5ld0ZDLmZlYXR1cmVzLnB1c2goY29sbGVjdGlvbi5mZWF0dXJlc1tpXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdGQztcbn07XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWV4cGxvZGUvbm9kZV9tb2R1bGVzL3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24vaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiLyoqXG4gKiBUYWtlcyBhIHtAbGluayBHZW9KU09OfSBvYmplY3Qgb2YgYW55IHR5cGUgYW5kIGZsaXBzIGFsbCBvZiBpdHMgY29vcmRpbmF0ZXNcbiAqIGZyb20gYFt4LCB5XWAgdG8gYFt5LCB4XWAuXG4gKlxuICogQG1vZHVsZSB0dXJmL2ZsaXBcbiAqIEBwYXJhbSB7R2VvSlNPTn0gaW5wdXQgaW5wdXQgR2VvSlNPTiBvYmplY3RcbiAqIEByZXR1cm5zIHtHZW9KU09OfSBhIEdlb0pTT04gb2JqZWN0IG9mIHRoZSBzYW1lIHR5cGUgYXMgYGlucHV0YCB3aXRoIGZsaXBwZWQgY29vcmRpbmF0ZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgc2F1ZGlBcmFiaWEgPSB0dXJmLnBvaW50KFsyMC41NjY0MDYsIDQzLjQyMTAwOF0pO1xuICpcbiAqIC8vPXNhdWRpQXJhYmlhXG4gKlxuICogdmFyIHNlcmJpYSA9IHR1cmYuZmxpcChzYXVkaUFyYWJpYSk7XG4gKlxuICogLy89c2VyYmlhXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZmxpcEFueTtcblxuZnVuY3Rpb24gZmxpcEFueShfKSB7XG4gICAgLy8gZW5zdXJlIHRoYXQgd2UgZG9uJ3QgbW9kaWZ5IGZlYXR1cmVzIGluLXBsYWNlIGFuZCBjaGFuZ2VzIHRvIHRoZVxuICAgIC8vIG91dHB1dCBkbyBub3QgY2hhbmdlIHRoZSBwcmV2aW91cyBmZWF0dXJlLCBpbmNsdWRpbmcgY2hhbmdlcyB0byBuZXN0ZWRcbiAgICAvLyBwcm9wZXJ0aWVzLlxuICAgIHZhciBpbnB1dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoXykpO1xuICAgIHN3aXRjaCAoaW5wdXQudHlwZSkge1xuICAgICAgICBjYXNlICdGZWF0dXJlQ29sbGVjdGlvbic6XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0LmZlYXR1cmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGZsaXBHZW9tZXRyeShpbnB1dC5mZWF0dXJlc1tpXS5nZW9tZXRyeSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIGNhc2UgJ0ZlYXR1cmUnOlxuICAgICAgICAgICAgZmxpcEdlb21ldHJ5KGlucHV0Lmdlb21ldHJ5KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGZsaXBHZW9tZXRyeShpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmbGlwR2VvbWV0cnkoZ2VvbWV0cnkpIHtcbiAgICB2YXIgY29vcmRzID0gZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgc3dpdGNoKGdlb21ldHJ5LnR5cGUpIHtcbiAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgZmxpcDAoY29vcmRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdMaW5lU3RyaW5nJzpcbiAgICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICBmbGlwMShjb29yZHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgZmxpcDIoY29vcmRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdNdWx0aVBvbHlnb24nOlxuICAgICAgICBmbGlwMyhjb29yZHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0dlb21ldHJ5Q29sbGVjdGlvbic6XG4gICAgICAgIGdlb21ldHJ5Lmdlb21ldHJpZXMuZm9yRWFjaChmbGlwR2VvbWV0cnkpO1xuICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZsaXAwKGNvb3JkKSB7XG4gICAgY29vcmQucmV2ZXJzZSgpO1xufVxuXG5mdW5jdGlvbiBmbGlwMShjb29yZHMpIHtcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykgY29vcmRzW2ldLnJldmVyc2UoKTtcbn1cblxuZnVuY3Rpb24gZmxpcDIoY29vcmRzKSB7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspXG4gICAgZm9yKHZhciBqID0gMDsgaiA8IGNvb3Jkc1tpXS5sZW5ndGg7IGorKykgY29vcmRzW2ldW2pdLnJldmVyc2UoKTtcbn1cblxuZnVuY3Rpb24gZmxpcDMoY29vcmRzKSB7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspXG4gICAgZm9yKHZhciBqID0gMDsgaiA8IGNvb3Jkc1tpXS5sZW5ndGg7IGorKylcbiAgICAgIGZvcih2YXIgayA9IDA7IGsgPCBjb29yZHNbaV1bal0ubGVuZ3RoOyBrKyspIGNvb3Jkc1tpXVtqXVtrXS5yZXZlcnNlKCk7XG59XG4iLCJ2YXIgcG9pbnQgPSByZXF1aXJlKCd0dXJmLXBvaW50Jyk7XG5cbi8qKlxuICogVGFrZXMgYSBib3VuZGluZyBib3ggYW5kIGEgY2VsbCBkZXB0aCBhbmQgcmV0dXJucyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlcyBpbiBhIGdyaWQuXG4gKlxuICogQG1vZHVsZSB0dXJmL2dyaWRcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZXh0ZW50IGV4dGVudCBpbiBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV0gb3JkZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkZXB0aCBob3cgbWFueSBjZWxscyB0byBvdXRwdXRcbiAqIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBncmlkIGFzIEZlYXR1cmVDb2xsZWN0aW9uIHdpdGgge0BsaW5rIFBvaW50fSBmZWF0dXJlc1xuICogQGV4YW1wbGVcbiAqIHZhciBleHRlbnQgPSBbLTcwLjgyMzM2NCwgLTMzLjU1Mzk4NCwgLTcwLjQ3MzE3NSwgLTMzLjMwMjk4Nl07XG4gKiB2YXIgZGVwdGggPSAxMDtcbiAqXG4gKiB2YXIgZ3JpZCA9IHR1cmYuZ3JpZChleHRlbnQsIGRlcHRoKTtcbiAqXG4gKiAvLz1ncmlkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXh0ZW50cywgZGVwdGgpIHtcbiAgdmFyIHhtaW4gPSBleHRlbnRzWzBdO1xuICB2YXIgeW1pbiA9IGV4dGVudHNbMV07XG4gIHZhciB4bWF4ID0gZXh0ZW50c1syXTtcbiAgdmFyIHltYXggPSBleHRlbnRzWzNdO1xuICB2YXIgaW50ZXJ2YWwgPSAoeG1heCAtIHhtaW4pIC8gZGVwdGg7XG4gIHZhciBjb29yZHMgPSBbXTtcbiAgdmFyIGZjID0ge1xuICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgZmVhdHVyZXM6IFtdXG4gIH07XG5cbiAgZm9yICh2YXIgeD0wOyB4PD1kZXB0aDsgeCsrKXtcbiAgICBmb3IgKHZhciB5PTA7eTw9ZGVwdGg7IHkrKyl7XG4gICAgICBmYy5mZWF0dXJlcy5wdXNoKHBvaW50KFsoeCAqIGludGVydmFsKSArIHhtaW4sICh5ICogaW50ZXJ2YWwpICsgeW1pbl0pKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZjO1xufVxuIiwidmFyIHBvbHlnb24gPSByZXF1aXJlKCd0dXJmLXBvbHlnb24nKTtcblxuLyoqXG4gKiBUYWtlcyBhIGJvdW5kaW5nIGJveCBhbmQgYSBjZWxsIHNpemUgaW4gZGVncmVlcyBhbmQgcmV0dXJucyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2YgZmxhdC10b3BwZWRcbiAqIGhleGFnb25zICh7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXMpIGFsaWduZWQgaW4gYW4gXCJvZGQtcVwiIHZlcnRpY2FsIGdyaWQgYXNcbiAqIGRlc2NyaWJlZCBpbiBbSGV4YWdvbmFsIEdyaWRzXShodHRwOi8vd3d3LnJlZGJsb2JnYW1lcy5jb20vZ3JpZHMvaGV4YWdvbnMvKVxuICpcbiAqIEBtb2R1bGUgdHVyZi9oZXhcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYmJveCBib3VuZGluZyBib3ggaW4gW21pblgsIG1pblksIG1heFgsIG1heFldIG9yZGVyXG4gKiBAcGFyYW0ge051bWJlcn0gc2l6ZSBzaXplIG9mIGNlbGxzIGluIGRlZ3JlZXNcbiAqIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGhleGFnb25hbCB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXMgaW4gYSBncmlkXG4gKiBAZXhhbXBsZVxuICogdmFyIGJib3ggPSBbNy4yNjY5NDEwLCA0My42OTUzMDcsIDcuMjg2MjUyOSwgNDMuNzA2NDc2XTtcbiAqIHZhciBzaXplID0gMC4wMDE7XG4gKlxuICogdmFyIGhleGdyaWQgPSB0dXJmLmhleChiYm94LCBzaXplKTtcbiAqXG4gKiAvLz1oZXhncmlkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gaGV4Z3JpZDtcblxuLy9QcmVjb21wdXRlIGNvc2luZXMgYW5kIHNpbmVzIG9mIGFuZ2xlcyB1c2VkIGluIGhleGFnb24gY3JlYXRpb25cbi8vIGZvciBwZXJmb3JtYW5jZSBnYWluXG52YXIgY29zaW5lcyA9IFtdO1xudmFyIHNpbmVzID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDY7IGkrKykge1xuICB2YXIgYW5nbGUgPSAyICogTWF0aC5QSS82ICogaTtcbiAgY29zaW5lcy5wdXNoKE1hdGguY29zKGFuZ2xlKSk7XG4gIHNpbmVzLnB1c2goTWF0aC5zaW4oYW5nbGUpKTtcbn1cblxuLy9DZW50ZXIgc2hvdWxkIGJlIFt4LCB5XVxuZnVuY3Rpb24gaGV4YWdvbihjZW50ZXIsIHJhZGl1cykge1xuICB2YXIgdmVydGljZXMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgIHZhciB4ID0gY2VudGVyWzBdICsgcmFkaXVzICogY29zaW5lc1tpXTtcbiAgICB2YXIgeSA9IGNlbnRlclsxXSArIHJhZGl1cyAqIHNpbmVzW2ldO1xuXG4gICAgdmVydGljZXMucHVzaChbeCx5XSk7XG4gIH1cblxuICAvL2ZpcnN0IGFuZCBsYXN0IHZlcnRleCBtdXN0IGJlIHRoZSBzYW1lXG4gIHZlcnRpY2VzLnB1c2godmVydGljZXNbMF0pO1xuXG4gIHJldHVybiBwb2x5Z29uKFt2ZXJ0aWNlc10pO1xufVxuXG5mdW5jdGlvbiBoZXhncmlkKGJib3gsIHJhZGl1cykge1xuICB2YXIgeG1pbiA9IGJib3hbMF07XG4gIHZhciB5bWluID0gYmJveFsxXTtcbiAgdmFyIHhtYXggPSBiYm94WzJdO1xuICB2YXIgeW1heCA9IGJib3hbM107XG5cbiAgdmFyIGZjID0ge1xuICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgZmVhdHVyZXM6IFtdXG4gIH07XG5cbiAgdmFyIGhleF93aWR0aCA9IHJhZGl1cyAqIDI7XG4gIHZhciBoZXhfaGVpZ2h0ID0gTWF0aC5zcXJ0KDMpLzIgKiBoZXhfd2lkdGg7XG5cbiAgdmFyIGJveF93aWR0aCA9IHhtYXggLSB4bWluO1xuICB2YXIgYm94X2hlaWdodCA9IHltYXggLSB5bWluO1xuXG4gIHZhciB4X2ludGVydmFsID0gMy80ICogaGV4X3dpZHRoO1xuICB2YXIgeV9pbnRlcnZhbCA9IGhleF9oZWlnaHQ7XG5cbiAgdmFyIHhfc3BhbiA9IGJveF93aWR0aCAvIChoZXhfd2lkdGggLSByYWRpdXMvMik7XG4gIHZhciB4X2NvdW50ID0gTWF0aC5jZWlsKHhfc3Bhbik7XG4gIGlmIChNYXRoLnJvdW5kKHhfc3BhbikgPT09IHhfY291bnQpIHtcbiAgICB4X2NvdW50Kys7XG4gIH1cblxuICB2YXIgeF9hZGp1c3QgPSAoKHhfY291bnQgKiB4X2ludGVydmFsIC0gcmFkaXVzLzIpIC0gYm94X3dpZHRoKS8yIC0gcmFkaXVzLzI7XG5cbiAgdmFyIHlfY291bnQgPSBNYXRoLmNlaWwoYm94X2hlaWdodCAvIGhleF9oZWlnaHQpO1xuXG4gIHZhciB5X2FkanVzdCA9IChib3hfaGVpZ2h0IC0geV9jb3VudCAqIGhleF9oZWlnaHQpLzI7XG5cbiAgdmFyIGhhc09mZnNldFkgPSB5X2NvdW50ICogaGV4X2hlaWdodCAtIGJveF9oZWlnaHQgPiBoZXhfaGVpZ2h0LzI7XG4gIGlmIChoYXNPZmZzZXRZKSB7XG4gICAgeV9hZGp1c3QgLT0gaGV4X2hlaWdodC80O1xuICB9XG5cbiAgZm9yICh2YXIgeCA9IDA7IHggPCB4X2NvdW50OyB4KyspIHtcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8PSB5X2NvdW50OyB5KyspIHtcblxuICAgICAgdmFyIGlzT2RkID0geCAlIDIgPT09IDE7XG4gICAgICBpZiAoeSA9PT0gMCAmJiBpc09kZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPT09IDAgJiYgaGFzT2Zmc2V0WSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNlbnRlcl94ID0geCAqIHhfaW50ZXJ2YWwgKyB4bWluIC0geF9hZGp1c3Q7XG4gICAgICB2YXIgY2VudGVyX3kgPSB5ICogeV9pbnRlcnZhbCArIHltaW4gKyB5X2FkanVzdDtcblxuICAgICAgaWYgKGlzT2RkKSB7XG4gICAgICAgIGNlbnRlcl95IC09IGhleF9oZWlnaHQvMjtcbiAgICAgIH1cblxuICAgICAgZmMuZmVhdHVyZXMucHVzaChoZXhhZ29uKFtjZW50ZXJfeCwgY2VudGVyX3ldLCByYWRpdXMpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmM7XG59XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtdGluL25vZGVfbW9kdWxlcy90dXJmLXBvbHlnb24vaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FdmVuJUUyJTgwJTkzb2RkX3J1bGVcbi8vIG1vZGlmaWVkIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9zdWJzdGFjay9wb2ludC1pbi1wb2x5Z29uL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG4vLyB3aGljaCB3YXMgbW9kaWZpZWQgZnJvbSBodHRwOi8vd3d3LmVjc2UucnBpLmVkdS9Ib21lcGFnZXMvd3JmL1Jlc2VhcmNoL1Nob3J0X05vdGVzL3BucG9seS5odG1sXG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgUG9pbnR9IGZlYXR1cmUgYW5kIGEge0BsaW5rIFBvbHlnb259IGZlYXR1cmUgYW5kIGRldGVybWluZXMgaWYgdGhlIFBvaW50IHJlc2lkZXMgaW5zaWRlIHRoZSBQb2x5Z29uLiBUaGUgUG9seWdvbiBjYW5cbiAqIGJlIGNvbnZleCBvciBjb25jYXZlLiBUaGUgZnVuY3Rpb24gYWNjZXB0cyBhbnkgdmFsaWQgUG9seWdvbiBvciB7QGxpbmsgTXVsdGlQb2x5Z29ufVxuICogYW5kIGFjY291bnRzIGZvciBob2xlcy5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvaW5zaWRlXG4gKiBAcGFyYW0ge1BvaW50fSBwb2ludCBhIFBvaW50IGZlYXR1cmVcbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBhIFBvbHlnb24gZmVhdHVyZVxuICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBQb2ludCBpcyBpbnNpZGUgdGhlIFBvbHlnb247IGBmYWxzZWAgaWYgdGhlIFBvaW50IGlzIG5vdCBpbnNpZGUgdGhlIFBvbHlnb25cbiAqIEBleGFtcGxlXG4gKiB2YXIgcHQxID0gdHVyZi5wb2ludChbLTExMS40NjcyODUsIDQwLjc1NzY2XSxcbiAqICB7J21hcmtlci1jb2xvcic6IFwiI2YwMFwifSk7XG4gKiB2YXIgcHQyID0gdHVyZi5wb2ludChbLTExMS44NzM3NzksIDQwLjY0NzMwM10sXG4gKiAgeydtYXJrZXItY29sb3InOiBcIiMwZjBcIiB9KTtcbiAqIHZhciBwb2x5ID0gdHVyZi5wb2x5Z29uKFtbXG4gKiAgWy0xMTIuMDc0Mjc5LCA0MC41MjIxNV0sXG4gKiAgWy0xMTIuMDc0Mjc5LCA0MC44NTMyOTNdLFxuICogIFstMTExLjYxMDEwNywgNDAuODUzMjkzXSxcbiAqICBbLTExMS42MTAxMDcsIDQwLjUyMjE1XSxcbiAqICBbLTExMi4wNzQyNzksIDQwLjUyMjE1XVxuICogXV0pO1xuICogdmFyIGZlYXR1cmVzID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbcHQxLCBwdDIsIHBvbHldKTtcbiAqXG4gKiAvLz1mZWF0dXJlc1xuICpcbiAqIHZhciBpc0luc2lkZTEgPSB0dXJmLmluc2lkZShwdDEsIHBvbHkpO1xuICogLy89aXNJbnNpZGUxXG4gKlxuICogdmFyIGlzSW5zaWRlMiA9IHR1cmYuaW5zaWRlKHB0MiwgcG9seSk7XG4gKiAvLz1pc0luc2lkZTJcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2ludCwgcG9seWdvbikge1xuICB2YXIgcG9seXMgPSBwb2x5Z29uLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICB2YXIgcHQgPSBbcG9pbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0sIHBvaW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdXTtcbiAgLy8gbm9ybWFsaXplIHRvIG11bHRpcG9seWdvblxuICBpZihwb2x5Z29uLmdlb21ldHJ5LnR5cGUgPT09ICdQb2x5Z29uJykgcG9seXMgPSBbcG9seXNdO1xuXG4gIHZhciBpbnNpZGVQb2x5ID0gZmFsc2U7XG4gIHZhciBpID0gMDtcbiAgd2hpbGUgKGkgPCBwb2x5cy5sZW5ndGggJiYgIWluc2lkZVBvbHkpIHtcbiAgICAvLyBjaGVjayBpZiBpdCBpcyBpbiB0aGUgb3V0ZXIgcmluZyBmaXJzdFxuICAgIGlmKGluUmluZyhwdCwgcG9seXNbaV1bMF0pKSB7XG4gICAgICB2YXIgaW5Ib2xlID0gZmFsc2U7XG4gICAgICB2YXIgayA9IDE7XG4gICAgICAvLyBjaGVjayBmb3IgdGhlIHBvaW50IGluIGFueSBvZiB0aGUgaG9sZXNcbiAgICAgIHdoaWxlKGsgPCBwb2x5c1tpXS5sZW5ndGggJiYgIWluSG9sZSkge1xuICAgICAgICBpZihpblJpbmcocHQsIHBvbHlzW2ldW2tdKSkge1xuICAgICAgICAgIGluSG9sZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaysrO1xuICAgICAgfVxuICAgICAgaWYoIWluSG9sZSkgaW5zaWRlUG9seSA9IHRydWU7XG4gICAgfVxuICAgIGkrKztcbiAgfVxuICByZXR1cm4gaW5zaWRlUG9seTtcbn1cblxuLy8gcHQgaXMgW3gseV0gYW5kIHJpbmcgaXMgW1t4LHldLCBbeCx5XSwuLl1cbmZ1bmN0aW9uIGluUmluZyAocHQsIHJpbmcpIHtcbiAgdmFyIGlzSW5zaWRlID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwLCBqID0gcmluZy5sZW5ndGggLSAxOyBpIDwgcmluZy5sZW5ndGg7IGogPSBpKyspIHtcbiAgICB2YXIgeGkgPSByaW5nW2ldWzBdLCB5aSA9IHJpbmdbaV1bMV07XG4gICAgdmFyIHhqID0gcmluZ1tqXVswXSwgeWogPSByaW5nW2pdWzFdO1xuICAgIFxuICAgIHZhciBpbnRlcnNlY3QgPSAoKHlpID4gcHRbMV0pICE9ICh5aiA+IHB0WzFdKSlcbiAgICAgICAgJiYgKHB0WzBdIDwgKHhqIC0geGkpICogKHB0WzFdIC0geWkpIC8gKHlqIC0geWkpICsgeGkpO1xuICAgIGlmIChpbnRlcnNlY3QpIGlzSW5zaWRlID0gIWlzSW5zaWRlO1xuICB9XG4gIHJldHVybiBpc0luc2lkZTtcbn1cblxuIiwiLy8gZGVwZW5kIG9uIGpzdHMgZm9yIG5vdyBodHRwczovL2dpdGh1Yi5jb20vYmpvcm5oYXJydGVsbC9qc3RzL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL292ZXJsYXkuaHRtbFxudmFyIGpzdHMgPSByZXF1aXJlKCdqc3RzJyk7XG52YXIgZmVhdHVyZWNvbGxlY3Rpb24gPSByZXF1aXJlKCd0dXJmLWZlYXR1cmVjb2xsZWN0aW9uJyk7XG5cbi8qKlxuICogVGFrZXMgdHdvIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyBhbmQgZmluZHMgdGhlaXIgaW50ZXJzZWN0aW9uLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9pbnRlcnNlY3RcbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seTEgdGhlIGZpcnN0IFBvbHlnb25cbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seTIgdGhlIHNlY29uZCBQb2x5Z29uXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBhIFBvbHlnb24gZmVhdHVyZSByZXByZXNlbnRpbmcgdGhlIGFyZWEgd2hlcmUgYHBvbHkxYCBhbmQgYHBvbHkyYCBvdmVybGFwXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHkxID0gdHVyZi5wb2x5Z29uKFtbXG4gKiAgWy0xMjIuODAxNzQyLCA0NS40ODU2NV0sXG4gKiAgWy0xMjIuODAxNzQyLCA0NS42MDQ5MV0sXG4gKiAgWy0xMjIuNTg0NzYyLCA0NS42MDQ5MV0sXG4gKiAgWy0xMjIuNTg0NzYyLCA0NS40ODU2NV0sXG4gKiAgWy0xMjIuODAxNzQyLCA0NS40ODU2NV1cbiAqIF1dKTtcbiAqIHBvbHkxLnByb3BlcnRpZXMuZmlsbCA9ICcjMGYwJztcbiAqIHZhciBwb2x5MiA9IHR1cmYucG9seWdvbihbW1xuICogIFstMTIyLjUyMDIxNywgNDUuNTM1NjkzXSxcbiAqICBbLTEyMi42NDAzOCwgNDUuNTUzOTY3XSxcbiAqICBbLTEyMi43MjAwMzEsIDQ1LjUyNjU1NF0sXG4gKiAgWy0xMjIuNjY5OTA2LCA0NS41MDczMDldLFxuICogIFstMTIyLjcyMzQ2NCwgNDUuNDQ2NjQzXSxcbiAqICBbLTEyMi41MzI1NzcsIDQ1LjQwODU3NF0sXG4gKiAgWy0xMjIuNDg3MjU4LCA0NS40Nzc0NjZdLFxuICogIFstMTIyLjUyMDIxNywgNDUuNTM1NjkzXVxuICogXV0pO1xuICogcG9seTIucHJvcGVydGllcy5maWxsID0gJyMwMGYnO1xuICogdmFyIHBvbHlnb25zID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbcG9seTEsIHBvbHkyXSk7XG4gKlxuICogdmFyIGludGVyc2VjdGlvbiA9IHR1cmYuaW50ZXJzZWN0KHBvbHkxLCBwb2x5Mik7XG4gKlxuICogLy89cG9seWdvbnNcbiAqXG4gKiAvLz1pbnRlcnNlY3Rpb25cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5MSwgcG9seTIpe1xuICB2YXIgcmVhZGVyID0gbmV3IGpzdHMuaW8uR2VvSlNPTlJlYWRlcigpLFxuICAgIGEgPSByZWFkZXIucmVhZChKU09OLnN0cmluZ2lmeShwb2x5MSkpLFxuICAgIGIgPSByZWFkZXIucmVhZChKU09OLnN0cmluZ2lmeShwb2x5MikpLFxuICAgIGludGVyc2VjdGlvbiA9IGEuaW50ZXJzZWN0aW9uKGIpLFxuICAgIHBhcnNlciA9IG5ldyBqc3RzLmlvLkdlb0pTT05QYXJzZXIoKTtcblxuICBpbnRlcnNlY3Rpb24gPSBwYXJzZXIud3JpdGUoaW50ZXJzZWN0aW9uKTtcbiAgaWYoaW50ZXJzZWN0aW9uLnR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nICYmIGludGVyc2VjdGlvbi5nZW9tZXRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgICAgcHJvcGVydGllczoge30sXG4gICAgICBnZW9tZXRyeTogaW50ZXJzZWN0aW9uXG4gICAgfTtcbiAgfVxufTtcbiIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZXJhc2Uvbm9kZV9tb2R1bGVzL2pzdHMvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1lcmFzZS9ub2RlX21vZHVsZXMvanN0cy9saWIvanN0cy5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCIvKlxuICBqYXZhc2NyaXB0LnV0aWwgaXMgYSBwb3J0IG9mIHNlbGVjdGVkIHBhcnRzIG9mIGphdmEudXRpbCB0byBKYXZhU2NyaXB0IHdoaWNoXG4gIG1haW4gcHVycG9zZSBpcyB0byBlYXNlIHBvcnRpbmcgSmF2YSBjb2RlIHRvIEphdmFTY3JpcHQuXG4gIFxuICBUaGUgTUlUIExpY2Vuc2UgKE1JVClcblxuICBDb3B5cmlnaHQgKEMpIDIwMTEtMjAxNCBieSBUaGUgQXV0aG9yc1xuXG4gIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbiAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAgYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuICBUSEUgU09GVFdBUkUuXG4qL1xuOyhmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWEuc3BsaXQoXCIuXCIpLGQ9ZTtjWzBdaW4gZHx8IWQuZXhlY1NjcmlwdHx8ZC5leGVjU2NyaXB0KFwidmFyIFwiK2NbMF0pO2Zvcih2YXIgdDtjLmxlbmd0aCYmKHQ9Yy5zaGlmdCgpKTspYy5sZW5ndGh8fHZvaWQgMD09PWI/ZD1kW3RdP2RbdF06ZFt0XT17fTpkW3RdPWJ9ZnVuY3Rpb24gZyhhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS5xPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5wPWZ1bmN0aW9uKGEsYyxPKXt2YXIgTT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGIucHJvdG90eXBlW2NdLmFwcGx5KGEsTSl9fTtmdW5jdGlvbiBoKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcoaCxFcnJvcik7ZihcImphdmFzY3JpcHQudXRpbC5FbXB0eVN0YWNrRXhjZXB0aW9uXCIsaCk7aC5wcm90b3R5cGUubmFtZT1cIkVtcHR5U3RhY2tFeGNlcHRpb25cIjtmdW5jdGlvbiBrKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcoayxFcnJvcik7ZihcImphdmFzY3JpcHQudXRpbC5JbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXCIsayk7ay5wcm90b3R5cGUubmFtZT1cIkluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25cIjtmdW5jdGlvbiBsKCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuSXRlcmF0b3JcIixsKTtsLnByb3RvdHlwZS5oYXNOZXh0PWwucHJvdG90eXBlLmM7bC5wcm90b3R5cGUubmV4dD1sLnByb3RvdHlwZS5uZXh0O2wucHJvdG90eXBlLnJlbW92ZT1sLnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gbSgpe31mKFwiamF2YXNjcmlwdC51dGlsLkNvbGxlY3Rpb25cIixtKTtmdW5jdGlvbiBuKCl7fWcobixtKTtmKFwiamF2YXNjcmlwdC51dGlsLkxpc3RcIixuKTtmdW5jdGlvbiBwKCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuTWFwXCIscCk7ZnVuY3Rpb24gcShhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKHEsRXJyb3IpO2YoXCJqYXZhc2NyaXB0LnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvblwiLHEpO3EucHJvdG90eXBlLm5hbWU9XCJOb1N1Y2hFbGVtZW50RXhjZXB0aW9uXCI7ZnVuY3Rpb24gcihhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKHIsRXJyb3IpO3IucHJvdG90eXBlLm5hbWU9XCJPcGVyYXRpb25Ob3RTdXBwb3J0ZWRcIjtmdW5jdGlvbiBzKGEpe3RoaXMuYT1bXTthIGluc3RhbmNlb2YgbSYmdGhpcy5lKGEpfWcocyxuKTtmKFwiamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdFwiLHMpO3MucHJvdG90eXBlLmE9bnVsbDtzLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7dGhpcy5hLnB1c2goYSk7cmV0dXJuITB9O3MucHJvdG90eXBlLmFkZD1zLnByb3RvdHlwZS5hZGQ7cy5wcm90b3R5cGUuZT1mdW5jdGlvbihhKXtmb3IoYT1hLmYoKTthLmMoKTspdGhpcy5hZGQoYS5uZXh0KCkpO3JldHVybiEwfTtzLnByb3RvdHlwZS5hZGRBbGw9cy5wcm90b3R5cGUuZTtzLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFbYV07dGhpcy5hW2FdPWI7cmV0dXJuIGN9O3MucHJvdG90eXBlLnNldD1zLnByb3RvdHlwZS5zZXQ7cy5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3JldHVybiBuZXcgdSh0aGlzKX07cy5wcm90b3R5cGUuaXRlcmF0b3I9cy5wcm90b3R5cGUuZjtcbnMucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtpZigwPmF8fGE+PXRoaXMuc2l6ZSgpKXRocm93IG5ldyBrO3JldHVybiB0aGlzLmFbYV19O3MucHJvdG90eXBlLmdldD1zLnByb3RvdHlwZS5nZXQ7cy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aH07cy5wcm90b3R5cGUuaXNFbXB0eT1zLnByb3RvdHlwZS5nO3MucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07cy5wcm90b3R5cGUuc2l6ZT1zLnByb3RvdHlwZS5zaXplO3MucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTtzLnByb3RvdHlwZS50b0FycmF5PXMucHJvdG90eXBlLmg7XG5zLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSExLGM9MCxkPXRoaXMuYS5sZW5ndGg7YzxkO2MrKylpZih0aGlzLmFbY109PT1hKXt0aGlzLmEuc3BsaWNlKGMsMSk7Yj0hMDticmVha31yZXR1cm4gYn07cy5wcm90b3R5cGUucmVtb3ZlPXMucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiB1KGEpe3RoaXMuaj1hfWYoXCIkanNjb21wLnNjb3BlLkl0ZXJhdG9yX1wiLHUpO3UucHJvdG90eXBlLmo9bnVsbDt1LnByb3RvdHlwZS5iPTA7dS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuYj09PXRoaXMuai5zaXplKCkpdGhyb3cgbmV3IHE7cmV0dXJuIHRoaXMuai5nZXQodGhpcy5iKyspfTt1LnByb3RvdHlwZS5uZXh0PXUucHJvdG90eXBlLm5leHQ7dS5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmI8dGhpcy5qLnNpemUoKT8hMDohMX07dS5wcm90b3R5cGUuaGFzTmV4dD11LnByb3RvdHlwZS5jO1xudS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTt1LnByb3RvdHlwZS5yZW1vdmU9dS5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIHYoKXt9ZihcImphdmFzY3JpcHQudXRpbC5BcnJheXNcIix2KTtcbnYuc29ydD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXSxiLGMsZDtpZigxPT09YXJndW1lbnRzLmxlbmd0aClhLnNvcnQoKTtlbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWM9YXJndW1lbnRzWzFdLGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5jb21wYXJlKGEsYil9LGEuc29ydChkKTtlbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWZvcihiPWEuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSksYi5zb3J0KCksZD1hLnNsaWNlKDAsYXJndW1lbnRzWzFdKS5jb25jYXQoYixhLnNsaWNlKGFyZ3VtZW50c1syXSxhLmxlbmd0aCkpLGEuc3BsaWNlKDAsYS5sZW5ndGgpLGI9MDtiPGQubGVuZ3RoO2IrKylhLnB1c2goZFtiXSk7ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aClmb3IoYj1hLnNsaWNlKGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pLGM9YXJndW1lbnRzWzNdLGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5jb21wYXJlKGEsYil9LGIuc29ydChkKSxcbmQ9YS5zbGljZSgwLGFyZ3VtZW50c1sxXSkuY29uY2F0KGIsYS5zbGljZShhcmd1bWVudHNbMl0sYS5sZW5ndGgpKSxhLnNwbGljZSgwLGEubGVuZ3RoKSxiPTA7YjxkLmxlbmd0aDtiKyspYS5wdXNoKGRbYl0pfTt2LmFzTGlzdD1mdW5jdGlvbihhKXtmb3IodmFyIGI9bmV3IHMsYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyliLmFkZChhW2NdKTtyZXR1cm4gYn07ZnVuY3Rpb24gdygpe3RoaXMuaT17fX1nKHcscCk7ZihcImphdmFzY3JpcHQudXRpbC5IYXNoTWFwXCIsdyk7dy5wcm90b3R5cGUuaT1udWxsO3cucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pW2FdfHxudWxsfTt3LnByb3RvdHlwZS5nZXQ9dy5wcm90b3R5cGUuZ2V0O3cucHJvdG90eXBlLnB1dD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmlbYV09Yn07dy5wcm90b3R5cGUucHV0PXcucHJvdG90eXBlLnB1dDt3LnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHMsYjtmb3IoYiBpbiB0aGlzLmkpdGhpcy5pLmhhc093blByb3BlcnR5KGIpJiZhLmFkZCh0aGlzLmlbYl0pO3JldHVybiBhfTt3LnByb3RvdHlwZS52YWx1ZXM9dy5wcm90b3R5cGUubTt3LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubSgpLnNpemUoKX07dy5wcm90b3R5cGUuc2l6ZT13LnByb3RvdHlwZS5zaXplO2Z1bmN0aW9uIHgoKXt9Zyh4LG0pO2YoXCJqYXZhc2NyaXB0LnV0aWwuU2V0XCIseCk7ZnVuY3Rpb24geShhKXt0aGlzLmE9W107YSBpbnN0YW5jZW9mIG0mJnRoaXMuZShhKX1nKHkseCk7ZihcImphdmFzY3JpcHQudXRpbC5IYXNoU2V0XCIseSk7eS5wcm90b3R5cGUuYT1udWxsO3kucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWlmKHRoaXMuYVtiXT09PWEpcmV0dXJuITA7cmV0dXJuITF9O3kucHJvdG90eXBlLmNvbnRhaW5zPXkucHJvdG90eXBlLmNvbnRhaW5zO3kucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXtpZih0aGlzLmNvbnRhaW5zKGEpKXJldHVybiExO3RoaXMuYS5wdXNoKGEpO3JldHVybiEwfTt5LnByb3RvdHlwZS5hZGQ9eS5wcm90b3R5cGUuYWRkO3kucHJvdG90eXBlLmU9ZnVuY3Rpb24oYSl7Zm9yKGE9YS5mKCk7YS5jKCk7KXRoaXMuYWRkKGEubmV4dCgpKTtyZXR1cm4hMH07eS5wcm90b3R5cGUuYWRkQWxsPXkucHJvdG90eXBlLmU7XG55LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O3kucHJvdG90eXBlLnJlbW92ZT15LnByb3RvdHlwZS5yZW1vdmU7eS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTt5LnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RofTt5LnByb3RvdHlwZS5pc0VtcHR5PXkucHJvdG90eXBlLmc7eS5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O3kucHJvdG90eXBlLnRvQXJyYXk9eS5wcm90b3R5cGUuaDt5LnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB6KHRoaXMpfTt5LnByb3RvdHlwZS5pdGVyYXRvcj15LnByb3RvdHlwZS5mO2Z1bmN0aW9uIHooYSl7dGhpcy5rPWF9ZihcIiRqc2NvbXAuc2NvcGUuSXRlcmF0b3JfJDFcIix6KTt6LnByb3RvdHlwZS5rPW51bGw7XG56LnByb3RvdHlwZS5iPTA7ei5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuYj09PXRoaXMuay5zaXplKCkpdGhyb3cgbmV3IHE7cmV0dXJuIHRoaXMuay5hW3RoaXMuYisrXX07ei5wcm90b3R5cGUubmV4dD16LnByb3RvdHlwZS5uZXh0O3oucHJvdG90eXBlLmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iPHRoaXMuay5zaXplKCk/ITA6ITF9O3oucHJvdG90eXBlLmhhc05leHQ9ei5wcm90b3R5cGUuYzt6LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O3oucHJvdG90eXBlLnJlbW92ZT16LnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gQSgpe31nKEEscCk7ZihcImphdmFzY3JpcHQudXRpbC5Tb3J0ZWRNYXBcIixBKTtmdW5jdGlvbiBCKCl7fWcoQix4KTtmKFwiamF2YXNjcmlwdC51dGlsLlNvcnRlZFNldFwiLEIpO2Z1bmN0aW9uIEMoKXt0aGlzLmE9W119ZyhDLG4pO2YoXCJqYXZhc2NyaXB0LnV0aWwuU3RhY2tcIixDKTtDLnByb3RvdHlwZS5hPW51bGw7Qy5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhKXt0aGlzLmEucHVzaChhKTtyZXR1cm4gYX07Qy5wcm90b3R5cGUucHVzaD1DLnByb3RvdHlwZS5wdXNoO0MucHJvdG90eXBlLnBvcD1mdW5jdGlvbigpe2lmKDA9PT10aGlzLmEubGVuZ3RoKXRocm93IG5ldyBoO3JldHVybiB0aGlzLmEucG9wKCl9O0MucHJvdG90eXBlLnBvcD1DLnByb3RvdHlwZS5wb3A7Qy5wcm90b3R5cGUubz1mdW5jdGlvbigpe2lmKDA9PT10aGlzLmEubGVuZ3RoKXRocm93IG5ldyBoO3JldHVybiB0aGlzLmFbdGhpcy5hLmxlbmd0aC0xXX07Qy5wcm90b3R5cGUucGVlaz1DLnByb3RvdHlwZS5vO0MucHJvdG90eXBlLmVtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RoPyEwOiExfTtDLnByb3RvdHlwZS5lbXB0eT1DLnByb3RvdHlwZS5lbXB0eTtcbkMucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbXB0eSgpfTtDLnByb3RvdHlwZS5pc0VtcHR5PUMucHJvdG90eXBlLmc7Qy5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmEuaW5kZXhPZihhKX07Qy5wcm90b3R5cGUuc2VhcmNoPUMucHJvdG90eXBlLnNlYXJjaDtDLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O0MucHJvdG90eXBlLnNpemU9Qy5wcm90b3R5cGUuc2l6ZTtDLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07Qy5wcm90b3R5cGUudG9BcnJheT1DLnByb3RvdHlwZS5oO2Z1bmN0aW9uIEQoYSl7cmV0dXJuIG51bGw9PWE/bnVsbDphLnBhcmVudH1mdW5jdGlvbiBFKGEsYil7bnVsbCE9PWEmJihhLmNvbG9yPWIpfWZ1bmN0aW9uIEYoYSl7cmV0dXJuIG51bGw9PWE/bnVsbDphLmxlZnR9ZnVuY3Rpb24gRyhhKXtyZXR1cm4gbnVsbD09YT9udWxsOmEucmlnaHR9ZnVuY3Rpb24gSCgpe3RoaXMuZD1udWxsO3RoaXMubj0wfWcoSCxBKTtmKFwiamF2YXNjcmlwdC51dGlsLlRyZWVNYXBcIixIKTtILnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZDtudWxsIT09Yjspe3ZhciBjPWEuY29tcGFyZVRvKGIua2V5KTtpZigwPmMpYj1iLmxlZnQ7ZWxzZSBpZigwPGMpYj1iLnJpZ2h0O2Vsc2UgcmV0dXJuIGIudmFsdWV9cmV0dXJuIG51bGx9O0gucHJvdG90eXBlLmdldD1ILnByb3RvdHlwZS5nZXQ7XG5ILnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oYSxiKXtpZihudWxsPT09dGhpcy5kKXJldHVybiB0aGlzLmQ9e2tleTphLHZhbHVlOmIsbGVmdDpudWxsLHJpZ2h0Om51bGwscGFyZW50Om51bGwsY29sb3I6MH0sdGhpcy5uPTEsbnVsbDt2YXIgYz10aGlzLmQsZCx0O2RvIGlmKGQ9Yyx0PWEuY29tcGFyZVRvKGMua2V5KSwwPnQpYz1jLmxlZnQ7ZWxzZSBpZigwPHQpYz1jLnJpZ2h0O2Vsc2UgcmV0dXJuIGQ9Yy52YWx1ZSxjLnZhbHVlPWIsZDt3aGlsZShudWxsIT09Yyk7Yz17a2V5OmEsbGVmdDpudWxsLHJpZ2h0Om51bGwsdmFsdWU6YixwYXJlbnQ6ZCxjb2xvcjowfTswPnQ/ZC5sZWZ0PWM6ZC5yaWdodD1jO2ZvcihjLmNvbG9yPTE7bnVsbCE9YyYmYyE9dGhpcy5kJiYxPT1jLnBhcmVudC5jb2xvcjspRChjKT09RihEKEQoYykpKT8oZD1HKEQoRChjKSkpLDE9PShudWxsPT1kPzA6ZC5jb2xvcik/KEUoRChjKSwwKSxFKGQsMCksRShEKEQoYykpLDEpLGM9RChEKGMpKSk6KGM9PUcoRChjKSkmJlxuKGM9RChjKSxJKHRoaXMsYykpLEUoRChjKSwwKSxFKEQoRChjKSksMSksSih0aGlzLEQoRChjKSkpKSk6KGQ9RihEKEQoYykpKSwxPT0obnVsbD09ZD8wOmQuY29sb3IpPyhFKEQoYyksMCksRShkLDApLEUoRChEKGMpKSwxKSxjPUQoRChjKSkpOihjPT1GKEQoYykpJiYoYz1EKGMpLEoodGhpcyxjKSksRShEKGMpLDApLEUoRChEKGMpKSwxKSxJKHRoaXMsRChEKGMpKSkpKTt0aGlzLmQuY29sb3I9MDt0aGlzLm4rKztyZXR1cm4gbnVsbH07SC5wcm90b3R5cGUucHV0PUgucHJvdG90eXBlLnB1dDtILnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHMsYjtiPXRoaXMuZDtpZihudWxsIT1iKWZvcig7bnVsbCE9Yi5sZWZ0OyliPWIubGVmdDtpZihudWxsIT09Yilmb3IoYS5hZGQoYi52YWx1ZSk7bnVsbCE9PShiPUsoYikpOylhLmFkZChiLnZhbHVlKTtyZXR1cm4gYX07SC5wcm90b3R5cGUudmFsdWVzPUgucHJvdG90eXBlLm07XG5mdW5jdGlvbiBJKGEsYil7aWYobnVsbCE9Yil7dmFyIGM9Yi5yaWdodDtiLnJpZ2h0PWMubGVmdDtudWxsIT1jLmxlZnQmJihjLmxlZnQucGFyZW50PWIpO2MucGFyZW50PWIucGFyZW50O251bGw9PWIucGFyZW50P2EuZD1jOmIucGFyZW50LmxlZnQ9PWI/Yi5wYXJlbnQubGVmdD1jOmIucGFyZW50LnJpZ2h0PWM7Yy5sZWZ0PWI7Yi5wYXJlbnQ9Y319ZnVuY3Rpb24gSihhLGIpe2lmKG51bGwhPWIpe3ZhciBjPWIubGVmdDtiLmxlZnQ9Yy5yaWdodDtudWxsIT1jLnJpZ2h0JiYoYy5yaWdodC5wYXJlbnQ9Yik7Yy5wYXJlbnQ9Yi5wYXJlbnQ7bnVsbD09Yi5wYXJlbnQ/YS5kPWM6Yi5wYXJlbnQucmlnaHQ9PWI/Yi5wYXJlbnQucmlnaHQ9YzpiLnBhcmVudC5sZWZ0PWM7Yy5yaWdodD1iO2IucGFyZW50PWN9fVxuZnVuY3Rpb24gSyhhKXtpZihudWxsPT09YSlyZXR1cm4gbnVsbDtpZihudWxsIT09YS5yaWdodClmb3IodmFyIGI9YS5yaWdodDtudWxsIT09Yi5sZWZ0OyliPWIubGVmdDtlbHNlIGZvcihiPWEucGFyZW50O251bGwhPT1iJiZhPT09Yi5yaWdodDspYT1iLGI9Yi5wYXJlbnQ7cmV0dXJuIGJ9SC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm59O0gucHJvdG90eXBlLnNpemU9SC5wcm90b3R5cGUuc2l6ZTtmdW5jdGlvbiBMKGEpe3RoaXMuYT1bXTthIGluc3RhbmNlb2YgbSYmdGhpcy5lKGEpfWcoTCxCKTtmKFwiamF2YXNjcmlwdC51dGlsLlRyZWVTZXRcIixMKTtMLnByb3RvdHlwZS5hPW51bGw7TC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspaWYoMD09PXRoaXMuYVtiXS5jb21wYXJlVG8oYSkpcmV0dXJuITA7cmV0dXJuITF9O0wucHJvdG90eXBlLmNvbnRhaW5zPUwucHJvdG90eXBlLmNvbnRhaW5zO0wucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXtpZih0aGlzLmNvbnRhaW5zKGEpKXJldHVybiExO2Zvcih2YXIgYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWlmKDE9PT10aGlzLmFbYl0uY29tcGFyZVRvKGEpKXJldHVybiB0aGlzLmEuc3BsaWNlKGIsMCxhKSwhMDt0aGlzLmEucHVzaChhKTtyZXR1cm4hMH07TC5wcm90b3R5cGUuYWRkPUwucHJvdG90eXBlLmFkZDtcbkwucHJvdG90eXBlLmU9ZnVuY3Rpb24oYSl7Zm9yKGE9YS5mKCk7YS5jKCk7KXRoaXMuYWRkKGEubmV4dCgpKTtyZXR1cm4hMH07TC5wcm90b3R5cGUuYWRkQWxsPUwucHJvdG90eXBlLmU7TC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTtMLnByb3RvdHlwZS5yZW1vdmU9TC5wcm90b3R5cGUucmVtb3ZlO0wucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07TC5wcm90b3R5cGUuc2l6ZT1MLnByb3RvdHlwZS5zaXplO0wucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGh9O0wucHJvdG90eXBlLmlzRW1wdHk9TC5wcm90b3R5cGUuZztMLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07TC5wcm90b3R5cGUudG9BcnJheT1MLnByb3RvdHlwZS5oO0wucHJvdG90eXBlLmY9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE4odGhpcyl9O1xuTC5wcm90b3R5cGUuaXRlcmF0b3I9TC5wcm90b3R5cGUuZjtmdW5jdGlvbiBOKGEpe3RoaXMubD1hfWYoXCIkanNjb21wLnNjb3BlLkl0ZXJhdG9yXyQyXCIsTik7Ti5wcm90b3R5cGUubD1udWxsO04ucHJvdG90eXBlLmI9MDtOLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5iPT09dGhpcy5sLnNpemUoKSl0aHJvdyBuZXcgcTtyZXR1cm4gdGhpcy5sLmFbdGhpcy5iKytdfTtOLnByb3RvdHlwZS5uZXh0PU4ucHJvdG90eXBlLm5leHQ7Ti5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmI8dGhpcy5sLnNpemUoKT8hMDohMX07Ti5wcm90b3R5cGUuaGFzTmV4dD1OLnByb3RvdHlwZS5jO04ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307Ti5wcm90b3R5cGUucmVtb3ZlPU4ucHJvdG90eXBlLnJlbW92ZTtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGdsb2JhbCYmKGdsb2JhbC5qYXZhc2NyaXB0PXt9LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWw9e30sZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5BcnJheUxpc3Q9cyxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkFycmF5cz12LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuQ29sbGVjdGlvbj1tLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuRW1wdHlTdGFja0V4Y2VwdGlvbj1oLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSGFzaE1hcD13LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSGFzaFNldD15LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbj1rLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSXRlcmF0b3I9bCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkxpc3Q9bixnbG9iYWwuamF2YXNjcmlwdC51dGlsLk1hcD1wLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvbj1xLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuT3BlcmF0aW9uTm90U3VwcG9ydGVkPVxucixnbG9iYWwuamF2YXNjcmlwdC51dGlsLlNldD14LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU29ydGVkTWFwPUEsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Tb3J0ZWRTZXQ9QixnbG9iYWwuamF2YXNjcmlwdC51dGlsLlN0YWNrPUMsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5UcmVlTWFwPUgsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5UcmVlU2V0PUwpO30pLmNhbGwodGhpcyk7XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWVyYXNlL25vZGVfbW9kdWxlcy9qc3RzL25vZGVfbW9kdWxlcy9qYXZhc2NyaXB0LnV0aWwvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1maWx0ZXIvbm9kZV9tb2R1bGVzL3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24vaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAsIEphc29uIERhdmllcy5cbiAqXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLiAgVGhpcyBjb2RlIGlzIGJhc2VkIG9uIEJyYWRsZXkgV2hpdGUncyBKYXZhIHZlcnNpb24sXG4gKiB3aGljaCBpcyBpbiB0dXJuIGJhc2VkIG9uIE5pY2hvbGFzIFl1ZSdzIEMrKyB2ZXJzaW9uLCB3aGljaCBpbiB0dXJuIGlzIGJhc2VkXG4gKiBvbiBQYXVsIEQuIEJvdXJrZSdzIG9yaWdpbmFsIEZvcnRyYW4gdmVyc2lvbi4gIFNlZSBiZWxvdyBmb3IgdGhlIHJlc3BlY3RpdmVcbiAqIGNvcHlyaWdodCBub3RpY2VzLlxuICpcbiAqIFNlZSBodHRwOi8vbG9jYWwud2FzcC51d2EuZWR1LmF1L35wYm91cmtlL3BhcGVycy9jb25yZWMvIGZvciB0aGUgb3JpZ2luYWxcbiAqIHBhcGVyIGJ5IFBhdWwgRC4gQm91cmtlLlxuICpcbiAqIFRoZSB2ZWN0b3IgY29udmVyc2lvbiBjb2RlIGlzIGJhc2VkIG9uIGh0dHA6Ly9hcHB0cmVlLm5ldC9jb25yZWMuaHRtIGJ5XG4gKiBHcmFoYW0gQ294LlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuICogbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKiAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuICogICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICogICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGVcbiAqICAgICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKiAgICAgKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSA8b3JnYW5pemF0aW9uPiBub3IgdGhlXG4gKiAgICAgICBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0c1xuICogICAgICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKlxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbiAqIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFXG4gKiBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgPENPUFlSSUdIVCBIT0xERVI+IEJFIExJQUJMRSBGT1IgQU5ZXG4gKiBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuICogKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuICogTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EXG4gKiBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuICogKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GXG4gKiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDE5OTYtMTk5NyBOaWNob2xhcyBZdWVcbiAqXG4gKiBUaGlzIHNvZnR3YXJlIGlzIGNvcHlyaWdodGVkIGJ5IE5pY2hvbGFzIFl1ZS4gVGhpcyBjb2RlIGlzIGJhc2VkIG9uIFBhdWwgRC5cbiAqIEJvdXJrZSdzIENPTlJFQy5GIHJvdXRpbmUuXG4gKlxuICogVGhlIGF1dGhvcnMgaGVyZWJ5IGdyYW50IHBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBhbmQgZGlzdHJpYnV0ZSB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgaXRzIGRvY3VtZW50YXRpb24gZm9yIGFueSBwdXJwb3NlLCBwcm92aWRlZCB0aGF0IGV4aXN0aW5nXG4gKiBjb3B5cmlnaHQgbm90aWNlcyBhcmUgcmV0YWluZWQgaW4gYWxsIGNvcGllcyBhbmQgdGhhdCB0aGlzIG5vdGljZSBpc1xuICogaW5jbHVkZWQgdmVyYmF0aW0gaW4gYW55IGRpc3RyaWJ1dGlvbnMuIEFkZGl0aW9uYWxseSwgdGhlIGF1dGhvcnMgZ3JhbnRcbiAqIHBlcm1pc3Npb24gdG8gbW9kaWZ5IHRoaXMgc29mdHdhcmUgYW5kIGl0cyBkb2N1bWVudGF0aW9uIGZvciBhbnkgcHVycG9zZSxcbiAqIHByb3ZpZGVkIHRoYXQgc3VjaCBtb2RpZmljYXRpb25zIGFyZSBub3QgZGlzdHJpYnV0ZWQgd2l0aG91dCB0aGUgZXhwbGljaXRcbiAqIGNvbnNlbnQgb2YgdGhlIGF1dGhvcnMgYW5kIHRoYXQgZXhpc3RpbmcgY29weXJpZ2h0IG5vdGljZXMgYXJlIHJldGFpbmVkIGluXG4gKiBhbGwgY29waWVzLiBTb21lIG9mIHRoZSBhbGdvcml0aG1zIGltcGxlbWVudGVkIGJ5IHRoaXMgc29mdHdhcmUgYXJlXG4gKiBwYXRlbnRlZCwgb2JzZXJ2ZSBhbGwgYXBwbGljYWJsZSBwYXRlbnQgbGF3LlxuICpcbiAqIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIERJU1RSSUJVVE9SUyBCRSBMSUFCTEUgVE8gQU5ZIFBBUlRZIEZPUlxuICogRElSRUNULCBJTkRJUkVDVCwgU1BFQ0lBTCwgSU5DSURFTlRBTCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIEFSSVNJTkcgT1VUXG4gKiBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIElUUyBET0NVTUVOVEFUSU9OLCBPUiBBTlkgREVSSVZBVElWRVMgVEhFUkVPRixcbiAqIEVWRU4gSUYgVEhFIEFVVEhPUlMgSEFWRSBCRUVOIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICpcbiAqIFRIRSBBVVRIT1JTIEFORCBESVNUUklCVVRPUlMgU1BFQ0lGSUNBTExZIERJU0NMQUlNIEFOWSBXQVJSQU5USUVTLFxuICogSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsIEFORCBOT04tSU5GUklOR0VNRU5ULiAgVEhJUyBTT0ZUV0FSRSBJU1xuICogUFJPVklERUQgT04gQU4gXCJBUyBJU1wiIEJBU0lTLCBBTkQgVEhFIEFVVEhPUlMgQU5EIERJU1RSSUJVVE9SUyBIQVZFIE5PXG4gKiBPQkxJR0FUSU9OIFRPIFBST1ZJREUgTUFJTlRFTkFOQ0UsIFNVUFBPUlQsIFVQREFURVMsIEVOSEFOQ0VNRU5UUywgT1JcbiAqIE1PRElGSUNBVElPTlMuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gQ29ucmVjO1xuXG52YXIgRVBTSUxPTiA9IDFlLTEwO1xuXG5mdW5jdGlvbiBwb2ludHNFcXVhbChhLCBiKSB7XG4gIHZhciB4ID0gYS54IC0gYi54LCB5ID0gYS55IC0gYi55O1xuICByZXR1cm4geCAqIHggKyB5ICogeSA8IEVQU0lMT047XG59XG5cbmZ1bmN0aW9uIHJldmVyc2VMaXN0KGxpc3QpIHtcbiAgdmFyIHBwID0gbGlzdC5oZWFkO1xuXG4gIHdoaWxlIChwcCkge1xuICAgIC8vIHN3YXAgcHJldi9uZXh0IHBvaW50ZXJzXG4gICAgdmFyIHRlbXAgPSBwcC5uZXh0O1xuICAgIHBwLm5leHQgPSBwcC5wcmV2O1xuICAgIHBwLnByZXYgPSB0ZW1wO1xuXG4gICAgLy8gY29udGludWUgdGhyb3VnaCB0aGUgbGlzdFxuICAgIHBwID0gdGVtcDtcbiAgfVxuXG4gIC8vIHN3YXAgaGVhZC90YWlsIHBvaW50ZXJzXG4gIHZhciB0ZW1wID0gbGlzdC5oZWFkO1xuICBsaXN0LmhlYWQgPSBsaXN0LnRhaWw7XG4gIGxpc3QudGFpbCA9IHRlbXA7XG59XG5cbmZ1bmN0aW9uIENvbnRvdXJCdWlsZGVyKGxldmVsKSB7XG4gIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgdGhpcy5zID0gbnVsbDtcbiAgdGhpcy5jb3VudCA9IDA7XG59XG5Db250b3VyQnVpbGRlci5wcm90b3R5cGUucmVtb3ZlX3NlcSA9IGZ1bmN0aW9uKGxpc3QpIHtcbiAgLy8gaWYgbGlzdCBpcyB0aGUgZmlyc3QgaXRlbSwgc3RhdGljIHB0ciBzIGlzIHVwZGF0ZWRcbiAgaWYgKGxpc3QucHJldikge1xuICAgIGxpc3QucHJldi5uZXh0ID0gbGlzdC5uZXh0O1xuICB9IGVsc2Uge1xuICAgIHRoaXMucyA9IGxpc3QubmV4dDtcbiAgfVxuXG4gIGlmIChsaXN0Lm5leHQpIHtcbiAgICBsaXN0Lm5leHQucHJldiA9IGxpc3QucHJldjtcbiAgfVxuICAtLXRoaXMuY291bnQ7XG59XG5Db250b3VyQnVpbGRlci5wcm90b3R5cGUuYWRkU2VnbWVudCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIHNzID0gdGhpcy5zO1xuICB2YXIgbWEgPSBudWxsO1xuICB2YXIgbWIgPSBudWxsO1xuICB2YXIgcHJlcGVuZEEgPSBmYWxzZTtcbiAgdmFyIHByZXBlbmRCID0gZmFsc2U7XG5cbiAgd2hpbGUgKHNzKSB7XG4gICAgaWYgKG1hID09IG51bGwpIHtcbiAgICAgIC8vIG5vIG1hdGNoIGZvciBhIHlldFxuICAgICAgaWYgKHBvaW50c0VxdWFsKGEsIHNzLmhlYWQucCkpIHtcbiAgICAgICAgbWEgPSBzcztcbiAgICAgICAgcHJlcGVuZEEgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChwb2ludHNFcXVhbChhLCBzcy50YWlsLnApKSB7XG4gICAgICAgIG1hID0gc3M7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYiA9PSBudWxsKSB7XG4gICAgICAvLyBubyBtYXRjaCBmb3IgYiB5ZXRcbiAgICAgIGlmIChwb2ludHNFcXVhbChiLCBzcy5oZWFkLnApKSB7XG4gICAgICAgIG1iID0gc3M7XG4gICAgICAgIHByZXBlbmRCID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAocG9pbnRzRXF1YWwoYiwgc3MudGFpbC5wKSkge1xuICAgICAgICBtYiA9IHNzO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBpZiB3ZSBtYXRjaGVkIGJvdGggbm8gbmVlZCB0byBjb250aW51ZSBzZWFyY2hpbmdcbiAgICBpZiAobWIgIT0gbnVsbCAmJiBtYSAhPSBudWxsKSB7XG4gICAgICBicmVhaztcbiAgICB9IGVsc2Uge1xuICAgICAgc3MgPSBzcy5uZXh0O1xuICAgIH1cbiAgfVxuXG4gIC8vIGMgaXMgdGhlIGNhc2Ugc2VsZWN0b3IgYmFzZWQgb24gd2hpY2ggb2YgbWEgYW5kL29yIG1iIGFyZSBzZXRcbiAgdmFyIGMgPSAoKG1hICE9IG51bGwpID8gMSA6IDApIHwgKChtYiAhPSBudWxsKSA/IDIgOiAwKTtcblxuICBzd2l0Y2goYykge1xuICAgIGNhc2UgMDogICAvLyBib3RoIHVubWF0Y2hlZCwgYWRkIGFzIG5ldyBzZXF1ZW5jZVxuICAgICAgdmFyIGFhID0ge3A6IGEsIHByZXY6IG51bGx9O1xuICAgICAgdmFyIGJiID0ge3A6IGIsIG5leHQ6IG51bGx9O1xuICAgICAgYWEubmV4dCA9IGJiO1xuICAgICAgYmIucHJldiA9IGFhO1xuXG4gICAgICAvLyBjcmVhdGUgc2VxdWVuY2UgZWxlbWVudCBhbmQgcHVzaCBvbnRvIGhlYWQgb2YgbWFpbiBsaXN0LiBUaGUgb3JkZXJcbiAgICAgIC8vIG9mIGl0ZW1zIGluIHRoaXMgbGlzdCBpcyB1bmltcG9ydGFudFxuICAgICAgbWEgPSB7aGVhZDogYWEsIHRhaWw6IGJiLCBuZXh0OiB0aGlzLnMsIHByZXY6IG51bGwsIGNsb3NlZDogZmFsc2V9O1xuICAgICAgaWYgKHRoaXMucykge1xuICAgICAgICB0aGlzLnMucHJldiA9IG1hO1xuICAgICAgfVxuICAgICAgdGhpcy5zID0gbWE7XG5cbiAgICAgICsrdGhpcy5jb3VudDsgICAgLy8gbm90IGVzc2VudGlhbCAtIHRyYWNrcyBudW1iZXIgb2YgdW5tZXJnZWQgc2VxdWVuY2VzXG4gICAgYnJlYWs7XG5cbiAgICBjYXNlIDE6ICAgLy8gYSBtYXRjaGVkLCBiIGRpZCBub3QgLSB0aHVzIGIgZXh0ZW5kcyBzZXF1ZW5jZSBtYVxuICAgICAgdmFyIHBwID0ge3A6IGJ9O1xuXG4gICAgICBpZiAocHJlcGVuZEEpIHtcbiAgICAgICAgcHAubmV4dCA9IG1hLmhlYWQ7XG4gICAgICAgIHBwLnByZXYgPSBudWxsO1xuICAgICAgICBtYS5oZWFkLnByZXYgPSBwcDtcbiAgICAgICAgbWEuaGVhZCA9IHBwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHAubmV4dCA9IG51bGw7XG4gICAgICAgIHBwLnByZXYgPSBtYS50YWlsO1xuICAgICAgICBtYS50YWlsLm5leHQgPSBwcDtcbiAgICAgICAgbWEudGFpbCA9IHBwO1xuICAgICAgfVxuICAgIGJyZWFrO1xuXG4gICAgY2FzZSAyOiAgIC8vIGIgbWF0Y2hlZCwgYSBkaWQgbm90IC0gdGh1cyBhIGV4dGVuZHMgc2VxdWVuY2UgbWJcbiAgICAgIHZhciBwcCA9IHtwOiBhfTtcblxuICAgICAgaWYgKHByZXBlbmRCKSB7XG4gICAgICAgIHBwLm5leHQgPSBtYi5oZWFkO1xuICAgICAgICBwcC5wcmV2ID0gbnVsbDtcbiAgICAgICAgbWIuaGVhZC5wcmV2ID0gcHA7XG4gICAgICAgIG1iLmhlYWQgPSBwcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBwLm5leHQgPSBudWxsO1xuICAgICAgICBwcC5wcmV2ID0gbWIudGFpbDtcbiAgICAgICAgbWIudGFpbC5uZXh0ID0gcHA7XG4gICAgICAgIG1iLnRhaWwgPSBwcDtcbiAgICAgIH1cbiAgICBicmVhaztcblxuICAgIGNhc2UgMzogICAvLyBib3RoIG1hdGNoZWQsIGNhbiBtZXJnZSBzZXF1ZW5jZXNcbiAgICAgIC8vIGlmIHRoZSBzZXF1ZW5jZXMgYXJlIHRoZSBzYW1lLCBkbyBub3RoaW5nLCBhcyB3ZSBhcmUgc2ltcGx5IGNsb3NpbmcgdGhpcyBwYXRoIChjb3VsZCBzZXQgYSBmbGFnKVxuXG4gICAgICBpZiAobWEgPT09IG1iKSB7XG4gICAgICAgIHZhciBwcCA9IHtwOiBtYS50YWlsLnAsIG5leHQ6IG1hLmhlYWQsIHByZXY6IG51bGx9O1xuICAgICAgICBtYS5oZWFkLnByZXYgPSBwcDtcbiAgICAgICAgbWEuaGVhZCA9IHBwO1xuICAgICAgICBtYS5jbG9zZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gdGhlcmUgYXJlIDQgd2F5cyB0aGUgc2VxdWVuY2UgcGFpciBjYW4gYmUgam9pbmVkLiBUaGUgY3VycmVudCBzZXR0aW5nIG9mIHByZXBlbmRBIGFuZFxuICAgICAgLy8gcHJlcGVuZEIgd2lsbCB0ZWxsIHVzIHdoaWNoIHR5cGUgb2Ygam9pbiBpcyBuZWVkZWQuIEZvciBoZWFkL2hlYWQgYW5kIHRhaWwvdGFpbCBqb2luc1xuICAgICAgLy8gb25lIHNlcXVlbmNlIG5lZWRzIHRvIGJlIHJldmVyc2VkXG4gICAgICBzd2l0Y2goKHByZXBlbmRBID8gMSA6IDApIHwgKHByZXBlbmRCID8gMiA6IDApKSB7XG4gICAgICAgIGNhc2UgMDogICAvLyB0YWlsLXRhaWxcbiAgICAgICAgICAvLyByZXZlcnNlIG1hIGFuZCBhcHBlbmQgdG8gbWJcbiAgICAgICAgICByZXZlcnNlTGlzdChtYSk7XG4gICAgICAgICAgLy8gZmFsbCB0aHJvdWdoIHRvIGhlYWQvdGFpbCBjYXNlXG4gICAgICAgIGNhc2UgMTogICAvLyBoZWFkLXRhaWxcbiAgICAgICAgICAvLyBtYSBpcyBhcHBlbmRlZCB0byBtYiBhbmQgbWEgZGlzY2FyZGVkXG4gICAgICAgICAgbWIudGFpbC5uZXh0ID0gbWEuaGVhZDtcbiAgICAgICAgICBtYS5oZWFkLnByZXYgPSBtYi50YWlsO1xuICAgICAgICAgIG1iLnRhaWwgPSBtYS50YWlsO1xuXG4gICAgICAgICAgLy9kaXNjYXJkIG1hIHNlcXVlbmNlIHJlY29yZFxuICAgICAgICAgIHRoaXMucmVtb3ZlX3NlcShtYSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMzogICAvLyBoZWFkLWhlYWRcbiAgICAgICAgICAvLyByZXZlcnNlIG1hIGFuZCBhcHBlbmQgbWIgdG8gaXRcbiAgICAgICAgICByZXZlcnNlTGlzdChtYSk7XG4gICAgICAgICAgLy8gZmFsbCB0aHJvdWdoIHRvIHRhaWwvaGVhZCBjYXNlXG4gICAgICAgIGNhc2UgMjogICAvLyB0YWlsLWhlYWRcbiAgICAgICAgICAvLyBtYiBpcyBhcHBlbmRlZCB0byBtYSBhbmQgbWIgaXMgZGlzY2FyZGVkXG4gICAgICAgICAgbWEudGFpbC5uZXh0ID0gbWIuaGVhZDtcbiAgICAgICAgICBtYi5oZWFkLnByZXYgPSBtYS50YWlsO1xuICAgICAgICAgIG1hLnRhaWwgPSBtYi50YWlsO1xuXG4gICAgICAgICAgLy9kaXNjYXJkIG1iIHNlcXVlbmNlIHJlY29yZFxuICAgICAgICAgIHRoaXMucmVtb3ZlX3NlcShtYik7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIENPTlJFQy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBkcmF3Q29udG91ciBmdW5jdGlvbiBmb3IgZHJhd2luZyBjb250b3VyLiAgRGVmYXVsdHMgdG8gYVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tIFwiY29udG91ciBidWlsZGVyXCIsIHdoaWNoIHBvcHVsYXRlcyB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRvdXJzIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBDb25yZWMoZHJhd0NvbnRvdXIpIHtcbiAgaWYgKCFkcmF3Q29udG91cikge1xuICAgIHZhciBjID0gdGhpcztcbiAgICBjLmNvbnRvdXJzID0ge307XG4gICAgLyoqXG4gICAgICogZHJhd0NvbnRvdXIgLSBpbnRlcmZhY2UgZm9yIGltcGxlbWVudGluZyB0aGUgdXNlciBzdXBwbGllZCBtZXRob2QgdG9cbiAgICAgKiByZW5kZXIgdGhlIGNvdW50b3Vycy5cbiAgICAgKlxuICAgICAqIERyYXdzIGEgbGluZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIGNvb3JkaW5hdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0WCAgICAtIHN0YXJ0IGNvb3JkaW5hdGUgZm9yIFhcbiAgICAgKiBAcGFyYW0gc3RhcnRZICAgIC0gc3RhcnQgY29vcmRpbmF0ZSBmb3IgWVxuICAgICAqIEBwYXJhbSBlbmRYICAgICAgLSBlbmQgY29vcmRpbmF0ZSBmb3IgWFxuICAgICAqIEBwYXJhbSBlbmRZICAgICAgLSBlbmQgY29vcmRpbmF0ZSBmb3IgWVxuICAgICAqIEBwYXJhbSBjb250b3VyTGV2ZWwgLSBDb250b3VyIGxldmVsIGZvciBsaW5lLlxuICAgICAqL1xuICAgIHRoaXMuZHJhd0NvbnRvdXIgPSBmdW5jdGlvbihzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSwgY29udG91ckxldmVsLCBrKSB7XG4gICAgICB2YXIgY2IgPSBjLmNvbnRvdXJzW2tdO1xuICAgICAgaWYgKCFjYikge1xuICAgICAgICBjYiA9IGMuY29udG91cnNba10gPSBuZXcgQ29udG91ckJ1aWxkZXIoY29udG91ckxldmVsKTtcbiAgICAgIH1cbiAgICAgIGNiLmFkZFNlZ21lbnQoe3g6IHN0YXJ0WCwgeTogc3RhcnRZfSwge3g6IGVuZFgsIHk6IGVuZFl9KTtcbiAgICB9XG4gICAgdGhpcy5jb250b3VyTGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGwgPSBbXTtcbiAgICAgIHZhciBhID0gYy5jb250b3VycztcbiAgICAgIGZvciAodmFyIGsgaW4gYSkge1xuICAgICAgICB2YXIgcyA9IGFba10ucztcbiAgICAgICAgdmFyIGxldmVsID0gYVtrXS5sZXZlbDtcbiAgICAgICAgd2hpbGUgKHMpIHtcbiAgICAgICAgICB2YXIgaCA9IHMuaGVhZDtcbiAgICAgICAgICB2YXIgbDIgPSBbXTtcbiAgICAgICAgICBsMi5sZXZlbCA9IGxldmVsO1xuICAgICAgICAgIGwyLmsgPSBrO1xuICAgICAgICAgIHdoaWxlIChoICYmIGgucCkge1xuICAgICAgICAgICAgbDIucHVzaChoLnApO1xuICAgICAgICAgICAgaCA9IGgubmV4dDtcbiAgICAgICAgICB9XG4gICAgICAgICAgbC5wdXNoKGwyKTtcbiAgICAgICAgICBzID0gcy5uZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5rIC0gYi5rIH0pO1xuICAgICAgcmV0dXJuIGw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuZHJhd0NvbnRvdXIgPSBkcmF3Q29udG91cjtcbiAgfVxuICB0aGlzLmggID0gbmV3IEFycmF5KDUpO1xuICB0aGlzLnNoID0gbmV3IEFycmF5KDUpO1xuICB0aGlzLnhoID0gbmV3IEFycmF5KDUpO1xuICB0aGlzLnloID0gbmV3IEFycmF5KDUpO1xufVxuXG4vKipcbiAqIGNvbnRvdXIgaXMgYSBjb250b3VyaW5nIHN1YnJvdXRpbmUgZm9yIHJlY3Rhbmd1bGFyaWx5IHNwYWNlZCBkYXRhXG4gKlxuICogSXQgZW1pdHMgY2FsbHMgdG8gYSBsaW5lIGRyYXdpbmcgc3Vicm91dGluZSBzdXBwbGllZCBieSB0aGUgdXNlciB3aGljaFxuICogZHJhd3MgYSBjb250b3VyIG1hcCBjb3JyZXNwb25kaW5nIHRvIHJlYWwqNGRhdGEgb24gYSByYW5kb21seSBzcGFjZWRcbiAqIHJlY3Rhbmd1bGFyIGdyaWQuIFRoZSBjb29yZGluYXRlcyBlbWl0dGVkIGFyZSBpbiB0aGUgc2FtZSB1bml0cyBnaXZlbiBpblxuICogdGhlIHgoKSBhbmQgeSgpIGFycmF5cy5cbiAqXG4gKiBBbnkgbnVtYmVyIG9mIGNvbnRvdXIgbGV2ZWxzIG1heSBiZSBzcGVjaWZpZWQgYnV0IHRoZXkgbXVzdCBiZSBpbiBvcmRlciBvZlxuICogaW5jcmVhc2luZyB2YWx1ZS5cbiAqXG4gKlxuICogQHBhcmFtIHtudW1iZXJbXVtdfSBkIC0gbWF0cml4IG9mIGRhdGEgdG8gY29udG91clxuICogQHBhcmFtIHtudW1iZXJ9IGlsYixpdWIsamxiLGp1YiAtIGluZGV4IGJvdW5kcyBvZiBkYXRhIG1hdHJpeFxuICpcbiAqICAgICAgICAgICAgIFRoZSBmb2xsb3dpbmcgdHdvLCBvbmUgZGltZW5zaW9uYWwgYXJyYXlzICh4IGFuZCB5KSBjb250YWluXG4gKiAgICAgICAgICAgICB0aGUgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgY29vcmRpbmF0ZXMgb2YgZWFjaCBzYW1wbGUgcG9pbnRzLlxuICogQHBhcmFtIHtudW1iZXJbXX0geCAgLSBkYXRhIG1hdHJpeCBjb2x1bW4gY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7bnVtYmVyW119IHkgIC0gZGF0YSBtYXRyaXggcm93IGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge251bWJlcn0gbmMgICAtIG51bWJlciBvZiBjb250b3VyIGxldmVsc1xuICogQHBhcmFtIHtudW1iZXJbXX0geiAgLSBjb250b3VyIGxldmVscyBpbiBpbmNyZWFzaW5nIG9yZGVyLlxuICovXG5Db25yZWMucHJvdG90eXBlLmNvbnRvdXIgPSBmdW5jdGlvbihkLCBpbGIsIGl1YiwgamxiLCBqdWIsIHgsIHksIG5jLCB6KSB7XG4gIHZhciBoID0gdGhpcy5oLCBzaCA9IHRoaXMuc2gsIHhoID0gdGhpcy54aCwgeWggPSB0aGlzLnloO1xuICB2YXIgZHJhd0NvbnRvdXIgPSB0aGlzLmRyYXdDb250b3VyO1xuICB0aGlzLmNvbnRvdXJzID0ge307XG5cbiAgLyoqIHByaXZhdGUgKi9cbiAgdmFyIHhzZWN0ID0gZnVuY3Rpb24ocDEsIHAyKXtcbiAgICByZXR1cm4gKGhbcDJdKnhoW3AxXS1oW3AxXSp4aFtwMl0pLyhoW3AyXS1oW3AxXSk7XG4gIH1cblxuICB2YXIgeXNlY3QgPSBmdW5jdGlvbihwMSwgcDIpe1xuICAgIHJldHVybiAoaFtwMl0qeWhbcDFdLWhbcDFdKnloW3AyXSkvKGhbcDJdLWhbcDFdKTtcbiAgfVxuICB2YXIgbTE7XG4gIHZhciBtMjtcbiAgdmFyIG0zO1xuICB2YXIgY2FzZV92YWx1ZTtcbiAgdmFyIGRtaW47XG4gIHZhciBkbWF4O1xuICB2YXIgeDEgPSAwLjA7XG4gIHZhciB4MiA9IDAuMDtcbiAgdmFyIHkxID0gMC4wO1xuICB2YXIgeTIgPSAwLjA7XG5cbiAgLy8gVGhlIGluZGV4aW5nIG9mIGltIGFuZCBqbSBzaG91bGQgYmUgbm90ZWQgYXMgaXQgaGFzIHRvIHN0YXJ0IGZyb20gemVyb1xuICAvLyB1bmxpa2UgdGhlIGZvcnRyYW4gY291bnRlciBwYXJ0XG4gIHZhciBpbSA9IFswLCAxLCAxLCAwXTtcbiAgdmFyIGptID0gWzAsIDAsIDEsIDFdO1xuXG4gIC8vIE5vdGUgdGhhdCBjYXN0YWIgaXMgYXJyYW5nZWQgZGlmZmVyZW50bHkgZnJvbSB0aGUgRk9SVFJBTiBjb2RlIGJlY2F1c2VcbiAgLy8gRm9ydHJhbiBhbmQgQy9DKysgYXJyYXlzIGFyZSB0cmFuc3Bvc2VkIG9mIGVhY2ggb3RoZXIsIGluIHRoaXMgY2FzZVxuICAvLyBpdCBpcyBtb3JlIHRyaWNreSBhcyBjYXN0YWIgaXMgaW4gMyBkaW1lbnNpb25zXG4gIHZhciBjYXN0YWIgPSBbXG4gICAgW1xuICAgICAgWzAsIDAsIDhdLCBbMCwgMiwgNV0sIFs3LCA2LCA5XVxuICAgIF0sXG4gICAgW1xuICAgICAgWzAsIDMsIDRdLCBbMSwgMywgMV0sIFs0LCAzLCAwXVxuICAgIF0sXG4gICAgW1xuICAgICAgWzksIDYsIDddLCBbNSwgMiwgMF0sIFs4LCAwLCAwXVxuICAgIF1cbiAgXTtcblxuICBmb3IgKHZhciBqPShqdWItMSk7aj49amxiO2otLSkge1xuICAgIGZvciAodmFyIGk9aWxiO2k8PWl1Yi0xO2krKykge1xuICAgICAgdmFyIHRlbXAxLCB0ZW1wMjtcbiAgICAgIHRlbXAxID0gTWF0aC5taW4oZFtpXVtqXSxkW2ldW2orMV0pO1xuICAgICAgdGVtcDIgPSBNYXRoLm1pbihkW2krMV1bal0sZFtpKzFdW2orMV0pO1xuICAgICAgZG1pbiAgPSBNYXRoLm1pbih0ZW1wMSx0ZW1wMik7XG4gICAgICB0ZW1wMSA9IE1hdGgubWF4KGRbaV1bal0sZFtpXVtqKzFdKTtcbiAgICAgIHRlbXAyID0gTWF0aC5tYXgoZFtpKzFdW2pdLGRbaSsxXVtqKzFdKTtcbiAgICAgIGRtYXggID0gTWF0aC5tYXgodGVtcDEsdGVtcDIpO1xuXG4gICAgICBpZiAoZG1heD49elswXSYmZG1pbjw9eltuYy0xXSkge1xuICAgICAgICBmb3IgKHZhciBrPTA7azxuYztrKyspIHtcbiAgICAgICAgICBpZiAoeltrXT49ZG1pbiYmeltrXTw9ZG1heCkge1xuICAgICAgICAgICAgZm9yICh2YXIgbT00O20+PTA7bS0tKSB7XG4gICAgICAgICAgICAgIGlmIChtPjApIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgaW5kZXhpbmcgb2YgaW0gYW5kIGptIHNob3VsZCBiZSBub3RlZCBhcyBpdCBoYXMgdG9cbiAgICAgICAgICAgICAgICAvLyBzdGFydCBmcm9tIHplcm9cbiAgICAgICAgICAgICAgICBoW21dID0gZFtpK2ltW20tMV1dW2oram1bbS0xXV0teltrXTtcbiAgICAgICAgICAgICAgICB4aFttXSA9IHhbaStpbVttLTFdXTtcbiAgICAgICAgICAgICAgICB5aFttXSA9IHlbaitqbVttLTFdXTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoWzBdID0gMC4yNSooaFsxXStoWzJdK2hbM10raFs0XSk7XG4gICAgICAgICAgICAgICAgeGhbMF09MC41Kih4W2ldK3hbaSsxXSk7XG4gICAgICAgICAgICAgICAgeWhbMF09MC41Kih5W2pdK3lbaisxXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGhbbV0+RVBTSUxPTikge1xuICAgICAgICAgICAgICAgIHNoW21dID0gMTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoW21dPC1FUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgc2hbbV0gPSAtMTtcbiAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgc2hbbV0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIE5vdGU6IGF0IHRoaXMgc3RhZ2UgdGhlIHJlbGF0aXZlIGhlaWdodHMgb2YgdGhlIGNvcm5lcnMgYW5kIHRoZVxuICAgICAgICAgICAgLy8gY2VudHJlIGFyZSBpbiB0aGUgaCBhcnJheSwgYW5kIHRoZSBjb3JyZXNwb25kaW5nIGNvb3JkaW5hdGVzIGFyZVxuICAgICAgICAgICAgLy8gaW4gdGhlIHhoIGFuZCB5aCBhcnJheXMuIFRoZSBjZW50cmUgb2YgdGhlIGJveCBpcyBpbmRleGVkIGJ5IDBcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgNCBjb3JuZXJzIGJ5IDEgdG8gNCBhcyBzaG93biBiZWxvdy5cbiAgICAgICAgICAgIC8vIEVhY2ggdHJpYW5nbGUgaXMgdGhlbiBpbmRleGVkIGJ5IHRoZSBwYXJhbWV0ZXIgbSwgYW5kIHRoZSAzXG4gICAgICAgICAgICAvLyB2ZXJ0aWNlcyBvZiBlYWNoIHRyaWFuZ2xlIGFyZSBpbmRleGVkIGJ5IHBhcmFtZXRlcnMgbTEsbTIsYW5kXG4gICAgICAgICAgICAvLyBtMy5cbiAgICAgICAgICAgIC8vIEl0IGlzIGFzc3VtZWQgdGhhdCB0aGUgY2VudHJlIG9mIHRoZSBib3ggaXMgYWx3YXlzIHZlcnRleCAyXG4gICAgICAgICAgICAvLyB0aG91Z2ggdGhpcyBpc2ltcG9ydGFudCBvbmx5IHdoZW4gYWxsIDMgdmVydGljZXMgbGllIGV4YWN0bHkgb25cbiAgICAgICAgICAgIC8vIHRoZSBzYW1lIGNvbnRvdXIgbGV2ZWwsIGluIHdoaWNoIGNhc2Ugb25seSB0aGUgc2lkZSBvZiB0aGUgYm94XG4gICAgICAgICAgICAvLyBpcyBkcmF3bi5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICB2ZXJ0ZXggNCArLS0tLS0tLS0tLS0tLS0tLS0tLSsgdmVydGV4IDNcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgfCBcXCAgICAgICAgICAgICAgIC8gfFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICB8ICAgXFwgICAgbS0zICAgIC8gICB8XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHwgICAgIFxcICAgICAgIC8gICAgIHxcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgfCAgICAgICBcXCAgIC8gICAgICAgfFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICB8ICBtPTIgICAgWCAgIG09MiAgIHwgICAgICAgdGhlIGNlbnRyZSBpcyB2ZXJ0ZXggMFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICB8ICAgICAgIC8gICBcXCAgICAgICB8XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHwgICAgIC8gICAgICAgXFwgICAgIHxcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgfCAgIC8gICAgbT0xICAgIFxcICAgfFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICB8IC8gICAgICAgICAgICAgICBcXCB8XG4gICAgICAgICAgICAvLyAgICAgIHZlcnRleCAxICstLS0tLS0tLS0tLS0tLS0tLS0tKyB2ZXJ0ZXggMlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICBTY2FuIGVhY2ggdHJpYW5nbGUgaW4gdGhlIGJveFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGZvciAobT0xO208PTQ7bSsrKSB7XG4gICAgICAgICAgICAgIG0xID0gbTtcbiAgICAgICAgICAgICAgbTIgPSAwO1xuICAgICAgICAgICAgICBpZiAobSE9NCkge1xuICAgICAgICAgICAgICAgICAgbTMgPSBtKzE7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBtMyA9IDE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZV92YWx1ZSA9IGNhc3RhYltzaFttMV0rMV1bc2hbbTJdKzFdW3NoW20zXSsxXTtcbiAgICAgICAgICAgICAgaWYgKGNhc2VfdmFsdWUhPTApIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNhc2VfdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMTogLy8gTGluZSBiZXR3ZWVuIHZlcnRpY2VzIDEgYW5kIDJcbiAgICAgICAgICAgICAgICAgICAgeDE9eGhbbTFdO1xuICAgICAgICAgICAgICAgICAgICB5MT15aFttMV07XG4gICAgICAgICAgICAgICAgICAgIHgyPXhoW20yXTtcbiAgICAgICAgICAgICAgICAgICAgeTI9eWhbbTJdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgMjogLy8gTGluZSBiZXR3ZWVuIHZlcnRpY2VzIDIgYW5kIDNcbiAgICAgICAgICAgICAgICAgICAgeDE9eGhbbTJdO1xuICAgICAgICAgICAgICAgICAgICB5MT15aFttMl07XG4gICAgICAgICAgICAgICAgICAgIHgyPXhoW20zXTtcbiAgICAgICAgICAgICAgICAgICAgeTI9eWhbbTNdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgMzogLy8gTGluZSBiZXR3ZWVuIHZlcnRpY2VzIDMgYW5kIDFcbiAgICAgICAgICAgICAgICAgICAgeDE9eGhbbTNdO1xuICAgICAgICAgICAgICAgICAgICB5MT15aFttM107XG4gICAgICAgICAgICAgICAgICAgIHgyPXhoW20xXTtcbiAgICAgICAgICAgICAgICAgICAgeTI9eWhbbTFdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgNDogLy8gTGluZSBiZXR3ZWVuIHZlcnRleCAxIGFuZCBzaWRlIDItM1xuICAgICAgICAgICAgICAgICAgICB4MT14aFttMV07XG4gICAgICAgICAgICAgICAgICAgIHkxPXloW20xXTtcbiAgICAgICAgICAgICAgICAgICAgeDI9eHNlY3QobTIsbTMpO1xuICAgICAgICAgICAgICAgICAgICB5Mj15c2VjdChtMixtMyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSA1OiAvLyBMaW5lIGJldHdlZW4gdmVydGV4IDIgYW5kIHNpZGUgMy0xXG4gICAgICAgICAgICAgICAgICAgIHgxPXhoW20yXTtcbiAgICAgICAgICAgICAgICAgICAgeTE9eWhbbTJdO1xuICAgICAgICAgICAgICAgICAgICB4Mj14c2VjdChtMyxtMSk7XG4gICAgICAgICAgICAgICAgICAgIHkyPXlzZWN0KG0zLG0xKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDY6IC8vICBMaW5lIGJldHdlZW4gdmVydGV4IDMgYW5kIHNpZGUgMS0yXG4gICAgICAgICAgICAgICAgICAgIHgxPXhoW20zXTtcbiAgICAgICAgICAgICAgICAgICAgeTE9eWhbbTNdO1xuICAgICAgICAgICAgICAgICAgICB4Mj14c2VjdChtMSxtMik7XG4gICAgICAgICAgICAgICAgICAgIHkyPXlzZWN0KG0xLG0yKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDc6IC8vIExpbmUgYmV0d2VlbiBzaWRlcyAxLTIgYW5kIDItM1xuICAgICAgICAgICAgICAgICAgICB4MT14c2VjdChtMSxtMik7XG4gICAgICAgICAgICAgICAgICAgIHkxPXlzZWN0KG0xLG0yKTtcbiAgICAgICAgICAgICAgICAgICAgeDI9eHNlY3QobTIsbTMpO1xuICAgICAgICAgICAgICAgICAgICB5Mj15c2VjdChtMixtMyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSA4OiAvLyBMaW5lIGJldHdlZW4gc2lkZXMgMi0zIGFuZCAzLTFcbiAgICAgICAgICAgICAgICAgICAgeDE9eHNlY3QobTIsbTMpO1xuICAgICAgICAgICAgICAgICAgICB5MT15c2VjdChtMixtMyk7XG4gICAgICAgICAgICAgICAgICAgIHgyPXhzZWN0KG0zLG0xKTtcbiAgICAgICAgICAgICAgICAgICAgeTI9eXNlY3QobTMsbTEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgOTogLy8gTGluZSBiZXR3ZWVuIHNpZGVzIDMtMSBhbmQgMS0yXG4gICAgICAgICAgICAgICAgICAgIHgxPXhzZWN0KG0zLG0xKTtcbiAgICAgICAgICAgICAgICAgICAgeTE9eXNlY3QobTMsbTEpO1xuICAgICAgICAgICAgICAgICAgICB4Mj14c2VjdChtMSxtMik7XG4gICAgICAgICAgICAgICAgICAgIHkyPXlzZWN0KG0xLG0yKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUHV0IHlvdXIgcHJvY2Vzc2luZyBjb2RlIGhlcmUgYW5kIGNvbW1lbnQgb3V0IHRoZSBwcmludGZcbiAgICAgICAgICAgICAgICAvL3ByaW50ZihcIiVmICVmICVmICVmICVmXFxuXCIseDEseTEseDIseTIseltrXSk7XG4gICAgICAgICAgICAgICAgZHJhd0NvbnRvdXIoeDEseTEseDIseTIseltrXSxrKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4iLCIvL2h0dHBzOi8vZ2l0aHViLmNvbS9qYXNvbmRhdmllcy9jb25yZWMuanNcbi8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNjMzMDUvZHJhd2luZy1hLXRvcG9ncmFwaGljYWwtbWFwXG52YXIgdGluID0gcmVxdWlyZSgndHVyZi10aW4nKTtcbnZhciBpbnNpZGUgPSByZXF1aXJlKCd0dXJmLWluc2lkZScpO1xudmFyIGdyaWQgPSByZXF1aXJlKCd0dXJmLWdyaWQnKTtcbnZhciBleHRlbnQgPSByZXF1aXJlKCd0dXJmLWV4dGVudCcpO1xudmFyIHBsYW5lcG9pbnQgPSByZXF1aXJlKCd0dXJmLXBsYW5lcG9pbnQnKTtcbnZhciBmZWF0dXJlY29sbGVjdGlvbiA9IHJlcXVpcmUoJ3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24nKTtcbnZhciBsaW5lc3RyaW5nID0gcmVxdWlyZSgndHVyZi1saW5lc3RyaW5nJyk7XG52YXIgcG9seWdvbiA9IHJlcXVpcmUoJ3R1cmYtcG9seWdvbicpO1xudmFyIHBvaW50ID0gcmVxdWlyZSgndHVyZi1wb2ludCcpO1xudmFyIHNxdWFyZSA9IHJlcXVpcmUoJ3R1cmYtc3F1YXJlJyk7XG52YXIgc2l6ZSA9IHJlcXVpcmUoJ3R1cmYtc2l6ZScpO1xudmFyIENvbnJlYyA9IHJlcXVpcmUoJy4vY29ucmVjLmpzJyk7XG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXMgd2l0aCB6LXZhbHVlcyBhbmQgYW4gYXJyYXkgb2ZcbiAqIHZhbHVlIGJyZWFrcyBhbmQgZ2VuZXJhdGVzIGZpbGxlZCBjb250b3VyIGlzb2JhbmRzLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9pc29iYW5kc1xuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9pbnRzIGEgRmVlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSB6IHRoZSBwcm9wZXJ0eSBuYW1lIGluIGBwb2ludHNgIGZyb20gd2hpY2ggei12YWx1ZXMgd2lsbCBiZSBwdWxsZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIHJlc29sdXRpb24gb2YgdGhlIHVuZGVybHlpbmcgZ3JpZFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBicmVha3Mgd2hlcmUgdG8gZHJhdyBjb250b3Vyc1xuICogQHJldHVybnMge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyByZXByZXNlbnRpbmcgaXNvYmFuZHNcbiAqIEBleGFtcGxlXG4gKiAvLyBjcmVhdGUgcmFuZG9tIHBvaW50cyB3aXRoIHJhbmRvbVxuICogLy8gei12YWx1ZXMgaW4gdGhlaXIgcHJvcGVydGllc1xuICogdmFyIHBvaW50cyA9IHR1cmYucmFuZG9tKCdwb2ludCcsIDEwMCwge1xuICogICBiYm94OiBbMCwgMzAsIDIwLCA1MF1cbiAqIH0pO1xuICogZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMuZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAqICAgcG9pbnRzLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMueiA9IE1hdGgucmFuZG9tKCkgKiAxMDtcbiAqIH1cbiAqIHZhciBicmVha3MgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdO1xuICogdmFyIGlzb2xpbmVkID0gdHVyZi5pc29iYW5kcyhwb2ludHMsICd6JywgMTUsIGJyZWFrcyk7XG4gKiAvLz1pc29saW5lZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50cywgeiwgcmVzb2x1dGlvbiwgYnJlYWtzKXtcbiAgdmFyIGFkZEVkZ2VzUmVzdWx0ID0gYWRkRWRnZXMocG9pbnRzLCB6LCByZXNvbHV0aW9uKTtcblxuICB2YXIgdGluUmVzdWx0ID0gdGluKHBvaW50cywgeik7XG4gIHZhciBleHRlbnRCQm94ID0gZXh0ZW50KHBvaW50cyk7XG4gIHZhciBzcXVhcmVCQm94ID0gc3F1YXJlKGV4dGVudEJCb3gpO1xuICB2YXIgZ3JpZFJlc3VsdCA9IGdyaWQoc3F1YXJlQkJveCwgcmVzb2x1dGlvbik7XG4gIHZhciBkYXRhID0gW107XG5cbiAgZ3JpZFJlc3VsdC5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHB0KXtcbiAgICB0aW5SZXN1bHQuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbih0cmlhbmdsZSl7XG4gICAgICBpZiAoaW5zaWRlKHB0LCB0cmlhbmdsZSkpIHtcbiAgICAgICAgcHQucHJvcGVydGllcyA9IHt9O1xuICAgICAgICBwdC5wcm9wZXJ0aWVzW3pdID0gcGxhbmVwb2ludChwdCwgdHJpYW5nbGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmKCFwdC5wcm9wZXJ0aWVzKXtcbiAgICAgIHB0LnByb3BlcnRpZXMgPSB7fTtcbiAgICAgIHB0LnByb3BlcnRpZXNbel0gPSAtMTAwO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGRlcHRoID0gTWF0aC5zcXJ0KGdyaWRSZXN1bHQuZmVhdHVyZXMubGVuZ3RoKTtcbiAgZm9yICh2YXIgeD0wOyB4PGRlcHRoOyB4Kyspe1xuICAgIHZhciB4R3JvdXAgPSBncmlkUmVzdWx0LmZlYXR1cmVzLnNsaWNlKHggKiBkZXB0aCwgKHggKyAxKSAqIGRlcHRoKTtcbiAgICB2YXIgeEZsYXQgPSBbXTtcbiAgICB4R3JvdXAuZm9yRWFjaChmdW5jdGlvbih2ZXJ0aWNhbFBvaW50KXtcbiAgICAgIGlmKHZlcnRpY2FsUG9pbnQucHJvcGVydGllcyl7XG4gICAgICAgIHhGbGF0LnB1c2godmVydGljYWxQb2ludC5wcm9wZXJ0aWVzW3pdKTtcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgeEZsYXQucHVzaCgwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkYXRhLnB1c2goeEZsYXQpO1xuICB9XG4gIHZhciBpbnRlcnZhbCA9IChzcXVhcmVCQm94WzJdIC0gc3F1YXJlQkJveFswXSkgLyBkZXB0aDtcbiAgdmFyIHhDb29yZGluYXRlcyA9IFtdO1xuICB2YXIgeUNvb3JkaW5hdGVzID0gW107XG4gIGZvciAodmFyIHg9MDsgeDxkZXB0aDsgeCsrKXtcbiAgICB4Q29vcmRpbmF0ZXMucHVzaCh4ICogaW50ZXJ2YWwgKyBzcXVhcmVCQm94WzBdKTtcbiAgICB5Q29vcmRpbmF0ZXMucHVzaCh4ICogaW50ZXJ2YWwgKyBzcXVhcmVCQm94WzFdKTtcbiAgfVxuXG4gIC8vY2hhbmdlIHplcm8gYnJlYWtzIHRvIC4wMSB0byBkZWFsIHdpdGggYnVnIGluIGNvbnJlYyBhbGdvcml0aG1cbiAgYnJlYWtzID0gYnJlYWtzLm1hcChmdW5jdGlvbihudW0pIHtcbiAgICBpZihudW0gPT09IDApe1xuICAgICAgcmV0dXJuIDAuMDE7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICByZXR1cm4gbnVtO1xuICAgIH1cbiAgfSk7XG4gIC8vZGVkdXBsaWNhdGUgYnJlYWtzXG4gIGJyZWFrcyA9IHVuaXF1ZShicmVha3MpO1xuXG4gIHZhciBjID0gbmV3IENvbnJlYygpO1xuICBjLmNvbnRvdXIoZGF0YSwgMCwgcmVzb2x1dGlvbiwgMCwgcmVzb2x1dGlvbiwgeENvb3JkaW5hdGVzLCB5Q29vcmRpbmF0ZXMsIGJyZWFrcy5sZW5ndGgsIGJyZWFrcyk7XG4gIHZhciBjb250b3VyTGlzdCA9IGMuY29udG91ckxpc3QoKTtcblxuICB2YXIgZmMgPSBmZWF0dXJlY29sbGVjdGlvbihbXSk7XG4gIGNvbnRvdXJMaXN0LmZvckVhY2goZnVuY3Rpb24oYyl7XG4gICAgaWYoYy5sZW5ndGggPiAyKXtcbiAgICAgIHZhciBwb2x5Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGMuZm9yRWFjaChmdW5jdGlvbihjb29yZCl7XG4gICAgICAgIHBvbHlDb29yZGluYXRlcy5wdXNoKFtjb29yZC54LCBjb29yZC55XSk7XG4gICAgICB9KTtcbiAgICAgIHBvbHlDb29yZGluYXRlcy5wdXNoKFtjWzBdLngsIGNbMF0ueV0pO1xuICAgICAgdmFyIHBvbHkgPSBwb2x5Z29uKFtwb2x5Q29vcmRpbmF0ZXNdKTtcbiAgICAgIHBvbHkucHJvcGVydGllcyA9IHt9O1xuICAgICAgcG9seS5wcm9wZXJ0aWVzW3pdID0gYy5sZXZlbDtcbiAgICAgIGZjLmZlYXR1cmVzLnB1c2gocG9seSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZmM7XG59O1xuXG5mdW5jdGlvbiBhZGRFZGdlcyhwb2ludHMsIHosIHJlc29sdXRpb24pe1xuICB2YXIgZXh0ZW50QkJveCA9IGV4dGVudChwb2ludHMpLFxuICAgIHNpemVSZXN1bHQ7XG5cbiAgdmFyIHNxdWFyZUJCb3ggPSBzcXVhcmUoZXh0ZW50QkJveCk7XG4gIHZhciBzaXplQkJveCA9IHNpemUoc3F1YXJlQkJveCwgMC4zNSk7XG5cbiAgdmFyIGVkZ2VEaXN0YW5jZSA9IHNpemVCQm94WzJdIC0gc2l6ZUJCb3hbMF07XG4gIHZhciBleHRlbmREaXN0YW5jZSA9IGVkZ2VEaXN0YW5jZSAvIHJlc29sdXRpb247XG5cbiAgdmFyIHhtaW4gPSBzaXplQkJveFswXTtcbiAgdmFyIHltaW4gPSBzaXplQkJveFsxXTtcbiAgdmFyIHhtYXggPSBzaXplQkJveFsyXTtcbiAgdmFyIHltYXggPSBzaXplQkJveFszXTtcblxuICAvL2xlZnRcbiAgdmFyIGxlZnQgPSBbW3htaW4sIHltaW5dLFt4bWluLCB5bWF4XV07XG4gIGZvcih2YXIgaSA9IDA7IGk8PXJlc29sdXRpb247IGkrKyl7XG4gICAgdmFyIHB0ID0gcG9pbnQoW3htaW4sIHltaW4gKyAoZXh0ZW5kRGlzdGFuY2UgKiBpKV0pO1xuICAgIHB0LnByb3BlcnRpZXMgPSB7fTtcbiAgICBwdC5wcm9wZXJ0aWVzW3pdID0gLTEwMDtcbiAgICBwb2ludHMuZmVhdHVyZXMucHVzaChwdCk7XG4gIH1cblxuICB2YXIgaSwgcHQ7XG5cbiAgLy9ib3R0b21cbiAgdmFyIGJvdHRvbSA9IFtbeG1pbiwgeW1pbl0sW3htYXgsIHltaW5dXTtcbiAgZm9yKGkgPSAwOyBpPD1yZXNvbHV0aW9uOyBpKyspe1xuICAgIHB0ID0gcG9pbnQoW3htaW4gKyAoZXh0ZW5kRGlzdGFuY2UgKiBpKSwgeW1pbl0pO1xuICAgIHB0LnByb3BlcnRpZXMgPSB7fTtcbiAgICBwdC5wcm9wZXJ0aWVzW3pdID0gLTEwMDtcbiAgICBwb2ludHMuZmVhdHVyZXMucHVzaChwdCk7XG4gIH1cblxuICAvL3JpZ2h0XG4gIHZhciByaWdodCA9IFtbeG1heCwgeW1pbl0sW3htYXgsIHltYXhdXTtcbiAgZm9yKGkgPSAwOyBpPD1yZXNvbHV0aW9uOyBpKyspe1xuICAgIHB0ID0gcG9pbnQoW3htYXgsIHltaW4gKyAoZXh0ZW5kRGlzdGFuY2UgKiBpKV0pO1xuICAgIHB0LnByb3BlcnRpZXMgPSB7fTtcbiAgICBwdC5wcm9wZXJ0aWVzW3pdID0gLTEwMDtcbiAgICBwb2ludHMuZmVhdHVyZXMucHVzaChwdCk7XG4gIH1cblxuICAvL3RvcFxuICB2YXIgdG9wID0gW1t4bWluLCB5bWF4XSxbeG1heCwgeW1heF1dO1xuICBmb3IoaSA9IDA7IGk8PXJlc29sdXRpb247IGkrKyl7XG4gICAgcHQgPSBwb2ludChbeG1pbiArIChleHRlbmREaXN0YW5jZSAqIGkpLCB5bWF4XSk7XG4gICAgcHQucHJvcGVydGllcyA9IHt9O1xuICAgIHB0LnByb3BlcnRpZXNbel0gPSAtMTAwO1xuICAgIHBvaW50cy5mZWF0dXJlcy5wdXNoKHB0KTtcbiAgfVxuXG4gIHJldHVybiBwb2ludHM7XG59XG5cbmZ1bmN0aW9uIHVuaXF1ZShhKSB7XG4gIHJldHVybiBhLnJlZHVjZShmdW5jdGlvbihwLCBjKSB7XG4gICAgICBpZiAocC5pbmRleE9mKGMpIDwgMCkgcC5wdXNoKGMpO1xuICAgICAgcmV0dXJuIHA7XG4gIH0sIFtdKTtcbn1cbiIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZW52ZWxvcGUvbm9kZV9tb2R1bGVzL3R1cmYtZXh0ZW50L2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtZW52ZWxvcGUvbm9kZV9tb2R1bGVzL3R1cmYtZXh0ZW50L25vZGVfbW9kdWxlcy9mbGF0dGVuL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaW50ZXJzZWN0L25vZGVfbW9kdWxlcy90dXJmLWZlYXR1cmVjb2xsZWN0aW9uL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsInZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleHRlbnRzLCBkZXB0aCkge1xuICB2YXIgeG1pbiA9IGV4dGVudHNbMF07XG4gIHZhciB5bWluID0gZXh0ZW50c1sxXTtcbiAgdmFyIHhtYXggPSBleHRlbnRzWzJdO1xuICB2YXIgeW1heCA9IGV4dGVudHNbM107XG4gIHZhciBpbnRlcnZhbCA9ICh4bWF4IC0geG1pbikgLyBkZXB0aDtcbiAgdmFyIGNvb3JkcyA9IFtdO1xuICB2YXIgZmMgPSB7XG4gICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICBmZWF0dXJlczogW11cbiAgfTtcblxuICBmb3IgKHZhciB4PTA7IHg8PWRlcHRoOyB4Kyspe1xuICAgIGZvciAodmFyIHk9MDt5PD1kZXB0aDsgeSsrKXtcbiAgICAgIGZjLmZlYXR1cmVzLnB1c2gocG9pbnQoKHggKiBpbnRlcnZhbCkgKyB4bWluLCAoeSAqIGludGVydmFsKSArIHltaW4pKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZjO1xufVxuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLXRpbi9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWJlemllci9ub2RlX21vZHVsZXMvdHVyZi1saW5lc3RyaW5nL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9pbnQsIHRyaWFuZ2xlLCBkb25lKXtcbiAgdmFyIHggPSBwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSxcbiAgICAgIHkgPSBwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSxcbiAgICAgIHgxID0gdHJpYW5nbGUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF1bMF0sXG4gICAgICB5MSA9IHRyaWFuZ2xlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzBdWzFdLFxuICAgICAgejEgPSB0cmlhbmdsZS5wcm9wZXJ0aWVzLmEsXG4gICAgICB4MiA9IHRyaWFuZ2xlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzFdWzBdLFxuICAgICAgeTIgPSB0cmlhbmdsZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsxXVsxXSxcbiAgICAgIHoyID0gdHJpYW5nbGUucHJvcGVydGllcy5iLFxuICAgICAgeDMgPSB0cmlhbmdsZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsyXVswXSxcbiAgICAgIHkzID0gdHJpYW5nbGUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMl1bMV0sXG4gICAgICB6MyA9IHRyaWFuZ2xlLnByb3BlcnRpZXMuYztcblxuICB2YXIgeiA9ICh6MyAqICh4LXgxKSAqICh5LXkyKSArIHoxICogKHgteDIpICogKHkteTMpICsgejIgKiAoeC14MykgKiAoeS15MSlcbiAgICAgIC0gejIgKiAoeC14MSkgKiAoeS15MykgLSB6MyAqICh4LXgyKSAqICh5LXkxKSAtIHoxICogKHgteDMpICogKHkteTIpKSAvXG4gICAgICAoKHgteDEpICogKHkteTIpICsgKHgteDIpICogKHkteTMpICsoeC14MykgKiAoeS15MSkgLVxuICAgICAgICh4LXgxKSAqICh5LXkzKSAtICh4LXgyKSAqICh5LXkxKSAtICh4LXgzKSAqICh5LXkyKSk7XG5cbiAgcmV0dXJuIHo7XG59XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWhleC9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYmJveCwgZmFjdG9yKXtcbiAgdmFyIGN1cnJlbnRYRGlzdGFuY2UgPSAoYmJveFsyXSAtIGJib3hbMF0pO1xuICB2YXIgY3VycmVudFlEaXN0YW5jZSA9IChiYm94WzNdIC0gYmJveFsxXSk7XG4gIHZhciBuZXdYRGlzdGFuY2UgPSBjdXJyZW50WERpc3RhbmNlICogZmFjdG9yO1xuICB2YXIgbmV3WURpc3RhbmNlID0gY3VycmVudFlEaXN0YW5jZSAqIGZhY3RvcjtcbiAgdmFyIHhDaGFuZ2UgPSBuZXdYRGlzdGFuY2UgLSBjdXJyZW50WERpc3RhbmNlO1xuICB2YXIgeUNoYW5nZSA9IG5ld1lEaXN0YW5jZSAtIGN1cnJlbnRZRGlzdGFuY2U7XG5cbiAgdmFyIGxvd1ggPSBiYm94WzBdIC0gKHhDaGFuZ2UgLyAyKTtcbiAgdmFyIGxvd1kgPSBiYm94WzFdIC0gKHlDaGFuZ2UgLyAyKTtcbiAgdmFyIGhpZ2hYID0gKHhDaGFuZ2UgLyAyKSArIGJib3hbMl07XG4gIHZhciBoaWdoWSA9ICh5Q2hhbmdlIC8gMikgKyBiYm94WzNdO1xuXG4gIHZhciBzaXplZCA9IFtsb3dYLCBsb3dZLCBoaWdoWCwgaGlnaFldO1xuICByZXR1cm4gc2l6ZWQ7XG59IiwidmFyIG1pZHBvaW50ID0gcmVxdWlyZSgndHVyZi1taWRwb2ludCcpO1xudmFyIHBvaW50ID0gcmVxdWlyZSgndHVyZi1wb2ludCcpO1xudmFyIGRpc3RhbmNlID0gcmVxdWlyZSgndHVyZi1kaXN0YW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGJib3gpe1xuICB2YXIgc3F1YXJlQmJveCA9IFswLDAsMCwwXTtcbiAgdmFyIGxvd0xlZnQgPSBwb2ludChiYm94WzBdLCBiYm94WzFdKTtcbiAgdmFyIHRvcExlZnQgPSBwb2ludChiYm94WzBdLCBiYm94WzNdKTtcbiAgdmFyIHRvcFJpZ2h0ID0gcG9pbnQoYmJveFsyXSwgYmJveFszXSk7XG4gIHZhciBsb3dSaWdodCA9IHBvaW50KGJib3hbMl0sIGJib3hbMV0pO1xuXG4gIHZhciBob3Jpem9udGFsRGlzdGFuY2UgPSBkaXN0YW5jZShsb3dMZWZ0LCBsb3dSaWdodCwgJ21pbGVzJyk7XG4gIHZhciB2ZXJ0aWNhbERpc3RhbmNlID0gZGlzdGFuY2UobG93TGVmdCwgdG9wTGVmdCwgJ21pbGVzJyk7XG4gIGlmKGhvcml6b250YWxEaXN0YW5jZSA+PSB2ZXJ0aWNhbERpc3RhbmNlKXtcbiAgICBzcXVhcmVCYm94WzBdID0gYmJveFswXTtcbiAgICBzcXVhcmVCYm94WzJdID0gYmJveFsyXTtcbiAgICB2YXIgdmVydGljYWxNaWRwb2ludCA9IG1pZHBvaW50KGxvd0xlZnQsIHRvcExlZnQpO1xuICAgIHNxdWFyZUJib3hbMV0gPSB2ZXJ0aWNhbE1pZHBvaW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdIC0gKChiYm94WzJdIC0gYmJveFswXSkgLyAyKTtcbiAgICBzcXVhcmVCYm94WzNdID0gdmVydGljYWxNaWRwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSArICgoYmJveFsyXSAtIGJib3hbMF0pIC8gMik7XG4gICAgcmV0dXJuIHNxdWFyZUJib3g7XG4gIH1cbiAgZWxzZSB7XG4gICAgc3F1YXJlQmJveFsxXSA9IGJib3hbMV07XG4gICAgc3F1YXJlQmJveFszXSA9IGJib3hbM107XG4gICAgdmFyIGhvcnpvbnRhbE1pZHBvaW50ID0gbWlkcG9pbnQobG93TGVmdCwgbG93UmlnaHQpO1xuICAgIHNxdWFyZUJib3hbMF0gPSBob3J6b250YWxNaWRwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSAtICgoYmJveFszXSAtIGJib3hbMV0pIC8gMik7XG4gICAgc3F1YXJlQmJveFsyXSA9IGhvcnpvbnRhbE1pZHBvaW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdICsgKChiYm94WzNdIC0gYmJveFsxXSkgLyAyKTtcbiAgICByZXR1cm4gc3F1YXJlQmJveDtcbiAgfVxufVxuXG4iLCIvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGF2ZXJzaW5lX2Zvcm11bGFcbi8vaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2ludDEsIHBvaW50MiwgdW5pdHMpe1xuICB2YXIgY29vcmRpbmF0ZXMxID0gcG9pbnQxLmdlb21ldHJ5LmNvb3JkaW5hdGVzXG4gIHZhciBjb29yZGluYXRlczIgPSBwb2ludDIuZ2VvbWV0cnkuY29vcmRpbmF0ZXNcblxuICB2YXIgZExhdCA9IHRvUmFkKGNvb3JkaW5hdGVzMlsxXSAtIGNvb3JkaW5hdGVzMVsxXSlcbiAgdmFyIGRMb24gPSB0b1JhZChjb29yZGluYXRlczJbMF0gLSBjb29yZGluYXRlczFbMF0pXG4gIHZhciBsYXQxID0gdG9SYWQoY29vcmRpbmF0ZXMxWzFdKVxuICB2YXIgbGF0MiA9IHRvUmFkKGNvb3JkaW5hdGVzMlsxXSlcbiAgdmFyIGEgPSBNYXRoLnNpbihkTGF0LzIpICogTWF0aC5zaW4oZExhdC8yKSArXG4gICAgICAgICAgTWF0aC5zaW4oZExvbi8yKSAqIE1hdGguc2luKGRMb24vMikgKiBNYXRoLmNvcyhsYXQxKSAqIE1hdGguY29zKGxhdDIpXG4gIHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMS1hKSlcblxuICB2YXIgUiA9IDBcbiAgc3dpdGNoKHVuaXRzKXtcbiAgICBjYXNlICdtaWxlcyc6XG4gICAgICBSID0gMzk2MFxuICAgICAgYnJlYWtcbiAgICBjYXNlICdraWxvbWV0ZXJzJzpcbiAgICAgIFIgPSA2MzczXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2RlZ3JlZXMnOlxuICAgICAgUiA9IDU3LjI5NTc3OTVcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAncmFkaWFucyc6XG4gICAgICBSID0gMVxuICAgICAgYnJlYWtcbiAgfVxuICB2YXIgZGlzdGFuY2UgPSBSICogY1xuICByZXR1cm4gZGlzdGFuY2Vcbn1cblxuZnVuY3Rpb24gdG9SYWQoZGVncmVlKXtcbiAgcmV0dXJuIGRlZ3JlZSAqIE1hdGguUEkgLyAxODBcbn1cbiIsIi8vIGh0dHA6Ly9jcy5zZWx1LmVkdS9+cmJ5cmQvbWF0aC9taWRwb2ludC9cbi8vICgoeDEreDIpLzIpLCAoKHkxK3kyKS8yKVxudmFyIHBvaW50ID0gcmVxdWlyZSgndHVyZi1wb2ludCcpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9pbnQxLCBwb2ludDIpIHtcbiAgaWYocG9pbnQxID09PSBudWxsIHx8IHBvaW50MiA9PT0gbnVsbCB8fCBwb2ludDEgJiYgcG9pbnQyID09PSBudWxsKXtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdMZXNzIHRoYW4gdHdvIHBvaW50cyBwYXNzZWQuJylcbiAgfVxuXG4gIHZhciB4MSA9IHBvaW50MS5nZW9tZXRyeS5jb29yZGluYXRlc1swXTtcbiAgdmFyIHgyID0gcG9pbnQyLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdO1xuICB2YXIgeTEgPSBwb2ludDEuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV07XG4gIHZhciB5MiA9IHBvaW50Mi5nZW9tZXRyeS5jb29yZGluYXRlc1sxXTtcblxuICB2YXIgeDMgPSB4MSArIHgyO1xuICB2YXIgbWlkWCA9IHgzLzI7XG4gIHZhciB5MyA9IHkxICsgeTI7XG4gIHZhciBtaWRZID0geTMvMjtcblxuICB2YXIgbWlkcG9pbnQgPSBwb2ludChtaWRYLCBtaWRZKTtcblxuICByZXR1cm4gbWlkcG9pbnRcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgsIHksIHByb3BlcnRpZXMpe1xuICBpZihpc05hTih4KSB8fCBpc05hTih5KSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvb3JkaW5hdGVzJylcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcIkZlYXR1cmVcIixcbiAgICBnZW9tZXRyeToge1xuICAgICAgdHlwZTogXCJQb2ludFwiLFxuICAgICAgY29vcmRpbmF0ZXM6IFt4LCB5XVxuICAgIH0sXG4gICAgcHJvcGVydGllczogcHJvcGVydGllcyB8fCB7fVxuICB9XG59XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLWdyaWQvbm9kZV9tb2R1bGVzL3R1cmYtcG9pbnQvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLXRpbi9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtdGluL25vZGVfbW9kdWxlcy90dXJmLW5lYXJlc3QvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1jb25jYXZlL25vZGVfbW9kdWxlcy90dXJmLWRpc3RhbmNlL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtc3F1YXJlL25vZGVfbW9kdWxlcy90dXJmLXBvaW50L2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEwLCBKYXNvbiBEYXZpZXMuXG4gKlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC4gIFRoaXMgY29kZSBpcyBiYXNlZCBvbiBCcmFkbGV5IFdoaXRlJ3MgSmF2YSB2ZXJzaW9uLFxuICogd2hpY2ggaXMgaW4gdHVybiBiYXNlZCBvbiBOaWNob2xhcyBZdWUncyBDKysgdmVyc2lvbiwgd2hpY2ggaW4gdHVybiBpcyBiYXNlZFxuICogb24gUGF1bCBELiBCb3Vya2UncyBvcmlnaW5hbCBGb3J0cmFuIHZlcnNpb24uICBTZWUgYmVsb3cgZm9yIHRoZSByZXNwZWN0aXZlXG4gKiBjb3B5cmlnaHQgbm90aWNlcy5cbiAqXG4gKiBTZWUgaHR0cDovL2xvY2FsLndhc3AudXdhLmVkdS5hdS9+cGJvdXJrZS9wYXBlcnMvY29ucmVjLyBmb3IgdGhlIG9yaWdpbmFsXG4gKiBwYXBlciBieSBQYXVsIEQuIEJvdXJrZS5cbiAqXG4gKiBUaGUgdmVjdG9yIGNvbnZlcnNpb24gY29kZSBpcyBiYXNlZCBvbiBodHRwOi8vYXBwdHJlZS5uZXQvY29ucmVjLmh0bSBieVxuICogR3JhaGFtIENveC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogICAgICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4gKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgPG9yZ2FuaXphdGlvbj4gbm9yIHRoZVxuICogICAgICAgbmFtZXMgb2YgaXRzIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHNcbiAqICAgICAgIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuICpcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG4gKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG4gKiBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRVxuICogQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIDxDT1BZUklHSFQgSE9MREVSPiBCRSBMSUFCTEUgRk9SIEFOWVxuICogRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbiAqIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbiAqIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxuICogT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbiAqIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRlxuICogVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqL1xuXG4vKlxuICogQ29weXJpZ2h0IChjKSAxOTk2LTE5OTcgTmljaG9sYXMgWXVlXG4gKlxuICogVGhpcyBzb2Z0d2FyZSBpcyBjb3B5cmlnaHRlZCBieSBOaWNob2xhcyBZdWUuIFRoaXMgY29kZSBpcyBiYXNlZCBvbiBQYXVsIEQuXG4gKiBCb3Vya2UncyBDT05SRUMuRiByb3V0aW5lLlxuICpcbiAqIFRoZSBhdXRob3JzIGhlcmVieSBncmFudCBwZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgYW5kIGRpc3RyaWJ1dGUgdGhpc1xuICogc29mdHdhcmUgYW5kIGl0cyBkb2N1bWVudGF0aW9uIGZvciBhbnkgcHVycG9zZSwgcHJvdmlkZWQgdGhhdCBleGlzdGluZ1xuICogY29weXJpZ2h0IG5vdGljZXMgYXJlIHJldGFpbmVkIGluIGFsbCBjb3BpZXMgYW5kIHRoYXQgdGhpcyBub3RpY2UgaXNcbiAqIGluY2x1ZGVkIHZlcmJhdGltIGluIGFueSBkaXN0cmlidXRpb25zLiBBZGRpdGlvbmFsbHksIHRoZSBhdXRob3JzIGdyYW50XG4gKiBwZXJtaXNzaW9uIHRvIG1vZGlmeSB0aGlzIHNvZnR3YXJlIGFuZCBpdHMgZG9jdW1lbnRhdGlvbiBmb3IgYW55IHB1cnBvc2UsXG4gKiBwcm92aWRlZCB0aGF0IHN1Y2ggbW9kaWZpY2F0aW9ucyBhcmUgbm90IGRpc3RyaWJ1dGVkIHdpdGhvdXQgdGhlIGV4cGxpY2l0XG4gKiBjb25zZW50IG9mIHRoZSBhdXRob3JzIGFuZCB0aGF0IGV4aXN0aW5nIGNvcHlyaWdodCBub3RpY2VzIGFyZSByZXRhaW5lZCBpblxuICogYWxsIGNvcGllcy4gU29tZSBvZiB0aGUgYWxnb3JpdGhtcyBpbXBsZW1lbnRlZCBieSB0aGlzIHNvZnR3YXJlIGFyZVxuICogcGF0ZW50ZWQsIG9ic2VydmUgYWxsIGFwcGxpY2FibGUgcGF0ZW50IGxhdy5cbiAqXG4gKiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBESVNUUklCVVRPUlMgQkUgTElBQkxFIFRPIEFOWSBQQVJUWSBGT1JcbiAqIERJUkVDVCwgSU5ESVJFQ1QsIFNQRUNJQUwsIElOQ0lERU5UQUwsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBBUklTSU5HIE9VVFxuICogT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBJVFMgRE9DVU1FTlRBVElPTiwgT1IgQU5ZIERFUklWQVRJVkVTIFRIRVJFT0YsXG4gKiBFVkVOIElGIFRIRSBBVVRIT1JTIEhBVkUgQkVFTiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKiBUSEUgQVVUSE9SUyBBTkQgRElTVFJJQlVUT1JTIFNQRUNJRklDQUxMWSBESVNDTEFJTSBBTlkgV0FSUkFOVElFUyxcbiAqIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLCBBTkQgTk9OLUlORlJJTkdFTUVOVC4gIFRISVMgU09GVFdBUkUgSVNcbiAqIFBST1ZJREVEIE9OIEFOIFwiQVMgSVNcIiBCQVNJUywgQU5EIFRIRSBBVVRIT1JTIEFORCBESVNUUklCVVRPUlMgSEFWRSBOT1xuICogT0JMSUdBVElPTiBUTyBQUk9WSURFIE1BSU5URU5BTkNFLCBTVVBQT1JULCBVUERBVEVTLCBFTkhBTkNFTUVOVFMsIE9SXG4gKiBNT0RJRklDQVRJT05TLlxuICovXG5cblxuICBtb2R1bGUuZXhwb3J0cyA9IENvbnJlYztcblxuICB2YXIgRVBTSUxPTiA9IDFlLTEwO1xuXG4gIGZ1bmN0aW9uIHBvaW50c0VxdWFsKGEsIGIpIHtcbiAgICB2YXIgeCA9IGEueCAtIGIueCwgeSA9IGEueSAtIGIueTtcbiAgICByZXR1cm4geCAqIHggKyB5ICogeSA8IEVQU0lMT047XG4gIH1cblxuICBmdW5jdGlvbiByZXZlcnNlTGlzdChsaXN0KSB7XG4gICAgdmFyIHBwID0gbGlzdC5oZWFkO1xuXG4gICAgd2hpbGUgKHBwKSB7XG4gICAgICAvLyBzd2FwIHByZXYvbmV4dCBwb2ludGVyc1xuICAgICAgdmFyIHRlbXAgPSBwcC5uZXh0O1xuICAgICAgcHAubmV4dCA9IHBwLnByZXY7XG4gICAgICBwcC5wcmV2ID0gdGVtcDtcblxuICAgICAgLy8gY29udGludWUgdGhyb3VnaCB0aGUgbGlzdFxuICAgICAgcHAgPSB0ZW1wO1xuICAgIH1cblxuICAgIC8vIHN3YXAgaGVhZC90YWlsIHBvaW50ZXJzXG4gICAgdmFyIHRlbXAgPSBsaXN0LmhlYWQ7XG4gICAgbGlzdC5oZWFkID0gbGlzdC50YWlsO1xuICAgIGxpc3QudGFpbCA9IHRlbXA7XG4gIH1cblxuICBmdW5jdGlvbiBDb250b3VyQnVpbGRlcihsZXZlbCkge1xuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB0aGlzLnMgPSBudWxsO1xuICAgIHRoaXMuY291bnQgPSAwO1xuICB9XG4gIENvbnRvdXJCdWlsZGVyLnByb3RvdHlwZS5yZW1vdmVfc2VxID0gZnVuY3Rpb24obGlzdCkge1xuICAgIC8vIGlmIGxpc3QgaXMgdGhlIGZpcnN0IGl0ZW0sIHN0YXRpYyBwdHIgcyBpcyB1cGRhdGVkXG4gICAgaWYgKGxpc3QucHJldikge1xuICAgICAgbGlzdC5wcmV2Lm5leHQgPSBsaXN0Lm5leHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucyA9IGxpc3QubmV4dDtcbiAgICB9XG5cbiAgICBpZiAobGlzdC5uZXh0KSB7XG4gICAgICBsaXN0Lm5leHQucHJldiA9IGxpc3QucHJldjtcbiAgICB9XG4gICAgLS10aGlzLmNvdW50O1xuICB9XG4gIENvbnRvdXJCdWlsZGVyLnByb3RvdHlwZS5hZGRTZWdtZW50ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciBzcyA9IHRoaXMucztcbiAgICB2YXIgbWEgPSBudWxsO1xuICAgIHZhciBtYiA9IG51bGw7XG4gICAgdmFyIHByZXBlbmRBID0gZmFsc2U7XG4gICAgdmFyIHByZXBlbmRCID0gZmFsc2U7XG5cbiAgICB3aGlsZSAoc3MpIHtcbiAgICAgIGlmIChtYSA9PSBudWxsKSB7XG4gICAgICAgIC8vIG5vIG1hdGNoIGZvciBhIHlldFxuICAgICAgICBpZiAocG9pbnRzRXF1YWwoYSwgc3MuaGVhZC5wKSkge1xuICAgICAgICAgIG1hID0gc3M7XG4gICAgICAgICAgcHJlcGVuZEEgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHBvaW50c0VxdWFsKGEsIHNzLnRhaWwucCkpIHtcbiAgICAgICAgICBtYSA9IHNzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWIgPT0gbnVsbCkge1xuICAgICAgICAvLyBubyBtYXRjaCBmb3IgYiB5ZXRcbiAgICAgICAgaWYgKHBvaW50c0VxdWFsKGIsIHNzLmhlYWQucCkpIHtcbiAgICAgICAgICBtYiA9IHNzO1xuICAgICAgICAgIHByZXBlbmRCID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChwb2ludHNFcXVhbChiLCBzcy50YWlsLnApKSB7XG4gICAgICAgICAgbWIgPSBzcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gaWYgd2UgbWF0Y2hlZCBib3RoIG5vIG5lZWQgdG8gY29udGludWUgc2VhcmNoaW5nXG4gICAgICBpZiAobWIgIT0gbnVsbCAmJiBtYSAhPSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3MgPSBzcy5uZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGMgaXMgdGhlIGNhc2Ugc2VsZWN0b3IgYmFzZWQgb24gd2hpY2ggb2YgbWEgYW5kL29yIG1iIGFyZSBzZXRcbiAgICB2YXIgYyA9ICgobWEgIT0gbnVsbCkgPyAxIDogMCkgfCAoKG1iICE9IG51bGwpID8gMiA6IDApO1xuXG4gICAgc3dpdGNoKGMpIHtcbiAgICAgIGNhc2UgMDogICAvLyBib3RoIHVubWF0Y2hlZCwgYWRkIGFzIG5ldyBzZXF1ZW5jZVxuICAgICAgICB2YXIgYWEgPSB7cDogYSwgcHJldjogbnVsbH07XG4gICAgICAgIHZhciBiYiA9IHtwOiBiLCBuZXh0OiBudWxsfTtcbiAgICAgICAgYWEubmV4dCA9IGJiO1xuICAgICAgICBiYi5wcmV2ID0gYWE7XG5cbiAgICAgICAgLy8gY3JlYXRlIHNlcXVlbmNlIGVsZW1lbnQgYW5kIHB1c2ggb250byBoZWFkIG9mIG1haW4gbGlzdC4gVGhlIG9yZGVyXG4gICAgICAgIC8vIG9mIGl0ZW1zIGluIHRoaXMgbGlzdCBpcyB1bmltcG9ydGFudFxuICAgICAgICBtYSA9IHtoZWFkOiBhYSwgdGFpbDogYmIsIG5leHQ6IHRoaXMucywgcHJldjogbnVsbCwgY2xvc2VkOiBmYWxzZX07XG4gICAgICAgIGlmICh0aGlzLnMpIHtcbiAgICAgICAgICB0aGlzLnMucHJldiA9IG1hO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucyA9IG1hO1xuXG4gICAgICAgICsrdGhpcy5jb3VudDsgICAgLy8gbm90IGVzc2VudGlhbCAtIHRyYWNrcyBudW1iZXIgb2YgdW5tZXJnZWQgc2VxdWVuY2VzXG4gICAgICBicmVhaztcblxuICAgICAgY2FzZSAxOiAgIC8vIGEgbWF0Y2hlZCwgYiBkaWQgbm90IC0gdGh1cyBiIGV4dGVuZHMgc2VxdWVuY2UgbWFcbiAgICAgICAgdmFyIHBwID0ge3A6IGJ9O1xuXG4gICAgICAgIGlmIChwcmVwZW5kQSkge1xuICAgICAgICAgIHBwLm5leHQgPSBtYS5oZWFkO1xuICAgICAgICAgIHBwLnByZXYgPSBudWxsO1xuICAgICAgICAgIG1hLmhlYWQucHJldiA9IHBwO1xuICAgICAgICAgIG1hLmhlYWQgPSBwcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcC5uZXh0ID0gbnVsbDtcbiAgICAgICAgICBwcC5wcmV2ID0gbWEudGFpbDtcbiAgICAgICAgICBtYS50YWlsLm5leHQgPSBwcDtcbiAgICAgICAgICBtYS50YWlsID0gcHA7XG4gICAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDI6ICAgLy8gYiBtYXRjaGVkLCBhIGRpZCBub3QgLSB0aHVzIGEgZXh0ZW5kcyBzZXF1ZW5jZSBtYlxuICAgICAgICB2YXIgcHAgPSB7cDogYX07XG5cbiAgICAgICAgaWYgKHByZXBlbmRCKSB7XG4gICAgICAgICAgcHAubmV4dCA9IG1iLmhlYWQ7XG4gICAgICAgICAgcHAucHJldiA9IG51bGw7XG4gICAgICAgICAgbWIuaGVhZC5wcmV2ID0gcHA7XG4gICAgICAgICAgbWIuaGVhZCA9IHBwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBwLm5leHQgPSBudWxsO1xuICAgICAgICAgIHBwLnByZXYgPSBtYi50YWlsO1xuICAgICAgICAgIG1iLnRhaWwubmV4dCA9IHBwO1xuICAgICAgICAgIG1iLnRhaWwgPSBwcDtcbiAgICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgMzogICAvLyBib3RoIG1hdGNoZWQsIGNhbiBtZXJnZSBzZXF1ZW5jZXNcbiAgICAgICAgLy8gaWYgdGhlIHNlcXVlbmNlcyBhcmUgdGhlIHNhbWUsIGRvIG5vdGhpbmcsIGFzIHdlIGFyZSBzaW1wbHkgY2xvc2luZyB0aGlzIHBhdGggKGNvdWxkIHNldCBhIGZsYWcpXG5cbiAgICAgICAgaWYgKG1hID09PSBtYikge1xuICAgICAgICAgIHZhciBwcCA9IHtwOiBtYS50YWlsLnAsIG5leHQ6IG1hLmhlYWQsIHByZXY6IG51bGx9O1xuICAgICAgICAgIG1hLmhlYWQucHJldiA9IHBwO1xuICAgICAgICAgIG1hLmhlYWQgPSBwcDtcbiAgICAgICAgICBtYS5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlcmUgYXJlIDQgd2F5cyB0aGUgc2VxdWVuY2UgcGFpciBjYW4gYmUgam9pbmVkLiBUaGUgY3VycmVudCBzZXR0aW5nIG9mIHByZXBlbmRBIGFuZFxuICAgICAgICAvLyBwcmVwZW5kQiB3aWxsIHRlbGwgdXMgd2hpY2ggdHlwZSBvZiBqb2luIGlzIG5lZWRlZC4gRm9yIGhlYWQvaGVhZCBhbmQgdGFpbC90YWlsIGpvaW5zXG4gICAgICAgIC8vIG9uZSBzZXF1ZW5jZSBuZWVkcyB0byBiZSByZXZlcnNlZFxuICAgICAgICBzd2l0Y2goKHByZXBlbmRBID8gMSA6IDApIHwgKHByZXBlbmRCID8gMiA6IDApKSB7XG4gICAgICAgICAgY2FzZSAwOiAgIC8vIHRhaWwtdGFpbFxuICAgICAgICAgICAgLy8gcmV2ZXJzZSBtYSBhbmQgYXBwZW5kIHRvIG1iXG4gICAgICAgICAgICByZXZlcnNlTGlzdChtYSk7XG4gICAgICAgICAgICAvLyBmYWxsIHRocm91Z2ggdG8gaGVhZC90YWlsIGNhc2VcbiAgICAgICAgICBjYXNlIDE6ICAgLy8gaGVhZC10YWlsXG4gICAgICAgICAgICAvLyBtYSBpcyBhcHBlbmRlZCB0byBtYiBhbmQgbWEgZGlzY2FyZGVkXG4gICAgICAgICAgICBtYi50YWlsLm5leHQgPSBtYS5oZWFkO1xuICAgICAgICAgICAgbWEuaGVhZC5wcmV2ID0gbWIudGFpbDtcbiAgICAgICAgICAgIG1iLnRhaWwgPSBtYS50YWlsO1xuXG4gICAgICAgICAgICAvL2Rpc2NhcmQgbWEgc2VxdWVuY2UgcmVjb3JkXG4gICAgICAgICAgICB0aGlzLnJlbW92ZV9zZXEobWEpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAzOiAgIC8vIGhlYWQtaGVhZFxuICAgICAgICAgICAgLy8gcmV2ZXJzZSBtYSBhbmQgYXBwZW5kIG1iIHRvIGl0XG4gICAgICAgICAgICByZXZlcnNlTGlzdChtYSk7XG4gICAgICAgICAgICAvLyBmYWxsIHRocm91Z2ggdG8gdGFpbC9oZWFkIGNhc2VcbiAgICAgICAgICBjYXNlIDI6ICAgLy8gdGFpbC1oZWFkXG4gICAgICAgICAgICAvLyBtYiBpcyBhcHBlbmRlZCB0byBtYSBhbmQgbWIgaXMgZGlzY2FyZGVkXG4gICAgICAgICAgICBtYS50YWlsLm5leHQgPSBtYi5oZWFkO1xuICAgICAgICAgICAgbWIuaGVhZC5wcmV2ID0gbWEudGFpbDtcbiAgICAgICAgICAgIG1hLnRhaWwgPSBtYi50YWlsO1xuXG4gICAgICAgICAgICAvL2Rpc2NhcmQgbWIgc2VxdWVuY2UgcmVjb3JkXG4gICAgICAgICAgICB0aGlzLnJlbW92ZV9zZXEobWIpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50cyBDT05SRUMuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGRyYXdDb250b3VyIGZ1bmN0aW9uIGZvciBkcmF3aW5nIGNvbnRvdXIuICBEZWZhdWx0cyB0byBhXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbSBcImNvbnRvdXIgYnVpbGRlclwiLCB3aGljaCBwb3B1bGF0ZXMgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRvdXJzIHByb3BlcnR5LlxuICAgKi9cbiAgZnVuY3Rpb24gQ29ucmVjKGRyYXdDb250b3VyKSB7XG4gICAgaWYgKCFkcmF3Q29udG91cikge1xuICAgICAgdmFyIGMgPSB0aGlzO1xuICAgICAgYy5jb250b3VycyA9IHt9O1xuICAgICAgLyoqXG4gICAgICAgKiBkcmF3Q29udG91ciAtIGludGVyZmFjZSBmb3IgaW1wbGVtZW50aW5nIHRoZSB1c2VyIHN1cHBsaWVkIG1ldGhvZCB0b1xuICAgICAgICogcmVuZGVyIHRoZSBjb3VudG91cnMuXG4gICAgICAgKlxuICAgICAgICogRHJhd3MgYSBsaW5lIGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmQgY29vcmRpbmF0ZXMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHN0YXJ0WCAgICAtIHN0YXJ0IGNvb3JkaW5hdGUgZm9yIFhcbiAgICAgICAqIEBwYXJhbSBzdGFydFkgICAgLSBzdGFydCBjb29yZGluYXRlIGZvciBZXG4gICAgICAgKiBAcGFyYW0gZW5kWCAgICAgIC0gZW5kIGNvb3JkaW5hdGUgZm9yIFhcbiAgICAgICAqIEBwYXJhbSBlbmRZICAgICAgLSBlbmQgY29vcmRpbmF0ZSBmb3IgWVxuICAgICAgICogQHBhcmFtIGNvbnRvdXJMZXZlbCAtIENvbnRvdXIgbGV2ZWwgZm9yIGxpbmUuXG4gICAgICAgKi9cbiAgICAgIHRoaXMuZHJhd0NvbnRvdXIgPSBmdW5jdGlvbihzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSwgY29udG91ckxldmVsLCBrKSB7XG4gICAgICAgIHZhciBjYiA9IGMuY29udG91cnNba107XG4gICAgICAgIGlmICghY2IpIHtcbiAgICAgICAgICBjYiA9IGMuY29udG91cnNba10gPSBuZXcgQ29udG91ckJ1aWxkZXIoY29udG91ckxldmVsKTtcbiAgICAgICAgfVxuICAgICAgICBjYi5hZGRTZWdtZW50KHt4OiBzdGFydFgsIHk6IHN0YXJ0WX0sIHt4OiBlbmRYLCB5OiBlbmRZfSk7XG4gICAgICB9XG4gICAgICB0aGlzLmNvbnRvdXJMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsID0gW107XG4gICAgICAgIHZhciBhID0gYy5jb250b3VycztcbiAgICAgICAgZm9yICh2YXIgayBpbiBhKSB7XG4gICAgICAgICAgdmFyIHMgPSBhW2tdLnM7XG4gICAgICAgICAgdmFyIGxldmVsID0gYVtrXS5sZXZlbDtcbiAgICAgICAgICB3aGlsZSAocykge1xuICAgICAgICAgICAgdmFyIGggPSBzLmhlYWQ7XG4gICAgICAgICAgICB2YXIgbDIgPSBbXTtcbiAgICAgICAgICAgIGwyLmxldmVsID0gbGV2ZWw7XG4gICAgICAgICAgICBsMi5rID0gaztcbiAgICAgICAgICAgIHdoaWxlIChoICYmIGgucCkge1xuICAgICAgICAgICAgICBsMi5wdXNoKGgucCk7XG4gICAgICAgICAgICAgIGggPSBoLm5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsLnB1c2gobDIpO1xuICAgICAgICAgICAgcyA9IHMubmV4dDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEuayAtIGIuayB9KTtcbiAgICAgICAgcmV0dXJuIGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZHJhd0NvbnRvdXIgPSBkcmF3Q29udG91cjtcbiAgICB9XG4gICAgdGhpcy5oICA9IG5ldyBBcnJheSg1KTtcbiAgICB0aGlzLnNoID0gbmV3IEFycmF5KDUpO1xuICAgIHRoaXMueGggPSBuZXcgQXJyYXkoNSk7XG4gICAgdGhpcy55aCA9IG5ldyBBcnJheSg1KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBjb250b3VyIGlzIGEgY29udG91cmluZyBzdWJyb3V0aW5lIGZvciByZWN0YW5ndWxhcmlseSBzcGFjZWQgZGF0YVxuICAgKlxuICAgKiBJdCBlbWl0cyBjYWxscyB0byBhIGxpbmUgZHJhd2luZyBzdWJyb3V0aW5lIHN1cHBsaWVkIGJ5IHRoZSB1c2VyIHdoaWNoXG4gICAqIGRyYXdzIGEgY29udG91ciBtYXAgY29ycmVzcG9uZGluZyB0byByZWFsKjRkYXRhIG9uIGEgcmFuZG9tbHkgc3BhY2VkXG4gICAqIHJlY3Rhbmd1bGFyIGdyaWQuIFRoZSBjb29yZGluYXRlcyBlbWl0dGVkIGFyZSBpbiB0aGUgc2FtZSB1bml0cyBnaXZlbiBpblxuICAgKiB0aGUgeCgpIGFuZCB5KCkgYXJyYXlzLlxuICAgKlxuICAgKiBBbnkgbnVtYmVyIG9mIGNvbnRvdXIgbGV2ZWxzIG1heSBiZSBzcGVjaWZpZWQgYnV0IHRoZXkgbXVzdCBiZSBpbiBvcmRlciBvZlxuICAgKiBpbmNyZWFzaW5nIHZhbHVlLlxuICAgKlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcltdW119IGQgLSBtYXRyaXggb2YgZGF0YSB0byBjb250b3VyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbGIsaXViLGpsYixqdWIgLSBpbmRleCBib3VuZHMgb2YgZGF0YSBtYXRyaXhcbiAgICpcbiAgICogICAgICAgICAgICAgVGhlIGZvbGxvd2luZyB0d28sIG9uZSBkaW1lbnNpb25hbCBhcnJheXMgKHggYW5kIHkpIGNvbnRhaW5cbiAgICogICAgICAgICAgICAgdGhlIGhvcml6b250YWwgYW5kIHZlcnRpY2FsIGNvb3JkaW5hdGVzIG9mIGVhY2ggc2FtcGxlIHBvaW50cy5cbiAgICogQHBhcmFtIHtudW1iZXJbXX0geCAgLSBkYXRhIG1hdHJpeCBjb2x1bW4gY29vcmRpbmF0ZXNcbiAgICogQHBhcmFtIHtudW1iZXJbXX0geSAgLSBkYXRhIG1hdHJpeCByb3cgY29vcmRpbmF0ZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG5jICAgLSBudW1iZXIgb2YgY29udG91ciBsZXZlbHNcbiAgICogQHBhcmFtIHtudW1iZXJbXX0geiAgLSBjb250b3VyIGxldmVscyBpbiBpbmNyZWFzaW5nIG9yZGVyLlxuICAgKi9cbiAgQ29ucmVjLnByb3RvdHlwZS5jb250b3VyID0gZnVuY3Rpb24oZCwgaWxiLCBpdWIsIGpsYiwganViLCB4LCB5LCBuYywgeikge1xuICAgIHZhciBoID0gdGhpcy5oLCBzaCA9IHRoaXMuc2gsIHhoID0gdGhpcy54aCwgeWggPSB0aGlzLnloO1xuICAgIHZhciBkcmF3Q29udG91ciA9IHRoaXMuZHJhd0NvbnRvdXI7XG4gICAgdGhpcy5jb250b3VycyA9IHt9O1xuXG4gICAgLyoqIHByaXZhdGUgKi9cbiAgICB2YXIgeHNlY3QgPSBmdW5jdGlvbihwMSwgcDIpe1xuICAgICAgcmV0dXJuIChoW3AyXSp4aFtwMV0taFtwMV0qeGhbcDJdKS8oaFtwMl0taFtwMV0pO1xuICAgIH1cblxuICAgIHZhciB5c2VjdCA9IGZ1bmN0aW9uKHAxLCBwMil7XG4gICAgICByZXR1cm4gKGhbcDJdKnloW3AxXS1oW3AxXSp5aFtwMl0pLyhoW3AyXS1oW3AxXSk7XG4gICAgfVxuICAgIHZhciBtMTtcbiAgICB2YXIgbTI7XG4gICAgdmFyIG0zO1xuICAgIHZhciBjYXNlX3ZhbHVlO1xuICAgIHZhciBkbWluO1xuICAgIHZhciBkbWF4O1xuICAgIHZhciB4MSA9IDAuMDtcbiAgICB2YXIgeDIgPSAwLjA7XG4gICAgdmFyIHkxID0gMC4wO1xuICAgIHZhciB5MiA9IDAuMDtcblxuICAgIC8vIFRoZSBpbmRleGluZyBvZiBpbSBhbmQgam0gc2hvdWxkIGJlIG5vdGVkIGFzIGl0IGhhcyB0byBzdGFydCBmcm9tIHplcm9cbiAgICAvLyB1bmxpa2UgdGhlIGZvcnRyYW4gY291bnRlciBwYXJ0XG4gICAgdmFyIGltID0gWzAsIDEsIDEsIDBdO1xuICAgIHZhciBqbSA9IFswLCAwLCAxLCAxXTtcblxuICAgIC8vIE5vdGUgdGhhdCBjYXN0YWIgaXMgYXJyYW5nZWQgZGlmZmVyZW50bHkgZnJvbSB0aGUgRk9SVFJBTiBjb2RlIGJlY2F1c2VcbiAgICAvLyBGb3J0cmFuIGFuZCBDL0MrKyBhcnJheXMgYXJlIHRyYW5zcG9zZWQgb2YgZWFjaCBvdGhlciwgaW4gdGhpcyBjYXNlXG4gICAgLy8gaXQgaXMgbW9yZSB0cmlja3kgYXMgY2FzdGFiIGlzIGluIDMgZGltZW5zaW9uc1xuICAgIHZhciBjYXN0YWIgPSBbXG4gICAgICBbXG4gICAgICAgIFswLCAwLCA4XSwgWzAsIDIsIDVdLCBbNywgNiwgOV1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFswLCAzLCA0XSwgWzEsIDMsIDFdLCBbNCwgMywgMF1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFs5LCA2LCA3XSwgWzUsIDIsIDBdLCBbOCwgMCwgMF1cbiAgICAgIF1cbiAgICBdO1xuXG4gICAgZm9yICh2YXIgaj0oanViLTEpO2o+PWpsYjtqLS0pIHtcbiAgICAgIGZvciAodmFyIGk9aWxiO2k8PWl1Yi0xO2krKykge1xuICAgICAgICB2YXIgdGVtcDEsIHRlbXAyO1xuICAgICAgICB0ZW1wMSA9IE1hdGgubWluKGRbaV1bal0sZFtpXVtqKzFdKTtcbiAgICAgICAgdGVtcDIgPSBNYXRoLm1pbihkW2krMV1bal0sZFtpKzFdW2orMV0pO1xuICAgICAgICBkbWluICA9IE1hdGgubWluKHRlbXAxLHRlbXAyKTtcbiAgICAgICAgdGVtcDEgPSBNYXRoLm1heChkW2ldW2pdLGRbaV1baisxXSk7XG4gICAgICAgIHRlbXAyID0gTWF0aC5tYXgoZFtpKzFdW2pdLGRbaSsxXVtqKzFdKTtcbiAgICAgICAgZG1heCAgPSBNYXRoLm1heCh0ZW1wMSx0ZW1wMik7XG5cbiAgICAgICAgaWYgKGRtYXg+PXpbMF0mJmRtaW48PXpbbmMtMV0pIHtcbiAgICAgICAgICBmb3IgKHZhciBrPTA7azxuYztrKyspIHtcbiAgICAgICAgICAgIGlmICh6W2tdPj1kbWluJiZ6W2tdPD1kbWF4KSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIG09NDttPj0wO20tLSkge1xuICAgICAgICAgICAgICAgIGlmIChtPjApIHtcbiAgICAgICAgICAgICAgICAgIC8vIFRoZSBpbmRleGluZyBvZiBpbSBhbmQgam0gc2hvdWxkIGJlIG5vdGVkIGFzIGl0IGhhcyB0b1xuICAgICAgICAgICAgICAgICAgLy8gc3RhcnQgZnJvbSB6ZXJvXG4gICAgICAgICAgICAgICAgICBoW21dID0gZFtpK2ltW20tMV1dW2oram1bbS0xXV0teltrXTtcbiAgICAgICAgICAgICAgICAgIHhoW21dID0geFtpK2ltW20tMV1dO1xuICAgICAgICAgICAgICAgICAgeWhbbV0gPSB5W2oram1bbS0xXV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGhbMF0gPSAwLjI1KihoWzFdK2hbMl0raFszXStoWzRdKTtcbiAgICAgICAgICAgICAgICAgIHhoWzBdPTAuNSooeFtpXSt4W2krMV0pO1xuICAgICAgICAgICAgICAgICAgeWhbMF09MC41Kih5W2pdK3lbaisxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChoW21dPkVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICAgIHNoW21dID0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhbbV08LUVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICAgIHNoW21dID0gLTE7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICBzaFttXSA9IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgLy8gTm90ZTogYXQgdGhpcyBzdGFnZSB0aGUgcmVsYXRpdmUgaGVpZ2h0cyBvZiB0aGUgY29ybmVycyBhbmQgdGhlXG4gICAgICAgICAgICAgIC8vIGNlbnRyZSBhcmUgaW4gdGhlIGggYXJyYXksIGFuZCB0aGUgY29ycmVzcG9uZGluZyBjb29yZGluYXRlcyBhcmVcbiAgICAgICAgICAgICAgLy8gaW4gdGhlIHhoIGFuZCB5aCBhcnJheXMuIFRoZSBjZW50cmUgb2YgdGhlIGJveCBpcyBpbmRleGVkIGJ5IDBcbiAgICAgICAgICAgICAgLy8gYW5kIHRoZSA0IGNvcm5lcnMgYnkgMSB0byA0IGFzIHNob3duIGJlbG93LlxuICAgICAgICAgICAgICAvLyBFYWNoIHRyaWFuZ2xlIGlzIHRoZW4gaW5kZXhlZCBieSB0aGUgcGFyYW1ldGVyIG0sIGFuZCB0aGUgM1xuICAgICAgICAgICAgICAvLyB2ZXJ0aWNlcyBvZiBlYWNoIHRyaWFuZ2xlIGFyZSBpbmRleGVkIGJ5IHBhcmFtZXRlcnMgbTEsbTIsYW5kXG4gICAgICAgICAgICAgIC8vIG0zLlxuICAgICAgICAgICAgICAvLyBJdCBpcyBhc3N1bWVkIHRoYXQgdGhlIGNlbnRyZSBvZiB0aGUgYm94IGlzIGFsd2F5cyB2ZXJ0ZXggMlxuICAgICAgICAgICAgICAvLyB0aG91Z2ggdGhpcyBpc2ltcG9ydGFudCBvbmx5IHdoZW4gYWxsIDMgdmVydGljZXMgbGllIGV4YWN0bHkgb25cbiAgICAgICAgICAgICAgLy8gdGhlIHNhbWUgY29udG91ciBsZXZlbCwgaW4gd2hpY2ggY2FzZSBvbmx5IHRoZSBzaWRlIG9mIHRoZSBib3hcbiAgICAgICAgICAgICAgLy8gaXMgZHJhd24uXG4gICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgIC8vICAgICAgdmVydGV4IDQgKy0tLS0tLS0tLS0tLS0tLS0tLS0rIHZlcnRleCAzXG4gICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgfCBcXCAgICAgICAgICAgICAgIC8gfFxuICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHwgICBcXCAgICBtLTMgICAgLyAgIHxcbiAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICB8ICAgICBcXCAgICAgICAvICAgICB8XG4gICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgfCAgICAgICBcXCAgIC8gICAgICAgfFxuICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHwgIG09MiAgICBYICAgbT0yICAgfCAgICAgICB0aGUgY2VudHJlIGlzIHZlcnRleCAwXG4gICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgfCAgICAgICAvICAgXFwgICAgICAgfFxuICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHwgICAgIC8gICAgICAgXFwgICAgIHxcbiAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICB8ICAgLyAgICBtPTEgICAgXFwgICB8XG4gICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgfCAvICAgICAgICAgICAgICAgXFwgfFxuICAgICAgICAgICAgICAvLyAgICAgIHZlcnRleCAxICstLS0tLS0tLS0tLS0tLS0tLS0tKyB2ZXJ0ZXggMlxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIFNjYW4gZWFjaCB0cmlhbmdsZSBpbiB0aGUgYm94XG4gICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgIGZvciAobT0xO208PTQ7bSsrKSB7XG4gICAgICAgICAgICAgICAgbTEgPSBtO1xuICAgICAgICAgICAgICAgIG0yID0gMDtcbiAgICAgICAgICAgICAgICBpZiAobSE9NCkge1xuICAgICAgICAgICAgICAgICAgICBtMyA9IG0rMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtMyA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2VfdmFsdWUgPSBjYXN0YWJbc2hbbTFdKzFdW3NoW20yXSsxXVtzaFttM10rMV07XG4gICAgICAgICAgICAgICAgaWYgKGNhc2VfdmFsdWUhPTApIHtcbiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY2FzZV92YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IC8vIExpbmUgYmV0d2VlbiB2ZXJ0aWNlcyAxIGFuZCAyXG4gICAgICAgICAgICAgICAgICAgICAgeDE9eGhbbTFdO1xuICAgICAgICAgICAgICAgICAgICAgIHkxPXloW20xXTtcbiAgICAgICAgICAgICAgICAgICAgICB4Mj14aFttMl07XG4gICAgICAgICAgICAgICAgICAgICAgeTI9eWhbbTJdO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IC8vIExpbmUgYmV0d2VlbiB2ZXJ0aWNlcyAyIGFuZCAzXG4gICAgICAgICAgICAgICAgICAgICAgeDE9eGhbbTJdO1xuICAgICAgICAgICAgICAgICAgICAgIHkxPXloW20yXTtcbiAgICAgICAgICAgICAgICAgICAgICB4Mj14aFttM107XG4gICAgICAgICAgICAgICAgICAgICAgeTI9eWhbbTNdO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IC8vIExpbmUgYmV0d2VlbiB2ZXJ0aWNlcyAzIGFuZCAxXG4gICAgICAgICAgICAgICAgICAgICAgeDE9eGhbbTNdO1xuICAgICAgICAgICAgICAgICAgICAgIHkxPXloW20zXTtcbiAgICAgICAgICAgICAgICAgICAgICB4Mj14aFttMV07XG4gICAgICAgICAgICAgICAgICAgICAgeTI9eWhbbTFdO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IC8vIExpbmUgYmV0d2VlbiB2ZXJ0ZXggMSBhbmQgc2lkZSAyLTNcbiAgICAgICAgICAgICAgICAgICAgICB4MT14aFttMV07XG4gICAgICAgICAgICAgICAgICAgICAgeTE9eWhbbTFdO1xuICAgICAgICAgICAgICAgICAgICAgIHgyPXhzZWN0KG0yLG0zKTtcbiAgICAgICAgICAgICAgICAgICAgICB5Mj15c2VjdChtMixtMyk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogLy8gTGluZSBiZXR3ZWVuIHZlcnRleCAyIGFuZCBzaWRlIDMtMVxuICAgICAgICAgICAgICAgICAgICAgIHgxPXhoW20yXTtcbiAgICAgICAgICAgICAgICAgICAgICB5MT15aFttMl07XG4gICAgICAgICAgICAgICAgICAgICAgeDI9eHNlY3QobTMsbTEpO1xuICAgICAgICAgICAgICAgICAgICAgIHkyPXlzZWN0KG0zLG0xKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiAvLyAgTGluZSBiZXR3ZWVuIHZlcnRleCAzIGFuZCBzaWRlIDEtMlxuICAgICAgICAgICAgICAgICAgICAgIHgxPXhoW20zXTtcbiAgICAgICAgICAgICAgICAgICAgICB5MT15aFttM107XG4gICAgICAgICAgICAgICAgICAgICAgeDI9eHNlY3QobTEsbTIpO1xuICAgICAgICAgICAgICAgICAgICAgIHkyPXlzZWN0KG0xLG0yKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OiAvLyBMaW5lIGJldHdlZW4gc2lkZXMgMS0yIGFuZCAyLTNcbiAgICAgICAgICAgICAgICAgICAgICB4MT14c2VjdChtMSxtMik7XG4gICAgICAgICAgICAgICAgICAgICAgeTE9eXNlY3QobTEsbTIpO1xuICAgICAgICAgICAgICAgICAgICAgIHgyPXhzZWN0KG0yLG0zKTtcbiAgICAgICAgICAgICAgICAgICAgICB5Mj15c2VjdChtMixtMyk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogLy8gTGluZSBiZXR3ZWVuIHNpZGVzIDItMyBhbmQgMy0xXG4gICAgICAgICAgICAgICAgICAgICAgeDE9eHNlY3QobTIsbTMpO1xuICAgICAgICAgICAgICAgICAgICAgIHkxPXlzZWN0KG0yLG0zKTtcbiAgICAgICAgICAgICAgICAgICAgICB4Mj14c2VjdChtMyxtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgeTI9eXNlY3QobTMsbTEpO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6IC8vIExpbmUgYmV0d2VlbiBzaWRlcyAzLTEgYW5kIDEtMlxuICAgICAgICAgICAgICAgICAgICAgIHgxPXhzZWN0KG0zLG0xKTtcbiAgICAgICAgICAgICAgICAgICAgICB5MT15c2VjdChtMyxtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgeDI9eHNlY3QobTEsbTIpO1xuICAgICAgICAgICAgICAgICAgICAgIHkyPXlzZWN0KG0xLG0yKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8vIFB1dCB5b3VyIHByb2Nlc3NpbmcgY29kZSBoZXJlIGFuZCBjb21tZW50IG91dCB0aGUgcHJpbnRmXG4gICAgICAgICAgICAgICAgICAvL3ByaW50ZihcIiVmICVmICVmICVmICVmXFxuXCIseDEseTEseDIseTIseltrXSk7XG4gICAgICAgICAgICAgICAgICBkcmF3Q29udG91cih4MSx5MSx4Mix5Mix6W2tdLGspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuIiwiLy9odHRwczovL2dpdGh1Yi5jb20vamFzb25kYXZpZXMvY29ucmVjLmpzXG4vL2h0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjYzMzA1L2RyYXdpbmctYS10b3BvZ3JhcGhpY2FsLW1hcFxudmFyIHRpbiA9IHJlcXVpcmUoJ3R1cmYtdGluJyk7XG52YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcbnZhciBncmlkID0gcmVxdWlyZSgndHVyZi1ncmlkJyk7XG52YXIgZXh0ZW50ID0gcmVxdWlyZSgndHVyZi1leHRlbnQnKTtcbnZhciBwbGFuZXBvaW50ID0gcmVxdWlyZSgndHVyZi1wbGFuZXBvaW50Jyk7XG52YXIgZmVhdHVyZWNvbGxlY3Rpb24gPSByZXF1aXJlKCd0dXJmLWZlYXR1cmVjb2xsZWN0aW9uJyk7XG52YXIgbGluZXN0cmluZyA9IHJlcXVpcmUoJ3R1cmYtbGluZXN0cmluZycpO1xudmFyIHNxdWFyZSA9IHJlcXVpcmUoJ3R1cmYtc3F1YXJlJyk7XG52YXIgQ29ucmVjID0gcmVxdWlyZSgnLi9jb25yZWMnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlcyB3aXRoIHotdmFsdWVzIGFuZCBhbiBhcnJheSBvZlxuICogdmFsdWUgYnJlYWtzIGFuZCBnZW5lcmF0ZXMgW2lzb2xpbmVzXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lzb2xpbmUpLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9pc29saW5lc1xuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9pbnRzIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlc1xuICogQHBhcmFtIHtzdHJpbmd9IHogdGhlIHByb3BlcnR5IG5hbWUgaW4gYHBvaW50c2AgZnJvbSB3aGljaCB6LXZhbHVlcyB3aWxsIGJlIHB1bGxlZFxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gcmVzb2x1dGlvbiBvZiB0aGUgdW5kZXJseWluZyBncmlkXG4gKiBAcGFyYW0ge251bWJlcltdfSBicmVha3Mgd2hlcmUgdG8gZHJhdyBjb250b3Vyc1xuICogQHJldHVybnMge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBMaW5lU3RyaW5nfSBmZWF0dXJlcyByZXByZXNlbnRpbmcgaXNvbGluZXNcbiAqIEBleGFtcGxlXG4gKiAvLyBjcmVhdGUgcmFuZG9tIHBvaW50cyB3aXRoIHJhbmRvbVxuICogLy8gei12YWx1ZXMgaW4gdGhlaXIgcHJvcGVydGllc1xuICogdmFyIHBvaW50cyA9IHR1cmYucmFuZG9tKCdwb2ludCcsIDEwMCwge1xuICogICBiYm94OiBbMCwgMzAsIDIwLCA1MF1cbiAqIH0pO1xuICogZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMuZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAqICAgcG9pbnRzLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMueiA9IE1hdGgucmFuZG9tKCkgKiAxMDtcbiAqIH1cbiAqIHZhciBicmVha3MgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdO1xuICogdmFyIGlzb2xpbmVkID0gdHVyZi5pc29saW5lcyhwb2ludHMsICd6JywgMTUsIGJyZWFrcyk7XG4gKiAvLz1pc29saW5lZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50cywgeiwgcmVzb2x1dGlvbiwgYnJlYWtzLCBkb25lKXtcbiAgdmFyIHRpblJlc3VsdCA9IHRpbihwb2ludHMsIHopO1xuICB2YXIgZXh0ZW50QkJveCA9IGV4dGVudChwb2ludHMpO1xuICB2YXIgc3F1YXJlQkJveCA9IHNxdWFyZShleHRlbnRCQm94KTtcbiAgdmFyIGdyaWRSZXN1bHQgPSBncmlkKHNxdWFyZUJCb3gsIHJlc29sdXRpb24pO1xuICB2YXIgZGF0YSA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JpZFJlc3VsdC5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwdCA9IGdyaWRSZXN1bHQuZmVhdHVyZXNbaV07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aW5SZXN1bHQuZmVhdHVyZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0cmlhbmdsZSA9IHRpblJlc3VsdC5mZWF0dXJlc1tqXTtcbiAgICAgIGlmIChpbnNpZGUocHQsIHRyaWFuZ2xlKSkge1xuICAgICAgICBwdC5wcm9wZXJ0aWVzID0ge307XG4gICAgICAgIHB0LnByb3BlcnRpZXNbel0gPSBwbGFuZXBvaW50KHB0LCB0cmlhbmdsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGRlcHRoID0gTWF0aC5zcXJ0KGdyaWRSZXN1bHQuZmVhdHVyZXMubGVuZ3RoKTtcbiAgZm9yICh2YXIgeD0wOyB4PGRlcHRoOyB4Kyspe1xuICAgIHZhciB4R3JvdXAgPSBncmlkUmVzdWx0LmZlYXR1cmVzLnNsaWNlKHggKiBkZXB0aCwgKHggKyAxKSAqIGRlcHRoKTtcbiAgICB2YXIgeEZsYXQgPSBbXTtcbiAgICB4R3JvdXAuZm9yRWFjaChmdW5jdGlvbih2ZXJ0aWNhbFBvaW50KXtcbiAgICAgIGlmKHZlcnRpY2FsUG9pbnQucHJvcGVydGllcyl7XG4gICAgICAgIHhGbGF0LnB1c2godmVydGljYWxQb2ludC5wcm9wZXJ0aWVzW3pdKTtcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgeEZsYXQucHVzaCgwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkYXRhLnB1c2goeEZsYXQpO1xuICB9XG4gIHZhciBpbnRlcnZhbCA9IChzcXVhcmVCQm94WzJdIC0gc3F1YXJlQkJveFswXSkgLyBkZXB0aDtcbiAgdmFyIHhDb29yZGluYXRlcyA9IFtdO1xuICB2YXIgeUNvb3JkaW5hdGVzID0gW107XG4gIGZvciAodmFyIHggPSAwOyB4IDwgZGVwdGg7IHgrKykge1xuICAgIHhDb29yZGluYXRlcy5wdXNoKHggKiBpbnRlcnZhbCArIHNxdWFyZUJCb3hbMF0pO1xuICAgIHlDb29yZGluYXRlcy5wdXNoKHggKiBpbnRlcnZhbCArIHNxdWFyZUJCb3hbMV0pO1xuICB9XG5cbiAgdmFyIGMgPSBuZXcgQ29ucmVjKCk7XG4gIGMuY29udG91cihkYXRhLCAwLCByZXNvbHV0aW9uLCAwLCByZXNvbHV0aW9uLCB4Q29vcmRpbmF0ZXMsIHlDb29yZGluYXRlcywgYnJlYWtzLmxlbmd0aCwgYnJlYWtzKTtcbiAgdmFyIGNvbnRvdXJMaXN0ID0gYy5jb250b3VyTGlzdCgpO1xuXG4gIHZhciBmYyA9IGZlYXR1cmVjb2xsZWN0aW9uKFtdKTtcbiAgY29udG91ckxpc3QuZm9yRWFjaChmdW5jdGlvbihjKXtcbiAgICBpZihjLmxlbmd0aCA+IDIpe1xuICAgICAgdmFyIHBvbHlDb29yZGluYXRlcyA9IFtdO1xuICAgICAgYy5mb3JFYWNoKGZ1bmN0aW9uKGNvb3JkKXtcbiAgICAgICAgcG9seUNvb3JkaW5hdGVzLnB1c2goW2Nvb3JkLngsIGNvb3JkLnldKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIHBvbHkgPSBsaW5lc3RyaW5nKHBvbHlDb29yZGluYXRlcyk7XG4gICAgICBwb2x5LnByb3BlcnRpZXMgPSB7fTtcbiAgICAgIHBvbHkucHJvcGVydGllc1t6XSA9IGMubGV2ZWw7XG5cbiAgICAgIGZjLmZlYXR1cmVzLnB1c2gocG9seSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZmM7XG59XG5cblxuXG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9ub2RlX21vZHVsZXMvZmxhdHRlbi9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLWdyaWQvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi10aW4vbm9kZV9tb2R1bGVzL3R1cmYtcG9pbnQvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29iYW5kcy9ub2RlX21vZHVsZXMvdHVyZi1saW5lc3RyaW5nL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtcGxhbmVwb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXNxdWFyZS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXNxdWFyZS9ub2RlX21vZHVsZXMvdHVyZi1kaXN0YW5jZS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXNxdWFyZS9ub2RlX21vZHVsZXMvdHVyZi1taWRwb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXNxdWFyZS9ub2RlX21vZHVsZXMvdHVyZi1taWRwb2ludC9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXRpbi9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2JhbmRzL25vZGVfbW9kdWxlcy90dXJmLXRpbi9ub2RlX21vZHVsZXMvdHVyZi1uZWFyZXN0L2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsImFyZ3VtZW50c1s0XVtcIi9Vc2Vycy90bWN3L3NyYy9wcmVzZW50YXRpb25zL3R1cmYtZ2VvZGMvbm9kZV9tb2R1bGVzL3R1cmYvbm9kZV9tb2R1bGVzL3R1cmYtaXNvYmFuZHMvbm9kZV9tb2R1bGVzL3R1cmYtdGluL25vZGVfbW9kdWxlcy90dXJmLW5lYXJlc3Qvbm9kZV9tb2R1bGVzL3R1cmYtZGlzdGFuY2UvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwidmFyIHNzID0gcmVxdWlyZSgnc2ltcGxlLXN0YXRpc3RpY3MnKTtcblxuLyoqXG4qIFRha2VzIGEge0BGZWF0dXJlQ29sbGVjdGlvbn0gb2YgYW55IHR5cGUgYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlIFtKZW5rcyBOYXR1cmFsIGJyZWFrc10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KZW5rc19uYXR1cmFsX2JyZWFrc19vcHRpbWl6YXRpb24pXG4qIGZvciBhIGdpdmVuIHByb3BlcnR5XG4qIEBtb2R1bGUgdHVyZi9qZW5rc1xuKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBpbnB1dCBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGFueSB0eXBlXG4qIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCB0aGUgcHJvcGVydHkgaW4gYGlucHV0YCBvbiB3aGljaCB0byBjYWxjdWxhdGUgSmVua3MgbmF0dXJhbCBicmVha3NcbiogQHBhcmFtIHtudW1iZXJ9IG51bWJlck9mQnJlYWtzIG51bWJlciBvZiBjbGFzc2VzIGluIHdoaWNoIHRvIGdyb3VwIHRoZSBkYXRhXG4qIEByZXR1cm4ge0FycmF5PG51bWJlcj59IHRoZSBicmVhayBudW1iZXIgZm9yIGVhY2ggY2xhc3MgcGx1cyB0aGUgbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZXNcbiogQGV4YW1wbGVcbiogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuKiAgIHR1cmYucG9pbnQoWzQ5Ljg1OTczMywgNDAuNDAwNDI0XSwge3BvcHVsYXRpb246IDIwMH0pLFxuKiAgIHR1cmYucG9pbnQoWzQ5LjgzODc5LCA0MC40MDEyMDldLCB7cG9wdWxhdGlvbjogNjAwfSksXG4qICAgdHVyZi5wb2ludChbNDkuODE3ODQ4LCA0MC4zNzY4ODldLCB7cG9wdWxhdGlvbjogMTAwfSksXG4qICAgdHVyZi5wb2ludChbNDkuODQwNTA3LCA0MC4zODYwNDNdLCB7cG9wdWxhdGlvbjogMjAwfSksXG4qICAgdHVyZi5wb2ludChbNDkuODU0NTgzLCA0MC4zNzUzMl0sIHtwb3B1bGF0aW9uOiAzMDB9KV0pO1xuKlxuKiB2YXIgYnJlYWtzID0gdHVyZi5qZW5rcyhwb2ludHMsICdwb3B1bGF0aW9uJywgMyk7XG4qXG4qIC8vPWJyZWFrc1xuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmMsIGZpZWxkLCBudW0pe1xuICB2YXIgdmFscyA9IFtdO1xuICB2YXIgYnJlYWtzID0gW107XG5cbiAgZmMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihmZWF0dXJlKXtcbiAgICBpZihmZWF0dXJlLnByb3BlcnRpZXNbZmllbGRdIT09dW5kZWZpbmVkKXtcbiAgICAgIHZhbHMucHVzaChmZWF0dXJlLnByb3BlcnRpZXNbZmllbGRdKTtcbiAgICB9XG4gIH0pO1xuICBicmVha3MgPSBzcy5qZW5rcyh2YWxzLCBudW0pO1xuXG4gIHJldHVybiBicmVha3M7XG59O1xuIiwiLyoqXG4gKiBUYWtlcyBhIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlIGFuZCByZXR1cm5zIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIGF0IGFsbCBzZWxmLWludGVyc2VjdGlvbnMuXG4gKlxuICogQG1vZHVsZSB0dXJmL2tpbmtzXG4gKiBAcGFyYW0ge1BvbHlnb259IHBvbHlnb24gYSBQb2x5Z29uIGZlYXR1cmVcbiAqIEByZXR1cm5zIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIHJlcHJlc2VudGluZyBzZWxmLWludGVyc2VjdGlvbnNcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seSA9IHR1cmYucG9seWdvbihbW1xuICogIFstMTIuMDM0ODM1LCA4LjkwMTE4M10sXG4gKiAgWy0xMi4wNjA0MTMsIDguODk5ODI2XSxcbiAqICBbLTEyLjAzNjM4LCA4Ljg3MzE5OV0sXG4gKiAgWy0xMi4wNTkzODMsIDguODcxNDE4XSxcbiAqICBbLTEyLjAzNDgzNSwgOC45MDExODNdXG4gKiBdXSk7XG4gKiBcbiAqIHZhciBraW5rcyA9IHR1cmYua2lua3MocG9seSk7XG4gKlxuICogdmFyIHJlc3VsdCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oXG4gKiAga2lua3MuaW50ZXJzZWN0aW9ucy5mZWF0dXJlcy5jb25jYXQocG9seSkpO1xuICpcbiAqIC8vPXJlc3VsdFxuICovXG5cbnZhciBwb2x5Z29uID0gcmVxdWlyZSgndHVyZi1wb2x5Z29uJyk7XG52YXIgcG9pbnQgPSByZXF1aXJlKCd0dXJmLXBvaW50Jyk7XG52YXIgZmMgPSByZXF1aXJlKCd0dXJmLWZlYXR1cmVjb2xsZWN0aW9uJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seUluKSB7XG4gIHZhciBwb2x5O1xuICB2YXIgcmVzdWx0cyA9IHtpbnRlcnNlY3Rpb25zOiBmYyhbXSksIGZpeGVkOiBudWxsfTtcbiAgaWYgKHBvbHlJbi50eXBlID09PSAnRmVhdHVyZScpIHtcbiAgICBwb2x5ID0gcG9seUluLmdlb21ldHJ5O1xuICB9IGVsc2Uge1xuICAgIHBvbHkgPSBwb2x5SW47XG4gIH1cbiAgdmFyIGludGVyc2VjdGlvbkhhc2ggPSB7fTtcbiAgcG9seS5jb29yZGluYXRlcy5mb3JFYWNoKGZ1bmN0aW9uKHJpbmcxKXtcbiAgICBwb2x5LmNvb3JkaW5hdGVzLmZvckVhY2goZnVuY3Rpb24ocmluZzIpe1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHJpbmcxLmxlbmd0aC0xOyBpKyspIHtcbiAgICAgICAgZm9yKHZhciBrID0gMDsgayA8IHJpbmcyLmxlbmd0aC0xOyBrKyspIHtcbiAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gbGluZUludGVyc2VjdHMocmluZzFbaV1bMF0scmluZzFbaV1bMV0scmluZzFbaSsxXVswXSxyaW5nMVtpKzFdWzFdLFxuICAgICAgICAgICAgcmluZzJba11bMF0scmluZzJba11bMV0scmluZzJbaysxXVswXSxyaW5nMltrKzFdWzFdKTtcbiAgICAgICAgICBpZihpbnRlcnNlY3Rpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuaW50ZXJzZWN0aW9ucy5mZWF0dXJlcy5wdXNoKHBvaW50KFtpbnRlcnNlY3Rpb25bMF0sIGludGVyc2VjdGlvblsxXV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9KVxuICByZXR1cm4gcmVzdWx0cztcbn1cblxuXG4vLyBtb2RpZmllZCBmcm9tIGh0dHA6Ly9qc2ZpZGRsZS5uZXQvanVzdGluX2Nfcm91bmRzL0dkMlMyL2xpZ2h0L1xuZnVuY3Rpb24gbGluZUludGVyc2VjdHMobGluZTFTdGFydFgsIGxpbmUxU3RhcnRZLCBsaW5lMUVuZFgsIGxpbmUxRW5kWSwgbGluZTJTdGFydFgsIGxpbmUyU3RhcnRZLCBsaW5lMkVuZFgsIGxpbmUyRW5kWSkge1xuICAvLyBpZiB0aGUgbGluZXMgaW50ZXJzZWN0LCB0aGUgcmVzdWx0IGNvbnRhaW5zIHRoZSB4IGFuZCB5IG9mIHRoZSBpbnRlcnNlY3Rpb24gKHRyZWF0aW5nIHRoZSBsaW5lcyBhcyBpbmZpbml0ZSkgYW5kIGJvb2xlYW5zIGZvciB3aGV0aGVyIGxpbmUgc2VnbWVudCAxIG9yIGxpbmUgc2VnbWVudCAyIGNvbnRhaW4gdGhlIHBvaW50XG4gIHZhciBkZW5vbWluYXRvciwgYSwgYiwgbnVtZXJhdG9yMSwgbnVtZXJhdG9yMiwgcmVzdWx0ID0ge1xuICAgIHg6IG51bGwsXG4gICAgeTogbnVsbCxcbiAgICBvbkxpbmUxOiBmYWxzZSxcbiAgICBvbkxpbmUyOiBmYWxzZVxuICB9O1xuICBkZW5vbWluYXRvciA9ICgobGluZTJFbmRZIC0gbGluZTJTdGFydFkpICogKGxpbmUxRW5kWCAtIGxpbmUxU3RhcnRYKSkgLSAoKGxpbmUyRW5kWCAtIGxpbmUyU3RhcnRYKSAqIChsaW5lMUVuZFkgLSBsaW5lMVN0YXJ0WSkpO1xuICBpZiAoZGVub21pbmF0b3IgPT0gMCkge1xuICAgIGlmKHJlc3VsdC54ICE9IG51bGwgJiYgcmVzdWx0LnkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBhID0gbGluZTFTdGFydFkgLSBsaW5lMlN0YXJ0WTtcbiAgYiA9IGxpbmUxU3RhcnRYIC0gbGluZTJTdGFydFg7XG4gIG51bWVyYXRvcjEgPSAoKGxpbmUyRW5kWCAtIGxpbmUyU3RhcnRYKSAqIGEpIC0gKChsaW5lMkVuZFkgLSBsaW5lMlN0YXJ0WSkgKiBiKTtcbiAgbnVtZXJhdG9yMiA9ICgobGluZTFFbmRYIC0gbGluZTFTdGFydFgpICogYSkgLSAoKGxpbmUxRW5kWSAtIGxpbmUxU3RhcnRZKSAqIGIpO1xuICBhID0gbnVtZXJhdG9yMSAvIGRlbm9taW5hdG9yO1xuICBiID0gbnVtZXJhdG9yMiAvIGRlbm9taW5hdG9yO1xuXG4gIC8vIGlmIHdlIGNhc3QgdGhlc2UgbGluZXMgaW5maW5pdGVseSBpbiBib3RoIGRpcmVjdGlvbnMsIHRoZXkgaW50ZXJzZWN0IGhlcmU6XG4gIHJlc3VsdC54ID0gbGluZTFTdGFydFggKyAoYSAqIChsaW5lMUVuZFggLSBsaW5lMVN0YXJ0WCkpO1xuICByZXN1bHQueSA9IGxpbmUxU3RhcnRZICsgKGEgKiAobGluZTFFbmRZIC0gbGluZTFTdGFydFkpKTtcblxuICAvLyBpZiBsaW5lMSBpcyBhIHNlZ21lbnQgYW5kIGxpbmUyIGlzIGluZmluaXRlLCB0aGV5IGludGVyc2VjdCBpZjpcbiAgaWYgKGEgPiAwICYmIGEgPCAxKSB7XG4gICAgcmVzdWx0Lm9uTGluZTEgPSB0cnVlO1xuICB9XG4gIC8vIGlmIGxpbmUyIGlzIGEgc2VnbWVudCBhbmQgbGluZTEgaXMgaW5maW5pdGUsIHRoZXkgaW50ZXJzZWN0IGlmOlxuICBpZiAoYiA+IDAgJiYgYiA8IDEpIHtcbiAgICByZXN1bHQub25MaW5lMiA9IHRydWU7XG4gIH1cbiAgLy8gaWYgbGluZTEgYW5kIGxpbmUyIGFyZSBzZWdtZW50cywgdGhleSBpbnRlcnNlY3QgaWYgYm90aCBvZiB0aGUgYWJvdmUgYXJlIHRydWVcbiAgaWYocmVzdWx0Lm9uTGluZTEgJiYgcmVzdWx0Lm9uTGluZTIpe1xuICAgIHJldHVybiBbcmVzdWx0LngsIHJlc3VsdC55XTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsInZhciBkaXN0YW5jZSA9IHJlcXVpcmUoJ3R1cmYtZGlzdGFuY2UnKTtcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBMaW5lU3RyaW5nfSBmZWF0dXJlIGFuZCBtZWFzdXJlcyBpdHMgbGVuZ3RoIGluIHRoZSBzcGVjaWZpZWQgdW5pdHMuXG4gKlxuICogQG1vZHVsZSB0dXJmL2xpbmUtZGlzdGFuY2VcbiAqXG4gKiBAcGFyYW0ge0xpbmVTdHJpbmd9IExpbmUgdG8gbWVhc3VyZVxuICogQHBhcmFtIHtTdHJpbmd9IFt1bml0cz1taWxlc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGxlbmd0aCBvZiB0aGUgTGluZVN0cmluZ1xuICogQGV4YW1wbGVcbiAqIHZhciBsaW5lID0gdHVyZi5saW5lc3RyaW5nKFtcbiAqICAgWy03Ny4wMzE2NjksIDM4Ljg3ODYwNV0sXG4gKiAgIFstNzcuMDI5NjA5LCAzOC44ODE5NDZdLFxuICogICBbLTc3LjAyMDMzOSwgMzguODg0MDg0XSxcbiAqICAgWy03Ny4wMjU2NjEsIDM4Ljg4NTgyMV0sXG4gKiAgIFstNzcuMDIxODg0LCAzOC44ODk1NjNdLFxuICogICBbLTc3LjAxOTgyNCwgMzguODkyMzY4XVxuICogXSk7XG4gKlxuICogdmFyIGxlbmd0aCA9IHR1cmYubGluZURpc3RhbmNlKGxpbmUsICdtaWxlcycpO1xuICpcbiAqIC8vPWxlbmd0aFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpbmUsIHVuaXRzKSB7XG4gIHZhciBjb29yZHM7XG4gIGlmKGxpbmUudHlwZSA9PT0gJ0ZlYXR1cmUnKSBjb29yZHMgPSBsaW5lLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICBlbHNlIGlmKGxpbmUudHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSBjb29yZHMgPSBsaW5lLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICBlbHNlIHRocm93IG5ldyBFcnJvcignaW5wdXQgbXVzdCBiZSBhIExpbmVTdHJpbmcgRmVhdHVyZSBvciBHZW9tZXRyeScpO1xuXG4gIHZhciB0cmF2ZWxsZWQgPSAwO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIHRyYXZlbGxlZCArPSBkaXN0YW5jZShwb2ludChjb29yZHNbaV0pLCBwb2ludChjb29yZHNbaSsxXSksIHVuaXRzKTtcbiAgfVxuICByZXR1cm4gdHJhdmVsbGVkO1xufVxuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pc29saW5lcy9ub2RlX21vZHVsZXMvdHVyZi10aW4vbm9kZV9tb2R1bGVzL3R1cmYtbmVhcmVzdC9ub2RlX21vZHVsZXMvdHVyZi1kaXN0YW5jZS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCIvKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgTGluZVN0cmluZ30ge0BsaW5rIEZlYXR1cmV9IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG1vZHVsZSB0dXJmL2xpbmVzdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8TnVtYmVyPj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvc2l0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHJldHVybiB7TGluZVN0cmluZ30gYSBMaW5lU3RyaW5nIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIGxpbmVzdHJpbmcxID0gdHVyZi5saW5lc3RyaW5nKFtcbiAqXHRbLTIxLjk2NDQxNiwgNjQuMTQ4MjAzXSxcbiAqXHRbLTIxLjk1NjE3NiwgNjQuMTQxMzE2XSxcbiAqXHRbLTIxLjkzOTAxLCA2NC4xMzU5MjRdLFxuICpcdFstMjEuOTI3MzM3LCA2NC4xMzY2NzNdXG4gKiBdKTtcbiAqIHZhciBsaW5lc3RyaW5nMiA9IHR1cmYubGluZXN0cmluZyhbXG4gKlx0Wy0yMS45MjkwNTQsIDY0LjEyNzk4NV0sXG4gKlx0Wy0yMS45MTI5MTgsIDY0LjEzNDcyNl0sXG4gKlx0Wy0yMS45MTYwMDcsIDY0LjE0MTAxNl0sXG4gKiBcdFstMjEuOTMwMDg0LCA2NC4xNDQ0Nl1cbiAqIF0sIHtuYW1lOiAnbGluZSAxJywgZGlzdGFuY2U6IDE0NX0pO1xuICpcbiAqIC8vPWxpbmVzdHJpbmcxXG4gKlxuICogLy89bGluZXN0cmluZzJcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjb29yZGluYXRlcywgcHJvcGVydGllcyl7XG4gIGlmICghY29vcmRpbmF0ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gICAgXCJnZW9tZXRyeVwiOiB7XG4gICAgICBcInR5cGVcIjogXCJMaW5lU3RyaW5nXCIsXG4gICAgICBcImNvb3JkaW5hdGVzXCI6IGNvb3JkaW5hdGVzXG4gICAgfSxcbiAgICBcInByb3BlcnRpZXNcIjogcHJvcGVydGllcyB8fCB7fVxuICB9O1xufTtcbiIsInZhciBpbnNpZGUgPSByZXF1aXJlKCd0dXJmLWluc2lkZScpO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG1heGltdW0gdmFsdWUgb2YgYSBmaWVsZCBmb3IgYSBzZXQgb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlcyB3aXRoaW4gYSBzZXQgb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9tYXhcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHBvbHlnb25zIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2ludHMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5GaWVsZCB0aGUgZmllbGQgaW4gaW5wdXQgZGF0YSB0byBhbmFseXplXG4gKiBAcGFyYW0ge3N0cmluZ30gb3V0RmllbGQgdGhlIGZpZWxkIGluIHdoaWNoIHRvIHN0b3JlIHJlc3VsdHNcbiAqIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlc1xuICogd2l0aCBwcm9wZXJ0aWVzIGxpc3RlZCBhcyBgb3V0RmllbGRgIHZhbHVlc1xuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5Z29ucyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogICB0dXJmLnBvbHlnb24oW1tcbiAqICAgICBbMTAxLjU1MTQzNywgMy4xNTAxMTRdLFxuICogICAgIFsxMDEuNTUxNDM3LCAzLjI1MDIwOF0sXG4gKiAgICAgWzEwMS43NDIzMjQsIDMuMjUwMjA4XSxcbiAqICAgICBbMTAxLjc0MjMyNCwgMy4xNTAxMTRdLFxuICogICAgIFsxMDEuNTUxNDM3LCAzLjE1MDExNF1cbiAqICAgXV0pLFxuICogICB0dXJmLnBvbHlnb24oW1tcbiAqICAgICBbMTAxLjY1OTkyNywgMy4wMTE2MTJdLFxuICogICAgIFsxMDEuNjU5OTI3LCAzLjE0Mzk0NF0sXG4gKiAgICAgWzEwMS45MTM5ODYsIDMuMTQzOTQ0XSxcbiAqICAgICBbMTAxLjkxMzk4NiwgMy4wMTE2MTJdLFxuICogICAgIFsxMDEuNjU5OTI3LCAzLjAxMTYxMl1cbiAqICAgXV0pXG4gKiBdKTtcbiAqIHZhciBwb2ludHMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiAqICAgdHVyZi5wb2ludChbMTAxLjU2MTA1LCAzLjIxMzg3NF0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiAqICAgdHVyZi5wb2ludChbMTAxLjcwOTM2NSwgMy4yMTE4MTddLCB7cG9wdWxhdGlvbjogNjAwfSksXG4gKiAgIHR1cmYucG9pbnQoWzEwMS42NDU1MDcsIDMuMTY5MzExXSwge3BvcHVsYXRpb246IDEwMH0pLFxuICogICB0dXJmLnBvaW50KFsxMDEuNzA4Njc5LCAzLjA3MTI2Nl0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiAqICAgdHVyZi5wb2ludChbMTAxLjgyNjc4MiwgMy4wODE1NTFdLCB7cG9wdWxhdGlvbjogMzAwfSldKTtcbiAqXG4gKiB2YXIgYWdncmVnYXRlZCA9IHR1cmYubWF4KFxuICogICBwb2x5Z29ucywgcG9pbnRzLCAncG9wdWxhdGlvbicsICdtYXgnKTtcbiAqXG4gKiB2YXIgcmVzdWx0ID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihcbiAqICAgcG9pbnRzLmZlYXR1cmVzLmNvbmNhdChhZ2dyZWdhdGVkLmZlYXR1cmVzKSk7XG4gKlxuICogLy89cmVzdWx0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seUZDLCBwdEZDLCBpbkZpZWxkLCBvdXRGaWVsZCl7XG4gIHBvbHlGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHBvbHkpe1xuICAgIGlmKCFwb2x5LnByb3BlcnRpZXMpe1xuICAgICAgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgfVxuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBwdEZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocHQpe1xuICAgICAgaWYgKGluc2lkZShwdCwgcG9seSkpIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IG1heCh2YWx1ZXMpO1xuICB9KTtcblxuICByZXR1cm4gcG9seUZDO1xufVxuXG5mdW5jdGlvbiBtYXgoeCkge1xuICAgIHZhciB2YWx1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gT24gdGhlIGZpcnN0IGl0ZXJhdGlvbiBvZiB0aGlzIGxvb3AsIG1heCBpc1xuICAgICAgICAvLyB1bmRlZmluZWQgYW5kIGlzIHRodXMgbWFkZSB0aGUgbWF4aW11bSBlbGVtZW50IGluIHRoZSBhcnJheVxuICAgICAgICBpZiAoeFtpXSA+IHZhbHVlIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHZhbHVlID0geFtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuIiwidmFyIGluc2lkZSA9IHJlcXVpcmUoJ3R1cmYtaW5zaWRlJyk7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbWVkaWFuIHZhbHVlIG9mIGEgZmllbGQgZm9yIGEgc2V0IG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXMgd2l0aGluIGEgc2V0IG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcy5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvbWVkaWFuXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2x5Z29ucyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlc1xuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9pbnRzIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlc1xuICogQHBhcmFtIHtzdHJpbmd9IGluRmllbGQgdGhlIGZpZWxkIGluIGlucHV0IGRhdGEgdG8gYW5hbHl6ZVxuICogQHBhcmFtIHtzdHJpbmd9IG91dEZpZWxkIHRoZSBmaWVsZCBpbiB3aGljaCB0byBzdG9yZSByZXN1bHRzXG4gKiBAcmV0dXJuIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXNcbiAqIHdpdGggcHJvcGVydGllcyBsaXN0ZWQgYXMgYG91dEZpZWxkYCB2YWx1ZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWdvbnMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiAqICAgdHVyZi5wb2x5Z29uKFtbXG4gKiAgICBbMTguNDAwMDM5LCAtMzMuOTcwNjk3XSxcbiAqICAgIFsxOC40MDAwMzksIC0zMy44MTg1MThdLFxuICogICAgWzE4LjY2NTc3MSwgLTMzLjgxODUxOF0sXG4gKiAgICBbMTguNjY1NzcxLCAtMzMuOTcwNjk3XSxcbiAqICAgIFsxOC40MDAwMzksIC0zMy45NzA2OTddXG4gKiAgIF1dKSxcbiAqICAgdHVyZi5wb2x5Z29uKFtbXG4gKiAgICBbMTguNTM4NzQyLCAtMzQuMDUwMzgzXSxcbiAqICAgIFsxOC41Mzg3NDIsIC0zMy45ODcyMV0sXG4gKiAgICBbMTguNzAzNTM2LCAtMzMuOTg3MjFdLFxuICogICAgWzE4LjcwMzUzNiwgLTM0LjA1MDM4M10sXG4gKiAgICBbMTguNTM4NzQyLCAtMzQuMDUwMzgzXVxuICogICBdXSlcbiAqIF0pO1xuICogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogICB0dXJmLnBvaW50KFsxOC41MTQwMjIsIC0zMy44NjAxNTJdLCB7cG9wdWxhdGlvbjogMjAwfSksXG4gKiAgIHR1cmYucG9pbnQoWzE4LjQ4OTk5LCAtMzMuOTI2MjY5XSwge3BvcHVsYXRpb246IDYwMH0pLFxuICogICB0dXJmLnBvaW50KFsxOC41ODMzNzQsIC0zMy45MDU3NTVdLCB7cG9wdWxhdGlvbjogMTAwfSksXG4gKiAgIHR1cmYucG9pbnQoWzE4LjU5MTYxMywgLTM0LjAyNDc3OF0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiAqICAgdHVyZi5wb2ludChbMTguNjUzNDExLCAtMzQuMDE3OTQ5XSwge3BvcHVsYXRpb246IDMwMH0pXG4gKiBdKTtcbiAqIHZhciBtZWRpYW5zID0gdHVyZi5tZWRpYW4oXG4gKiAgcG9seWdvbnMsIHBvaW50cywgJ3BvcHVsYXRpb24nLCAnbWVkaWFuJyk7XG4gKlxuICogdmFyIHJlc3VsdCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oXG4gKiAgbWVkaWFucy5mZWF0dXJlcy5jb25jYXQocG9pbnRzLmZlYXR1cmVzKSk7XG4gKlxuICogLy89cmVzdWx0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seUZDLCBwdEZDLCBpbkZpZWxkLCBvdXRGaWVsZCl7XG4gIHBvbHlGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHBvbHkpe1xuICAgIGlmKCFwb2x5LnByb3BlcnRpZXMpe1xuICAgICAgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgfVxuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBwdEZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocHQpe1xuICAgICAgaWYgKGluc2lkZShwdCwgcG9seSkpIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IG1lZGlhbih2YWx1ZXMpO1xuICB9KTtcblxuICByZXR1cm4gcG9seUZDO1xufTtcblxuZnVuY3Rpb24gbWVkaWFuKHgpIHtcbiAgICAvLyBUaGUgbWVkaWFuIG9mIGFuIGVtcHR5IGxpc3QgaXMgbnVsbFxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyBTb3J0aW5nIHRoZSBhcnJheSBtYWtlcyBpdCBlYXN5IHRvIGZpbmQgdGhlIGNlbnRlciwgYnV0XG4gICAgLy8gdXNlIGAuc2xpY2UoKWAgdG8gZW5zdXJlIHRoZSBvcmlnaW5hbCBhcnJheSBgeGAgaXMgbm90IG1vZGlmaWVkXG4gICAgdmFyIHNvcnRlZCA9IHguc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG5cbiAgICAvLyBJZiB0aGUgbGVuZ3RoIG9mIHRoZSBsaXN0IGlzIG9kZCwgaXQncyB0aGUgY2VudHJhbCBudW1iZXJcbiAgICBpZiAoc29ydGVkLmxlbmd0aCAlIDIgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHNvcnRlZFsoc29ydGVkLmxlbmd0aCAtIDEpIC8gMl07XG4gICAgLy8gT3RoZXJ3aXNlLCB0aGUgbWVkaWFuIGlzIHRoZSBhdmVyYWdlIG9mIHRoZSB0d28gbnVtYmVyc1xuICAgIC8vIGF0IHRoZSBjZW50ZXIgb2YgdGhlIGxpc3RcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYSA9IHNvcnRlZFsoc29ydGVkLmxlbmd0aCAvIDIpIC0gMV07XG4gICAgICAgIHZhciBiID0gc29ydGVkWyhzb3J0ZWQubGVuZ3RoIC8gMildO1xuICAgICAgICByZXR1cm4gKGEgKyBiKSAvIDI7XG4gICAgfVxufVxuIiwidmFyIGNsb25lID0gcmVxdWlyZSgnY2xvbmUnKTtcbnZhciB1bmlvbiA9IHJlcXVpcmUoJ3R1cmYtdW5pb24nKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzIGFuZCByZXR1cm5zIGEgc2luZ2xlIG1lcmdlZFxuICogcG9seWdvbiBmZWF0dXJlLiBJZiB0aGUgaW5wdXQgUG9seWdvbiBmZWF0dXJlcyBhcmUgbm90IGNvbnRpZ3VvdXMsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHtAbGluayBNdWx0aVBvbHlnb259IGZlYXR1cmUuXG4gKiBAbW9kdWxlIHR1cmYvbWVyZ2VcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IGZjIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzXG4gKiBAcmV0dXJuIHtGZWF0dXJlfSBhIHtAbGluayBQb2x5Z29ufSBvciB7QGxpbmsgTXVsdGlQb2x5Z29ufSBmZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb25zID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4gKiAgdHVyZi5wb2x5Z29uKFtbXG4gKiAgICBbOS45OTQ4MTIsIDUzLjU0OTQ4N10sXG4gKiAgICBbMTAuMDQ2OTk3LCA1My41OTgyMDldLFxuICogICAgWzEwLjExNzcyMSwgNTMuNTMxNzM3XSxcbiAqICAgIFs5Ljk5NDgxMiwgNTMuNTQ5NDg3XVxuICogIF1dLCB7IGZpbGw6ICcjMGYwJyB9KSxcbiAqICB0dXJmLnBvbHlnb24oW1tcbiAqICAgIFsxMC4wMDA5OTEsIDUzLjUwNDE4XSxcbiAqICAgIFsxMC4wMzgwNywgNTMuNTYyNTM5XSxcbiAqICAgIFs5LjkyNjgzNCwgNTMuNTUxNzMxXSxcbiAqICAgIFsxMC4wMDA5OTEsIDUzLjUwNDE4XVxuICogIF1dLCB7IGZpbGw6ICcjMDBmJyB9KVxuICogXSk7XG4gKlxuICogdmFyIG1lcmdlZCA9IHR1cmYubWVyZ2UocG9seWdvbnMpO1xuICpcbiAqIC8vPXBvbHlnb25zXG4gKlxuICogLy89bWVyZ2VkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seWdvbnMsIGRvbmUpe1xuXG4gIHZhciBtZXJnZWQgPSBjbG9uZShwb2x5Z29ucy5mZWF0dXJlc1swXSksXG4gICAgZmVhdHVyZXMgPSBwb2x5Z29ucy5mZWF0dXJlcztcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICB2YXIgcG9seSA9IGZlYXR1cmVzW2ldO1xuXG4gICAgaWYocG9seS5nZW9tZXRyeSl7XG4gICAgICBtZXJnZWQgPSB1bmlvbihtZXJnZWQsIHBvbHkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtZXJnZWQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cbi8vIHNoaW0gZm9yIE5vZGUncyAndXRpbCcgcGFja2FnZVxuLy8gRE8gTk9UIFJFTU9WRSBUSElTISBJdCBpcyByZXF1aXJlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEVuZGVySlMgKGh0dHA6Ly9lbmRlcmpzLmNvbS8pLlxudmFyIHV0aWwgPSB7XG4gIGlzQXJyYXk6IGZ1bmN0aW9uIChhcikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKSB8fCAodHlwZW9mIGFyID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhhcikgPT09ICdbb2JqZWN0IEFycmF5XScpO1xuICB9LFxuICBpc0RhdGU6IGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuICB9LFxuICBpc1JlZ0V4cDogZnVuY3Rpb24gKHJlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiByZSA9PT0gJ29iamVjdCcgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbiAgfSxcbiAgZ2V0UmVnRXhwRmxhZ3M6IGZ1bmN0aW9uIChyZSkge1xuICAgIHZhciBmbGFncyA9ICcnO1xuICAgIHJlLmdsb2JhbCAmJiAoZmxhZ3MgKz0gJ2cnKTtcbiAgICByZS5pZ25vcmVDYXNlICYmIChmbGFncyArPSAnaScpO1xuICAgIHJlLm11bHRpbGluZSAmJiAoZmxhZ3MgKz0gJ20nKTtcbiAgICByZXR1cm4gZmxhZ3M7XG4gIH1cbn07XG5cblxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuICBtb2R1bGUuZXhwb3J0cyA9IGNsb25lO1xuXG4vKipcbiAqIENsb25lcyAoY29waWVzKSBhbiBPYmplY3QgdXNpbmcgZGVlcCBjb3B5aW5nLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gc3VwcG9ydHMgY2lyY3VsYXIgcmVmZXJlbmNlcyBieSBkZWZhdWx0LCBidXQgaWYgeW91IGFyZSBjZXJ0YWluXG4gKiB0aGVyZSBhcmUgbm8gY2lyY3VsYXIgcmVmZXJlbmNlcyBpbiB5b3VyIG9iamVjdCwgeW91IGNhbiBzYXZlIHNvbWUgQ1BVIHRpbWVcbiAqIGJ5IGNhbGxpbmcgY2xvbmUob2JqLCBmYWxzZSkuXG4gKlxuICogQ2F1dGlvbjogaWYgYGNpcmN1bGFyYCBpcyBmYWxzZSBhbmQgYHBhcmVudGAgY29udGFpbnMgY2lyY3VsYXIgcmVmZXJlbmNlcyxcbiAqIHlvdXIgcHJvZ3JhbSBtYXkgZW50ZXIgYW4gaW5maW5pdGUgbG9vcCBhbmQgY3Jhc2guXG4gKlxuICogQHBhcmFtIGBwYXJlbnRgIC0gdGhlIG9iamVjdCB0byBiZSBjbG9uZWRcbiAqIEBwYXJhbSBgY2lyY3VsYXJgIC0gc2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdCB0byBiZSBjbG9uZWQgbWF5IGNvbnRhaW5cbiAqICAgIGNpcmN1bGFyIHJlZmVyZW5jZXMuIChvcHRpb25hbCAtIHRydWUgYnkgZGVmYXVsdClcbiAqIEBwYXJhbSBgZGVwdGhgIC0gc2V0IHRvIGEgbnVtYmVyIGlmIHRoZSBvYmplY3QgaXMgb25seSB0byBiZSBjbG9uZWQgdG9cbiAqICAgIGEgcGFydGljdWxhciBkZXB0aC4gKG9wdGlvbmFsIC0gZGVmYXVsdHMgdG8gSW5maW5pdHkpXG4gKiBAcGFyYW0gYHByb3RvdHlwZWAgLSBzZXRzIHRoZSBwcm90b3R5cGUgdG8gYmUgdXNlZCB3aGVuIGNsb25pbmcgYW4gb2JqZWN0LlxuICogICAgKG9wdGlvbmFsIC0gZGVmYXVsdHMgdG8gcGFyZW50IHByb3RvdHlwZSkuXG4qL1xuXG5mdW5jdGlvbiBjbG9uZShwYXJlbnQsIGNpcmN1bGFyLCBkZXB0aCwgcHJvdG90eXBlKSB7XG4gIC8vIG1haW50YWluIHR3byBhcnJheXMgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMsIHdoZXJlIGNvcnJlc3BvbmRpbmcgcGFyZW50c1xuICAvLyBhbmQgY2hpbGRyZW4gaGF2ZSB0aGUgc2FtZSBpbmRleFxuICB2YXIgYWxsUGFyZW50cyA9IFtdO1xuICB2YXIgYWxsQ2hpbGRyZW4gPSBbXTtcblxuICB2YXIgdXNlQnVmZmVyID0gdHlwZW9mIEJ1ZmZlciAhPSAndW5kZWZpbmVkJztcblxuICBpZiAodHlwZW9mIGNpcmN1bGFyID09ICd1bmRlZmluZWQnKVxuICAgIGNpcmN1bGFyID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGRlcHRoID09ICd1bmRlZmluZWQnKVxuICAgIGRlcHRoID0gSW5maW5pdHk7XG5cbiAgLy8gcmVjdXJzZSB0aGlzIGZ1bmN0aW9uIHNvIHdlIGRvbid0IHJlc2V0IGFsbFBhcmVudHMgYW5kIGFsbENoaWxkcmVuXG4gIGZ1bmN0aW9uIF9jbG9uZShwYXJlbnQsIGRlcHRoKSB7XG4gICAgLy8gY2xvbmluZyBudWxsIGFsd2F5cyByZXR1cm5zIG51bGxcbiAgICBpZiAocGFyZW50ID09PSBudWxsKVxuICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAoZGVwdGggPT0gMClcbiAgICAgIHJldHVybiBwYXJlbnQ7XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgdmFyIHByb3RvO1xuICAgIGlmICh0eXBlb2YgcGFyZW50ICE9ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cblxuICAgIGlmICh1dGlsLmlzQXJyYXkocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBbXTtcbiAgICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAocGFyZW50KSkge1xuICAgICAgY2hpbGQgPSBuZXcgUmVnRXhwKHBhcmVudC5zb3VyY2UsIHV0aWwuZ2V0UmVnRXhwRmxhZ3MocGFyZW50KSk7XG4gICAgICBpZiAocGFyZW50Lmxhc3RJbmRleCkgY2hpbGQubGFzdEluZGV4ID0gcGFyZW50Lmxhc3RJbmRleDtcbiAgICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKHBhcmVudCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IERhdGUocGFyZW50LmdldFRpbWUoKSk7XG4gICAgfSBlbHNlIGlmICh1c2VCdWZmZXIgJiYgQnVmZmVyLmlzQnVmZmVyKHBhcmVudCkpIHtcbiAgICAgIGNoaWxkID0gbmV3IEJ1ZmZlcihwYXJlbnQubGVuZ3RoKTtcbiAgICAgIHBhcmVudC5jb3B5KGNoaWxkKTtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBwcm90b3R5cGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGFyZW50KTtcbiAgICAgICAgY2hpbGQgPSBPYmplY3QuY3JlYXRlKHByb3RvKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjaGlsZCA9IE9iamVjdC5jcmVhdGUocHJvdG90eXBlKTtcbiAgICAgICAgcHJvdG8gPSBwcm90b3R5cGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNpcmN1bGFyKSB7XG4gICAgICB2YXIgaW5kZXggPSBhbGxQYXJlbnRzLmluZGV4T2YocGFyZW50KTtcblxuICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgIHJldHVybiBhbGxDaGlsZHJlbltpbmRleF07XG4gICAgICB9XG4gICAgICBhbGxQYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIGFsbENoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgaW4gcGFyZW50KSB7XG4gICAgICB2YXIgYXR0cnM7XG4gICAgICBpZiAocHJvdG8pIHtcbiAgICAgICAgYXR0cnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGF0dHJzICYmIGF0dHJzLnNldCA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY2hpbGRbaV0gPSBfY2xvbmUocGFyZW50W2ldLCBkZXB0aCAtIDEpO1xuICAgIH1cblxuICAgIHJldHVybiBjaGlsZDtcbiAgfVxuXG4gIHJldHVybiBfY2xvbmUocGFyZW50LCBkZXB0aCk7XG59XG5cbi8qKlxuICogU2ltcGxlIGZsYXQgY2xvbmUgdXNpbmcgcHJvdG90eXBlLCBhY2NlcHRzIG9ubHkgb2JqZWN0cywgdXNlZnVsbCBmb3IgcHJvcGVydHlcbiAqIG92ZXJyaWRlIG9uIEZMQVQgY29uZmlndXJhdGlvbiBvYmplY3QgKG5vIG5lc3RlZCBwcm9wcykuXG4gKlxuICogVVNFIFdJVEggQ0FVVElPTiEgVGhpcyBtYXkgbm90IGJlaGF2ZSBhcyB5b3Ugd2lzaCBpZiB5b3UgZG8gbm90IGtub3cgaG93IHRoaXNcbiAqIHdvcmtzLlxuICovXG5jbG9uZS5jbG9uZVByb3RvdHlwZSA9IGZ1bmN0aW9uKHBhcmVudCkge1xuICBpZiAocGFyZW50ID09PSBudWxsKVxuICAgIHJldHVybiBudWxsO1xuXG4gIHZhciBjID0gZnVuY3Rpb24gKCkge307XG4gIGMucHJvdG90eXBlID0gcGFyZW50O1xuICByZXR1cm4gbmV3IGMoKTtcbn07XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbmNhdmUvbm9kZV9tb2R1bGVzL3R1cmYtbWVyZ2Uvbm9kZV9tb2R1bGVzL3R1cmYtdW5pb24vaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pbnRlcnNlY3Qvbm9kZV9tb2R1bGVzL2pzdHMvaW5kZXguanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pbnRlcnNlY3Qvbm9kZV9tb2R1bGVzL2pzdHMvbGliL2pzdHMuanNcIl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpIiwiLypcbiAgamF2YXNjcmlwdC51dGlsIGlzIGEgcG9ydCBvZiBzZWxlY3RlZCBwYXJ0cyBvZiBqYXZhLnV0aWwgdG8gSmF2YVNjcmlwdCB3aGljaFxuICBtYWluIHB1cnBvc2UgaXMgdG8gZWFzZSBwb3J0aW5nIEphdmEgY29kZSB0byBKYXZhU2NyaXB0LlxuICBcbiAgVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbiAgQ29weXJpZ2h0IChDKSAyMDExLTIwMTQgYnkgVGhlIEF1dGhvcnNcblxuICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4gIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiAgVEhFIFNPRlRXQVJFLlxuKi9cbjsoZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Z1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLnNwbGl0KFwiLlwiKSxkPWU7Y1swXWluIGR8fCFkLmV4ZWNTY3JpcHR8fGQuZXhlY1NjcmlwdChcInZhciBcIitjWzBdKTtmb3IodmFyIHQ7Yy5sZW5ndGgmJih0PWMuc2hpZnQoKSk7KWMubGVuZ3RofHx2b2lkIDA9PT1iP2Q9ZFt0XT9kW3RdOmRbdF09e306ZFt0XT1ifWZ1bmN0aW9uIGcoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EucT1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EucD1mdW5jdGlvbihhLGMsTyl7dmFyIE09QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBiLnByb3RvdHlwZVtjXS5hcHBseShhLE0pfX07ZnVuY3Rpb24gaChhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKGgsRXJyb3IpO2YoXCJqYXZhc2NyaXB0LnV0aWwuRW1wdHlTdGFja0V4Y2VwdGlvblwiLGgpO2gucHJvdG90eXBlLm5hbWU9XCJFbXB0eVN0YWNrRXhjZXB0aW9uXCI7ZnVuY3Rpb24gayhhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKGssRXJyb3IpO2YoXCJqYXZhc2NyaXB0LnV0aWwuSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvblwiLGspO2sucHJvdG90eXBlLm5hbWU9XCJJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXCI7ZnVuY3Rpb24gbCgpe31mKFwiamF2YXNjcmlwdC51dGlsLkl0ZXJhdG9yXCIsbCk7bC5wcm90b3R5cGUuaGFzTmV4dD1sLnByb3RvdHlwZS5jO2wucHJvdG90eXBlLm5leHQ9bC5wcm90b3R5cGUubmV4dDtsLnByb3RvdHlwZS5yZW1vdmU9bC5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIG0oKXt9ZihcImphdmFzY3JpcHQudXRpbC5Db2xsZWN0aW9uXCIsbSk7ZnVuY3Rpb24gbigpe31nKG4sbSk7ZihcImphdmFzY3JpcHQudXRpbC5MaXN0XCIsbik7ZnVuY3Rpb24gcCgpe31mKFwiamF2YXNjcmlwdC51dGlsLk1hcFwiLHApO2Z1bmN0aW9uIHEoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhxLEVycm9yKTtmKFwiamF2YXNjcmlwdC51dGlsLk5vU3VjaEVsZW1lbnRFeGNlcHRpb25cIixxKTtxLnByb3RvdHlwZS5uYW1lPVwiTm9TdWNoRWxlbWVudEV4Y2VwdGlvblwiO2Z1bmN0aW9uIHIoYSl7dGhpcy5tZXNzYWdlPWF8fFwiXCJ9ZyhyLEVycm9yKTtyLnByb3RvdHlwZS5uYW1lPVwiT3BlcmF0aW9uTm90U3VwcG9ydGVkXCI7ZnVuY3Rpb24gcyhhKXt0aGlzLmE9W107YSBpbnN0YW5jZW9mIG0mJnRoaXMuZShhKX1nKHMsbik7ZihcImphdmFzY3JpcHQudXRpbC5BcnJheUxpc3RcIixzKTtzLnByb3RvdHlwZS5hPW51bGw7cy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEpe3RoaXMuYS5wdXNoKGEpO3JldHVybiEwfTtzLnByb3RvdHlwZS5hZGQ9cy5wcm90b3R5cGUuYWRkO3MucHJvdG90eXBlLmU9ZnVuY3Rpb24oYSl7Zm9yKGE9YS5mKCk7YS5jKCk7KXRoaXMuYWRkKGEubmV4dCgpKTtyZXR1cm4hMH07cy5wcm90b3R5cGUuYWRkQWxsPXMucHJvdG90eXBlLmU7cy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hW2FdO3RoaXMuYVthXT1iO3JldHVybiBjfTtzLnByb3RvdHlwZS5zZXQ9cy5wcm90b3R5cGUuc2V0O3MucHJvdG90eXBlLmY9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHUodGhpcyl9O3MucHJvdG90eXBlLml0ZXJhdG9yPXMucHJvdG90eXBlLmY7XG5zLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7aWYoMD5hfHxhPj10aGlzLnNpemUoKSl0aHJvdyBuZXcgaztyZXR1cm4gdGhpcy5hW2FdfTtzLnByb3RvdHlwZS5nZXQ9cy5wcm90b3R5cGUuZ2V0O3MucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGh9O3MucHJvdG90eXBlLmlzRW1wdHk9cy5wcm90b3R5cGUuZztzLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O3MucHJvdG90eXBlLnNpemU9cy5wcm90b3R5cGUuc2l6ZTtzLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07cy5wcm90b3R5cGUudG9BcnJheT1zLnByb3RvdHlwZS5oO1xucy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxjPTAsZD10aGlzLmEubGVuZ3RoO2M8ZDtjKyspaWYodGhpcy5hW2NdPT09YSl7dGhpcy5hLnNwbGljZShjLDEpO2I9ITA7YnJlYWt9cmV0dXJuIGJ9O3MucHJvdG90eXBlLnJlbW92ZT1zLnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gdShhKXt0aGlzLmo9YX1mKFwiJGpzY29tcC5zY29wZS5JdGVyYXRvcl9cIix1KTt1LnByb3RvdHlwZS5qPW51bGw7dS5wcm90b3R5cGUuYj0wO3UucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmI9PT10aGlzLmouc2l6ZSgpKXRocm93IG5ldyBxO3JldHVybiB0aGlzLmouZ2V0KHRoaXMuYisrKX07dS5wcm90b3R5cGUubmV4dD11LnByb3RvdHlwZS5uZXh0O3UucHJvdG90eXBlLmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iPHRoaXMuai5zaXplKCk/ITA6ITF9O3UucHJvdG90eXBlLmhhc05leHQ9dS5wcm90b3R5cGUuYztcbnUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307dS5wcm90b3R5cGUucmVtb3ZlPXUucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiB2KCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuQXJyYXlzXCIsdik7XG52LnNvcnQ9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF0sYixjLGQ7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpYS5zb3J0KCk7ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCljPWFyZ3VtZW50c1sxXSxkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuY29tcGFyZShhLGIpfSxhLnNvcnQoZCk7ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aClmb3IoYj1hLnNsaWNlKGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pLGIuc29ydCgpLGQ9YS5zbGljZSgwLGFyZ3VtZW50c1sxXSkuY29uY2F0KGIsYS5zbGljZShhcmd1bWVudHNbMl0sYS5sZW5ndGgpKSxhLnNwbGljZSgwLGEubGVuZ3RoKSxiPTA7YjxkLmxlbmd0aDtiKyspYS5wdXNoKGRbYl0pO2Vsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGI9YS5zbGljZShhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKSxjPWFyZ3VtZW50c1szXSxkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuY29tcGFyZShhLGIpfSxiLnNvcnQoZCksXG5kPWEuc2xpY2UoMCxhcmd1bWVudHNbMV0pLmNvbmNhdChiLGEuc2xpY2UoYXJndW1lbnRzWzJdLGEubGVuZ3RoKSksYS5zcGxpY2UoMCxhLmxlbmd0aCksYj0wO2I8ZC5sZW5ndGg7YisrKWEucHVzaChkW2JdKX07di5hc0xpc3Q9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW5ldyBzLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYi5hZGQoYVtjXSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIHcoKXt0aGlzLmk9e319Zyh3LHApO2YoXCJqYXZhc2NyaXB0LnV0aWwuSGFzaE1hcFwiLHcpO3cucHJvdG90eXBlLmk9bnVsbDt3LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaVthXXx8bnVsbH07dy5wcm90b3R5cGUuZ2V0PXcucHJvdG90eXBlLmdldDt3LnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pW2FdPWJ9O3cucHJvdG90eXBlLnB1dD13LnByb3RvdHlwZS5wdXQ7dy5wcm90b3R5cGUubT1mdW5jdGlvbigpe3ZhciBhPW5ldyBzLGI7Zm9yKGIgaW4gdGhpcy5pKXRoaXMuaS5oYXNPd25Qcm9wZXJ0eShiKSYmYS5hZGQodGhpcy5pW2JdKTtyZXR1cm4gYX07dy5wcm90b3R5cGUudmFsdWVzPXcucHJvdG90eXBlLm07dy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm0oKS5zaXplKCl9O3cucHJvdG90eXBlLnNpemU9dy5wcm90b3R5cGUuc2l6ZTtmdW5jdGlvbiB4KCl7fWcoeCxtKTtmKFwiamF2YXNjcmlwdC51dGlsLlNldFwiLHgpO2Z1bmN0aW9uIHkoYSl7dGhpcy5hPVtdO2EgaW5zdGFuY2VvZiBtJiZ0aGlzLmUoYSl9Zyh5LHgpO2YoXCJqYXZhc2NyaXB0LnV0aWwuSGFzaFNldFwiLHkpO3kucHJvdG90eXBlLmE9bnVsbDt5LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylpZih0aGlzLmFbYl09PT1hKXJldHVybiEwO3JldHVybiExfTt5LnByb3RvdHlwZS5jb250YWlucz15LnByb3RvdHlwZS5jb250YWluczt5LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5jb250YWlucyhhKSlyZXR1cm4hMTt0aGlzLmEucHVzaChhKTtyZXR1cm4hMH07eS5wcm90b3R5cGUuYWRkPXkucHJvdG90eXBlLmFkZDt5LnByb3RvdHlwZS5lPWZ1bmN0aW9uKGEpe2ZvcihhPWEuZigpO2EuYygpOyl0aGlzLmFkZChhLm5leHQoKSk7cmV0dXJuITB9O3kucHJvdG90eXBlLmFkZEFsbD15LnByb3RvdHlwZS5lO1xueS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTt5LnByb3RvdHlwZS5yZW1vdmU9eS5wcm90b3R5cGUucmVtb3ZlO3kucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07eS5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aH07eS5wcm90b3R5cGUuaXNFbXB0eT15LnByb3RvdHlwZS5nO3kucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTt5LnByb3RvdHlwZS50b0FycmF5PXkucHJvdG90eXBlLmg7eS5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3JldHVybiBuZXcgeih0aGlzKX07eS5wcm90b3R5cGUuaXRlcmF0b3I9eS5wcm90b3R5cGUuZjtmdW5jdGlvbiB6KGEpe3RoaXMuaz1hfWYoXCIkanNjb21wLnNjb3BlLkl0ZXJhdG9yXyQxXCIseik7ei5wcm90b3R5cGUuaz1udWxsO1xuei5wcm90b3R5cGUuYj0wO3oucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLmI9PT10aGlzLmsuc2l6ZSgpKXRocm93IG5ldyBxO3JldHVybiB0aGlzLmsuYVt0aGlzLmIrK119O3oucHJvdG90eXBlLm5leHQ9ei5wcm90b3R5cGUubmV4dDt6LnByb3RvdHlwZS5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYjx0aGlzLmsuc2l6ZSgpPyEwOiExfTt6LnByb3RvdHlwZS5oYXNOZXh0PXoucHJvdG90eXBlLmM7ei5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTt6LnByb3RvdHlwZS5yZW1vdmU9ei5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIEEoKXt9ZyhBLHApO2YoXCJqYXZhc2NyaXB0LnV0aWwuU29ydGVkTWFwXCIsQSk7ZnVuY3Rpb24gQigpe31nKEIseCk7ZihcImphdmFzY3JpcHQudXRpbC5Tb3J0ZWRTZXRcIixCKTtmdW5jdGlvbiBDKCl7dGhpcy5hPVtdfWcoQyxuKTtmKFwiamF2YXNjcmlwdC51dGlsLlN0YWNrXCIsQyk7Qy5wcm90b3R5cGUuYT1udWxsO0MucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYSl7dGhpcy5hLnB1c2goYSk7cmV0dXJuIGF9O0MucHJvdG90eXBlLnB1c2g9Qy5wcm90b3R5cGUucHVzaDtDLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hLmxlbmd0aCl0aHJvdyBuZXcgaDtyZXR1cm4gdGhpcy5hLnBvcCgpfTtDLnByb3RvdHlwZS5wb3A9Qy5wcm90b3R5cGUucG9wO0MucHJvdG90eXBlLm89ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hLmxlbmd0aCl0aHJvdyBuZXcgaDtyZXR1cm4gdGhpcy5hW3RoaXMuYS5sZW5ndGgtMV19O0MucHJvdG90eXBlLnBlZWs9Qy5wcm90b3R5cGUubztDLnByb3RvdHlwZS5lbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aD8hMDohMX07Qy5wcm90b3R5cGUuZW1wdHk9Qy5wcm90b3R5cGUuZW1wdHk7XG5DLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW1wdHkoKX07Qy5wcm90b3R5cGUuaXNFbXB0eT1DLnByb3RvdHlwZS5nO0MucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hLmluZGV4T2YoYSl9O0MucHJvdG90eXBlLnNlYXJjaD1DLnByb3RvdHlwZS5zZWFyY2g7Qy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTtDLnByb3RvdHlwZS5zaXplPUMucHJvdG90eXBlLnNpemU7Qy5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O0MucHJvdG90eXBlLnRvQXJyYXk9Qy5wcm90b3R5cGUuaDtmdW5jdGlvbiBEKGEpe3JldHVybiBudWxsPT1hP251bGw6YS5wYXJlbnR9ZnVuY3Rpb24gRShhLGIpe251bGwhPT1hJiYoYS5jb2xvcj1iKX1mdW5jdGlvbiBGKGEpe3JldHVybiBudWxsPT1hP251bGw6YS5sZWZ0fWZ1bmN0aW9uIEcoYSl7cmV0dXJuIG51bGw9PWE/bnVsbDphLnJpZ2h0fWZ1bmN0aW9uIEgoKXt0aGlzLmQ9bnVsbDt0aGlzLm49MH1nKEgsQSk7ZihcImphdmFzY3JpcHQudXRpbC5UcmVlTWFwXCIsSCk7SC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmQ7bnVsbCE9PWI7KXt2YXIgYz1hLmNvbXBhcmVUbyhiLmtleSk7aWYoMD5jKWI9Yi5sZWZ0O2Vsc2UgaWYoMDxjKWI9Yi5yaWdodDtlbHNlIHJldHVybiBiLnZhbHVlfXJldHVybiBudWxsfTtILnByb3RvdHlwZS5nZXQ9SC5wcm90b3R5cGUuZ2V0O1xuSC5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGEsYil7aWYobnVsbD09PXRoaXMuZClyZXR1cm4gdGhpcy5kPXtrZXk6YSx2YWx1ZTpiLGxlZnQ6bnVsbCxyaWdodDpudWxsLHBhcmVudDpudWxsLGNvbG9yOjB9LHRoaXMubj0xLG51bGw7dmFyIGM9dGhpcy5kLGQsdDtkbyBpZihkPWMsdD1hLmNvbXBhcmVUbyhjLmtleSksMD50KWM9Yy5sZWZ0O2Vsc2UgaWYoMDx0KWM9Yy5yaWdodDtlbHNlIHJldHVybiBkPWMudmFsdWUsYy52YWx1ZT1iLGQ7d2hpbGUobnVsbCE9PWMpO2M9e2tleTphLGxlZnQ6bnVsbCxyaWdodDpudWxsLHZhbHVlOmIscGFyZW50OmQsY29sb3I6MH07MD50P2QubGVmdD1jOmQucmlnaHQ9Yztmb3IoYy5jb2xvcj0xO251bGwhPWMmJmMhPXRoaXMuZCYmMT09Yy5wYXJlbnQuY29sb3I7KUQoYyk9PUYoRChEKGMpKSk/KGQ9RyhEKEQoYykpKSwxPT0obnVsbD09ZD8wOmQuY29sb3IpPyhFKEQoYyksMCksRShkLDApLEUoRChEKGMpKSwxKSxjPUQoRChjKSkpOihjPT1HKEQoYykpJiZcbihjPUQoYyksSSh0aGlzLGMpKSxFKEQoYyksMCksRShEKEQoYykpLDEpLEoodGhpcyxEKEQoYykpKSkpOihkPUYoRChEKGMpKSksMT09KG51bGw9PWQ/MDpkLmNvbG9yKT8oRShEKGMpLDApLEUoZCwwKSxFKEQoRChjKSksMSksYz1EKEQoYykpKTooYz09RihEKGMpKSYmKGM9RChjKSxKKHRoaXMsYykpLEUoRChjKSwwKSxFKEQoRChjKSksMSksSSh0aGlzLEQoRChjKSkpKSk7dGhpcy5kLmNvbG9yPTA7dGhpcy5uKys7cmV0dXJuIG51bGx9O0gucHJvdG90eXBlLnB1dD1ILnByb3RvdHlwZS5wdXQ7SC5wcm90b3R5cGUubT1mdW5jdGlvbigpe3ZhciBhPW5ldyBzLGI7Yj10aGlzLmQ7aWYobnVsbCE9Yilmb3IoO251bGwhPWIubGVmdDspYj1iLmxlZnQ7aWYobnVsbCE9PWIpZm9yKGEuYWRkKGIudmFsdWUpO251bGwhPT0oYj1LKGIpKTspYS5hZGQoYi52YWx1ZSk7cmV0dXJuIGF9O0gucHJvdG90eXBlLnZhbHVlcz1ILnByb3RvdHlwZS5tO1xuZnVuY3Rpb24gSShhLGIpe2lmKG51bGwhPWIpe3ZhciBjPWIucmlnaHQ7Yi5yaWdodD1jLmxlZnQ7bnVsbCE9Yy5sZWZ0JiYoYy5sZWZ0LnBhcmVudD1iKTtjLnBhcmVudD1iLnBhcmVudDtudWxsPT1iLnBhcmVudD9hLmQ9YzpiLnBhcmVudC5sZWZ0PT1iP2IucGFyZW50LmxlZnQ9YzpiLnBhcmVudC5yaWdodD1jO2MubGVmdD1iO2IucGFyZW50PWN9fWZ1bmN0aW9uIEooYSxiKXtpZihudWxsIT1iKXt2YXIgYz1iLmxlZnQ7Yi5sZWZ0PWMucmlnaHQ7bnVsbCE9Yy5yaWdodCYmKGMucmlnaHQucGFyZW50PWIpO2MucGFyZW50PWIucGFyZW50O251bGw9PWIucGFyZW50P2EuZD1jOmIucGFyZW50LnJpZ2h0PT1iP2IucGFyZW50LnJpZ2h0PWM6Yi5wYXJlbnQubGVmdD1jO2MucmlnaHQ9YjtiLnBhcmVudD1jfX1cbmZ1bmN0aW9uIEsoYSl7aWYobnVsbD09PWEpcmV0dXJuIG51bGw7aWYobnVsbCE9PWEucmlnaHQpZm9yKHZhciBiPWEucmlnaHQ7bnVsbCE9PWIubGVmdDspYj1iLmxlZnQ7ZWxzZSBmb3IoYj1hLnBhcmVudDtudWxsIT09YiYmYT09PWIucmlnaHQ7KWE9YixiPWIucGFyZW50O3JldHVybiBifUgucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ufTtILnByb3RvdHlwZS5zaXplPUgucHJvdG90eXBlLnNpemU7ZnVuY3Rpb24gTChhKXt0aGlzLmE9W107YSBpbnN0YW5jZW9mIG0mJnRoaXMuZShhKX1nKEwsQik7ZihcImphdmFzY3JpcHQudXRpbC5UcmVlU2V0XCIsTCk7TC5wcm90b3R5cGUuYT1udWxsO0wucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWlmKDA9PT10aGlzLmFbYl0uY29tcGFyZVRvKGEpKXJldHVybiEwO3JldHVybiExfTtMLnByb3RvdHlwZS5jb250YWlucz1MLnByb3RvdHlwZS5jb250YWlucztMLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7aWYodGhpcy5jb250YWlucyhhKSlyZXR1cm4hMTtmb3IodmFyIGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylpZigxPT09dGhpcy5hW2JdLmNvbXBhcmVUbyhhKSlyZXR1cm4gdGhpcy5hLnNwbGljZShiLDAsYSksITA7dGhpcy5hLnB1c2goYSk7cmV0dXJuITB9O0wucHJvdG90eXBlLmFkZD1MLnByb3RvdHlwZS5hZGQ7XG5MLnByb3RvdHlwZS5lPWZ1bmN0aW9uKGEpe2ZvcihhPWEuZigpO2EuYygpOyl0aGlzLmFkZChhLm5leHQoKSk7cmV0dXJuITB9O0wucHJvdG90eXBlLmFkZEFsbD1MLnByb3RvdHlwZS5lO0wucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307TC5wcm90b3R5cGUucmVtb3ZlPUwucHJvdG90eXBlLnJlbW92ZTtMLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O0wucHJvdG90eXBlLnNpemU9TC5wcm90b3R5cGUuc2l6ZTtMLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RofTtMLnByb3RvdHlwZS5pc0VtcHR5PUwucHJvdG90eXBlLmc7TC5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O0wucHJvdG90eXBlLnRvQXJyYXk9TC5wcm90b3R5cGUuaDtMLnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBOKHRoaXMpfTtcbkwucHJvdG90eXBlLml0ZXJhdG9yPUwucHJvdG90eXBlLmY7ZnVuY3Rpb24gTihhKXt0aGlzLmw9YX1mKFwiJGpzY29tcC5zY29wZS5JdGVyYXRvcl8kMlwiLE4pO04ucHJvdG90eXBlLmw9bnVsbDtOLnByb3RvdHlwZS5iPTA7Ti5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuYj09PXRoaXMubC5zaXplKCkpdGhyb3cgbmV3IHE7cmV0dXJuIHRoaXMubC5hW3RoaXMuYisrXX07Ti5wcm90b3R5cGUubmV4dD1OLnByb3RvdHlwZS5uZXh0O04ucHJvdG90eXBlLmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iPHRoaXMubC5zaXplKCk/ITA6ITF9O04ucHJvdG90eXBlLmhhc05leHQ9Ti5wcm90b3R5cGUuYztOLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O04ucHJvdG90eXBlLnJlbW92ZT1OLnByb3RvdHlwZS5yZW1vdmU7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBnbG9iYWwmJihnbG9iYWwuamF2YXNjcmlwdD17fSxnbG9iYWwuamF2YXNjcmlwdC51dGlsPXt9LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuQXJyYXlMaXN0PXMsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5BcnJheXM9dixnbG9iYWwuamF2YXNjcmlwdC51dGlsLkNvbGxlY3Rpb249bSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkVtcHR5U3RhY2tFeGNlcHRpb249aCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkhhc2hNYXA9dyxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkhhc2hTZXQ9eSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb249ayxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkl0ZXJhdG9yPWwsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5MaXN0PW4sZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5NYXA9cCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLk5vU3VjaEVsZW1lbnRFeGNlcHRpb249cSxnbG9iYWwuamF2YXNjcmlwdC51dGlsLk9wZXJhdGlvbk5vdFN1cHBvcnRlZD1cbnIsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5TZXQ9eCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLlNvcnRlZE1hcD1BLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU29ydGVkU2V0PUIsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5TdGFjaz1DLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuVHJlZU1hcD1ILGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuVHJlZVNldD1MKTt9KS5jYWxsKHRoaXMpO1xuIiwiYXJndW1lbnRzWzRdW1wiL1VzZXJzL3RtY3cvc3JjL3ByZXNlbnRhdGlvbnMvdHVyZi1nZW9kYy9ub2RlX21vZHVsZXMvdHVyZi9ub2RlX21vZHVsZXMvdHVyZi1pbnRlcnNlY3Qvbm9kZV9tb2R1bGVzL2pzdHMvbm9kZV9tb2R1bGVzL2phdmFzY3JpcHQudXRpbC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCIvLyBodHRwOi8vY3Muc2VsdS5lZHUvfnJieXJkL21hdGgvbWlkcG9pbnQvXG4vLyAoKHgxK3gyKS8yKSwgKCh5MSt5MikvMilcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxuLyoqXG4gKiBUYWtlcyB0d28ge0BsaW5rIFBvaW50fSBmZWF0dXJlcyBhbmQgcmV0dXJucyBhIFBvaW50IG1pZHdheSBiZXR3ZWVuIHRoZSB0d28uXG4gKlxuICogQG1vZHVsZSB0dXJmL21pZHBvaW50XG4gKiBAcGFyYW0ge1BvaW50fSBwdDEgZmlyc3QgcG9pbnRcbiAqIEBwYXJhbSB7UG9pbnR9IHB0MiBzZWNvbmQgcG9pbnRcbiAqIEByZXR1cm4ge1BvaW50fSBhIHBvaW50IGJldHdlZW4gdGhlIHR3b1xuICogQGV4YW1wbGVcbiAqIHZhciBwdDEgPSB0dXJmLnBvaW50KFsxNDQuODM0ODIzLCAtMzcuNzcxMjU3XSk7XG4gKiBwdDEucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnIzAwZic7XG4gKiB2YXIgcHQyID0gdHVyZi5wb2ludChbMTQ1LjE0MjQ0LCAtMzcuODMwOTM3XSk7XG4gKiBwdDIucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnIzAwZic7XG4gKlxuICogdmFyIG1pZHBvaW50ZWQgPSB0dXJmLm1pZHBvaW50KHB0MSwgcHQyKTtcbiAqIG1pZHBvaW50ZWQucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnI2YwMCc7XG4gKlxuICogdmFyIHJlc3VsdCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogIHB0MSwgcHQyLCBtaWRwb2ludGVkXSk7XG4gKlxuICogLy89cmVzdWx0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9pbnQxLCBwb2ludDIpIHtcbiAgaWYgKHBvaW50MSA9PT0gbnVsbCB8fCBwb2ludDIgPT09IG51bGwpe1xuICAgIHRocm93IG5ldyBFcnJvcignTGVzcyB0aGFuIHR3byBwb2ludHMgcGFzc2VkLicpO1xuICB9XG5cbiAgdmFyIHgxID0gcG9pbnQxLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdO1xuICB2YXIgeDIgPSBwb2ludDIuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07XG4gIHZhciB5MSA9IHBvaW50MS5nZW9tZXRyeS5jb29yZGluYXRlc1sxXTtcbiAgdmFyIHkyID0gcG9pbnQyLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdO1xuXG4gIHZhciB4MyA9IHgxICsgeDI7XG4gIHZhciBtaWRYID0geDMvMjtcbiAgdmFyIHkzID0geTEgKyB5MjtcbiAgdmFyIG1pZFkgPSB5My8yO1xuXG4gIHJldHVybiBwb2ludChbbWlkWCwgbWlkWV0pO1xufTtcbiIsInZhciBpbnNpZGUgPSByZXF1aXJlKCd0dXJmLWluc2lkZScpO1xuXG4vKipcbiogQ2FsY3VsYXRlcyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhIGZpZWxkIGZvciB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIHdpdGhpbiBhIHNldCBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXMuXG4qXG4qIEBtb2R1bGUgdHVyZi9taW5cbiogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9seWdvbnMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXNcbiogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gcG9pbnRzIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvaW50fSBmZWF0dXJlc1xuKiBAcGFyYW0ge3N0cmluZ30gaW5GaWVsZCB0aGUgZmllbGQgaW4gaW5wdXQgZGF0YSB0byBhbmFseXplXG4qIEBwYXJhbSB7c3RyaW5nfSBvdXRGaWVsZCB0aGUgZmllbGQgaW4gd2hpY2ggdG8gc3RvcmUgcmVzdWx0c1xuKiBAcmV0dXJuIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXNcbiogd2l0aCBwcm9wZXJ0aWVzIGxpc3RlZCBhcyBgb3V0RmllbGRgIHZhbHVlc1xuKiBAZXhhbXBsZVxuKiB2YXIgcG9seWdvbnMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiogICB0dXJmLnBvbHlnb24oW1tcbiogICAgIFs3Mi44MDk2NTgsIDE4Ljk2MTgxOF0sXG4qICAgICBbNzIuODA5NjU4LCAxOC45NzQ4MDVdLFxuKiAgICAgWzcyLjgyNzE2NywgMTguOTc0ODA1XSxcbiogICAgIFs3Mi44MjcxNjcsIDE4Ljk2MTgxOF0sXG4qICAgICBbNzIuODA5NjU4LCAxOC45NjE4MThdXG4qICAgXV0pLFxuKiAgIHR1cmYucG9seWdvbihbW1xuKiAgICAgWzcyLjgyMDk4NywgMTguOTQ3MDQzXSxcbiogICAgIFs3Mi44MjA5ODcsIDE4Ljk1OTIyXSxcbiogICAgIFs3Mi44NDEyNDMsIDE4Ljk1OTIyXSxcbiogICAgIFs3Mi44NDEyNDMsIDE4Ljk0NzA0M10sXG4qICAgICBbNzIuODIwOTg3LCAxOC45NDcwNDNdXG4qICAgXV0pXG4qIF0pO1xuKiB2YXIgcG9pbnRzID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4qICAgdHVyZi5wb2ludChbNzIuODE0NDY0LCAxOC45NzEzOTZdLCB7cG9wdWxhdGlvbjogMjAwfSksXG4qICAgdHVyZi5wb2ludChbNzIuODIwMDQzLCAxOC45Njk3NzJdLCB7cG9wdWxhdGlvbjogNjAwfSksXG4qICAgdHVyZi5wb2ludChbNzIuODE3Mjk2LCAxOC45NjQyNTNdLCB7cG9wdWxhdGlvbjogMTAwfSksXG4qICAgdHVyZi5wb2ludChbNzIuODM1NzUsIDE4Ljk1NDgzN10sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiogICB0dXJmLnBvaW50KFs3Mi44MjgxOTcsIDE4Ljk1MDk0XSwge3BvcHVsYXRpb246IDMwMH0pXSk7XG4qXG4qIHZhciBtaW5pbXVtcyA9IHR1cmYubWluKFxuKiAgIHBvbHlnb25zLCBwb2ludHMsICdwb3B1bGF0aW9uJywgJ21pbicpO1xuKlxuKiB2YXIgcmVzdWx0ID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihcbiogICBwb2ludHMuZmVhdHVyZXMuY29uY2F0KG1pbmltdW1zLmZlYXR1cmVzKSk7XG4qXG4qIC8vPXJlc3VsdFxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocG9seUZDLCBwdEZDLCBpbkZpZWxkLCBvdXRGaWVsZCl7XG4gIHBvbHlGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHBvbHkpe1xuICAgIGlmKCFwb2x5LnByb3BlcnRpZXMpe1xuICAgICAgcG9seS5wcm9wZXJ0aWVzID0ge307XG4gICAgfVxuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICBwdEZDLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24ocHQpe1xuICAgICAgaWYgKGluc2lkZShwdCwgcG9seSkpIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHQucHJvcGVydGllc1tpbkZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9seS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IG1pbih2YWx1ZXMpO1xuICB9KTtcblxuICByZXR1cm4gcG9seUZDO1xufTtcblxuZnVuY3Rpb24gbWluKHgpIHtcbiAgICB2YXIgdmFsdWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24gb2YgdGhpcyBsb29wLCBtaW4gaXNcbiAgICAgICAgLy8gdW5kZWZpbmVkIGFuZCBpcyB0aHVzIG1hZGUgdGhlIG1pbmltdW0gZWxlbWVudCBpbiB0aGUgYXJyYXlcbiAgICAgICAgaWYgKHhbaV0gPCB2YWx1ZSB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB2YWx1ZSA9IHhbaV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbiIsInZhciBkaXN0YW5jZSA9IHJlcXVpcmUoJ3R1cmYtZGlzdGFuY2UnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBQb2ludH0gZmVhdHVyZSBhbmQgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IG9mIFBvaW50IGZlYXR1cmVzIGFuZCByZXR1cm5zIHRoZSBQb2ludCBmZWF0dXJlIGZyb20gdGhlIEZlYXR1cmVDb2xsZWN0aW9uIGNsb3Nlc3QgdG8gdGhlIGlucHV0IHBvaW50LlxuICpcbiAqIEBtb2R1bGUgdHVyZi9uZWFyZXN0XG4gKiBAcGFyYW0ge1BvaW50fSBwb2ludCB0aGUgcmVmZXJlbmNlIHBvaW50XG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhZ2FpbnN0IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgUG9pbnQgZmVhdHVyZXNcbiAqIEByZXR1cm4ge0ZlYXR1cmV9IHRoZSBjbG9zZXN0IFBvaW50IGZlYXR1cmUgaW4gYGFnYWluc3RgIHRvIGBwb2ludGBcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB0dXJmLnBvaW50KFsyOC45NjU3OTcsIDQxLjAxMDA4Nl0pO1xuICogcG9pbnQucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnIzBmMCc7XG4gKiB2YXIgYWdhaW5zdCA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogIHR1cmYucG9pbnQoWzI4Ljk3Mzg2NSwgNDEuMDExMTIyXSksXG4gKiAgdHVyZi5wb2ludChbMjguOTQ4NDU5LCA0MS4wMjQyMDRdKSxcbiAqICB0dXJmLnBvaW50KFsyOC45Mzg2NzQsIDQxLjAxMzMyNF0pXG4gKiBdKTtcbiAqXG4gKiB2YXIgbmVhcmVzdCA9IHR1cmYubmVhcmVzdChwb2ludCwgYWdhaW5zdCk7XG4gKiBuZWFyZXN0LnByb3BlcnRpZXNbJ21hcmtlci1jb2xvciddID0gJyNmMDAnO1xuICpcbiAqIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFxuICBhZ2FpbnN0LmZlYXR1cmVzLmNvbmNhdChwb2ludCkpO1xuICpcbiAqIC8vPXJlc3VsdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldFBvaW50LCBwb2ludHMpe1xuICB2YXIgbmVhcmVzdFBvaW50O1xuICB2YXIgY291bnQgPSAwO1xuICB2YXIgZGlzdCA9IEluZmluaXR5O1xuICBwb2ludHMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCl7XG4gICAgaWYoIW5lYXJlc3RQb2ludCl7XG4gICAgICBuZWFyZXN0UG9pbnQgPSBwdDtcbiAgICAgIHZhciBkaXN0ID0gZGlzdGFuY2UodGFyZ2V0UG9pbnQsIHB0LCAnbWlsZXMnKTtcbiAgICAgIG5lYXJlc3RQb2ludC5wcm9wZXJ0aWVzLmRpc3RhbmNlID0gZGlzdDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHZhciBkaXN0ID0gZGlzdGFuY2UodGFyZ2V0UG9pbnQsIHB0LCAnbWlsZXMnKTtcbiAgICAgIGlmKGRpc3QgPCBuZWFyZXN0UG9pbnQucHJvcGVydGllcy5kaXN0YW5jZSl7XG4gICAgICAgIG5lYXJlc3RQb2ludCA9IHB0O1xuICAgICAgICBuZWFyZXN0UG9pbnQucHJvcGVydGllcy5kaXN0YW5jZSA9IGRpc3Q7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgZGVsZXRlIG5lYXJlc3RQb2ludC5wcm9wZXJ0aWVzLmRpc3RhbmNlO1xuICByZXR1cm4gbmVhcmVzdFBvaW50O1xufVxuIiwiLyoqXG4gKiBUYWtlcyBhIHRyaWFuZ3VsYXIgcGxhbmUgYXMgYSB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZVxuICogYW5kIGEge0BsaW5rIFBvaW50fSBmZWF0dXJlIHdpdGhpbiB0aGF0IHRyaWFuZ2xlIGFuZCByZXR1cm5zIHRoZSB6LXZhbHVlXG4gKiBhdCB0aGF0IHBvaW50LiBUaGUgUG9seWdvbiBuZWVkcyB0byBoYXZlIHByb3BlcnRpZXMgYGFgLCBgYmAsIGFuZCBgY2BcbiAqIHRoYXQgZGVmaW5lIHRoZSB2YWx1ZXMgYXQgaXRzIHRocmVlIGNvcm5lcnMuXG4gKlxuICogQG1vZHVsZSB0dXJmL3BsYW5lcG9pbnRcbiAqIEBwYXJhbSB7UG9pbnR9IGludGVycG9sYXRlZFBvaW50IHRoZSBQb2ludCBmb3Igd2hpY2ggYSB6LXZhbHVlIHdpbGwgYmUgY2FsY3VsYXRlZFxuICogQHBhcmFtIHtQb2x5Z29ufSB0cmlhbmdsZSBhIFBvbHlnb24gZmVhdHVyZSB3aXRoIHRocmVlIHZlcnRpY2VzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSB6LXZhbHVlIGZvciBgaW50ZXJwb2xhdGVkUG9pbnRgXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0gdHVyZi5wb2ludChbLTc1LjMyMjEsIDM5LjUyOV0pO1xuICogLy8gdHJpYW5nbGUgaXMgYSBwb2x5Z29uIHdpdGggXCJhXCIsIFwiYlwiLFxuICogLy8gYW5kIFwiY1wiIHZhbHVlcyByZXByZXNlbnRpbmdcbiAqIC8vIHRoZSB2YWx1ZXMgb2YgdGhlIGNvb3JkaW5hdGVzIGluIG9yZGVyLlxuICogdmFyIHRyaWFuZ2xlID0gdHVyZi5wb2x5Z29uKFtbXG4gKiAgWy03NS4xMjIxLCAzOS41N10sXG4gKiAgWy03NS41OCwgMzkuMThdLFxuICogIFstNzUuOTcsIDM5Ljg2XSxcbiAqICBbLTc1LjEyMjEsIDM5LjU3XVxuICogXV0sXG4gKiAgIHtcImFcIjogMTEsIFwiYlwiOiAxMjIsIFwiY1wiOiA0NH0pO1xuICpcbiAqIHZhciBmZWF0dXJlcyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oXG4gKiAgW3RyaWFuZ2xlLCBwb2ludF0pO1xuICpcbiAqIHZhciB6VmFsdWUgPSB0dXJmLnBsYW5lcG9pbnQocG9pbnQsIHRyaWFuZ2xlKTtcbiAqXG4gKiAvLz1mZWF0dXJlc1xuICpcbiAqIC8vPXpWYWx1ZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50LCB0cmlhbmdsZSl7XG4gIHZhciB4ID0gcG9pbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0sXG4gICAgICB5ID0gcG9pbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV0sXG4gICAgICB4MSA9IHRyaWFuZ2xlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzBdWzBdLFxuICAgICAgeTEgPSB0cmlhbmdsZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXVsxXSxcbiAgICAgIHoxID0gdHJpYW5nbGUucHJvcGVydGllcy5hLFxuICAgICAgeDIgPSB0cmlhbmdsZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsxXVswXSxcbiAgICAgIHkyID0gdHJpYW5nbGUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMV1bMV0sXG4gICAgICB6MiA9IHRyaWFuZ2xlLnByb3BlcnRpZXMuYixcbiAgICAgIHgzID0gdHJpYW5nbGUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMl1bMF0sXG4gICAgICB5MyA9IHRyaWFuZ2xlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzJdWzFdLFxuICAgICAgejMgPSB0cmlhbmdsZS5wcm9wZXJ0aWVzLmM7XG5cbiAgdmFyIHogPSAoejMgKiAoeC14MSkgKiAoeS15MikgKyB6MSAqICh4LXgyKSAqICh5LXkzKSArIHoyICogKHgteDMpICogKHkteTEpIC1cbiAgICAgIHoyICogKHgteDEpICogKHkteTMpIC0gejMgKiAoeC14MikgKiAoeS15MSkgLSB6MSAqICh4LXgzKSAqICh5LXkyKSkgL1xuICAgICAgKCh4LXgxKSAqICh5LXkyKSArICh4LXgyKSAqICh5LXkzKSArKHgteDMpICogKHkteTEpIC1cbiAgICAgICAoeC14MSkgKiAoeS15MykgLSAoeC14MikgKiAoeS15MSkgLSAoeC14MykgKiAoeS15MikpO1xuXG4gIHJldHVybiB6O1xufTtcbiIsInZhciBmZWF0dXJlQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24nKTtcbnZhciBjZW50cm9pZCA9IHJlcXVpcmUoJ3R1cmYtY2VudGVyJyk7XG52YXIgZGlzdGFuY2UgPSByZXF1aXJlKCd0dXJmLWRpc3RhbmNlJyk7XG52YXIgaW5zaWRlID0gcmVxdWlyZSgndHVyZi1pbnNpZGUnKTtcbnZhciBleHBsb2RlID0gcmVxdWlyZSgndHVyZi1leHBsb2RlJyk7XG5cbi8qKlxuICogRmluZHMgYSB7QGxpbmsgUG9pbnR9IGd1YXJhbnRlZWQgdG8gYmUgb24gdGhlIHN1cmZhY2Ugb2ZcbiAqIHtAbGluayBHZW9KU09OfSBvYmplY3QuXG4gKlxuICogKiBHaXZlbiBhIHtAbGluayBQb2x5Z29ufSwgdGhlIHBvaW50IHdpbGwgYmUgaW4gdGhlIGFyZWEgb2YgdGhlIHBvbHlnb25cbiAqICogR2l2ZW4gYSB7QGxpbmsgTGluZVN0cmluZ30sIHRoZSBwb2ludCB3aWxsIGJlIGFsb25nIHRoZSBzdHJpbmdcbiAqICogR2l2ZW4gYSB7QGxpbmsgUG9pbnR9LCB0aGUgcG9pbnQgd2lsbCB0aGUgc2FtZSBhcyB0aGUgaW5wdXRcbiAqXG4gKiBAbW9kdWxlIHR1cmYvcG9pbnRPblN1cmZhY2VcbiAqIEBwYXJhbSB7R2VvSlNPTn0gaW5wdXQgYW55IEdlb0pTT04gb2JqZWN0XG4gKiBAcmV0dXJucyB7RmVhdHVyZX0gYSBwb2ludCBvbiB0aGUgc3VyZmFjZSBvZiBgaW5wdXRgXG4gKiBAZXhhbXBsZVxuICogLy8gY3JlYXRlIGEgcmFuZG9tIHBvbHlnb25cbiAqIHZhciBwb2x5Z29uID0gdHVyZi5yYW5kb20oJ3BvbHlnb24nKTtcbiAqXG4gKiAvLz1wb2x5Z29uXG4gKlxuICogdmFyIHBvaW50T25Qb2x5Z29uID0gdHVyZi5wb2ludE9uU3VyZmFjZShwb2x5Z29uKTtcbiAqXG4gKiB2YXIgZmMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKHBvbHlnb24uZmVhdHVyZXMuY29uY2F0KHBvaW50T25Qb2x5Z29uKSk7XG4gKlxuICogLy89cG9pbnRPblBvbHlnb25cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmYykge1xuICAvLyBub3JtYWxpemVcbiAgaWYoZmMudHlwZSAhPSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgaWYoZmMudHlwZSAhPSAnRmVhdHVyZScpIHtcbiAgICAgIGZjID0ge1xuICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgIGdlb21ldHJ5OiBmYyxcbiAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgIH07XG4gICAgfVxuICAgIGZjID0gZmVhdHVyZUNvbGxlY3Rpb24oW2ZjXSk7XG4gIH1cblxuICAvL2dldCBjZW50cm9pZFxuICB2YXIgY2VudCA9IGNlbnRyb2lkKGZjKTtcblxuICAvLyBjaGVjayB0byBzZWUgaWYgY2VudHJvaWQgaXMgb24gc3VyZmFjZVxuICB2YXIgb25TdXJmYWNlID0gZmFsc2U7XG4gIHZhciBpID0gMDtcbiAgd2hpbGUoIW9uU3VyZmFjZSAmJiBpIDwgZmMuZmVhdHVyZXMubGVuZ3RoKSB7XG4gICAgdmFyIGdlb20gPSBmYy5mZWF0dXJlc1tpXS5nZW9tZXRyeTtcbiAgICBpZiAoZ2VvbS50eXBlID09PSAnUG9pbnQnKSB7XG4gICAgICBpZiAoY2VudC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSA9PT0gZ2VvbS5jb29yZGluYXRlc1swXSAmJlxuICAgICAgICBjZW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdID09PSBnZW9tLmNvb3JkaW5hdGVzWzFdKSB7XG4gICAgICAgIG9uU3VyZmFjZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKGdlb20udHlwZSA9PT0gJ011bHRpUG9pbnQnKSB7XG4gICAgICB2YXIgb25NdWx0aVBvaW50ID0gZmFsc2U7XG4gICAgICB2YXIgayA9IDA7XG4gICAgICB3aGlsZSghb25NdWx0aVBvaW50ICYmIGsgPCBnZW9tLmNvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICBpZiAoY2VudC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSA9PT0gZ2VvbS5jb29yZGluYXRlc1trXVswXSAmJlxuICAgICAgICAgIGNlbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV0gPT09IGdlb20uY29vcmRpbmF0ZXNba11bMV0pIHtcbiAgICAgICAgICBvblN1cmZhY2UgPSB0cnVlO1xuICAgICAgICAgIG9uTXVsdGlQb2ludCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaysrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZihnZW9tLnR5cGUgPT09ICdMaW5lU3RyaW5nJykge1xuICAgICAgdmFyIG9uTGluZSA9IGZhbHNlO1xuICAgICAgdmFyIGsgPSAwO1xuICAgICAgd2hpbGUoIW9uTGluZSAmJiBrIDwgZ2VvbS5jb29yZGluYXRlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHZhciB4ID0gY2VudC5nZW9tZXRyeS5jb29yZGluYXRlc1swXTtcbiAgICAgICAgdmFyIHkgPSBjZW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdO1xuICAgICAgICB2YXIgeDEgPSBnZW9tLmNvb3JkaW5hdGVzW2tdWzBdO1xuICAgICAgICB2YXIgeTEgPSBnZW9tLmNvb3JkaW5hdGVzW2tdWzFdO1xuICAgICAgICB2YXIgeDIgPSBnZW9tLmNvb3JkaW5hdGVzW2srMV1bMF07XG4gICAgICAgIHZhciB5MiA9IGdlb20uY29vcmRpbmF0ZXNbaysxXVsxXTtcbiAgICAgICAgaWYocG9pbnRPblNlZ21lbnQoeCwgeSwgeDEsIHkxLCB4MiwgeTIpKSB7XG4gICAgICAgICAgb25MaW5lID0gdHJ1ZTtcbiAgICAgICAgICBvblN1cmZhY2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGsrKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoZ2VvbS50eXBlID09PSAnTXVsdGlMaW5lU3RyaW5nJykge1xuICAgICAgdmFyIG9uTXVsdGlMaW5lID0gZmFsc2U7XG4gICAgICB2YXIgaiA9IDA7XG4gICAgICB3aGlsZSghb25NdWx0aUxpbmUgJiYgaiA8IGdlb20uY29vcmRpbmF0ZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBvbkxpbmUgPSBmYWxzZTtcbiAgICAgICAgdmFyIGsgPSAwO1xuICAgICAgICB2YXIgbGluZSA9IGdlb20uY29vcmRpbmF0ZXNbal07XG4gICAgICAgIHdoaWxlKCFvbkxpbmUgJiYgayA8IGxpbmUubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHZhciB4ID0gY2VudC5nZW9tZXRyeS5jb29yZGluYXRlc1swXTtcbiAgICAgICAgICB2YXIgeSA9IGNlbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV07XG4gICAgICAgICAgdmFyIHgxID0gbGluZVtrXVswXTtcbiAgICAgICAgICB2YXIgeTEgPSBsaW5lW2tdWzFdO1xuICAgICAgICAgIHZhciB4MiA9IGxpbmVbaysxXVswXTtcbiAgICAgICAgICB2YXIgeTIgPSBsaW5lW2srMV1bMV07XG4gICAgICAgICAgaWYocG9pbnRPblNlZ21lbnQoeCwgeSwgeDEsIHkxLCB4MiwgeTIpKSB7XG4gICAgICAgICAgICBvbkxpbmUgPSB0cnVlO1xuICAgICAgICAgICAgb25TdXJmYWNlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaysrO1xuICAgICAgICB9XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYoZ2VvbS50eXBlID09PSAnUG9seWdvbicgfHwgZ2VvbS50eXBlID09PSAnTXVsdGlQb2x5Z29uJykge1xuICAgICAgdmFyIGYgPSB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgZ2VvbWV0cnk6IGdlb20sXG4gICAgICAgIHByb3BlcnRpZXM6IHt9XG4gICAgICB9O1xuICAgICAgaWYoaW5zaWRlKGNlbnQsIGYpKSB7XG4gICAgICAgIG9uU3VyZmFjZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGkrKztcbiAgfVxuICBpZihvblN1cmZhY2UpIHtcbiAgICByZXR1cm4gY2VudDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmVydGljZXMgPSBmZWF0dXJlQ29sbGVjdGlvbihbXSk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGZjLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2ZXJ0aWNlcy5mZWF0dXJlcyA9IHZlcnRpY2VzLmZlYXR1cmVzLmNvbmNhdChleHBsb2RlKGZjLmZlYXR1cmVzW2ldKS5mZWF0dXJlcyk7XG4gICAgfVxuICAgIHZhciBjbG9zZXN0VmVydGV4O1xuICAgIHZhciBjbG9zZXN0RGlzdGFuY2UgPSBJbmZpbml0eTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdmVydGljZXMuZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkaXN0ID0gZGlzdGFuY2UoY2VudCwgdmVydGljZXMuZmVhdHVyZXNbaV0sICdtaWxlcycpO1xuICAgICAgaWYoZGlzdCA8IGNsb3Nlc3REaXN0YW5jZSkge1xuICAgICAgICBjbG9zZXN0RGlzdGFuY2UgPSBkaXN0O1xuICAgICAgICBjbG9zZXN0VmVydGV4ID0gdmVydGljZXMuZmVhdHVyZXNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjbG9zZXN0VmVydGV4O1xuICB9XG59O1xuXG5mdW5jdGlvbiBwb2ludE9uU2VnbWVudCAoeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgdmFyIGFiID0gTWF0aC5zcXJ0KCh4Mi14MSkqKHgyLXgxKSsoeTIteTEpKih5Mi15MSkpO1xuICB2YXIgYXAgPSBNYXRoLnNxcnQoKHgteDEpKih4LXgxKSsoeS15MSkqKHkteTEpKTtcbiAgdmFyIHBiID0gTWF0aC5zcXJ0KCh4Mi14KSooeDIteCkrKHkyLXkpKih5Mi15KSk7XG4gIGlmKGFiID09PSBhcCArIHBiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsInZhciBleHRlbnQgPSByZXF1aXJlKCd0dXJmLWV4dGVudCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxheWVyLCBkb25lKXtcbiAgdmFyIGV4dCA9IGV4dGVudChsYXllcik7XG4gIHZhciB4ID0gKGV4dFswXSArIGV4dFsyXSkvMjtcbiAgdmFyIHkgPSAoZXh0WzFdICsgZXh0WzNdKS8yO1xuICB2YXIgY2VudGVyID0ge1xuICAgIFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAgICBcImdlb21ldHJ5XCI6IHtcbiAgICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gICAgICBcImNvb3JkaW5hdGVzXCI6IFt4LCB5XVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGNlbnRlcjtcbn0iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2xpbmVzL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2xpbmVzL25vZGVfbW9kdWxlcy90dXJmLWV4dGVudC9ub2RlX21vZHVsZXMvZmxhdHRlbi9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCJ2YXIgZmxhdHRlbiA9IHJlcXVpcmUoJ2ZsYXR0ZW4nKTtcbnZhciBmZWF0dXJlQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ3R1cmYtZmVhdHVyZWNvbGxlY3Rpb24nKTtcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmYyl7XG4gIGlmKGZjLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpe1xuICAgIGZvcih2YXIgaSBpbiBmYy5mZWF0dXJlcyl7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgO1xuICAgICAgc3dpdGNoKGZjLmZlYXR1cmVzW2ldLmdlb21ldHJ5LnR5cGUpe1xuICAgICAgICBjYXNlICdQb2ludCc6XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSBbZmMuZmVhdHVyZXNbaV0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNdO1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgICAgICAgIGNvb3JkaW5hdGVzID0gZmMuZmVhdHVyZXNbaV0uZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnUG9seWdvbic6XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSBmYy5mZWF0dXJlc1tpXS5nZW9tZXRyeS5jb29yZGluYXRlcztcbiAgICAgICAgICBjb29yZGluYXRlcyA9IGZsYXRDb29yZHMoY29vcmRpbmF0ZXMpO1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICAgIGNvb3JkaW5hdGVzID0gZmMuZmVhdHVyZXNbaV0uZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgICBjb29yZGluYXRlcyA9IGZjLmZlYXR1cmVzW2ldLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgICAgICAgIGNvb3JkaW5hdGVzID0gZmxhdENvb3Jkcyhjb29yZGluYXRlcyk7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnTXVsdGlQb2x5Z29uJzpcbiAgICAgICAgICBjb29yZGluYXRlcyA9IGZjLmZlYXR1cmVzW2ldLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgICAgICAgIGNvb3JkaW5hdGVzID0gZmxhdENvb3Jkcyhjb29yZGluYXRlcyk7XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmKCFmYy5mZWF0dXJlc1tpXS5nZW9tZXRyeSAmJiBmYy5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzKXtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignVW5rbm93biBHZW9tZXRyeSBUeXBlJyk7XG4gICAgICB9XG4gICAgfVxuICAgICAgXG4gICAgdmFyIGV4cGxvZGVkID0gZmVhdHVyZUNvbGxlY3Rpb24oW10pO1xuXG4gICAgY29vcmRpbmF0ZXMuZm9yRWFjaChmdW5jdGlvbihjb29yZHMpe1xuICAgICAgZXhwbG9kZWQuZmVhdHVyZXMucHVzaChwb2ludChjb29yZHNbMF0sIGNvb3Jkc1sxXSkpO1xuICAgIH0pXG5cbiAgICByZXR1cm4gZXhwbG9kZWQ7XG4gIH1cbiAgZWxzZXtcbiAgICB2YXIgY29vcmRpbmF0ZXMgO1xuICAgIHZhciBnZW9tZXRyeTtcbiAgICBpZihmYy50eXBlID09PSAnRmVhdHVyZScpe1xuICAgICAgZ2VvbWV0cnkgPSBmYy5nZW9tZXRyeTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGdlb21ldHJ5ID0gZmM7XG4gICAgfVxuICAgIHN3aXRjaChnZW9tZXRyeS50eXBlKXtcbiAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBbZ2VvbWV0cnkuY29vcmRpbmF0ZXNdO1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdQb2x5Z29uJzpcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5jb29yZGluYXRlcztcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRzKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgICBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5jb29yZGluYXRlcztcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRzKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gZmxhdENvb3Jkcyhjb29yZGluYXRlcyk7XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIGlmKCFnZW9tZXRyeSl7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdObyBHZW9tZXRyeSBGb3VuZCcpO1xuICAgIH1cblxuICAgIHZhciBleHBsb2RlZCA9IGZlYXR1cmVDb2xsZWN0aW9uKFtdKTtcblxuICAgIGNvb3JkaW5hdGVzLmZvckVhY2goZnVuY3Rpb24oY29vcmRzKXtcbiAgICAgIGV4cGxvZGVkLmZlYXR1cmVzLnB1c2gocG9pbnQoY29vcmRzWzBdLCBjb29yZHNbMV0pKTtcbiAgICB9KVxuXG4gICAgcmV0dXJuIGV4cGxvZGVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZsYXRDb29yZHMoY29vcmRzKXtcbiAgdmFyIG5ld0Nvb3JkcyA9IFtdO1xuICBjb29yZHMgPSBmbGF0dGVuKGNvb3Jkcyk7XG4gIGNvb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKGMsIGkpe1xuICAgIGlmKGkgJSAyID09IDApIC8vIGlmIGlzIGV2ZW5cbiAgICAgIG5ld0Nvb3Jkcy5wdXNoKFtjLCBjb29yZHNbaSsxXV0pO1xuICB9KVxuICByZXR1cm4gbmV3Q29vcmRzO1xufSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmVhdHVyZXMpe1xuICB2YXIgZmMgPSB7XG4gICAgXCJ0eXBlXCI6IFwiRmVhdHVyZUNvbGxlY3Rpb25cIixcbiAgICBcImZlYXR1cmVzXCI6IGZlYXR1cmVzXG4gIH1cblxuICByZXR1cm4gZmNcbn0iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWlzb2xpbmVzL25vZGVfbW9kdWxlcy90dXJmLXNxdWFyZS9ub2RlX21vZHVsZXMvdHVyZi1taWRwb2ludC9ub2RlX21vZHVsZXMvdHVyZi1wb2ludC9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiLCIvKipcbiAqIFRha2VzIGNvb3JkaW5hdGVzIGFuZCBwcm9wZXJ0aWVzIChvcHRpb25hbCkgYW5kIHJldHVybnMgYSBuZXcge0BsaW5rIFBvaW50fSBmZWF0dXJlLlxuICpcbiAqIEBtb2R1bGUgdHVyZi9wb2ludFxuICogQHBhcmFtIHtudW1iZXJ9IGxvbmdpdHVkZSBwb3NpdGlvbiB3ZXN0IHRvIGVhc3QgaW4gZGVjaW1hbCBkZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gbGF0aXR1ZGUgcG9zaXRpb24gc291dGggdG8gbm9ydGggaW4gZGVjaW1hbCBkZWdyZWVzXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyBhbiBPYmplY3QgdGhhdCBpcyB1c2VkIGFzIHRoZSB7QGxpbmsgRmVhdHVyZX0nc1xuICogcHJvcGVydGllc1xuICogQHJldHVybiB7UG9pbnR9IGEgUG9pbnQgZmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwdDEgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdKTtcbiAqXG4gKiAvLz1wdDFcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKGFyZykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjb29yZGluYXRlcywgcHJvcGVydGllcykge1xuICBpZiAoIWlzQXJyYXkoY29vcmRpbmF0ZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhdCBsZWFzdCAyIG51bWJlcnMgbG9uZycpO1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiRmVhdHVyZVwiLFxuICAgIGdlb21ldHJ5OiB7XG4gICAgICB0eXBlOiBcIlBvaW50XCIsXG4gICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LFxuICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMgfHwge31cbiAgfTtcbn07XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy90dXJmLWNvbnZleC9ub2RlX21vZHVsZXMvdHVyZi1wb2x5Z29uL2luZGV4LmpzXCJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKSIsInZhciBzcyA9IHJlcXVpcmUoJ3NpbXBsZS1zdGF0aXN0aWNzJyk7XG5cbi8qKlxuKiBUYWtlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0sIGEgcHJvcGVydHkgbmFtZSwgYW5kIGEgc2V0IG9mIHBlcmNlbnRpbGVzIGFuZCByZXR1cm5zIGEgcXVhbnRpbGUgYXJyYXkuXG4qIEBtb2R1bGUgdHVyZi9xdWFudGlsZVxuKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBpbnB1dCBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGFueSB0eXBlXG4qIEBwYXJhbSB7U3RyaW5nfSBmaWVsZCB0aGUgcHJvcGVydHkgaW4gYGlucHV0YCBmcm9tIHdoaWNoIHRvIHJldHJpZXZlIHF1YW50aWxlIHZhbHVlc1xuKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHBlcmNlbnRpbGVzIGFuIEFycmF5IG9mIHBlcmNlbnRpbGVzIG9uIHdoaWNoIHRvIGNhbGN1bGF0ZSBxdWFudGlsZSB2YWx1ZXNcbiogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gYW4gYXJyYXkgb2YgdGhlIGJyZWFrIHZhbHVlc1xuKiBAZXhhbXBsZVxuKiB2YXIgcG9pbnRzID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4qICAgdHVyZi5wb2ludChbNSw1XSwge3BvcHVsYXRpb246IDV9KSxcbiogICB0dXJmLnBvaW50KFsxLDNdLCB7cG9wdWxhdGlvbjogNDB9KSxcbiogICB0dXJmLnBvaW50KFsxNCwyXSwge3BvcHVsYXRpb246IDgwfSksXG4qICAgdHVyZi5wb2ludChbMTMsMV0sIHtwb3B1bGF0aW9uOiA5MH0pLFxuKiAgIHR1cmYucG9pbnQoWzE5LDddLCB7cG9wdWxhdGlvbjogMTAwfSlcbiogXSk7XG4qXG4qIHZhciBicmVha3MgPSB0dXJmLnF1YW50aWxlKFxuKiAgIHBvaW50cywgJ3BvcHVsYXRpb24nLCBbMjUsIDUwLCA3NSwgOTldKTtcbipcbiogLy89YnJlYWtzXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmYywgZmllbGQsIHBlcmNlbnRpbGVzKXtcbiAgdmFyIHZhbHMgPSBbXTtcbiAgdmFyIHF1YW50aWxlcyA9IFtdO1xuXG4gIGZjLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSl7XG4gICAgdmFscy5wdXNoKGZlYXR1cmUucHJvcGVydGllc1tmaWVsZF0pO1xuICB9KTtcbiAgcGVyY2VudGlsZXMuZm9yRWFjaChmdW5jdGlvbihwZXJjZW50aWxlKXtcbiAgICBxdWFudGlsZXMucHVzaChzcy5xdWFudGlsZSh2YWxzLCBwZXJjZW50aWxlICogMC4wMSkpO1xuICB9KTtcbiAgcmV0dXJuIHF1YW50aWxlcztcbn07XG4iLCJ2YXIgcmFuZG9tID0gcmVxdWlyZSgnZ2VvanNvbi1yYW5kb20nKTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgcmFuZG9tIHtAbGluayBHZW9KU09OfSBkYXRhLCBpbmNsdWRpbmcge0BsaW5rIFBvaW50fFBvaW50c30gYW5kIHtAbGluayBQb2x5Z29ufFBvbHlnb25zfSwgZm9yIHRlc3RpbmdcbiAqIGFuZCBleHBlcmltZW50YXRpb24uXG4gKlxuICogQG1vZHVsZSB0dXJmL3JhbmRvbVxuICogQHBhcmFtIHtTdHJpbmd9IFt0eXBlPSdwb2ludCddIHR5cGUgb2YgZmVhdHVyZXMgZGVzaXJlZDogJ3BvaW50cycgb3IgJ3BvbHlnb25zJ1xuICogQHBhcmFtIHtOdW1iZXJ9IFtjb3VudD0xXSBob3cgbWFueSBnZW9tZXRyaWVzIHNob3VsZCBiZSBnZW5lcmF0ZWQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBvcHRpb25zIHJlbGV2YW50IHRvIHRoZSBmZWF0dXJlIGRlc2lyZWQuIENhbiBpbmNsdWRlOlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBvcHRpb25zLmJib3ggYSBib3VuZGluZyBib3ggaW5zaWRlIG9mIHdoaWNoIGdlb21ldHJpZXNcbiAqIGFyZSBwbGFjZWQuIEluIHRoZSBjYXNlIG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXMsIHRoZXkgYXJlIGd1YXJhbnRlZWQgdG8gYmUgd2l0aGluIHRoaXMgYm91bmRzLFxuICogd2hpbGUge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzIGhhdmUgdGhlaXIgY2VudHJvaWQgd2l0aGluIHRoZSBib3VuZHMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubnVtX3ZlcnRpY2VzPTEwXSBvcHRpb25zLnZlcnRpY2VzIHRoZSBudW1iZXIgb2YgdmVydGljZXMgYWRkZWRcbiAqIHRvIHBvbHlnb24gZmVhdHVyZXMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4X3JhZGlhbF9sZW5ndGg9MTBdIHRoZSB0b3RhbCBudW1iZXIgb2YgZGVjaW1hbFxuICogZGVncmVlcyBsb25naXR1ZGUgb3IgbGF0aXR1ZGUgdGhhdCBhIHBvbHlnb24gY2FuIGV4dGVudCBvdXR3YXJkcyB0b1xuICogZnJvbSBpdHMgY2VudGVyLlxuICogQHJldHVybiB7RmVhdHVyZUNvbGxlY3Rpb259IGdlbmVyYXRlZCByYW5kb20gZmVhdHVyZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnRzID0gdHVyZi5yYW5kb20oJ3BvaW50cycsIDEwMCwge1xuICogICBiYm94OiBbLTcwLCA0MCwgLTYwLCA2MF1cbiAqIH0pO1xuICpcbiAqIC8vPXBvaW50c1xuICpcbiAqIHZhciBwb2x5Z29ucyA9IHR1cmYucmFuZG9tKCdwb2x5Z29ucycsIDQsIHtcbiAqICAgYmJveDogWy03MCwgNDAsIC02MCwgNjBdXG4gKiB9KTtcbiAqXG4gKiAvLz1wb2x5Z29uc1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHR5cGUsIGNvdW50LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgY291bnQgPSBjb3VudCB8fCAxO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdwb2ludCc6XG4gICAgICAgIGNhc2UgJ3BvaW50cyc6XG4gICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHJhbmRvbS5wb2ludChjb3VudCwgb3B0aW9ucy5iYm94KTtcbiAgICAgICAgY2FzZSAncG9seWdvbic6XG4gICAgICAgIGNhc2UgJ3BvbHlnb25zJzpcbiAgICAgICAgICAgIHJldHVybiByYW5kb20ucG9seWdvbihcbiAgICAgICAgICAgICAgICBjb3VudCxcbiAgICAgICAgICAgICAgICBvcHRpb25zLm51bV92ZXJ0aWNlcyxcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1heF9yYWRpYWxfbGVuZ3RoLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMuYmJveCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gdHlwZSBnaXZlbjogdmFsaWQgb3B0aW9ucyBhcmUgcG9pbnRzIGFuZCBwb2x5Z29ucycpO1xuICAgIH1cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2FsbCAucG9pbnQoKSBvciAucG9seWdvbigpIGluc3RlYWQnKTtcbn07XG5cbmZ1bmN0aW9uIHBvc2l0aW9uKGJib3gpIHtcbiAgICBpZiAoYmJveCkgcmV0dXJuIGNvb3JkSW5CQkJPWChiYm94KTtcbiAgICBlbHNlIHJldHVybiBbbG9uKCksIGxhdCgpXTtcbn1cblxubW9kdWxlLmV4cG9ydHMucG9zaXRpb24gPSBwb3NpdGlvbjtcblxubW9kdWxlLmV4cG9ydHMucG9pbnQgPSBmdW5jdGlvbihjb3VudCwgYmJveCkge1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZShiYm94ID8gcG9pbnQocG9zaXRpb24oYmJveCkpIDogcG9pbnQoKSkpO1xuICAgIH1cbiAgICByZXR1cm4gY29sbGVjdGlvbihmZWF0dXJlcyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5wb2x5Z29uID0gZnVuY3Rpb24oY291bnQsIG51bV92ZXJ0aWNlcywgbWF4X3JhZGlhbF9sZW5ndGgsIGJib3gpIHtcbiAgICBpZiAodHlwZW9mIG51bV92ZXJ0aWNlcyAhPT0gJ251bWJlcicpIG51bV92ZXJ0aWNlcyA9IDEwO1xuICAgIGlmICh0eXBlb2YgbWF4X3JhZGlhbF9sZW5ndGggIT09ICdudW1iZXInKSBtYXhfcmFkaWFsX2xlbmd0aCA9IDEwO1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IFtdLFxuICAgICAgICAgICAgY2lyY2xlX29mZnNldHMgPSBBcnJheS5hcHBseShudWxsLFxuICAgICAgICAgICAgICAgIG5ldyBBcnJheShudW1fdmVydGljZXMgKyAxKSkubWFwKE1hdGgucmFuZG9tKTtcblxuICAgICAgICBjaXJjbGVfb2Zmc2V0cy5mb3JFYWNoKHN1bU9mZnNldHMpO1xuICAgICAgICBjaXJjbGVfb2Zmc2V0cy5mb3JFYWNoKHNjYWxlT2Zmc2V0cyk7XG4gICAgICAgIHZlcnRpY2VzW3ZlcnRpY2VzLmxlbmd0aCAtIDFdID0gdmVydGljZXNbMF07IC8vIGNsb3NlIHRoZSByaW5nXG5cbiAgICAgICAgLy8gY2VudGVyIHRoZSBwb2x5Z29uIGFyb3VuZCBzb21ldGhpbmdcbiAgICAgICAgdmVydGljZXMgPSB2ZXJ0aWNlcy5tYXAodmVydGV4VG9Db29yZGluYXRlKHBvc2l0aW9uKGJib3gpKSk7XG4gICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZShwb2x5Z29uKFt2ZXJ0aWNlc10pKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VtT2Zmc2V0cyhjdXIsIGluZGV4LCBhcnIpIHtcbiAgICAgICAgYXJyW2luZGV4XSA9IChpbmRleCA+IDApID8gY3VyICsgYXJyW2luZGV4IC0gMV0gOiBjdXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NhbGVPZmZzZXRzKGN1ciwgaW5kZXgpIHtcbiAgICAgICAgY3VyID0gY3VyICogMiAqIE1hdGguUEkgLyBjaXJjbGVfb2Zmc2V0c1tjaXJjbGVfb2Zmc2V0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgdmFyIHJhZGlhbF9zY2FsZXIgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtcbiAgICAgICAgICAgIHJhZGlhbF9zY2FsZXIgKiBtYXhfcmFkaWFsX2xlbmd0aCAqIE1hdGguc2luKGN1ciksXG4gICAgICAgICAgICByYWRpYWxfc2NhbGVyICogbWF4X3JhZGlhbF9sZW5ndGggKiBNYXRoLmNvcyhjdXIpXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHJldHVybiBjb2xsZWN0aW9uKGZlYXR1cmVzKTtcbn07XG5cblxuZnVuY3Rpb24gdmVydGV4VG9Db29yZGluYXRlKGh1Yikge1xuICAgIHJldHVybiBmdW5jdGlvbihjdXIsIGluZGV4KSB7IHJldHVybiBbY3VyWzBdICsgaHViWzBdLCBjdXJbMV0gKyBodWJbMV1dOyB9O1xufVxuXG5mdW5jdGlvbiBybmQoKSB7IHJldHVybiBNYXRoLnJhbmRvbSgpIC0gMC41OyB9XG5mdW5jdGlvbiBsb24oKSB7IHJldHVybiBybmQoKSAqIDM2MDsgfVxuZnVuY3Rpb24gbGF0KCkgeyByZXR1cm4gcm5kKCkgKiAxODA7IH1cblxuZnVuY3Rpb24gcG9pbnQoY29vcmRpbmF0ZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXMgfHwgW2xvbigpLCBsYXQoKV1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjb29yZEluQkJCT1goYmJveCkge1xuICAgIHZhciBsb25TcGFuID0gYmJveFsyXSAtIGJib3hbMF0sXG4gICAgICAgIGxhdFNwYW4gPSBiYm94WzNdIC0gYmJveFsxXSxcbiAgICAgICAgcmFuZEluU3BhbiA9IE1hdGgucmFuZG9tKCkgKiAobG9uU3BhbiAqIGxhdFNwYW4pO1xuICAgIHJldHVybiBbXG4gICAgICAgIChiYm94WzJdID09PSBiYm94WzBdKSA/IGJib3hbMl0gOiByYW5kSW5TcGFuICUgKGxvblNwYW4pICsgYmJveFswXSxcbiAgICAgICAgKGJib3hbM10gPT09IGJib3hbMV0pID8gYmJveFsxXSA6IHJhbmRJblNwYW4gLyAobGF0U3BhbikgKyBiYm94WzFdXTtcbn1cblxuZnVuY3Rpb24gcG9pbnRJbkJCQk9YKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBbbG9uKCksIGxhdCgpXVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHBvbHlnb24oY29vcmRpbmF0ZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnUG9seWdvbicsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZlYXR1cmUoZ2VvbSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgZ2VvbWV0cnk6IGdlb20sXG4gICAgICAgIHByb3BlcnRpZXM6IHt9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY29sbGVjdGlvbihmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgZmVhdHVyZXM6IGZcbiAgICB9O1xufVxuIiwidmFyIGZlYXR1cmVjb2xsZWN0aW9uID0gcmVxdWlyZSgndHVyZi1mZWF0dXJlY29sbGVjdGlvbicpO1xudmFyIHJlY2xhc3MgPSByZXF1aXJlKCcuL2luZGV4LmpzJyk7XG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259LCBhbiBpbnB1dCBmaWVsZCwgYW4gb3V0cHV0IGZpZWxkLCBhbmRcbiAqIGFuIGFycmF5IG9mIHRyYW5zbGF0aW9ucyBhbmQgb3V0cHV0cyBhbiBpZGVudGljYWwgRmVhdHVyZUNvbGxlY3Rpb24gd2l0aFxuICogdGhlIG91dHB1dCBmaWVsZCBwcm9wZXJ0eSBwb3B1bGF0ZWQuXG4qIEBtb2R1bGUgdHVyZi9yZWNsYXNzXG4qIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IGlucHV0IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgYW55IHR5cGVcbiogQHBhcmFtIHtzdHJpbmd9IGluRmllbGQgdGhlIGZpZWxkIHRvIHRyYW5zbGF0ZVxuKiBAcGFyYW0ge3N0cmluZ30gb3V0RmllbGQgdGhlIGZpZWxkIGluIHdoaWNoIHRvIHN0b3JlIHRyYW5zbGF0ZWQgcmVzdWx0c1xuKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHRyYW5zbGF0aW9ucyBhbiBhcnJheSBvZiB0cmFuc2xhdGlvbnNcbiogQHJldHVybiB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gd2l0aCBpZGVudGljYWwgZ2VvbWV0cmllcyB0byBgaW5wdXRgIGJ1dCB3aXRoIGBvdXRGaWVsZGAgcG9wdWxhdGVkLlxuKiBAZXhhbXBsZVxuKiB2YXIgcG9pbnRzID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4qICAgdHVyZi5wb2ludChbMTMuMTcwNTQ3LCAzMi44ODg2NjldLCB7cG9wdWxhdGlvbjogMjAwfSksXG4qICAgdHVyZi5wb2ludChbMTMuMTgyMDQ4LCAzMi44ODk1MzNdLCB7cG9wdWxhdGlvbjogNjAwfSksXG4qICAgdHVyZi5wb2ludChbMTMuMTczOTgsIDMyLjg4MjE4Ml0sIHtwb3B1bGF0aW9uOiAxMDB9KSxcbiogICB0dXJmLnBvaW50KFsxMy4xNzQzMjQsIDMyLjg5NTAxMV0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiogICB0dXJmLnBvaW50KFsxMy4xODU4MjUsIDMyLjg4NDM0NF0sIHtwb3B1bGF0aW9uOiAzMDB9KVxuKiBdKTtcbiogLy8gMCB0byAyMDAgd2lsbCBtYXAgdG8gXCJzbWFsbFwiLCAyMDAgdG8gNDAwIHdpbGwgbWFwIHRvIFwibWVkaXVtXCIsIDQwMCB0byA2MDAgd2lsbCBtYXAgdG8gXCJsYXJnZVwiXG4qIHZhciB0cmFuc2xhdGlvbnMgPSBbXG4qICAgWzAsIDIwMCwgXCJzbWFsbFwiXSxcbiogICBbMjAwLCA0MDAsIFwibWVkaXVtXCJdLFxuKiAgIFs0MDAsIDYwMCwgXCJsYXJnZVwiXVxuKiBdO1xuKlxuKiB2YXIgcmVjbGFzc2VkID0gdHVyZi5yZWNsYXNzKFxuKiAgIHBvaW50cywgJ3BvcHVsYXRpb24nLCAnc2l6ZScsIHRyYW5zbGF0aW9ucyk7XG4qXG4qIC8vPXJlY2xhc3NlZFxuKlxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmMsIGluRmllbGQsIG91dEZpZWxkLCB0cmFuc2xhdGlvbnMsIGRvbmUpe1xuICB2YXIgcmVjbGFzc2VkID0gZmVhdHVyZWNvbGxlY3Rpb24oW10pO1xuXG4gIGZjLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSl7XG4gICAgdmFyIHJlY2xhc3NlZEZlYXR1cmU7XG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRyYW5zbGF0aW9ucy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZihmZWF0dXJlLnByb3BlcnRpZXNbaW5GaWVsZF0gPj0gdHJhbnNsYXRpb25zW2ldWzBdICYmIGZlYXR1cmUucHJvcGVydGllc1tpbkZpZWxkXSA8PSB0cmFuc2xhdGlvbnNbaV1bMV0pIHtcbiAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzW291dEZpZWxkXSA9IHRyYW5zbGF0aW9uc1tpXVsyXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVjbGFzc2VkLmZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gIH0pO1xuXG4gIHJldHVybiByZWNsYXNzZWQ7XG59O1xuIiwidmFyIGZlYXR1cmVDb2xsZWN0aW9uID0gcmVxdWlyZSgndHVyZi1mZWF0dXJlY29sbGVjdGlvbicpO1xuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBvZiBhbnkgdHlwZSwgYSBwcm9wZXJ0eSwgYW5kIGEgdmFsdWUgYW5kXG4gKiByZXR1cm5zIGEgRmVhdHVyZUNvbGxlY3Rpb24gd2l0aCBmZWF0dXJlcyBtYXRjaGluZyB0aGF0XG4gKiBwcm9wZXJ0eS12YWx1ZSBwYWlyIHJlbW92ZWQuXG4gKlxuICogQG1vZHVsZSB0dXJmL3JlbW92ZVxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gZmVhdHVyZXMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBhbnkgdHlwZVxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IHRoZSBwcm9wZXJ0eSB0byBmaWx0ZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSB0aGUgdmFsdWUgdG8gZmlsdGVyXG4gKiBAcmV0dXJuIHtGZWF0dXJlQ29sbGVjdGlvbn0gdGhlIHJlc3VsdGluZyBGZWF0dXJlQ29sbGVjdGlvbiB3aXRob3V0IGZlYXR1cmVzIHRoYXQgbWF0Y2ggdGhlIHByb3BlcnR5LXZhbHVlIHBhaXJcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnRzID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4gKiAgdHVyZi5wb2ludChbLTAuMjM1MDA0LCA1LjU1MTkxOF0sIHsnbWFya2VyLWNvbG9yJzogJyMwMGYnfSksXG4gKiAgdHVyZi5wb2ludChbLTAuMjA5NTk4LCA1LjU2NDM5XSwgeydtYXJrZXItY29sb3InOiAnI2YwMCd9KSxcbiAqICB0dXJmLnBvaW50KFstMC4xOTc3NTMsIDUuNTU2MDE4XSwgeydtYXJrZXItY29sb3InOiAnIzAwZid9KSxcbiAqICB0dXJmLnBvaW50KFstMC4yMTczMjMsIDUuNTQ5NTI2XSwgeydtYXJrZXItY29sb3InOiAnIzAwMCd9KSxcbiAqICB0dXJmLnBvaW50KFstMC4yMTEzMTUsIDUuNTQzODg3XSwgeydtYXJrZXItY29sb3InOiAnIzBmMCd9KSxcbiAqICB0dXJmLnBvaW50KFstMC4yMDIyMTcsIDUuNTQ3MTM0XSwgeydtYXJrZXItY29sb3InOiAnIzAwZid9KSxcbiAqICB0dXJmLnBvaW50KFstMC4yMzEyMjcsIDUuNTY2NDRdLCB7J21hcmtlci1jb2xvcic6ICcjMGYwJ30pXG4gKiBdKTtcbiAqXG4gKiAvLz1wb2ludHNcbiAqXG4gKiB2YXIgZmlsdGVyZWQgPSB0dXJmLnJlbW92ZShwb2ludHMsICdtYXJrZXItY29sb3InLCAnIzAwZicpO1xuICpcbiAqIC8vPWZpbHRlcmVkXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjb2xsZWN0aW9uLCBrZXksIHZhbCkge1xuICB2YXIgbmV3RkMgPSBmZWF0dXJlQ29sbGVjdGlvbihbXSk7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjb2xsZWN0aW9uLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYoY29sbGVjdGlvbi5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzW2tleV0gIT0gdmFsKSB7XG4gICAgICBuZXdGQy5mZWF0dXJlcy5wdXNoKGNvbGxlY3Rpb24uZmVhdHVyZXNbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3RkM7XG59O1xuIiwiLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTkzNTE3NS9zYW1wbGluZy1hLXJhbmRvbS1zdWJzZXQtZnJvbS1hbi1hcnJheVxudmFyIGZlYXR1cmVDb2xsZWN0aW9uID0gcmVxdWlyZSgndHVyZi1mZWF0dXJlY29sbGVjdGlvbicpO1xuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBhbmQgcmV0dXJucyBhIEZlYXR1cmVDb2xsZWN0aW9uIHdpdGggZ2l2ZW4gbnVtYmVyIG9mIHtAbGluayBGZWF0dXJlfGZlYXR1cmVzfSBhdCByYW5kb20uXG4gKlxuICogQG1vZHVsZSB0dXJmL3NhbXBsZVxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gZmVhdHVyZXMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBhbnkgdHlwZVxuICogQHBhcmFtIHtudW1iZXJ9IG4gbnVtYmVyIG9mIGZlYXR1cmVzIHRvIHNlbGVjdFxuICogQHJldHVybiB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gd2l0aCBgbmAgZmVhdHVyZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnRzID0gdHVyZi5yYW5kb20oJ3BvaW50cycsIDEwMDApO1xuICpcbiAqIC8vPXBvaW50c1xuICpcbiAqIHZhciBzYW1wbGUgPSB0dXJmLnNhbXBsZShwb2ludHMsIDEwKTtcbiAqXG4gKiAvLz1zYW1wbGVcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmYywgbnVtKXtcbiAgdmFyIG91dEZDID0gZmVhdHVyZUNvbGxlY3Rpb24oZ2V0UmFuZG9tU3ViYXJyYXkoZmMuZmVhdHVyZXMsIG51bSkpO1xuICByZXR1cm4gb3V0RkM7XG59O1xuXG5mdW5jdGlvbiBnZXRSYW5kb21TdWJhcnJheShhcnIsIHNpemUpIHtcbiAgdmFyIHNodWZmbGVkID0gYXJyLnNsaWNlKDApLCBpID0gYXJyLmxlbmd0aCwgbWluID0gaSAtIHNpemUsIHRlbXAsIGluZGV4O1xuICB3aGlsZSAoaS0tID4gbWluKSB7XG4gICAgICBpbmRleCA9IE1hdGguZmxvb3IoKGkgKyAxKSAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgdGVtcCA9IHNodWZmbGVkW2luZGV4XTtcbiAgICAgIHNodWZmbGVkW2luZGV4XSA9IHNodWZmbGVkW2ldO1xuICAgICAgc2h1ZmZsZWRbaV0gPSB0ZW1wO1xuICB9XG4gIHJldHVybiBzaHVmZmxlZC5zbGljZShtaW4pO1xufVxuIiwidmFyIHNpbXBsaWZ5ID0gcmVxdWlyZSgnc2ltcGxpZnktanMnKTtcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBMaW5lU3RyaW5nfSBvciB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZSBhbmQgcmV0dXJucyBhIHNpbXBsaWZpZWQgdmVyc2lvbi4gSW50ZXJuYWxseSB1c2VzIFtzaW1wbGlmeS1qc10oaHR0cDovL21vdXJuZXIuZ2l0aHViLmlvL3NpbXBsaWZ5LWpzLykgdG8gcGVyZm9ybSBzaW1wbGlmaWNhdGlvbi5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvc2ltcGxpZnlcbiAqIEBwYXJhbSB7RmVhdHVyZX0gZmVhdHVyZSBhIHtAbGluayBMaW5lU3RyaW5nfSBvciB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZSB0byBiZSBzaW1wbGlmaWVkXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIHNpbXBsaWZpY2F0aW9uIHRvbGVyYW5jZVxuICogQHBhcmFtIHtib29sZWFufSBoaWdoUXVhbGl0eSB3aGV0aGVyIG9yIG5vdCB0byBzcGVuZCBtb3JlIHRpbWUgdG8gY3JlYXRlXG4gKiBhIGhpZ2hlci1xdWFsaXR5IHNpbXBsaWZpY2F0aW9uIHdpdGggYSBkaWZmZXJlbnQgYWxnb3JpdGhtXG4gKiBAcmV0dXJuIHtGZWF0dXJlfSBhIHNpbXBsaWZpZWQgZmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlID0gdHVyZi5wb2x5Z29uKFtbXG4gKiAgWy03MC42MDM2MzcsIC0zMy4zOTk5MThdLFxuICogIFstNzAuNjE0NjI0LCAtMzMuMzk1MzMyXSxcbiAqICBbLTcwLjYzOTM0MywgLTMzLjM5MjQ2Nl0sXG4gKiAgWy03MC42NTk5NDIsIC0zMy4zOTQ3NTldLFxuICogIFstNzAuNjgzOTc1LCAtMzMuNDA0NTA0XSxcbiAqICBbLTcwLjY5NzAyMSwgLTMzLjQxOTQwNl0sXG4gKiAgWy03MC43MDExNDEsIC0zMy40MzQzMDZdLFxuICogIFstNzAuNzAwNDU0LCAtMzMuNDQ2MzM5XSxcbiAqICBbLTcwLjY5NDI3NCwgLTMzLjQ1ODM2OV0sXG4gKiAgWy03MC42ODI2MDEsIC0zMy40NjU4MTZdLFxuICogIFstNzAuNjY4ODY5LCAtMzMuNDcyMTE3XSxcbiAqICBbLTcwLjY0NjIwOSwgLTMzLjQ3MzgzNV0sXG4gKiAgWy03MC42MjQ5MjMsIC0zMy40NzIxMTddLFxuICogIFstNzAuNjA5ODE3LCAtMzMuNDY4MTA3XSxcbiAqICBbLTcwLjU5NTM5NywgLTMzLjQ1ODM2OV0sXG4gKiAgWy03MC41ODcxNTgsIC0zMy40NDI5MDFdLFxuICogIFstNzAuNTg3MTU4LCAtMzMuNDI2MjgzXSxcbiAqICBbLTcwLjU5MDU5MSwgLTMzLjQxNDI0OF0sXG4gKiAgWy03MC41OTQ3MTEsIC0zMy40MDYyMjRdLFxuICogIFstNzAuNjAzNjM3LCAtMzMuMzk5OTE4XVxuICogXV0pO1xuICogdmFyIHRvbGVyYW5jZSA9IDAuMDE7XG4gKlxuICogdmFyIHNpbXBsaWZpZWQgPSB0dXJmLnNpbXBsaWZ5KFxuICogIGZlYXR1cmUsIHRvbGVyYW5jZSwgZmFsc2UpO1xuICpcbiAqIC8vPWZlYXR1cmVcbiAqXG4gKiAvLz1zaW1wbGlmaWVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmVhdHVyZSwgdG9sZXJhbmNlLCBoaWdoUXVhbGl0eSl7XG4gIGlmKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSB7XG4gICAgdmFyIGxpbmUgPSB7XG4gICAgICB0eXBlOiAnTGluZVN0cmluZycsXG4gICAgICBjb29yZGluYXRlczogW11cbiAgICB9O1xuICAgIHZhciBwdHMgPSBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzLm1hcChmdW5jdGlvbihjb29yZCkge1xuICAgICAgcmV0dXJuIHt4OiBjb29yZFswXSwgeTogY29vcmRbMV19O1xuICAgIH0pO1xuICAgIGxpbmUuY29vcmRpbmF0ZXMgPSBzaW1wbGlmeShwdHMsIHRvbGVyYW5jZSwgaGlnaFF1YWxpdHkpLm1hcChmdW5jdGlvbihjb29yZHMpe1xuICAgICAgcmV0dXJuIFtjb29yZHMueCwgY29vcmRzLnldO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBzaW1wbGVGZWF0dXJlKGxpbmUsIGZlYXR1cmUucHJvcGVydGllcyk7XG4gIH0gZWxzZSBpZihmZWF0dXJlLmdlb21ldHJ5LnR5cGUgPT09ICdQb2x5Z29uJykge1xuICAgIHZhciBwb2x5ID0ge1xuICAgICAgdHlwZTogJ1BvbHlnb24nLFxuICAgICAgY29vcmRpbmF0ZXM6IFtdXG4gICAgfTtcbiAgICBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzLmZvckVhY2goZnVuY3Rpb24ocmluZyl7XG4gICAgICB2YXIgcHRzID0gcmluZy5tYXAoZnVuY3Rpb24oY29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHt4OiBjb29yZFswXSwgeTogY29vcmRbMV19O1xuICAgICAgfSk7XG4gICAgICB2YXIgc2ltcGxlUmluZyA9IHNpbXBsaWZ5KHB0cywgdG9sZXJhbmNlLCBoaWdoUXVhbGl0eSkubWFwKGZ1bmN0aW9uKGNvb3Jkcyl7XG4gICAgICAgIHJldHVybiBbY29vcmRzLngsIGNvb3Jkcy55XTtcbiAgICAgIH0pO1xuICAgICAgcG9seS5jb29yZGluYXRlcy5wdXNoKHNpbXBsZVJpbmcpO1xuICAgIH0pO1xuICAgIHJldHVybiBzaW1wbGVGZWF0dXJlKHBvbHksIGZlYXR1cmUucHJvcGVydGllcylcbiAgfVxufVxuXG5mdW5jdGlvbiBzaW1wbGVGZWF0dXJlIChnZW9tLCBwcm9wZXJ0aWVzKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgIGdlb21ldHJ5OiBnZW9tLFxuICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXNcbiAgfTtcbn1cbiIsIi8qXG4gKGMpIDIwMTMsIFZsYWRpbWlyIEFnYWZvbmtpblxuIFNpbXBsaWZ5LmpzLCBhIGhpZ2gtcGVyZm9ybWFuY2UgSlMgcG9seWxpbmUgc2ltcGxpZmljYXRpb24gbGlicmFyeVxuIG1vdXJuZXIuZ2l0aHViLmlvL3NpbXBsaWZ5LWpzXG4qL1xuXG4oZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbi8vIHRvIHN1aXQgeW91ciBwb2ludCBmb3JtYXQsIHJ1biBzZWFyY2gvcmVwbGFjZSBmb3IgJy54JyBhbmQgJy55Jztcbi8vIGZvciAzRCB2ZXJzaW9uLCBzZWUgM2QgYnJhbmNoIChjb25maWd1cmFiaWxpdHkgd291bGQgZHJhdyBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBvdmVyaGVhZClcblxuLy8gc3F1YXJlIGRpc3RhbmNlIGJldHdlZW4gMiBwb2ludHNcbmZ1bmN0aW9uIGdldFNxRGlzdChwMSwgcDIpIHtcblxuICAgIHZhciBkeCA9IHAxLnggLSBwMi54LFxuICAgICAgICBkeSA9IHAxLnkgLSBwMi55O1xuXG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuXG4vLyBzcXVhcmUgZGlzdGFuY2UgZnJvbSBhIHBvaW50IHRvIGEgc2VnbWVudFxuZnVuY3Rpb24gZ2V0U3FTZWdEaXN0KHAsIHAxLCBwMikge1xuXG4gICAgdmFyIHggPSBwMS54LFxuICAgICAgICB5ID0gcDEueSxcbiAgICAgICAgZHggPSBwMi54IC0geCxcbiAgICAgICAgZHkgPSBwMi55IC0geTtcblxuICAgIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuXG4gICAgICAgIHZhciB0ID0gKChwLnggLSB4KSAqIGR4ICsgKHAueSAtIHkpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgICAgICBpZiAodCA+IDEpIHtcbiAgICAgICAgICAgIHggPSBwMi54O1xuICAgICAgICAgICAgeSA9IHAyLnk7XG5cbiAgICAgICAgfSBlbHNlIGlmICh0ID4gMCkge1xuICAgICAgICAgICAgeCArPSBkeCAqIHQ7XG4gICAgICAgICAgICB5ICs9IGR5ICogdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGR4ID0gcC54IC0geDtcbiAgICBkeSA9IHAueSAtIHk7XG5cbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vLyByZXN0IG9mIHRoZSBjb2RlIGRvZXNuJ3QgY2FyZSBhYm91dCBwb2ludCBmb3JtYXRcblxuLy8gYmFzaWMgZGlzdGFuY2UtYmFzZWQgc2ltcGxpZmljYXRpb25cbmZ1bmN0aW9uIHNpbXBsaWZ5UmFkaWFsRGlzdChwb2ludHMsIHNxVG9sZXJhbmNlKSB7XG5cbiAgICB2YXIgcHJldlBvaW50ID0gcG9pbnRzWzBdLFxuICAgICAgICBuZXdQb2ludHMgPSBbcHJldlBvaW50XSxcbiAgICAgICAgcG9pbnQ7XG5cbiAgICBmb3IgKHZhciBpID0gMSwgbGVuID0gcG9pbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHBvaW50ID0gcG9pbnRzW2ldO1xuXG4gICAgICAgIGlmIChnZXRTcURpc3QocG9pbnQsIHByZXZQb2ludCkgPiBzcVRvbGVyYW5jZSkge1xuICAgICAgICAgICAgbmV3UG9pbnRzLnB1c2gocG9pbnQpO1xuICAgICAgICAgICAgcHJldlBvaW50ID0gcG9pbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJldlBvaW50ICE9PSBwb2ludCkgbmV3UG9pbnRzLnB1c2gocG9pbnQpO1xuXG4gICAgcmV0dXJuIG5ld1BvaW50cztcbn1cblxuLy8gc2ltcGxpZmljYXRpb24gdXNpbmcgb3B0aW1pemVkIERvdWdsYXMtUGV1Y2tlciBhbGdvcml0aG0gd2l0aCByZWN1cnNpb24gZWxpbWluYXRpb25cbmZ1bmN0aW9uIHNpbXBsaWZ5RG91Z2xhc1BldWNrZXIocG9pbnRzLCBzcVRvbGVyYW5jZSkge1xuXG4gICAgdmFyIGxlbiA9IHBvaW50cy5sZW5ndGgsXG4gICAgICAgIE1hcmtlckFycmF5ID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5LFxuICAgICAgICBtYXJrZXJzID0gbmV3IE1hcmtlckFycmF5KGxlbiksXG4gICAgICAgIGZpcnN0ID0gMCxcbiAgICAgICAgbGFzdCA9IGxlbiAtIDEsXG4gICAgICAgIHN0YWNrID0gW10sXG4gICAgICAgIG5ld1BvaW50cyA9IFtdLFxuICAgICAgICBpLCBtYXhTcURpc3QsIHNxRGlzdCwgaW5kZXg7XG5cbiAgICBtYXJrZXJzW2ZpcnN0XSA9IG1hcmtlcnNbbGFzdF0gPSAxO1xuXG4gICAgd2hpbGUgKGxhc3QpIHtcblxuICAgICAgICBtYXhTcURpc3QgPSAwO1xuXG4gICAgICAgIGZvciAoaSA9IGZpcnN0ICsgMTsgaSA8IGxhc3Q7IGkrKykge1xuICAgICAgICAgICAgc3FEaXN0ID0gZ2V0U3FTZWdEaXN0KHBvaW50c1tpXSwgcG9pbnRzW2ZpcnN0XSwgcG9pbnRzW2xhc3RdKTtcblxuICAgICAgICAgICAgaWYgKHNxRGlzdCA+IG1heFNxRGlzdCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBtYXhTcURpc3QgPSBzcURpc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWF4U3FEaXN0ID4gc3FUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIG1hcmtlcnNbaW5kZXhdID0gMTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2goZmlyc3QsIGluZGV4LCBpbmRleCwgbGFzdCk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGZpcnN0ID0gc3RhY2sucG9wKCk7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChtYXJrZXJzW2ldKSBuZXdQb2ludHMucHVzaChwb2ludHNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdQb2ludHM7XG59XG5cbi8vIGJvdGggYWxnb3JpdGhtcyBjb21iaW5lZCBmb3IgYXdlc29tZSBwZXJmb3JtYW5jZVxuZnVuY3Rpb24gc2ltcGxpZnkocG9pbnRzLCB0b2xlcmFuY2UsIGhpZ2hlc3RRdWFsaXR5KSB7XG5cbiAgICB2YXIgc3FUb2xlcmFuY2UgPSB0b2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IHRvbGVyYW5jZSAqIHRvbGVyYW5jZSA6IDE7XG5cbiAgICBwb2ludHMgPSBoaWdoZXN0UXVhbGl0eSA/IHBvaW50cyA6IHNpbXBsaWZ5UmFkaWFsRGlzdChwb2ludHMsIHNxVG9sZXJhbmNlKTtcbiAgICBwb2ludHMgPSBzaW1wbGlmeURvdWdsYXNQZXVja2VyKHBvaW50cywgc3FUb2xlcmFuY2UpO1xuXG4gICAgcmV0dXJuIHBvaW50cztcbn1cblxuLy8gZXhwb3J0IGFzIEFNRCBtb2R1bGUgLyBOb2RlIG1vZHVsZSAvIGJyb3dzZXIgb3Igd29ya2VyIHZhcmlhYmxlXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSBkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBzaW1wbGlmeTsgfSk7XG5lbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykgbW9kdWxlLmV4cG9ydHMgPSBzaW1wbGlmeTtcbmVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgc2VsZi5zaW1wbGlmeSA9IHNpbXBsaWZ5O1xuZWxzZSB3aW5kb3cuc2ltcGxpZnkgPSBzaW1wbGlmeTtcblxufSkoKTtcbiIsIi8qKlxuICogVGFrZXMgYSBib3VuZGluZyBib3ggYW5kIHJldHVybnMgYSBuZXcgYm91bmRpbmcgYm94IHdpdGggYSBzaXplIGV4cGFuZGVkIG9yIGNvbnRyYWN0ZWRcbiAqIGJ5IGEgZmFjdG9yIG9mIFguXG4gKlxuICogQG1vZHVsZSB0dXJmL3NpemVcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYmJveCBhIGJvdW5kaW5nIGJveFxuICogQHBhcmFtIHtudW1iZXJ9IGZhY3RvciB0aGUgcmF0aW8gb2YgdGhlIG5ldyBiYm94IHRvIHRoZSBpbnB1dCBiYm94XG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSB0aGUgcmVzaXplZCBiYm94XG4gKiBAZXhhbXBsZVxuICogdmFyIGJib3ggPSBbMCwgMCwgMTAsIDEwXVxuICpcbiAqIHZhciByZXNpemVkID0gdHVyZi5zaXplKGJib3gsIDIpO1xuICpcbiAqIHZhciBmZWF0dXJlcyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogICB0dXJmLmJib3hQb2x5Z29uKGJib3gpLFxuICogICB0dXJmLmJib3hQb2x5Z29uKHJlc2l6ZWQpXSk7XG4gKlxuICogLy89ZmVhdHVyZXNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiYm94LCBmYWN0b3Ipe1xuICB2YXIgY3VycmVudFhEaXN0YW5jZSA9IChiYm94WzJdIC0gYmJveFswXSk7XG4gIHZhciBjdXJyZW50WURpc3RhbmNlID0gKGJib3hbM10gLSBiYm94WzFdKTtcbiAgdmFyIG5ld1hEaXN0YW5jZSA9IGN1cnJlbnRYRGlzdGFuY2UgKiBmYWN0b3I7XG4gIHZhciBuZXdZRGlzdGFuY2UgPSBjdXJyZW50WURpc3RhbmNlICogZmFjdG9yO1xuICB2YXIgeENoYW5nZSA9IG5ld1hEaXN0YW5jZSAtIGN1cnJlbnRYRGlzdGFuY2U7XG4gIHZhciB5Q2hhbmdlID0gbmV3WURpc3RhbmNlIC0gY3VycmVudFlEaXN0YW5jZTtcblxuICB2YXIgbG93WCA9IGJib3hbMF0gLSAoeENoYW5nZSAvIDIpO1xuICB2YXIgbG93WSA9IGJib3hbMV0gLSAoeUNoYW5nZSAvIDIpO1xuICB2YXIgaGlnaFggPSAoeENoYW5nZSAvIDIpICsgYmJveFsyXTtcbiAgdmFyIGhpZ2hZID0gKHlDaGFuZ2UgLyAyKSArIGJib3hbM107XG5cbiAgdmFyIHNpemVkID0gW2xvd1gsIGxvd1ksIGhpZ2hYLCBoaWdoWV07XG4gIHJldHVybiBzaXplZDtcbn1cbiIsInZhciBtaWRwb2ludCA9IHJlcXVpcmUoJ3R1cmYtbWlkcG9pbnQnKTtcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcbnZhciBkaXN0YW5jZSA9IHJlcXVpcmUoJ3R1cmYtZGlzdGFuY2UnKTtcblxuLyoqXG4gKiBUYWtlcyBhIGJvdW5kaW5nIGJveCBhbmQgY2FsY3VsYXRlcyB0aGUgbWluaW11bSBzcXVhcmUgYm91bmRpbmcgYm94IHRoYXQgd291bGQgY29udGFpbiB0aGUgaW5wdXQuXG4gKlxuICogQG1vZHVsZSB0dXJmL3NxdWFyZVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBiYm94IGEgYm91bmRpbmcgYm94XG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBhIHNxdWFyZSBzdXJyb3VuZGluZyBgYmJveGBcbiAqIEBleGFtcGxlXG4gKiB2YXIgYmJveCA9IFstMjAsLTIwLC0xNSwwXTtcbiAqXG4gKiB2YXIgc3F1YXJlZCA9IHR1cmYuc3F1YXJlKGJib3gpO1xuICpcbiAqIHZhciBmZWF0dXJlcyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogICB0dXJmLmJib3hQb2x5Z29uKGJib3gpLFxuICogICB0dXJmLmJib3hQb2x5Z29uKHNxdWFyZWQpXSk7XG4gKlxuICogLy89ZmVhdHVyZXNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiYm94KXtcbiAgdmFyIHNxdWFyZUJib3ggPSBbMCwwLDAsMF07XG4gIHZhciBsb3dMZWZ0ID0gcG9pbnQoW2Jib3hbMF0sIGJib3hbMV1dKTtcbiAgdmFyIHRvcExlZnQgPSBwb2ludChbYmJveFswXSwgYmJveFszXV0pO1xuICB2YXIgdG9wUmlnaHQgPSBwb2ludChbYmJveFsyXSwgYmJveFszXV0pO1xuICB2YXIgbG93UmlnaHQgPSBwb2ludChbYmJveFsyXSwgYmJveFsxXV0pO1xuXG4gIHZhciBob3Jpem9udGFsRGlzdGFuY2UgPSBkaXN0YW5jZShsb3dMZWZ0LCBsb3dSaWdodCwgJ21pbGVzJyk7XG4gIHZhciB2ZXJ0aWNhbERpc3RhbmNlID0gZGlzdGFuY2UobG93TGVmdCwgdG9wTGVmdCwgJ21pbGVzJyk7XG4gIGlmKGhvcml6b250YWxEaXN0YW5jZSA+PSB2ZXJ0aWNhbERpc3RhbmNlKXtcbiAgICBzcXVhcmVCYm94WzBdID0gYmJveFswXTtcbiAgICBzcXVhcmVCYm94WzJdID0gYmJveFsyXTtcbiAgICB2YXIgdmVydGljYWxNaWRwb2ludCA9IG1pZHBvaW50KGxvd0xlZnQsIHRvcExlZnQpO1xuICAgIHNxdWFyZUJib3hbMV0gPSB2ZXJ0aWNhbE1pZHBvaW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdIC0gKChiYm94WzJdIC0gYmJveFswXSkgLyAyKTtcbiAgICBzcXVhcmVCYm94WzNdID0gdmVydGljYWxNaWRwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSArICgoYmJveFsyXSAtIGJib3hbMF0pIC8gMik7XG4gICAgcmV0dXJuIHNxdWFyZUJib3g7XG4gIH1cbiAgZWxzZSB7XG4gICAgc3F1YXJlQmJveFsxXSA9IGJib3hbMV07XG4gICAgc3F1YXJlQmJveFszXSA9IGJib3hbM107XG4gICAgdmFyIGhvcnpvbnRhbE1pZHBvaW50ID0gbWlkcG9pbnQobG93TGVmdCwgbG93UmlnaHQpO1xuICAgIHNxdWFyZUJib3hbMF0gPSBob3J6b250YWxNaWRwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSAtICgoYmJveFszXSAtIGJib3hbMV0pIC8gMik7XG4gICAgc3F1YXJlQmJveFsyXSA9IGhvcnpvbnRhbE1pZHBvaW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdICsgKChiYm94WzNdIC0gYmJveFsxXSkgLyAyKTtcbiAgICByZXR1cm4gc3F1YXJlQmJveDtcbiAgfVxufVxuXG4iLCIvLyBodHRwOi8vY3Muc2VsdS5lZHUvfnJieXJkL21hdGgvbWlkcG9pbnQvXG4vLyAoKHgxK3gyKS8yKSwgKCh5MSt5MikvMilcbnZhciBwb2ludCA9IHJlcXVpcmUoJ3R1cmYtcG9pbnQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2ludDEsIHBvaW50Mikge1xuICBpZihwb2ludDEgPT09IG51bGwgfHwgcG9pbnQyID09PSBudWxsIHx8IHBvaW50MSAmJiBwb2ludDIgPT09IG51bGwpe1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0xlc3MgdGhhbiB0d28gcG9pbnRzIHBhc3NlZC4nKTtcbiAgfVxuXG4gIHZhciB4MSA9IHBvaW50MS5nZW9tZXRyeS5jb29yZGluYXRlc1swXTtcbiAgdmFyIHgyID0gcG9pbnQyLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdO1xuICB2YXIgeTEgPSBwb2ludDEuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV07XG4gIHZhciB5MiA9IHBvaW50Mi5nZW9tZXRyeS5jb29yZGluYXRlc1sxXTtcblxuICB2YXIgeDMgPSB4MSArIHgyO1xuICB2YXIgbWlkWCA9IHgzLzI7XG4gIHZhciB5MyA9IHkxICsgeTI7XG4gIHZhciBtaWRZID0geTMvMjtcblxuICB2YXIgbWlkcG9pbnQgPSBwb2ludChtaWRYLCBtaWRZKTtcblxuICByZXR1cm4gbWlkcG9pbnQ7XG59IiwidmFyIGluc2lkZSA9IHJlcXVpcmUoJ3R1cmYtaW5zaWRlJyk7XG5cbi8qKlxuKiBDYWxjdWxhdGVzIHRoZSBzdW0gb2YgYSBmaWVsZCBmb3Ige0BsaW5rIFBvaW50fSBmZWF0dXJlcyB3aXRoaW4gYSBzZXQgb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzLlxuKlxuKiBAbW9kdWxlIHR1cmYvc3VtXG4qIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHBvbHlnb25zIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzXG4qIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHBvaW50cyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXNcbiogQHBhcmFtIHtTdHJpbmd9IGluRmllbGQgdGhlIGZpZWxkIGluIGlucHV0IGRhdGEgdG8gYW5hbHl6ZVxuKiBAcGFyYW0ge1N0cmluZ30gb3V0RmllbGQgdGhlIGZpZWxkIGluIHdoaWNoIHRvIHN0b3JlIHJlc3VsdHNcbiogQHJldHVybiB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzXG4qIHdpdGggcHJvcGVydGllcyBsaXN0ZWQgYXMgYG91dEZpZWxkYFxuKiBAZXhhbXBsZVxuKiB2YXIgcG9seWdvbnMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtcbiogICB0dXJmLnBvbHlnb24oW1tcbiogICAgIFstODcuOTkwMTg4LCA0My4wMjY0ODZdLFxuKiAgICAgWy04Ny45OTAxODgsIDQzLjA2MjExNV0sXG4qICAgICBbLTg3LjkxMzI4NCwgNDMuMDYyMTE1XSxcbiogICAgIFstODcuOTEzMjg0LCA0My4wMjY0ODZdLFxuKiAgICAgWy04Ny45OTAxODgsIDQzLjAyNjQ4Nl1cbiogICBdXSksXG4qICAgdHVyZi5wb2x5Z29uKFtbXG4qICAgICBbLTg3Ljk3MzcwOSwgNDIuOTYyNDUyXSxcbiogICAgIFstODcuOTczNzA5LCA0My4wMTQ2ODldLFxuKiAgICAgWy04Ny45MDQwMTQsIDQzLjAxNDY4OV0sXG4qICAgICBbLTg3LjkwNDAxNCwgNDIuOTYyNDUyXSxcbiogICAgIFstODcuOTczNzA5LCA0Mi45NjI0NTJdXG4qICAgXV0pXG4qIF0pO1xuKiB2YXIgcG9pbnRzID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4qICAgdHVyZi5wb2ludChbLTg3Ljk3NDA1MiwgNDMuMDQ5MzIxXSwge3BvcHVsYXRpb246IDIwMH0pLFxuKiAgIHR1cmYucG9pbnQoWy04Ny45NTcyMjksIDQzLjAzNzI3N10sIHtwb3B1bGF0aW9uOiA2MDB9KSxcbiogICB0dXJmLnBvaW50KFstODcuOTMxMTM3LCA0My4wNDg1NjhdLCB7cG9wdWxhdGlvbjogMTAwfSksXG4qICAgdHVyZi5wb2ludChbLTg3Ljk2MzQwOSwgNDIuOTk2MTFdLCB7cG9wdWxhdGlvbjogMjAwfSksXG4qICAgdHVyZi5wb2ludChbLTg3Ljk0MTc4LCA0Mi45NzQ3NjJdLCB7cG9wdWxhdGlvbjogMzAwfSlcbiogXSk7XG4qXG4qIHZhciBhZ2dyZWdhdGVkID0gdHVyZi5zdW0oXG4qICAgcG9seWdvbnMsIHBvaW50cywgJ3BvcHVsYXRpb24nLCAnc3VtJyk7XG4qXG4qIHZhciByZXN1bHQgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFxuKiAgIHBvaW50cy5mZWF0dXJlcy5jb25jYXQoYWdncmVnYXRlZC5mZWF0dXJlcykpO1xuKlxuKiAvLz1yZXN1bHRcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvbHlGQywgcHRGQywgaW5GaWVsZCwgb3V0RmllbGQpe1xuICBwb2x5RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwb2x5KXtcbiAgICBpZighcG9seS5wcm9wZXJ0aWVzKXtcbiAgICAgIHBvbHkucHJvcGVydGllcyA9IHt9O1xuICAgIH1cbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgcHRGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHB0KXtcbiAgICAgIGlmIChpbnNpZGUocHQsIHBvbHkpKSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKHB0LnByb3BlcnRpZXNbaW5GaWVsZF0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBvbHkucHJvcGVydGllc1tvdXRGaWVsZF0gPSBzdW0odmFsdWVzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBvbHlGQztcbn07XG5cbmZ1bmN0aW9uIHN1bSh4KSB7XG4gICAgdmFyIHZhbHVlID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgKz0geFtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuIiwidmFyIGluc2lkZSA9IHJlcXVpcmUoJ3R1cmYtaW5zaWRlJyk7XG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXMgYW5kIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzIGFuZCBwZXJmb3JtcyBhIHNwYXRpYWwgam9pbi5cbiAqXG4gKiBAbW9kdWxlIHR1cmYvdGFnXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2ludHMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2x5Z29ucyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlc1xuICogQHBhcmFtIHtTdHJpbmd9IHBvbHlJZCBwcm9wZXJ0eSBpbiBgcG9seWdvbnNgIHRvIGFkZCB0byBqb2luZWQgUG9pbnQgZmVhdHVyZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb250YWluaW5nUG9seUlkIHByb3BlcnR5IGluIGBwb2ludHNgIGluIHdoaWNoIHRvIHN0b3JlIGpvaW5lZCBwcm9wZXJ0eSBmcm9tIGBwb2x5Z29uc1xuICogQHJldHVybiB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgcG9pbnQgZmVhdHVyZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgYmJveCA9IFswLCAwLCA1MCwgNTBdO1xuICogLy8gY3JlYXRlIGEgdHJpYW5ndWxhciBncmlkIG9mIHBvbHlnb25zXG4gKiB2YXIgdHJpYW5nbGVHcmlkID0gdHVyZi50aW4odHVyZi5ncmlkKGJib3gsIDEwKSk7XG4gKiB0cmlhbmdsZUdyaWQuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihmKSB7XG4gKiAgIGYucHJvcGVydGllcy5maWxsID0gJyMnICtcbiAqICAgICAofn4oTWF0aC5yYW5kb20oKSAqIDE2KSkudG9TdHJpbmcoMTYpICtcbiAqICAgICAofn4oTWF0aC5yYW5kb20oKSAqIDE2KSkudG9TdHJpbmcoMTYpICtcbiAqICAgICAofn4oTWF0aC5yYW5kb20oKSAqIDE2KSkudG9TdHJpbmcoMTYpO1xuICogICBmLnByb3BlcnRpZXMuc3Ryb2tlID0gMDtcbiAqICAgZi5wcm9wZXJ0aWVzWydmaWxsLW9wYWNpdHknXSA9IDE7XG4gKiB9KTtcbiAqIHZhciByYW5kb21Qb2ludHMgPSB0dXJmLnJhbmRvbSgncG9pbnQnLCAzMCwge1xuICogICBiYm94OiBiYm94XG4gKiB9KTtcbiAqIHZhciBib3RoID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihcbiAqICAgdHJpYW5nbGVHcmlkLmZlYXR1cmVzLmNvbmNhdChyYW5kb21Qb2ludHMuZmVhdHVyZXMpKTtcbiAqXG4gKiAvLz1ib3RoXG4gKlxuICogdmFyIHRhZ2dlZCA9IHR1cmYudGFnKHJhbmRvbVBvaW50cywgdHJpYW5nbGVHcmlkLFxuICogICAgICAgICAgICAgICAgICAgICAgICdmaWxsJywgJ21hcmtlci1jb2xvcicpO1xuICpcbiAqIC8vPXRhZ2dlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBvaW50cywgcG9seWdvbnMsIGZpZWxkLCBvdXRGaWVsZCl7XG4gIC8vIHByZXZlbnQgbXV0YXRpb25zXG4gIHBvaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocG9pbnRzKSk7XG4gIHBvbHlnb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwb2x5Z29ucykpO1xuICBwb2ludHMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwdCkge1xuICAgIGlmICghcHQucHJvcGVydGllcykge1xuICAgICAgcHQucHJvcGVydGllcyA9IHt9O1xuICAgIH1cbiAgICBwb2x5Z29ucy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHBvbHkpIHtcbiAgICAgIGlmIChwdC5wcm9wZXJ0aWVzW291dEZpZWxkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBpc0luc2lkZSA9IGluc2lkZShwdCwgcG9seSk7XG4gICAgICAgIGlmIChpc0luc2lkZSkge1xuICAgICAgICAgIHB0LnByb3BlcnRpZXNbb3V0RmllbGRdID0gcG9seS5wcm9wZXJ0aWVzW2ZpZWxkXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHBvaW50cztcbn07XG4iLCIvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGVsYXVuYXlfdHJpYW5ndWxhdGlvblxuLy9odHRwczovL2dpdGh1Yi5jb20vaXJvbndhbGxhYnkvZGVsYXVuYXlcbnZhciBwb2x5Z29uID0gcmVxdWlyZSgndHVyZi1wb2x5Z29uJyk7XG52YXIgZmVhdHVyZWNvbGxlY3Rpb24gPSByZXF1aXJlKCd0dXJmLWZlYXR1cmVjb2xsZWN0aW9uJyk7XG5cbi8qKlxuICogVGFrZXMgYSBzZXQgb2YgcG9pbnRzIGFuZCB0aGUgbmFtZSBvZiBhIHotdmFsdWUgcHJvcGVydHkgYW5kXG4gKiBjcmVhdGVzIGEgW1RyaWFuZ3VsYXRlZCBJcnJlZ3VsYXIgTmV0d29ya10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Ucmlhbmd1bGF0ZWRfaXJyZWd1bGFyX25ldHdvcmspLFxuICogb3IgYSBUSU4gZm9yIHNob3J0LCByZXR1cm5lZCBhcyBhIGNvbGxlY3Rpb24gb2YgUG9seWdvbnMuIFRoZXNlIGFyZSBvZnRlbiB1c2VkXG4gKiBmb3IgZGV2ZWxvcGluZyBlbGV2YXRpb24gY29udG91ciBtYXBzIG9yIHN0ZXBwZWQgaGVhdCB2aXN1YWxpemF0aW9ucy5cbiAqXG4gKiBUaGlzIHRyaWFuZ3VsYXRlcyB0aGUgcG9pbnRzLCBhcyB3ZWxsIGFzIGFkZHMgcHJvcGVydGllcyBjYWxsZWQgYGFgLCBgYmAsXG4gKiBhbmQgYGNgIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGBwcm9wZXJ0eU5hbWVgIGF0IGVhY2ggb2ZcbiAqIHRoZSBwb2ludHMgdGhhdCByZXByZXNlbnQgdGhlIGNvcm5lcnMgb2YgdGhlIHRyaWFuZ2xlLlxuICpcbiAqIEBtb2R1bGUgdHVyZi90aW5cbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHBvaW50cyAtIGEgR2VvSlNPTiBGZWF0dXJlQ29sbGVjdGlvbiBjb250YWluaW5nXG4gKiBGZWF0dXJlcyB3aXRoIHtAbGluayBQb2ludH0gZ2VvbWV0cmllc1xuICogQHBhcmFtIHtzdHJpbmc9fSBwcm9wZXJ0eU5hbWUgLSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSBmcm9tIHdoaWNoIHRvIHB1bGwgeiB2YWx1ZXMuXG4gKiBUaGlzIGlzIG9wdGlvbmFsOiBpZiBub3QgZ2l2ZW4sIHRoZW4gdGhlcmUgd2lsbCBiZSBubyBleHRyYSBkYXRhIGFkZGVkIHRvIHRoZVxuICogZGVyaXZlZCB0cmlhbmdsZXMuXG4gKiBAcmV0dXJuIHtGZWF0dXJlQ29sbGVjdGlvbn0gVElOIG91dHB1dFxuICogQGV4YW1wbGVcbiAqIC8vIGdlbmVyYXRlIHNvbWUgcmFuZG9tIHBvaW50IGRhdGFcbiAqIHZhciBwb2ludHMgPSB0dXJmLnJhbmRvbSgncG9pbnRzJywgMzAsIHtcbiAqICAgYmJveDogWzUwLCAzMCwgNzAsIDUwXVxuICogfSk7XG4gKiAvLz1wb2ludHNcbiAqIC8vIGFkZCBhIHJhbmRvbSBwcm9wZXJ0eSB0byBlYWNoIHBvaW50IGJldHdlZW4gMCBhbmQgOVxuICogZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMuZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAqICAgcG9pbnRzLmZlYXR1cmVzW2ldLnByb3BlcnRpZXMueiA9IH5+KE1hdGgucmFuZG9tKCkgKiA5KTtcbiAqIH1cbiAqIHZhciB0aW4gPSB0dXJmLnRpbihwb2ludHMsICd6JylcbiAqIGZvciAodmFyIGkgPSAwOyBpIDwgdGluLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gKiAgIHZhciBwcm9wZXJ0aWVzICA9IHRpbi5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzO1xuICogICAvLyByb3VnaGx5IHR1cm4gdGhlIHByb3BlcnRpZXMgb2YgZWFjaFxuICogICAvLyB0cmlhbmdsZSBpbnRvIGEgZmlsbCBjb2xvclxuICogICAvLyBzbyB3ZSBjYW4gdmlzdWFsaXplIHRoZSByZXN1bHRcbiAqICAgcHJvcGVydGllcy5maWxsID0gJyMnICsgcHJvcGVydGllcy5hICtcbiAqICAgICBwcm9wZXJ0aWVzLmIgKyBwcm9wZXJ0aWVzLmM7XG4gKiB9XG4gKiAvLz10aW5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2ludHMsIHopIHtcbiAgLy9icmVhayBkb3duIHBvaW50c1xuICByZXR1cm4gZmVhdHVyZWNvbGxlY3Rpb24odHJpYW5ndWxhdGUocG9pbnRzLmZlYXR1cmVzLm1hcChmdW5jdGlvbihwKSB7XG4gICAgdmFyIHBvaW50ID0ge1xuICAgICAgeDogcC5nZW9tZXRyeS5jb29yZGluYXRlc1swXSxcbiAgICAgIHk6IHAuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV1cbiAgICB9O1xuICAgIGlmICh6KSBwb2ludC56ID0gcC5wcm9wZXJ0aWVzW3pdO1xuICAgIHJldHVybiBwb2ludDtcbiAgfSkpLm1hcChmdW5jdGlvbih0cmlhbmdsZSkge1xuICAgIHJldHVybiBwb2x5Z29uKFtbXG4gICAgICAgIFt0cmlhbmdsZS5hLngsIHRyaWFuZ2xlLmEueV0sXG4gICAgICAgIFt0cmlhbmdsZS5iLngsIHRyaWFuZ2xlLmIueV0sXG4gICAgICAgIFt0cmlhbmdsZS5jLngsIHRyaWFuZ2xlLmMueV0sXG4gICAgICAgIFt0cmlhbmdsZS5hLngsIHRyaWFuZ2xlLmEueV1cbiAgICBdXSwge1xuICAgICAgICBhOiB0cmlhbmdsZS5hLnosXG4gICAgICAgIGI6IHRyaWFuZ2xlLmIueixcbiAgICAgICAgYzogdHJpYW5nbGUuYy56XG4gICAgICB9KTtcbiAgfSkpO1xufTtcblxuZnVuY3Rpb24gVHJpYW5nbGUoYSwgYiwgYykge1xuICB0aGlzLmEgPSBhO1xuICB0aGlzLmIgPSBiO1xuICB0aGlzLmMgPSBjO1xuXG4gIHZhciBBID0gYi54IC0gYS54LFxuICAgIEIgPSBiLnkgLSBhLnksXG4gICAgQyA9IGMueCAtIGEueCxcbiAgICBEID0gYy55IC0gYS55LFxuICAgIEUgPSBBICogKGEueCArIGIueCkgKyBCICogKGEueSArIGIueSksXG4gICAgRiA9IEMgKiAoYS54ICsgYy54KSArIEQgKiAoYS55ICsgYy55KSxcbiAgICBHID0gMiAqIChBICogKGMueSAtIGIueSkgLSBCICogKGMueCAtIGIueCkpLFxuICAgIG1pbngsIG1pbnksIGR4LCBkeTtcblxuICAvKiBJZiB0aGUgcG9pbnRzIG9mIHRoZSB0cmlhbmdsZSBhcmUgY29sbGluZWFyLCB0aGVuIGp1c3QgZmluZCB0aGVcbiAgICogZXh0cmVtZXMgYW5kIHVzZSB0aGUgbWlkcG9pbnQgYXMgdGhlIGNlbnRlciBvZiB0aGUgY2lyY3VtY2lyY2xlLiAqL1xuICBpZiAoTWF0aC5hYnMoRykgPCAwLjAwMDAwMSkge1xuICAgIG1pbnggPSBNYXRoLm1pbihhLngsIGIueCwgYy54KTtcbiAgICBtaW55ID0gTWF0aC5taW4oYS55LCBiLnksIGMueSk7XG4gICAgZHggPSAoTWF0aC5tYXgoYS54LCBiLngsIGMueCkgLSBtaW54KSAqIDAuNTtcbiAgICBkeSA9IChNYXRoLm1heChhLnksIGIueSwgYy55KSAtIG1pbnkpICogMC41O1xuXG4gICAgdGhpcy54ID0gbWlueCArIGR4O1xuICAgIHRoaXMueSA9IG1pbnkgKyBkeTtcbiAgICB0aGlzLnIgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnggPSAoRCAqIEUgLSBCICogRikgLyBHO1xuICAgIHRoaXMueSA9IChBICogRiAtIEMgKiBFKSAvIEc7XG4gICAgZHggPSB0aGlzLnggLSBhLng7XG4gICAgZHkgPSB0aGlzLnkgLSBhLnk7XG4gICAgdGhpcy5yID0gZHggKiBkeCArIGR5ICogZHk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYnlYKGEsIGIpIHtcbiAgcmV0dXJuIGIueCAtIGEueDtcbn1cblxuZnVuY3Rpb24gZGVkdXAoZWRnZXMpIHtcbiAgdmFyIGogPSBlZGdlcy5sZW5ndGgsXG4gICAgYSwgYiwgaSwgbSwgbjtcblxuICBvdXRlcjpcbiAgd2hpbGUgKGopIHtcbiAgICBiID0gZWRnZXNbLS1qXTtcbiAgICBhID0gZWRnZXNbLS1qXTtcbiAgICBpID0gajtcbiAgICB3aGlsZSAoaSkge1xuICAgICAgbiA9IGVkZ2VzWy0taV07XG4gICAgICBtID0gZWRnZXNbLS1pXTtcbiAgICAgIGlmICgoYSA9PT0gbSAmJiBiID09PSBuKSB8fCAoYSA9PT0gbiAmJiBiID09PSBtKSkge1xuICAgICAgICBlZGdlcy5zcGxpY2UoaiwgMik7XG4gICAgICAgIGVkZ2VzLnNwbGljZShpLCAyKTtcbiAgICAgICAgaiAtPSAyO1xuICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJpYW5ndWxhdGUodmVydGljZXMpIHtcbiAgLyogQmFpbCBpZiB0aGVyZSBhcmVuJ3QgZW5vdWdoIHZlcnRpY2VzIHRvIGZvcm0gYW55IHRyaWFuZ2xlcy4gKi9cbiAgaWYgKHZlcnRpY2VzLmxlbmd0aCA8IDMpXG4gICAgcmV0dXJuIFtdO1xuXG4gICAgLyogRW5zdXJlIHRoZSB2ZXJ0ZXggYXJyYXkgaXMgaW4gb3JkZXIgb2YgZGVzY2VuZGluZyBYIGNvb3JkaW5hdGVcbiAgICAgKiAod2hpY2ggaXMgbmVlZGVkIHRvIGVuc3VyZSBhIHN1YnF1YWRyYXRpYyBydW50aW1lKSwgYW5kIHRoZW4gZmluZFxuICAgICAqIHRoZSBib3VuZGluZyBib3ggYXJvdW5kIHRoZSBwb2ludHMuICovXG4gIHZlcnRpY2VzLnNvcnQoYnlYKTtcblxuICB2YXIgaSA9IHZlcnRpY2VzLmxlbmd0aCAtIDEsXG4gICAgeG1pbiA9IHZlcnRpY2VzW2ldLngsXG4gICAgeG1heCA9IHZlcnRpY2VzWzBdLngsXG4gICAgeW1pbiA9IHZlcnRpY2VzW2ldLnksXG4gICAgeW1heCA9IHltaW47XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIGlmICh2ZXJ0aWNlc1tpXS55IDwgeW1pbilcbiAgICAgIHltaW4gPSB2ZXJ0aWNlc1tpXS55O1xuICAgIGlmICh2ZXJ0aWNlc1tpXS55ID4geW1heClcbiAgICAgIHltYXggPSB2ZXJ0aWNlc1tpXS55O1xuICB9XG5cbiAgLyogRmluZCBhIHN1cGVydHJpYW5nbGUsIHdoaWNoIGlzIGEgdHJpYW5nbGUgdGhhdCBzdXJyb3VuZHMgYWxsIHRoZVxuICAgKiB2ZXJ0aWNlcy4gVGhpcyBpcyB1c2VkIGxpa2Ugc29tZXRoaW5nIG9mIGEgc2VudGluZWwgdmFsdWUgdG8gcmVtb3ZlXG4gICAqIGNhc2VzIGluIHRoZSBtYWluIGFsZ29yaXRobSwgYW5kIGlzIHJlbW92ZWQgYmVmb3JlIHdlIHJldHVybiBhbnlcbiAgICogcmVzdWx0cy5cbiAgICpcbiAgICogT25jZSBmb3VuZCwgcHV0IGl0IGluIHRoZSBcIm9wZW5cIiBsaXN0LiAoVGhlIFwib3BlblwiIGxpc3QgaXMgZm9yXG4gICAqIHRyaWFuZ2xlcyB3aG8gbWF5IHN0aWxsIG5lZWQgdG8gYmUgY29uc2lkZXJlZDsgdGhlIFwiY2xvc2VkXCIgbGlzdCBpc1xuICAgKiBmb3IgdHJpYW5nbGVzIHdoaWNoIGRvIG5vdC4pICovXG4gIHZhciBkeCA9IHhtYXggLSB4bWluLFxuICAgIGR5ID0geW1heCAtIHltaW4sXG4gICAgZG1heCA9IChkeCA+IGR5KSA/IGR4IDogZHksXG4gICAgeG1pZCA9ICh4bWF4ICsgeG1pbikgKiAwLjUsXG4gICAgeW1pZCA9ICh5bWF4ICsgeW1pbikgKiAwLjUsXG4gICAgb3BlbiA9IFtcbiAgICAgIG5ldyBUcmlhbmdsZSh7XG4gICAgICAgIHg6IHhtaWQgLSAyMCAqIGRtYXgsXG4gICAgICAgIHk6IHltaWQgLSBkbWF4LFxuICAgICAgICBfX3NlbnRpbmVsOiB0cnVlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB4OiB4bWlkLFxuICAgICAgICB5OiB5bWlkICsgMjAgKiBkbWF4LFxuICAgICAgICBfX3NlbnRpbmVsOiB0cnVlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB4OiB4bWlkICsgMjAgKiBkbWF4LFxuICAgICAgICB5OiB5bWlkIC0gZG1heCxcbiAgICAgICAgX19zZW50aW5lbDogdHJ1ZVxuICAgICAgfVxuICAgICldLFxuICAgIGNsb3NlZCA9IFtdLFxuICAgIGVkZ2VzID0gW10sXG4gICAgaiwgYSwgYjtcblxuICAgIC8qIEluY3JlbWVudGFsbHkgYWRkIGVhY2ggdmVydGV4IHRvIHRoZSBtZXNoLiAqL1xuICBpID0gdmVydGljZXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgLyogRm9yIGVhY2ggb3BlbiB0cmlhbmdsZSwgY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHBvaW50IGlzXG4gICAgICogaW5zaWRlIGl0J3MgY2lyY3VtY2lyY2xlLiBJZiBpdCBpcywgcmVtb3ZlIHRoZSB0cmlhbmdsZSBhbmQgYWRkXG4gICAgICogaXQncyBlZGdlcyB0byBhbiBlZGdlIGxpc3QuICovXG4gICAgZWRnZXMubGVuZ3RoID0gMDtcbiAgICBqID0gb3Blbi5sZW5ndGg7XG4gICAgd2hpbGUgKGotLSkge1xuICAgICAgLyogSWYgdGhpcyBwb2ludCBpcyB0byB0aGUgcmlnaHQgb2YgdGhpcyB0cmlhbmdsZSdzIGNpcmN1bWNpcmNsZSxcbiAgICAgICAqIHRoZW4gdGhpcyB0cmlhbmdsZSBzaG91bGQgbmV2ZXIgZ2V0IGNoZWNrZWQgYWdhaW4uIFJlbW92ZSBpdFxuICAgICAgICogZnJvbSB0aGUgb3BlbiBsaXN0LCBhZGQgaXQgdG8gdGhlIGNsb3NlZCBsaXN0LCBhbmQgc2tpcC4gKi9cbiAgICAgIGR4ID0gdmVydGljZXNbaV0ueCAtIG9wZW5bal0ueDtcbiAgICAgIGlmIChkeCA+IDAgJiYgZHggKiBkeCA+IG9wZW5bal0ucikge1xuICAgICAgICBjbG9zZWQucHVzaChvcGVuW2pdKTtcbiAgICAgICAgb3Blbi5zcGxpY2UoaiwgMSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvKiBJZiBub3QsIHNraXAgdGhpcyB0cmlhbmdsZS4gKi9cbiAgICAgIGR5ID0gdmVydGljZXNbaV0ueSAtIG9wZW5bal0ueTtcbiAgICAgIGlmIChkeCAqIGR4ICsgZHkgKiBkeSA+IG9wZW5bal0ucilcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIC8qIFJlbW92ZSB0aGUgdHJpYW5nbGUgYW5kIGFkZCBpdCdzIGVkZ2VzIHRvIHRoZSBlZGdlIGxpc3QuICovXG4gICAgICBlZGdlcy5wdXNoKFxuICAgICAgICBvcGVuW2pdLmEsIG9wZW5bal0uYixcbiAgICAgICAgb3BlbltqXS5iLCBvcGVuW2pdLmMsXG4gICAgICAgIG9wZW5bal0uYywgb3BlbltqXS5hXG4gICAgICApO1xuICAgICAgb3Blbi5zcGxpY2UoaiwgMSk7XG4gICAgfVxuXG4gICAgLyogUmVtb3ZlIGFueSBkb3VibGVkIGVkZ2VzLiAqL1xuICAgIGRlZHVwKGVkZ2VzKTtcblxuICAgIC8qIEFkZCBhIG5ldyB0cmlhbmdsZSBmb3IgZWFjaCBlZGdlLiAqL1xuICAgIGogPSBlZGdlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGopIHtcbiAgICAgIGIgPSBlZGdlc1stLWpdO1xuICAgICAgYSA9IGVkZ2VzWy0tal07XG4gICAgICBvcGVuLnB1c2gobmV3IFRyaWFuZ2xlKGEsIGIsIHZlcnRpY2VzW2ldKSk7XG4gICAgfVxuICB9XG5cbiAgLyogQ29weSBhbnkgcmVtYWluaW5nIG9wZW4gdHJpYW5nbGVzIHRvIHRoZSBjbG9zZWQgbGlzdCwgYW5kIHRoZW5cbiAgICogcmVtb3ZlIGFueSB0cmlhbmdsZXMgdGhhdCBzaGFyZSBhIHZlcnRleCB3aXRoIHRoZSBzdXBlcnRyaWFuZ2xlLiAqL1xuICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjbG9zZWQsIG9wZW4pO1xuXG4gIGkgPSBjbG9zZWQubGVuZ3RoO1xuICB3aGlsZSAoaS0tKVxuICBpZiAoY2xvc2VkW2ldLmEuX19zZW50aW5lbCB8fFxuICAgICAgY2xvc2VkW2ldLmIuX19zZW50aW5lbCB8fFxuICAgICAgY2xvc2VkW2ldLmMuX19zZW50aW5lbClcbiAgICAgIGNsb3NlZC5zcGxpY2UoaSwgMSk7XG5cbiAgICAgIC8qIFlheSwgd2UncmUgZG9uZSEgKi9cbiAgcmV0dXJuIGNsb3NlZDtcbn1cbiIsIi8vIGxvb2sgaGVyZSBmb3IgaGVscCBodHRwOi8vc3ZuLm9zZ2VvLm9yZy9ncmFzcy9ncmFzcy9icmFuY2hlcy9yZWxlYXNlYnJhbmNoXzZfNC92ZWN0b3Ivdi5vdmVybGF5L21haW4uY1xuLy9tdXN0IGJlIGFycmF5IG9mIHBvbHlnb25zXG5cbi8vIGRlcGVuZCBvbiBqc3RzIGZvciBub3cgaHR0cHM6Ly9naXRodWIuY29tL2Jqb3JuaGFycnRlbGwvanN0cy9ibG9iL21hc3Rlci9leGFtcGxlcy9vdmVybGF5Lmh0bWxcblxudmFyIGpzdHMgPSByZXF1aXJlKCdqc3RzJyk7XG5cbi8qKlxuICogVGFrZXMgdHdvIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyBhbmQgcmV0dXJuZXMgYSBjb21iaW5lZCB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZS4gSWYgdGhlIGlucHV0IFBvbHlnb24gZmVhdHVyZXMgYXJlIG5vdCBjb250aWd1b3VzLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSB7QGxpbmsgTXVsdGlQb2x5Z29ufSBmZWF0dXJlLlxuICpcbiAqIEBtb2R1bGUgdHVyZi91bmlvblxuICogQHBhcmFtIHtQb2x5Z29ufSBwb2x5MSBhbiBpbnB1dCBQb2x5Z29uXG4gKiBAcGFyYW0ge1BvbHlnb259IHBvbHkyIGFub3RoZXIgaW5wdXQgUG9seWdvblxuICogQHJldHVybiB7RmVhdHVyZX0gYSBjb21iaW5lZCB7QGxpbmsgUG9seWdvbn0gb3Ige0BsaW5rIE11bHRpUG9seWdvbn0gZmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5MSA9IHR1cmYucG9seWdvbihbW1xuICogIFstODIuNTc0Nzg3LCAzNS41OTQwODddLFxuICogIFstODIuNTc0Nzg3LCAzNS42MTU1ODFdLFxuICogIFstODIuNTQ1MjYxLCAzNS42MTU1ODFdLFxuICogIFstODIuNTQ1MjYxLCAzNS41OTQwODddLFxuICogIFstODIuNTc0Nzg3LCAzNS41OTQwODddXG4gKiBdXSk7XG4gKiBwb2x5MS5wcm9wZXJ0aWVzLmZpbGwgPSAnIzBmMCc7XG4gKiB2YXIgcG9seTIgPSB0dXJmLnBvbHlnb24oW1tcbiAqICBbLTgyLjU2MDAyNCwgMzUuNTg1MTUzXSxcbiAqICBbLTgyLjU2MDAyNCwgMzUuNjAyNjAyXSxcbiAqICBbLTgyLjUyOTY0LCAzNS42MDI2MDJdLFxuICogIFstODIuNTI5NjQsIDM1LjU4NTE1M10sXG4gKiAgWy04Mi41NjAwMjQsIDM1LjU4NTE1M11cbiAqIF1dKTtcbiAqIHBvbHkyLnByb3BlcnRpZXMuZmlsbCA9ICcjMDBmJztcbiAqIHZhciBwb2x5RkMgPSB0dXJmLmZlYXR1cmVjb2xsZWN0aW9uKFtwb2x5MSwgcG9seTJdKTtcbiAqXG4gKiB2YXIgdW5pb24gPSB0dXJmLnVuaW9uKHBvbHkxLCBwb2x5Mik7XG4gKlxuICogLy89cG9seUZDXG4gKlxuICogLy89dW5pb25cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwb2x5MSwgcG9seTIpe1xuICB2YXIgcmVhZGVyID0gbmV3IGpzdHMuaW8uR2VvSlNPTlJlYWRlcigpO1xuICB2YXIgYSA9IHJlYWRlci5yZWFkKEpTT04uc3RyaW5naWZ5KHBvbHkxLmdlb21ldHJ5KSk7XG4gIHZhciBiID0gcmVhZGVyLnJlYWQoSlNPTi5zdHJpbmdpZnkocG9seTIuZ2VvbWV0cnkpKTtcbiAgdmFyIHVuaW9uID0gYS51bmlvbihiKTtcbiAgdmFyIHBhcnNlciA9IG5ldyBqc3RzLmlvLkdlb0pTT05QYXJzZXIoKTtcblxuICB1bmlvbiA9IHBhcnNlci53cml0ZSh1bmlvbik7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgIGdlb21ldHJ5OiB1bmlvbixcbiAgICBwcm9wZXJ0aWVzOiBwb2x5MS5wcm9wZXJ0aWVzXG4gIH07XG59XG4iLCIvKlxuICBqYXZhc2NyaXB0LnV0aWwgaXMgYSBwb3J0IG9mIHNlbGVjdGVkIHBhcnRzIG9mIGphdmEudXRpbCB0byBKYXZhU2NyaXB0IHdoaWNoXG4gIG1haW4gcHVycG9zZSBpcyB0byBlYXNlIHBvcnRpbmcgSmF2YSBjb2RlIHRvIEphdmFTY3JpcHQuXG4gIFxuICBUaGUgTUlUIExpY2Vuc2UgKE1JVClcblxuICBDb3B5cmlnaHQgKEMpIDIwMTEtMjAxNCBieSBUaGUgQXV0aG9yc1xuXG4gIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbiAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAgYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuICBUSEUgU09GVFdBUkUuXG4qL1xuOyhmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWEuc3BsaXQoXCIuXCIpLGQ9ZTtjWzBdaW4gZHx8IWQuZXhlY1NjcmlwdHx8ZC5leGVjU2NyaXB0KFwidmFyIFwiK2NbMF0pO2Zvcih2YXIgdDtjLmxlbmd0aCYmKHQ9Yy5zaGlmdCgpKTspYy5sZW5ndGh8fHZvaWQgMD09PWI/ZD1kW3RdP2RbdF06ZFt0XT17fTpkW3RdPWJ9ZnVuY3Rpb24gZyhhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS5xPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5wPWZ1bmN0aW9uKGEsYyxPKXt2YXIgTT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGIucHJvdG90eXBlW2NdLmFwcGx5KGEsTSl9fTtmdW5jdGlvbiBoKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcoaCxFcnJvcik7ZihcImphdmFzY3JpcHQudXRpbC5FbXB0eVN0YWNrRXhjZXB0aW9uXCIsaCk7aC5wcm90b3R5cGUubmFtZT1cIkVtcHR5U3RhY2tFeGNlcHRpb25cIjtmdW5jdGlvbiBrKGEpe3RoaXMubWVzc2FnZT1hfHxcIlwifWcoayxFcnJvcik7ZihcImphdmFzY3JpcHQudXRpbC5JbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXCIsayk7ay5wcm90b3R5cGUubmFtZT1cIkluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25cIjtmdW5jdGlvbiBsKCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuSXRlcmF0b3JcIixsKTtsLnByb3RvdHlwZS5oYXNOZXh0PWwucHJvdG90eXBlLmM7bC5wcm90b3R5cGUubmV4dD1sLnByb3RvdHlwZS5uZXh0O2wucHJvdG90eXBlLnJlbW92ZT1sLnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gbSgpe31mKFwiamF2YXNjcmlwdC51dGlsLkNvbGxlY3Rpb25cIixtKTtmdW5jdGlvbiBuKCl7fWcobixtKTtmKFwiamF2YXNjcmlwdC51dGlsLkxpc3RcIixuKTtmdW5jdGlvbiBwKCl7fWYoXCJqYXZhc2NyaXB0LnV0aWwuTWFwXCIscCk7ZnVuY3Rpb24gcShhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKHEsRXJyb3IpO2YoXCJqYXZhc2NyaXB0LnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvblwiLHEpO3EucHJvdG90eXBlLm5hbWU9XCJOb1N1Y2hFbGVtZW50RXhjZXB0aW9uXCI7ZnVuY3Rpb24gcihhKXt0aGlzLm1lc3NhZ2U9YXx8XCJcIn1nKHIsRXJyb3IpO3IucHJvdG90eXBlLm5hbWU9XCJPcGVyYXRpb25Ob3RTdXBwb3J0ZWRcIjtmdW5jdGlvbiBzKGEpe3RoaXMuYT1bXTthIGluc3RhbmNlb2YgbSYmdGhpcy5lKGEpfWcocyxuKTtmKFwiamF2YXNjcmlwdC51dGlsLkFycmF5TGlzdFwiLHMpO3MucHJvdG90eXBlLmE9bnVsbDtzLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7dGhpcy5hLnB1c2goYSk7cmV0dXJuITB9O3MucHJvdG90eXBlLmFkZD1zLnByb3RvdHlwZS5hZGQ7cy5wcm90b3R5cGUuZT1mdW5jdGlvbihhKXtmb3IoYT1hLmYoKTthLmMoKTspdGhpcy5hZGQoYS5uZXh0KCkpO3JldHVybiEwfTtzLnByb3RvdHlwZS5hZGRBbGw9cy5wcm90b3R5cGUuZTtzLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFbYV07dGhpcy5hW2FdPWI7cmV0dXJuIGN9O3MucHJvdG90eXBlLnNldD1zLnByb3RvdHlwZS5zZXQ7cy5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3JldHVybiBuZXcgdSh0aGlzKX07cy5wcm90b3R5cGUuaXRlcmF0b3I9cy5wcm90b3R5cGUuZjtcbnMucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtpZigwPmF8fGE+PXRoaXMuc2l6ZSgpKXRocm93IG5ldyBrO3JldHVybiB0aGlzLmFbYV19O3MucHJvdG90eXBlLmdldD1zLnByb3RvdHlwZS5nZXQ7cy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hLmxlbmd0aH07cy5wcm90b3R5cGUuaXNFbXB0eT1zLnByb3RvdHlwZS5nO3MucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07cy5wcm90b3R5cGUuc2l6ZT1zLnByb3RvdHlwZS5zaXplO3MucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLmFbYl0pO3JldHVybiBhfTtzLnByb3RvdHlwZS50b0FycmF5PXMucHJvdG90eXBlLmg7XG5zLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSExLGM9MCxkPXRoaXMuYS5sZW5ndGg7YzxkO2MrKylpZih0aGlzLmFbY109PT1hKXt0aGlzLmEuc3BsaWNlKGMsMSk7Yj0hMDticmVha31yZXR1cm4gYn07cy5wcm90b3R5cGUucmVtb3ZlPXMucHJvdG90eXBlLnJlbW92ZTtmdW5jdGlvbiB1KGEpe3RoaXMuaj1hfWYoXCIkanNjb21wLnNjb3BlLkl0ZXJhdG9yX1wiLHUpO3UucHJvdG90eXBlLmo9bnVsbDt1LnByb3RvdHlwZS5iPTA7dS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuYj09PXRoaXMuai5zaXplKCkpdGhyb3cgbmV3IHE7cmV0dXJuIHRoaXMuai5nZXQodGhpcy5iKyspfTt1LnByb3RvdHlwZS5uZXh0PXUucHJvdG90eXBlLm5leHQ7dS5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmI8dGhpcy5qLnNpemUoKT8hMDohMX07dS5wcm90b3R5cGUuaGFzTmV4dD11LnByb3RvdHlwZS5jO1xudS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTt1LnByb3RvdHlwZS5yZW1vdmU9dS5wcm90b3R5cGUucmVtb3ZlO2Z1bmN0aW9uIHYoKXt9ZihcImphdmFzY3JpcHQudXRpbC5BcnJheXNcIix2KTtcbnYuc29ydD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXSxiLGMsZDtpZigxPT09YXJndW1lbnRzLmxlbmd0aClhLnNvcnQoKTtlbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWM9YXJndW1lbnRzWzFdLGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5jb21wYXJlKGEsYil9LGEuc29ydChkKTtlbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWZvcihiPWEuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSksYi5zb3J0KCksZD1hLnNsaWNlKDAsYXJndW1lbnRzWzFdKS5jb25jYXQoYixhLnNsaWNlKGFyZ3VtZW50c1syXSxhLmxlbmd0aCkpLGEuc3BsaWNlKDAsYS5sZW5ndGgpLGI9MDtiPGQubGVuZ3RoO2IrKylhLnB1c2goZFtiXSk7ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aClmb3IoYj1hLnNsaWNlKGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pLGM9YXJndW1lbnRzWzNdLGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5jb21wYXJlKGEsYil9LGIuc29ydChkKSxcbmQ9YS5zbGljZSgwLGFyZ3VtZW50c1sxXSkuY29uY2F0KGIsYS5zbGljZShhcmd1bWVudHNbMl0sYS5sZW5ndGgpKSxhLnNwbGljZSgwLGEubGVuZ3RoKSxiPTA7YjxkLmxlbmd0aDtiKyspYS5wdXNoKGRbYl0pfTt2LmFzTGlzdD1mdW5jdGlvbihhKXtmb3IodmFyIGI9bmV3IHMsYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyliLmFkZChhW2NdKTtyZXR1cm4gYn07ZnVuY3Rpb24gdygpe3RoaXMuaT17fX1nKHcscCk7ZihcImphdmFzY3JpcHQudXRpbC5IYXNoTWFwXCIsdyk7dy5wcm90b3R5cGUuaT1udWxsO3cucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pW2FdfHxudWxsfTt3LnByb3RvdHlwZS5nZXQ9dy5wcm90b3R5cGUuZ2V0O3cucHJvdG90eXBlLnB1dD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmlbYV09Yn07dy5wcm90b3R5cGUucHV0PXcucHJvdG90eXBlLnB1dDt3LnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHMsYjtmb3IoYiBpbiB0aGlzLmkpdGhpcy5pLmhhc093blByb3BlcnR5KGIpJiZhLmFkZCh0aGlzLmlbYl0pO3JldHVybiBhfTt3LnByb3RvdHlwZS52YWx1ZXM9dy5wcm90b3R5cGUubTt3LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubSgpLnNpemUoKX07dy5wcm90b3R5cGUuc2l6ZT13LnByb3RvdHlwZS5zaXplO2Z1bmN0aW9uIHgoKXt9Zyh4LG0pO2YoXCJqYXZhc2NyaXB0LnV0aWwuU2V0XCIseCk7ZnVuY3Rpb24geShhKXt0aGlzLmE9W107YSBpbnN0YW5jZW9mIG0mJnRoaXMuZShhKX1nKHkseCk7ZihcImphdmFzY3JpcHQudXRpbC5IYXNoU2V0XCIseSk7eS5wcm90b3R5cGUuYT1udWxsO3kucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWlmKHRoaXMuYVtiXT09PWEpcmV0dXJuITA7cmV0dXJuITF9O3kucHJvdG90eXBlLmNvbnRhaW5zPXkucHJvdG90eXBlLmNvbnRhaW5zO3kucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXtpZih0aGlzLmNvbnRhaW5zKGEpKXJldHVybiExO3RoaXMuYS5wdXNoKGEpO3JldHVybiEwfTt5LnByb3RvdHlwZS5hZGQ9eS5wcm90b3R5cGUuYWRkO3kucHJvdG90eXBlLmU9ZnVuY3Rpb24oYSl7Zm9yKGE9YS5mKCk7YS5jKCk7KXRoaXMuYWRkKGEubmV4dCgpKTtyZXR1cm4hMH07eS5wcm90b3R5cGUuYWRkQWxsPXkucHJvdG90eXBlLmU7XG55LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O3kucHJvdG90eXBlLnJlbW92ZT15LnByb3RvdHlwZS5yZW1vdmU7eS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEubGVuZ3RofTt5LnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RofTt5LnByb3RvdHlwZS5pc0VtcHR5PXkucHJvdG90eXBlLmc7eS5wcm90b3R5cGUuaD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuYVtiXSk7cmV0dXJuIGF9O3kucHJvdG90eXBlLnRvQXJyYXk9eS5wcm90b3R5cGUuaDt5LnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB6KHRoaXMpfTt5LnByb3RvdHlwZS5pdGVyYXRvcj15LnByb3RvdHlwZS5mO2Z1bmN0aW9uIHooYSl7dGhpcy5rPWF9ZihcIiRqc2NvbXAuc2NvcGUuSXRlcmF0b3JfJDFcIix6KTt6LnByb3RvdHlwZS5rPW51bGw7XG56LnByb3RvdHlwZS5iPTA7ei5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuYj09PXRoaXMuay5zaXplKCkpdGhyb3cgbmV3IHE7cmV0dXJuIHRoaXMuay5hW3RoaXMuYisrXX07ei5wcm90b3R5cGUubmV4dD16LnByb3RvdHlwZS5uZXh0O3oucHJvdG90eXBlLmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iPHRoaXMuay5zaXplKCk/ITA6ITF9O3oucHJvdG90eXBlLmhhc05leHQ9ei5wcm90b3R5cGUuYzt6LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcjt9O3oucHJvdG90eXBlLnJlbW92ZT16LnByb3RvdHlwZS5yZW1vdmU7ZnVuY3Rpb24gQSgpe31nKEEscCk7ZihcImphdmFzY3JpcHQudXRpbC5Tb3J0ZWRNYXBcIixBKTtmdW5jdGlvbiBCKCl7fWcoQix4KTtmKFwiamF2YXNjcmlwdC51dGlsLlNvcnRlZFNldFwiLEIpO2Z1bmN0aW9uIEMoKXt0aGlzLmE9W119ZyhDLG4pO2YoXCJqYXZhc2NyaXB0LnV0aWwuU3RhY2tcIixDKTtDLnByb3RvdHlwZS5hPW51bGw7Qy5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhKXt0aGlzLmEucHVzaChhKTtyZXR1cm4gYX07Qy5wcm90b3R5cGUucHVzaD1DLnByb3RvdHlwZS5wdXNoO0MucHJvdG90eXBlLnBvcD1mdW5jdGlvbigpe2lmKDA9PT10aGlzLmEubGVuZ3RoKXRocm93IG5ldyBoO3JldHVybiB0aGlzLmEucG9wKCl9O0MucHJvdG90eXBlLnBvcD1DLnByb3RvdHlwZS5wb3A7Qy5wcm90b3R5cGUubz1mdW5jdGlvbigpe2lmKDA9PT10aGlzLmEubGVuZ3RoKXRocm93IG5ldyBoO3JldHVybiB0aGlzLmFbdGhpcy5hLmxlbmd0aC0xXX07Qy5wcm90b3R5cGUucGVlaz1DLnByb3RvdHlwZS5vO0MucHJvdG90eXBlLmVtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmEubGVuZ3RoPyEwOiExfTtDLnByb3RvdHlwZS5lbXB0eT1DLnByb3RvdHlwZS5lbXB0eTtcbkMucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbXB0eSgpfTtDLnByb3RvdHlwZS5pc0VtcHR5PUMucHJvdG90eXBlLmc7Qy5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmEuaW5kZXhPZihhKX07Qy5wcm90b3R5cGUuc2VhcmNoPUMucHJvdG90eXBlLnNlYXJjaDtDLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5sZW5ndGh9O0MucHJvdG90eXBlLnNpemU9Qy5wcm90b3R5cGUuc2l6ZTtDLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07Qy5wcm90b3R5cGUudG9BcnJheT1DLnByb3RvdHlwZS5oO2Z1bmN0aW9uIEQoYSl7cmV0dXJuIG51bGw9PWE/bnVsbDphLnBhcmVudH1mdW5jdGlvbiBFKGEsYil7bnVsbCE9PWEmJihhLmNvbG9yPWIpfWZ1bmN0aW9uIEYoYSl7cmV0dXJuIG51bGw9PWE/bnVsbDphLmxlZnR9ZnVuY3Rpb24gRyhhKXtyZXR1cm4gbnVsbD09YT9udWxsOmEucmlnaHR9ZnVuY3Rpb24gSCgpe3RoaXMuZD1udWxsO3RoaXMubj0wfWcoSCxBKTtmKFwiamF2YXNjcmlwdC51dGlsLlRyZWVNYXBcIixIKTtILnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZDtudWxsIT09Yjspe3ZhciBjPWEuY29tcGFyZVRvKGIua2V5KTtpZigwPmMpYj1iLmxlZnQ7ZWxzZSBpZigwPGMpYj1iLnJpZ2h0O2Vsc2UgcmV0dXJuIGIudmFsdWV9cmV0dXJuIG51bGx9O0gucHJvdG90eXBlLmdldD1ILnByb3RvdHlwZS5nZXQ7XG5ILnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oYSxiKXtpZihudWxsPT09dGhpcy5kKXJldHVybiB0aGlzLmQ9e2tleTphLHZhbHVlOmIsbGVmdDpudWxsLHJpZ2h0Om51bGwscGFyZW50Om51bGwsY29sb3I6MH0sdGhpcy5uPTEsbnVsbDt2YXIgYz10aGlzLmQsZCx0O2RvIGlmKGQ9Yyx0PWEuY29tcGFyZVRvKGMua2V5KSwwPnQpYz1jLmxlZnQ7ZWxzZSBpZigwPHQpYz1jLnJpZ2h0O2Vsc2UgcmV0dXJuIGQ9Yy52YWx1ZSxjLnZhbHVlPWIsZDt3aGlsZShudWxsIT09Yyk7Yz17a2V5OmEsbGVmdDpudWxsLHJpZ2h0Om51bGwsdmFsdWU6YixwYXJlbnQ6ZCxjb2xvcjowfTswPnQ/ZC5sZWZ0PWM6ZC5yaWdodD1jO2ZvcihjLmNvbG9yPTE7bnVsbCE9YyYmYyE9dGhpcy5kJiYxPT1jLnBhcmVudC5jb2xvcjspRChjKT09RihEKEQoYykpKT8oZD1HKEQoRChjKSkpLDE9PShudWxsPT1kPzA6ZC5jb2xvcik/KEUoRChjKSwwKSxFKGQsMCksRShEKEQoYykpLDEpLGM9RChEKGMpKSk6KGM9PUcoRChjKSkmJlxuKGM9RChjKSxJKHRoaXMsYykpLEUoRChjKSwwKSxFKEQoRChjKSksMSksSih0aGlzLEQoRChjKSkpKSk6KGQ9RihEKEQoYykpKSwxPT0obnVsbD09ZD8wOmQuY29sb3IpPyhFKEQoYyksMCksRShkLDApLEUoRChEKGMpKSwxKSxjPUQoRChjKSkpOihjPT1GKEQoYykpJiYoYz1EKGMpLEoodGhpcyxjKSksRShEKGMpLDApLEUoRChEKGMpKSwxKSxJKHRoaXMsRChEKGMpKSkpKTt0aGlzLmQuY29sb3I9MDt0aGlzLm4rKztyZXR1cm4gbnVsbH07SC5wcm90b3R5cGUucHV0PUgucHJvdG90eXBlLnB1dDtILnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHMsYjtiPXRoaXMuZDtpZihudWxsIT1iKWZvcig7bnVsbCE9Yi5sZWZ0OyliPWIubGVmdDtpZihudWxsIT09Yilmb3IoYS5hZGQoYi52YWx1ZSk7bnVsbCE9PShiPUsoYikpOylhLmFkZChiLnZhbHVlKTtyZXR1cm4gYX07SC5wcm90b3R5cGUudmFsdWVzPUgucHJvdG90eXBlLm07XG5mdW5jdGlvbiBJKGEsYil7aWYobnVsbCE9Yil7dmFyIGM9Yi5yaWdodDtiLnJpZ2h0PWMubGVmdDtudWxsIT1jLmxlZnQmJihjLmxlZnQucGFyZW50PWIpO2MucGFyZW50PWIucGFyZW50O251bGw9PWIucGFyZW50P2EuZD1jOmIucGFyZW50LmxlZnQ9PWI/Yi5wYXJlbnQubGVmdD1jOmIucGFyZW50LnJpZ2h0PWM7Yy5sZWZ0PWI7Yi5wYXJlbnQ9Y319ZnVuY3Rpb24gSihhLGIpe2lmKG51bGwhPWIpe3ZhciBjPWIubGVmdDtiLmxlZnQ9Yy5yaWdodDtudWxsIT1jLnJpZ2h0JiYoYy5yaWdodC5wYXJlbnQ9Yik7Yy5wYXJlbnQ9Yi5wYXJlbnQ7bnVsbD09Yi5wYXJlbnQ/YS5kPWM6Yi5wYXJlbnQucmlnaHQ9PWI/Yi5wYXJlbnQucmlnaHQ9YzpiLnBhcmVudC5sZWZ0PWM7Yy5yaWdodD1iO2IucGFyZW50PWN9fVxuZnVuY3Rpb24gSyhhKXtpZihudWxsPT09YSlyZXR1cm4gbnVsbDtpZihudWxsIT09YS5yaWdodClmb3IodmFyIGI9YS5yaWdodDtudWxsIT09Yi5sZWZ0OyliPWIubGVmdDtlbHNlIGZvcihiPWEucGFyZW50O251bGwhPT1iJiZhPT09Yi5yaWdodDspYT1iLGI9Yi5wYXJlbnQ7cmV0dXJuIGJ9SC5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm59O0gucHJvdG90eXBlLnNpemU9SC5wcm90b3R5cGUuc2l6ZTtmdW5jdGlvbiBMKGEpe3RoaXMuYT1bXTthIGluc3RhbmNlb2YgbSYmdGhpcy5lKGEpfWcoTCxCKTtmKFwiamF2YXNjcmlwdC51dGlsLlRyZWVTZXRcIixMKTtMLnByb3RvdHlwZS5hPW51bGw7TC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmEubGVuZ3RoO2I8YztiKyspaWYoMD09PXRoaXMuYVtiXS5jb21wYXJlVG8oYSkpcmV0dXJuITA7cmV0dXJuITF9O0wucHJvdG90eXBlLmNvbnRhaW5zPUwucHJvdG90eXBlLmNvbnRhaW5zO0wucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXtpZih0aGlzLmNvbnRhaW5zKGEpKXJldHVybiExO2Zvcih2YXIgYj0wLGM9dGhpcy5hLmxlbmd0aDtiPGM7YisrKWlmKDE9PT10aGlzLmFbYl0uY29tcGFyZVRvKGEpKXJldHVybiB0aGlzLmEuc3BsaWNlKGIsMCxhKSwhMDt0aGlzLmEucHVzaChhKTtyZXR1cm4hMH07TC5wcm90b3R5cGUuYWRkPUwucHJvdG90eXBlLmFkZDtcbkwucHJvdG90eXBlLmU9ZnVuY3Rpb24oYSl7Zm9yKGE9YS5mKCk7YS5jKCk7KXRoaXMuYWRkKGEubmV4dCgpKTtyZXR1cm4hMH07TC5wcm90b3R5cGUuYWRkQWxsPUwucHJvdG90eXBlLmU7TC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IHI7fTtMLnByb3RvdHlwZS5yZW1vdmU9TC5wcm90b3R5cGUucmVtb3ZlO0wucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmxlbmd0aH07TC5wcm90b3R5cGUuc2l6ZT1MLnByb3RvdHlwZS5zaXplO0wucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYS5sZW5ndGh9O0wucHJvdG90eXBlLmlzRW1wdHk9TC5wcm90b3R5cGUuZztMLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuYS5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5hW2JdKTtyZXR1cm4gYX07TC5wcm90b3R5cGUudG9BcnJheT1MLnByb3RvdHlwZS5oO0wucHJvdG90eXBlLmY9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE4odGhpcyl9O1xuTC5wcm90b3R5cGUuaXRlcmF0b3I9TC5wcm90b3R5cGUuZjtmdW5jdGlvbiBOKGEpe3RoaXMubD1hfWYoXCIkanNjb21wLnNjb3BlLkl0ZXJhdG9yXyQyXCIsTik7Ti5wcm90b3R5cGUubD1udWxsO04ucHJvdG90eXBlLmI9MDtOLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYodGhpcy5iPT09dGhpcy5sLnNpemUoKSl0aHJvdyBuZXcgcTtyZXR1cm4gdGhpcy5sLmFbdGhpcy5iKytdfTtOLnByb3RvdHlwZS5uZXh0PU4ucHJvdG90eXBlLm5leHQ7Ti5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmI8dGhpcy5sLnNpemUoKT8hMDohMX07Ti5wcm90b3R5cGUuaGFzTmV4dD1OLnByb3RvdHlwZS5jO04ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyByO307Ti5wcm90b3R5cGUucmVtb3ZlPU4ucHJvdG90eXBlLnJlbW92ZTtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGdsb2JhbCYmKGdsb2JhbC5qYXZhc2NyaXB0PXt9LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWw9e30sZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5BcnJheUxpc3Q9cyxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkFycmF5cz12LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuQ29sbGVjdGlvbj1tLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuRW1wdHlTdGFja0V4Y2VwdGlvbj1oLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSGFzaE1hcD13LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSGFzaFNldD15LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbj1rLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuSXRlcmF0b3I9bCxnbG9iYWwuamF2YXNjcmlwdC51dGlsLkxpc3Q9bixnbG9iYWwuamF2YXNjcmlwdC51dGlsLk1hcD1wLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvbj1xLGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuT3BlcmF0aW9uTm90U3VwcG9ydGVkPVxucixnbG9iYWwuamF2YXNjcmlwdC51dGlsLlNldD14LGdsb2JhbC5qYXZhc2NyaXB0LnV0aWwuU29ydGVkTWFwPUEsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5Tb3J0ZWRTZXQ9QixnbG9iYWwuamF2YXNjcmlwdC51dGlsLlN0YWNrPUMsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5UcmVlTWFwPUgsZ2xvYmFsLmphdmFzY3JpcHQudXRpbC5UcmVlU2V0PUwpO30pLmNhbGwodGhpcyk7XG4iLCJ2YXIgc3MgPSByZXF1aXJlKCdzaW1wbGUtc3RhdGlzdGljcycpO1xudmFyIGluc2lkZSA9IHJlcXVpcmUoJ3R1cmYtaW5zaWRlJyk7XG5cbi8qKlxuKiBDYWxjdWxhdGVzIHRoZSB2YXJpYW5jZSB2YWx1ZSBvZiBhIGZpZWxkIGZvciB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIHdpdGhpbiBhIHNldCBvZiB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZXMuXG4qXG4qIEBtb2R1bGUgdHVyZi92YXJpYW5jZVxuKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2x5Z29ucyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlc1xuKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBwb2ludHMgYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzXG4qIEBwYXJhbSB7c3RyaW5nfSBpbkZpZWxkIHRoZSBmaWVsZCBpbiBpbnB1dCBkYXRhIHRvIGFuYWx5emVcbiogQHBhcmFtIHtzdHJpbmd9IG91dEZpZWxkIHRoZSBmaWVsZCBpbiB3aGljaCB0byBzdG9yZSByZXN1bHRzXG4qIEByZXR1cm4ge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlc1xuKiB3aXRoIHByb3BlcnRpZXMgbGlzdGVkIGFzIGBvdXRGaWVsZGBcbiogQGV4YW1wbGVcbiogdmFyIHBvbHlnb25zID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4qICAgdHVyZi5wb2x5Z29uKFtbXG4qICAgICBbLTk3LjQxNDM5OCwgMzcuNjg0MDkyXSxcbiogICAgIFstOTcuNDE0Mzk4LCAzNy43MzEzNTNdLFxuKiAgICAgWy05Ny4zMzIzNDQsIDM3LjczMTM1M10sXG4qICAgICBbLTk3LjMzMjM0NCwgMzcuNjg0MDkyXSxcbiogICAgIFstOTcuNDE0Mzk4LCAzNy42ODQwOTJdXG4qICAgXV0pLFxuKiAgIHR1cmYucG9seWdvbihbW1xuKiAgICAgWy05Ny4zMzM3MTcsIDM3LjYwNjA3Ml0sXG4qICAgICBbLTk3LjMzMzcxNywgMzcuNjc1Mzk3XSxcbiogICAgIFstOTcuMjM3NTg2LCAzNy42NzUzOTddLFxuKiAgICAgWy05Ny4yMzc1ODYsIDM3LjYwNjA3Ml0sXG4qICAgICBbLTk3LjMzMzcxNywgMzcuNjA2MDcyXVxuKiAgIF1dKVxuKiBdKTtcbiogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuKiAgIHR1cmYucG9pbnQoWy05Ny40MDEzNTEsIDM3LjcxOTY3Nl0sIHtwb3B1bGF0aW9uOiAyMDB9KSxcbiogICB0dXJmLnBvaW50KFstOTcuMzU1MzQ2LCAzNy43MDY2MzldLCB7cG9wdWxhdGlvbjogNjAwfSksXG4qICAgdHVyZi5wb2ludChbLTk3LjM4Nzk2MiwgMzcuNzAwMTJdLCB7cG9wdWxhdGlvbjogMTAwfSksXG4qICAgdHVyZi5wb2ludChbLTk3LjMwMTc4OCwgMzcuNjY1MDddLCB7cG9wdWxhdGlvbjogMjAwfSksXG4qICAgdHVyZi5wb2ludChbLTk3LjI2NTA1MiwgMzcuNjQzMzI1XSwge3BvcHVsYXRpb246IDMwMH0pXSk7XG4qXG4qIHZhciBhZ2dyZWdhdGVkID0gdHVyZi52YXJpYW5jZShcbiogICBwb2x5Z29ucywgcG9pbnRzLCAncG9wdWxhdGlvbicsICd2YXJpYW5jZScpO1xuKlxuKiB2YXIgcmVzdWx0ID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihcbiogICBwb2ludHMuZmVhdHVyZXMuY29uY2F0KGFnZ3JlZ2F0ZWQuZmVhdHVyZXMpKTtcbipcbiogLy89cmVzdWx0XG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocG9seUZDLCBwdEZDLCBpbkZpZWxkLCBvdXRGaWVsZCkge1xuICBwb2x5RkMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwb2x5KXtcbiAgICBpZighcG9seS5wcm9wZXJ0aWVzKXtcbiAgICAgIHBvbHkucHJvcGVydGllcyA9IHt9O1xuICAgIH1cbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgcHRGQy5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKHB0KXtcbiAgICAgIGlmIChpbnNpZGUocHQsIHBvbHkpKSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKHB0LnByb3BlcnRpZXNbaW5GaWVsZF0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBvbHkucHJvcGVydGllc1tvdXRGaWVsZF0gPSBzcy52YXJpYW5jZSh2YWx1ZXMpO1xuICB9KTtcblxuICByZXR1cm4gcG9seUZDO1xufTtcbiIsInZhciBpbnNpZGUgPSByZXF1aXJlKCd0dXJmLWluc2lkZScpO1xudmFyIGZlYXR1cmVDb2xsZWN0aW9uID0gcmVxdWlyZSgndHVyZi1mZWF0dXJlY29sbGVjdGlvbicpO1xuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBvZiB7QGxpbmsgUG9pbnR9IGZlYXR1cmVzIGFuZCBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlcyBhbmQgcmV0dXJucyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIFBvaW50IGZlYXR1cmVzIHJlcHJlc2VudGluZyBhbGwgcG9pbnRzIHRoYXQgZmFsbCB3aXRoaW4gYSBjb2xsZWN0aW9uIG9mIHBvbHlnb25zLlxuICpcbiAqIEBtb2R1bGUgdHVyZi93aXRoaW5cbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHBvaW50cyBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHtAbGluayBQb2ludH0gZmVhdHVyZXNcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHBvbHlnb25zIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Yge0BsaW5rIFBvbHlnb259IGZlYXR1cmVzXG4gKiBAcmV0dXJuIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBjb2xsZWN0aW9uIG9mIGFsbCBwb2ludHMgdGhhdCBsYW5kXG4gKiB3aXRoaW4gYXQgbGVhc3Qgb25lIHBvbHlnb25cbiAqIEBleGFtcGxlXG4gKiB2YXIgc2VhcmNoV2l0aGluID0gdHVyZi5mZWF0dXJlY29sbGVjdGlvbihbXG4gKiAgIHR1cmYucG9seWdvbihbW1xuICogICAgIFstNDYuNjUzLC0yMy41NDNdLFxuICogICAgIFstNDYuNjM0LC0yMy41MzQ2XSxcbiAqICAgICBbLTQ2LjYxMywtMjMuNTQzXSxcbiAqICAgICBbLTQ2LjYxNCwtMjMuNTU5XSxcbiAqICAgICBbLTQ2LjYzMSwtMjMuNTY3XSxcbiAqICAgICBbLTQ2LjY1MywtMjMuNTYwXSxcbiAqICAgICBbLTQ2LjY1MywtMjMuNTQzXVxuICogICBdXSlcbiAqIF0pO1xuICogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZWNvbGxlY3Rpb24oW1xuICogICB0dXJmLnBvaW50KFstNDYuNjMxOCwgLTIzLjU1MjNdKSxcbiAqICAgdHVyZi5wb2ludChbLTQ2LjYyNDYsIC0yMy41MzI1XSksXG4gKiAgIHR1cmYucG9pbnQoWy00Ni42MDYyLCAtMjMuNTUxM10pLFxuICogICB0dXJmLnBvaW50KFstNDYuNjYzLCAtMjMuNTU0XSksXG4gKiAgIHR1cmYucG9pbnQoWy00Ni42NDMsIC0yMy41NTddKVxuICogXSk7XG4gKlxuICogdmFyIHB0c1dpdGhpbiA9IHR1cmYud2l0aGluKHBvaW50cywgc2VhcmNoV2l0aGluKTtcbiAqXG4gKiAvLz1wb2ludHNcbiAqXG4gKiAvLz1zZWFyY2hXaXRoaW5cbiAqXG4gKiAvLz1wdHNXaXRoaW5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwdEZDLCBwb2x5RkMpe1xuICB2YXIgcG9pbnRzV2l0aGluID0gZmVhdHVyZUNvbGxlY3Rpb24oW10pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlGQy5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcHRGQy5mZWF0dXJlcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIGlzSW5zaWRlID0gaW5zaWRlKHB0RkMuZmVhdHVyZXNbal0sIHBvbHlGQy5mZWF0dXJlc1tpXSk7XG4gICAgICBpZihpc0luc2lkZSl7XG4gICAgICAgIHBvaW50c1dpdGhpbi5mZWF0dXJlcy5wdXNoKHB0RkMuZmVhdHVyZXNbal0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcG9pbnRzV2l0aGluO1xufTtcbiIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpcy1hcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG52YXIga01heExlbmd0aCA9IDB4M2ZmZmZmZmZcbnZhciByb290UGFyZW50ID0ge31cblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAtIEltcGxlbWVudGF0aW9uIG11c3Qgc3VwcG9ydCBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcy5cbiAqICAgRmlyZWZveCA0LTI5IGxhY2tlZCBzdXBwb3J0LCBmaXhlZCBpbiBGaXJlZm94IDMwKy5cbiAqICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cbiAqXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleSB3aWxsXG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCB3aWxsIHdvcmsgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IChmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigwKVxuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShidWYpXG4gICAgYXJyLmZvbyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH1cbiAgICByZXR1cm4gNDIgPT09IGFyci5mb28oKSAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBuZXcgVWludDhBcnJheSgxKS5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufSkoKVxuXG4vKipcbiAqIENsYXNzOiBCdWZmZXJcbiAqID09PT09PT09PT09PT1cbiAqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGFyZSBhdWdtZW50ZWRcbiAqIHdpdGggZnVuY3Rpb24gcHJvcGVydGllcyBmb3IgYWxsIHRoZSBub2RlIGBCdWZmZXJgIEFQSSBmdW5jdGlvbnMuIFdlIHVzZVxuICogYFVpbnQ4QXJyYXlgIHNvIHRoYXQgc3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXQgcmV0dXJuc1xuICogYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogQnkgYXVnbWVudGluZyB0aGUgaW5zdGFuY2VzLCB3ZSBjYW4gYXZvaWQgbW9kaWZ5aW5nIHRoZSBgVWludDhBcnJheWBcbiAqIHByb3RvdHlwZS5cbiAqL1xuZnVuY3Rpb24gQnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZywgbm9aZXJvKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKVxuICAgIHJldHVybiBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nLCBub1plcm8pXG5cbiAgdmFyIHR5cGUgPSB0eXBlb2Ygc3ViamVjdFxuXG4gIC8vIEZpbmQgdGhlIGxlbmd0aFxuICB2YXIgbGVuZ3RoXG4gIGlmICh0eXBlID09PSAnbnVtYmVyJylcbiAgICBsZW5ndGggPSBzdWJqZWN0ID4gMCA/IHN1YmplY3QgPj4+IDAgOiAwXG4gIGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgbGVuZ3RoID0gQnVmZmVyLmJ5dGVMZW5ndGgoc3ViamVjdCwgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcgJiYgc3ViamVjdCAhPT0gbnVsbCkgeyAvLyBhc3N1bWUgb2JqZWN0IGlzIGFycmF5LWxpa2VcbiAgICBpZiAoc3ViamVjdC50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KHN1YmplY3QuZGF0YSkpXG4gICAgICBzdWJqZWN0ID0gc3ViamVjdC5kYXRhXG4gICAgbGVuZ3RoID0gK3N1YmplY3QubGVuZ3RoID4gMCA/IE1hdGguZmxvb3IoK3N1YmplY3QubGVuZ3RoKSA6IDBcbiAgfSBlbHNlXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBrTWF4TGVuZ3RoKVxuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG5cbiAgdmFyIGJ1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBQcmVmZXJyZWQ6IFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgYnVmID0gQnVmZmVyLl9hdWdtZW50KG5ldyBVaW50OEFycmF5KGxlbmd0aCkpXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBUSElTIGluc3RhbmNlIG9mIEJ1ZmZlciAoY3JlYXRlZCBieSBgbmV3YClcbiAgICBidWYgPSB0aGlzXG4gICAgYnVmLmxlbmd0aCA9IGxlbmd0aFxuICAgIGJ1Zi5faXNCdWZmZXIgPSB0cnVlXG4gIH1cblxuICB2YXIgaVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgdHlwZW9mIHN1YmplY3QuYnl0ZUxlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAvLyBTcGVlZCBvcHRpbWl6YXRpb24gLS0gdXNlIHNldCBpZiB3ZSdyZSBjb3B5aW5nIGZyb20gYSB0eXBlZCBhcnJheVxuICAgIGJ1Zi5fc2V0KHN1YmplY3QpXG4gIH0gZWxzZSBpZiAoaXNBcnJheWlzaChzdWJqZWN0KSkge1xuICAgIC8vIFRyZWF0IGFycmF5LWlzaCBvYmplY3RzIGFzIGEgYnl0ZSBhcnJheVxuICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3ViamVjdCkpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcbiAgICAgICAgYnVmW2ldID0gc3ViamVjdC5yZWFkVUludDgoaSlcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuICAgICAgICBidWZbaV0gPSAoKHN1YmplY3RbaV0gJSAyNTYpICsgMjU2KSAlIDI1NlxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgIGJ1Zi53cml0ZShzdWJqZWN0LCAwLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgIW5vWmVybykge1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgYnVmW2ldID0gMFxuICAgIH1cbiAgfVxuXG4gIGlmIChsZW5ndGggPiAwICYmIGxlbmd0aCA8PSBCdWZmZXIucG9vbFNpemUpXG4gICAgYnVmLnBhcmVudCA9IHJvb3RQYXJlbnRcblxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcsIG5vWmVybykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2xvd0J1ZmZlcikpXG4gICAgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nLCBub1plcm8pXG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcsIG5vWmVybylcbiAgZGVsZXRlIGJ1Zi5wYXJlbnRcbiAgcmV0dXJuIGJ1ZlxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbiAmJiBhW2ldID09PSBiW2ldOyBpKyspIHt9XG4gIGlmIChpICE9PSBsZW4pIHtcbiAgICB4ID0gYVtpXVxuICAgIHkgPSBiW2ldXG4gIH1cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAncmF3JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIChsaXN0LCB0b3RhbExlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VzYWdlOiBCdWZmZXIuY29uY2F0KGxpc3RbLCBsZW5ndGhdKScpXG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoMClcbiAgfSBlbHNlIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBsaXN0WzBdXG4gIH1cblxuICB2YXIgaVxuICBpZiAodG90YWxMZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIHRvdGFsTGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0b3RhbExlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKHRvdGFsTGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXVxuICAgIGl0ZW0uY29weShidWYsIHBvcylcbiAgICBwb3MgKz0gaXRlbS5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gZnVuY3Rpb24gKHN0ciwgZW5jb2RpbmcpIHtcbiAgdmFyIHJldFxuICBzdHIgPSBzdHIgKyAnJ1xuICBzd2l0Y2ggKGVuY29kaW5nIHx8ICd1dGY4Jykge1xuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ3Jhdyc6XG4gICAgICByZXQgPSBzdHIubGVuZ3RoXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXQgPSBzdHIubGVuZ3RoICogMlxuICAgICAgYnJlYWtcbiAgICBjYXNlICdoZXgnOlxuICAgICAgcmV0ID0gc3RyLmxlbmd0aCA+Pj4gMVxuICAgICAgYnJlYWtcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgICByZXQgPSB1dGY4VG9CeXRlcyhzdHIpLmxlbmd0aFxuICAgICAgYnJlYWtcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgcmV0ID0gYmFzZTY0VG9CeXRlcyhzdHIpLmxlbmd0aFxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0ID0gc3RyLmxlbmd0aFxuICB9XG4gIHJldHVybiByZXRcbn1cblxuLy8gcHJlLXNldCBmb3IgdmFsdWVzIHRoYXQgbWF5IGV4aXN0IGluIHRoZSBmdXR1cmVcbkJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG5CdWZmZXIucHJvdG90eXBlLnBhcmVudCA9IHVuZGVmaW5lZFxuXG4vLyB0b1N0cmluZyhlbmNvZGluZywgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPT09IEluZmluaXR5ID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJydcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heClcbiAgICAgIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYilcbn1cblxuLy8gYGdldGAgd2lsbCBiZSByZW1vdmVkIGluIE5vZGUgMC4xMytcbkJ1ZmZlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICBjb25zb2xlLmxvZygnLmdldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuJylcbiAgcmV0dXJuIHRoaXMucmVhZFVJbnQ4KG9mZnNldClcbn1cblxuLy8gYHNldGAgd2lsbCBiZSByZW1vdmVkIGluIE5vZGUgMC4xMytcbkJ1ZmZlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHYsIG9mZnNldCkge1xuICBjb25zb2xlLmxvZygnLnNldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuJylcbiAgcmV0dXJuIHRoaXMud3JpdGVVSW50OCh2LCBvZmZzZXQpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGJ5dGUgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKGJ5dGUpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gYnl0ZVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHZhciBjaGFyc1dyaXR0ZW4gPSBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG4gIHJldHVybiBjaGFyc1dyaXR0ZW5cbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHZhciBjaGFyc1dyaXR0ZW4gPSBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuICByZXR1cm4gY2hhcnNXcml0dGVuXG59XG5cbmZ1bmN0aW9uIGJpbmFyeVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHZhciBjaGFyc1dyaXR0ZW4gPSBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbiAgcmV0dXJuIGNoYXJzV3JpdHRlblxufVxuXG5mdW5jdGlvbiB1dGYxNmxlV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICB2YXIgY2hhcnNXcml0dGVuID0gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoLCAyKVxuICByZXR1cm4gY2hhcnNXcml0dGVuXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gU3VwcG9ydCBib3RoIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZylcbiAgLy8gYW5kIHRoZSBsZWdhY3kgKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIGlmICghaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfSBlbHNlIHsgIC8vIGxlZ2FjeVxuICAgIHZhciBzd2FwID0gZW5jb2RpbmdcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIG9mZnNldCA9IGxlbmd0aFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcblxuICBpZiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKVxuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpO1xuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG4gIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nIHx8ICd1dGY4JykudG9Mb3dlckNhc2UoKVxuXG4gIHZhciByZXRcbiAgc3dpdGNoIChlbmNvZGluZykge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgICByZXQgPSBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgICByZXQgPSB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXNjaWknOlxuICAgICAgcmV0ID0gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdiaW5hcnknOlxuICAgICAgcmV0ID0gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIHJldCA9IGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXQgPSB1dGYxNmxlV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmVzID0gJydcbiAgdmFyIHRtcCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIGlmIChidWZbaV0gPD0gMHg3Rikge1xuICAgICAgcmVzICs9IGRlY29kZVV0ZjhDaGFyKHRtcCkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgICAgIHRtcCA9ICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIHRtcCArPSAnJScgKyBidWZbaV0udG9TdHJpbmcoMTYpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcyArIGRlY29kZVV0ZjhDaGFyKHRtcClcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gYmluYXJ5U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuO1xuICAgIGlmIChzdGFydCA8IDApXG4gICAgICBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMClcbiAgICAgIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydClcbiAgICBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQsIHRydWUpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aClcbiAgICBuZXdCdWYucGFyZW50ID0gdGhpcy5wYXJlbnQgfHwgdGhpc1xuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWw7XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bClcbiAgICB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bClcbiAgICB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSlcbiAgICByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSlcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSA+Pj4gMCAmIDB4RkZcblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpID4+PiAwICYgMHhGRlxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWVcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyBpKyspIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9IHZhbHVlXG4gIH0gZWxzZSBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJbnQodGhpcyxcbiAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICAgYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgICBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpIC0gMSxcbiAgICAgICAgICAgICAtTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKSlcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0ludCh0aGlzLFxuICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAgICBieXRlTGVuZ3RoLFxuICAgICAgICAgICAgIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkgLSAxLFxuICAgICAgICAgICAgIC1NYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZVxuICB9IGVsc2Ugb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gdmFsdWVcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCd2YWx1ZSBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHRhcmdldCwgdGFyZ2V0X3N0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzXG5cbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldF9zdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRfc3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0X3N0YXJ0KSB0YXJnZXRfc3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgc291cmNlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRfc3RhcnQgPCAwKVxuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSBzb3VyY2UubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aClcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldF9zdGFydCA8IGVuZCAtIHN0YXJ0KVxuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRfc3RhcnQgKyBzdGFydFxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuXG4gIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0X3N0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldF9zdGFydClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gZmlsbCh2YWx1ZSwgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiAodmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAwXG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGhcblxuICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpXG5cbiAgLy8gRmlsbCAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IHZhbHVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlCdWZmZXJgIHdpdGggdGhlICpjb3BpZWQqIG1lbW9yeSBvZiB0aGUgYnVmZmVyIGluc3RhbmNlLlxuICogQWRkZWQgaW4gTm9kZSAwLjEyLiBPbmx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgQXJyYXlCdWZmZXIuXG4gKi9cbkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgZ2V0L3NldCBtZXRob2RzIGJlZm9yZSBvdmVyd3JpdGluZ1xuICBhcnIuX2dldCA9IGFyci5nZXRcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZCwgd2lsbCBiZSByZW1vdmVkIGluIG5vZGUgMC4xMytcbiAgYXJyLmdldCA9IEJQLmdldFxuICBhcnIuc2V0ID0gQlAuc2V0XG5cbiAgYXJyLndyaXRlID0gQlAud3JpdGVcbiAgYXJyLnRvU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvTG9jYWxlU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvSlNPTiA9IEJQLnRvSlNPTlxuICBhcnIuZXF1YWxzID0gQlAuZXF1YWxzXG4gIGFyci5jb21wYXJlID0gQlAuY29tcGFyZVxuICBhcnIuY29weSA9IEJQLmNvcHlcbiAgYXJyLnNsaWNlID0gQlAuc2xpY2VcbiAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG4gIGFyci5yZWFkVUludEJFID0gQlAucmVhZFVJbnRCRVxuICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG4gIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcbiAgYXJyLnJlYWRVSW50MTZCRSA9IEJQLnJlYWRVSW50MTZCRVxuICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG4gIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcbiAgYXJyLnJlYWRJbnRMRSA9IEJQLnJlYWRJbnRMRVxuICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG4gIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG4gIGFyci5yZWFkSW50MTZMRSA9IEJQLnJlYWRJbnQxNkxFXG4gIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG4gIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG4gIGFyci5yZWFkSW50MzJCRSA9IEJQLnJlYWRJbnQzMkJFXG4gIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG4gIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG4gIGFyci5yZWFkRG91YmxlTEUgPSBCUC5yZWFkRG91YmxlTEVcbiAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcbiAgYXJyLndyaXRlVUludExFID0gQlAud3JpdGVVSW50TEVcbiAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcbiAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG4gIGFyci53cml0ZVVJbnQxNkJFID0gQlAud3JpdGVVSW50MTZCRVxuICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcbiAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG4gIGFyci53cml0ZUludExFID0gQlAud3JpdGVJbnRMRVxuICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcbiAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuICBhcnIud3JpdGVJbnQxNkxFID0gQlAud3JpdGVJbnQxNkxFXG4gIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcbiAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuICBhcnIud3JpdGVJbnQzMkJFID0gQlAud3JpdGVJbnQzMkJFXG4gIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcbiAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuICBhcnIud3JpdGVEb3VibGVMRSA9IEJQLndyaXRlRG91YmxlTEVcbiAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG4gIGFyci5maWxsID0gQlAuZmlsbFxuICBhcnIuaW5zcGVjdCA9IEJQLmluc3BlY3RcbiAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cbiAgcmV0dXJuIGFyclxufVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS16XFwtXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiBpc0FycmF5aXNoIChzdWJqZWN0KSB7XG4gIHJldHVybiBpc0FycmF5KHN1YmplY3QpIHx8IEJ1ZmZlci5pc0J1ZmZlcihzdWJqZWN0KSB8fFxuICAgICAgc3ViamVjdCAmJiB0eXBlb2Ygc3ViamVjdCA9PT0gJ29iamVjdCcgJiZcbiAgICAgIHR5cGVvZiBzdWJqZWN0Lmxlbmd0aCA9PT0gJ251bWJlcidcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyhzdHJpbmcsIHVuaXRzKSB7XG4gIHZhciBjb2RlUG9pbnQsIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGJ5dGVzID0gW11cbiAgdmFyIGkgPSAwXG5cbiAgZm9yICg7IGk8bGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG5cbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuXG4gICAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29kZVBvaW50ID0gbGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCB8IDB4MTAwMDBcbiAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICBlbHNlIHtcblxuICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICAgIH1cblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZVBvaW50IDwgMHgyMDAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuXG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgsIHVuaXRTaXplKSB7XG4gIGlmICh1bml0U2l6ZSkgbGVuZ3RoIC09IGxlbmd0aCAlIHVuaXRTaXplO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKVxuICAgICAgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBkZWNvZGVVdGY4Q2hhciAoc3RyKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHIpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCkgLy8gVVRGIDggaW52YWxpZCBjaGFyXG4gIH1cbn1cbiIsInZhciBsb29rdXAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbjsoZnVuY3Rpb24gKGV4cG9ydHMpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG4gIHZhciBBcnIgPSAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKVxuICAgID8gVWludDhBcnJheVxuICAgIDogQXJyYXlcblxuXHR2YXIgUExVUyAgID0gJysnLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIICA9ICcvJy5jaGFyQ29kZUF0KDApXG5cdHZhciBOVU1CRVIgPSAnMCcuY2hhckNvZGVBdCgwKVxuXHR2YXIgTE9XRVIgID0gJ2EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFVQUEVSICA9ICdBJy5jaGFyQ29kZUF0KDApXG5cdHZhciBQTFVTX1VSTF9TQUZFID0gJy0nLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIX1VSTF9TQUZFID0gJ18nLmNoYXJDb2RlQXQoMClcblxuXHRmdW5jdGlvbiBkZWNvZGUgKGVsdCkge1xuXHRcdHZhciBjb2RlID0gZWx0LmNoYXJDb2RlQXQoMClcblx0XHRpZiAoY29kZSA9PT0gUExVUyB8fFxuXHRcdCAgICBjb2RlID09PSBQTFVTX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYyIC8vICcrJ1xuXHRcdGlmIChjb2RlID09PSBTTEFTSCB8fFxuXHRcdCAgICBjb2RlID09PSBTTEFTSF9VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MyAvLyAnLydcblx0XHRpZiAoY29kZSA8IE5VTUJFUilcblx0XHRcdHJldHVybiAtMSAvL25vIG1hdGNoXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIgKyAxMClcblx0XHRcdHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNlxuXHRcdGlmIChjb2RlIDwgVVBQRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gVVBQRVJcblx0XHRpZiAoY29kZSA8IExPV0VSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIExPV0VSICsgMjZcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NFRvQnl0ZUFycmF5IChiNjQpIHtcblx0XHR2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuXG5cdFx0aWYgKGI2NC5sZW5ndGggJSA0ID4gMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Jylcblx0XHR9XG5cblx0XHQvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuXHRcdC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0XHQvLyByZXByZXNlbnQgb25lIGJ5dGVcblx0XHQvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcblx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdFx0dmFyIGxlbiA9IGI2NC5sZW5ndGhcblx0XHRwbGFjZUhvbGRlcnMgPSAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMikgPyAyIDogJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDEpID8gMSA6IDBcblxuXHRcdC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHRcdGFyciA9IG5ldyBBcnIoYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuXHRcdGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gYjY0Lmxlbmd0aCAtIDQgOiBiNjQubGVuZ3RoXG5cblx0XHR2YXIgTCA9IDBcblxuXHRcdGZ1bmN0aW9uIHB1c2ggKHYpIHtcblx0XHRcdGFycltMKytdID0gdlxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTgpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgMTIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPDwgNikgfCBkZWNvZGUoYjY0LmNoYXJBdChpICsgMykpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDAwMCkgPj4gMTYpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDApID4+IDgpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0aWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpID4+IDQpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTApIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgNCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA+PiAyKVxuXHRcdFx0cHVzaCgodG1wID4+IDgpICYgMHhGRilcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRyZXR1cm4gYXJyXG5cdH1cblxuXHRmdW5jdGlvbiB1aW50OFRvQmFzZTY0ICh1aW50OCkge1xuXHRcdHZhciBpLFxuXHRcdFx0ZXh0cmFCeXRlcyA9IHVpbnQ4Lmxlbmd0aCAlIDMsIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdFx0XHRvdXRwdXQgPSBcIlwiLFxuXHRcdFx0dGVtcCwgbGVuZ3RoXG5cblx0XHRmdW5jdGlvbiBlbmNvZGUgKG51bSkge1xuXHRcdFx0cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdFx0XHRyZXR1cm4gZW5jb2RlKG51bSA+PiAxOCAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiAxMiAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiA2ICYgMHgzRikgKyBlbmNvZGUobnVtICYgMHgzRilcblx0XHR9XG5cblx0XHQvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG5cdFx0Zm9yIChpID0gMCwgbGVuZ3RoID0gdWludDgubGVuZ3RoIC0gZXh0cmFCeXRlczsgaSA8IGxlbmd0aDsgaSArPSAzKSB7XG5cdFx0XHR0ZW1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHRcdFx0b3V0cHV0ICs9IHRyaXBsZXRUb0Jhc2U2NCh0ZW1wKVxuXHRcdH1cblxuXHRcdC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcblx0XHRzd2l0Y2ggKGV4dHJhQnl0ZXMpIHtcblx0XHRcdGNhc2UgMTpcblx0XHRcdFx0dGVtcCA9IHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAyKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9PSdcblx0XHRcdFx0YnJlYWtcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0dGVtcCA9ICh1aW50OFt1aW50OC5sZW5ndGggLSAyXSA8PCA4KSArICh1aW50OFt1aW50OC5sZW5ndGggLSAxXSlcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDEwKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wID4+IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCAyKSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPSdcblx0XHRcdFx0YnJlYWtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3V0cHV0XG5cdH1cblxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gYjY0VG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gdWludDhUb0Jhc2U2NFxufSh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyAodGhpcy5iYXNlNjRqcyA9IHt9KSA6IGV4cG9ydHMpKVxuIiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24oYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSxcbiAgICAgIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEsXG4gICAgICBlTWF4ID0gKDEgPDwgZUxlbikgLSAxLFxuICAgICAgZUJpYXMgPSBlTWF4ID4+IDEsXG4gICAgICBuQml0cyA9IC03LFxuICAgICAgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwLFxuICAgICAgZCA9IGlzTEUgPyAtMSA6IDEsXG4gICAgICBzID0gYnVmZmVyW29mZnNldCArIGldO1xuXG4gIGkgKz0gZDtcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKTtcbiAgcyA+Pj0gKC1uQml0cyk7XG4gIG5CaXRzICs9IGVMZW47XG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpO1xuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpO1xuICBlID4+PSAoLW5CaXRzKTtcbiAgbkJpdHMgKz0gbUxlbjtcbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCk7XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzO1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSk7XG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKTtcbiAgICBlID0gZSAtIGVCaWFzO1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pO1xufTtcblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjLFxuICAgICAgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMSxcbiAgICAgIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEsXG4gICAgICBlQmlhcyA9IGVNYXggPj4gMSxcbiAgICAgIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKSxcbiAgICAgIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKSxcbiAgICAgIGQgPSBpc0xFID8gMSA6IC0xLFxuICAgICAgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMDtcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKTtcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMDtcbiAgICBlID0gZU1heDtcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMik7XG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tO1xuICAgICAgYyAqPSAyO1xuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gYztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrKztcbiAgICAgIGMgLz0gMjtcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwO1xuICAgICAgZSA9IGVNYXg7XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IGUgKyBlQmlhcztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IDA7XG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCk7XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbTtcbiAgZUxlbiArPSBtTGVuO1xuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpO1xuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyODtcbn07XG4iLCJhcmd1bWVudHNbNF1bXCIvVXNlcnMvdG1jdy9zcmMvcHJlc2VudGF0aW9ucy90dXJmLWdlb2RjL25vZGVfbW9kdWxlcy90dXJmL25vZGVfbW9kdWxlcy9pcy1hcnJheS9pbmRleC5qc1wiXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykiXX0=
